!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){r(42),r(43),r(350),t.exports=r(609)},,,function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(9),s=r(11),u=r(19),c=r(17),a=r(20),f=r(21),h=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r,this.observers=[],this.isUnsubscribed=!1,this.isStopped=!1,this.hasErrored=!1,this.dispatching=!1,this.hasCompleted=!1,this.source=r}return n(e,t),e.prototype.lift=function(t){var r=new e(this.destination||this,this);return r.operator=t,r},e.prototype.add=function(t){return s.Subscription.prototype.add.call(this,t)},e.prototype.remove=function(t){s.Subscription.prototype.remove.call(this,t)},e.prototype.unsubscribe=function(){s.Subscription.prototype.unsubscribe.call(this)},e.prototype._subscribe=function(t){if(this.source)return this.source.subscribe(t);if(!t.isUnsubscribed){if(this.hasErrored)return t.error(this.errorValue);if(this.hasCompleted)return t.complete();this.throwIfUnsubscribed();var e=new u.SubjectSubscription(this,t);return this.observers.push(t),e}},e.prototype._unsubscribe=function(){this.source=null,this.isStopped=!0,this.observers=null,this.destination=null},e.prototype.next=function(t){this.throwIfUnsubscribed(),this.isStopped||(this.dispatching=!0,this._next(t),this.dispatching=!1,this.hasErrored?this._error(this.errorValue):this.hasCompleted&&this._complete())},e.prototype.error=function(t){this.throwIfUnsubscribed(),this.isStopped||(this.isStopped=!0,this.hasErrored=!0,this.errorValue=t,this.dispatching||this._error(t))},e.prototype.complete=function(){this.throwIfUnsubscribed(),this.isStopped||(this.isStopped=!0,this.hasCompleted=!0,this.dispatching||this._complete())},e.prototype.asObservable=function(){var t=new l(this);return t},e.prototype._next=function(t){this.destination?this.destination.next(t):this._finalNext(t)},e.prototype._finalNext=function(t){for(var e=-1,r=this.observers.slice(0),n=r.length;++e<n;)r[e].next(t)},e.prototype._error=function(t){this.destination?this.destination.error(t):this._finalError(t)},e.prototype._finalError=function(t){var e=-1,r=this.observers;if(this.observers=null,this.isUnsubscribed=!0,r)for(var n=r.length;++e<n;)r[e].error(t);this.isUnsubscribed=!1,this.unsubscribe()},e.prototype._complete=function(){this.destination?this.destination.complete():this._finalComplete()},e.prototype._finalComplete=function(){var t=-1,e=this.observers;if(this.observers=null,this.isUnsubscribed=!0,e)for(var r=e.length;++t<r;)e[t].complete();this.isUnsubscribed=!1,this.unsubscribe()},e.prototype.throwIfUnsubscribed=function(){this.isUnsubscribed&&a.throwError(new f.ObjectUnsubscribedError)},e.prototype[c.$$rxSubscriber]=function(){return new o.Subscriber(this)},e.create=function(t,r){return new e(t,r)},e}(i.Observable);e.Subject=h;var l=function(t){function e(e){t.call(this),this.source=e}return n(e,t),e}(i.Observable)},function(t,e,r){"use strict";var n=r(5),i=r(7),o=r(8),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(i.add(n?n.call(i,this):this._subscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var i=r.subscribe(function(e){if(i)try{t(e)}catch(r){n(r),i.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.$$observable]=function(){return this},t.create=function(e){return new t(e)},t}();e.Observable=s},function(t,e,r){(function(t,r){"use strict";var n={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.root=n[typeof self]&&self||n[typeof window]&&window;var i=(n[typeof e]&&e&&!e.nodeType&&e,n[typeof t]&&t&&!t.nodeType&&t,n[typeof r]&&r);!i||i.global!==i&&i.window!==i||(e.root=i)}).call(e,r(6)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){"use strict";var n=r(5),i=n.root.Symbol;"function"==typeof i?i.observable?e.$$observable=i.observable:("function"==typeof i["for"]?e.$$observable=i["for"]("observable"):e.$$observable=i("observable"),i.observable=e.$$observable):e.$$observable="@@observable"},function(t,e,r){"use strict";function n(t,e,r){if(t&&"object"==typeof t){if(t instanceof i.Subscriber)return t;if("function"==typeof t[o.$$rxSubscriber])return t[o.$$rxSubscriber]()}return new i.Subscriber(t,e,r)}var i=r(9),o=r(17);e.toSubscriber=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(10),o=r(11),s=r(17),u=r(18),c=function(t){function e(r,n,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u.empty;break;case 1:if(!r){this.destination=u.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new a(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new a(this,r,n,i)}}return n(e,t),e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.isUnsubscribed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype[s.$$rxSubscriber]=function(){return this},e}(o.Subscription);e.Subscriber=c;var a=function(t){function e(e,r,n,o){t.call(this),this._parent=e;var s,u=this;i.isFunction(r)?s=r:r&&(u=r,s=r.next,n=r.error,o=r.complete,i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this)),this._context=u,this._next=s,this._error=n,this._complete=o}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parent;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parent;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){if(!this.isStopped){var t=this._parent;this._complete?t.syncErrorThrowable?(this.__tryOrSetError(t,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(r){throw this.unsubscribe(),r}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(n){return t.syncErrorValue=n,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parent;this._context=null,this._parent=null,t.unsubscribe()},e}(c)},function(t,e){"use strict";function r(t){return"function"==typeof t}e.isFunction=r},function(t,e,r){"use strict";var n=r(12),i=r(13),o=r(10),s=r(14),u=r(15),c=r(16),a=function(){function t(t){this.isUnsubscribed=!1,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.isUnsubscribed){this.isUnsubscribed=!0;var r=this,a=r._unsubscribe,f=r._subscriptions;if(this._subscriptions=null,o.isFunction(a)){var h=s.tryCatch(a).call(this);h===u.errorObject&&(e=!0,(t=t||[]).push(u.errorObject.e))}if(n.isArray(f))for(var l=-1,p=f.length;++l<p;){var v=f[l];if(i.isObject(v)){var h=s.tryCatch(v.unsubscribe).call(v);if(h===u.errorObject){e=!0,t=t||[];var b=u.errorObject.e;b instanceof c.UnsubscriptionError?t=t.concat(b.errors):t.push(b)}}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(e&&e!==this&&e!==t.EMPTY){var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.isUnsubscribed||"function"!=typeof r.unsubscribe)break;this.isUnsubscribed?r.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(r);break;default:throw new Error("Unrecognized teardown "+e+" added to Subscription.")}return r}},t.prototype.remove=function(e){if(null!=e&&e!==this&&e!==t.EMPTY){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}}},t.EMPTY=function(t){return t.isUnsubscribed=!0,t}(new t),t}();e.Subscription=a},function(t,e){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e){"use strict";function r(t){return null!=t&&"object"==typeof t}e.isObject=r},function(t,e,r){"use strict";function n(){try{return o.apply(this,arguments)}catch(t){return s.errorObject.e=t,s.errorObject}}function i(t){return o=t,n}var o,s=r(15);e.tryCatch=i},function(t,e){"use strict";e.errorObject={e:{}}},function(t,e){"use strict";var r=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e){t.call(this),this.errors=e,this.name="UnsubscriptionError",this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n"):""}return r(e,t),e}(Error);e.UnsubscriptionError=n},function(t,e,r){"use strict";var n=r(5),i=n.root.Symbol;e.$$rxSubscriber="function"==typeof i&&"function"==typeof i["for"]?i["for"]("rxSubscriber"):"@@rxSubscriber"},function(t,e){"use strict";e.empty={isUnsubscribed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(11),o=function(t){function e(e,r){t.call(this),this.subject=e,this.observer=r,this.isUnsubscribed=!1}return n(e,t),e.prototype.unsubscribe=function(){if(!this.isUnsubscribed){this.isUnsubscribed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isUnsubscribed){var r=e.indexOf(this.observer);r!==-1&&e.splice(r,1)}}},e}(i.Subscription);e.SubjectSubscription=o},function(t,e){"use strict";function r(t){throw t}e.throwError=r},function(t,e){"use strict";var r=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){t.call(this,"object unsubscribed"),this.name="ObjectUnsubscribedError"}return r(e,t),e}(Error);e.ObjectUnsubscribedError=n},,,,,,,,,,,,,,,,,,,,,function(t,e){(function(t){/*! *****************************************************************************
	Copyright (C) Microsoft. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0
	
	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.
	
	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var e;!function(e){"use strict";function r(t,e,r,n){if(S(n)){if(S(r)){if(!x(t))throw new TypeError;if(!j(e))throw new TypeError;return l(t,e)}if(!x(t))throw new TypeError;if(!T(e))throw new TypeError;return r=k(r),v(t,e,r)}if(!x(t))throw new TypeError;if(!T(e))throw new TypeError;if(S(r))throw new TypeError;if(!T(n))throw new TypeError;return r=k(r),p(t,e,r,n)}function n(t,e){function r(r,n){if(S(n)){if(!j(r))throw new TypeError;_(t,e,r,void 0)}else{if(!T(r))throw new TypeError;n=k(n),_(t,e,r,n)}}return r}function i(t,e,r,n){if(!T(r))throw new TypeError;return S(n)||(n=k(n)),_(t,e,r,n)}function o(t,e,r){if(!T(e))throw new TypeError;return S(r)||(r=k(r)),d(t,e,r)}function s(t,e,r){if(!T(e))throw new TypeError;return S(r)||(r=k(r)),y(t,e,r)}function u(t,e,r){if(!T(e))throw new TypeError;return S(r)||(r=k(r)),m(t,e,r)}function c(t,e,r){if(!T(e))throw new TypeError;return S(r)||(r=k(r)),w(t,e,r)}function a(t,e){if(!T(t))throw new TypeError;return S(e)||(e=k(e)),g(t,e)}function f(t,e){if(!T(t))throw new TypeError;return S(e)||(e=k(e)),O(t,e)}function h(t,e,r){if(!T(e))throw new TypeError;S(r)||(r=k(r));var n=b(e,r,!1);if(S(n))return!1;if(!n["delete"](t))return!1;if(n.size>0)return!0;var i=q.get(e);return i["delete"](r),i.size>0||(q["delete"](e),!0)}function l(t,e){for(var r=t.length-1;r>=0;--r){var n=t[r],i=n(e);if(!S(i)){if(!j(i))throw new TypeError;e=i}}return e}function p(t,e,r,n){for(var i=t.length-1;i>=0;--i){var o=t[i],s=o(e,r,n);if(!S(s)){if(!T(s))throw new TypeError;n=s}}return n}function v(t,e,r){for(var n=t.length-1;n>=0;--n){var i=t[n];i(e,r)}}function b(t,e,r){var n=q.get(t);if(!n){if(!r)return;n=new Z,q.set(t,n)}var i=n.get(e);if(!i){if(!r)return;i=new Z,n.set(e,i)}return i}function d(t,e,r){var n=y(t,e,r);if(n)return!0;var i=P(e);return null!==i&&d(t,i,r)}function y(t,e,r){var n=b(e,r,!1);return void 0!==n&&Boolean(n.has(t))}function m(t,e,r){var n=y(t,e,r);if(n)return w(t,e,r);var i=P(e);return null!==i?m(t,i,r):void 0}function w(t,e,r){var n=b(e,r,!1);return void 0===n?void 0:n.get(t)}function _(t,e,r,n){var i=b(r,n,!0);i.set(t,e)}function g(t,e){var r=O(t,e),n=P(t);if(null===n)return r;var i=g(n,e);if(i.length<=0)return r;if(r.length<=0)return i;for(var o=new G,s=0;s<r.length;s++){var u=r[s];o.add(u)}for(var c=0;c<i.length;c++){var u=i[c];o.add(u)}return M(o)}function O(t,e){var r=b(t,e,!1),n=[];return r&&C(r,function(t,e){return n.push(e)}),n}function S(t){return void 0===t}function x(t){return Array.isArray?Array.isArray(t):t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function T(t){return"object"==typeof t?null!==t:"function"==typeof t}function j(t){return"function"==typeof t}function E(t){return"symbol"==typeof t}function k(t){return E(t)?t:String(t)}function P(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===$)return e;if(e!==$)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var i=n.constructor;return"function"!=typeof i?e:i===t?e:i}function I(t){var e=t.next();return e.done?void 0:e}function N(t){var e=t["return"];e&&e.call(t)}function C(t,e,r){var n=t.entries;if("function"==typeof n){var i,o=n.call(t);try{for(;i=I(o);){var s=i.value,u=s[0],c=s[1];e.call(r,c,u,t)}}finally{i&&N(o)}}else{var a=t.forEach;"function"==typeof a&&a.call(t,e,r)}}function M(t){var e=[];return C(t,function(t,r){e.push(r)}),e}function F(t,e,r){var n=0;return{next:function(){if((t||e)&&n<(t||e).length){var i=n++;switch(r){case"key":return{value:t[i],done:!1};case"value":return{value:e[i],done:!1};case"key+value":return{value:[t[i],e[i]],done:!1}}}return t=void 0,e=void 0,{value:void 0,done:!0}},"throw":function(r){throw(t||e)&&(t=void 0,e=void 0),r},"return":function(r){return(t||e)&&(t=void 0,e=void 0),{value:r,done:!0}}}}function A(){var t={};return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype["delete"]=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,this._cacheKey=t,this._cacheIndex=-2,!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return F(this._keys,void 0,"key")},e.prototype.values=function(){return F(void 0,this._values,"value")},e.prototype.entries=function(){return F(this._keys,this._values,"key+value")},e.prototype._find=function(t,e){if(this._cacheKey===t)return this._cacheIndex;var r=this._keys.indexOf(t);return r<0&&e&&(r=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheKey=t,this._cacheIndex=r},e}()}function R(){return function(){function t(){this._map=new Z}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype["delete"]=function(t){return this._map["delete"](t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t}()}function U(){function t(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function e(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):t(new Uint8Array(e),e):t(new Array(e),e)}function r(){var t=e(o);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<o;++n){var i=t[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}function n(){var t;do t="@@WeakMap@@"+r();while(D.has(s,t));return s[t]=!0,t}function i(t,e){if(!L.call(t,u)){if(!e)return;Object.defineProperty(t,u,{value:B()})}return t[u]}var o=16,s=B(),u=n();return function(){function t(){this._key=n()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&D.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?D.get(e,this._key):void 0},t.prototype.set=function(t,e){var r=i(t,!0);return r[this._key]=e,this},t.prototype["delete"]=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=n()},t}()}function V(t){return t.__DICTIONARY_MODE__=1,delete t.____DICTIONARY_MODE__,t}var D,L=Object.prototype.hasOwnProperty,z="function"==typeof Object.create,W=function(){function t(){}var e={};t.prototype=e;var r=new t;return r.__proto__===e}(),B=z?function(){return V(Object.create(null))}:W?function(){return V({__proto__:null})}:function(){return V({})};!function(t){var e=!z&&!W;t.has=e?function(t,e){return L.call(t,e)}:function(t,e){return e in t},t.get=e?function(t,e){return L.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}}(D||(D={}));var $=Object.getPrototypeOf(Function),Z="function"==typeof Map?Map:A(),G="function"==typeof Set?Set:R(),H="function"==typeof WeakMap?WeakMap:U(),q=new H;e.decorate=r,e.metadata=n,e.defineMetadata=i,e.hasMetadata=o,e.hasOwnMetadata=s,e.getMetadata=u,e.getOwnMetadata=c,e.getMetadataKeys=a,e.getOwnMetadataKeys=f,e.deleteMetadata=h,function(t){if("undefined"!=typeof t.Reflect){if(t.Reflect!==e)for(var r in e)L.call(e,r)&&(t.Reflect[r]=e[r])}else t.Reflect=e}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof t?t:Function("return this;")())}(e||(e={}))}).call(e,function(){return this}())},function(t,e,r){r(44),r(335),r(206),r(337),r(336),r(338),r(339),r(340),r(341),r(342),r(344),r(345),r(346),r(348),r(349),t.exports=r(51)},function(t,e,r){r(45),r(94),r(95),r(96),r(97),r(99),r(102),r(103),r(104),r(105),r(106),r(107),r(108),r(109),r(110),r(112),r(114),r(116),r(118),r(121),r(122),r(123),r(127),r(129),r(131),r(134),r(135),r(136),r(137),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(147),r(148),r(149),r(151),r(152),r(153),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(173),r(174),r(178),r(179),r(180),r(181),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(201),r(202),r(208),r(209),r(211),r(212),r(213),r(217),r(218),r(219),r(220),r(221),r(223),r(224),r(225),r(226),r(229),r(231),r(232),r(233),r(235),r(237),r(239),r(240),r(241),r(243),r(244),r(245),r(246),r(253),r(256),r(257),r(259),r(260),r(263),r(264),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(286),r(287),r(288),r(289),r(290),r(291),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(302),r(303),r(305),r(306),r(307),r(308),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(333),r(334),t.exports=r(51)},function(t,e,r){"use strict";var n=r(46),i=r(47),o=r(48),s=r(50),u=r(60),c=r(64).KEY,a=r(49),f=r(65),h=r(66),l=r(61),p=r(67),v=r(68),b=r(69),d=r(71),y=r(84),m=r(87),w=r(54),_=r(74),g=r(58),O=r(59),S=r(88),x=r(91),T=r(93),j=r(53),E=r(72),k=T.f,P=j.f,I=x.f,N=n.Symbol,C=n.JSON,M=C&&C.stringify,F="prototype",A=p("_hidden"),R=p("toPrimitive"),U={}.propertyIsEnumerable,V=f("symbol-registry"),D=f("symbols"),L=f("op-symbols"),z=Object[F],W="function"==typeof N,B=n.QObject,$=!B||!B[F]||!B[F].findChild,Z=o&&a(function(){return 7!=S(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=k(z,e);n&&delete z[e],P(t,e,r),n&&t!==z&&P(z,e,n)}:P,G=function(t){var e=D[t]=S(N[F]);return e._k=t,e},H=W&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},q=function(t,e,r){return t===z&&q(L,e,r),w(t),e=g(e,!0),w(r),i(D,e)?(r.enumerable?(i(t,A)&&t[A][e]&&(t[A][e]=!1),r=S(r,{enumerable:O(0,!1)})):(i(t,A)||P(t,A,O(1,{})),t[A][e]=!0),Z(t,e,r)):P(t,e,r)},Y=function(t,e){w(t);for(var r,n=y(e=_(e)),i=0,o=n.length;o>i;)q(t,r=n[i++],e[r]);return t},K=function(t,e){return void 0===e?S(t):Y(S(t),e)},X=function(t){var e=U.call(this,t=g(t,!0));return!(this===z&&i(D,t)&&!i(L,t))&&(!(e||!i(this,t)||!i(D,t)||i(this,A)&&this[A][t])||e)},J=function(t,e){if(t=_(t),e=g(e,!0),t!==z||!i(D,e)||i(L,e)){var r=k(t,e);return!r||!i(D,e)||i(t,A)&&t[A][e]||(r.enumerable=!0),r}},Q=function(t){for(var e,r=I(_(t)),n=[],o=0;r.length>o;)i(D,e=r[o++])||e==A||e==c||n.push(e);return n},tt=function(t){for(var e,r=t===z,n=I(r?L:_(t)),o=[],s=0;n.length>s;)!i(D,e=n[s++])||r&&!i(z,e)||o.push(D[e]);return o};W||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=l(arguments.length>0?arguments[0]:void 0),e=function(r){this===z&&e.call(L,r),i(this,A)&&i(this[A],t)&&(this[A][t]=!1),Z(this,t,O(1,r))};return o&&$&&Z(z,t,{configurable:!0,set:e}),G(t)},u(N[F],"toString",function(){return this._k}),T.f=J,j.f=q,r(92).f=x.f=Q,r(86).f=X,r(85).f=tt,o&&!r(70)&&u(z,"propertyIsEnumerable",X,!0),v.f=function(t){return G(p(t))}),s(s.G+s.W+s.F*!W,{Symbol:N});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)p(et[rt++]);for(var et=E(p.store),rt=0;et.length>rt;)b(et[rt++]);s(s.S+s.F*!W,"Symbol",{"for":function(t){return i(V,t+="")?V[t]:V[t]=N(t)},keyFor:function(t){if(H(t))return d(V,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){$=!0},useSimple:function(){$=!1}}),s(s.S+s.F*!W,"Object",{create:K,defineProperty:q,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),C&&s(s.S+s.F*(!W||a(function(){var t=N();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!H(t)){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);return e=n[1],"function"==typeof e&&(r=e),!r&&m(e)||(e=function(t,e){if(r&&(e=r.call(this,t,e)),!H(e))return e}),n[1]=e,M.apply(C,n)}}}),N[F][R]||r(52)(N[F],R,N[F].valueOf),h(N,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){t.exports=!r(49)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,r){var n=r(46),i=r(51),o=r(52),s=r(60),u=r(62),c="prototype",a=function(t,e,r){var f,h,l,p,v=t&a.F,b=t&a.G,d=t&a.S,y=t&a.P,m=t&a.B,w=b?n:d?n[e]||(n[e]={}):(n[e]||{})[c],_=b?i:i[e]||(i[e]={}),g=_[c]||(_[c]={});b&&(r=e);for(f in r)h=!v&&w&&void 0!==w[f],l=(h?w:r)[f],p=m&&h?u(l,n):y&&"function"==typeof l?u(Function.call,l):l,w&&s(w,f,l,t&a.U),_[f]!=l&&o(_,f,p),y&&g[f]!=l&&(g[f]=l)};n.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(53),i=r(59);t.exports=r(48)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(54),i=r(56),o=r(58),s=Object.defineProperty;e.f=r(48)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return s(t,e,r)}catch(u){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(55);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){t.exports=!r(48)&&!r(49)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(55),i=r(46).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(55);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(46),i=r(52),o=r(47),s=r(61)("src"),u="toString",c=Function[u],a=(""+c).split(u);r(51).inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,r,u){var c="function"==typeof r;c&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(c&&(o(r,s)||i(r,s,t[e]?""+t[e]:a.join(String(e)))),t===n?t[e]=r:u?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,u,function(){return"function"==typeof this&&this[s]||c.call(this)})},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(63);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(61)("meta"),i=r(55),o=r(47),s=r(53).f,u=0,c=Object.isExtensible||function(){return!0},a=!r(49)(function(){return c(Object.preventExtensions({}))}),f=function(t){s(t,n,{value:{i:"O"+ ++u,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!c(t))return"F";if(!e)return"E";f(t)}return t[n].i},l=function(t,e){if(!o(t,n)){if(!c(t))return!0;if(!e)return!1;f(t)}return t[n].w},p=function(t){return a&&v.NEED&&c(t)&&!o(t,n)&&f(t),t},v=t.exports={KEY:n,NEED:!1,fastKey:h,getWeak:l,onFreeze:p}},function(t,e,r){var n=r(46),i="__core-js_shared__",o=n[i]||(n[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,r){var n=r(53).f,i=r(47),o=r(67)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(65)("wks"),i=r(61),o=r(46).Symbol,s="function"==typeof o,u=t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))};u.store=n},function(t,e,r){e.f=r(67)},function(t,e,r){var n=r(46),i=r(51),o=r(70),s=r(68),u=r(53).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:s.f(t)})}},function(t,e){t.exports=!1},function(t,e,r){var n=r(72),i=r(74);t.exports=function(t,e){for(var r,o=i(t),s=n(o),u=s.length,c=0;u>c;)if(o[r=s[c++]]===e)return r}},function(t,e,r){var n=r(73),i=r(83);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var n=r(47),i=r(74),o=r(78)(!1),s=r(82)("IE_PROTO");t.exports=function(t,e){var r,u=i(t),c=0,a=[];for(r in u)r!=s&&n(u,r)&&a.push(r);for(;e.length>c;)n(u,r=e[c++])&&(~o(a,r)||a.push(r));return a}},function(t,e,r){var n=r(75),i=r(77);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(76);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(74),i=r(79),o=r(81);t.exports=function(t){return function(e,r,s){var u,c=n(e),a=i(c.length),f=o(s,a);if(t&&r!=r){for(;a>f;)if(u=c[f++],u!=u)return!0}else for(;a>f;f++)if((t||f in c)&&c[f]===r)return t||f||0;return!t&&-1}}},function(t,e,r){var n=r(80),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(80),i=Math.max,o=Math.min;t.exports=function(t,e){return t=n(t),t<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(65)("keys"),i=r(61);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(72),i=r(85),o=r(86);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var s,u=r(t),c=o.f,a=0;u.length>a;)c.call(t,s=u[a++])&&e.push(s);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(76);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(54),i=r(89),o=r(83),s=r(82)("IE_PROTO"),u=function(){},c="prototype",a=function(){var t,e=r(57)("iframe"),n=o.length,i="<",s=">";for(e.style.display="none",r(90).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+s+"document.F=Object"+i+"/script"+s),t.close(),a=t.F;n--;)delete a[c][o[n]];return a()};t.exports=Object.create||function(t,e){var r;return null!==t?(u[c]=n(t),r=new u,u[c]=null,r[s]=t):r=a(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(53),i=r(54),o=r(72);t.exports=r(48)?Object.defineProperties:function(t,e){i(t);for(var r,s=o(e),u=s.length,c=0;u>c;)n.f(t,r=s[c++],e[r]);return t}},function(t,e,r){t.exports=r(46).document&&document.documentElement},function(t,e,r){var n=r(74),i=r(92).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return i(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?u(t):i(n(t))}},function(t,e,r){var n=r(73),i=r(83).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){var n=r(86),i=r(59),o=r(74),s=r(58),u=r(47),c=r(56),a=Object.getOwnPropertyDescriptor;e.f=r(48)?a:function(t,e){if(t=o(t),e=s(e,!0),c)try{return a(t,e)}catch(r){}if(u(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(50);n(n.S,"Object",{create:r(88)})},function(t,e,r){var n=r(50);n(n.S+n.F*!r(48),"Object",{defineProperty:r(53).f})},function(t,e,r){var n=r(50);n(n.S+n.F*!r(48),"Object",{defineProperties:r(89)})},function(t,e,r){var n=r(74),i=r(93).f;r(98)("getOwnPropertyDescriptor",function(){return function(t,e){return i(n(t),e)}})},function(t,e,r){var n=r(50),i=r(51),o=r(49);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],s={};s[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",s)}},function(t,e,r){var n=r(100),i=r(101);r(98)("getPrototypeOf",function(){return function(t){return i(n(t))}})},function(t,e,r){var n=r(77);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(47),i=r(100),o=r(82)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,r){var n=r(100),i=r(72);r(98)("keys",function(){return function(t){return i(n(t))}})},function(t,e,r){r(98)("getOwnPropertyNames",function(){return r(91).f})},function(t,e,r){var n=r(55),i=r(64).onFreeze;r(98)("freeze",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(55),i=r(64).onFreeze;r(98)("seal",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(55),i=r(64).onFreeze;r(98)("preventExtensions",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(55);r(98)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,r){var n=r(55);r(98)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,r){var n=r(55);r(98)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,r){var n=r(50);n(n.S+n.F,"Object",{assign:r(111)})},function(t,e,r){"use strict";var n=r(72),i=r(85),o=r(86),s=r(100),u=r(75),c=Object.assign;t.exports=!c||r(49)(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=c({},t)[r]||Object.keys(c({},e)).join("")!=n})?function(t,e){for(var r=s(t),c=arguments.length,a=1,f=i.f,h=o.f;c>a;)for(var l,p=u(arguments[a++]),v=f?n(p).concat(f(p)):n(p),b=v.length,d=0;b>d;)h.call(p,l=v[d++])&&(r[l]=p[l]);return r}:c},function(t,e,r){var n=r(50);n(n.S,"Object",{is:r(113)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,r){var n=r(50);n(n.S,"Object",{setPrototypeOf:r(115).set})},function(t,e,r){var n=r(55),i=r(54),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(62)(Function.call,r(93).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},function(t,e,r){"use strict";var n=r(117),i={};i[r(67)("toStringTag")]="z",i+""!="[object z]"&&r(60)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,r){var n=r(76),i=r(67)("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(r){}};t.exports=function(t){var e,r,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=s(e=Object(t),i))?r:o?n(e):"Object"==(u=n(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e,r){var n=r(50);n(n.P,"Function",{bind:r(119)})},function(t,e,r){"use strict";var n=r(63),i=r(55),o=r(120),s=[].slice,u={},c=function(t,e,r){if(!(e in u)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";u[e]=Function("F,a","return new F("+n.join(",")+")")}return u[e](t,r)};t.exports=Function.bind||function(t){var e=n(this),r=s.call(arguments,1),u=function(){var n=r.concat(s.call(arguments));return this instanceof u?c(e,n.length,n):o(e,n,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(53).f,i=r(59),o=r(47),s=Function.prototype,u=/^\s*function ([^ (]*)/,c="name",a=Object.isExtensible||function(){return!0};c in s||r(48)&&n(s,c,{configurable:!0,get:function(){try{var t=this,e=(""+t).match(u)[1];return o(t,c)||!a(t)||n(t,c,i(5,e)),e}catch(r){return""}}})},function(t,e,r){"use strict";var n=r(55),i=r(101),o=r(67)("hasInstance"),s=Function.prototype;o in s||r(53).f(s,o,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,r){var n=r(50),i=r(124);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(t,e,r){var n=r(46).parseInt,i=r(125).trim,o=r(126),s=/^[\-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(t,e){var r=i(String(t),3);return n(r,e>>>0||(s.test(r)?16:10))}:n},function(t,e,r){var n=r(50),i=r(77),o=r(49),s=r(126),u="["+s+"]",c="​",a=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$"),h=function(t,e,r){var i={},u=o(function(){return!!s[t]()||c[t]()!=c}),a=i[t]=u?e(l):s[t];r&&(i[r]=a),n(n.P+n.F*u,"String",i)},l=h.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(a,"")),2&e&&(t=t.replace(f,"")),t};t.exports=h},function(t,e){t.exports="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,r){var n=r(50),i=r(128);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(t,e,r){var n=r(46).parseFloat,i=r(125).trim;t.exports=1/n(r(126)+"-0")!==-(1/0)?function(t){var e=i(String(t),3),r=n(e);return 0===r&&"-"==e.charAt(0)?-0:r}:n},function(t,e,r){"use strict";var n=r(46),i=r(47),o=r(76),s=r(130),u=r(58),c=r(49),a=r(92).f,f=r(93).f,h=r(53).f,l=r(125).trim,p="Number",v=n[p],b=v,d=v.prototype,y=o(r(88)(d))==p,m="trim"in String.prototype,w=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){e=m?e.trim():l(e,3);var r,n,i,o=e.charCodeAt(0);if(43===o||45===o){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var s,c=e.slice(2),a=0,f=c.length;a<f;a++)if(s=c.charCodeAt(a),s<48||s>i)return NaN;return parseInt(c,n)}}return+e};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof v&&(y?c(function(){d.valueOf.call(r)}):o(r)!=p)?s(new b(w(e)),r,v):w(e)};for(var _,g=r(48)?a(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;g.length>O;O++)i(b,_=g[O])&&!i(v,_)&&h(v,_,f(b,_));v.prototype=d,d.constructor=v,r(60)(n,p,v)}},function(t,e,r){var n=r(55),i=r(115).set;t.exports=function(t,e,r){var o,s=e.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},function(t,e,r){"use strict";var n=r(50),i=r(80),o=r(132),s=r(133),u=1..toFixed,c=Math.floor,a=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",h="0",l=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*a[r],a[r]=n%1e7,n=c(n/1e7)},p=function(t){for(var e=6,r=0;--e>=0;)r+=a[e],a[e]=c(r/t),r=r%t*1e7},v=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==a[t]){var r=String(a[t]);e=""===e?r:e+s.call(h,7-r.length)+r}return e},b=function(t,e,r){return 0===e?r:e%2===1?b(t,e-1,r*t):b(t*t,e/2,r)},d=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e};n(n.P+n.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(49)(function(){u.call({})})),"Number",{toFixed:function(t){var e,r,n,u,c=o(this,f),a=i(t),y="",m=h;if(a<0||a>20)throw RangeError(f);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(y="-",c=-c),c>1e-21)if(e=d(c*b(2,69,1))-69,r=e<0?c*b(2,-e,1):c/b(2,e,1),r*=4503599627370496,e=52-e,e>0){for(l(0,r),n=a;n>=7;)l(1e7,0),n-=7;for(l(b(10,n,1),0),n=e-1;n>=23;)p(1<<23),n-=23;p(1<<n),l(1,1),p(2),m=v()}else l(0,r),l(1<<-e,0),m=v()+s.call(h,a);return a>0?(u=m.length,m=y+(u<=a?"0."+s.call(h,a-u)+m:m.slice(0,u-a)+"."+m.slice(u-a))):m=y+m,m}})},function(t,e,r){var n=r(76);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,r){"use strict";var n=r(80),i=r(77);t.exports=function(t){var e=String(i(this)),r="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},function(t,e,r){"use strict";var n=r(50),i=r(49),o=r(132),s=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==s.call(1,void 0)})||!i(function(){s.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,r){var n=r(50);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,r){var n=r(50),i=r(46).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,r){var n=r(50);n(n.S,"Number",{isInteger:r(138)})},function(t,e,r){var n=r(55),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(t,e,r){var n=r(50);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,r){var n=r(50),i=r(138),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,r){var n=r(50);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){var n=r(50);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,r){var n=r(50),i=r(128);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,r){var n=r(50),i=r(124);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,r){var n=r(50),i=r(146),o=Math.sqrt,s=Math.acosh;n(n.S+n.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,r){function n(t){return isFinite(t=+t)&&0!=t?t<0?-n(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(50),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:n})},function(t,e,r){var n=r(50),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,r){var n=r(50),i=r(150);n(n.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,r){var n=r(50);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,r){var n=r(50),i=Math.exp;n(n.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,r){var n=r(50),i=r(154);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||r(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,e,r){var n=r(50),i=r(150),o=Math.pow,s=o(2,-52),u=o(2,-23),c=o(2,127)*(2-u),a=o(2,-126),f=function(t){return t+1/s-1/s};n(n.S,"Math",{fround:function(t){var e,r,n=Math.abs(t),o=i(t);return n<a?o*f(n/a/u)*a*u:(e=(1+u/s)*n,r=e-(e-n),r>c||r!=r?o*(1/0):o*r)}})},function(t,e,r){var n=r(50),i=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,o=0,s=0,u=arguments.length,c=0;s<u;)r=i(arguments[s++]),
c<r?(n=c/r,o=o*n*n+1,c=r):r>0?(n=r/c,o+=n*n):o+=r;return c===1/0?1/0:c*Math.sqrt(o)}})},function(t,e,r){var n=r(50),i=Math.imul;n(n.S+n.F*r(49)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(t,e){var r=65535,n=+t,i=+e,o=r&n,s=r&i;return 0|o*s+((r&n>>>16)*s+o*(r&i>>>16)<<16>>>0)}})},function(t,e,r){var n=r(50);n(n.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,r){var n=r(50);n(n.S,"Math",{log1p:r(146)})},function(t,e,r){var n=r(50);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,r){var n=r(50);n(n.S,"Math",{sign:r(150)})},function(t,e,r){var n=r(50),i=r(154),o=Math.exp;n(n.S+n.F*r(49)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,r){var n=r(50),i=r(154),o=Math.exp;n(n.S,"Math",{tanh:function(t){var e=i(t=+t),r=i(-t);return e==1/0?1:r==1/0?-1:(e-r)/(o(t)+o(-t))}})},function(t,e,r){var n=r(50);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,r){var n=r(50),i=r(81),o=String.fromCharCode,s=String.fromCodePoint;n(n.S+n.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return r.join("")}})},function(t,e,r){var n=r(50),i=r(74),o=r(79);n(n.S,"String",{raw:function(t){for(var e=i(t.raw),r=o(e.length),n=arguments.length,s=[],u=0;r>u;)s.push(String(e[u++])),u<n&&s.push(String(arguments[u]));return s.join("")}})},function(t,e,r){"use strict";r(125)("trim",function(t){return function(){return t(this,3)}})},function(t,e,r){"use strict";var n=r(169)(!0);r(170)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){var n=r(80),i=r(77);t.exports=function(t){return function(e,r){var o,s,u=String(i(e)),c=n(r),a=u.length;return c<0||c>=a?t?"":void 0:(o=u.charCodeAt(c),o<55296||o>56319||c+1===a||(s=u.charCodeAt(c+1))<56320||s>57343?t?u.charAt(c):o:t?u.slice(c,c+2):(o-55296<<10)+(s-56320)+65536)}}},function(t,e,r){"use strict";var n=r(70),i=r(50),o=r(60),s=r(52),u=r(47),c=r(171),a=r(172),f=r(66),h=r(101),l=r(67)("iterator"),p=!([].keys&&"next"in[].keys()),v="@@iterator",b="keys",d="values",y=function(){return this};t.exports=function(t,e,r,m,w,_,g){a(r,e,m);var O,S,x,T=function(t){if(!p&&t in P)return P[t];switch(t){case b:return function(){return new r(this,t)};case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},j=e+" Iterator",E=w==d,k=!1,P=t.prototype,I=P[l]||P[v]||w&&P[w],N=I||T(w),C=w?E?T("entries"):N:void 0,M="Array"==e?P.entries||I:I;if(M&&(x=h(M.call(new t)),x!==Object.prototype&&(f(x,j,!0),n||u(x,l)||s(x,l,y))),E&&I&&I.name!==d&&(k=!0,N=function(){return I.call(this)}),n&&!g||!p&&!k&&P[l]||s(P,l,N),c[e]=N,c[j]=y,w)if(O={values:E?N:T(d),keys:_?N:T(b),entries:C},g)for(S in O)S in P||o(P,S,O[S]);else i(i.P+i.F*(p||k),e,O);return O}},function(t,e){t.exports={}},function(t,e,r){"use strict";var n=r(88),i=r(59),o=r(66),s={};r(52)(s,r(67)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(s,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,r){"use strict";var n=r(50),i=r(169)(!1);n(n.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(50),i=r(79),o=r(175),s="endsWith",u=""[s];n(n.P+n.F*r(177)(s),"String",{endsWith:function(t){var e=o(this,t,s),r=arguments.length>1?arguments[1]:void 0,n=i(e.length),c=void 0===r?n:Math.min(i(r),n),a=String(t);return u?u.call(e,a,c):e.slice(c-a.length,c)===a}})},function(t,e,r){var n=r(176),i=r(77);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,e,r){var n=r(55),i=r(76),o=r(67)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){var n=r(67)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(i){}}return!0}},function(t,e,r){"use strict";var n=r(50),i=r(175),o="includes";n(n.P+n.F*r(177)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(50);n(n.P,"String",{repeat:r(133)})},function(t,e,r){"use strict";var n=r(50),i=r(79),o=r(175),s="startsWith",u=""[s];n(n.P+n.F*r(177)(s),"String",{startsWith:function(t){var e=o(this,t,s),r=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return u?u.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){"use strict";r(182)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,r){var n=r(50),i=r(49),o=r(77),s=/"/g,u=function(t,e,r,n){var i=String(o(t)),u="<"+e;return""!==r&&(u+=" "+r+'="'+String(n).replace(s,"&quot;")+'"'),u+">"+i+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(u),n(n.P+n.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",r)}},function(t,e,r){"use strict";r(182)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,r){"use strict";r(182)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,r){"use strict";r(182)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,r){"use strict";r(182)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,r){"use strict";r(182)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,r){"use strict";r(182)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,r){"use strict";r(182)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,r){"use strict";r(182)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,r){"use strict";r(182)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,r){"use strict";r(182)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,r){"use strict";r(182)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,r){"use strict";r(182)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,r){var n=r(50);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,r){"use strict";var n=r(50),i=r(100),o=r(58);n(n.P+n.F*r(49)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),r=o(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},function(t,e,r){"use strict";var n=r(50),i=r(49),o=Date.prototype.getTime,s=function(t){return t>9?t:"0"+t};n(n.P+n.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(r>99?r:"0"+s(r))+"Z"}})},function(t,e,r){var n=Date.prototype,i="Invalid Date",o="toString",s=n[o],u=n.getTime;new Date(NaN)+""!=i&&r(60)(n,o,function(){var t=u.call(this);return t===t?s.call(this):i})},function(t,e,r){var n=r(67)("toPrimitive"),i=Date.prototype;n in i||r(52)(i,n,r(200))},function(t,e,r){"use strict";var n=r(54),i=r(58),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(n(this),t!=o)}},function(t,e,r){var n=r(50);n(n.S,"Array",{isArray:r(87)})},function(t,e,r){"use strict";var n=r(62),i=r(50),o=r(100),s=r(203),u=r(204),c=r(79),a=r(205),f=r(206);i(i.S+i.F*!r(207)(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,h,l=o(t),p="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,d=void 0!==b,y=0,m=f(l);if(d&&(b=n(b,v>2?arguments[2]:void 0,2)),void 0==m||p==Array&&u(m))for(e=c(l.length),r=new p(e);e>y;y++)a(r,y,d?b(l[y],y):l[y]);else for(h=m.call(l),r=new p;!(i=h.next()).done;y++)a(r,y,d?s(h,b,[i.value,y],!0):i.value);return r.length=y,r}})},function(t,e,r){var n=r(54);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(o){var s=t["return"];throw void 0!==s&&n(s.call(t)),o}}},function(t,e,r){var n=r(171),i=r(67)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},function(t,e,r){"use strict";var n=r(53),i=r(59);t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},function(t,e,r){var n=r(117),i=r(67)("iterator"),o=r(171);t.exports=r(51).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n=r(67)("iterator"),i=!1;try{var o=[7][n]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},t(o)}catch(u){}return r}},function(t,e,r){"use strict";var n=r(50),i=r(205);n(n.S+n.F*r(49)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)i(r,t,arguments[t++]);return r.length=e,r}})},function(t,e,r){"use strict";var n=r(50),i=r(74),o=[].join;n(n.P+n.F*(r(75)!=Object||!r(210)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,r){var n=r(49);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,r){"use strict";var n=r(50),i=r(90),o=r(76),s=r(81),u=r(79),c=[].slice;n(n.P+n.F*r(49)(function(){i&&c.call(i)}),"Array",{slice:function(t,e){var r=u(this.length),n=o(this);if(e=void 0===e?r:e,"Array"==n)return c.call(this,t,e);for(var i=s(t,r),a=s(e,r),f=u(a-i),h=Array(f),l=0;l<f;l++)h[l]="String"==n?this.charAt(i+l):this[i+l];return h}})},function(t,e,r){"use strict";var n=r(50),i=r(63),o=r(100),s=r(49),u=[].sort,c=[1,2,3];n(n.P+n.F*(s(function(){c.sort(void 0)})||!s(function(){c.sort(null)})||!r(210)(u)),"Array",{sort:function(t){return void 0===t?u.call(o(this)):u.call(o(this),i(t))}})},function(t,e,r){"use strict";var n=r(50),i=r(214)(0),o=r(210)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,r){var n=r(62),i=r(75),o=r(100),s=r(79),u=r(215);t.exports=function(t,e){var r=1==t,c=2==t,a=3==t,f=4==t,h=6==t,l=5==t||h,p=e||u;return function(e,u,v){for(var b,d,y=o(e),m=i(y),w=n(u,v,3),_=s(m.length),g=0,O=r?p(e,_):c?p(e,0):void 0;_>g;g++)if((l||g in m)&&(b=m[g],d=w(b,g,y),t))if(r)O[g]=d;else if(d)switch(t){case 3:return!0;case 5:return b;case 6:return g;case 2:O.push(b)}else if(f)return!1;return h?-1:a||f?f:O}}},function(t,e,r){var n=r(216);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){var n=r(55),i=r(87),o=r(67)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,r){"use strict";var n=r(50),i=r(214)(1);n(n.P+n.F*!r(210)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(50),i=r(214)(2);n(n.P+n.F*!r(210)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(50),i=r(214)(3);n(n.P+n.F*!r(210)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(50),i=r(214)(4);n(n.P+n.F*!r(210)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(50),i=r(222);n(n.P+n.F*!r(210)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,r){var n=r(63),i=r(100),o=r(75),s=r(79);t.exports=function(t,e,r,u,c){n(e);var a=i(t),f=o(a),h=s(a.length),l=c?h-1:0,p=c?-1:1;if(r<2)for(;;){if(l in f){u=f[l],l+=p;break}if(l+=p,c?l<0:h<=l)throw TypeError("Reduce of empty array with no initial value")}for(;c?l>=0:h>l;l+=p)l in f&&(u=e(u,f[l],l,a));return u}},function(t,e,r){"use strict";var n=r(50),i=r(222);n(n.P+n.F*!r(210)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,r){"use strict";var n=r(50),i=r(78)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(s||!r(210)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(50),i=r(74),o=r(80),s=r(79),u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(c||!r(210)(u)),"Array",{lastIndexOf:function(t){if(c)return u.apply(this,arguments)||0;var e=i(this),r=s(e.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,r){var n=r(50);n(n.P,"Array",{copyWithin:r(227)}),r(228)("copyWithin")},function(t,e,r){"use strict";var n=r(100),i=r(81),o=r(79);t.exports=[].copyWithin||function(t,e){var r=n(this),s=o(r.length),u=i(t,s),c=i(e,s),a=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===a?s:i(a,s))-c,s-u),h=1;for(c<u&&u<c+f&&(h=-1,c+=f-1,u+=f-1);f-- >0;)c in r?r[u]=r[c]:delete r[u],u+=h,c+=h;return r}},function(t,e,r){var n=r(67)("unscopables"),i=Array.prototype;void 0==i[n]&&r(52)(i,n,{}),t.exports=function(t){i[n][t]=!0}},function(t,e,r){var n=r(50);n(n.P,"Array",{fill:r(230)}),r(228)("fill")},function(t,e,r){"use strict";var n=r(100),i=r(81),o=r(79);t.exports=function(t){for(var e=n(this),r=o(e.length),s=arguments.length,u=i(s>1?arguments[1]:void 0,r),c=s>2?arguments[2]:void 0,a=void 0===c?r:i(c,r);a>u;)e[u++]=t;return e}},function(t,e,r){"use strict";var n=r(50),i=r(214)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),n(n.P+n.F*s,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(228)(o)},function(t,e,r){"use strict";var n=r(50),i=r(214)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(228)(o)},function(t,e,r){r(234)("Array")},function(t,e,r){"use strict";var n=r(46),i=r(53),o=r(48),s=r(67)("species");t.exports=function(t){var e=n[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,r){"use strict";var n=r(228),i=r(236),o=r(171),s=r(74);t.exports=r(170)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,r):"values"==e?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(46),i=r(130),o=r(53).f,s=r(92).f,u=r(176),c=r(238),a=n.RegExp,f=a,h=a.prototype,l=/a/g,p=/a/g,v=new a(l)!==l;if(r(48)&&(!v||r(49)(function(){return p[r(67)("match")]=!1,a(l)!=l||a(p)==p||"/a/i"!=a(l,"i")}))){a=function(t,e){var r=this instanceof a,n=u(t),o=void 0===e;return!r&&n&&t.constructor===a&&o?t:i(v?new f(n&&!o?t.source:t,e):f((n=t instanceof a)?t.source:t,n&&o?c.call(t):e),r?this:h,a)};for(var b=(function(t){t in a||o(a,t,{configurable:!0,get:function(){return f[t]},set:function(e){f[t]=e}})}),d=s(f),y=0;d.length>y;)b(d[y++]);h.constructor=a,a.prototype=h,r(60)(n,"RegExp",a)}r(234)("RegExp")},function(t,e,r){"use strict";var n=r(54);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){"use strict";r(240);var n=r(54),i=r(238),o=r(48),s="toString",u=/./[s],c=function(t){r(60)(RegExp.prototype,s,t,!0)};r(49)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?c(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):u.name!=s&&c(function(){return u.call(this)})},function(t,e,r){r(48)&&"g"!=/./g.flags&&r(53).f(RegExp.prototype,"flags",{configurable:!0,get:r(238)})},function(t,e,r){r(242)("match",1,function(t,e,r){return[function(r){"use strict";var n=t(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},r]})},function(t,e,r){"use strict";var n=r(52),i=r(60),o=r(49),s=r(77),u=r(67);t.exports=function(t,e,r){var c=u(t),a=r(s,c,""[t]),f=a[0],h=a[1];o(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,f),n(RegExp.prototype,c,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,r){r(242)("replace",2,function(t,e,r){return[function(n,i){"use strict";var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,i):r.call(String(o),n,i)},r]})},function(t,e,r){r(242)("search",1,function(t,e,r){return[function(r){"use strict";var n=t(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},r]})},function(t,e,r){r(242)("split",2,function(t,e,n){"use strict";var i=r(176),o=n,s=[].push,u="split",c="length",a="lastIndex";if("c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[c]||2!="ab"[u](/(?:ab)*/)[c]||4!="."[u](/(.?)(.?)/)[c]||"."[u](/()()/)[c]>1||""[u](/.?/)[c]){var f=void 0===/()??/.exec("")[1];n=function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(r,t,e);var n,u,h,l,p,v=[],b=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,y=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,b+"g");for(f||(n=new RegExp("^"+m.source+"$(?!\\s)",b));(u=m.exec(r))&&(h=u.index+u[0][c],!(h>d&&(v.push(r.slice(d,u.index)),!f&&u[c]>1&&u[0].replace(n,function(){for(p=1;p<arguments[c]-2;p++)void 0===arguments[p]&&(u[p]=void 0)}),u[c]>1&&u.index<r[c]&&s.apply(v,u.slice(1)),l=u[0][c],d=h,v[c]>=y)));)m[a]===u.index&&m[a]++;return d===r[c]?!l&&m.test("")||v.push(""):v.push(r.slice(d)),v[c]>y?v.slice(0,y):v}}else"0"[u](void 0,0)[c]&&(n=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(r,i){var o=t(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},n]})},function(t,e,r){"use strict";var n,i,o,s=r(70),u=r(46),c=r(62),a=r(117),f=r(50),h=r(55),l=r(63),p=r(247),v=r(248),b=r(249),d=r(250).set,y=r(251)(),m="Promise",w=u.TypeError,_=u.process,g=u[m],_=u.process,O="process"==a(_),S=function(){},x=!!function(){try{var t=g.resolve(1),e=(t.constructor={})[r(67)("species")]=function(t){t(S,S)};return(O||"function"==typeof PromiseRejectionEvent)&&t.then(S)instanceof e}catch(n){}}(),T=function(t,e){return t===e||t===g&&e===o},j=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},E=function(t){return T(g,t)?new k(t):new i(t)},k=i=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw w("Bad Promise constructor");e=t,r=n}),this.resolve=l(e),this.reject=l(r)},P=function(t){try{t()}catch(e){return{error:e}}},I=function(t,e){if(!t._n){t._n=!0;var r=t._c;y(function(){for(var n=t._v,i=1==t._s,o=0,s=function(e){var r,o,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,a=e.domain;try{s?(i||(2==t._h&&M(t),t._h=1),s===!0?r=n:(a&&a.enter(),r=s(n),a&&a.exit()),r===e.promise?c(w("Promise-chain cycle")):(o=j(r))?o.call(r,u,c):u(r)):c(n)}catch(f){c(f)}};r.length>o;)s(r[o++]);t._c=[],t._n=!1,e&&!t._h&&N(t)})}},N=function(t){d.call(u,function(){var e,r,n,i=t._v;if(C(t)&&(e=P(function(){O?_.emit("unhandledRejection",i,t):(r=u.onunhandledrejection)?r({promise:t,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=O||C(t)?2:1),t._a=void 0,e)throw e.error})},C=function(t){if(1==t._h)return!1;for(var e,r=t._a||t._c,n=0;r.length>n;)if(e=r[n++],e.fail||!C(e.promise))return!1;return!0},M=function(t){d.call(u,function(){var e;O?_.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},A=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw w("Promise can't be resolved itself");(e=j(t))?y(function(){var n={_w:r,_d:!1};try{e.call(t,c(A,n,1),c(F,n,1))}catch(i){F.call(n,i)}}):(r._v=t,r._s=1,I(r,!1))}catch(n){F.call({_w:r,_d:!1},n)}}};x||(g=function(t){p(this,g,m,"_h"),l(t),n.call(this);try{t(c(A,this,1),c(F,this,1))}catch(e){F.call(this,e)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(252)(g.prototype,{then:function(t,e){var r=E(b(this,g));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=O?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&I(this,!1),r.promise},"catch":function(t){return this.then(void 0,t)}}),k=function(){var t=new n;this.promise=t,this.resolve=c(A,t,1),this.reject=c(F,t,1)}),f(f.G+f.W+f.F*!x,{Promise:g}),r(66)(g,m),r(234)(m),o=r(51)[m],f(f.S+f.F*!x,m,{reject:function(t){var e=E(this),r=e.reject;return r(t),e.promise}}),f(f.S+f.F*(s||!x),m,{resolve:function(t){if(t instanceof g&&T(t.constructor,this))return t;var e=E(this),r=e.resolve;return r(t),e.promise}}),f(f.S+f.F*!(x&&r(207)(function(t){g.all(t)["catch"](S)})),m,{all:function(t){var e=this,r=E(e),n=r.resolve,i=r.reject,o=P(function(){var r=[],o=0,s=1;v(t,!1,function(t){var u=o++,c=!1;r.push(void 0),s++,e.resolve(t).then(function(t){c||(c=!0,r[u]=t,--s||n(r))},i)}),--s||n(r)});return o&&i(o.error),r.promise},race:function(t){var e=this,r=E(e),n=r.reject,i=P(function(){v(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var n=r(62),i=r(203),o=r(204),s=r(54),u=r(79),c=r(206),a={},f={},e=t.exports=function(t,e,r,h,l){var p,v,b,d,y=l?function(){return t}:c(t),m=n(r,h,e?2:1),w=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(p=u(t.length);p>w;w++)if(d=e?m(s(v=t[w])[0],v[1]):m(t[w]),d===a||d===f)return d}else for(b=y.call(t);!(v=b.next()).done;)if(d=i(b,m,v.value,e),d===a||d===f)return d};e.BREAK=a,e.RETURN=f},function(t,e,r){var n=r(54),i=r(63),o=r(67)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||void 0==(r=n(s)[o])?e:i(r)}},function(t,e,r){var n,i,o,s=r(62),u=r(120),c=r(90),a=r(57),f=r(46),h=f.process,l=f.setImmediate,p=f.clearImmediate,v=f.MessageChannel,b=0,d={},y="onreadystatechange",m=function(){var t=+this;if(d.hasOwnProperty(t)){var e=d[t];delete d[t],e()}},w=function(t){m.call(t.data)};l&&p||(l=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return d[++b]=function(){u("function"==typeof t?t:Function(t),e)},n(b),b},p=function(t){delete d[t]},"process"==r(76)(h)?n=function(t){h.nextTick(s(m,t,1))}:v?(i=new v,o=i.port2,i.port1.onmessage=w,n=s(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(t){f.postMessage(t+"","*")},f.addEventListener("message",w,!1)):n=y in a("script")?function(t){c.appendChild(a("script"))[y]=function(){c.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:l,clear:p}},function(t,e,r){var n=r(46),i=r(250).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,u=n.Promise,c="process"==r(76)(s);t.exports=function(){var t,e,r,a=function(){var n,i;for(c&&(n=s.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(o){throw t?r():e=void 0,o}}e=void 0,n&&n.enter()};if(c)r=function(){s.nextTick(a)};else if(o){var f=!0,h=document.createTextNode("");new o(a).observe(h,{characterData:!0}),r=function(){h.data=f=!f}}else if(u&&u.resolve){var l=u.resolve();r=function(){l.then(a)}}else r=function(){i.call(n,a)};return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},function(t,e,r){var n=r(60);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},function(t,e,r){"use strict";var n=r(254);t.exports=r(255)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(this,t);return e&&e.v},set:function(t,e){return n.def(this,0===t?0:t,e)}},n,!0)},function(t,e,r){"use strict";var n=r(53).f,i=r(88),o=r(252),s=r(62),u=r(247),c=r(77),a=r(248),f=r(170),h=r(236),l=r(234),p=r(48),v=r(64).fastKey,b=p?"_s":"size",d=function(t,e){var r,n=v(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,f){var h=t(function(t,n){u(t,h,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[b]=0,void 0!=n&&a(n,r,t[f],t)});return o(h.prototype,{clear:function(){for(var t=this,e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[b]=0},"delete":function(t){var e=this,r=d(e,t);if(r){var n=r.n,i=r.p;delete e._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),e._f==r&&(e._f=n),e._l==r&&(e._l=i),e[b]--}return!!r},forEach:function(t){u(this,h,"forEach");for(var e,r=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!d(this,t)}}),p&&n(h.prototype,"size",{get:function(){return c(this[b])}}),h},def:function(t,e,r){var n,i,o=d(t,e);return o?o.v=r:(t._l=o={i:i=v(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[b]++,"F"!==i&&(t._i[i]=o)),t},getEntry:d,setStrong:function(t,e,r){f(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==e?h(0,r.k):"values"==e?h(0,r.v):h(0,[r.k,r.v]):(t._t=void 0,h(1))},r?"entries":"values",!r,!0),l(e)}}},function(t,e,r){"use strict";var n=r(46),i=r(50),o=r(60),s=r(252),u=r(64),c=r(248),a=r(247),f=r(55),h=r(49),l=r(207),p=r(66),v=r(130);t.exports=function(t,e,r,b,d,y){var m=n[t],w=m,_=d?"set":"add",g=w&&w.prototype,O={},S=function(t){var e=g[t];o(g,t,"delete"==t?function(t){return!(y&&!f(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!f(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!f(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof w&&(y||g.forEach&&!h(function(){(new w).entries().next()}))){var x=new w,T=x[_](y?{}:-0,1)!=x,j=h(function(){x.has(1)}),E=l(function(t){new w(t)}),k=!y&&h(function(){for(var t=new w,e=5;e--;)t[_](e,e);return!t.has(-0)});E||(w=e(function(e,r){a(e,w,t);var n=v(new m,e,w);return void 0!=r&&c(r,d,n[_],n),n}),w.prototype=g,g.constructor=w),(j||k)&&(S("delete"),S("has"),d&&S("get")),(k||T)&&S(_),y&&g.clear&&delete g.clear}else w=b.getConstructor(e,t,d,_),s(w.prototype,r),u.NEED=!0;return p(w,t),O[t]=w,i(i.G+i.W+i.F*(w!=m),O),y||b.setStrong(w,t,d),w}},function(t,e,r){"use strict";var n=r(254);t.exports=r(255)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t=0===t?0:t,t)}},n)},function(t,e,r){"use strict";var n,i=r(214)(0),o=r(60),s=r(64),u=r(111),c=r(258),a=r(55),f=s.getWeak,h=Object.isExtensible,l=c.ufstore,p={},v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(t){if(a(t)){var e=f(t);return e===!0?l(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(this,t,e)}},d=t.exports=r(255)("WeakMap",v,b,c,!0,!0);7!=(new d).set((Object.freeze||Object)(p),7).get(p)&&(n=c.getConstructor(v),u(n.prototype,b),s.NEED=!0,i(["delete","has","get","set"],function(t){var e=d.prototype,r=e[t];o(e,t,function(e,i){if(a(e)&&!h(e)){this._f||(this._f=new n);var o=this._f[t](e,i);return"set"==t?this:o}return r.call(this,e,i)})}))},function(t,e,r){"use strict";var n=r(252),i=r(64).getWeak,o=r(54),s=r(55),u=r(247),c=r(248),a=r(214),f=r(47),h=a(5),l=a(6),p=0,v=function(t){return t._l||(t._l=new b)},b=function(){this.a=[]},d=function(t,e){return h(t.a,function(t){return t[0]===e})};b.prototype={get:function(t){var e=d(this,t);if(e)return e[1]},has:function(t){return!!d(this,t)},set:function(t,e){var r=d(this,t);r?r[1]=e:this.a.push([t,e])},"delete":function(t){var e=l(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,o){var a=t(function(t,n){u(t,a,e,"_i"),t._i=p++,t._l=void 0,void 0!=n&&c(n,r,t[o],t)});return n(a.prototype,{"delete":function(t){if(!s(t))return!1;var e=i(t);return e===!0?v(this)["delete"](t):e&&f(e,this._i)&&delete e[this._i]},has:function(t){if(!s(t))return!1;var e=i(t);return e===!0?v(this).has(t):e&&f(e,this._i)}}),a},def:function(t,e,r){var n=i(o(e),!0);return n===!0?v(t).set(e,r):n[t._i]=r,t},ufstore:v}},function(t,e,r){"use strict";var n=r(258);r(255)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t,!0)}},n,!1,!0)},function(t,e,r){"use strict";var n=r(50),i=r(261),o=r(262),s=r(54),u=r(81),c=r(79),a=r(55),f=r(46).ArrayBuffer,h=r(249),l=o.ArrayBuffer,p=o.DataView,v=i.ABV&&f.isView,b=l.prototype.slice,d=i.VIEW,y="ArrayBuffer";n(n.G+n.W+n.F*(f!==l),{ArrayBuffer:l}),n(n.S+n.F*!i.CONSTR,y,{isView:function(t){return v&&v(t)||a(t)&&d in t}}),n(n.P+n.U+n.F*r(49)(function(){return!new l(2).slice(1,void 0).byteLength}),y,{slice:function(t,e){if(void 0!==b&&void 0===e)return b.call(s(this),t);for(var r=s(this).byteLength,n=u(t,r),i=u(void 0===e?r:e,r),o=new(h(this,l))(c(i-n)),a=new p(this),f=new p(o),v=0;n<i;)f.setUint8(v++,a.getUint8(n++));return o}}),r(234)(y)},function(t,e,r){for(var n,i=r(46),o=r(52),s=r(61),u=s("typed_array"),c=s("view"),a=!(!i.ArrayBuffer||!i.DataView),f=a,h=0,l=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<l;)(n=i[p[h++]])?(o(n.prototype,u,!0),o(n.prototype,c,!0)):f=!1;t.exports={ABV:a,CONSTR:f,TYPED:u,VIEW:c}},function(t,e,r){"use strict";var n=r(46),i=r(48),o=r(70),s=r(261),u=r(52),c=r(252),a=r(49),f=r(247),h=r(80),l=r(79),p=r(92).f,v=r(53).f,b=r(230),d=r(66),y="ArrayBuffer",m="DataView",w="prototype",_="Wrong length!",g="Wrong index!",O=n[y],S=n[m],x=n.Math,T=n.RangeError,j=n.Infinity,E=O,k=x.abs,P=x.pow,I=x.floor,N=x.log,C=x.LN2,M="buffer",F="byteLength",A="byteOffset",R=i?"_b":M,U=i?"_l":F,V=i?"_o":A,D=function(t,e,r){var n,i,o,s=Array(r),u=8*r-e-1,c=(1<<u)-1,a=c>>1,f=23===e?P(2,-24)-P(2,-77):0,h=0,l=t<0||0===t&&1/t<0?1:0;for(t=k(t),t!=t||t===j?(i=t!=t?1:0,n=c):(n=I(N(t)/C),t*(o=P(2,-n))<1&&(n--,o*=2),t+=n+a>=1?f/o:f*P(2,1-a),t*o>=2&&(n++,o/=2),n+a>=c?(i=0,n=c):n+a>=1?(i=(t*o-1)*P(2,e),n+=a):(i=t*P(2,a-1)*P(2,e),n=0));e>=8;s[h++]=255&i,i/=256,e-=8);for(n=n<<e|i,u+=e;u>0;s[h++]=255&n,n/=256,u-=8);return s[--h]|=128*l,s},L=function(t,e,r){var n,i=8*r-e-1,o=(1<<i)-1,s=o>>1,u=i-7,c=r-1,a=t[c--],f=127&a;for(a>>=7;u>0;f=256*f+t[c],c--,u-=8);for(n=f&(1<<-u)-1,f>>=-u,u+=e;u>0;n=256*n+t[c],c--,u-=8);if(0===f)f=1-s;else{if(f===o)return n?NaN:a?-j:j;n+=P(2,e),f-=s}return(a?-1:1)*n*P(2,f-e)},z=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},W=function(t){return[255&t]},B=function(t){return[255&t,t>>8&255]},$=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Z=function(t){return D(t,52,8)},G=function(t){return D(t,23,4)},H=function(t,e,r){v(t[w],e,{get:function(){return this[r]}})},q=function(t,e,r,n){var i=+r,o=h(i);if(i!=o||o<0||o+e>t[U])throw T(g);var s=t[R]._b,u=o+t[V],c=s.slice(u,u+e);return n?c:c.reverse()},Y=function(t,e,r,n,i,o){var s=+r,u=h(s);if(s!=u||u<0||u+e>t[U])throw T(g);for(var c=t[R]._b,a=u+t[V],f=n(+i),l=0;l<e;l++)c[a+l]=f[o?l:e-l-1]},K=function(t,e){f(t,O,y);var r=+e,n=l(r);if(r!=n)throw T(_);return n};if(s.ABV){if(!a(function(){new O})||!a(function(){
new O(.5)})){O=function(t){return new E(K(this,t))};for(var X,J=O[w]=E[w],Q=p(E),tt=0;Q.length>tt;)(X=Q[tt++])in O||u(O,X,E[X]);o||(J.constructor=O)}var et=new S(new O(2)),rt=S[w].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||c(S[w],{setInt8:function(t,e){rt.call(this,t,e<<24>>24)},setUint8:function(t,e){rt.call(this,t,e<<24>>24)}},!0)}else O=function(t){var e=K(this,t);this._b=b.call(Array(e),0),this[U]=e},S=function(t,e,r){f(this,S,m),f(t,O,m);var n=t[U],i=h(e);if(i<0||i>n)throw T("Wrong offset!");if(r=void 0===r?n-i:l(r),i+r>n)throw T(_);this[R]=t,this[V]=i,this[U]=r},i&&(H(O,F,"_l"),H(S,M,"_b"),H(S,F,"_l"),H(S,A,"_o")),c(S[w],{getInt8:function(t){return q(this,1,t)[0]<<24>>24},getUint8:function(t){return q(this,1,t)[0]},getInt16:function(t){var e=q(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=q(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return z(q(this,4,t,arguments[1]))},getUint32:function(t){return z(q(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return L(q(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return L(q(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){Y(this,1,t,W,e)},setUint8:function(t,e){Y(this,1,t,W,e)},setInt16:function(t,e){Y(this,2,t,B,e,arguments[2])},setUint16:function(t,e){Y(this,2,t,B,e,arguments[2])},setInt32:function(t,e){Y(this,4,t,$,e,arguments[2])},setUint32:function(t,e){Y(this,4,t,$,e,arguments[2])},setFloat32:function(t,e){Y(this,4,t,G,e,arguments[2])},setFloat64:function(t,e){Y(this,8,t,Z,e,arguments[2])}});d(O,y),d(S,m),u(S[w],s.VIEW,!0),e[y]=O,e[m]=S},function(t,e,r){var n=r(50);n(n.G+n.W+n.F*!r(261).ABV,{DataView:r(262).DataView})},function(t,e,r){r(265)("Int8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){"use strict";if(r(48)){var n=r(70),i=r(46),o=r(49),s=r(50),u=r(261),c=r(262),a=r(62),f=r(247),h=r(59),l=r(52),p=r(252),v=r(80),b=r(79),d=r(81),y=r(58),m=r(47),w=r(113),_=r(117),g=r(55),O=r(100),S=r(204),x=r(88),T=r(101),j=r(92).f,E=r(206),k=r(61),P=r(67),I=r(214),N=r(78),C=r(249),M=r(235),F=r(171),A=r(207),R=r(234),U=r(230),V=r(227),D=r(53),L=r(93),z=D.f,W=L.f,B=i.RangeError,$=i.TypeError,Z=i.Uint8Array,G="ArrayBuffer",H="Shared"+G,q="BYTES_PER_ELEMENT",Y="prototype",K=Array[Y],X=c.ArrayBuffer,J=c.DataView,Q=I(0),tt=I(2),et=I(3),rt=I(4),nt=I(5),it=I(6),ot=N(!0),st=N(!1),ut=M.values,ct=M.keys,at=M.entries,ft=K.lastIndexOf,ht=K.reduce,lt=K.reduceRight,pt=K.join,vt=K.sort,bt=K.slice,dt=K.toString,yt=K.toLocaleString,mt=P("iterator"),wt=P("toStringTag"),_t=k("typed_constructor"),gt=k("def_constructor"),Ot=u.CONSTR,St=u.TYPED,xt=u.VIEW,Tt="Wrong length!",jt=I(1,function(t,e){return Ct(C(t,t[gt]),e)}),Et=o(function(){return 1===new Z(new Uint16Array([1]).buffer)[0]}),kt=!!Z&&!!Z[Y].set&&o(function(){new Z(1).set({})}),Pt=function(t,e){if(void 0===t)throw $(Tt);var r=+t,n=b(t);if(e&&!w(r,n))throw B(Tt);return n},It=function(t,e){var r=v(t);if(r<0||r%e)throw B("Wrong offset!");return r},Nt=function(t){if(g(t)&&St in t)return t;throw $(t+" is not a typed array!")},Ct=function(t,e){if(!(g(t)&&_t in t))throw $("It is not a typed array constructor!");return new t(e)},Mt=function(t,e){return Ft(C(t,t[gt]),e)},Ft=function(t,e){for(var r=0,n=e.length,i=Ct(t,n);n>r;)i[r]=e[r++];return i},At=function(t,e,r){z(t,e,{get:function(){return this._d[r]}})},Rt=function(t){var e,r,n,i,o,s,u=O(t),c=arguments.length,f=c>1?arguments[1]:void 0,h=void 0!==f,l=E(u);if(void 0!=l&&!S(l)){for(s=l.call(u),n=[],e=0;!(o=s.next()).done;e++)n.push(o.value);u=n}for(h&&c>2&&(f=a(f,arguments[2],2)),e=0,r=b(u.length),i=Ct(this,r);r>e;e++)i[e]=h?f(u[e],e):u[e];return i},Ut=function(){for(var t=0,e=arguments.length,r=Ct(this,e);e>t;)r[t]=arguments[t++];return r},Vt=!!Z&&o(function(){yt.call(new Z(1))}),Dt=function(){return yt.apply(Vt?bt.call(Nt(this)):Nt(this),arguments)},Lt={copyWithin:function(t,e){return V.call(Nt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return U.apply(Nt(this),arguments)},filter:function(t){return Mt(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Nt(this),arguments)},lastIndexOf:function(t){return ft.apply(Nt(this),arguments)},map:function(t){return jt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ht.apply(Nt(this),arguments)},reduceRight:function(t){return lt.apply(Nt(this),arguments)},reverse:function(){for(var t,e=this,r=Nt(e).length,n=Math.floor(r/2),i=0;i<n;)t=e[i],e[i++]=e[--r],e[r]=t;return e},some:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return vt.call(Nt(this),t)},subarray:function(t,e){var r=Nt(this),n=r.length,i=d(t,n);return new(C(r,r[gt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,b((void 0===e?n:d(e,n))-i))}},zt=function(t,e){return Mt(this,bt.call(Nt(this),t,e))},Wt=function(t){Nt(this);var e=It(arguments[1],1),r=this.length,n=O(t),i=b(n.length),o=0;if(i+e>r)throw B(Tt);for(;o<i;)this[e+o]=n[o++]},Bt={entries:function(){return at.call(Nt(this))},keys:function(){return ct.call(Nt(this))},values:function(){return ut.call(Nt(this))}},$t=function(t,e){return g(t)&&t[St]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Zt=function(t,e){return $t(t,e=y(e,!0))?h(2,t[e]):W(t,e)},Gt=function(t,e,r){return!($t(t,e=y(e,!0))&&g(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?z(t,e,r):(t[e]=r.value,t)};Ot||(L.f=Zt,D.f=Gt),s(s.S+s.F*!Ot,"Object",{getOwnPropertyDescriptor:Zt,defineProperty:Gt}),o(function(){dt.call({})})&&(dt=yt=function(){return pt.call(this)});var Ht=p({},Lt);p(Ht,Bt),l(Ht,mt,Bt.values),p(Ht,{slice:zt,set:Wt,constructor:function(){},toString:dt,toLocaleString:Dt}),At(Ht,"buffer","b"),At(Ht,"byteOffset","o"),At(Ht,"byteLength","l"),At(Ht,"length","e"),z(Ht,wt,{get:function(){return this[St]}}),t.exports=function(t,e,r,c){c=!!c;var a=t+(c?"Clamped":"")+"Array",h="Uint8Array"!=a,p="get"+t,v="set"+t,d=i[a],y=d||{},m=d&&T(d),w=!d||!u.ABV,O={},S=d&&d[Y],E=function(t,r){var n=t._d;return n.v[p](r*e+n.o,Et)},k=function(t,r,n){var i=t._d;c&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[v](r*e+i.o,n,Et)},P=function(t,e){z(t,e,{get:function(){return E(this,e)},set:function(t){return k(this,e,t)},enumerable:!0})};w?(d=r(function(t,r,n,i){f(t,d,a,"_d");var o,s,u,c,h=0,p=0;if(g(r)){if(!(r instanceof X||(c=_(r))==G||c==H))return St in r?Ft(d,r):Rt.call(d,r);o=r,p=It(n,e);var v=r.byteLength;if(void 0===i){if(v%e)throw B(Tt);if(s=v-p,s<0)throw B(Tt)}else if(s=b(i)*e,s+p>v)throw B(Tt);u=s/e}else u=Pt(r,!0),s=u*e,o=new X(s);for(l(t,"_d",{b:o,o:p,l:s,e:u,v:new J(o)});h<u;)P(t,h++)}),S=d[Y]=x(Ht),l(S,"constructor",d)):A(function(t){new d(null),new d(t)},!0)||(d=r(function(t,r,n,i){f(t,d,a);var o;return g(r)?r instanceof X||(o=_(r))==G||o==H?void 0!==i?new y(r,It(n,e),i):void 0!==n?new y(r,It(n,e)):new y(r):St in r?Ft(d,r):Rt.call(d,r):new y(Pt(r,h))}),Q(m!==Function.prototype?j(y).concat(j(m)):j(y),function(t){t in d||l(d,t,y[t])}),d[Y]=S,n||(S.constructor=d));var I=S[mt],N=!!I&&("values"==I.name||void 0==I.name),C=Bt.values;l(d,_t,!0),l(S,St,a),l(S,xt,!0),l(S,gt,d),(c?new d(1)[wt]==a:wt in S)||z(S,wt,{get:function(){return a}}),O[a]=d,s(s.G+s.W+s.F*(d!=y),O),s(s.S,a,{BYTES_PER_ELEMENT:e,from:Rt,of:Ut}),q in S||l(S,q,e),s(s.P,a,Lt),R(a),s(s.P+s.F*kt,a,{set:Wt}),s(s.P+s.F*!N,a,Bt),s(s.P+s.F*(S.toString!=dt),a,{toString:dt}),s(s.P+s.F*o(function(){new d(1).slice()}),a,{slice:zt}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),a,{toLocaleString:Dt}),F[a]=N?I:C,n||N||l(S,mt,C)}}else t.exports=function(){}},function(t,e,r){r(265)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(265)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}},!0)},function(t,e,r){r(265)("Int16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(265)("Uint16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(265)("Int32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(265)("Uint32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(265)("Float32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(265)("Float64",8,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){var n=r(50),i=r(63),o=r(54),s=(r(46).Reflect||{}).apply,u=Function.apply;n(n.S+n.F*!r(49)(function(){s(function(){})}),"Reflect",{apply:function(t,e,r){var n=i(t),c=o(r);return s?s(n,e,c):u.call(n,e,c)}})},function(t,e,r){var n=r(50),i=r(88),o=r(63),s=r(54),u=r(55),c=r(49),a=r(119),f=(r(46).Reflect||{}).construct,h=c(function(){function t(){}return!(f(function(){},[],t)instanceof t)}),l=!c(function(){f(function(){})});n(n.S+n.F*(h||l),"Reflect",{construct:function(t,e){o(t),s(e);var r=arguments.length<3?t:o(arguments[2]);if(l&&!h)return f(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(a.apply(t,n))}var c=r.prototype,p=i(u(c)?c:Object.prototype),v=Function.apply.call(t,p,e);return u(v)?v:p}})},function(t,e,r){var n=r(53),i=r(50),o=r(54),s=r(58);i(i.S+i.F*r(49)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,r){o(t),e=s(e,!0),o(r);try{return n.f(t,e,r),!0}catch(i){return!1}}})},function(t,e,r){var n=r(50),i=r(93).f,o=r(54);n(n.S,"Reflect",{deleteProperty:function(t,e){var r=i(o(t),e);return!(r&&!r.configurable)&&delete t[e]}})},function(t,e,r){"use strict";var n=r(50),i=r(54),o=function(t){this._t=i(t),this._i=0;var e,r=this._k=[];for(e in t)r.push(e)};r(172)(o,"Object",function(){var t,e=this,r=e._k;do if(e._i>=r.length)return{value:void 0,done:!0};while(!((t=r[e._i++])in e._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,r){function n(t,e){var r,u,f=arguments.length<3?t:arguments[2];return a(t)===f?t[e]:(r=i.f(t,e))?s(r,"value")?r.value:void 0!==r.get?r.get.call(f):void 0:c(u=o(t))?n(u,e,f):void 0}var i=r(93),o=r(101),s=r(47),u=r(50),c=r(55),a=r(54);u(u.S,"Reflect",{get:n})},function(t,e,r){var n=r(93),i=r(50),o=r(54);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(o(t),e)}})},function(t,e,r){var n=r(50),i=r(101),o=r(54);n(n.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,r){var n=r(50);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,r){var n=r(50),i=r(54),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,r){var n=r(50);n(n.S,"Reflect",{ownKeys:r(285)})},function(t,e,r){var n=r(92),i=r(85),o=r(54),s=r(46).Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(o(t)),r=i.f;return r?e.concat(r(t)):e}},function(t,e,r){var n=r(50),i=r(54),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(e){return!1}}})},function(t,e,r){function n(t,e,r){var c,l,p=arguments.length<4?t:arguments[3],v=o.f(f(t),e);if(!v){if(h(l=s(t)))return n(l,e,r,p);v=a(0)}return u(v,"value")?!(v.writable===!1||!h(p))&&(c=o.f(p,e)||a(0),c.value=r,i.f(p,e,c),!0):void 0!==v.set&&(v.set.call(p,r),!0)}var i=r(53),o=r(93),s=r(101),u=r(47),c=r(50),a=r(59),f=r(54),h=r(55);c(c.S,"Reflect",{set:n})},function(t,e,r){var n=r(50),i=r(115);i&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(r){return!1}}})},function(t,e,r){"use strict";var n=r(50),i=r(78)(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(228)("includes")},function(t,e,r){"use strict";var n=r(50),i=r(169)(!0);n(n.P,"String",{at:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(50),i=r(292);n(n.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,r){var n=r(79),i=r(133),o=r(77);t.exports=function(t,e,r,s){var u=String(o(t)),c=u.length,a=void 0===r?" ":String(r),f=n(e);if(f<=c||""==a)return u;var h=f-c,l=i.call(a,Math.ceil(h/a.length));return l.length>h&&(l=l.slice(0,h)),s?l+u:u+l}},function(t,e,r){"use strict";var n=r(50),i=r(292);n(n.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,r){"use strict";r(125)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,r){"use strict";r(125)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,r){"use strict";var n=r(50),i=r(77),o=r(79),s=r(176),u=r(238),c=RegExp.prototype,a=function(t,e){this._r=t,this._s=e};r(172)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(i(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),r="flags"in c?String(t.flags):u.call(t),n=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=o(t.lastIndex),new a(n,e)}})},function(t,e,r){r(69)("asyncIterator")},function(t,e,r){r(69)("observable")},function(t,e,r){var n=r(50),i=r(285),o=r(74),s=r(93),u=r(205);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r=o(t),n=s.f,c=i(r),a={},f=0;c.length>f;)u(a,e=c[f++],n(r,e));return a}})},function(t,e,r){var n=r(50),i=r(301)(!1);n(n.S,"Object",{values:function(t){return i(t)}})},function(t,e,r){var n=r(72),i=r(74),o=r(86).f;t.exports=function(t){return function(e){for(var r,s=i(e),u=n(s),c=u.length,a=0,f=[];c>a;)o.call(s,r=u[a++])&&f.push(t?[r,s[r]]:s[r]);return f}}},function(t,e,r){var n=r(50),i=r(301)(!0);n(n.S,"Object",{entries:function(t){return i(t)}})},function(t,e,r){"use strict";var n=r(50),i=r(100),o=r(63),s=r(53);r(48)&&n(n.P+r(304),"Object",{__defineGetter__:function(t,e){s.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,r){t.exports=r(70)||!r(49)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(46)[t]})},function(t,e,r){"use strict";var n=r(50),i=r(100),o=r(63),s=r(53);r(48)&&n(n.P+r(304),"Object",{__defineSetter__:function(t,e){s.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(50),i=r(100),o=r(58),s=r(101),u=r(93).f;r(48)&&n(n.P+r(304),"Object",{__lookupGetter__:function(t){var e,r=i(this),n=o(t,!0);do if(e=u(r,n))return e.get;while(r=s(r))}})},function(t,e,r){"use strict";var n=r(50),i=r(100),o=r(58),s=r(101),u=r(93).f;r(48)&&n(n.P+r(304),"Object",{__lookupSetter__:function(t){var e,r=i(this),n=o(t,!0);do if(e=u(r,n))return e.set;while(r=s(r))}})},function(t,e,r){var n=r(50);n(n.P+n.R,"Map",{toJSON:r(309)("Map")})},function(t,e,r){var n=r(117),i=r(310);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,r){var n=r(248);t.exports=function(t,e){var r=[];return n(t,!1,r.push,r,e),r}},function(t,e,r){var n=r(50);n(n.P+n.R,"Set",{toJSON:r(309)("Set")})},function(t,e,r){var n=r(50);n(n.S,"System",{global:r(46)})},function(t,e,r){var n=r(50),i=r(76);n(n.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,r){var n=r(50);n(n.S,"Math",{iaddh:function(t,e,r,n){var i=t>>>0,o=e>>>0,s=r>>>0;return o+(n>>>0)+((i&s|(i|s)&~(i+s>>>0))>>>31)|0}})},function(t,e,r){var n=r(50);n(n.S,"Math",{isubh:function(t,e,r,n){var i=t>>>0,o=e>>>0,s=r>>>0;return o-(n>>>0)-((~i&s|~(i^s)&i-s>>>0)>>>31)|0}})},function(t,e,r){var n=r(50);n(n.S,"Math",{imulh:function(t,e){var r=65535,n=+t,i=+e,o=n&r,s=i&r,u=n>>16,c=i>>16,a=(u*s>>>0)+(o*s>>>16);return u*c+(a>>16)+((o*c>>>0)+(a&r)>>16)}})},function(t,e,r){var n=r(50);n(n.S,"Math",{umulh:function(t,e){var r=65535,n=+t,i=+e,o=n&r,s=i&r,u=n>>>16,c=i>>>16,a=(u*s>>>0)+(o*s>>>16);return u*c+(a>>>16)+((o*c>>>0)+(a&r)>>>16)}})},function(t,e,r){var n=r(319),i=r(54),o=n.key,s=n.set;n.exp({defineMetadata:function(t,e,r,n){s(t,e,i(r),o(n))}})},function(t,e,r){var n=r(253),i=r(50),o=r(65)("metadata"),s=o.store||(o.store=new(r(257))),u=function(t,e,r){var i=s.get(t);if(!i){if(!r)return;s.set(t,i=new n)}var o=i.get(e);if(!o){if(!r)return;i.set(e,o=new n)}return o},c=function(t,e,r){var n=u(e,r,!1);return void 0!==n&&n.has(t)},a=function(t,e,r){var n=u(e,r,!1);return void 0===n?void 0:n.get(t)},f=function(t,e,r,n){u(r,n,!0).set(t,e)},h=function(t,e){var r=u(t,e,!1),n=[];return r&&r.forEach(function(t,e){n.push(e)}),n},l=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){i(i.S,"Reflect",t)};t.exports={store:s,map:u,has:c,get:a,set:f,keys:h,key:l,exp:p}},function(t,e,r){var n=r(319),i=r(54),o=n.key,s=n.map,u=n.store;n.exp({deleteMetadata:function(t,e){var r=arguments.length<3?void 0:o(arguments[2]),n=s(i(e),r,!1);if(void 0===n||!n["delete"](t))return!1;if(n.size)return!0;var c=u.get(e);return c["delete"](r),!!c.size||u["delete"](e)}})},function(t,e,r){var n=r(319),i=r(54),o=r(101),s=n.has,u=n.get,c=n.key,a=function(t,e,r){var n=s(t,e,r);if(n)return u(t,e,r);var i=o(e);return null!==i?a(t,i,r):void 0};n.exp({getMetadata:function(t,e){return a(t,i(e),arguments.length<3?void 0:c(arguments[2]))}})},function(t,e,r){var n=r(256),i=r(310),o=r(319),s=r(54),u=r(101),c=o.keys,a=o.key,f=function(t,e){var r=c(t,e),o=u(t);if(null===o)return r;var s=f(o,e);return s.length?r.length?i(new n(r.concat(s))):s:r};o.exp({getMetadataKeys:function(t){return f(s(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,r){var n=r(319),i=r(54),o=n.get,s=n.key;n.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,r){var n=r(319),i=r(54),o=n.keys,s=n.key;n.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:s(arguments[1]))}})},function(t,e,r){var n=r(319),i=r(54),o=r(101),s=n.has,u=n.key,c=function(t,e,r){var n=s(t,e,r);if(n)return!0;var i=o(e);return null!==i&&c(t,i,r)};n.exp({hasMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,r){var n=r(319),i=r(54),o=n.has,s=n.key;n.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,r){var n=r(319),i=r(54),o=r(63),s=n.key,u=n.set;n.exp({metadata:function(t,e){return function(r,n){u(t,e,(void 0!==n?i:o)(r),s(n))}}})},function(t,e,r){var n=r(50),i=r(251)(),o=r(46).process,s="process"==r(76)(o);n(n.G,{asap:function(t){var e=s&&o.domain;i(e?e.bind(t):t)}})},function(t,e,r){"use strict";var n=r(50),i=r(46),o=r(51),s=r(251)(),u=r(67)("observable"),c=r(63),a=r(54),f=r(247),h=r(252),l=r(52),p=r(248),v=p.RETURN,b=function(t){return null==t?void 0:c(t)},d=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},m=function(t){y(t)||(t._o=void 0,d(t))},w=function(t,e){a(t),this._c=void 0,this._o=t,t=new _(this);try{var r=e(t),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:c(r),this._c=r)}catch(i){return void t.error(i)}y(this)&&d(this)};w.prototype=h({},{unsubscribe:function(){m(this)}});var _=function(t){this._s=t};_.prototype=h({},{next:function(t){var e=this._s;if(!y(e)){var r=e._o;try{var n=b(r.next);if(n)return n.call(r,t)}catch(i){try{m(e)}finally{throw i}}}},error:function(t){var e=this._s;if(y(e))throw t;var r=e._o;e._o=void 0;try{var n=b(r.error);if(!n)throw t;t=n.call(r,t)}catch(i){try{d(e)}finally{throw i}}return d(e),t},complete:function(t){var e=this._s;if(!y(e)){var r=e._o;e._o=void 0;try{var n=b(r.complete);t=n?n.call(r,t):void 0}catch(i){try{d(e)}finally{throw i}}return d(e),t}}});var g=function(t){f(this,g,"Observable","_f")._f=c(t)};h(g.prototype,{subscribe:function(t){return new w(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(r,n){c(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(r){n(r),i.unsubscribe()}},error:n,complete:r})})}}),h(g,{from:function(t){var e="function"==typeof this?this:g,r=b(a(t)[u]);if(r){var n=a(r.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var r=!1;return s(function(){if(!r){try{if(p(t,!1,function(t){if(e.next(t),r)return v})===v)return}catch(n){if(r)throw n;return void e.error(n)}e.complete()}}),function(){r=!0}})},of:function(){for(var t=0,e=arguments.length,r=Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:g)(function(t){var e=!1;return s(function(){if(!e){for(var n=0;n<r.length;++n)if(t.next(r[n]),e)return;t.complete()}}),function(){e=!0}})}}),l(g.prototype,u,function(){return this}),n(n.G,{Observable:g}),r(234)("Observable")},function(t,e,r){var n=r(46),i=r(50),o=r(120),s=r(331),u=n.navigator,c=!!u&&/MSIE .\./.test(u.userAgent),a=function(t){return c?function(e,r){return t(o(s,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),r)}:t};i(i.G+i.B+i.F*c,{setTimeout:a(n.setTimeout),setInterval:a(n.setInterval)})},function(t,e,r){"use strict";var n=r(332),i=r(120),o=r(63);t.exports=function(){for(var t=o(this),e=arguments.length,r=Array(e),s=0,u=n._,c=!1;e>s;)(r[s]=arguments[s++])===u&&(c=!0);return function(){var n,o=this,s=arguments.length,a=0,f=0;if(!c&&!s)return i(t,r,o);if(n=r.slice(),c)for(;e>a;a++)n[a]===u&&(n[a]=arguments[f++]);for(;s>f;)n.push(arguments[f++]);return i(t,n,o)}}},function(t,e,r){t.exports=r(46)},function(t,e,r){var n=r(50),i=r(250);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,r){for(var n=r(235),i=r(60),o=r(46),s=r(52),u=r(171),c=r(67),a=c("iterator"),f=c("toStringTag"),h=u.Array,l=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var v,b=l[p],d=o[b],y=d&&d.prototype;if(y){y[a]||s(y,a,h),y[f]||s(y,f,b),u[b]=h;for(v in n)y[v]||i(y,v,n[v],!0)}}},function(t,e,r){"use strict";function n(t){var e=p(null);return void 0!=t&&(_(t)?w(t,!0,function(t,r){e[t]=r}):l(e,t)),e}function i(t,e,r){m(e);var n,i,o=x(t),s=b(o),u=s.length,c=0;if(arguments.length<3){if(!u)throw TypeError("Reduce of empty object with no initial value");n=o[s[c++]]}else n=Object(r);for(;u>c;)j(o,i=s[c++])&&(n=e(n,o[i],i,t));return n}function o(t,e){return void 0!==(e==e?y(t,e):k(t,function(t){return t!=t}))}function s(t,e){if(j(t,e))return t[e]}function u(t,e,r){return T&&e in Object?d.f(t,e,h(0,r)):t[e]=r,t}function c(t){return S(t)&&v(t)===n.prototype}var a=r(62),f=r(50),h=r(59),l=r(111),p=r(88),v=r(101),b=r(72),d=r(53),y=r(71),m=r(63),w=r(248),_=r(336),g=r(172),O=r(236),S=r(55),x=r(74),T=r(48),j=r(47),E=function(t){var e=1==t,r=4==t;return function(i,o,s){var u,c,f,h=a(o,s,3),l=x(i),p=e||7==t||2==t?new("function"==typeof this?this:n):void 0;for(u in l)if(j(l,u)&&(c=l[u],f=h(c,u,i),t))if(e)p[u]=f;else if(f)switch(t){case 2:p[u]=c;break;case 3:return!0;case 5:return c;case 6:return u;case 7:p[f[0]]=f[1]}else if(r)return!1;return 3==t||r?r:p}},k=E(6),P=function(t){return function(e){return new I(e,t)}},I=function(t,e){this._t=x(t),this._a=b(t),this._i=0,this._k=e};g(I,"Dict",function(){var t,e=this,r=e._t,n=e._a,i=e._k;do if(e._i>=n.length)return e._t=void 0,O(1);while(!j(r,t=n[e._i++]));return"keys"==i?O(0,t):"values"==i?O(0,r[t]):O(0,[t,r[t]])}),n.prototype=null,f(f.G+f.F,{Dict:n}),f(f.S,"Dict",{keys:P("keys"),values:P("values"),entries:P("entries"),forEach:E(0),map:E(1),filter:E(2),some:E(3),every:E(4),find:E(5),findKey:k,mapPairs:E(7),reduce:i,keyOf:y,includes:o,has:j,get:s,set:u,isDict:c})},function(t,e,r){var n=r(117),i=r(67)("iterator"),o=r(171);t.exports=r(51).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(n(e))}},function(t,e,r){var n=r(54),i=r(206);t.exports=r(51).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){var n=r(46),i=r(51),o=r(50),s=r(331);o(o.G+o.F,{delay:function(t){return new(i.Promise||n.Promise)(function(e){setTimeout(s.call(e,!0),t)})}})},function(t,e,r){var n=r(332),i=r(50);r(51)._=n._=n._||{},i(i.P+i.F,"Function",{part:r(331)})},function(t,e,r){var n=r(50);n(n.S+n.F,"Object",{isObject:r(55)})},function(t,e,r){var n=r(50);n(n.S+n.F,"Object",{classof:r(117)})},function(t,e,r){var n=r(50),i=r(343);n(n.S+n.F,"Object",{define:i})},function(t,e,r){var n=r(53),i=r(93),o=r(285),s=r(74);t.exports=function(t,e){for(var r,u=o(s(e)),c=u.length,a=0;c>a;)n.f(t,r=u[a++],i.f(e,r));return t}},function(t,e,r){var n=r(50),i=r(343),o=r(88);n(n.S+n.F,"Object",{make:function(t,e){return i(o(t),e)}})},function(t,e,r){"use strict";r(170)(Number,"Number",function(t){this._l=+t,this._i=0},function(){var t=this._i++,e=!(t<this._l);return{done:e,value:e?void 0:t}})},function(t,e,r){var n=r(50),i=r(347)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var r=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,r)}}},function(t,e,r){"use strict";var n=r(50),i=r(347)(/[&<>"']/g,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"});n(n.P+n.F,"String",{escapeHTML:function(){return i(this)}})},function(t,e,r){"use strict";var n=r(50),i=r(347)(/&(?:amp|lt|gt|quot|apos);/g,{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"});n(n.P+n.F,"String",{unescapeHTML:function(){return i(this)}})},function(t,e,r){"use strict";var n=r(3);e.Subject=n.Subject;var i=r(4);e.Observable=i.Observable,r(351),r(355),r(358),r(369),r(373),r(376),r(378),r(381),r(389),r(392),r(395),r(397),r(406),r(409),r(411),r(415),r(417),r(420),r(423),r(427),r(430),r(432),r(434),r(436),r(438),r(440),r(447),r(449),r(451),r(452),r(453),r(455),r(458),r(461),r(463),r(465),r(467),r(469),r(471),r(473),r(475),r(477),r(479),r(481),r(483),r(485),r(488),r(493),r(495),r(497),r(499),r(501),r(503),r(505),r(507),r(509),r(511),r(512),r(513),r(514),r(515),r(516),r(517),r(520),r(522),r(524),r(527),r(528),r(530),r(531),r(533),r(535),r(537),r(539),r(541),r(543),r(545),r(547),r(549),r(551),r(553),r(555),r(557),r(566),r(568),r(570),r(572),r(575),r(577),r(579),r(581),r(583),r(585),r(587),r(589),r(591),r(593),r(595),r(597),r(599),r(601),r(603),r(605),r(606);var o=r(608);e.Operator=o.Operator;var s=r(11);e.Subscription=s.Subscription;var u=r(9);e.Subscriber=u.Subscriber;var c=r(354);e.AsyncSubject=c.AsyncSubject;var a=r(443);e.ReplaySubject=a.ReplaySubject;var f=r(526);e.BehaviorSubject=f.BehaviorSubject;var h=r(446);e.ConnectableObservable=h.ConnectableObservable;var l=r(388);e.Notification=l.Notification;var p=r(487);e.EmptyError=p.EmptyError;var v=r(574);e.ArgumentOutOfRangeError=v.ArgumentOutOfRangeError;var b=r(21);e.ObjectUnsubscribedError=b.ObjectUnsubscribedError;var d=r(16);e.UnsubscriptionError=d.UnsubscriptionError;var y=r(560),m=r(401),w=r(444),_=r(17),g=r(7),O=r(367),S={asap:y.asap,async:m.async,queue:w.queue};e.Scheduler=S;var x={rxSubscriber:_.$$rxSubscriber,observable:g.$$observable,iterator:O.$$iterator};e.Symbol=x},function(t,e,r){"use strict";var n=r(4),i=r(352);n.Observable.bindCallback=i.bindCallback},function(t,e,r){"use strict";var n=r(353);e.bindCallback=n.BoundCallbackObservable.create},function(t,e,r){"use strict";function n(t){var e=this,r=t.source,n=t.subscriber,s=r.callbackFunc,u=r.args,h=r.scheduler,l=r.subject;if(!l){l=r.subject=new f.AsyncSubject;var p=function b(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=b.source,s=n.selector,u=n.subject;if(s){var f=c.tryCatch(s).apply(this,t);f===a.errorObject?e.add(h.schedule(o,0,{err:a.errorObject.e,subject:u})):e.add(h.schedule(i,0,{value:f,subject:u}))}else{var l=1===t.length?t[0]:t;e.add(h.schedule(i,0,{value:l,subject:u}))}};p.source=r;var v=c.tryCatch(s).apply(this,u.concat(p));v===a.errorObject&&l.error(a.errorObject.e)}e.add(l.subscribe(n))}function i(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function o(t){var e=t.err,r=t.subject;r.error(e)}var s=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},u=r(4),c=r(14),a=r(15),f=r(354),h=function(t){function e(e,r,n,i){t.call(this),this.callbackFunc=e,this.selector=r,this.args=n,this.scheduler=i}return s(e,t),e.create=function(t,r,n){return void 0===r&&(r=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new e(t,r,i,n)}},e.prototype._subscribe=function(t){var e=this.callbackFunc,r=this.args,i=this.scheduler,o=this.subject;if(i)return i.schedule(n,0,{source:this,subscriber:t});if(!o){o=this.subject=new f.AsyncSubject;var s=function h(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=h.source,n=r.selector,i=r.subject;if(n){var o=c.tryCatch(n).apply(this,t);o===a.errorObject?i.error(a.errorObject.e):(i.next(o),i.complete())}else i.next(1===t.length?t[0]:t),i.complete()};s.source=this;var u=c.tryCatch(e).apply(this,r.concat(s));u===a.errorObject&&o.error(a.errorObject.e)}return o.subscribe(t)},e}(u.Observable);e.BoundCallbackObservable=h},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(3),o=function(t){function e(){t.apply(this,arguments),this.value=null,this.hasNext=!1}return n(e,t),e.prototype._subscribe=function(e){return this.hasCompleted&&this.hasNext&&e.next(this.value),t.prototype._subscribe.call(this,e)},e.prototype._next=function(t){this.value=t,this.hasNext=!0},e.prototype._complete=function(){var t=-1,e=this.observers,r=e.length;if(this.isUnsubscribed=!0,this.hasNext)for(;++t<r;){var n=e[t];n.next(this.value),n.complete()}else for(;++t<r;)e[t].complete();this.isUnsubscribed=!1,this.unsubscribe()},e}(i.Subject);e.AsyncSubject=o},function(t,e,r){"use strict";var n=r(4),i=r(356);n.Observable.bindNodeCallback=i.bindNodeCallback},function(t,e,r){"use strict";var n=r(357);e.bindNodeCallback=n.BoundNodeCallbackObservable.create},function(t,e,r){"use strict";function n(t){var e=this,r=t.source,n=t.subscriber,s=r.callbackFunc,u=r.args,h=r.scheduler,l=r.subject;if(!l){l=r.subject=new f.AsyncSubject;var p=function b(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=b.source,s=n.selector,u=n.subject,f=t.shift();if(f)u.error(f);else if(s){var l=c.tryCatch(s).apply(this,t);l===a.errorObject?e.add(h.schedule(o,0,{err:a.errorObject.e,subject:u})):e.add(h.schedule(i,0,{value:l,subject:u}))}else{var p=1===t.length?t[0]:t;e.add(h.schedule(i,0,{value:p,subject:u}))}};p.source=r;var v=c.tryCatch(s).apply(this,u.concat(p));v===a.errorObject&&l.error(a.errorObject.e)}e.add(l.subscribe(n))}function i(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function o(t){var e=t.err,r=t.subject;r.error(e)}var s=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},u=r(4),c=r(14),a=r(15),f=r(354),h=function(t){function e(e,r,n,i){t.call(this),this.callbackFunc=e,this.selector=r,this.args=n,this.scheduler=i}return s(e,t),e.create=function(t,r,n){return void 0===r&&(r=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new e(t,r,i,n)}},e.prototype._subscribe=function(t){var e=this.callbackFunc,r=this.args,i=this.scheduler,o=this.subject;if(i)return i.schedule(n,0,{source:this,subscriber:t});if(!o){o=this.subject=new f.AsyncSubject;
var s=function h(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=h.source,n=r.selector,i=r.subject,o=t.shift();if(o)i.error(o);else if(n){var s=c.tryCatch(n).apply(this,t);s===a.errorObject?i.error(a.errorObject.e):(i.next(s),i.complete())}else i.next(1===t.length?t[0]:t),i.complete()};s.source=this;var u=c.tryCatch(e).apply(this,r.concat(s));u===a.errorObject&&o.error(a.errorObject.e)}return o.subscribe(t)},e}(u.Observable);e.BoundNodeCallbackObservable=h},function(t,e,r){"use strict";var n=r(4),i=r(359);n.Observable.combineLatest=i.combineLatestStatic},function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=null;return"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&u.isArray(t[0])&&(t=t[0]),t.unshift(this),new s.ArrayObservable(t).lift(new h(r))}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=null,n=null;return c.isScheduler(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&u.isArray(t[0])&&(t=t[0]),new s.ArrayObservable(t,n).lift(new h(r))}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},s=r(360),u=r(12),c=r(363),a=r(364),f=r(365);e.combineLatest=n,e.combineLatestStatic=i;var h=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.project))},t}();e.CombineLatestOperator=h;var l=function(t){function e(e,r){t.call(this,e),this.project=r,this.active=0,this.values=[],this.observables=[],this.toRespond=[]}return o(e,t),e.prototype._next=function(t){var e=this.toRespond;e.push(e.length),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e;for(var r=0;r<e;r++){var n=t[r];this.add(f.subscribeToResult(this,n,n,r))}}},e.prototype.notifyComplete=function(t){0===(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){var o=this.values;o[r]=e;var s=this.toRespond;if(s.length>0){var u=s.indexOf(r);u!==-1&&s.splice(u,1)}0===s.length&&(this.project?this._tryProject(o):this.destination.next(o))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)},e}(a.OuterSubscriber);e.CombineLatestSubscriber=l},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(361),s=r(362),u=r(363),c=function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return n(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=t[t.length-1];u.isScheduler(n)?t.pop():n=null;var i=t.length;return i>1?new e(t,n):1===i?new o.ScalarObservable(t[0],n):new s.EmptyObservable(n)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,i=t.subscriber;return r>=n?void i.complete():(i.next(e[r]),void(i.isUnsubscribed||(t.index=r+1,this.schedule(t))))},e.prototype._subscribe=function(t){var r=0,n=this.array,i=n.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:n,index:r,count:i,subscriber:t});for(var s=0;s<i&&!t.isUnsubscribed;s++)t.next(n[s]);t.complete()},e}(i.Observable);e.ArrayObservable=c},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0}return n(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;return e?void n.complete():(n.next(r),void(n.isUnsubscribed||(t.done=!0,this.schedule(t))))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;return n?n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t}):(t.next(r),void(t.isUnsubscribed||t.complete()))},e}(i.Observable);e.ScalarObservable=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=function(t){function e(e){t.call(this),this.scheduler=e}return n(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){var e=t.subscriber;e.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;return r?r.schedule(e.dispatch,0,{subscriber:t}):void t.complete()},e}(i.Observable);e.EmptyObservable=o},function(t,e){"use strict";function r(t){return t&&"function"==typeof t.schedule}e.isScheduler=r},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(9),o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(i.Subscriber);e.OuterSubscriber=o},function(t,e,r){"use strict";function n(t,e,r,n){var h=new f.InnerSubscriber(t,r,n);if(!h.isUnsubscribed){if(e instanceof u.Observable)return e._isScalar?(h.next(e.value),void h.complete()):e.subscribe(h);if(o.isArray(e)){for(var l=0,p=e.length;l<p&&!h.isUnsubscribed;l++)h.next(e[l]);h.isUnsubscribed||h.complete()}else{if(s.isPromise(e))return e.then(function(t){h.isUnsubscribed||(h.next(t),h.complete())},function(t){return h.error(t)}).then(null,function(t){i.root.setTimeout(function(){throw t})}),h;if("function"==typeof e[c.$$iterator]){for(var v=0,b=e;v<b.length;v++){var d=b[v];if(h.next(d),h.isUnsubscribed)break}h.isUnsubscribed||h.complete()}else if("function"==typeof e[a.$$observable]){var y=e[a.$$observable]();if("function"==typeof y.subscribe)return y.subscribe(new f.InnerSubscriber(t,r,n));h.error("invalid observable")}else h.error(new TypeError("unknown type returned"))}}}var i=r(5),o=r(12),s=r(366),u=r(4),c=r(367),a=r(7),f=r(368);e.subscribeToResult=n},function(t,e){"use strict";function r(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}e.isPromise=r},function(t,e,r){"use strict";var n=r(5),i=n.root.Symbol;if("function"==typeof i)i.iterator?e.$$iterator=i.iterator:"function"==typeof i["for"]&&(e.$$iterator=i["for"]("iterator"));else if(n.root.Set&&"function"==typeof(new n.root.Set)["@@iterator"])e.$$iterator="@@iterator";else if(n.root.Map)for(var o=Object.getOwnPropertyNames(n.root.Map.prototype),s=0;s<o.length;++s){var u=o[s];if("entries"!==u&&"size"!==u&&n.root.Map.prototype[u]===n.root.Map.prototype.entries){e.$$iterator=u;break}}else e.$$iterator="@@iterator"},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(9),o=function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return n(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(i.Subscriber);e.InnerSubscriber=o},function(t,e,r){"use strict";var n=r(4),i=r(370);n.Observable.concat=i.concat},function(t,e,r){"use strict";var n=r(371);e.concat=n.concatStatic},function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i.apply(void 0,[this].concat(t))}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=null,n=t;return o.isScheduler(n[t.length-1])&&(r=n.pop()),new s.ArrayObservable(t,r).lift(new u.MergeAllOperator(1))}var o=r(363),s=r(360),u=r(372);e.concat=n,e.concatStatic=i},function(t,e,r){"use strict";function n(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.mergeAll=n;var u=function(){function t(t){this.concurrent=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.concurrent))},t}();e.MergeAllOperator=u;var c=function(t){function e(e,r){t.call(this,e),this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?(this.active++,this.add(s.subscribeToResult(this,t))):this.buffer.push(t)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeAllSubscriber=c},function(t,e,r){"use strict";var n=r(4),i=r(374);n.Observable.defer=i.defer},function(t,e,r){"use strict";var n=r(375);e.defer=n.DeferObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(365),s=r(364),u=function(t){function e(e){t.call(this),this.observableFactory=e}return n(e,t),e.create=function(t){return new e(t)},e.prototype._subscribe=function(t){return new c(t,this.observableFactory)},e}(i.Observable);e.DeferObservable=u;var c=function(t){function e(e,r){t.call(this,e),this.factory=r,this.tryDefer()}return n(e,t),e.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},e.prototype._callFactory=function(){var t=this.factory();t&&this.add(o.subscribeToResult(this,t))},e}(s.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(377);n.Observable.empty=i.empty},function(t,e,r){"use strict";var n=r(362);e.empty=n.EmptyObservable.create},function(t,e,r){"use strict";var n=r(4),i=r(379);n.Observable.forkJoin=i.forkJoin},function(t,e,r){"use strict";var n=r(380);e.forkJoin=n.ForkJoinObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(362),s=r(12),u=r(365),c=r(364),a=function(t){function e(e,r){t.call(this),this.sources=e,this.resultSelector=r}return n(e,t),e.create=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];if(null===t||0===arguments.length)return new o.EmptyObservable;var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),0===t.length?new o.EmptyObservable:new e(t,n)},e.prototype._subscribe=function(t){return new f(t,this.sources,this.resultSelector)},e}(i.Observable);e.ForkJoinObservable=a;var f=function(t){function e(e,r,n){t.call(this,e),this.sources=r,this.resultSelector=n,this.completed=0,this.haveValues=0;var i=r.length;this.total=i,this.values=new Array(i);for(var o=0;o<i;o++){var s=r[o],c=u.subscribeToResult(this,s,null,o);c&&(c.outerIndex=o,this.add(c))}}return n(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.values[r]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,r=this,n=r.haveValues,i=r.resultSelector,o=r.values,s=o.length;if(!t._hasValue)return void e.complete();if(this.completed++,this.completed===s){if(n===s){var u=i?i.apply(this,o):o;e.next(u)}e.complete()}},e}(c.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(382);n.Observable.from=i.from},function(t,e,r){"use strict";var n=r(383);e.from=n.FromObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(12),o=r(10),s=r(366),u=r(363),c=r(384),a=r(385),f=r(360),h=r(386),l=r(7),p=r(367),v=r(4),b=r(387),d=function(t){return t&&"number"==typeof t.length},y=function(t){function e(e,r){t.call(this,null),this.ish=e,this.scheduler=r}return n(e,t),e.create=function(t,r,n,b){var y=null,m=null;if(o.isFunction(r)?(y=b||null,m=r):u.isScheduler(y)&&(y=r),null!=t){if("function"==typeof t[l.$$observable])return t instanceof v.Observable&&!y?t:new e(t,y);if(i.isArray(t))return new f.ArrayObservable(t,y);if(s.isPromise(t))return new c.PromiseObservable(t,y);if("function"==typeof t[p.$$iterator]||"string"==typeof t)return new a.IteratorObservable(t,null,null,y);if(d(t))return new h.ArrayLikeObservable(t,m,n,y)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[l.$$observable]().subscribe(t):e[l.$$observable]().subscribe(new b.ObserveOnSubscriber(t,r,0))},e}(v.Observable);e.FromObservable=y},function(t,e,r){"use strict";function n(t){var e=t.value,r=t.subscriber;r.isUnsubscribed||(r.next(e),r.complete())}function i(t){var e=t.err,r=t.subscriber;r.isUnsubscribed||r.error(e)}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},s=r(5),u=r(4),c=function(t){function e(e,r){void 0===r&&(r=null),t.call(this),this.promise=e,this.scheduler=r}return o(e,t),e.create=function(t,r){return void 0===r&&(r=null),new e(t,r)},e.prototype._subscribe=function(t){var e=this,r=this.promise,o=this.scheduler;if(null==o)this._isScalar?t.isUnsubscribed||(t.next(this.value),t.complete()):r.then(function(r){e.value=r,e._isScalar=!0,t.isUnsubscribed||(t.next(r),t.complete())},function(e){t.isUnsubscribed||t.error(e)}).then(null,function(t){s.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.isUnsubscribed)return o.schedule(n,0,{value:this.value,subscriber:t})}else r.then(function(r){e.value=r,e._isScalar=!0,t.isUnsubscribed||t.add(o.schedule(n,0,{value:r,subscriber:t}))},function(e){t.isUnsubscribed||t.add(o.schedule(i,0,{err:e,subscriber:t}))}).then(null,function(t){s.root.setTimeout(function(){throw t})})},e}(u.Observable);e.PromiseObservable=c},function(t,e,r){"use strict";function n(t){var e=t[p.$$iterator];if(!e&&"string"==typeof t)return new d(t);if(!e&&void 0!==t.length)return new y(t);if(!e)throw new TypeError("Object is not iterable");return t[p.$$iterator]()}function i(t){var e=+t.length;return isNaN(e)?0:0!==e&&o(e)?(e=s(e)*Math.floor(Math.abs(e)),e<=0?0:e>m?m:e):e}function o(t){return"number"==typeof t&&c.root.isFinite(t)}function s(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}var u=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},c=r(5),a=r(13),f=r(14),h=r(4),l=r(10),p=r(367),v=r(15),b=function(t){function e(e,r,i,o){if(t.call(this),null==e)throw new Error("iterator cannot be null.");if(a.isObject(r))this.thisArg=r,this.scheduler=i;else if(l.isFunction(r))this.project=r,this.thisArg=i,this.scheduler=o;else if(null!=r)throw new Error("When provided, `project` must be a function.");this.iterator=n(e)}return u(e,t),e.create=function(t,r,n,i){return new e(t,r,n,i)},e.dispatch=function(t){var e=t.index,r=t.hasError,n=t.thisArg,i=t.project,o=t.iterator,s=t.subscriber;if(r)return void s.error(t.error);var u=o.next();return u.done?void s.complete():(i?(u=f.tryCatch(i).call(n,u.value,e),u===v.errorObject?(t.error=v.errorObject.e,t.hasError=!0):(s.next(u),t.index=e+1)):(s.next(u.value),t.index=e+1),void(s.isUnsubscribed||this.schedule(t)))},e.prototype._subscribe=function(t){var r=0,n=this,i=n.iterator,o=n.project,s=n.thisArg,u=n.scheduler;if(u)return u.schedule(e.dispatch,0,{index:r,thisArg:s,project:o,iterator:i,subscriber:t});for(;;){var c=i.next();if(c.done){t.complete();break}if(o){if(c=f.tryCatch(o).call(s,c.value,r++),c===v.errorObject){t.error(v.errorObject.e);break}t.next(c)}else t.next(c.value);if(t.isUnsubscribed)break}},e}(h.Observable);e.IteratorObservable=b;var d=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[p.$$iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),y=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=i(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[p.$$iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}(),m=Math.pow(2,53)-1},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(361),s=r(362),u=function(t){function e(e,r,n,i){t.call(this),this.arrayLike=e,this.scheduler=i,r||i||1!==e.length||(this._isScalar=!0,this.value=e[0]),r&&(this.mapFn=r.bind(n))}return n(e,t),e.create=function(t,r,n,i){var u=t.length;return 0===u?new s.EmptyObservable:1!==u||r?new e(t,r,n,i):new o.ScalarObservable(t[0],i)},e.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,i=t.mapFn,o=t.subscriber;if(!o.isUnsubscribed){if(r>=n)return void o.complete();var s=i?i(e[r],r):e[r];o.next(s),t.index=r+1,this.schedule(t)}},e.prototype._subscribe=function(t){var r=0,n=this,i=n.arrayLike,o=n.mapFn,s=n.scheduler,u=i.length;if(s)return s.schedule(e.dispatch,0,{arrayLike:i,index:r,length:u,mapFn:o,subscriber:t});for(var c=0;c<u&&!t.isUnsubscribed;c++){var a=o?o(i[c],c):i[c];t.next(a)}t.complete()},e}(i.Observable);e.ArrayLikeObservable=u},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e=0),this.lift(new u(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(388);e.observeOn=n;var u=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=u;var c=function(t){function e(e,r,n){void 0===n&&(n=0),t.call(this,e),this.scheduler=r,this.delay=n}return i(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r)},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new a(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete())},e}(o.Subscriber);e.ObserveOnSubscriber=c;var a=function(){function t(t,e){this.notification=t,this.destination=e}return t}();e.ObserveOnMessage=a},function(t,e,r){"use strict";var n=r(4),i=function(){function t(t,e,r){this.kind=t,this.value=e,this.exception=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.exception);case"C":return t.complete&&t.complete()}},t.prototype["do"]=function(t,e,r){var n=this.kind;switch(n){case"N":return t&&t(this.value);case"E":return e&&e(this.exception);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this["do"](t,e,r)},t.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return n.Observable.of(this.value);case"E":return n.Observable["throw"](this.exception);case"C":return n.Observable.empty()}},t.createNext=function(e){return"undefined"!=typeof e?new t("N",e):this.undefinedValueNotification},t.createError=function(e){return new t("E",(void 0),e)},t.createComplete=function(){return this.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",(void 0)),t}();e.Notification=i},function(t,e,r){"use strict";var n=r(4),i=r(390);n.Observable.fromEvent=i.fromEvent},function(t,e,r){"use strict";var n=r(391);e.fromEvent=n.FromEventObservable.create},function(t,e,r){"use strict";function n(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}function i(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}function o(t){return!!t&&"[object NodeList]"===t.toString()}function s(t){return!!t&&"[object HTMLCollection]"===t.toString()}function u(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}var c=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},a=r(4),f=r(14),h=r(15),l=r(11),p=function(t){function e(e,r,n){t.call(this),this.sourceObj=e,this.eventName=r,this.selector=n}return c(e,t),e.create=function(t,r,n){return new e(t,r,n)},e.setupSubscription=function(t,r,c,a){var f;if(o(t)||s(t))for(var h=0,p=t.length;h<p;h++)e.setupSubscription(t[h],r,c,a);else u(t)?(t.addEventListener(r,c),f=function(){return t.removeEventListener(r,c)}):i(t)?(t.on(r,c),f=function(){return t.off(r,c)}):n(t)&&(t.addListener(r,c),f=function(){return t.removeListener(r,c)});a.add(new l.Subscription(f))},e.prototype._subscribe=function(t){var r=this.sourceObj,n=this.eventName,i=this.selector,o=i?function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=f.tryCatch(i).apply(void 0,e);n===h.errorObject?t.error(h.errorObject.e):t.next(n)}:function(e){return t.next(e)};e.setupSubscription(r,n,o,t)},e}(a.Observable);e.FromEventObservable=p},function(t,e,r){"use strict";var n=r(4),i=r(393);n.Observable.fromEventPattern=i.fromEventPattern},function(t,e,r){"use strict";var n=r(394);e.fromEventPattern=n.FromEventPatternObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(11),s=r(14),u=r(15),c=function(t){function e(e,r,n){t.call(this),this.addHandler=e,this.removeHandler=r,this.selector=n}return n(e,t),e.create=function(t,r,n){return new e(t,r,n)},e.prototype._subscribe=function(t){var e=this.addHandler,r=this.removeHandler,n=this.selector,i=n?function(e){var r=s.tryCatch(n).apply(null,arguments);r===u.errorObject?t.error(r.e):t.next(r)}:function(e){t.next(e)},c=s.tryCatch(e)(i);c===u.errorObject&&t.error(c.e),t.add(new o.Subscription(function(){r(i)}))},e}(i.Observable);e.FromEventPatternObservable=c},function(t,e,r){"use strict";var n=r(4),i=r(396);n.Observable.fromPromise=i.fromPromise},function(t,e,r){"use strict";var n=r(384);e.fromPromise=n.PromiseObservable.create},function(t,e,r){"use strict";var n=r(4),i=r(398);n.Observable.interval=i.interval},function(t,e,r){"use strict";var n=r(399);e.interval=n.IntervalObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(400),o=r(4),s=r(401),u=function(t){function e(e,r){void 0===e&&(e=0),void 0===r&&(r=s.async),t.call(this),this.period=e,this.scheduler=r,(!i.isNumeric(e)||e<0)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=s.async)}return n(e,t),e.create=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=s.async),new e(t,r)},e.dispatch=function(t){var e=t.index,r=t.subscriber,n=t.period;r.next(e),r.isUnsubscribed||(t.index+=1,this.schedule(t,n))},e.prototype._subscribe=function(t){var r=0,n=this.period,i=this.scheduler;t.add(i.schedule(e.dispatch,n,{index:r,subscriber:t,period:n}))},e}(o.Observable);e.IntervalObservable=u},function(t,e,r){"use strict";function n(t){return!i.isArray(t)&&t-parseFloat(t)+1>=0}var i=r(12);e.isNumeric=n},function(t,e,r){"use strict";var n=r(402);e.async=new n.AsyncScheduler},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(403),o=r(404),s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.scheduleNow=function(t,e){return new i.FutureAction(this,t).schedule(e,0)},e}(o.QueueScheduler);e.AsyncScheduler=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(5),o=r(11),s=function(t){function e(e,r){t.call(this),this.scheduler=e,this.work=r,this.pending=!1}return n(e,t),e.prototype.execute=function(){if(this.isUnsubscribed)this.error=new Error("executing a cancelled action");else try{this.work(this.state)}catch(t){this.unsubscribe(),this.error=t}},e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this.isUnsubscribed?this:this._schedule(t,e)},e.prototype._schedule=function(t,e){var r=this;void 0===e&&(e=0),this.state=t,this.pending=!0;var n=this.id;return null!=n&&this.delay===e?this:(this.delay=e,null!=n&&(this.id=null,i.root.clearInterval(n)),this.id=i.root.setInterval(function(){r.pending=!1;var t=r,e=t.id,n=t.scheduler;n.actions.push(r),n.flush(),r.pending===!1&&null!=e&&(r.id=null,i.root.clearInterval(e))},e),this)},e.prototype._unsubscribe=function(){this.pending=!1;var t=this,e=t.id,r=t.scheduler,n=r.actions,o=n.indexOf(this);null!=e&&(this.id=null,i.root.clearInterval(e)),o!==-1&&n.splice(o,1),this.work=null,this.state=null,this.scheduler=null},e}(o.Subscription);e.FutureAction=s},function(t,e,r){"use strict";var n=r(405),i=r(403),o=function(){function t(){this.active=!1,this.actions=[],this.scheduledId=null}return t.prototype.now=function(){return Date.now()},t.prototype.flush=function(){if(!this.active&&!this.scheduledId){this.active=!0;for(var t=this.actions,e=null;e=t.shift();)if(e.execute(),e.error)throw this.active=!1,e.error;this.active=!1}},t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),e<=0?this.scheduleNow(t,r):this.scheduleLater(t,e,r)},t.prototype.scheduleNow=function(t,e){return new n.QueueAction(this,t).schedule(e)},t.prototype.scheduleLater=function(t,e,r){return new i.FutureAction(this,t).schedule(r,e)},t}();e.QueueScheduler=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(403),o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype._schedule=function(e,r){if(void 0===r&&(r=0),r>0)return t.prototype._schedule.call(this,e,r);this.delay=r,this.state=e;var n=this.scheduler;return n.actions.push(this),n.flush(),this},e}(i.FutureAction);e.QueueAction=o},function(t,e,r){"use strict";var n=r(4),i=r(407);n.Observable.merge=i.merge},function(t,e,r){"use strict";var n=r(408);e.merge=n.mergeStatic},function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.unshift(this),i.apply(this,t)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return u.isScheduler(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),1===t.length?t[0]:new o.ArrayObservable(t,n).lift(new s.MergeAllOperator(r))}var o=r(360),s=r(372),u=r(363);e.merge=n,e.mergeStatic=i},function(t,e,r){"use strict";var n=r(4),i=r(410);n.Observable.race=i.raceStatic},function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&s.isArray(t[0])&&(t=t[0]),t.unshift(this),i.apply(this,t)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(1===t.length){if(!s.isArray(t[0]))return t[0];t=t[0]}return new u.ArrayObservable(t).lift(new f)}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},s=r(12),u=r(360),c=r(364),a=r(365);e.race=n,e.raceStatic=i;var f=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new h(t))},t}();e.RaceOperator=f;var h=function(t){function e(e){t.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return o(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var r=0;r<e;r++){var n=t[r],i=a.subscribeToResult(this,n,n,r);this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(c.OuterSubscriber);e.RaceSubscriber=h},function(t,e,r){"use strict";var n=r(4),i=r(412);n.Observable.never=i.never},function(t,e,r){"use strict";var n=r(413);e.never=n.NeverObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(414),s=function(t){function e(){t.call(this)}return n(e,t),e.create=function(){return new e},e.prototype._subscribe=function(t){o.noop()},e}(i.Observable);e.NeverObservable=s},function(t,e){"use strict";function r(){}e.noop=r},function(t,e,r){"use strict";var n=r(4),i=r(416);n.Observable.of=i.of},function(t,e,r){"use strict";var n=r(360);e.of=n.ArrayObservable.of},function(t,e,r){"use strict";var n=r(4),i=r(418);n.Observable.range=i.range},function(t,e,r){"use strict";var n=r(419);e.range=n.RangeObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=function(t){function e(e,r,n){t.call(this),this.start=e,this._count=r,this.scheduler=n}return n(e,t),e.create=function(t,r,n){return void 0===t&&(t=0),void 0===r&&(r=0),new e(t,r,n)},e.dispatch=function(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;return r>=n?void i.complete():(i.next(e),void(i.isUnsubscribed||(t.index=r+1,t.start=e+1,this.schedule(t))))},e.prototype._subscribe=function(t){var r=0,n=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{index:r,count:i,start:n,subscriber:t});for(;;){if(r++>=i){t.complete();break}if(t.next(n++),t.isUnsubscribed)break}},e}(i.Observable);e.RangeObservable=o},function(t,e,r){"use strict";var n=r(4),i=r(421);n.Observable["throw"]=i._throw},function(t,e,r){"use strict";var n=r(422);e._throw=n.ErrorObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);
t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=function(t){function e(e,r){t.call(this),this.error=e,this.scheduler=r}return n(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.error,r=t.subscriber;r.error(e)},e.prototype._subscribe=function(t){var r=this.error,n=this.scheduler;return n?n.schedule(e.dispatch,0,{error:r,subscriber:t}):void t.error(r)},e}(i.Observable);e.ErrorObservable=o},function(t,e,r){"use strict";var n=r(4),i=r(424);n.Observable.timer=i.timer},function(t,e,r){"use strict";var n=r(425);e.timer=n.TimerObservable.create},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(400),o=r(4),s=r(401),u=r(363),c=r(426),a=function(t){function e(e,r,n){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,i.isNumeric(r)?this.period=Number(r)<1&&1||Number(r):u.isScheduler(r)&&(n=r),u.isScheduler(n)||(n=s.async),this.scheduler=n,this.dueTime=c.isDate(e)?+e-this.scheduler.now():e}return n(e,t),e.create=function(t,r,n){return void 0===t&&(t=0),new e(t,r,n)},e.dispatch=function(t){var e=t.index,r=t.period,n=t.subscriber,i=this;if(n.next(e),!n.isUnsubscribed){if(r===-1)return n.complete();t.index=e+1,i.schedule(t,r)}},e.prototype._subscribe=function(t){var r=0,n=this,i=n.period,o=n.dueTime,s=n.scheduler;return s.schedule(e.dispatch,o,{index:r,period:i,subscriber:t})},e}(o.Observable);e.TimerObservable=a},function(t,e){"use strict";function r(t){return t instanceof Date&&!isNaN(+t)}e.isDate=r},function(t,e,r){"use strict";var n=r(4),i=r(428);n.Observable.zip=i.zip},function(t,e,r){"use strict";var n=r(429);e.zip=n.zipStatic},function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.unshift(this),i.apply(this,t)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t[t.length-1];return"function"==typeof r&&t.pop(),new s.ArrayObservable(t).lift(new l(r))}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},s=r(360),u=r(12),c=r(9),a=r(364),f=r(365),h=r(367);e.zipProto=n,e.zipStatic=i;var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e._subscribe(new p(t,this.project))},t}();e.ZipOperator=l;var p=function(t){function e(e,r,n){void 0===n&&(n=Object.create(null)),t.call(this,e),this.index=0,this.iterators=[],this.active=0,this.project="function"==typeof r?r:null,this.values=n}return o(e,t),e.prototype._next=function(t){var e=this.iterators,r=this.index++;u.isArray(t)?e.push(new b(t)):"function"==typeof t[h.$$iterator]?e.push(new v(t[h.$$iterator]())):e.push(new d(this.destination,this,t,r))},e.prototype._complete=function(){var t=this.iterators,e=t.length;this.active=e;for(var r=0;r<e;r++){var n=t[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++){var i=t[n];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var o=!1,s=[],n=0;n<e;n++){var i=t[n],u=i.next();if(i.hasCompleted()&&(o=!0),u.done)return void r.complete();s.push(u.value)}this.project?this._tryProject(s):r.next(s),o&&r.complete()},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)},e}(c.Subscriber);e.ZipSubscriber=p;var v=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),b=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[h.$$iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),d=function(t){function e(e,r,n,i){t.call(this,e),this.parent=r,this.observable=n,this.index=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return o(e,t),e.prototype[h.$$iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return f.subscribeToResult(this,this.observable,this,e)},e}(a.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(431);n.Observable.prototype.buffer=i.buffer},function(t,e,r){"use strict";function n(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.buffer=n;var u=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.closingNotifier))},t}(),c=function(t){function e(e,r){t.call(this,e),this.buffer=[],this.add(s.subscribeToResult(this,r))}return i(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,r,n,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(433);n.Observable.prototype.bufferCount=i.bufferCount},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e=null),this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.bufferCount=n;var s=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.bufferSize,this.startBufferEvery))},t}(),u=function(t){function e(e,r,n){t.call(this,e),this.bufferSize=r,this.startBufferEvery=n,this.buffers=[[]],this.count=0}return i(e,t),e.prototype._next=function(t){var e=this.count+=1,r=this.destination,n=this.bufferSize,i=null==this.startBufferEvery?n:this.startBufferEvery,o=this.buffers,s=o.length,u=-1;e%i===0&&o.push([]);for(var c=0;c<s;c++){var a=o[c];a.push(t),a.length===n&&(u=c,r.next(a))}u!==-1&&o.splice(u,1)},e.prototype._complete=function(){for(var e=this.destination,r=this.buffers;r.length>0;){var n=r.shift();n.length>0&&e.next(n)}t.prototype._complete.call(this)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(435);n.Observable.prototype.bufferTime=i.bufferTime},function(t,e,r){"use strict";function n(t,e,r){return void 0===e&&(e=null),void 0===r&&(r=a.async),this.lift(new f(t,e,r))}function i(t){var e=t.subscriber,r=t.buffer;r&&e.closeBuffer(r),t.buffer=e.openBuffer(),e.isUnsubscribed||this.schedule(t,t.bufferTimeSpan)}function o(t){var e=t.bufferCreationInterval,r=t.bufferTimeSpan,n=t.subscriber,i=t.scheduler,o=n.openBuffer(),u=this;n.isUnsubscribed||(u.add(i.schedule(s,r,{subscriber:n,buffer:o})),u.schedule(t,e))}function s(t){var e=t.subscriber,r=t.buffer;e.closeBuffer(r)}var u=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},c=r(9),a=r(401);e.bufferTime=n;var f=function(){function t(t,e,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.scheduler=r}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.bufferTimeSpan,this.bufferCreationInterval,this.scheduler))},t}(),h=function(t){function e(e,r,n,u){t.call(this,e),this.bufferTimeSpan=r,this.bufferCreationInterval=n,this.scheduler=u,this.buffers=[];var c=this.openBuffer();if(null!==n&&n>=0){var a={subscriber:this,buffer:c},f={bufferTimeSpan:r,bufferCreationInterval:n,subscriber:this,scheduler:u};this.add(u.schedule(s,r,a)),this.add(u.schedule(o,n,f))}else{var h={subscriber:this,buffer:c,bufferTimeSpan:r};this.add(u.schedule(i,r,h))}}return u(e,t),e.prototype._next=function(t){for(var e=this.buffers,r=e.length,n=0;n<r;n++)e[n].push(t)},e.prototype._error=function(e){this.buffers.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this,r=e.buffers,n=e.destination;r.length>0;)n.next(r.shift());t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffers=null},e.prototype.openBuffer=function(){var t=[];return this.buffers.push(t),t},e.prototype.closeBuffer=function(t){this.destination.next(t);var e=this.buffers;e.splice(e.indexOf(t),1)},e}(c.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(437);n.Observable.prototype.bufferToggle=i.bufferToggle},function(t,e,r){"use strict";function n(t,e){return this.lift(new c(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(11),s=r(365),u=r(364);e.bufferToggle=n;var c=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.openings,this.closingSelector))},t}(),a=function(t){function e(e,r,n){t.call(this,e),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(s.subscribeToResult(this,r))}return i(e,t),e.prototype._next=function(t){for(var e=this.contexts,r=e.length,n=0;n<r;n++)e[n].buffer.push(t)},e.prototype._error=function(e){for(var r=this.contexts;r.length>0;){var n=r.shift();n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var r=e.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,r,n,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector,r=e.call(this,t);r&&this.trySubscribe(r)}catch(n){this._error(n)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var r=t.buffer,n=t.subscription;this.destination.next(r),e.splice(e.indexOf(t),1),this.remove(n),n.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,r=[],n=new o.Subscription,i={buffer:r,subscription:n};e.push(i);var u=s.subscribeToResult(this,t,i);!u||u.isUnsubscribed?this.closeBuffer(i):(u.context=i,this.add(u),n.add(u))},e}(u.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(439);n.Observable.prototype.bufferWhen=i.bufferWhen},function(t,e,r){"use strict";function n(t){return this.lift(new f(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(11),s=r(14),u=r(15),c=r(364),a=r(365);e.bufferWhen=n;var f=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,r){t.call(this,e),this.closingSelector=r,this.subscribing=!1,this.openBuffer()}return i(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,r,n,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var r=s.tryCatch(this.closingSelector)();r===u.errorObject?this.error(u.errorObject.e):(t=new o.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(a.subscribeToResult(this,r)),this.subscribing=!1)},e}(c.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(441);n.Observable.prototype.cache=i.cache},function(t,e,r){"use strict";function n(t,e,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY),i.publishReplay.call(this,t,e,r).refCount()}var i=r(442);e.cache=n},function(t,e,r){"use strict";function n(t,e,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY),o.multicast.call(this,new i.ReplaySubject(t,e,r))}var i=r(443),o=r(445);e.publishReplay=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(3),o=r(444),s=r(387),u=function(t){function e(e,r,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this),this.events=[],this.scheduler=n,this.bufferSize=e<1?1:e,this._windowTime=r<1?1:r}return n(e,t),e.prototype._next=function(e){var r=this._getNow();this.events.push(new c(r,e)),this._trimBufferThenGetEvents(r),t.prototype._next.call(this,e)},e.prototype._subscribe=function(e){var r=this._trimBufferThenGetEvents(this._getNow()),n=this.scheduler;n&&e.add(e=new s.ObserveOnSubscriber(e,n));for(var i=-1,o=r.length;++i<o&&!e.isUnsubscribed;)e.next(r[i].value);return t.prototype._subscribe.call(this,e)},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(t){for(var e=this.bufferSize,r=this._windowTime,n=this.events,i=n.length,o=0;o<i&&!(t-n[o].time<r);)o+=1;return i>e&&(o=Math.max(o,i-e)),o>0&&n.splice(0,o),n},e}(i.Subject);e.ReplaySubject=u;var c=function(){function t(t,e){this.time=t,this.value=e}return t}()},function(t,e,r){"use strict";var n=r(404);e.queue=new n.QueueScheduler},function(t,e,r){"use strict";function n(t){var e;return e="function"==typeof t?t:function(){return t},new i.ConnectableObservable(this,e)}var i=r(446);e.multicast=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(9),s=r(11),u=function(t){function e(e,r){t.call(this),this.source=e,this.subjectFactory=r}return n(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this.subject;return t&&!t.isUnsubscribed?t:this.subject=this.subjectFactory()},e.prototype.connect=function(){var t=this.source,e=this.subscription;return e&&!e.isUnsubscribed?e:(e=t.subscribe(this.getSubject()),e.add(new c(this)),this.subscription=e)},e.prototype.refCount=function(){return new a(this)},e.prototype._closeSubscription=function(){this.subject=null,this.subscription=null},e}(i.Observable);e.ConnectableObservable=u;var c=function(t){function e(e){t.call(this),this.connectable=e}return n(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;t._closeSubscription(),this.connectable=null},e}(s.Subscription),a=function(t){function e(e,r){void 0===r&&(r=0),t.call(this),this.connectable=e,this.refCount=r}return n(e,t),e.prototype._subscribe=function(t){var e=this.connectable,r=new f(t,this),n=e.subscribe(r);return n.isUnsubscribed||1!==++this.refCount||(r.connection=this.connection=e.connect()),n},e}(i.Observable),f=function(t){function e(e,r){t.call(this,null),this.destination=e,this.refCountObservable=r,this.connection=r.connection,e.add(this)}return n(e,t),e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this._resetConnectable(),this.destination.error(t)},e.prototype._complete=function(){this._resetConnectable(),this.destination.complete()},e.prototype._resetConnectable=function(){var t=this.refCountObservable,e=t.connection,r=this.connection;r&&r===e&&(t.refCount=0,e.unsubscribe(),t.connection=null,this.unsubscribe())},e.prototype._unsubscribe=function(){var t=this.refCountObservable;if(0!==t.refCount&&0===--t.refCount){var e=t.connection,r=this.connection;r&&r===e&&(e.unsubscribe(),t.connection=null)}},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(448);n.Observable.prototype["catch"]=i._catch},function(t,e,r){"use strict";function n(t){var e=new s(t),r=this.lift(e);return e.caught=r}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e._catch=n;var s=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.selector,this.caught))},t}(),u=function(t){function e(e,r,n){t.call(this,e),this.selector=r,this.caught=n}return i(e,t),e.prototype.error=function(t){if(!this.isStopped){var e=void 0;try{e=this.selector(t,this.caught)}catch(t){return void this.destination.error(t)}this._innerSub(e)}},e.prototype._innerSub=function(t){this.unsubscribe(),this.destination.remove(this),t.subscribe(this.destination)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(450);n.Observable.prototype.combineAll=i.combineAll},function(t,e,r){"use strict";function n(t){return this.lift(new i.CombineLatestOperator(t))}var i=r(359);e.combineAll=n},function(t,e,r){"use strict";var n=r(4),i=r(359);n.Observable.prototype.combineLatest=i.combineLatest},function(t,e,r){"use strict";var n=r(4),i=r(371);n.Observable.prototype.concat=i.concat},function(t,e,r){"use strict";var n=r(4),i=r(454);n.Observable.prototype.concatAll=i.concatAll},function(t,e,r){"use strict";function n(){return this.lift(new i.MergeAllOperator(1))}var i=r(372);e.concatAll=n},function(t,e,r){"use strict";var n=r(4),i=r(456);n.Observable.prototype.concatMap=i.concatMap},function(t,e,r){"use strict";function n(t,e){return this.lift(new i.MergeMapOperator(t,e,1))}var i=r(457);e.concatMap=n},function(t,e,r){"use strict";function n(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof e&&(r=e,e=null),this.lift(new u(t,e,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(365),s=r(364);e.mergeMap=n;var u=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=u;var c=function(t){function e(e,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(o.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var i;try{i=this.resultSelector(t,e,r,n)}catch(o){return void this.destination.error(o)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(s.OuterSubscriber);e.MergeMapSubscriber=c},function(t,e,r){"use strict";var n=r(4),i=r(459);n.Observable.prototype.concatMapTo=i.concatMapTo},function(t,e,r){"use strict";function n(t,e){return this.lift(new i.MergeMapToOperator(t,e,1))}var i=r(460);e.concatMapTo=n},function(t,e,r){"use strict";function n(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof e&&(r=e,e=null),this.lift(new u(t,e,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.mergeMapTo=n;var u=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.ish,this.resultSelector,this.concurrent))},t}();e.MergeMapToOperator=u;var c=function(t){function e(e,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.ish=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.resultSelector,r=this.index++,n=this.ish,i=this.destination;this.active++,this._innerSub(n,i,e,t,r)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,r,n,i){this.add(s.subscribeToResult(this,t,n,i))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){var o=this,s=o.resultSelector,u=o.destination;s?this.trySelectResult(t,e,r,n):u.next(e)},e.prototype.trySelectResult=function(t,e,r,n){var i,o=this,s=o.resultSelector,u=o.destination;try{i=s(t,e,r,n)}catch(c){return void u.error(c)}u.next(i)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapToSubscriber=c},function(t,e,r){"use strict";var n=r(4),i=r(462);n.Observable.prototype.count=i.count},function(t,e,r){"use strict";function n(t){return this.lift(new s(t,this))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.count=n;var s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.predicate,this.source))},t}(),u=function(t){function e(e,r,n){t.call(this,e),this.predicate=r,this.source=n,this.count=0,this.index=0}return i(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(r){return void this.destination.error(r)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(464);n.Observable.prototype.dematerialize=i.dematerialize},function(t,e,r){"use strict";function n(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.dematerialize=n;var s=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new u(t))},t}(),u=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(466);n.Observable.prototype.debounce=i.debounce},function(t,e,r){"use strict";function n(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.debounce=n;var u=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.durationSelector))},t}(),c=function(t){function e(e,r){t.call(this,e),this.durationSelector=r,this.hasValue=!1,this.durationSubscription=null}return i(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(r){this.destination.error(r)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var r=this.durationSubscription;this.value=t,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),r=s.subscribeToResult(this,e),r.isUnsubscribed||this.add(this.durationSubscription=r)},e.prototype.notifyNext=function(t,e,r,n,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,r=this.durationSubscription;r&&(this.durationSubscription=null,r.unsubscribe(),this.remove(r)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(468);n.Observable.prototype.debounceTime=i.debounceTime},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e=u.async),this.lift(new c(t,e))}function i(t){t.debouncedNext()}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},s=r(9),u=r(401);e.debounceTime=n;var c=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.dueTime,this.scheduler))},t}(),a=function(t){function e(e,r,n){t.call(this,e),this.dueTime=r,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return o(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(i,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(s.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(470);n.Observable.prototype.defaultIfEmpty=i.defaultIfEmpty},function(t,e,r){"use strict";function n(t){return void 0===t&&(t=null),this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.defaultIfEmpty=n;var s=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.defaultValue))},t}(),u=function(t){function e(e,r){t.call(this,e),this.defaultValue=r,this.isEmpty=!0}return i(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(472);n.Observable.prototype.delay=i.delay},function(t,e,r){"use strict";function n(t,e){void 0===e&&(e=o.async);var r=s.isDate(t),n=r?+t-e.now():Math.abs(t);return this.lift(new a(n,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(401),s=r(426),u=r(9),c=r(388);e.delay=n;var a=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new f(t,this.delay,this.scheduler))},t}(),f=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return i(e,t),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,i=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-n.now());this.schedule(t,o)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(this.errored!==!0){var e=this.scheduler,r=new h(e.now()+this.delay,t);this.queue.push(r),this.active===!1&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(c.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(c.Notification.createComplete())},e}(u.Subscriber),h=function(){function t(t,e){this.time=t,this.notification=e}return t}()},function(t,e,r){"use strict";var n=r(4),i=r(474);n.Observable.prototype.delayWhen=i.delayWhen},function(t,e,r){"use strict";function n(t,e){return e?new h(this,e).lift(new a(t)):this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(4),u=r(364),c=r(365);e.delayWhen=n;var a=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new f(t,this.delayDurationSelector))},t}(),f=function(t){function e(e,r){t.call(this,e),this.delayDurationSelector=r,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(r){this.destination.error(r)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),r=null;return e!==-1&&(r=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),r},e.prototype.tryDelay=function(t,e){var r=c.subscribeToResult(this,t,e);this.add(r),this.delayNotifierSubscriptions.push(r),this.values.push(e)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(u.OuterSubscriber),h=function(t){function e(e,r){t.call(this),this.source=e,this.subscriptionDelay=r}return i(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new l(t,this.source))},e}(s.Observable),l=function(t){function e(e,r){t.call(this),this.parent=e,this.source=r,this.sourceSubscribed=!1}return i(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource();
},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(476);n.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},function(t,e,r){"use strict";function n(t,e){return this.lift(new c(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(14),u=r(15);e.distinctUntilChanged=n;var c=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.compare,this.keySelector))},t}(),a=function(t){function e(e,r,n){t.call(this,e),this.keySelector=n,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return i(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=this.keySelector,r=t;if(e&&(r=s.tryCatch(this.keySelector)(t),r===u.errorObject))return this.destination.error(u.errorObject.e);var n=!1;if(this.hasKey){if(n=s.tryCatch(this.compare)(this.key,r),n===u.errorObject)return this.destination.error(u.errorObject.e)}else this.hasKey=!0;Boolean(n)===!1&&(this.key=r,this.destination.next(t))},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(478);n.Observable.prototype["do"]=i._do},function(t,e,r){"use strict";function n(t,e,r){return this.lift(new s(t,e,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e._do=n;var s=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.nextOrObserver,this.error,this.complete))},t}(),u=function(t){function e(e,r,n,i){t.call(this,e);var s=new o.Subscriber(r,n,i);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return i(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(480);n.Observable.prototype.expand=i.expand},function(t,e,r){"use strict";function n(t,e,r){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,this.lift(new a(t,e,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(14),s=r(15),u=r(364),c=r(365);e.expand=n;var a=function(){function t(t,e,r){this.project=t,this.concurrent=e,this.scheduler=r}return t.prototype.call=function(t,e){return e._subscribe(new f(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=a;var f=function(t){function e(e,r,n,i){t.call(this,e),this.project=r,this.concurrent=n,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}return i(e,t),e.dispatch=function(t){var e=t.subscriber,r=t.result,n=t.value,i=t.index;e.subscribeToProjection(r,n,i)},e.prototype._next=function(t){var r=this.destination;if(r.isUnsubscribed)return void this._complete();var n=this.index++;if(this.active<this.concurrent){r.next(t);var i=o.tryCatch(this.project)(t,n);if(i===s.errorObject)r.error(s.errorObject.e);else if(this.scheduler){var u={subscriber:this,result:i,value:t,index:n};this.add(this.scheduler.schedule(e.dispatch,0,u))}else this.subscribeToProjection(i,t,n)}else this.buffer.push(t)},e.prototype.subscribeToProjection=function(t,e,r){this.active++,this.add(c.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(u.OuterSubscriber);e.ExpandSubscriber=f},function(t,e,r){"use strict";var n=r(4),i=r(482);n.Observable.prototype.filter=i.filter},function(t,e,r){"use strict";function n(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.filter=n;var s=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.predicate,this.thisArg))},t}(),u=function(t){function e(e,r,n){t.call(this,e),this.predicate=r,this.thisArg=n,this.count=0,this.predicate=r}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(484);n.Observable.prototype["finally"]=i._finally},function(t,e,r){"use strict";function n(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(11);e._finally=n;var u=function(){function t(t){this.finallySelector=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.finallySelector))},t}(),c=function(t){function e(e,r){t.call(this,e),this.add(new s.Subscription(r))}return i(e,t),e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(486);n.Observable.prototype.first=i.first},function(t,e,r){"use strict";function n(t,e,r){return this.lift(new u(t,e,r,this))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(487);e.first=n;var u=function(){function t(t,e,r,n){this.predicate=t,this.resultSelector=e,this.defaultValue=r,this.source=n}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),c=function(t){function e(e,r,n,i,o){t.call(this,e),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1}return i(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var r;try{r=this.predicate(t,e,this.source)}catch(n){return void this.destination.error(n)}r&&this._emit(t,e)},e.prototype._emit=function(t,e){return this.resultSelector?void this._tryResultSelector(t,e):void this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var r;try{r=this.resultSelector(t,e)}catch(n){return void this.destination.error(n)}this._emitFinal(r)},e.prototype._emitFinal=function(t){var e=this.destination;e.next(t),e.complete(),this.hasCompleted=!0},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||t.error(new s.EmptyError):(t.next(this.defaultValue),t.complete())},e}(o.Subscriber)},function(t,e){"use strict";var r=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){t.call(this,"no elements in sequence"),this.name="EmptyError"}return r(e,t),e}(Error);e.EmptyError=n},function(t,e,r){"use strict";var n=r(4),i=r(489);n.Observable.prototype.groupBy=i.groupBy},function(t,e,r){"use strict";function n(t,e,r){return this.lift(new h(this,t,e,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(11),u=r(4),c=r(3),a=r(490),f=r(492);e.groupBy=n;var h=function(){function t(t,e,r,n){this.source=t,this.keySelector=e,this.elementSelector=r,this.durationSelector=n}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector))},t}(),l=function(t){function e(e,r,n,i){t.call(this),this.keySelector=r,this.elementSelector=n,this.durationSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0,this.destination=e,this.add(e)}return i(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(r){return void this.error(r)}this._group(t,e)},e.prototype._group=function(t,e){var r=this.groups;r||(r=this.groups="string"==typeof e?new f.FastMap:new a.Map);var n=r.get(e);if(!n){r.set(e,n=new c.Subject);var i=new v(e,n,this);this.durationSelector&&this._selectDuration(e,n),this.destination.next(i)}this.elementSelector?this._selectElement(t,n):this.tryGroupNext(t,n)},e.prototype._selectElement=function(t,e){var r;try{r=this.elementSelector(t)}catch(n){return void this.error(n)}this.tryGroupNext(r,e)},e.prototype._selectDuration=function(t,e){var r;try{r=this.durationSelector(new v(t,e))}catch(n){return void this.error(n)}this.add(r.subscribe(new p(t,e,this)))},e.prototype.tryGroupNext=function(t,e){e.isUnsubscribed||e.next(t)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,r){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups["delete"](t)},e.prototype.unsubscribe=function(){this.isUnsubscribed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(o.Subscriber),p=function(t){function e(e,r,n){t.call(this),this.key=e,this.group=r,this.parent=n}return i(e,t),e.prototype._next=function(t){this.tryComplete()},e.prototype._error=function(t){this.tryError(t)},e.prototype._complete=function(){this.tryComplete()},e.prototype.tryError=function(t){var e=this.group;e.isUnsubscribed||e.error(t),this.parent.removeGroup(this.key)},e.prototype.tryComplete=function(){var t=this.group;t.isUnsubscribed||t.complete(),this.parent.removeGroup(this.key)},e}(o.Subscriber),v=function(t){function e(e,r,n){t.call(this),this.key=e,this.groupSubject=r,this.refCountSubscription=n}return i(e,t),e.prototype._subscribe=function(t){var e=new s.Subscription,r=this,n=r.refCountSubscription,i=r.groupSubject;return n&&!n.isUnsubscribed&&e.add(new b(n)),e.add(i.subscribe(t)),e},e}(u.Observable);e.GroupedObservable=v;var b=function(t){function e(e){t.call(this),this.parent=e,e.count++}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.isUnsubscribed||this.isUnsubscribed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(s.Subscription)},function(t,e,r){"use strict";var n=r(5),i=r(491);e.Map=n.root.Map||function(){return i.MapPolyfill}()},function(t,e){"use strict";var r=function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return e===-1?void 0:this._values[e]},t.prototype.set=function(t,e){var r=this._keys.indexOf(t);return r===-1?(this._keys.push(t),this._values.push(e),this.size++):this._values[r]=e,this},t.prototype["delete"]=function(t){var e=this._keys.indexOf(t);return e!==-1&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},t.prototype.forEach=function(t,e){for(var r=0;r<this.size;r++)t.call(e,this._values[r],this._keys[r])},t}();e.MapPolyfill=r},function(t,e){"use strict";var r=function(){function t(){this.values={}}return t.prototype["delete"]=function(t){return this.values[t]=null,!0},t.prototype.set=function(t,e){return this.values[t]=e,this},t.prototype.get=function(t){return this.values[t]},t.prototype.forEach=function(t,e){var r=this.values;for(var n in r)r.hasOwnProperty(n)&&null!==r[n]&&t.call(e,r[n],n)},t.prototype.clear=function(){this.values={}},t}();e.FastMap=r},function(t,e,r){"use strict";var n=r(4),i=r(494);n.Observable.prototype.ignoreElements=i.ignoreElements},function(t,e,r){"use strict";function n(){return this.lift(new u)}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(414);e.ignoreElements=n;var u=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new c(t))},t}(),c=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype._next=function(t){s.noop()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(496);n.Observable.prototype.audit=i.audit},function(t,e,r){"use strict";function n(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(14),s=r(15),u=r(364),c=r(365);e.audit=n;var a=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new f(t,this.durationSelector))},t}(),f=function(t){function e(e,r){t.call(this,e),this.durationSelector=r,this.hasValue=!1}return i(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=o.tryCatch(this.durationSelector)(t);e===s.errorObject?this.destination.error(s.errorObject.e):this.add(this.throttled=c.subscribeToResult(this,e))}},e.prototype.clearThrottle=function(){var t=this,e=t.value,r=t.hasValue,n=t.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),r&&(this.value=null,this.hasValue=!1,this.destination.next(e))},e.prototype.notifyNext=function(t,e,r,n){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(u.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(498);n.Observable.prototype.auditTime=i.auditTime},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e=s.async),this.lift(new c(t,e))}function i(t){t.clearThrottle()}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},s=r(401),u=r(9);e.auditTime=n;var c=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.delay,this.scheduler))},t}(),a=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n,this.hasValue=!1}return o(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(i,this.delay,this))},e.prototype.clearThrottle=function(){var t=this,e=t.value,r=t.hasValue,n=t.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),r&&(this.value=null,this.hasValue=!1,this.destination.next(e))},e}(u.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(500);n.Observable.prototype.last=i.last},function(t,e,r){"use strict";function n(t,e,r){return this.lift(new u(t,e,r,this))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(487);e.last=n;var u=function(){function t(t,e,r,n){this.predicate=t,this.resultSelector=e,this.defaultValue=r,this.source=n}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),c=function(t){function e(e,r,n,i,o){t.call(this,e),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,"undefined"!=typeof i&&(this.lastValue=i,this.hasValue=!0)}return i(e,t),e.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryPredicate=function(t,e){var r;try{r=this.predicate(t,e,this.source)}catch(n){return void this.destination.error(n)}if(r){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryResultSelector=function(t,e){var r;try{r=this.resultSelector(t,e)}catch(n){return void this.destination.error(n)}this.lastValue=r,this.hasValue=!0},e.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new s.EmptyError)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(502);n.Observable.prototype["let"]=i.letProto,n.Observable.prototype.letBind=i.letProto},function(t,e){"use strict";function r(t){return t(this)}e.letProto=r},function(t,e,r){"use strict";var n=r(4),i=r(504);n.Observable.prototype.every=i.every},function(t,e,r){"use strict";function n(t,e){var r=this;return r.lift(new s(t,e,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.every=n;var s=function(){function t(t,e,r){this.predicate=t,this.thisArg=e,this.source=r}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.predicate,this.thisArg,this.source))},t}(),u=function(t){function e(e,r,n,i){t.call(this,e),this.predicate=r,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}return i(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(r){return void this.destination.error(r)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(506);n.Observable.prototype.map=i.map},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.map=n;var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.project,this.thisArg))},t}(),u=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(e)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(508);n.Observable.prototype.mapTo=i.mapTo},function(t,e,r){"use strict";function n(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.mapTo=n;var s=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.value))},t}(),u=function(t){function e(e,r){t.call(this,e),this.value=r}return i(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(510);n.Observable.prototype.materialize=i.materialize},function(t,e,r){"use strict";function n(){return this.lift(new u)}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(388);e.materialize=n;var u=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new c(t))},t}(),c=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype._next=function(t){this.destination.next(s.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(s.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(s.Notification.createComplete()),t.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(408);n.Observable.prototype.merge=i.merge},function(t,e,r){"use strict";var n=r(4),i=r(372);n.Observable.prototype.mergeAll=i.mergeAll},function(t,e,r){"use strict";var n=r(4),i=r(457);n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},function(t,e,r){"use strict";var n=r(4),i=r(460);n.Observable.prototype.flatMapTo=i.mergeMapTo,n.Observable.prototype.mergeMapTo=i.mergeMapTo},function(t,e,r){"use strict";var n=r(4),i=r(445);n.Observable.prototype.multicast=i.multicast},function(t,e,r){"use strict";var n=r(4),i=r(387);n.Observable.prototype.observeOn=i.observeOn},function(t,e,r){"use strict";var n=r(4),i=r(518);n.Observable.prototype.partition=i.partition},function(t,e,r){"use strict";function n(t,e){return[o.filter.call(this,t),o.filter.call(this,i.not(t,e))]}var i=r(519),o=r(482);e.partition=n},function(t,e){"use strict";function r(t,e){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=e,r}e.not=r},function(t,e,r){"use strict";var n=r(4),i=r(521);n.Observable.prototype.pluck=i.pluck},function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t.length;if(0===r)throw new Error("List of properties cannot be empty.");return o.map.call(this,i(t,r))}function i(t,e){var r=function(r){for(var n=r,i=0;i<e;i++){var o=n[t[i]];if("undefined"==typeof o)return;n=o}return n};return r}var o=r(506);e.pluck=n},function(t,e,r){"use strict";var n=r(4),i=r(523);n.Observable.prototype.publish=i.publish},function(t,e,r){"use strict";function n(){return o.multicast.call(this,new i.Subject)}var i=r(3),o=r(445);e.publish=n},function(t,e,r){"use strict";var n=r(4),i=r(525);n.Observable.prototype.publishBehavior=i.publishBehavior},function(t,e,r){"use strict";function n(t){return o.multicast.call(this,new i.BehaviorSubject(t))}var i=r(526),o=r(445);e.publishBehavior=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(3),o=r(20),s=r(21),u=function(t){function e(e){t.call(this),this._value=e}return n(e,t),e.prototype.getValue=function(){if(this.hasErrored)o.throwError(this.errorValue);else{if(!this.isUnsubscribed)return this._value;o.throwError(new s.ObjectUnsubscribedError)}},Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return r&&!r.isUnsubscribed&&e.next(this._value),r},e.prototype._next=function(e){t.prototype._next.call(this,this._value=e)},e.prototype._error=function(e){this.hasErrored=!0,t.prototype._error.call(this,this.errorValue=e)},e}(i.Subject);e.BehaviorSubject=u},function(t,e,r){"use strict";var n=r(4),i=r(442);n.Observable.prototype.publishReplay=i.publishReplay},function(t,e,r){"use strict";var n=r(4),i=r(529);n.Observable.prototype.publishLast=i.publishLast},function(t,e,r){"use strict";function n(){return o.multicast.call(this,new i.AsyncSubject)}var i=r(354),o=r(445);e.publishLast=n},function(t,e,r){"use strict";var n=r(4),i=r(410);n.Observable.prototype.race=i.race},function(t,e,r){"use strict";var n=r(4),i=r(532);n.Observable.prototype.reduce=i.reduce},function(t,e,r){"use strict";function n(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.reduce=n;var s=function(){function t(t,e){this.project=t,this.seed=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.project,this.seed))},t}();e.ReduceOperator=s;var u=function(t){function e(e,r,n){t.call(this,e),this.hasValue=!1,this.acc=n,this.project=r,this.hasSeed="undefined"!=typeof n}return i(e,t),e.prototype._next=function(t){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(t):(this.acc=t,this.hasValue=!0)},e.prototype._tryReduce=function(t){var e;try{e=this.project(this.acc,t)}catch(r){return void this.destination.error(r)}this.acc=e},e.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},e}(o.Subscriber);e.ReduceSubscriber=u},function(t,e,r){"use strict";var n=r(4),i=r(534);n.Observable.prototype.repeat=i.repeat},function(t,e,r){"use strict";function n(t){return void 0===t&&(t=-1),0===t?new s.EmptyObservable:t<0?this.lift(new u((-1),this)):this.lift(new u(t-1,this))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(362);e.repeat=n;var u=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.count,this.source))},t}(),c=function(t){function e(e,r,n){t.call(this,e),this.count=r,this.source=n}return i(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this,r=e.source,n=e.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,r.subscribe(this)}},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(536);n.Observable.prototype.retry=i.retry},function(t,e,r){"use strict";function n(t){return void 0===t&&(t=-1),this.lift(new s(t,this))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.retry=n;var s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.count,this.source))},t}(),u=function(t){function e(e,r,n){t.call(this,e),this.count=r,this.source=n}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var r=this,n=r.source,i=r.count;if(0===i)return t.prototype.error.call(this,e);i>-1&&(this.count=i-1),this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,n.subscribe(this)}},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(538);n.Observable.prototype.retryWhen=i.retryWhen},function(t,e,r){"use strict";function n(t){return this.lift(new f(t,this))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(3),s=r(14),u=r(15),c=r(364),a=r(365);e.retryWhen=n;var f=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.notifier,this.source))},t}(),h=function(t){function e(e,r,n){t.call(this,e),this.notifier=r,this.source=n}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var r=this.errors,n=this.retries,i=this.retriesSubscription;if(n)this.errors=null,this.retriesSubscription=null;else{if(r=new o.Subject,n=s.tryCatch(this.notifier)(r),n===u.errorObject)return t.prototype.error.call(this,u.errorObject.e);i=a.subscribeToResult(this,n)}this.unsubscribe(),this.isUnsubscribed=!1,this.errors=r,this.retries=n,this.retriesSubscription=i,r.next(e)}},e.prototype._unsubscribe=function(){var t=this,e=t.errors,r=t.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),r&&(r.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,r,n,i){var o=this,s=o.errors,u=o.retries,c=o.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,this.errors=s,this.retries=u,this.retriesSubscription=c,this.source.subscribe(this)},e}(c.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(540);n.Observable.prototype.sample=i.sample},function(t,e,r){"use strict";function n(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.sample=n;var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.notifier))},t}(),c=function(t){function e(e,r){t.call(this,e),this.hasValue=!1,this.add(s.subscribeToResult(this,r))}return i(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,r,n,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(542);n.Observable.prototype.sampleTime=i.sampleTime},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e=u.async),this.lift(new c(t,e))}function i(t){var e=t.subscriber,r=t.delay;e.notifyNext(),this.schedule(t,r)}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},s=r(9),u=r(401);e.sampleTime=n;var c=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.delay,this.scheduler))},t}(),a=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(i,r,{subscriber:this,delay:r}))}return o(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(s.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(544);n.Observable.prototype.scan=i.scan},function(t,e,r){"use strict";function n(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.scan=n;var s=function(){function t(t,e){this.accumulator=t,this.seed=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.accumulator,this.seed))},t}(),u=function(t){function e(e,r,n){t.call(this,e),this.accumulator=r,this.accumulatorSet=!1,this.seed=n,this.accumulator=r,this.accumulatorSet="undefined"!=typeof n}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.accumulatorSet=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){return this.accumulatorSet?this._tryNext(t):(this.seed=t,void this.destination.next(t))},e.prototype._tryNext=function(t){var e;try{e=this.accumulator(this.seed,t)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(546);n.Observable.prototype.share=i.share},function(t,e,r){"use strict";function n(){
return new s.Subject}function i(){return o.multicast.call(this,n).refCount()}var o=r(445),s=r(3);e.share=i},function(t,e,r){"use strict";var n=r(4),i=r(548);n.Observable.prototype.single=i.single},function(t,e,r){"use strict";function n(t){return this.lift(new u(t,this))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(487);e.single=n;var u=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.predicate,this.source))},t}(),c=function(t){function e(e,r,n){t.call(this,e),this.predicate=r,this.source=n,this.seenValue=!1,this.index=0}return i(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.predicate;this.index++,e?this.tryNext(t):this.applySingleValue(t)},e.prototype.tryNext=function(t){try{var e=this.predicate(t,this.index,this.source);e&&this.applySingleValue(t)}catch(r){this.destination.error(r)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new s.EmptyError)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(550);n.Observable.prototype.skip=i.skip},function(t,e,r){"use strict";function n(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.skip=n;var s=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.total))},t}(),u=function(t){function e(e,r){t.call(this,e),this.total=r,this.count=0}return i(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(552);n.Observable.prototype.skipUntil=i.skipUntil},function(t,e,r){"use strict";function n(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.skipUntil=n;var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.notifier))},t}(),c=function(t){function e(e,r){t.call(this,e),this.hasValue=!1,this.isInnerStopped=!1,this.add(s.subscribeToResult(this,r))}return i(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype._complete=function(){this.isInnerStopped?t.prototype._complete.call(this):this.unsubscribe()},e.prototype.notifyNext=function(t,e,r,n,i){this.hasValue=!0},e.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&t.prototype._complete.call(this)},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(554);n.Observable.prototype.skipWhile=i.skipWhile},function(t,e,r){"use strict";function n(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.skipWhile=n;var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.predicate))},t}(),u=function(t){function e(e,r){t.call(this,e),this.predicate=r,this.skipping=!0,this.index=0}return i(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(r){this.destination.error(r)}},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(556);n.Observable.prototype.startWith=i.startWith},function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t[t.length-1];c.isScheduler(r)?t.pop():r=null;var n=t.length;return 1===n?u.concatStatic(new o.ScalarObservable(t[0],r),this):n>1?u.concatStatic(new i.ArrayObservable(t,r),this):u.concatStatic(new s.EmptyObservable(r),this)}var i=r(360),o=r(361),s=r(362),u=r(371),c=r(363);e.startWith=n},function(t,e,r){"use strict";var n=r(4),i=r(558);n.Observable.prototype.subscribeOn=i.subscribeOn},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e=0),new i.SubscribeOnObservable(this,e,t)}var i=r(559);e.subscribeOn=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(4),o=r(560),s=r(400),u=function(t){function e(e,r,n){void 0===r&&(r=0),void 0===n&&(n=o.asap),t.call(this),this.source=e,this.delayTime=r,this.scheduler=n,(!s.isNumeric(r)||r<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=o.asap)}return n(e,t),e.create=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=o.asap),new e(t,r,n)},e.dispatch=function(t){var e=t.source,r=t.subscriber;return e.subscribe(r)},e.prototype._subscribe=function(t){var r=this.delayTime,n=this.source,i=this.scheduler;return i.schedule(e.dispatch,r,{source:n,subscriber:t})},e}(i.Observable);e.SubscribeOnObservable=u},function(t,e,r){"use strict";var n=r(561);e.asap=new n.AsapScheduler},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(562),o=r(404),s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.scheduleNow=function(t,e){return new i.AsapAction(this,t).schedule(e)},e}(o.QueueScheduler);e.AsapScheduler=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=r(563),o=r(403),s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype._schedule=function(e,r){if(void 0===r&&(r=0),r>0)return t.prototype._schedule.call(this,e,r);this.delay=r,this.state=e;var n=this.scheduler;return n.actions.push(this),n.scheduledId||(n.scheduledId=i.Immediate.setImmediate(function(){n.scheduledId=null,n.flush()})),this},e.prototype._unsubscribe=function(){var e=this.scheduler,r=e.scheduledId,n=e.actions;t.prototype._unsubscribe.call(this),0===n.length&&(e.active=!1,null!=r&&(e.scheduledId=null,i.Immediate.clearImmediate(r)))},e}(o.FutureAction);e.AsapAction=s},function(t,e,r){(function(t,n){"use strict";var i=r(5),o=function(){function t(t){if(this.root=t,t.setImmediate&&"function"==typeof t.setImmediate)this.setImmediate=t.setImmediate.bind(t),this.clearImmediate=t.clearImmediate.bind(t);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var e=function r(t){delete r.instance.tasksByHandle[t]};e.instance=this,this.clearImmediate=e}}return t.prototype.identify=function(t){return this.root.Object.prototype.toString.call(t)},t.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},t.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},t.prototype.canUseReadyStateChange=function(){var t=this.root.document;return Boolean(t&&"onreadystatechange"in t.createElement("script"))},t.prototype.canUsePostMessage=function(){var t=this.root;if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}return!1},t.prototype.partiallyApplied=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=function i(){var t=i,e=t.handler,r=t.args;"function"==typeof e?e.apply(void 0,r):new Function(""+e)()};return n.handler=t,n.args=e,n},t.prototype.addFromSetImmediateArguments=function(t){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,t),this.nextHandle++},t.prototype.createProcessNextTickSetImmediate=function(){var t=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,r)),r};return t.instance=this,t},t.prototype.createPostMessageSetImmediate=function(){var t=this.root,e="setImmediate$"+t.Math.random()+"$",r=function i(r){var n=i.instance;r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&n.runIfPresent(+r.data.slice(e.length))};r.instance=this,t.addEventListener("message",r,!1);var n=function o(){var t=o,e=t.messagePrefix,r=t.instance,n=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(e+n,"*"),n};return n.instance=this,n.messagePrefix=e,n},t.prototype.runIfPresent=function(t){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,t),0);else{var e=this.tasksByHandle[t];if(e){this.currentlyRunningATask=!0;try{e()}finally{this.clearImmediate(t),this.currentlyRunningATask=!1}}}},t.prototype.createMessageChannelSetImmediate=function(){var t=this,e=new this.root.MessageChannel;e.port1.onmessage=function(e){var r=e.data;t.runIfPresent(r)};var r=function n(){var t=n,e=t.channel,r=t.instance,i=r.addFromSetImmediateArguments(arguments);return e.port2.postMessage(i),i};return r.channel=e,r.instance=this,r},t.prototype.createReadyStateChangeSetImmediate=function(){var t=function e(){var t=e.instance,r=t.root,n=r.document,i=n.documentElement,o=t.addFromSetImmediateArguments(arguments),s=n.createElement("script");return s.onreadystatechange=function(){t.runIfPresent(o),s.onreadystatechange=null,i.removeChild(s),s=null},i.appendChild(s),o};return t.instance=this,t},t.prototype.createSetTimeoutSetImmediate=function(){var t=function e(){var t=e.instance,r=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,r),0),r};return t.instance=this,t},t}();e.ImmediateDefinition=o,e.Immediate=new o(i.root)}).call(e,r(564).clearImmediate,r(564).setImmediate)},function(t,e,r){(function(t,n){function i(t,e){this._id=t,this._clearFn=e}var o=r(565).nextTick,s=Function.prototype.apply,u=Array.prototype.slice,c={},a=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var r=a++,n=!(arguments.length<2)&&u.call(arguments,1);return c[r]=!0,o(function(){c[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete c[t]}}).call(e,r(564).setImmediate,r(564).clearImmediate)},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){b&&p&&(b=!1,p.length?v=p.concat(v):d=-1,v.length&&u())}function u(){if(!b){var t=i(s);b=!0;for(var e=v.length;e;){for(p=v,v=[];++d<e;)p&&p[d].run();d=-1,e=v.length}p=null,b=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function a(){}var f,h,l=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var p,v=[],b=!1,d=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];v.push(new c(t,e)),1!==v.length||b||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,r){"use strict";var n=r(4),i=r(567);n.Observable.prototype["switch"]=i._switch},function(t,e,r){"use strict";function n(){return this.lift(new u)}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e._switch=n;var u=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new c(t))},t}(),c=function(t){function e(e){t.call(this,e),this.active=0,this.hasCompleted=!1}return i(e,t),e.prototype._next=function(t){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=s.subscribeToResult(this,t))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},e.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var t=this.innerSubscription;t&&(t.unsubscribe(),this.remove(t))},e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(569);n.Observable.prototype.switchMap=i.switchMap},function(t,e,r){"use strict";function n(t,e){return this.lift(new u(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.switchMap=n;var u=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.project,this.resultSelector))},t}(),c=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.resultSelector=n,this.index=0}return i(e,t),e.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(n){return void this.destination.error(n)}this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.isUnsubscribed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,r,n,i){this.resultSelector?this._tryNotifyNext(t,e,r,n):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,r,n){var i;try{i=this.resultSelector(t,e,r,n)}catch(o){return void this.destination.error(o)}this.destination.next(i)},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(571);n.Observable.prototype.switchMapTo=i.switchMapTo},function(t,e,r){"use strict";function n(t,e){return this.lift(new u(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.switchMapTo=n;var u=function(){function t(t,e){this.observable=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.observable,this.resultSelector))},t}(),c=function(t){function e(e,r,n){t.call(this,e),this.inner=r,this.resultSelector=n,this.index=0}return i(e,t),e.prototype._next=function(t){var e=this.innerSubscription;e&&e.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,this.inner,t,this.index++))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.isUnsubscribed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,r,n,i){var o=this,s=o.resultSelector,u=o.destination;s?this.tryResultSelector(t,e,r,n):u.next(e)},e.prototype.tryResultSelector=function(t,e,r,n){var i,o=this,s=o.resultSelector,u=o.destination;try{i=s(t,e,r,n)}catch(c){return void u.error(c)}u.next(i)},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(573);n.Observable.prototype.take=i.take},function(t,e,r){"use strict";function n(t){return 0===t?new u.EmptyObservable:this.lift(new c(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(574),u=r(362);e.take=n;var c=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,r){t.call(this,e),this.total=r,this.count=0}return i(e,t),e.prototype._next=function(t){var e=this.total;++this.count<=e&&(this.destination.next(t),this.count===e&&(this.destination.complete(),this.unsubscribe()))},e}(o.Subscriber)},function(t,e){"use strict";var r=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){t.call(this,"argument out of range"),this.name="ArgumentOutOfRangeError"}return r(e,t),e}(Error);e.ArgumentOutOfRangeError=n},function(t,e,r){"use strict";var n=r(4),i=r(576);n.Observable.prototype.takeLast=i.takeLast},function(t,e,r){"use strict";function n(t){return 0===t?new u.EmptyObservable:this.lift(new c(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(574),u=r(362);e.takeLast=n;var c=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,r){t.call(this,e),this.total=r,this.ring=new Array,this.count=0}return i(e,t),e.prototype._next=function(t){var e=this.ring,r=this.total,n=this.count++;if(e.length<r)e.push(t);else{var i=n%r;e[i]=t}},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=e++%r;t.next(n[o])}t.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(578);n.Observable.prototype.takeUntil=i.takeUntil},function(t,e,r){"use strict";function n(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.takeUntil=n;var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.notifier))},t}(),c=function(t){function e(e,r){t.call(this,e),this.notifier=r,this.add(s.subscribeToResult(this,r))}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.complete()},e.prototype.notifyComplete=function(){},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(580);n.Observable.prototype.takeWhile=i.takeWhile},function(t,e,r){"use strict";function n(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.takeWhile=n;var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.predicate))},t}(),u=function(t){function e(e,r){t.call(this,e),this.predicate=r,this.index=0}return i(e,t),e.prototype._next=function(t){var e,r=this.destination;try{e=this.predicate(t,this.index++)}catch(n){return void r.error(n)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var r=this.destination;Boolean(e)?r.next(t):r.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(582);n.Observable.prototype.throttle=i.throttle},function(t,e,r){"use strict";function n(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.throttle=n;var u=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.durationSelector))},t}(),c=function(t){function e(e,r){t.call(this,e),this.destination=e,this.durationSelector=r}return i(e,t),e.prototype._next=function(t){this.throttled||this.tryDurationSelector(t)},e.prototype.tryDurationSelector=function(t){var e=null;try{e=this.durationSelector(t)}catch(r){return void this.destination.error(r)}this.emitAndThrottle(t,e)},e.prototype.emitAndThrottle=function(t,e){this.add(this.throttled=s.subscribeToResult(this,e)),this.destination.next(t)},e.prototype._unsubscribe=function(){var t=this.throttled;t&&(this.remove(t),this.throttled=null,t.unsubscribe())},e.prototype.notifyNext=function(t,e,r,n,i){this._unsubscribe()},e.prototype.notifyComplete=function(){this._unsubscribe()},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(584);n.Observable.prototype.throttleTime=i.throttleTime},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e=u.async),this.lift(new c(t,e))}function i(t){var e=t.subscriber;e.clearThrottle()}var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},s=r(9),u=r(401);e.throttleTime=n;var c=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.delay,this.scheduler))},t}(),a=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n}return o(e,t),e.prototype._next=function(t){this.throttled||(this.add(this.throttled=this.scheduler.schedule(i,this.delay,{subscriber:this})),this.destination.next(t))},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(t.unsubscribe(),this.remove(t),this.throttled=null)},e}(s.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(586);n.Observable.prototype.timeout=i.timeout},function(t,e,r){"use strict";function n(t,e,r){void 0===e&&(e=null),void 0===r&&(r=o.async);var n=s.isDate(t),i=n?+t-r.now():Math.abs(t);return this.lift(new c(i,n,e,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(401),s=r(426),u=r(9);e.timeout=n;var c=function(){function t(t,e,r,n){this.waitFor=t,this.absoluteTimeout=e,this.errorToSend=r,this.scheduler=n}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))},t}(),a=function(t){function e(e,r,n,i,o){t.call(this,e),this.absoluteTimeout=r,this.waitFor=n,this.errorToSend=i,this.scheduler=o,this.index=0,this._previousIndex=0,this._hasCompleted=!1,this.scheduleTimeout()}return i(e,t),Object.defineProperty(e.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),e.dispatchTimeout=function(t){var e=t.subscriber,r=t.index;e.hasCompleted||e.previousIndex!==r||e.notifyTimeout()},e.prototype.scheduleTimeout=function(){var t=this.index;this.scheduler.schedule(e.dispatchTimeout,this.waitFor,{subscriber:this,index:t}),this.index++,this._previousIndex=t},e.prototype._next=function(t){this.destination.next(t),this.absoluteTimeout||this.scheduleTimeout()},e.prototype._error=function(t){this.destination.error(t),this._hasCompleted=!0},e.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},e.prototype.notifyTimeout=function(){this.error(this.errorToSend||new Error("timeout"))},e}(u.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(588);n.Observable.prototype.timeoutWith=i.timeoutWith},function(t,e,r){"use strict";function n(t,e,r){void 0===r&&(r=o.async);var n=s.isDate(t),i=n?+t-r.now():Math.abs(t);return this.lift(new a(i,n,e,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(401),s=r(426),u=r(364),c=r(365);e.timeoutWith=n;var a=function(){function t(t,e,r,n){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=r,this.scheduler=n}return t.prototype.call=function(t,e){return e._subscribe(new f(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),f=function(t){function e(e,r,n,i,o){t.call(this),this.destination=e,this.absoluteTimeout=r,this.waitFor=n,this.withObservable=i,this.scheduler=o,this.timeoutSubscription=void 0,this.index=0,this._previousIndex=0,this._hasCompleted=!1,e.add(this),this.scheduleTimeout()}return i(e,t),Object.defineProperty(e.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),e.dispatchTimeout=function(t){var e=t.subscriber,r=t.index;e.hasCompleted||e.previousIndex!==r||e.handleTimeout()},e.prototype.scheduleTimeout=function(){var t=this.index,r={subscriber:this,index:t};this.scheduler.schedule(e.dispatchTimeout,this.waitFor,r),this.index++,this._previousIndex=t},e.prototype._next=function(t){this.destination.next(t),this.absoluteTimeout||this.scheduleTimeout()},e.prototype._error=function(t){this.destination.error(t),this._hasCompleted=!0},e.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},e.prototype.handleTimeout=function(){if(!this.isUnsubscribed){var t=this.withObservable;this.unsubscribe(),this.destination.add(this.timeoutSubscription=c.subscribeToResult(this,t))}},e}(u.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(590);n.Observable.prototype.toArray=i.toArray},function(t,e,r){"use strict";function n(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9);e.toArray=n;var s=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new u(t))},t}(),u=function(t){function e(e){t.call(this,e),this.array=[]}return i(e,t),e.prototype._next=function(t){this.array.push(t)},e.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(592);n.Observable.prototype.toPromise=i.toPromise},function(t,e,r){"use strict";function n(t){var e=this;if(t||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?t=i.root.Rx.config.Promise:i.root.Promise&&(t=i.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})}var i=r(5);e.toPromise=n},function(t,e,r){"use strict";var n=r(4),i=r(594);n.Observable.prototype.window=i.window},function(t,e,r){"use strict";function n(t){return this.lift(new c(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(3),s=r(364),u=r(365);e.window=n;var c=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.windowBoundaries))},t}(),a=function(t){function e(e,r){t.call(this,e),this.destination=e,this.windowBoundaries=r,this.add(u.subscribeToResult(this,r)),this.openWindow()}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,r=this.window=new o.Subject;e.add(r),e.next(r)},e}(s.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(596);n.Observable.prototype.windowCount=i.windowCount},function(t,e,r){"use strict";function n(t,e){return void 0===e&&(e=0),this.lift(new u(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(9),s=r(3);e.windowCount=n;var u=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.windowSize,this.startWindowEvery))},t}(),c=function(t){function e(e,r,n){t.call(this,e),this.destination=e,this.windowSize=r,this.startWindowEvery=n,this.windows=[new s.Subject],this.count=0;var i=this.windows[0];e.add(i),e.next(i)}return i(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,o=i.length,u=0;u<o;u++)i[u].next(t);var c=this.count-n+1;if(c>=0&&c%e===0&&i.shift().complete(),++this.count%e===0){var a=new s.Subject;i.push(a),r.add(a),r.next(a)}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;)t.shift().complete();this.destination.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(598);n.Observable.prototype.windowTime=i.windowTime},function(t,e,r){"use strict";function n(t,e,r){return void 0===e&&(e=null),void 0===r&&(r=f.async),this.lift(new h(t,e,r))}function i(t){var e=t.subscriber,r=t.windowTimeSpan,n=t.window;n&&n.complete(),t.window=e.openWindow(),this.schedule(t,r);
}function o(t){var e=t.windowTimeSpan,r=t.subscriber,n=t.scheduler,i=t.windowCreationInterval,o=r.openWindow(),u=this,c={action:u,subscription:null},a={subscriber:r,window:o,context:c};c.subscription=n.schedule(s,e,a),u.add(c.subscription),u.schedule(t,i)}function s(t){var e=t.subscriber,r=t.window,n=t.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(r)}var u=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},c=r(9),a=r(3),f=r(401);e.windowTime=n;var h=function(){function t(t,e,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.scheduler=r}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))},t}(),l=function(t){function e(e,r,n,u){if(t.call(this,e),this.destination=e,this.windowTimeSpan=r,this.windowCreationInterval=n,this.scheduler=u,this.windows=[],null!==n&&n>=0){var c=this.openWindow(),a={subscriber:this,window:c,context:null},f={windowTimeSpan:r,windowCreationInterval:n,subscriber:this,scheduler:u};this.add(u.schedule(s,r,a)),this.add(u.schedule(o,n,f))}else{var h=this.openWindow(),l={subscriber:this,window:h,windowTimeSpan:r};this.add(u.schedule(i,r,l))}}return u(e,t),e.prototype._next=function(t){for(var e=this.windows,r=e.length,n=0;n<r;n++){var i=e[n];i.isUnsubscribed||i.next(t)}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.isUnsubscribed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new a.Subject;this.windows.push(t);var e=this.destination;return e.add(t),e.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(c.Subscriber)},function(t,e,r){"use strict";var n=r(4),i=r(600);n.Observable.prototype.windowToggle=i.windowToggle},function(t,e,r){"use strict";function n(t,e){return this.lift(new h(t,e))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(3),s=r(11),u=r(14),c=r(15),a=r(364),f=r(365);e.windowToggle=n;var h=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.openings,this.closingSelector))},t}(),l=function(t){function e(e,r,n){t.call(this,e),this.openings=r,this.closingSelector=n,this.contexts=[],this.add(this.openSubscription=f.subscribeToResult(this,r,r))}return i(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var r=e.length,n=0;n<r;n++)e[n].window.next(t)},e.prototype._error=function(e){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var o=r[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var r=e.length,n=-1;++n<r;){var i=e[n];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var n=t[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,r,n,i){if(t===this.openings){var a=this.closingSelector,h=u.tryCatch(a)(e);if(h===c.errorObject)return this.error(c.errorObject.e);var l=new o.Subject,p=new s.Subscription,v={window:l,subscription:p};this.contexts.push(v);var b=f.subscribeToResult(this,h,v);b.isUnsubscribed?this.closeWindow(this.contexts.length-1):(b.context=v,p.add(b)),this.destination.next(l)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(t!==-1){var e=this.contexts,r=e[t],n=r.window,i=r.subscription;e.splice(t,1),n.complete(),i.unsubscribe()}},e}(a.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(602);n.Observable.prototype.windowWhen=i.windowWhen},function(t,e,r){"use strict";function n(t){return this.lift(new f(t))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(3),s=r(14),u=r(15),c=r(364),a=r(365);e.windowWhen=n;var f=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,r){t.call(this,e),this.destination=e,this.closingSelector=r,this.openWindow()}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var r=this.window=new o.Subject;this.destination.next(r);var n=s.tryCatch(this.closingSelector)();if(n===u.errorObject){var i=u.errorObject.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=a.subscribeToResult(this,n)),this.add(r)},e}(c.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(604);n.Observable.prototype.withLatestFrom=i.withLatestFrom},function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r;"function"==typeof t[t.length-1]&&(r=t.pop());var n=t;return this.lift(new u(n,r))}var i=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=r(364),s=r(365);e.withLatestFrom=n;var u=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.observables,this.project))},t}(),c=function(t){function e(e,r,n){t.call(this,e),this.observables=r,this.project=n,this.toRespond=[];var i=r.length;this.values=new Array(i);for(var o=0;o<i;o++)this.toRespond.push(o);for(var o=0;o<i;o++){var u=r[o];this.add(s.subscribeToResult(this,u,u,o))}}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.values[r]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(r);s!==-1&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)},e}(o.OuterSubscriber)},function(t,e,r){"use strict";var n=r(4),i=r(429);n.Observable.prototype.zip=i.zipProto},function(t,e,r){"use strict";var n=r(4),i=r(607);n.Observable.prototype.zipAll=i.zipAll},function(t,e,r){"use strict";function n(t){return this.lift(new i.ZipOperator(t))}var i=r(429);e.zipAll=n},function(t,e,r){"use strict";var n=r(9),i=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new n.Subscriber(t))},t}();e.Operator=i},function(t,e,r){(function(t){!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){(function(t){"use strict";function e(t){function e(t){var e=t[b];return e}function r(t){var e=t.data;e.target.addEventListener("readystatechange",function(){e.target.readyState===e.target.DONE&&(e.aborted||t.invoke())});var r=e.target[b];return r||(e.target[b]=t),o.apply(e.target,e.args),t}function n(){}function i(t){var e=t.data;return e.aborted=!0,s.apply(e.target,e.args)}var o=c.patchMethod(t.XMLHttpRequest.prototype,"send",function(){return function(t,e){var o=Zone.current,s={target:t,isPeriodic:!1,delay:null,args:e,aborted:!1};return o.scheduleMacroTask("XMLHttpRequest.send",n,s,r,i)}}),s=c.patchMethod(t.XMLHttpRequest.prototype,"abort",function(t){return function(t,r){var n=e(t);if(n&&"string"==typeof n.type){if(null==n.cancelFn)return;n.zone.cancelTask(n)}}})}r(1);var n=r(2),i=r(4),o=r(5),s=r(6),u=r(8),c=r(3),a="set",f="clear",h=["alert","prompt","confirm"],l="undefined"==typeof window?t:window;u.patchTimer(l,a,f,"Timeout"),u.patchTimer(l,a,f,"Interval"),u.patchTimer(l,a,f,"Immediate"),u.patchTimer(l,"request","cancel","AnimationFrame"),u.patchTimer(l,"mozRequest","mozCancel","AnimationFrame"),u.patchTimer(l,"webkitRequest","webkitCancel","AnimationFrame");for(var p=0;p<h.length;p++){var v=h[p];c.patchMethod(l,v,function(t,e,r){return function(e,n){return Zone.current.run(t,l,n,r)}})}n.eventTargetPatch(l),s.propertyDescriptorPatch(l),c.patchClass("MutationObserver"),c.patchClass("WebKitMutationObserver"),c.patchClass("FileReader"),i.propertyPatch(),o.registerElementPatch(l),e(l);var b=c.zoneSymbol("xhrTask");l.navigator&&l.navigator.geolocation&&c.patchPrototype(l.navigator.geolocation,["getCurrentPosition","watchPosition"])}).call(e,function(){return this}())},function(t,e){(function(t){(function(t){function e(t){return"__zone_symbol__"+t}function r(){0==x&&0==g.length&&(t[y]?t[y].resolve(0)[m](o):t[d](o,0))}function n(t){r(),g.push(t)}function i(t){var e=t&&t.rejection;e&&console.error("Unhandled Promise rejection:",e instanceof Error?e.message:e,"; Zone:",t.zone.name,"; Task:",t.task&&t.task.source,"; Value:",e,e instanceof Error?e.stack:void 0),console.error(t)}function o(){if(!O){for(O=!0;g.length;){var t=g;g=[];for(var e=0;e<t.length;e++){var r=t[e];try{r.zone.runTask(r,null,null)}catch(n){i(n)}}}for(;S.length;)for(var o=function(){var t=S.shift();try{t.zone.runGuarded(function(){throw t})}catch(e){i(e)}};S.length;)o();O=!1}}function s(t){return t&&t.then}function u(t){return t}function c(t){return C.reject(t)}function a(t,e){return function(r){f(t,e,r)}}function f(t,e,n){if(t[T]===k)if(n instanceof C&&n[T]!==k)h(n),f(t,n[T],n[j]);else if(s(n))n.then(a(t,e),a(t,!1));else{t[T]=e;var i=t[j];t[j]=n;for(var o=0;o<i.length;)l(t,i[o++],i[o++],i[o++],i[o++]);if(0==i.length&&e==I){t[T]=N;try{throw new Error("Uncaught (in promise): "+n)}catch(u){var c=u;c.rejection=n,c.promise=t,c.zone=p.current,c.task=p.currentTask,S.push(c),r()}}}return t}function h(t){if(t[T]===N){t[T]=I;for(var e=0;e<S.length;e++)if(t===S[e].promise){S.splice(e,1);break}}}function l(t,e,r,n,i){h(t);var o=t[T]?n||u:i||c;e.scheduleMicroTask(E,function(){try{f(r,!0,e.run(o,null,[t[j]]))}catch(n){f(r,!1,n)}})}if(t.Zone)throw new Error("Zone already loaded.");var p=function(){function t(t,e){this._properties=null,this._parent=t,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new v(this,this._parent&&this._parent._zoneDelegate,e)}return Object.defineProperty(t,"current",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currentTask",{get:function(){return _},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=this.getZoneWith(t);if(e)return e._properties[t]},t.prototype.getZoneWith=function(t){for(var e=this;e;){if(e._properties.hasOwnProperty(t))return e;e=e._parent}return null},t.prototype.fork=function(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)},t.prototype.wrap=function(t,e){if("function"!=typeof t)throw new Error("Expecting function got: "+t);var r=this._zoneDelegate.intercept(this,t,e),n=this;return function(){return n.runGuarded(r,this,arguments,e)}},t.prototype.run=function(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null);var i=w;w=this;try{return this._zoneDelegate.invoke(this,t,e,r,n)}finally{w=i}},t.prototype.runGuarded=function(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null);var i=w;w=this;try{try{return this._zoneDelegate.invoke(this,t,e,r,n)}catch(o){if(this._zoneDelegate.handleError(this,o))throw o}}finally{w=i}},t.prototype.runTask=function(t,e,r){if(t.runCount++,t.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+t.zone.name+"; Execution: "+this.name+")");var n=_;_=t;var i=w;w=this;try{"macroTask"==t.type&&t.data&&!t.data.isPeriodic&&(t.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,t,e,r)}catch(o){if(this._zoneDelegate.handleError(this,o))throw o}}finally{w=i,_=n}},t.prototype.scheduleMicroTask=function(t,e,r,n){return this._zoneDelegate.scheduleTask(this,new b("microTask",this,t,e,r,n,null))},t.prototype.scheduleMacroTask=function(t,e,r,n,i){return this._zoneDelegate.scheduleTask(this,new b("macroTask",this,t,e,r,n,i))},t.prototype.scheduleEventTask=function(t,e,r,n,i){return this._zoneDelegate.scheduleTask(this,new b("eventTask",this,t,e,r,n,i))},t.prototype.cancelTask=function(t){var e=this._zoneDelegate.cancelTask(this,t);return t.runCount=-1,t.cancelFn=null,e},t.__symbol__=e,t}(),v=function(){function t(t,e,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=t,this._parentDelegate=e,this._forkZS=r&&(r&&r.onFork?r:e._forkZS),this._forkDlgt=r&&(r.onFork?e:e._forkDlgt),this._interceptZS=r&&(r.onIntercept?r:e._interceptZS),this._interceptDlgt=r&&(r.onIntercept?e:e._interceptDlgt),this._invokeZS=r&&(r.onInvoke?r:e._invokeZS),this._invokeDlgt=r&&(r.onInvoke?e:e._invokeDlgt),this._handleErrorZS=r&&(r.onHandleError?r:e._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?e:e._handleErrorDlgt),this._scheduleTaskZS=r&&(r.onScheduleTask?r:e._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?e:e._scheduleTaskDlgt),this._invokeTaskZS=r&&(r.onInvokeTask?r:e._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?e:e._invokeTaskDlgt),this._cancelTaskZS=r&&(r.onCancelTask?r:e._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?e:e._cancelTaskDlgt),this._hasTaskZS=r&&(r.onHasTask?r:e._hasTaskZS),this._hasTaskDlgt=r&&(r.onHasTask?e:e._hasTaskDlgt)}return t.prototype.fork=function(t,e){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,t,e):new p(t,e)},t.prototype.intercept=function(t,e,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this.zone,t,e,r):e},t.prototype.invoke=function(t,e,r,n,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this.zone,t,e,r,n,i):e.apply(r,n)},t.prototype.handleError=function(t,e){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this.zone,t,e)},t.prototype.scheduleTask=function(t,e){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this.zone,t,e);if(e.scheduleFn)e.scheduleFn(e);else{if("microTask"!=e.type)throw new Error("Task is missing scheduleFn.");n(e)}return e}finally{t==this.zone&&this._updateTaskCount(e.type,1)}},t.prototype.invokeTask=function(t,e,r,n){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this.zone,t,e,r,n):e.callback.apply(r,n)}finally{t!=this.zone||"eventTask"==e.type||e.data&&e.data.isPeriodic||this._updateTaskCount(e.type,-1)}},t.prototype.cancelTask=function(t,e){var r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this.zone,t,e);else{if(!e.cancelFn)throw new Error("Task does not support cancellation, or is already canceled.");r=e.cancelFn(e)}return t==this.zone&&this._updateTaskCount(e.type,-1),r},t.prototype.hasTask=function(t,e){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this.zone,t,e)},t.prototype._updateTaskCount=function(t,e){var r=this._taskCounts,n=r[t],i=r[t]=n+e;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==n||0==i){var o={microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:t};try{this.hasTask(this.zone,o)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(t,e)}}},t}(),b=function(){function t(t,e,r,n,i,s,u){this.runCount=0,this.type=t,this.zone=e,this.source=r,this.data=i,this.scheduleFn=s,this.cancelFn=u,this.callback=n;var c=this;this.invoke=function(){x++;try{return e.runTask(c,this,arguments)}finally{1==x&&o(),x--}}}return t.prototype.toString=function(){return this.data&&"undefined"!=typeof this.data.handleId?this.data.handleId:this.toString()},t}(),d=e("setTimeout"),y=e("Promise"),m=e("then"),w=new p(null,null),_=null,g=[],O=!1,S=[],x=0,T=e("state"),j=e("value"),E="Promise.then",k=null,P=!0,I=!1,N=0,C=function(){function t(e){var r=this;if(!(r instanceof t))throw new Error("Must be an instanceof Promise.");r[T]=k,r[j]=[];try{e&&e(a(r,P),a(r,I))}catch(n){f(r,!1,n)}}return t.resolve=function(t){return f(new this(null),P,t)},t.reject=function(t){return f(new this(null),I,t)},t.race=function(t){function e(t){o&&(o=n(t))}function r(t){o&&(o=i(t))}for(var n,i,o=new this(function(t,e){n=t,i=e}),u=0,c=t;u<c.length;u++){var a=c[u];s(a)||(a=this.resolve(a)),a.then(e,r)}return o},t.all=function(t){function e(t){i&&n(t),i=null}for(var r,n,i=new this(function(t,e){r=t,n=e}),o=0,u=[],c=0,a=t;c<a.length;c++){var f=a[c];s(f)||(f=this.resolve(f)),f.then(function(t){return function(e){u[t]=e,o--,i&&!o&&r(u)}}(o),e),o++}return o||r(u),i},t.prototype.then=function(t,e){var r=new this.constructor(null),n=p.current;return this[T]==k?this[j].push(n,r,t,e):l(this,n,r,t,e),r},t.prototype["catch"]=function(t){return this.then(null,t)},t}(),M=t[e("Promise")]=t.Promise;if(t.Promise=C,M){var F=M.prototype,A=F[e("then")]=F.then;F.then=function(t,e){var r=this;return new C(function(t,e){A.call(r,t,e)}).then(t,e)}}return Promise[p.__symbol__("uncaughtPromiseErrors")]=S,t.Zone=p})("undefined"==typeof window?t:window)}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t){var e=[],r=t.wtf;r?e=o.split(",").map(function(t){return"HTML"+t+"Element"}).concat(s):t[u]?e.push(u):e=s;for(var n=0;n<e.length;n++){var c=t[e[n]];i.patchEventTargetMethods(c&&c.prototype)}}var i=r(3),o="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",s="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex".split(","),u="EventTarget";e.eventTargetPatch=n},function(e,r){(function(e){"use strict";function n(t,e){for(var r=t.length-1;r>=0;r--)"function"==typeof t[r]&&(t[r]=Zone.current.wrap(t[r],e+"_"+r));return t}function i(t,e){for(var r=t.constructor.name,i=function(i){var o=e[i],s=t[o];s&&(t[o]=function(t){return function(){return t.apply(this,n(arguments,r+"."+o))}}(s))},o=0;o<e.length;o++)i(o)}function o(t,e){var r=Object.getOwnPropertyDescriptor(t,e)||{enumerable:!0,configurable:!0};delete r.writable,delete r.value;var n=e.substr(2),i="_"+e;r.set=function(t){if(this[i]&&this.removeEventListener(n,this[i]),"function"==typeof t){var e=function(e){var r;r=t.apply(this,arguments),void 0==r||r||e.preventDefault()};this[i]=e,this.addEventListener(n,e,!1)}else this[i]=null},r.get=function(){return this[i]||null},Object.defineProperty(t,e,r)}function s(t,e){var r=[];for(var n in t)"on"==n.substr(0,2)&&r.push(n);for(var i=0;i<r.length;i++)o(t,r[i]);if(e)for(var s=0;s<e.length;s++)o(t,"on"+e[s])}function u(t,e,r,n,i){var o=t[m];if(o)for(var s=0;s<o.length;s++){var u=o[s],c=u.data;if(c.handler===e&&c.useCapturing===n&&c.eventName===r)return i&&o.splice(s,1),u}return null}function c(t,e){var r=t[m];r||(r=t[m]=[]),r.push(e)}function a(t){var e=t.data;return c(e.target,t),e.target[g](e.eventName,t.invoke,e.useCapturing)}function f(t){var e=t.data;u(e.target,t.invoke,e.eventName,e.useCapturing,!0),e.target[O](e.eventName,t.invoke,e.useCapturing)}function h(t,e){var r=e[0],n=e[1],i=e[2]||!1,o=t||y,s=null;"function"==typeof n?s=n:n&&n.handleEvent&&(s=function(t){return n.handleEvent(t)});var c=!1;try{c=n&&"[object FunctionWrapper]"===n.toString()}catch(h){return}if(!s||c)return o[g](r,n,i);var l=u(o,n,r,i,!1);if(l)return o[g](r,l.invoke,i);var p=Zone.current,v=o.constructor.name+".addEventListener:"+r,b={target:o,eventName:r,name:r,useCapturing:i,handler:n};p.scheduleEventTask(v,s,b,a,f)}function l(t,e){var r=e[0],n=e[1],i=e[2]||!1,o=t||y,s=u(o,n,r,i,!0);s?s.zone.cancelTask(s):o[O](r,n,i)}function p(t){return!(!t||!t.addEventListener)&&(d(t,w,function(){return h}),d(t,_,function(){return l}),!0)}function v(t){var e=y[t];if(e){y[t]=function(){var r=n(arguments,t);switch(r.length){case 0:this[S]=new e;break;case 1:this[S]=new e(r[0]);break;case 2:this[S]=new e(r[0],r[1]);break;case 3:this[S]=new e(r[0],r[1],r[2]);break;case 4:this[S]=new e(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}};var r,i=new e(function(){});for(r in i)"XMLHttpRequest"===t&&"responseBlob"===r||!function(e){"function"==typeof i[e]?y[t].prototype[e]=function(){return this[S][e].apply(this[S],arguments)}:Object.defineProperty(y[t].prototype,e,{set:function(r){"function"==typeof r?this[S][e]=Zone.current.wrap(r,t+"."+e):this[S][e]=r},get:function(){return this[S][e]}})}(r);for(r in e)"prototype"!==r&&e.hasOwnProperty(r)&&(y[t][r]=e[r])}}function b(t,e){try{return Function("f","return function "+t+"(){return f(this, arguments)}")(e)}catch(r){return function(){return e(this,arguments)}}}function d(t,e,n){for(var i=t;i&&!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);!i&&t[e]&&(i=t);var o,s=r.zoneSymbol(e);return i&&!(o=i[s])&&(o=i[s]=i[e],i[e]=b(e,n(o,s,e))),o}r.zoneSymbol=Zone.__symbol__;var y="undefined"==typeof window?e:window;r.bindArguments=n,r.patchPrototype=i,r.isWebWorker="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,r.isNode="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),r.isBrowser=!r.isNode&&!r.isWebWorker&&!("undefined"==typeof window||!window.HTMLElement),r.patchProperty=o,r.patchOnProperties=s;var m=r.zoneSymbol("eventTasks"),w="addEventListener",_="removeEventListener",g=r.zoneSymbol(w),O=r.zoneSymbol(_);r.patchEventTargetMethods=p;var S=r.zoneSymbol("originalInstance");r.patchClass=v,r.createNamedFn=b,r.patchMethod=d}).call(r,function(){return this}())},function(t,e,r){"use strict";function n(){Object.defineProperty=function(t,e,r){if(o(t,e))throw new TypeError("Cannot assign to read only property '"+e+"' of "+t);var n=r.configurable;return"prototype"!==e&&(r=s(t,e,r)),u(t,e,r,n)},Object.defineProperties=function(t,e){return Object.keys(e).forEach(function(r){Object.defineProperty(t,r,e[r])}),t},Object.create=function(t,e){return"object"!=typeof e||Object.isFrozen(e)||Object.keys(e).forEach(function(r){e[r]=s(t,r,e[r])}),h(t,e)},Object.getOwnPropertyDescriptor=function(t,e){var r=f(t,e);return o(t,e)&&(r.configurable=!1),r}}function i(t,e,r){var n=r.configurable;return r=s(t,e,r),u(t,e,r,n)}function o(t,e){return t&&t[l]&&t[l][e]}function s(t,e,r){return r.configurable=!0,r.configurable||(t[l]||a(t,l,{writable:!0,value:{}}),t[l][e]=!0),r}function u(t,e,r,n){try{return a(t,e,r)}catch(i){if(r.configurable)return"undefined"==typeof n?delete r.configurable:r.configurable=n,a(t,e,r);throw i}}var c=r(3),a=Object.defineProperty,f=Object.getOwnPropertyDescriptor,h=Object.create,l=c.zoneSymbol("unconfigurables");e.propertyPatch=n,e._redefineProperty=i},function(t,e,r){"use strict";function n(t){if(o.isBrowser&&"registerElement"in t.document){var e=document.registerElement,r=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(t,n){return n&&n.prototype&&r.forEach(function(t){var e="Document.registerElement::"+t;if(n.prototype.hasOwnProperty(t)){var r=Object.getOwnPropertyDescriptor(n.prototype,t);r&&r.value?(r.value=Zone.current.wrap(r.value,e),i._redefineProperty(n.prototype,t,r)):n.prototype[t]=Zone.current.wrap(n.prototype[t],e)}else n.prototype[t]&&(n.prototype[t]=Zone.current.wrap(n.prototype[t],e))}),e.apply(document,[t,n])}}}var i=r(4),o=r(3);e.registerElementPatch=n},function(t,e,r){"use strict";function n(t){if(!u.isNode){var e="undefined"!=typeof WebSocket;i()?(u.isBrowser&&u.patchOnProperties(HTMLElement.prototype,c),u.patchOnProperties(XMLHttpRequest.prototype,null),"undefined"!=typeof IDBIndex&&(u.patchOnProperties(IDBIndex.prototype,null),u.patchOnProperties(IDBRequest.prototype,null),u.patchOnProperties(IDBOpenDBRequest.prototype,null),u.patchOnProperties(IDBDatabase.prototype,null),u.patchOnProperties(IDBTransaction.prototype,null),u.patchOnProperties(IDBCursor.prototype,null)),e&&u.patchOnProperties(WebSocket.prototype,null)):(o(),u.patchClass("XMLHttpRequest"),e&&s.apply(t))}}function i(){if(u.isBrowser&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var t=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(t&&!t.configurable)return!1}Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{get:function(){return!0}});var e=new XMLHttpRequest,r=!!e.onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{}),r}function o(){for(var t=function(t){var e=c[t],r="on"+e;document.addEventListener(e,function(t){var e,n,i=t.target;for(n=i?i.constructor.name+"."+r:"unknown."+r;i;)i[r]&&!i[r][a]&&(e=Zone.current.wrap(i[r],n),e[a]=i[r],i[r]=e),i=i.parentElement},!0)},e=0;e<c.length;e++)t(e)}var s=r(7),u=r(3),c="copy cut paste abort blur focus canplay canplaythrough change click contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange emptied ended input invalid keydown keypress keyup load loadeddata loadedmetadata loadstart message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup pause play playing progress ratechange reset scroll seeked seeking select show stalled submit suspend timeupdate volumechange waiting mozfullscreenchange mozfullscreenerror mozpointerlockchange mozpointerlockerror error webglcontextrestored webglcontextlost webglcontextcreationerror".split(" ");e.propertyDescriptorPatch=n;var a=u.zoneSymbol("unbound")},function(t,e,r){"use strict";function n(t){var e=t.WebSocket;t.EventTarget||i.patchEventTargetMethods(e.prototype),t.WebSocket=function(t,r){var n,o=arguments.length>1?new e(t,r):new e(t),s=Object.getOwnPropertyDescriptor(o,"onmessage");return s&&s.configurable===!1?(n=Object.create(o),["addEventListener","removeEventListener","send","close"].forEach(function(t){n[t]=function(){return o[t].apply(o,arguments)}})):n=o,i.patchOnProperties(n,["close","error","message","open"]),n};for(var r in e)t.WebSocket[r]=e[r]}var i=r(3);e.apply=n},function(t,e,r){"use strict";function n(t,e,r,n){function o(e){var r=e.data;return r.args[0]=e.invoke,r.handleId=u.apply(t,r.args),e}function s(t){return c(t.data.handleId)}var u=null,c=null;e+=n,r+=n,u=i.patchMethod(t,e,function(r){return function(i,u){if("function"==typeof u[0]){var c=Zone.current,a={handleId:null,isPeriodic:"Interval"===n,delay:"Timeout"===n||"Interval"===n?u[1]||0:null,args:u},f=c.scheduleMacroTask(e,u[0],a,o,s);if(!f)return f;var h=f.data.handleId;return h.ref&&h.unref&&(f.ref=h.ref.bind(h),f.unref=h.unref.bind(h)),f}return r.apply(t,u)}}),c=i.patchMethod(t,r,function(e){return function(r,n){var i=n[0];i&&"string"==typeof i.type?(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&i.zone.cancelTask(i):e.apply(t,n)}})}var i=r(3);e.patchTimer=n}])}).call(e,r(565))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmRpc3QuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGViN2EyNTMzN2IxNWIzZDVlY2Q4P2MyN2QiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL1N1YmplY3QuanM/YzFjNiIsIndlYnBhY2s6Ly8vLi9+L3J4anMvT2JzZXJ2YWJsZS5qcz80ZTA2Iiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL3Jvb3QuanM/OTNjMyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzP2MzYzIiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3N5bWJvbC9vYnNlcnZhYmxlLmpzPzFmMjQiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvdG9TdWJzY3JpYmVyLmpzP2Y4ZmUiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL1N1YnNjcmliZXIuanM/MjE1ZSIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9pc0Z1bmN0aW9uLmpzPzUxYzAiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL1N1YnNjcmlwdGlvbi5qcz81YzU4Iiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL2lzQXJyYXkuanM/YjBlYSIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9pc09iamVjdC5qcz9hYTJlIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL3RyeUNhdGNoLmpzPzc2OTQiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvZXJyb3JPYmplY3QuanM/ZjQ5YiIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yLmpzP2JjOWQiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3N5bWJvbC9yeFN1YnNjcmliZXIuanM/MTEyYyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvT2JzZXJ2ZXIuanM/ZjA5OCIsIndlYnBhY2s6Ly8vLi9+L3J4anMvU3ViamVjdFN1YnNjcmlwdGlvbi5qcz9kMzUxIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL3Rocm93RXJyb3IuanM/OTRkNCIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvci5qcz9lNTU5Iiwid2VicGFjazovLy8uL34vcmVmbGVjdC1tZXRhZGF0YS9SZWZsZWN0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvc2hpbS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3ltYm9sLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2hhcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fZGVzY3JpcHRvcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2ZhaWxzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19leHBvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2NvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2hpZGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1kcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fYW4tb2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19pcy1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2llOC1kb20tZGVmaW5lLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19kb20tY3JlYXRlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL190by1wcmltaXRpdmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3Byb3BlcnR5LWRlc2MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3JlZGVmaW5lLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL191aWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2N0eC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fYS1mdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fbWV0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fc2hhcmVkLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19zZXQtdG8tc3RyaW5nLXRhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fd2tzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL193a3MtZXh0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL193a3MtZGVmaW5lLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19saWJyYXJ5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19rZXlvZi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWtleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1rZXlzLWludGVybmFsLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL190by1pb2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19pb2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19jb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2RlZmluZWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2FycmF5LWluY2x1ZGVzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL190by1sZW5ndGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3RvLWludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3RvLWluZGV4LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19zaGFyZWQta2V5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19lbnVtLWJ1Zy1rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19lbnVtLWtleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1nb3BzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19vYmplY3QtcGllLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19pcy1hcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWNyZWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWRwcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9faHRtbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWdvcG4tZXh0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19vYmplY3QtZ29wbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWdvcGQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LXNhcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3RvLW9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWdwby5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmtleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LW5hbWVzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuZnJlZXplLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3Quc2VhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LnByZXZlbnQtZXh0ZW5zaW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmlzLWZyb3plbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmlzLXNlYWxlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmlzLWV4dGVuc2libGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1hc3NpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5pcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fc2FtZS12YWx1ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3NldC1wcm90by5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fY2xhc3NvZi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuZnVuY3Rpb24uYmluZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fYmluZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9faW52b2tlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5mdW5jdGlvbi5uYW1lLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5mdW5jdGlvbi5oYXMtaW5zdGFuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnBhcnNlLWludC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fcGFyc2UtaW50LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19zdHJpbmctdHJpbS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fc3RyaW5nLXdzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5wYXJzZS1mbG9hdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fcGFyc2UtZmxvYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5jb25zdHJ1Y3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9faW5oZXJpdC1pZi1yZXF1aXJlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLnRvLWZpeGVkLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19hLW51bWJlci12YWx1ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fc3RyaW5nLXJlcGVhdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLnRvLXByZWNpc2lvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLmVwc2lsb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5pcy1maW5pdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5pcy1pbnRlZ2VyLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19pcy1pbnRlZ2VyLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5udW1iZXIuaXMtbmFuLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5udW1iZXIuaXMtc2FmZS1pbnRlZ2VyLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5udW1iZXIubWF4LXNhZmUtaW50ZWdlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLm1pbi1zYWZlLWludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5wYXJzZS1mbG9hdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLnBhcnNlLWludC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5hY29zaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fbWF0aC1sb2cxcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5hc2luaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5hdGFuaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5jYnJ0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19tYXRoLXNpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguY2x6MzIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguY29zaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5leHBtMS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fbWF0aC1leHBtMS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5mcm91bmQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguaHlwb3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguaW11bC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5sb2cxMC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5sb2cxcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5sb2cyLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLnNpZ24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguc2luaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC50YW5oLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLnRydW5jLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuZnJvbS1jb2RlLXBvaW50LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcucmF3LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcudHJpbS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19zdHJpbmctYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2l0ZXItZGVmaW5lLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19pdGVyYXRvcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2l0ZXItY3JlYXRlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuY29kZS1wb2ludC1hdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmVuZHMtd2l0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fc3RyaW5nLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2lzLXJlZ2V4cC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fZmFpbHMtaXMtcmVnZXhwLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5yZXBlYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5zdGFydHMtd2l0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmFuY2hvci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fc3RyaW5nLWh0bWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5iaWcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5ibGluay5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmJvbGQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5maXhlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmZvbnRjb2xvci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmZvbnRzaXplLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaXRhbGljcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmxpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5zbWFsbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnN0cmlrZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnN1cC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuZGF0ZS5ub3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmRhdGUudG8tanNvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuZGF0ZS50by1pc28tc3RyaW5nLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5kYXRlLnRvLXN0cmluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuZGF0ZS50by1wcmltaXRpdmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2RhdGUtdG8tcHJpbWl0aXZlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5pcy1hcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuZnJvbS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9faXRlci1jYWxsLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19pcy1hcnJheS1pdGVyLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19jcmVhdGUtcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19pdGVyLWRldGVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkub2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmpvaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3N0cmljdC1tZXRob2QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LnNsaWNlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5zb3J0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5mb3ItZWFjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fYXJyYXktbWV0aG9kcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fYXJyYXktc3BlY2llcy1jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5Lm1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuZmlsdGVyLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5zb21lLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5ldmVyeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkucmVkdWNlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19hcnJheS1yZWR1Y2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LnJlZHVjZS1yaWdodC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuaW5kZXgtb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5Lmxhc3QtaW5kZXgtb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmNvcHktd2l0aGluLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19hcnJheS1jb3B5LXdpdGhpbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fYWRkLXRvLXVuc2NvcGFibGVzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5maWxsLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19hcnJheS1maWxsLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5maW5kLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5maW5kLWluZGV4LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5zcGVjaWVzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19zZXQtc3BlY2llcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuaXRlcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2l0ZXItc3RlcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLmNvbnN0cnVjdG9yLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19mbGFncy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLnRvLXN0cmluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLmZsYWdzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAubWF0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2ZpeC1yZS13a3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5yZXBsYWNlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAuc2VhcmNoLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAuc3BsaXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnByb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2FuLWluc3RhbmNlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19mb3Itb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3NwZWNpZXMtY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3Rhc2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX21pY3JvdGFzay5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fcmVkZWZpbmUtYWxsLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX2NvbGxlY3Rpb24tc3Ryb25nLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19jb2xsZWN0aW9uLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LndlYWstbWFwLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19jb2xsZWN0aW9uLXdlYWsuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LndlYWstc2V0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC5hcnJheS1idWZmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3R5cGVkLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL190eXBlZC1idWZmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnR5cGVkLmRhdGEtdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYudHlwZWQuaW50OC1hcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fdHlwZWQtYXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnR5cGVkLnVpbnQ4LWFycmF5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC51aW50OC1jbGFtcGVkLWFycmF5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC5pbnQxNi1hcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYudHlwZWQudWludDE2LWFycmF5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC5pbnQzMi1hcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYudHlwZWQudWludDMyLWFycmF5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC5mbG9hdDMyLWFycmF5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC5mbG9hdDY0LWFycmF5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0LmFwcGx5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0LmNvbnN0cnVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVmbGVjdC5kZWZpbmUtcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3QuZGVsZXRlLXByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0LmVudW1lcmF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVmbGVjdC5nZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0LmdldC1wcm90b3R5cGUtb2YuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3QuaGFzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0LmlzLWV4dGVuc2libGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3Qub3duLWtleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX293bi1rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0LnByZXZlbnQtZXh0ZW5zaW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVmbGVjdC5zZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3Quc2V0LXByb3RvdHlwZS1vZi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnN0cmluZy5hdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc3RyaW5nLnBhZC1zdGFydC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fc3RyaW5nLXBhZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc3RyaW5nLnBhZC1lbmQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnN0cmluZy50cmltLWxlZnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnN0cmluZy50cmltLXJpZ2h0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5zdHJpbmcubWF0Y2gtYWxsLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnN5bWJvbC5vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0LnZhbHVlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LXRvLWFycmF5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5vYmplY3QuZW50cmllcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0LmRlZmluZS1nZXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1mb3JjZWQtcGFtLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5vYmplY3QuZGVmaW5lLXNldHRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0Lmxvb2t1cC1nZXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5sb29rdXAtc2V0dGVyLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5tYXAudG8tanNvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fY29sbGVjdGlvbi10by1qc29uLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19hcnJheS1mcm9tLWl0ZXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5zZXQudG8tanNvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc3lzdGVtLmdsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuZXJyb3IuaXMtZXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3Lm1hdGguaWFkZGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3Lm1hdGguaXN1YmguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3Lm1hdGguaW11bGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3Lm1hdGgudW11bGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnJlZmxlY3QuZGVmaW5lLW1ldGFkYXRhLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL19tZXRhZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcucmVmbGVjdC5kZWxldGUtbWV0YWRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnJlZmxlY3QuZ2V0LW1ldGFkYXRhLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5yZWZsZWN0LmdldC1tZXRhZGF0YS1rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5yZWZsZWN0LmdldC1vd24tbWV0YWRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnJlZmxlY3QuZ2V0LW93bi1tZXRhZGF0YS1rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5yZWZsZWN0Lmhhcy1tZXRhZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9lczcucmVmbGVjdC5oYXMtb3duLW1ldGFkYXRhLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5yZWZsZWN0Lm1ldGFkYXRhLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5hc2FwLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2VzNy5vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3BhcnRpYWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvX3BhdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvd2ViLmltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2NvcmUuZGljdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLmlzLWl0ZXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2NvcmUuZ2V0LWl0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2NvcmUuZGVsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvY29yZS5mdW5jdGlvbi5wYXJ0LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2NvcmUub2JqZWN0LmlzLW9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLm9iamVjdC5jbGFzc29mLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2NvcmUub2JqZWN0LmRlZmluZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWRlZmluZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLm9iamVjdC5tYWtlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2NvcmUubnVtYmVyLml0ZXJhdG9yLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9tb2R1bGVzL2NvcmUucmVnZXhwLmVzY2FwZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbW9kdWxlcy9fcmVwbGFjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvY29yZS5zdHJpbmcuZXNjYXBlLWh0bWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL21vZHVsZXMvY29yZS5zdHJpbmcudW5lc2NhcGUtaHRtbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvUnguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2JpbmRDYWxsYmFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9iaW5kQ2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvQm91bmRDYWxsYmFja09ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL0FzeW5jU3ViamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9iaW5kTm9kZUNhbGxiYWNrLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0JvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvY29tYmluZUxhdGVzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY29tYmluZUxhdGVzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvU2NhbGFyT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvaXNTY2hlZHVsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL091dGVyU3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9pc1Byb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3N5bWJvbC9pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvSW5uZXJTdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9jb25jYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvY29uY2F0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jb25jYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21lcmdlQWxsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9kZWZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9kZWZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9EZWZlck9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2VtcHR5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL2VtcHR5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mb3JrSm9pbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9mb3JrSm9pbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9Gb3JrSm9pbk9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb20uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvZnJvbS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9Gcm9tT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9Qcm9taXNlT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9JdGVyYXRvck9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvQXJyYXlMaWtlT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivb2JzZXJ2ZU9uLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9Ob3RpZmljYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvRnJvbUV2ZW50T2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvZnJvbUV2ZW50UGF0dGVybi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL0Zyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvaW50ZXJ2YWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvaW50ZXJ2YWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvSW50ZXJ2YWxPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL2lzTnVtZXJpYy5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc2NoZWR1bGVyL2FzeW5jLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9zY2hlZHVsZXIvQXN5bmNTY2hlZHVsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9GdXR1cmVBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9RdWV1ZVNjaGVkdWxlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc2NoZWR1bGVyL1F1ZXVlQWN0aW9uLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9tZXJnZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9tZXJnZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3JhY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3JhY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL25ldmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL25ldmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL05ldmVyT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9ub29wLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9vZi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9vZi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29ic2VydmFibGUvcmFuZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvcmFuZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvUmFuZ2VPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS90aHJvdy5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS90aHJvdy5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS9FcnJvck9ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3RpbWVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL3RpbWVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL1RpbWVyT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9pc0RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3ppcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb2JzZXJ2YWJsZS96aXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3ppcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvYnVmZmVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyQ291bnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2J1ZmZlckNvdW50LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyVGltZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvYnVmZmVyVGltZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlclRvZ2dsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvYnVmZmVyVG9nZ2xlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyV2hlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvYnVmZmVyV2hlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NhY2hlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcHVibGlzaFJlcGxheS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvUmVwbGF5U3ViamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc2NoZWR1bGVyL3F1ZXVlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9tdWx0aWNhc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29ic2VydmFibGUvQ29ubmVjdGFibGVPYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvY2F0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2NhdGNoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvY29tYmluZUFsbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY29tYmluZUFsbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbWJpbmVMYXRlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXRBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2NvbmNhdEFsbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbmNhdE1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvY29uY2F0TWFwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9tZXJnZU1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbmNhdE1hcFRvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jb25jYXRNYXBUby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VNYXBUby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvdW50LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9jb3VudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlbWF0ZXJpYWxpemUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2RlbWF0ZXJpYWxpemUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZWJvdW5jZVRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2RlYm91bmNlVGltZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlbGF5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9kZWxheS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlbGF5V2hlbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZGVsYXlXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZGlzdGluY3RVbnRpbENoYW5nZWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2RvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvZXhwYW5kLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9leHBhbmQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2ZpbHRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2ZpbmFsbHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2ZpbmFsbHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9maXJzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvZmlyc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvRW1wdHlFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2dyb3VwQnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2dyb3VwQnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvTWFwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL01hcFBvbHlmaWxsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL0Zhc3RNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9pZ25vcmVFbGVtZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvaWdub3JlRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9hdWRpdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvYXVkaXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9hdWRpdFRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2F1ZGl0VGltZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2xhc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2xhc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9sZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL2xldC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL2V2ZXJ5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9ldmVyeS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvbWFwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvbWFwVG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21hcFRvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvbWF0ZXJpYWxpemUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL21hdGVyaWFsaXplLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9tZXJnZUFsbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXBUby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL211bHRpY2FzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL29ic2VydmVPbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3BhcnRpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcGFydGl0aW9uLmpzIiwid2VicGFjazovLy8uL34vcnhqcy91dGlsL25vdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3BsdWNrLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9wbHVjay5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3B1Ymxpc2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoQmVoYXZpb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvci5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvQmVoYXZpb3JTdWJqZWN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaFJlcGxheS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hMYXN0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoTGFzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3JhY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9yZWR1Y2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3JlZHVjZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3JlcGVhdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvcmVwZWF0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvcmV0cnkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3JldHJ5LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvcmV0cnlXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9yZXRyeVdoZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zYW1wbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3NhbXBsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3NhbXBsZVRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3NhbXBsZVRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zY2FuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zY2FuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3NoYXJlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2luZ2xlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zaW5nbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9za2lwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9za2lwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc2tpcFVudGlsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9za2lwVW50aWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9za2lwV2hpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3NraXBXaGlsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3N0YXJ0V2l0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivc3RhcnRXaXRoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3Vic2NyaWJlT24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3N1YnNjcmliZU9uLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vYnNlcnZhYmxlL1N1YnNjcmliZU9uT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvc2NoZWR1bGVyL2FzYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3NjaGVkdWxlci9Bc2FwU2NoZWR1bGVyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9zY2hlZHVsZXIvQXNhcEFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvdXRpbC9JbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8uL34vcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zd2l0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2hNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3N3aXRjaE1hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcFRvLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci9zd2l0Y2hNYXBUby5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3Rha2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90YWtlTGFzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGFrZUxhc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90YWtlVW50aWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3Rha2VVbnRpbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rha2VXaGlsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdGFrZVdoaWxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdGhyb3R0bGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3Rocm90dGxlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdGhyb3R0bGVUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci90aHJvdHRsZVRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci90aW1lb3V0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci90aW1lb3V0LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdGltZW91dFdpdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3RpbWVvdXRXaXRoLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvdG9BcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdG9BcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvYWRkL29wZXJhdG9yL3RvUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3IvdG9Qcm9taXNlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93LmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dDb3VudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93Q291bnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dUaW1lLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93VG9nZ2xlLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dUb2dnbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci93aW5kb3dXaGVuLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2l0aExhdGVzdEZyb20uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvemlwLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9hZGQvb3BlcmF0b3IvemlwQWxsLmpzIiwid2VicGFjazovLy8uL34vcnhqcy9vcGVyYXRvci96aXBBbGwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yeGpzL09wZXJhdG9yLmpzIiwid2VicGFjazovLy8uL34vem9uZS5qcy9kaXN0L3pvbmUuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX19leHRlbmRzIiwidGhpcyIsImQiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsImhhc093blByb3BlcnR5IiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiT2JzZXJ2YWJsZV8xIiwiU3Vic2NyaWJlcl8xIiwiU3Vic2NyaXB0aW9uXzEiLCJTdWJqZWN0U3Vic2NyaXB0aW9uXzEiLCJyeFN1YnNjcmliZXJfMSIsInRocm93RXJyb3JfMSIsIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEiLCJTdWJqZWN0IiwiX3N1cGVyIiwiZGVzdGluYXRpb24iLCJzb3VyY2UiLCJvYnNlcnZlcnMiLCJpc1Vuc3Vic2NyaWJlZCIsImlzU3RvcHBlZCIsImhhc0Vycm9yZWQiLCJkaXNwYXRjaGluZyIsImhhc0NvbXBsZXRlZCIsImxpZnQiLCJvcGVyYXRvciIsInN1YmplY3QiLCJhZGQiLCJzdWJzY3JpcHRpb24iLCJTdWJzY3JpcHRpb24iLCJyZW1vdmUiLCJ1bnN1YnNjcmliZSIsIl9zdWJzY3JpYmUiLCJzdWJzY3JpYmVyIiwic3Vic2NyaWJlIiwiZXJyb3IiLCJlcnJvclZhbHVlIiwiY29tcGxldGUiLCJ0aHJvd0lmVW5zdWJzY3JpYmVkIiwiU3ViamVjdFN1YnNjcmlwdGlvbiIsInB1c2giLCJfdW5zdWJzY3JpYmUiLCJuZXh0IiwidmFsdWUiLCJfbmV4dCIsIl9lcnJvciIsIl9jb21wbGV0ZSIsImVyciIsImFzT2JzZXJ2YWJsZSIsIm9ic2VydmFibGUiLCJTdWJqZWN0T2JzZXJ2YWJsZSIsIl9maW5hbE5leHQiLCJpbmRleCIsInNsaWNlIiwibGVuIiwibGVuZ3RoIiwiX2ZpbmFsRXJyb3IiLCJfZmluYWxDb21wbGV0ZSIsInRocm93RXJyb3IiLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvciIsIiQkcnhTdWJzY3JpYmVyIiwiU3Vic2NyaWJlciIsIk9ic2VydmFibGUiLCJyb290XzEiLCJvYnNlcnZhYmxlXzEiLCJ0b1N1YnNjcmliZXJfMSIsIl9pc1NjYWxhciIsIm9ic2VydmVyT3JOZXh0Iiwic2luayIsInRvU3Vic2NyaWJlciIsInN5bmNFcnJvclRocm93YWJsZSIsInN5bmNFcnJvclRocm93biIsInN5bmNFcnJvclZhbHVlIiwiZm9yRWFjaCIsIlByb21pc2VDdG9yIiwiX3RoaXMiLCJyb290IiwiUngiLCJjb25maWciLCJQcm9taXNlIiwiRXJyb3IiLCJyZXNvbHZlIiwicmVqZWN0IiwiJCRvYnNlcnZhYmxlIiwiZ2xvYmFsIiwib2JqZWN0VHlwZXMiLCJib29sZWFuIiwiZnVuY3Rpb24iLCJvYmplY3QiLCJudW1iZXIiLCJzdHJpbmciLCJ1bmRlZmluZWQiLCJzZWxmIiwid2luZG93IiwiZnJlZUdsb2JhbCIsIm5vZGVUeXBlIiwid2VicGFja1BvbHlmaWxsIiwiZGVwcmVjYXRlIiwicGF0aHMiLCJjaGlsZHJlbiIsIlN5bWJvbCIsIm5leHRPck9ic2VydmVyIiwiaXNGdW5jdGlvbl8xIiwiT2JzZXJ2ZXJfMSIsImRlc3RpbmF0aW9uT3JOZXh0IiwiYXJndW1lbnRzIiwiZW1wdHkiLCJTYWZlU3Vic2NyaWJlciIsIl9wYXJlbnQiLCJjb250ZXh0IiwiaXNGdW5jdGlvbiIsImJpbmQiLCJfY29udGV4dCIsIl9fdHJ5T3JTZXRFcnJvciIsIl9fdHJ5T3JVbnN1YiIsImZuIiwicGFyZW50IiwieCIsImlzQXJyYXlfMSIsImlzT2JqZWN0XzEiLCJ0cnlDYXRjaF8xIiwiZXJyb3JPYmplY3RfMSIsIlVuc3Vic2NyaXB0aW9uRXJyb3JfMSIsImVycm9ycyIsImhhc0Vycm9ycyIsIl9hIiwiX3N1YnNjcmlwdGlvbnMiLCJ0cmlhbCIsInRyeUNhdGNoIiwiZXJyb3JPYmplY3QiLCJlIiwiaXNBcnJheSIsInN1YiIsImlzT2JqZWN0IiwiVW5zdWJzY3JpcHRpb25FcnJvciIsImNvbmNhdCIsInRlYXJkb3duIiwiRU1QVFkiLCJzdWJzY3JpcHRpb25zIiwic3Vic2NyaXB0aW9uSW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiQXJyYXkiLCJ0cnlDYXRjaGVyIiwidHJ5Q2F0Y2hUYXJnZXQiLCJhcHBseSIsIm5hbWUiLCJtZXNzYWdlIiwibWFwIiwiaSIsInRvU3RyaW5nIiwiam9pbiIsIm9ic2VydmVyIiwic3Vic2NyaWJlckluZGV4IiwiUmVmbGVjdCIsImRlY29yYXRlIiwiZGVjb3JhdG9ycyIsInRhcmdldCIsInRhcmdldEtleSIsInRhcmdldERlc2NyaXB0b3IiLCJJc1VuZGVmaW5lZCIsIklzQXJyYXkiLCJUeXBlRXJyb3IiLCJJc0NvbnN0cnVjdG9yIiwiRGVjb3JhdGVDb25zdHJ1Y3RvciIsIklzT2JqZWN0IiwiVG9Qcm9wZXJ0eUtleSIsIkRlY29yYXRlUHJvcGVydHlXaXRob3V0RGVzY3JpcHRvciIsIkRlY29yYXRlUHJvcGVydHlXaXRoRGVzY3JpcHRvciIsIm1ldGFkYXRhIiwibWV0YWRhdGFLZXkiLCJtZXRhZGF0YVZhbHVlIiwiZGVjb3JhdG9yIiwiT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSIsImRlZmluZU1ldGFkYXRhIiwiaGFzTWV0YWRhdGEiLCJPcmRpbmFyeUhhc01ldGFkYXRhIiwiaGFzT3duTWV0YWRhdGEiLCJPcmRpbmFyeUhhc093bk1ldGFkYXRhIiwiZ2V0TWV0YWRhdGEiLCJPcmRpbmFyeUdldE1ldGFkYXRhIiwiZ2V0T3duTWV0YWRhdGEiLCJPcmRpbmFyeUdldE93bk1ldGFkYXRhIiwiZ2V0TWV0YWRhdGFLZXlzIiwiT3JkaW5hcnlNZXRhZGF0YUtleXMiLCJnZXRPd25NZXRhZGF0YUtleXMiLCJPcmRpbmFyeU93bk1ldGFkYXRhS2V5cyIsImRlbGV0ZU1ldGFkYXRhIiwibWV0YWRhdGFNYXAiLCJHZXRPckNyZWF0ZU1ldGFkYXRhTWFwIiwic2l6ZSIsInRhcmdldE1ldGFkYXRhIiwiTWV0YWRhdGEiLCJnZXQiLCJkZWNvcmF0ZWQiLCJwcm9wZXJ0eUtleSIsImRlc2NyaXB0b3IiLCJfTWFwIiwic2V0Iiwia2V5TWV0YWRhdGEiLCJNZXRhZGF0YUtleSIsIk8iLCJQIiwiaGFzT3duIiwiR2V0UHJvdG90eXBlT2YiLCJCb29sZWFuIiwiaGFzIiwiTWV0YWRhdGFWYWx1ZSIsIm93bktleXMiLCJwYXJlbnRLZXlzIiwia2V5cyIsIl9TZXQiLCJfaSIsImtleSIsImdldEtleXMiLCJfIiwiSXNTeW1ib2wiLCJTdHJpbmciLCJwcm90byIsImdldFByb3RvdHlwZU9mIiwiZnVuY3Rpb25Qcm90b3R5cGUiLCJwcm90b3R5cGVQcm90byIsIkl0ZXJhdG9yU3RlcCIsIml0ZXJhdG9yIiwicmVzdWx0IiwiZG9uZSIsIkl0ZXJhdG9yQ2xvc2UiLCJmIiwiY2FsbGJhY2siLCJ0aGlzQXJnIiwiZW50cmllcyIsImZvckVhY2hfMSIsIkNyZWF0ZU1hcEl0ZXJhdG9yIiwidmFsdWVzIiwia2luZCIsImN1cnJlbnQiLCJ0aHJvdyIsInJldHVybiIsIkNyZWF0ZU1hcFBvbHlmaWxsIiwiY2FjaGVTZW50aW5lbCIsIk1hcCIsIl9rZXlzIiwiX3ZhbHVlcyIsIl9jYWNoZUtleSIsIl9jYWNoZUluZGV4IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiX2ZpbmQiLCJjbGVhciIsImluc2VydCIsIkNyZWF0ZVNldFBvbHlmaWxsIiwiU2V0IiwiX21hcCIsIkNyZWF0ZVdlYWtNYXBQb2x5ZmlsbCIsIkZpbGxSYW5kb21CeXRlcyIsImJ1ZmZlciIsIk1hdGgiLCJyYW5kb20iLCJHZW5SYW5kb21CeXRlcyIsIlVpbnQ4QXJyYXkiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJtc0NyeXB0byIsIkNyZWF0ZVVVSUQiLCJkYXRhIiwiVVVJRF9TSVpFIiwib2Zmc2V0IiwiYnl0ZSIsInRvTG93ZXJDYXNlIiwiQ3JlYXRlVW5pcXVlS2V5IiwiSGFzaE1hcCIsIkdldE9yQ3JlYXRlV2Vha01hcFRhYmxlIiwicm9vdEtleSIsImNyZWF0ZURpY3Rpb25hcnkiLCJXZWFrTWFwIiwiX2tleSIsInRhYmxlIiwiTWFrZURpY3Rpb25hcnkiLCJvYmoiLCJfX0RJQ1RJT05BUllfTU9ERV9fIiwiX19fX0RJQ1RJT05BUllfTU9ERV9fIiwic3VwcG9ydHNDcmVhdGUiLCJzdXBwb3J0c1Byb3RvIiwic2VudGluZWwiLCJpbnN0YW5jZSIsIl9fcHJvdG9fXyIsImRvd25MZXZlbCIsIkZ1bmN0aW9uIiwiX1dlYWtNYXAiLCJfX2dsb2JhbCIsIldvcmtlckdsb2JhbFNjb3BlIiwiREVTQ1JJUFRPUlMiLCIkZXhwb3J0IiwicmVkZWZpbmUiLCJNRVRBIiwiS0VZIiwiJGZhaWxzIiwic2hhcmVkIiwic2V0VG9TdHJpbmdUYWciLCJ1aWQiLCJ3a3MiLCJ3a3NFeHQiLCJ3a3NEZWZpbmUiLCJrZXlPZiIsImVudW1LZXlzIiwiYW5PYmplY3QiLCJ0b0lPYmplY3QiLCJ0b1ByaW1pdGl2ZSIsImNyZWF0ZURlc2MiLCJfY3JlYXRlIiwiZ09QTkV4dCIsIiRHT1BEIiwiJERQIiwiJGtleXMiLCJnT1BEIiwiZFAiLCJnT1BOIiwiJFN5bWJvbCIsIiRKU09OIiwiSlNPTiIsIl9zdHJpbmdpZnkiLCJzdHJpbmdpZnkiLCJQUk9UT1RZUEUiLCJISURERU4iLCJUT19QUklNSVRJVkUiLCJpc0VudW0iLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIlN5bWJvbFJlZ2lzdHJ5IiwiQWxsU3ltYm9scyIsIk9QU3ltYm9scyIsIk9iamVjdFByb3RvIiwiVVNFX05BVElWRSIsIlFPYmplY3QiLCJzZXR0ZXIiLCJmaW5kQ2hpbGQiLCJzZXRTeW1ib2xEZXNjIiwiYSIsIml0IiwiRCIsInByb3RvRGVzYyIsIndyYXAiLCJ0YWciLCJzeW0iLCJfayIsImlzU3ltYm9sIiwiJGRlZmluZVByb3BlcnR5IiwiJGRlZmluZVByb3BlcnRpZXMiLCJsIiwiJGNyZWF0ZSIsIiRwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIkUiLCIkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiJGdldE93blByb3BlcnR5TmFtZXMiLCJuYW1lcyIsIiRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJJU19PUCIsIiRzZXQiLCJHIiwiVyIsIkYiLCJzeW1ib2xzIiwic3BsaXQiLCJzdG9yZSIsIlMiLCJmb3IiLCJrZXlGb3IiLCJ1c2VTZXR0ZXIiLCJ1c2VTaW1wbGUiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5U3ltYm9scyIsInJlcGxhY2VyIiwiJHJlcGxhY2VyIiwiYXJncyIsInZhbHVlT2YiLCJfX2ciLCJleGVjIiwiY29yZSIsImhpZGUiLCJjdHgiLCJ0eXBlIiwib3duIiwib3V0IiwiZXhwIiwiSVNfRk9SQ0VEIiwiSVNfR0xPQkFMIiwiSVNfU1RBVElDIiwiSVNfUFJPVE8iLCJJU19CSU5EIiwiQiIsImV4cFByb3RvIiwiVSIsIlIiLCJ2ZXJzaW9uIiwiX19lIiwiSUU4X0RPTV9ERUZJTkUiLCJBdHRyaWJ1dGVzIiwiZG9jdW1lbnQiLCJpcyIsImNyZWF0ZUVsZW1lbnQiLCJ2YWwiLCJiaXRtYXAiLCJ3cml0YWJsZSIsIlNSQyIsIlRPX1NUUklORyIsIiR0b1N0cmluZyIsIlRQTCIsImluc3BlY3RTb3VyY2UiLCJzYWZlIiwicHgiLCJhRnVuY3Rpb24iLCJ0aGF0Iiwic2V0RGVzYyIsImlzRXh0ZW5zaWJsZSIsIkZSRUVaRSIsInByZXZlbnRFeHRlbnNpb25zIiwic2V0TWV0YSIsInciLCJmYXN0S2V5IiwiZ2V0V2VhayIsIm9uRnJlZXplIiwibWV0YSIsIk5FRUQiLCJTSEFSRUQiLCJkZWYiLCJUQUciLCJzdGF0IiwiVVNFX1NZTUJPTCIsIiRleHBvcnRzIiwiTElCUkFSWSIsImNoYXJBdCIsImVsIiwiZW51bUJ1Z0tleXMiLCJhcnJheUluZGV4T2YiLCJJRV9QUk9UTyIsIklPYmplY3QiLCJkZWZpbmVkIiwiY29mIiwidG9MZW5ndGgiLCJ0b0luZGV4IiwiSVNfSU5DTFVERVMiLCIkdGhpcyIsImZyb21JbmRleCIsInRvSW50ZWdlciIsIm1pbiIsImNlaWwiLCJmbG9vciIsImlzTmFOIiwibWF4IiwiZ09QUyIsInBJRSIsImdldFN5bWJvbHMiLCJhcmciLCJkUHMiLCJFbXB0eSIsImNyZWF0ZURpY3QiLCJpZnJhbWVEb2N1bWVudCIsImlmcmFtZSIsImx0IiwiZ3QiLCJzdHlsZSIsImRpc3BsYXkiLCJhcHBlbmRDaGlsZCIsInNyYyIsImNvbnRlbnRXaW5kb3ciLCJvcGVuIiwid3JpdGUiLCJjbG9zZSIsIlByb3BlcnRpZXMiLCJkb2N1bWVudEVsZW1lbnQiLCJ3aW5kb3dOYW1lcyIsImdldFdpbmRvd05hbWVzIiwiaGlkZGVuS2V5cyIsImZhaWxzIiwidG9PYmplY3QiLCIkZ2V0UHJvdG90eXBlT2YiLCIkZnJlZXplIiwiJHNlYWwiLCIkcHJldmVudEV4dGVuc2lvbnMiLCIkaXNGcm96ZW4iLCIkaXNTZWFsZWQiLCIkaXNFeHRlbnNpYmxlIiwiYXNzaWduIiwiJGFzc2lnbiIsIkEiLCJLIiwiayIsIlQiLCJhTGVuIiwiaiIsInkiLCJzZXRQcm90b3R5cGVPZiIsImNoZWNrIiwidGVzdCIsImJ1Z2d5IiwiY2xhc3NvZiIsIkFSRyIsInRyeUdldCIsImNhbGxlZSIsImludm9rZSIsImFycmF5U2xpY2UiLCJmYWN0b3JpZXMiLCJjb25zdHJ1Y3QiLCJuIiwicGFydEFyZ3MiLCJib3VuZCIsInVuIiwiRlByb3RvIiwibmFtZVJFIiwiTkFNRSIsIm1hdGNoIiwiSEFTX0lOU1RBTkNFIiwiRnVuY3Rpb25Qcm90byIsIiRwYXJzZUludCIsInBhcnNlSW50IiwiJHRyaW0iLCJ0cmltIiwid3MiLCJoZXgiLCJzdHIiLCJyYWRpeCIsInNwYWNlcyIsInNwYWNlIiwibm9uIiwibHRyaW0iLCJSZWdFeHAiLCJydHJpbSIsImV4cG9ydGVyIiwiQUxJQVMiLCJGT1JDRSIsIlRZUEUiLCJyZXBsYWNlIiwiJHBhcnNlRmxvYXQiLCJwYXJzZUZsb2F0IiwiSW5maW5pdHkiLCJpbmhlcml0SWZSZXF1aXJlZCIsIk5VTUJFUiIsIiROdW1iZXIiLCJCYXNlIiwiQlJPS0VOX0NPRiIsIlRSSU0iLCJ0b051bWJlciIsImFyZ3VtZW50IiwidGhpcmQiLCJtYXhDb2RlIiwiZmlyc3QiLCJjaGFyQ29kZUF0IiwiTmFOIiwiY29kZSIsImRpZ2l0cyIsIkMiLCJhTnVtYmVyVmFsdWUiLCJyZXBlYXQiLCIkdG9GaXhlZCIsInRvRml4ZWQiLCJFUlJPUiIsIlpFUk8iLCJtdWx0aXBseSIsImMyIiwiZGl2aWRlIiwibnVtVG9TdHJpbmciLCJzIiwidCIsInBvdyIsImFjYyIsImxvZyIsIngyIiwiZnJhY3Rpb25EaWdpdHMiLCJ6IiwiUmFuZ2VFcnJvciIsIm1zZyIsImNvdW50IiwicmVzIiwiJHRvUHJlY2lzaW9uIiwidG9QcmVjaXNpb24iLCJwcmVjaXNpb24iLCJFUFNJTE9OIiwiX2lzRmluaXRlIiwiaXNGaW5pdGUiLCJpc0ludGVnZXIiLCJhYnMiLCJpc1NhZmVJbnRlZ2VyIiwiTUFYX1NBRkVfSU5URUdFUiIsIk1JTl9TQUZFX0lOVEVHRVIiLCJOdW1iZXIiLCJsb2cxcCIsInNxcnQiLCIkYWNvc2giLCJhY29zaCIsIk1BWF9WQUxVRSIsIkxOMiIsImFzaW5oIiwiJGFzaW5oIiwiJGF0YW5oIiwiYXRhbmgiLCJzaWduIiwiY2JydCIsImNsejMyIiwiTE9HMkUiLCJjb3NoIiwiJGV4cG0xIiwiZXhwbTEiLCJFUFNJTE9OMzIiLCJNQVgzMiIsIk1JTjMyIiwicm91bmRUaWVzVG9FdmVuIiwiZnJvdW5kIiwiJGFicyIsIiRzaWduIiwiaHlwb3QiLCJ2YWx1ZTEiLCJ2YWx1ZTIiLCJkaXYiLCJzdW0iLCJsYXJnIiwiJGltdWwiLCJpbXVsIiwiVUlOVDE2IiwieG4iLCJ5biIsInhsIiwieWwiLCJsb2cxMCIsIkxOMTAiLCJsb2cyIiwic2luaCIsInRhbmgiLCJ0cnVuYyIsImZyb21DaGFyQ29kZSIsIiRmcm9tQ29kZVBvaW50IiwiZnJvbUNvZGVQb2ludCIsInJhdyIsImNhbGxTaXRlIiwidHBsIiwiJGF0IiwiaXRlcmF0ZWQiLCJfdCIsInBvaW50IiwicG9zIiwiSXRlcmF0b3JzIiwiJGl0ZXJDcmVhdGUiLCJJVEVSQVRPUiIsIkJVR0dZIiwiRkZfSVRFUkFUT1IiLCJLRVlTIiwiVkFMVUVTIiwicmV0dXJuVGhpcyIsIkNvbnN0cnVjdG9yIiwiREVGQVVMVCIsIklTX1NFVCIsIkZPUkNFRCIsIm1ldGhvZHMiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldE1ldGhvZCIsIkRFRl9WQUxVRVMiLCJWQUxVRVNfQlVHIiwiJG5hdGl2ZSIsIiRkZWZhdWx0IiwiJGVudHJpZXMiLCIkYW55TmF0aXZlIiwiY29kZVBvaW50QXQiLCJFTkRTX1dJVEgiLCIkZW5kc1dpdGgiLCJlbmRzV2l0aCIsInNlYXJjaFN0cmluZyIsImVuZFBvc2l0aW9uIiwiZW5kIiwic2VhcmNoIiwiaXNSZWdFeHAiLCJNQVRDSCIsInJlIiwiSU5DTFVERVMiLCJpbmNsdWRlcyIsIlNUQVJUU19XSVRIIiwiJHN0YXJ0c1dpdGgiLCJzdGFydHNXaXRoIiwiY3JlYXRlSFRNTCIsInF1b3QiLCJhdHRyaWJ1dGUiLCJwMSIsImNvbG9yIiwidXJsIiwibm93IiwiRGF0ZSIsImdldFRpbWUiLCJ0b0pTT04iLCJ0b0lTT1N0cmluZyIsInB2IiwibHoiLCJudW0iLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01pbGxpc2Vjb25kcyIsImdldFVUQ01vbnRoIiwiZ2V0VVRDRGF0ZSIsImdldFVUQ0hvdXJzIiwiZ2V0VVRDTWludXRlcyIsImdldFVUQ1NlY29uZHMiLCJEYXRlUHJvdG8iLCJJTlZBTElEX0RBVEUiLCJoaW50IiwiaXNBcnJheUl0ZXIiLCJjcmVhdGVQcm9wZXJ0eSIsImdldEl0ZXJGbiIsIml0ZXIiLCJmcm9tIiwiYXJyYXlMaWtlIiwic3RlcCIsIm1hcGZuIiwibWFwcGluZyIsIml0ZXJGbiIsInJldCIsIkFycmF5UHJvdG8iLCJnZXRJdGVyYXRvck1ldGhvZCIsIlNBRkVfQ0xPU0lORyIsInJpdGVyIiwic2tpcENsb3NpbmciLCJhcnIiLCJvZiIsImFycmF5Sm9pbiIsInNlcGFyYXRvciIsIm1ldGhvZCIsImh0bWwiLCJiZWdpbiIsImtsYXNzIiwic3RhcnQiLCJ1cFRvIiwiY2xvbmVkIiwiJHNvcnQiLCJzb3J0IiwiY29tcGFyZWZuIiwiJGZvckVhY2giLCJTVFJJQ1QiLCJjYWxsYmFja2ZuIiwiYXNjIiwiSVNfTUFQIiwiSVNfRklMVEVSIiwiSVNfU09NRSIsIklTX0VWRVJZIiwiSVNfRklORF9JTkRFWCIsIk5PX0hPTEVTIiwic3BlY2llc0NvbnN0cnVjdG9yIiwib3JpZ2luYWwiLCJTUEVDSUVTIiwiJG1hcCIsIiRmaWx0ZXIiLCJmaWx0ZXIiLCIkc29tZSIsInNvbWUiLCIkZXZlcnkiLCJldmVyeSIsIiRyZWR1Y2UiLCJyZWR1Y2UiLCJtZW1vIiwiaXNSaWdodCIsInJlZHVjZVJpZ2h0IiwiJGluZGV4T2YiLCJORUdBVElWRV9aRVJPIiwic2VhcmNoRWxlbWVudCIsImxhc3RJbmRleE9mIiwiY29weVdpdGhpbiIsInRvIiwiaW5jIiwiVU5TQ09QQUJMRVMiLCJmaWxsIiwiZW5kUG9zIiwiJGZpbmQiLCJmb3JjZWQiLCJmaW5kIiwiZmluZEluZGV4IiwiYWRkVG9VbnNjb3BhYmxlcyIsIkFyZ3VtZW50cyIsIiRmbGFncyIsIiRSZWdFeHAiLCJyZTEiLCJyZTIiLCJDT1JSRUNUX05FVyIsInRpUkUiLCJwaVJFIiwiZmlVIiwicHJveHkiLCJpZ25vcmVDYXNlIiwibXVsdGlsaW5lIiwidW5pY29kZSIsInN0aWNreSIsImRlZmluZSIsImZsYWdzIiwiJG1hdGNoIiwicmVnZXhwIiwiU1lNQk9MIiwiZm5zIiwic3RyZm4iLCJyeGZuIiwiUkVQTEFDRSIsIiRyZXBsYWNlIiwic2VhcmNoVmFsdWUiLCJyZXBsYWNlVmFsdWUiLCJTRUFSQ0giLCIkc2VhcmNoIiwiU1BMSVQiLCIkc3BsaXQiLCJfc3BsaXQiLCIkcHVzaCIsIiRTUExJVCIsIkxFTkdUSCIsIkxBU1RfSU5ERVgiLCJOUENHIiwibGltaXQiLCJzZXBhcmF0b3IyIiwibGFzdEluZGV4IiwibGFzdExlbmd0aCIsIm91dHB1dCIsImxhc3RMYXN0SW5kZXgiLCJzcGxpdExpbWl0Iiwic2VwYXJhdG9yQ29weSIsIkludGVybmFsIiwiR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5IiwiV3JhcHBlciIsImFuSW5zdGFuY2UiLCJmb3JPZiIsInRhc2siLCJtaWNyb3Rhc2siLCJQUk9NSVNFIiwicHJvY2VzcyIsIiRQcm9taXNlIiwiaXNOb2RlIiwicHJvbWlzZSIsIkZha2VQcm9taXNlIiwiUHJvbWlzZVJlamVjdGlvbkV2ZW50IiwidGhlbiIsInNhbWVDb25zdHJ1Y3RvciIsImlzVGhlbmFibGUiLCJuZXdQcm9taXNlQ2FwYWJpbGl0eSIsIlByb21pc2VDYXBhYmlsaXR5IiwiJCRyZXNvbHZlIiwiJCRyZWplY3QiLCJwZXJmb3JtIiwibm90aWZ5IiwiaXNSZWplY3QiLCJfbiIsImNoYWluIiwiX2MiLCJfdiIsIm9rIiwiX3MiLCJydW4iLCJyZWFjdGlvbiIsImhhbmRsZXIiLCJmYWlsIiwiZG9tYWluIiwiX2giLCJvbkhhbmRsZVVuaGFuZGxlZCIsImVudGVyIiwiZXhpdCIsIm9uVW5oYW5kbGVkIiwiYWJydXB0IiwiY29uc29sZSIsImlzVW5oYW5kbGVkIiwiZW1pdCIsIm9udW5oYW5kbGVkcmVqZWN0aW9uIiwicmVhc29uIiwib25yZWplY3Rpb25oYW5kbGVkIiwiJHJlamVjdCIsIl9kIiwiX3ciLCIkcmVzb2x2ZSIsIndyYXBwZXIiLCJleGVjdXRvciIsIm9uRnVsZmlsbGVkIiwib25SZWplY3RlZCIsImNhdGNoIiwiciIsImNhcGFiaWxpdHkiLCJhbGwiLCJpdGVyYWJsZSIsInJlbWFpbmluZyIsIiRpbmRleCIsImFscmVhZHlDYWxsZWQiLCJyYWNlIiwiZm9yYmlkZGVuRmllbGQiLCJCUkVBSyIsIlJFVFVSTiIsImRlZmVyIiwiY2hhbm5lbCIsInBvcnQiLCJjZWwiLCJzZXRUYXNrIiwic2V0SW1tZWRpYXRlIiwiY2xlYXJUYXNrIiwiY2xlYXJJbW1lZGlhdGUiLCJNZXNzYWdlQ2hhbm5lbCIsImNvdW50ZXIiLCJxdWV1ZSIsIk9OUkVBRFlTVEFURUNIQU5HRSIsImxpc3RlbmVyIiwiZXZlbnQiLCJuZXh0VGljayIsInBvcnQyIiwicG9ydDEiLCJvbm1lc3NhZ2UiLCJwb3N0TWVzc2FnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbXBvcnRTY3JpcHRzIiwicmVtb3ZlQ2hpbGQiLCJzZXRUaW1lb3V0IiwibWFjcm90YXNrIiwiT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsImhlYWQiLCJsYXN0IiwiZmx1c2giLCJ0b2dnbGUiLCJub2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJvYnNlcnZlIiwiY2hhcmFjdGVyRGF0YSIsInN0cm9uZyIsImVudHJ5IiwiZ2V0RW50cnkiLCJ2IiwicmVkZWZpbmVBbGwiLCIkaXRlckRlZmluZSIsInNldFNwZWNpZXMiLCJTSVpFIiwiX2YiLCJnZXRDb25zdHJ1Y3RvciIsIkFEREVSIiwiX2wiLCJkZWxldGUiLCJwcmV2Iiwic2V0U3Ryb25nIiwiJGl0ZXJEZXRlY3QiLCJjb21tb24iLCJJU19XRUFLIiwiZml4TWV0aG9kIiwiSEFTTlRfQ0hBSU5JTkciLCJUSFJPV1NfT05fUFJJTUlUSVZFUyIsIkFDQ0VQVF9JVEVSQUJMRVMiLCJCVUdHWV9aRVJPIiwiJGluc3RhbmNlIiwiSW50ZXJuYWxNYXAiLCJlYWNoIiwid2VhayIsInVuY2F1Z2h0RnJvemVuU3RvcmUiLCJ1ZnN0b3JlIiwidG1wIiwiJFdlYWtNYXAiLCJmcmVlemUiLCJjcmVhdGVBcnJheU1ldGhvZCIsIiRoYXMiLCJhcnJheUZpbmQiLCJhcnJheUZpbmRJbmRleCIsIlVuY2F1Z2h0RnJvemVuU3RvcmUiLCJmaW5kVW5jYXVnaHRGcm96ZW4iLCIkdHlwZWQiLCJBcnJheUJ1ZmZlciIsIiRBcnJheUJ1ZmZlciIsIiREYXRhVmlldyIsIkRhdGFWaWV3IiwiJGlzVmlldyIsIkFCViIsImlzVmlldyIsIiRzbGljZSIsIlZJRVciLCJBUlJBWV9CVUZGRVIiLCJDT05TVFIiLCJieXRlTGVuZ3RoIiwiZmluYWwiLCJ2aWV3UyIsInZpZXdUIiwic2V0VWludDgiLCJnZXRVaW50OCIsIlR5cGVkIiwiVFlQRUQiLCJUeXBlZEFycmF5Q29uc3RydWN0b3JzIiwiYXJyYXlGaWxsIiwiREFUQV9WSUVXIiwiV1JPTkdfTEVOR1RIIiwiV1JPTkdfSU5ERVgiLCJCYXNlQnVmZmVyIiwiQlVGRkVSIiwiQllURV9MRU5HVEgiLCJCWVRFX09GRlNFVCIsIiRCVUZGRVIiLCIkTEVOR1RIIiwiJE9GRlNFVCIsInBhY2tJRUVFNzU0IiwibUxlbiIsIm5CeXRlcyIsImVMZW4iLCJlTWF4IiwiZUJpYXMiLCJydCIsInVucGFja0lFRUU3NTQiLCJuQml0cyIsInVucGFja0kzMiIsImJ5dGVzIiwicGFja0k4IiwicGFja0kxNiIsInBhY2tJMzIiLCJwYWNrRjY0IiwicGFja0YzMiIsImFkZEdldHRlciIsImludGVybmFsIiwidmlldyIsImlzTGl0dGxlRW5kaWFuIiwibnVtSW5kZXgiLCJpbnRJbmRleCIsIl9iIiwicGFjayIsInJldmVyc2UiLCJjb252ZXJzaW9uIiwidmFsaWRhdGVBcnJheUJ1ZmZlckFyZ3VtZW50cyIsIm51bWJlckxlbmd0aCIsIkFycmF5QnVmZmVyUHJvdG8iLCIkc2V0SW50OCIsInNldEludDgiLCJnZXRJbnQ4IiwiYnl0ZU9mZnNldCIsImJ1ZmZlckxlbmd0aCIsImdldEludDE2IiwiZ2V0VWludDE2IiwiZ2V0SW50MzIiLCJnZXRVaW50MzIiLCJnZXRGbG9hdDMyIiwiZ2V0RmxvYXQ2NCIsInNldEludDE2Iiwic2V0VWludDE2Iiwic2V0SW50MzIiLCJzZXRVaW50MzIiLCJzZXRGbG9hdDMyIiwic2V0RmxvYXQ2NCIsImluaXQiLCIkYnVmZmVyIiwicHJvcGVydHlEZXNjIiwic2FtZSIsImNyZWF0ZUFycmF5SW5jbHVkZXMiLCJBcnJheUl0ZXJhdG9ycyIsImFycmF5Q29weVdpdGhpbiIsIlNIQVJFRF9CVUZGRVIiLCJCWVRFU19QRVJfRUxFTUVOVCIsImFycmF5Rm9yRWFjaCIsImFycmF5RmlsdGVyIiwiYXJyYXlTb21lIiwiYXJyYXlFdmVyeSIsImFycmF5SW5jbHVkZXMiLCJhcnJheVZhbHVlcyIsImFycmF5S2V5cyIsImFycmF5RW50cmllcyIsImFycmF5TGFzdEluZGV4T2YiLCJhcnJheVJlZHVjZSIsImFycmF5UmVkdWNlUmlnaHQiLCJhcnJheVNvcnQiLCJhcnJheVRvU3RyaW5nIiwiYXJyYXlUb0xvY2FsZVN0cmluZyIsInRvTG9jYWxlU3RyaW5nIiwiVFlQRURfQ09OU1RSVUNUT1IiLCJERUZfQ09OU1RSVUNUT1IiLCJBTExfQ09OU1RSVUNUT1JTIiwiVFlQRURfQVJSQVkiLCJhbGxvY2F0ZSIsIkxJVFRMRV9FTkRJQU4iLCJVaW50MTZBcnJheSIsIkZPUkNFRF9TRVQiLCJzdHJpY3RUb0xlbmd0aCIsIlNBTUUiLCJ0b09mZnNldCIsIkJZVEVTIiwidmFsaWRhdGUiLCJzcGVjaWVzRnJvbUxpc3QiLCJsaXN0IiwiZnJvbUxpc3QiLCIkZnJvbSIsIiRvZiIsIlRPX0xPQ0FMRV9CVUciLCIkdG9Mb2NhbGVTdHJpbmciLCJwcmVkaWNhdGUiLCJtaWRkbGUiLCJzdWJhcnJheSIsIiRiZWdpbiIsIiRpdGVyYXRvcnMiLCJpc1RBSW5kZXgiLCIkZ2V0RGVzYyIsIiRzZXREZXNjIiwiZGVzYyIsIiRUeXBlZEFycmF5UHJvdG90eXBlJCIsIkNMQU1QRUQiLCJJU05UX1VJTlQ4IiwiR0VUVEVSIiwiU0VUVEVSIiwiVHlwZWRBcnJheSIsIlRBQyIsIlR5cGVkQXJyYXlQcm90b3R5cGUiLCJnZXR0ZXIiLCJvIiwicm91bmQiLCJhZGRFbGVtZW50IiwiJG9mZnNldCIsIiRsZW5ndGgiLCIkbGVuIiwiJG5hdGl2ZUl0ZXJhdG9yIiwiQ09SUkVDVF9JVEVSX05BTUUiLCIkaXRlcmF0b3IiLCJyQXBwbHkiLCJmQXBwbHkiLCJ0aGlzQXJndW1lbnQiLCJhcmd1bWVudHNMaXN0IiwiTCIsInJDb25zdHJ1Y3QiLCJORVdfVEFSR0VUX0JVRyIsIkFSR1NfQlVHIiwiVGFyZ2V0IiwibmV3VGFyZ2V0IiwiJGFyZ3MiLCJhdHRyaWJ1dGVzIiwiZGVsZXRlUHJvcGVydHkiLCJFbnVtZXJhdGUiLCJlbnVtZXJhdGUiLCJyZWNlaXZlciIsImdldFByb3RvIiwiViIsImV4aXN0aW5nRGVzY3JpcHRvciIsIm93bkRlc2MiLCJzZXRQcm90byIsIiRpbmNsdWRlcyIsImF0IiwiJHBhZCIsInBhZFN0YXJ0IiwibWF4TGVuZ3RoIiwiZmlsbFN0cmluZyIsImxlZnQiLCJzdHJpbmdMZW5ndGgiLCJmaWxsU3RyIiwiaW50TWF4TGVuZ3RoIiwiZmlsbExlbiIsInN0cmluZ0ZpbGxlciIsInBhZEVuZCIsImdldEZsYWdzIiwiUmVnRXhwUHJvdG8iLCIkUmVnRXhwU3RyaW5nSXRlcmF0b3IiLCJfciIsIm1hdGNoQWxsIiwicngiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZ2V0RGVzYyIsIiR2YWx1ZXMiLCJpc0VudHJpZXMiLCJfX2RlZmluZUdldHRlcl9fIiwiX19kZWZpbmVTZXR0ZXJfXyIsIl9fbG9va3VwR2V0dGVyX18iLCJfX2xvb2t1cFNldHRlcl9fIiwiaXNFcnJvciIsImlhZGRoIiwieDAiLCJ4MSIsInkwIiwieTEiLCIkeDAiLCIkeDEiLCIkeTAiLCJpc3ViaCIsImltdWxoIiwidSIsIiR1IiwiJHYiLCJ1MCIsInYwIiwidTEiLCJ2MSIsInVtdWxoIiwidG9NZXRhS2V5Iiwib3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSIsImdldE9yQ3JlYXRlTWV0YWRhdGFNYXAiLCJvcmRpbmFyeUhhc093bk1ldGFkYXRhIiwib3JkaW5hcnlHZXRPd25NZXRhZGF0YSIsIm9yZGluYXJ5T3duTWV0YWRhdGFLZXlzIiwib3JkaW5hcnlHZXRNZXRhZGF0YSIsIm9yZGluYXJ5TWV0YWRhdGFLZXlzIiwib0tleXMiLCJwS2V5cyIsIm9yZGluYXJ5SGFzTWV0YWRhdGEiLCJhc2FwIiwiT0JTRVJWQUJMRSIsImNsZWFudXBTdWJzY3JpcHRpb24iLCJjbGVhbnVwIiwic3Vic2NyaXB0aW9uQ2xvc2VkIiwiX28iLCJjbG9zZVN1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbk9ic2VydmVyIiwiJE9ic2VydmFibGUiLCJpdGVtcyIsInBhcnRpYWwiLCJuYXZpZ2F0b3IiLCJNU0lFIiwidXNlckFnZW50IiwidGltZSIsInNldEludGVydmFsIiwicGF0aCIsInBhcmdzIiwiaG9sZGVyIiwiJHRhc2siLCJUT19TVFJJTkdfVEFHIiwiQXJyYXlWYWx1ZXMiLCJjb2xsZWN0aW9ucyIsIkNvbGxlY3Rpb24iLCJEaWN0IiwiZGljdCIsImlzSXRlcmFibGUiLCJmaW5kS2V5IiwiaXNEaWN0IiwiY3JlYXRlRGljdE1ldGhvZCIsImNyZWF0ZURpY3RJdGVyIiwiRGljdEl0ZXJhdG9yIiwibWFwUGFpcnMiLCJnZXRJdGVyYXRvciIsImRlbGF5IiwicGFydCIsIm1peGluIiwibWFrZSIsIiRyZSIsImVzY2FwZSIsInJlZ0V4cCIsIiYiLCI8IiwiPiIsIlwiIiwiJyIsImVzY2FwZUhUTUwiLCImYW1wOyIsIiZsdDsiLCImZ3Q7IiwiJnF1b3Q7IiwiJmFwb3M7IiwidW5lc2NhcGVIVE1MIiwiU3ViamVjdF8xIiwiT3BlcmF0b3JfMSIsIk9wZXJhdG9yIiwiQXN5bmNTdWJqZWN0XzEiLCJBc3luY1N1YmplY3QiLCJSZXBsYXlTdWJqZWN0XzEiLCJSZXBsYXlTdWJqZWN0IiwiQmVoYXZpb3JTdWJqZWN0XzEiLCJCZWhhdmlvclN1YmplY3QiLCJDb25uZWN0YWJsZU9ic2VydmFibGVfMSIsIkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSIsIk5vdGlmaWNhdGlvbl8xIiwiTm90aWZpY2F0aW9uIiwiRW1wdHlFcnJvcl8xIiwiRW1wdHlFcnJvciIsIkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEiLCJBcmd1bWVudE91dE9mUmFuZ2VFcnJvciIsImFzYXBfMSIsImFzeW5jXzEiLCJxdWV1ZV8xIiwiaXRlcmF0b3JfMSIsIlNjaGVkdWxlciIsImFzeW5jIiwicnhTdWJzY3JpYmVyIiwiJCRpdGVyYXRvciIsImJpbmRDYWxsYmFja18xIiwiYmluZENhbGxiYWNrIiwiQm91bmRDYWxsYmFja09ic2VydmFibGVfMSIsIkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlIiwiZGlzcGF0Y2giLCJzdGF0ZSIsImNhbGxiYWNrRnVuYyIsInNjaGVkdWxlciIsImhhbmRsZXJGbiIsImlubmVyQXJncyIsInNlbGVjdG9yIiwicmVzdWx0XzIiLCJzY2hlZHVsZSIsImRpc3BhdGNoRXJyb3IiLCJkaXNwYXRjaE5leHQiLCJyZXN1bHRfMSIsImhhc05leHQiLCJiaW5kTm9kZUNhbGxiYWNrXzEiLCJiaW5kTm9kZUNhbGxiYWNrIiwiQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlXzEiLCJCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUiLCJzaGlmdCIsImNvbWJpbmVMYXRlc3RfMSIsImNvbWJpbmVMYXRlc3QiLCJjb21iaW5lTGF0ZXN0U3RhdGljIiwib2JzZXJ2YWJsZXMiLCJwcm9qZWN0IiwicG9wIiwidW5zaGlmdCIsIkFycmF5T2JzZXJ2YWJsZV8xIiwiQXJyYXlPYnNlcnZhYmxlIiwiQ29tYmluZUxhdGVzdE9wZXJhdG9yIiwiaXNTY2hlZHVsZXJfMSIsImlzU2NoZWR1bGVyIiwiT3V0ZXJTdWJzY3JpYmVyXzEiLCJzdWJzY3JpYmVUb1Jlc3VsdF8xIiwiQ29tYmluZUxhdGVzdFN1YnNjcmliZXIiLCJhY3RpdmUiLCJ0b1Jlc3BvbmQiLCJzdWJzY3JpYmVUb1Jlc3VsdCIsIm5vdGlmeUNvbXBsZXRlIiwidW51c2VkIiwibm90aWZ5TmV4dCIsIm91dGVyVmFsdWUiLCJpbm5lclZhbHVlIiwib3V0ZXJJbmRleCIsImlubmVySW5kZXgiLCJpbm5lclN1YiIsImZvdW5kIiwiX3RyeVByb2plY3QiLCJPdXRlclN1YnNjcmliZXIiLCJTY2FsYXJPYnNlcnZhYmxlXzEiLCJFbXB0eU9ic2VydmFibGVfMSIsImFycmF5IiwiU2NhbGFyT2JzZXJ2YWJsZSIsIkVtcHR5T2JzZXJ2YWJsZSIsIm5vdGlmeUVycm9yIiwib3V0ZXJTdWJzY3JpYmVyIiwiSW5uZXJTdWJzY3JpYmVyXzEiLCJJbm5lclN1YnNjcmliZXIiLCJpc1Byb21pc2VfMSIsImlzUHJvbWlzZSIsIml0ZW0iLCJvYnMiLCJjb25jYXRfMSIsImNvbmNhdFN0YXRpYyIsIm1lcmdlQWxsXzEiLCJNZXJnZUFsbE9wZXJhdG9yIiwibWVyZ2VBbGwiLCJjb25jdXJyZW50IiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJNZXJnZUFsbFN1YnNjcmliZXIiLCJkZWZlcl8xIiwiRGVmZXJPYnNlcnZhYmxlXzEiLCJEZWZlck9ic2VydmFibGUiLCJvYnNlcnZhYmxlRmFjdG9yeSIsIkRlZmVyU3Vic2NyaWJlciIsImZhY3RvcnkiLCJ0cnlEZWZlciIsIl9jYWxsRmFjdG9yeSIsImVtcHR5XzEiLCJmb3JrSm9pbl8xIiwiZm9ya0pvaW4iLCJGb3JrSm9pbk9ic2VydmFibGVfMSIsIkZvcmtKb2luT2JzZXJ2YWJsZSIsInNvdXJjZXMiLCJyZXN1bHRTZWxlY3RvciIsIkZvcmtKb2luU3Vic2NyaWJlciIsImNvbXBsZXRlZCIsImhhdmVWYWx1ZXMiLCJ0b3RhbCIsImlubmVyU3Vic2NyaXB0aW9uIiwiX2hhc1ZhbHVlIiwiZnJvbV8xIiwiRnJvbU9ic2VydmFibGVfMSIsIkZyb21PYnNlcnZhYmxlIiwiUHJvbWlzZU9ic2VydmFibGVfMSIsIkl0ZXJhdG9yT2JzZXJ2YWJsZV8xIiwiQXJyYXlMaWtlT2JzZXJ2YWJsZV8xIiwib2JzZXJ2ZU9uXzEiLCJpc0FycmF5TGlrZSIsImlzaCIsIm1hcEZuT3JTY2hlZHVsZXIiLCJsYXN0U2NoZWR1bGVyIiwibWFwRm4iLCJQcm9taXNlT2JzZXJ2YWJsZSIsIkl0ZXJhdG9yT2JzZXJ2YWJsZSIsIkFycmF5TGlrZU9ic2VydmFibGUiLCJPYnNlcnZlT25TdWJzY3JpYmVyIiwiU3RyaW5nSXRlcmF0b3IiLCJBcnJheUl0ZXJhdG9yIiwibnVtYmVySXNGaW5pdGUiLCJtYXhTYWZlSW50ZWdlciIsInZhbHVlQXNOdW1iZXIiLCJoYXNFcnJvciIsImlkeCIsIm9ic2VydmVPbiIsIk9ic2VydmVPbk9wZXJhdG9yIiwibm90aWZpY2F0aW9uIiwic2NoZWR1bGVNZXNzYWdlIiwiT2JzZXJ2ZU9uTWVzc2FnZSIsImNyZWF0ZU5leHQiLCJjcmVhdGVFcnJvciIsImNyZWF0ZUNvbXBsZXRlIiwiZXhjZXB0aW9uIiwiaGFzVmFsdWUiLCJhY2NlcHQiLCJ0b09ic2VydmFibGUiLCJ1bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbiIsImNvbXBsZXRlTm90aWZpY2F0aW9uIiwiZnJvbUV2ZW50XzEiLCJmcm9tRXZlbnQiLCJGcm9tRXZlbnRPYnNlcnZhYmxlXzEiLCJGcm9tRXZlbnRPYnNlcnZhYmxlIiwiaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyIiwic291cmNlT2JqIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImlzSlF1ZXJ5U3R5bGVFdmVudEVtaXR0ZXIiLCJvbiIsIm9mZiIsImlzTm9kZUxpc3QiLCJpc0hUTUxDb2xsZWN0aW9uIiwiaXNFdmVudFRhcmdldCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJzZXR1cFN1YnNjcmlwdGlvbiIsImZyb21FdmVudFBhdHRlcm5fMSIsImZyb21FdmVudFBhdHRlcm4iLCJGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZV8xIiwiRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUiLCJhZGRIYW5kbGVyIiwicmVtb3ZlSGFuZGxlciIsImZyb21Qcm9taXNlXzEiLCJmcm9tUHJvbWlzZSIsImludGVydmFsXzEiLCJpbnRlcnZhbCIsIkludGVydmFsT2JzZXJ2YWJsZV8xIiwiSW50ZXJ2YWxPYnNlcnZhYmxlIiwiaXNOdW1lcmljXzEiLCJwZXJpb2QiLCJpc051bWVyaWMiLCJBc3luY1NjaGVkdWxlcl8xIiwiQXN5bmNTY2hlZHVsZXIiLCJGdXR1cmVBY3Rpb25fMSIsIlF1ZXVlU2NoZWR1bGVyXzEiLCJzY2hlZHVsZU5vdyIsIndvcmsiLCJGdXR1cmVBY3Rpb24iLCJRdWV1ZVNjaGVkdWxlciIsInBlbmRpbmciLCJleGVjdXRlIiwiX3NjaGVkdWxlIiwiY2xlYXJJbnRlcnZhbCIsImFjdGlvbnMiLCJRdWV1ZUFjdGlvbl8xIiwic2NoZWR1bGVkSWQiLCJhY3Rpb24iLCJzY2hlZHVsZUxhdGVyIiwiUXVldWVBY3Rpb24iLCJtZXJnZV8xIiwibWVyZ2UiLCJtZXJnZVN0YXRpYyIsInJhY2VfMSIsInJhY2VTdGF0aWMiLCJSYWNlT3BlcmF0b3IiLCJSYWNlU3Vic2NyaWJlciIsImhhc0ZpcnN0IiwibmV2ZXJfMSIsIm5ldmVyIiwiTmV2ZXJPYnNlcnZhYmxlXzEiLCJOZXZlck9ic2VydmFibGUiLCJub29wXzEiLCJub29wIiwib2ZfMSIsInJhbmdlXzEiLCJyYW5nZSIsIlJhbmdlT2JzZXJ2YWJsZV8xIiwiUmFuZ2VPYnNlcnZhYmxlIiwiX2NvdW50IiwidGhyb3dfMSIsIl90aHJvdyIsIkVycm9yT2JzZXJ2YWJsZV8xIiwiRXJyb3JPYnNlcnZhYmxlIiwidGltZXJfMSIsInRpbWVyIiwiVGltZXJPYnNlcnZhYmxlXzEiLCJUaW1lck9ic2VydmFibGUiLCJpc0RhdGVfMSIsImR1ZVRpbWUiLCJpc0RhdGUiLCJpbml0aWFsRGVsYXkiLCJ6aXBfMSIsInppcCIsInppcFN0YXRpYyIsInppcFByb3RvIiwiWmlwT3BlcmF0b3IiLCJaaXBTdWJzY3JpYmVyIiwiaXRlcmF0b3JzIiwiU3RhdGljQXJyYXlJdGVyYXRvciIsIlN0YXRpY0l0ZXJhdG9yIiwiWmlwQnVmZmVySXRlcmF0b3IiLCJzdGlsbFVuc3Vic2NyaWJlZCIsIm5vdGlmeUluYWN0aXZlIiwiY2hlY2tJdGVyYXRvcnMiLCJzaG91bGRDb21wbGV0ZSIsIm5leHRSZXN1bHQiLCJpc0NvbXBsZXRlIiwiYnVmZmVyXzEiLCJjbG9zaW5nTm90aWZpZXIiLCJCdWZmZXJPcGVyYXRvciIsIkJ1ZmZlclN1YnNjcmliZXIiLCJidWZmZXJDb3VudF8xIiwiYnVmZmVyQ291bnQiLCJidWZmZXJTaXplIiwic3RhcnRCdWZmZXJFdmVyeSIsIkJ1ZmZlckNvdW50T3BlcmF0b3IiLCJCdWZmZXJDb3VudFN1YnNjcmliZXIiLCJidWZmZXJzIiwiYnVmZmVyVGltZV8xIiwiYnVmZmVyVGltZSIsImJ1ZmZlclRpbWVTcGFuIiwiYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCIsIkJ1ZmZlclRpbWVPcGVyYXRvciIsImRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5IiwicHJldkJ1ZmZlciIsImNsb3NlQnVmZmVyIiwib3BlbkJ1ZmZlciIsImRpc3BhdGNoQnVmZmVyQ3JlYXRpb24iLCJkaXNwYXRjaEJ1ZmZlckNsb3NlIiwiQnVmZmVyVGltZVN1YnNjcmliZXIiLCJjbG9zZVN0YXRlIiwiY3JlYXRpb25TdGF0ZSIsInRpbWVTcGFuT25seVN0YXRlIiwiYnVmZmVyVG9nZ2xlXzEiLCJidWZmZXJUb2dnbGUiLCJvcGVuaW5ncyIsImNsb3NpbmdTZWxlY3RvciIsIkJ1ZmZlclRvZ2dsZU9wZXJhdG9yIiwiQnVmZmVyVG9nZ2xlU3Vic2NyaWJlciIsImNvbnRleHRzIiwidHJ5U3Vic2NyaWJlIiwiYnVmZmVyV2hlbl8xIiwiYnVmZmVyV2hlbiIsIkJ1ZmZlcldoZW5PcGVyYXRvciIsIkJ1ZmZlcldoZW5TdWJzY3JpYmVyIiwic3Vic2NyaWJpbmciLCJjbG9zaW5nU3Vic2NyaXB0aW9uIiwiY2FjaGVfMSIsImNhY2hlIiwid2luZG93VGltZSIsInB1Ymxpc2hSZXBsYXlfMSIsInB1Ymxpc2hSZXBsYXkiLCJyZWZDb3VudCIsIm11bHRpY2FzdF8xIiwibXVsdGljYXN0IiwiZXZlbnRzIiwiX3dpbmRvd1RpbWUiLCJfZ2V0Tm93IiwiUmVwbGF5RXZlbnQiLCJfdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMiLCJldmVudHNDb3VudCIsInNwbGljZUNvdW50Iiwic3ViamVjdE9yU3ViamVjdEZhY3RvcnkiLCJzdWJqZWN0RmFjdG9yeSIsImdldFN1YmplY3QiLCJjb25uZWN0IiwiQ29ubmVjdGFibGVTdWJzY3JpcHRpb24iLCJSZWZDb3VudE9ic2VydmFibGUiLCJfY2xvc2VTdWJzY3JpcHRpb24iLCJjb25uZWN0YWJsZSIsInJlZkNvdW50U3Vic2NyaWJlciIsIlJlZkNvdW50U3Vic2NyaWJlciIsImNvbm5lY3Rpb24iLCJyZWZDb3VudE9ic2VydmFibGUiLCJfcmVzZXRDb25uZWN0YWJsZSIsIm9ic0Nvbm5lY3Rpb24iLCJzdWJDb25uZWN0aW9uIiwiY2F0Y2hfMSIsIl9jYXRjaCIsIkNhdGNoT3BlcmF0b3IiLCJjYXVnaHQiLCJDYXRjaFN1YnNjcmliZXIiLCJfaW5uZXJTdWIiLCJjb21iaW5lQWxsXzEiLCJjb21iaW5lQWxsIiwiY29uY2F0QWxsXzEiLCJjb25jYXRBbGwiLCJjb25jYXRNYXBfMSIsImNvbmNhdE1hcCIsIm1lcmdlTWFwXzEiLCJNZXJnZU1hcE9wZXJhdG9yIiwibWVyZ2VNYXAiLCJNZXJnZU1hcFN1YnNjcmliZXIiLCJfdHJ5TmV4dCIsIl9ub3RpZnlSZXN1bHRTZWxlY3RvciIsImNvbmNhdE1hcFRvXzEiLCJjb25jYXRNYXBUbyIsImlubmVyT2JzZXJ2YWJsZSIsIm1lcmdlTWFwVG9fMSIsIk1lcmdlTWFwVG9PcGVyYXRvciIsIm1lcmdlTWFwVG8iLCJNZXJnZU1hcFRvU3Vic2NyaWJlciIsInRyeVNlbGVjdFJlc3VsdCIsImNvdW50XzEiLCJDb3VudE9wZXJhdG9yIiwiQ291bnRTdWJzY3JpYmVyIiwiX3RyeVByZWRpY2F0ZSIsImRlbWF0ZXJpYWxpemVfMSIsImRlbWF0ZXJpYWxpemUiLCJEZU1hdGVyaWFsaXplT3BlcmF0b3IiLCJEZU1hdGVyaWFsaXplU3Vic2NyaWJlciIsImRlYm91bmNlXzEiLCJkZWJvdW5jZSIsImR1cmF0aW9uU2VsZWN0b3IiLCJEZWJvdW5jZU9wZXJhdG9yIiwiRGVib3VuY2VTdWJzY3JpYmVyIiwiZHVyYXRpb25TdWJzY3JpcHRpb24iLCJlbWl0VmFsdWUiLCJkdXJhdGlvbiIsImRlYm91bmNlVGltZV8xIiwiZGVib3VuY2VUaW1lIiwiRGVib3VuY2VUaW1lT3BlcmF0b3IiLCJkZWJvdW5jZWROZXh0IiwiRGVib3VuY2VUaW1lU3Vic2NyaWJlciIsImRlYm91bmNlZFN1YnNjcmlwdGlvbiIsImxhc3RWYWx1ZSIsImNsZWFyRGVib3VuY2UiLCJkZWZhdWx0SWZFbXB0eV8xIiwiZGVmYXVsdElmRW1wdHkiLCJkZWZhdWx0VmFsdWUiLCJEZWZhdWx0SWZFbXB0eU9wZXJhdG9yIiwiRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyIiwiaXNFbXB0eSIsImRlbGF5XzEiLCJhYnNvbHV0ZURlbGF5IiwiZGVsYXlGb3IiLCJEZWxheU9wZXJhdG9yIiwiRGVsYXlTdWJzY3JpYmVyIiwiZXJyb3JlZCIsInNjaGVkdWxlTm90aWZpY2F0aW9uIiwiRGVsYXlNZXNzYWdlIiwiZGVsYXlXaGVuXzEiLCJkZWxheVdoZW4iLCJkZWxheUR1cmF0aW9uU2VsZWN0b3IiLCJzdWJzY3JpcHRpb25EZWxheSIsIlN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSIsIkRlbGF5V2hlbk9wZXJhdG9yIiwiRGVsYXlXaGVuU3Vic2NyaWJlciIsImRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zIiwicmVtb3ZlU3Vic2NyaXB0aW9uIiwidHJ5Q29tcGxldGUiLCJkZWxheU5vdGlmaWVyIiwidHJ5RGVsYXkiLCJzdWJzY3JpcHRpb25JZHgiLCJub3RpZmllclN1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlciIsInNvdXJjZVN1YnNjcmliZWQiLCJzdWJzY3JpYmVUb1NvdXJjZSIsImRpc3RpbmN0VW50aWxDaGFuZ2VkXzEiLCJkaXN0aW5jdFVudGlsQ2hhbmdlZCIsImNvbXBhcmUiLCJrZXlTZWxlY3RvciIsIkRpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IiLCJEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIiLCJoYXNLZXkiLCJkb18xIiwiX2RvIiwiRG9PcGVyYXRvciIsIkRvU3Vic2NyaWJlciIsInNhZmVTdWJzY3JpYmVyIiwiZXhwYW5kXzEiLCJleHBhbmQiLCJFeHBhbmRPcGVyYXRvciIsIkV4cGFuZFN1YnNjcmliZXIiLCJzdWJzY3JpYmVUb1Byb2plY3Rpb24iLCJmaWx0ZXJfMSIsIkZpbHRlck9wZXJhdG9yIiwiRmlsdGVyU3Vic2NyaWJlciIsImZpbmFsbHlfMSIsIl9maW5hbGx5IiwiZmluYWxseVNlbGVjdG9yIiwiRmluYWxseU9wZXJhdG9yIiwiRmluYWxseVN1YnNjcmliZXIiLCJmaXJzdF8xIiwiRmlyc3RPcGVyYXRvciIsIkZpcnN0U3Vic2NyaWJlciIsIl9lbWl0IiwiX3RyeVJlc3VsdFNlbGVjdG9yIiwiX2VtaXRGaW5hbCIsImdyb3VwQnlfMSIsImdyb3VwQnkiLCJlbGVtZW50U2VsZWN0b3IiLCJHcm91cEJ5T3BlcmF0b3IiLCJNYXBfMSIsIkZhc3RNYXBfMSIsIkdyb3VwQnlTdWJzY3JpYmVyIiwiZ3JvdXBzIiwiYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSIsIl9ncm91cCIsIkZhc3RNYXAiLCJncm91cCIsImdyb3VwZWRPYnNlcnZhYmxlIiwiR3JvdXBlZE9ic2VydmFibGUiLCJfc2VsZWN0RHVyYXRpb24iLCJfc2VsZWN0RWxlbWVudCIsInRyeUdyb3VwTmV4dCIsIkdyb3VwRHVyYXRpb25TdWJzY3JpYmVyIiwicmVtb3ZlR3JvdXAiLCJ0cnlFcnJvciIsImdyb3VwU3ViamVjdCIsInJlZkNvdW50U3Vic2NyaXB0aW9uIiwiSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbiIsIk1hcFBvbHlmaWxsXzEiLCJNYXBQb2x5ZmlsbCIsImNiIiwiaWdub3JlRWxlbWVudHNfMSIsImlnbm9yZUVsZW1lbnRzIiwiSWdub3JlRWxlbWVudHNPcGVyYXRvciIsIklnbm9yZUVsZW1lbnRzU3Vic2NyaWJlciIsImF1ZGl0XzEiLCJhdWRpdCIsIkF1ZGl0T3BlcmF0b3IiLCJBdWRpdFN1YnNjcmliZXIiLCJ0aHJvdHRsZWQiLCJjbGVhclRocm90dGxlIiwiYXVkaXRUaW1lXzEiLCJhdWRpdFRpbWUiLCJBdWRpdFRpbWVPcGVyYXRvciIsIkF1ZGl0VGltZVN1YnNjcmliZXIiLCJsYXN0XzEiLCJMYXN0T3BlcmF0b3IiLCJMYXN0U3Vic2NyaWJlciIsImxldF8xIiwibGV0UHJvdG8iLCJsZXRCaW5kIiwiZnVuYyIsImV2ZXJ5XzEiLCJFdmVyeU9wZXJhdG9yIiwiRXZlcnlTdWJzY3JpYmVyIiwiZXZlcnlWYWx1ZU1hdGNoIiwibWFwXzEiLCJNYXBPcGVyYXRvciIsIk1hcFN1YnNjcmliZXIiLCJtYXBUb18xIiwibWFwVG8iLCJNYXBUb09wZXJhdG9yIiwiTWFwVG9TdWJzY3JpYmVyIiwibWF0ZXJpYWxpemVfMSIsIm1hdGVyaWFsaXplIiwiTWF0ZXJpYWxpemVPcGVyYXRvciIsIk1hdGVyaWFsaXplU3Vic2NyaWJlciIsImZsYXRNYXAiLCJmbGF0TWFwVG8iLCJwYXJ0aXRpb25fMSIsInBhcnRpdGlvbiIsIm5vdF8xIiwibm90IiwicHJlZCIsIm5vdFByZWQiLCJwbHVja18xIiwicGx1Y2siLCJwcm9wZXJ0aWVzIiwicGx1Y2tlciIsInByb3BzIiwibWFwcGVyIiwiY3VycmVudFByb3AiLCJwdWJsaXNoXzEiLCJwdWJsaXNoIiwicHVibGlzaEJlaGF2aW9yXzEiLCJwdWJsaXNoQmVoYXZpb3IiLCJfdmFsdWUiLCJnZXRWYWx1ZSIsInB1Ymxpc2hMYXN0XzEiLCJwdWJsaXNoTGFzdCIsInJlZHVjZV8xIiwic2VlZCIsIlJlZHVjZU9wZXJhdG9yIiwiUmVkdWNlU3Vic2NyaWJlciIsImhhc1NlZWQiLCJfdHJ5UmVkdWNlIiwicmVwZWF0XzEiLCJSZXBlYXRPcGVyYXRvciIsIlJlcGVhdFN1YnNjcmliZXIiLCJyZXRyeV8xIiwicmV0cnkiLCJSZXRyeU9wZXJhdG9yIiwiUmV0cnlTdWJzY3JpYmVyIiwicmV0cnlXaGVuXzEiLCJyZXRyeVdoZW4iLCJub3RpZmllciIsIlJldHJ5V2hlbk9wZXJhdG9yIiwiUmV0cnlXaGVuU3Vic2NyaWJlciIsInJldHJpZXMiLCJyZXRyaWVzU3Vic2NyaXB0aW9uIiwic2FtcGxlXzEiLCJzYW1wbGUiLCJTYW1wbGVPcGVyYXRvciIsIlNhbXBsZVN1YnNjcmliZXIiLCJzYW1wbGVUaW1lXzEiLCJzYW1wbGVUaW1lIiwiU2FtcGxlVGltZU9wZXJhdG9yIiwiZGlzcGF0Y2hOb3RpZmljYXRpb24iLCJTYW1wbGVUaW1lU3Vic2NyaWJlciIsInNjYW5fMSIsInNjYW4iLCJhY2N1bXVsYXRvciIsIlNjYW5PcGVyYXRvciIsIlNjYW5TdWJzY3JpYmVyIiwiYWNjdW11bGF0b3JTZXQiLCJfc2VlZCIsInNoYXJlXzEiLCJzaGFyZSIsInNoYXJlU3ViamVjdEZhY3RvcnkiLCJzaW5nbGVfMSIsInNpbmdsZSIsIlNpbmdsZU9wZXJhdG9yIiwiU2luZ2xlU3Vic2NyaWJlciIsInNlZW5WYWx1ZSIsImFwcGx5U2luZ2xlVmFsdWUiLCJzaW5nbGVWYWx1ZSIsInRyeU5leHQiLCJza2lwXzEiLCJza2lwIiwiU2tpcE9wZXJhdG9yIiwiU2tpcFN1YnNjcmliZXIiLCJza2lwVW50aWxfMSIsInNraXBVbnRpbCIsIlNraXBVbnRpbE9wZXJhdG9yIiwiU2tpcFVudGlsU3Vic2NyaWJlciIsImlzSW5uZXJTdG9wcGVkIiwic2tpcFdoaWxlXzEiLCJza2lwV2hpbGUiLCJTa2lwV2hpbGVPcGVyYXRvciIsIlNraXBXaGlsZVN1YnNjcmliZXIiLCJza2lwcGluZyIsInRyeUNhbGxQcmVkaWNhdGUiLCJzdGFydFdpdGhfMSIsInN0YXJ0V2l0aCIsInN1YnNjcmliZU9uXzEiLCJzdWJzY3JpYmVPbiIsIlN1YnNjcmliZU9uT2JzZXJ2YWJsZV8xIiwiU3Vic2NyaWJlT25PYnNlcnZhYmxlIiwiZGVsYXlUaW1lIiwiQXNhcFNjaGVkdWxlcl8xIiwiQXNhcFNjaGVkdWxlciIsIkFzYXBBY3Rpb25fMSIsIkFzYXBBY3Rpb24iLCJJbW1lZGlhdGVfMSIsIkltbWVkaWF0ZSIsIkltbWVkaWF0ZURlZmluaXRpb24iLCJuZXh0SGFuZGxlIiwidGFza3NCeUhhbmRsZSIsImN1cnJlbnRseVJ1bm5pbmdBVGFzayIsImNhblVzZVByb2Nlc3NOZXh0VGljayIsImNyZWF0ZVByb2Nlc3NOZXh0VGlja1NldEltbWVkaWF0ZSIsImNhblVzZVBvc3RNZXNzYWdlIiwiY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGUiLCJjYW5Vc2VNZXNzYWdlQ2hhbm5lbCIsImNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlIiwiY2FuVXNlUmVhZHlTdGF0ZUNoYW5nZSIsImNyZWF0ZVJlYWR5U3RhdGVDaGFuZ2VTZXRJbW1lZGlhdGUiLCJjcmVhdGVTZXRUaW1lb3V0U2V0SW1tZWRpYXRlIiwiY2kiLCJoYW5kbGUiLCJpZGVudGlmeSIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXNfMSIsIm9sZE9uTWVzc2FnZSIsInBhcnRpYWxseUFwcGxpZWQiLCJhZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzIiwicnVuSWZQcmVzZW50IiwibWVzc2FnZVByZWZpeCIsIm9uR2xvYmFsTWVzc2FnZSIsImdsb2JhbE1lc3NhZ2VIYW5kbGVyIiwiZG9jIiwic2NyaXB0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsImltbWVkaWF0ZUlkcyIsIm5leHRJbW1lZGlhdGVJZCIsImNsZWFyVGltZW91dCIsInRpbWVvdXQiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsIl9vblRpbWVvdXQiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwibWFya2VyIiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsIkl0ZW0iLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbnMiLCJvbmNlIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJzd2l0Y2hfMSIsIl9zd2l0Y2giLCJTd2l0Y2hPcGVyYXRvciIsIlN3aXRjaFN1YnNjcmliZXIiLCJ1bnN1YnNjcmliZUlubmVyIiwic3dpdGNoTWFwXzEiLCJzd2l0Y2hNYXAiLCJTd2l0Y2hNYXBPcGVyYXRvciIsIlN3aXRjaE1hcFN1YnNjcmliZXIiLCJfdHJ5Tm90aWZ5TmV4dCIsInN3aXRjaE1hcFRvXzEiLCJzd2l0Y2hNYXBUbyIsIlN3aXRjaE1hcFRvT3BlcmF0b3IiLCJTd2l0Y2hNYXBUb1N1YnNjcmliZXIiLCJpbm5lciIsInRyeVJlc3VsdFNlbGVjdG9yIiwidGFrZV8xIiwidGFrZSIsIlRha2VPcGVyYXRvciIsIlRha2VTdWJzY3JpYmVyIiwidGFrZUxhc3RfMSIsInRha2VMYXN0IiwiVGFrZUxhc3RPcGVyYXRvciIsIlRha2VMYXN0U3Vic2NyaWJlciIsInJpbmciLCJ0YWtlVW50aWxfMSIsInRha2VVbnRpbCIsIlRha2VVbnRpbE9wZXJhdG9yIiwiVGFrZVVudGlsU3Vic2NyaWJlciIsInRha2VXaGlsZV8xIiwidGFrZVdoaWxlIiwiVGFrZVdoaWxlT3BlcmF0b3IiLCJUYWtlV2hpbGVTdWJzY3JpYmVyIiwibmV4dE9yQ29tcGxldGUiLCJwcmVkaWNhdGVSZXN1bHQiLCJ0aHJvdHRsZV8xIiwidGhyb3R0bGUiLCJUaHJvdHRsZU9wZXJhdG9yIiwiVGhyb3R0bGVTdWJzY3JpYmVyIiwidHJ5RHVyYXRpb25TZWxlY3RvciIsImVtaXRBbmRUaHJvdHRsZSIsInRocm90dGxlVGltZV8xIiwidGhyb3R0bGVUaW1lIiwiVGhyb3R0bGVUaW1lT3BlcmF0b3IiLCJUaHJvdHRsZVRpbWVTdWJzY3JpYmVyIiwidGltZW91dF8xIiwiZHVlIiwiZXJyb3JUb1NlbmQiLCJhYnNvbHV0ZVRpbWVvdXQiLCJ3YWl0Rm9yIiwiVGltZW91dE9wZXJhdG9yIiwiVGltZW91dFN1YnNjcmliZXIiLCJfcHJldmlvdXNJbmRleCIsIl9oYXNDb21wbGV0ZWQiLCJzY2hlZHVsZVRpbWVvdXQiLCJkaXNwYXRjaFRpbWVvdXQiLCJjdXJyZW50SW5kZXgiLCJwcmV2aW91c0luZGV4Iiwibm90aWZ5VGltZW91dCIsInRpbWVvdXRXaXRoXzEiLCJ0aW1lb3V0V2l0aCIsIndpdGhPYnNlcnZhYmxlIiwiVGltZW91dFdpdGhPcGVyYXRvciIsIlRpbWVvdXRXaXRoU3Vic2NyaWJlciIsInRpbWVvdXRTdWJzY3JpcHRpb24iLCJoYW5kbGVUaW1lb3V0IiwidGltZW91dFN0YXRlIiwidG9BcnJheV8xIiwidG9BcnJheSIsIlRvQXJyYXlPcGVyYXRvciIsIlRvQXJyYXlTdWJzY3JpYmVyIiwidG9Qcm9taXNlXzEiLCJ0b1Byb21pc2UiLCJ3aW5kb3dfMSIsIndpbmRvd0JvdW5kYXJpZXMiLCJXaW5kb3dPcGVyYXRvciIsIldpbmRvd1N1YnNjcmliZXIiLCJvcGVuV2luZG93IiwicHJldldpbmRvdyIsIm5ld1dpbmRvdyIsIndpbmRvd0NvdW50XzEiLCJ3aW5kb3dDb3VudCIsIndpbmRvd1NpemUiLCJzdGFydFdpbmRvd0V2ZXJ5IiwiV2luZG93Q291bnRPcGVyYXRvciIsIldpbmRvd0NvdW50U3Vic2NyaWJlciIsIndpbmRvd3MiLCJmaXJzdFdpbmRvdyIsIndpbmRvd1RpbWVfMSIsIndpbmRvd1RpbWVTcGFuIiwid2luZG93Q3JlYXRpb25JbnRlcnZhbCIsIldpbmRvd1RpbWVPcGVyYXRvciIsImRpc3BhdGNoV2luZG93VGltZVNwYW5Pbmx5IiwiZGlzcGF0Y2hXaW5kb3dDcmVhdGlvbiIsInRpbWVTcGFuU3RhdGUiLCJkaXNwYXRjaFdpbmRvd0Nsb3NlIiwiY2xvc2VXaW5kb3ciLCJXaW5kb3dUaW1lU3Vic2NyaWJlciIsIndpbmRvd18yIiwid2luZG93XzMiLCJ3aW5kb3dfNCIsIndpbmRvd1RvZ2dsZV8xIiwid2luZG93VG9nZ2xlIiwiV2luZG93VG9nZ2xlT3BlcmF0b3IiLCJXaW5kb3dUb2dnbGVTdWJzY3JpYmVyIiwib3BlblN1YnNjcmlwdGlvbiIsIndpbmRvd1doZW5fMSIsIndpbmRvd1doZW4iLCJ1bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24iLCJjbG9zaW5nTm90aWZpY2F0aW9uIiwid2l0aExhdGVzdEZyb21fMSIsIndpdGhMYXRlc3RGcm9tIiwiV2l0aExhdGVzdEZyb21PcGVyYXRvciIsIldpdGhMYXRlc3RGcm9tU3Vic2NyaWJlciIsInppcEFsbF8xIiwiemlwQWxsIiwicGF0Y2hYSFIiLCJmaW5kUGVuZGluZ1Rhc2siLCJwZW5kaW5nVGFzayIsIlhIUl9UQVNLIiwic2NoZWR1bGVUYXNrIiwicmVhZHlTdGF0ZSIsIkRPTkUiLCJhYm9ydGVkIiwic3RvcmVkVGFzayIsInNldE5hdGl2ZSIsInBsYWNlaG9sZGVyQ2FsbGJhY2siLCJjbGVhck5hdGl2ZSIsInV0aWxzXzEiLCJwYXRjaE1ldGhvZCIsIlhNTEh0dHBSZXF1ZXN0Iiwiem9uZSIsIlpvbmUiLCJvcHRpb25zIiwiaXNQZXJpb2RpYyIsInNjaGVkdWxlTWFjcm9UYXNrIiwiZGVsZWdhdGUiLCJjYW5jZWxGbiIsImNhbmNlbFRhc2siLCJldmVudF90YXJnZXRfMSIsImRlZmluZV9wcm9wZXJ0eV8xIiwicmVnaXN0ZXJfZWxlbWVudF8xIiwicHJvcGVydHlfZGVzY3JpcHRvcl8xIiwidGltZXJzXzEiLCJibG9ja2luZ01ldGhvZHMiLCJfZ2xvYmFsIiwicGF0Y2hUaW1lciIsInN5bWJvbCIsImV2ZW50VGFyZ2V0UGF0Y2giLCJwcm9wZXJ0eURlc2NyaXB0b3JQYXRjaCIsInBhdGNoQ2xhc3MiLCJwcm9wZXJ0eVBhdGNoIiwicmVnaXN0ZXJFbGVtZW50UGF0Y2giLCJ6b25lU3ltYm9sIiwiZ2VvbG9jYXRpb24iLCJwYXRjaFByb3RvdHlwZSIsIl9fc3ltYm9sX18iLCJzY2hlZHVsZVF1ZXVlRHJhaW4iLCJfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzIiwiX21pY3JvVGFza1F1ZXVlIiwic3ltYm9sUHJvbWlzZSIsInN5bWJvbFRoZW4iLCJkcmFpbk1pY3JvVGFza1F1ZXVlIiwic3ltYm9sU2V0VGltZW91dCIsInNjaGVkdWxlTWljcm9UYXNrIiwiY29uc29sZUVycm9yIiwicmVqZWN0aW9uIiwic3RhY2siLCJfaXNEcmFpbmluZ01pY3JvdGFza1F1ZXVlIiwicnVuVGFzayIsIl91bmNhdWdodFByb21pc2VFcnJvcnMiLCJfbG9vcF8xIiwidW5jYXVnaHRQcm9taXNlRXJyb3IiLCJydW5HdWFyZGVkIiwiZm9yd2FyZFJlc29sdXRpb24iLCJmb3J3YXJkUmVqZWN0aW9uIiwiWm9uZUF3YXJlUHJvbWlzZSIsIm1ha2VSZXNvbHZlciIsInJlc29sdmVQcm9taXNlIiwic3ltYm9sU3RhdGUiLCJVTlJFU09MVkVEIiwiY2xlYXJSZWplY3RlZE5vQ2F0Y2giLCJzeW1ib2xWYWx1ZSIsInNjaGVkdWxlUmVzb2x2ZU9yUmVqZWN0IiwiUkVKRUNURUQiLCJSRUpFQ1RFRF9OT19DQVRDSCIsImN1cnJlbnRUYXNrIiwiY2hhaW5Qcm9taXNlIiwiem9uZVNwZWMiLCJfcHJvcGVydGllcyIsIl9uYW1lIiwiX3pvbmVEZWxlZ2F0ZSIsIlpvbmVEZWxlZ2F0ZSIsIl9jdXJyZW50Wm9uZSIsIl9jdXJyZW50VGFzayIsImdldFpvbmVXaXRoIiwiZm9yayIsIl9jYWxsYmFjayIsImludGVyY2VwdCIsImFwcGx5VGhpcyIsImFwcGx5QXJncyIsIm9sZFpvbmUiLCJoYW5kbGVFcnJvciIsInJ1bkNvdW50IiwicHJldmlvdXNUYXNrIiwiaW52b2tlVGFzayIsImN1c3RvbVNjaGVkdWxlIiwiWm9uZVRhc2siLCJjdXN0b21DYW5jZWwiLCJzY2hlZHVsZUV2ZW50VGFzayIsInBhcmVudERlbGVnYXRlIiwiX3Rhc2tDb3VudHMiLCJtaWNyb1Rhc2siLCJtYWNyb1Rhc2siLCJldmVudFRhc2siLCJfcGFyZW50RGVsZWdhdGUiLCJfZm9ya1pTIiwib25Gb3JrIiwiX2ZvcmtEbGd0IiwiX2ludGVyY2VwdFpTIiwib25JbnRlcmNlcHQiLCJfaW50ZXJjZXB0RGxndCIsIl9pbnZva2VaUyIsIm9uSW52b2tlIiwiX2ludm9rZURsZ3QiLCJfaGFuZGxlRXJyb3JaUyIsIm9uSGFuZGxlRXJyb3IiLCJfaGFuZGxlRXJyb3JEbGd0IiwiX3NjaGVkdWxlVGFza1pTIiwib25TY2hlZHVsZVRhc2siLCJfc2NoZWR1bGVUYXNrRGxndCIsIl9pbnZva2VUYXNrWlMiLCJvbkludm9rZVRhc2siLCJfaW52b2tlVGFza0RsZ3QiLCJfY2FuY2VsVGFza1pTIiwib25DYW5jZWxUYXNrIiwiX2NhbmNlbFRhc2tEbGd0IiwiX2hhc1Rhc2taUyIsIm9uSGFzVGFzayIsIl9oYXNUYXNrRGxndCIsInRhcmdldFpvbmUiLCJzY2hlZHVsZUZuIiwiX3VwZGF0ZVRhc2tDb3VudCIsImhhc1Rhc2siLCJjb3VudHMiLCJjaGFuZ2UiLCJoYW5kbGVJZCIsIlJFU09MVkVEIiwib25SZXNvbHZlIiwib25SZWplY3QiLCJyZWoiLCJ2YWx1ZXNfMSIsInJlc29sdmVkVmFsdWVzIiwidmFsdWVzXzIiLCJOYXRpdmVQcm9taXNlIiwiTmF0aXZlUHJvbWlzZVByb3RvdG90eXBlIiwiTmF0aXZlUHJvbWlzZVRoZW5fMSIsIm5hdGl2ZVByb21pc2UiLCJhcGlzIiwiaXNXdGYiLCJXVEZfSVNTVUVfNTU1IiwiTk9fRVZFTlRfVEFSR0VUIiwiRVZFTlRfVEFSR0VUIiwicGF0Y2hFdmVudFRhcmdldE1ldGhvZHMiLCJiaW5kQXJndW1lbnRzIiwiZm5OYW1lcyIsIm5hbWVfMSIsInBhdGNoUHJvcGVydHkiLCJwcm9wIiwic3Vic3RyIiwiX3Byb3AiLCJ3cmFwRm4iLCJwcmV2ZW50RGVmYXVsdCIsInBhdGNoT25Qcm9wZXJ0aWVzIiwib25Qcm9wZXJ0aWVzIiwiZmluZEV4aXN0aW5nUmVnaXN0ZXJlZFRhc2siLCJjYXB0dXJlIiwiZXZlbnRUYXNrcyIsIkVWRU5UX1RBU0tTIiwidXNlQ2FwdHVyaW5nIiwiYXR0YWNoUmVnaXN0ZXJlZEV2ZW50Iiwic2NoZWR1bGVFdmVudExpc3RlbmVyIiwiU1lNQk9MX0FERF9FVkVOVF9MSVNURU5FUiIsImNhbmNlbEV2ZW50TGlzdGVuZXIiLCJTWU1CT0xfUkVNT1ZFX0VWRU5UX0xJU1RFTkVSIiwiem9uZUF3YXJlQWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUV2ZW50IiwidmFsaWRab25lSGFuZGxlciIsInpvbmVBd2FyZVJlbW92ZUV2ZW50TGlzdGVuZXIiLCJBRERfRVZFTlRfTElTVEVORVIiLCJSRU1PVkVfRVZFTlRfTElTVEVORVIiLCJjbGFzc05hbWUiLCJPcmlnaW5hbENsYXNzIiwib3JpZ2luYWxJbnN0YW5jZUtleSIsImNyZWF0ZU5hbWVkRm4iLCJwYXRjaEZuIiwiZGVsZWdhdGVOYW1lIiwiaXNXZWJXb3JrZXIiLCJpc0Jyb3dzZXIiLCJpc1VuY29uZmlndXJhYmxlIiwib3JpZ2luYWxDb25maWd1cmFibGVGbGFnIiwicmV3cml0ZURlc2NyaXB0b3IiLCJfdHJ5RGVmaW5lUHJvcGVydHkiLCJpc0Zyb3plbiIsIl9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfcmVkZWZpbmVQcm9wZXJ0eSIsInVuY29uZmlndXJhYmxlc0tleSIsIl9kZWZpbmVQcm9wZXJ0eSIsIl9yZWdpc3RlckVsZW1lbnQiLCJyZWdpc3RlckVsZW1lbnQiLCJjYWxsYmFja3MiLCJvcHRzIiwic3VwcG9ydHNXZWJTb2NrZXQiLCJXZWJTb2NrZXQiLCJjYW5QYXRjaFZpYVByb3BlcnR5RGVzY3JpcHRvciIsIkhUTUxFbGVtZW50IiwiZXZlbnROYW1lcyIsIklEQkluZGV4IiwiSURCUmVxdWVzdCIsIklEQk9wZW5EQlJlcXVlc3QiLCJJREJEYXRhYmFzZSIsIklEQlRyYW5zYWN0aW9uIiwiSURCQ3Vyc29yIiwicGF0Y2hWaWFDYXB0dXJpbmdBbGxUaGVFdmVudHMiLCJ3ZWJTb2NrZXRQYXRjaCIsIkVsZW1lbnQiLCJyZXEiLCJwcm9wZXJ0eSIsIm9ucHJvcGVydHkiLCJlbHQiLCJ1bmJvdW5kS2V5IiwicGFyZW50RWxlbWVudCIsIldTIiwiRXZlbnRUYXJnZXQiLCJwcm94eVNvY2tldCIsInNvY2tldCIsIm9ubWVzc2FnZURlc2MiLCJwcm9wTmFtZSIsInNldE5hbWUiLCJjYW5jZWxOYW1lIiwibmFtZVN1ZmZpeCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0JBLEVBQW9CLElBQ3BCQSxFQUFvQixJQUNwQkEsRUFBb0IsS0FDcEJJLEVBQU9ELFFBQVVILEVBQW9CLE1BSS9CLENBQ0EsQ0FFRCxTQUFTSSxFQUFRRCxFQUFTSCxHRXhEaEMsWUFDQSxJQUFBVyxHQUFBQyxXQUFBRCxXQUFBLFNBQUFFLEVBQUFDLEdBRUEsUUFBQUMsS0FBbUJILEtBQUFJLFlBQUFILEVBRG5CLE9BQUFILEtBQUFJLEtBQUFHLGVBQUFQLEtBQUFHLEVBQUFILEdBQUFJLEVBQUFKLEdBRUFHLEdBQUFLLFVBQUEsT0FBQUosRUFBQUssT0FBQUMsT0FBQU4sSUFBQUMsRUFBQUcsVUFBQUosRUFBQUksVUFBQSxHQUFB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RUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBSSxFQUFBRCxRQUFBSCxFQUFBLEt2QnlqRU0sU0FBU0ksRUFBUUQsRUFBU0gsR3dCeHVFaEMsWUFFQSxJQUFBa0csR0FBQWxHLEVBQUEsSUFDQTROLEVBQUE1TixFQUFBLElBQ0FrVCxFQUFBbFQsRUFBQSxJQUNBbVQsRUFBQW5ULEVBQUEsSUFDQW9U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QUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLEtBQ0FBLEVBQUEsS0FDQUEsRUFBQSxLQUNBQSxFQUFBLElBRUEsSUFBQW11QyxHQUFBbnVDLEVBQUEsSUFDQUcsR0FBQWl1QyxTQUFBRCxFQUFBQyxRQUNBLElBQUE3c0MsR0FBQXZCLEVBQUEsR0FDQUcsR0FBQXdDLGFBQUFwQixFQUFBb0Is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QUFBLFlBQUFnZ0MsR0FBQSxhQUFBQSxFQUFBMTBELEVBQUEsV0FDQUEsUUFFQThiLEVBQUEyckMsRUFBQUksa0JBQUEyTSxFQUFBeDBELEVBQUEsR0FBQTJuRCxFQUFBYixFQUFBNW1DLEVBQ0EsS0FBQXBFLEVBQ0EsTUFBQUEsRUFHQSxJQUFBZ2dDLEdBQUFoZ0MsRUFBQTVpQixLQUFBMDFELFFBS0EsT0FKQTlTLEdBQUFzQixLQUFBdEIsRUFBQXFCLFFBQ0FyaEMsRUFBQXNoQyxJQUFBdEIsRUFBQXNCLElBQUE1dEQsS0FBQXNzRCxHQUNBaGdDLEVBQUFxaEMsTUFBQXJCLEVBQUFxQixNQUFBM3RELEtBQUFzc0QsSUFFQWhnQyxFQUlBLE1BQUFnc0MsR0FBQXAyRCxNQUFBcEQsRUFBQTBSLE1BR0FxbkQsRUFBQUMsRUFBQUMsWUFBQWo1RCxFQUFBbW1FLEVBQUEsU0FBQTNNLEdBQWdGLGdCQUFBejVELEVBQUEyUixHQUNoRixHQUFBOGIsR0FBQTliLEVBQUEsRUFDQThiLElBQUEsZ0JBQUFBLEdBQUF2YixNQUNBdWIsRUFBQWlzQyxVQUFBanNDLEVBQUE1aUIsS0FBQTB1RCxZQUFBLElBQUE5ckMsRUFBQW13QyxXQUVBbndDLEVBQUEyckMsS0FBQU8sV0FBQWxzQyxHQUtBZ3NDLEVBQUFwMkQsTUFBQXBELEVBQUEwUixNQW5EQSxHQUFBc25ELEdBQUEzL0QsRUFBQSxFQXVEQUcsR0FBQTBnRSxrQjVrQmc5ckI4QnRnRSxLQUFLSixFQUFTSCxFQUFvQiIsImZpbGUiOiIuL2J1bmRsZS5kaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzUwKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwOSk7XG5cblxuLyoqKi8gfSxcbi8qIDEgKi8sXG4vKiAyICovLFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBTdWJqZWN0U3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0dmFyIHJ4U3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdHZhciB0aHJvd0Vycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0LyoqXG5cdCAqIEBjbGFzcyBTdWJqZWN0PFQ+XG5cdCAqL1xuXHR2YXIgU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU3ViamVjdCwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFN1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuXHQgICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuaGFzRXJyb3JlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuZGlzcGF0Y2hpbmcgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgU3ViamVjdC5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikge1xuXHQgICAgICAgIHZhciBzdWJqZWN0ID0gbmV3IFN1YmplY3QodGhpcy5kZXN0aW5hdGlvbiB8fCB0aGlzLCB0aGlzKTtcblx0ICAgICAgICBzdWJqZWN0Lm9wZXJhdG9yID0gb3BlcmF0b3I7XG5cdCAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG5cdCAgICB9O1xuXHQgICAgU3ViamVjdC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24ucHJvdG90eXBlLmFkZC5jYWxsKHRoaXMsIHN1YnNjcmlwdGlvbik7XG5cdCAgICB9O1xuXHQgICAgU3ViamVjdC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgIFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcywgc3Vic2NyaXB0aW9uKTtcblx0ICAgIH07XG5cdCAgICBTdWJqZWN0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuc291cmNlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaGFzRXJyb3JlZCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmliZXIuZXJyb3IodGhpcy5lcnJvclZhbHVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhhc0NvbXBsZXRlZCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnRocm93SWZVbnN1YnNjcmliZWQoKTtcblx0ICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJqZWN0U3Vic2NyaXB0aW9uXzEuU3ViamVjdFN1YnNjcmlwdGlvbih0aGlzLCBzdWJzY3JpYmVyKTtcblx0ICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzdWJzY3JpYmVyKTtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3ViamVjdC5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBudWxsO1xuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnRocm93SWZVbnN1YnNjcmliZWQoKTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRpc3BhdGNoaW5nID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLl9uZXh0KHZhbHVlKTtcblx0ICAgICAgICB0aGlzLmRpc3BhdGNoaW5nID0gZmFsc2U7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3JlZCkge1xuXHQgICAgICAgICAgICB0aGlzLl9lcnJvcih0aGlzLmVycm9yVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICh0aGlzLmhhc0NvbXBsZXRlZCkge1xuXHQgICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTdWJqZWN0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLnRocm93SWZVbnN1YnNjcmliZWQoKTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG5cdCAgICAgICAgdGhpcy5oYXNFcnJvcmVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmVycm9yVmFsdWUgPSBlcnI7XG5cdCAgICAgICAgaWYgKHRoaXMuZGlzcGF0Y2hpbmcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMudGhyb3dJZlVuc3Vic2NyaWJlZCgpO1xuXHQgICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRoaXMuZGlzcGF0Y2hpbmcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlLmFzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBTdWJqZWN0T2JzZXJ2YWJsZSh0aGlzKTtcblx0ICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcblx0ICAgIH07XG5cdCAgICBTdWJqZWN0LnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIGlmICh0aGlzLmRlc3RpbmF0aW9uKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLl9maW5hbE5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTdWJqZWN0LnByb3RvdHlwZS5fZmluYWxOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLnNsaWNlKDApO1xuXHQgICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuXHQgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIG9ic2VydmVyc1tpbmRleF0ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAodGhpcy5kZXN0aW5hdGlvbikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLl9maW5hbEVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlLl9maW5hbEVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gdG8gYmxvY2sgb3VyIFN1YmplY3RTdWJzY3JpcHRpb25zIGZyb21cblx0ICAgICAgICAvLyBzcGxpY2luZyB0aGVtc2VsdmVzIG91dCBvZiB0aGUgb2JzZXJ2ZXJzIGxpc3Qgb25lIGJ5IG9uZS5cblx0ICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKG9ic2VydmVycykge1xuXHQgICAgICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcblx0ICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgICAgIG9ic2VydmVyc1tpbmRleF0uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5kZXN0aW5hdGlvbikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLl9maW5hbENvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlLl9maW5hbENvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gdG8gYmxvY2sgb3VyIFN1YmplY3RTdWJzY3JpcHRpb25zIGZyb21cblx0ICAgICAgICAvLyBzcGxpY2luZyB0aGVtc2VsdmVzIG91dCBvZiB0aGUgb2JzZXJ2ZXJzIGxpc3Qgb25lIGJ5IG9uZS5cblx0ICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKG9ic2VydmVycykge1xuXHQgICAgICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcblx0ICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgICAgIG9ic2VydmVyc1tpbmRleF0uY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlLnRocm93SWZVbnN1YnNjcmliZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgdGhyb3dFcnJvcl8xLnRocm93RXJyb3IobmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN1YmplY3QucHJvdG90eXBlW3J4U3Vic2NyaWJlcl8xLiQkcnhTdWJzY3JpYmVyXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKHRoaXMpO1xuXHQgICAgfTtcblx0ICAgIFN1YmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFN1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN1YmplY3Q7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5TdWJqZWN0ID0gU3ViamVjdDtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU3ViamVjdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFN1YmplY3RPYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU3ViamVjdE9ic2VydmFibGUoc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gU3ViamVjdE9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgcm9vdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIG9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdHZhciB0b1N1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdC8qKlxuXHQgKiBBIHJlcHJlc2VudGF0aW9uIG9mIGFueSBzZXQgb2YgdmFsdWVzIG92ZXIgYW55IGFtb3VudCBvZiB0aW1lLiBUaGlzIHRoZSBtb3N0IGJhc2ljIGJ1aWxkaW5nIGJsb2NrXG5cdCAqIG9mIFJ4SlMuXG5cdCAqXG5cdCAqIEBjbGFzcyBPYnNlcnZhYmxlPFQ+XG5cdCAqL1xuXHR2YXIgT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAvKipcblx0ICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3Vic2NyaWJlIHRoZSBmdW5jdGlvbiB0aGF0IGlzICBjYWxsZWQgd2hlbiB0aGUgT2JzZXJ2YWJsZSBpc1xuXHQgICAgICogaW5pdGlhbGx5IHN1YnNjcmliZWQgdG8uIFRoaXMgZnVuY3Rpb24gaXMgZ2l2ZW4gYSBTdWJzY3JpYmVyLCB0byB3aGljaCBuZXcgdmFsdWVzXG5cdCAgICAgKiBjYW4gYmUgYG5leHRgZWQsIG9yIGFuIGBlcnJvcmAgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmFpc2UgYW4gZXJyb3IsIG9yXG5cdCAgICAgKiBgY29tcGxldGVgIGNhbiBiZSBjYWxsZWQgdG8gbm90aWZ5IG9mIGEgc3VjY2Vzc2Z1bCBjb21wbGV0aW9uLlxuXHQgICAgICovXG5cdCAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKHN1YnNjcmliZSkge1xuXHQgICAgICAgIHRoaXMuX2lzU2NhbGFyID0gZmFsc2U7XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZSkge1xuXHQgICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBDcmVhdGVzIGEgbmV3IE9ic2VydmFibGUsIHdpdGggdGhpcyBPYnNlcnZhYmxlIGFzIHRoZSBzb3VyY2UsIGFuZCB0aGUgcGFzc2VkXG5cdCAgICAgKiBvcGVyYXRvciBkZWZpbmVkIGFzIHRoZSBuZXcgb2JzZXJ2YWJsZSdzIG9wZXJhdG9yLlxuXHQgICAgICogQG1ldGhvZCBsaWZ0XG5cdCAgICAgKiBAcGFyYW0ge09wZXJhdG9yfSBvcGVyYXRvciB0aGUgb3BlcmF0b3IgZGVmaW5pbmcgdGhlIG9wZXJhdGlvbiB0byB0YWtlIG9uIHRoZSBvYnNlcnZhYmxlXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhIG5ldyBvYnNlcnZhYmxlIHdpdGggdGhlIE9wZXJhdG9yIGFwcGxpZWRcblx0ICAgICAqL1xuXHQgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcblx0ICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG5cdCAgICAgICAgb2JzZXJ2YWJsZS5vcGVyYXRvciA9IG9wZXJhdG9yO1xuXHQgICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogUmVnaXN0ZXJzIGhhbmRsZXJzIGZvciBoYW5kbGluZyBlbWl0dGVkIHZhbHVlcywgZXJyb3IgYW5kIGNvbXBsZXRpb25zIGZyb20gdGhlIG9ic2VydmFibGUsIGFuZFxuXHQgICAgICogIGV4ZWN1dGVzIHRoZSBvYnNlcnZhYmxlJ3Mgc3Vic2NyaWJlciBmdW5jdGlvbiwgd2hpY2ggd2lsbCB0YWtlIGFjdGlvbiB0byBzZXQgdXAgdGhlIHVuZGVybHlpbmcgZGF0YSBzdHJlYW1cblx0ICAgICAqIEBtZXRob2Qgc3Vic2NyaWJlXG5cdCAgICAgKiBAcGFyYW0ge1BhcnRpYWxPYnNlcnZlcnxGdW5jdGlvbn0gb2JzZXJ2ZXJPck5leHQgKG9wdGlvbmFsKSBlaXRoZXIgYW4gb2JzZXJ2ZXIgZGVmaW5pbmcgYWxsIGZ1bmN0aW9ucyB0byBiZSBjYWxsZWQsXG5cdCAgICAgKiAgb3IgdGhlIGZpcnN0IG9mIHRocmVlIHBvc3NpYmxlIGhhbmRsZXJzLCB3aGljaCBpcyB0aGUgaGFuZGxlciBmb3IgZWFjaCB2YWx1ZSBlbWl0dGVkIGZyb20gdGhlIG9ic2VydmFibGUuXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcnJvciAob3B0aW9uYWwpIGEgaGFuZGxlciBmb3IgYSB0ZXJtaW5hbCBldmVudCByZXN1bHRpbmcgZnJvbSBhbiBlcnJvci4gSWYgbm8gZXJyb3IgaGFuZGxlciBpcyBwcm92aWRlZCxcblx0ICAgICAqICB0aGUgZXJyb3Igd2lsbCBiZSB0aHJvd24gYXMgdW5oYW5kbGVkXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wbGV0ZSAob3B0aW9uYWwpIGEgaGFuZGxlciBmb3IgYSB0ZXJtaW5hbCBldmVudCByZXN1bHRpbmcgZnJvbSBzdWNjZXNzZnVsIGNvbXBsZXRpb24uXG5cdCAgICAgKiBAcmV0dXJuIHtJU3Vic2NyaXB0aW9ufSBhIHN1YnNjcmlwdGlvbiByZWZlcmVuY2UgdG8gdGhlIHJlZ2lzdGVyZWQgaGFuZGxlcnNcblx0ICAgICAqL1xuXHQgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcblx0ICAgICAgICB2YXIgb3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yO1xuXHQgICAgICAgIHZhciBzaW5rID0gdG9TdWJzY3JpYmVyXzEudG9TdWJzY3JpYmVyKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuXHQgICAgICAgIHNpbmsuYWRkKG9wZXJhdG9yID8gb3BlcmF0b3IuY2FsbChzaW5rLCB0aGlzKSA6IHRoaXMuX3N1YnNjcmliZShzaW5rKSk7XG5cdCAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG5cdCAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIGlmIChzaW5rLnN5bmNFcnJvclRocm93bikge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gc2luaztcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIEBtZXRob2QgZm9yRWFjaFxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dCBhIGhhbmRsZXIgZm9yIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgb2JzZXJ2YWJsZVxuXHQgICAgICogQHBhcmFtIHtQcm9taXNlQ29uc3RydWN0b3J9IFtQcm9taXNlQ3Rvcl0gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB1c2VkIHRvIGluc3RhbnRpYXRlIHRoZSBQcm9taXNlXG5cdCAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCBlaXRoZXIgcmVzb2x2ZXMgb24gb2JzZXJ2YWJsZSBjb21wbGV0aW9uIG9yXG5cdCAgICAgKiAgcmVqZWN0cyB3aXRoIHRoZSBoYW5kbGVkIGVycm9yXG5cdCAgICAgKi9cblx0ICAgIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAobmV4dCwgUHJvbWlzZUN0b3IpIHtcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHQgICAgICAgIGlmICghUHJvbWlzZUN0b3IpIHtcblx0ICAgICAgICAgICAgaWYgKHJvb3RfMS5yb290LlJ4ICYmIHJvb3RfMS5yb290LlJ4LmNvbmZpZyAmJiByb290XzEucm9vdC5SeC5jb25maWcuUHJvbWlzZSkge1xuXHQgICAgICAgICAgICAgICAgUHJvbWlzZUN0b3IgPSByb290XzEucm9vdC5SeC5jb25maWcuUHJvbWlzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChyb290XzEucm9vdC5Qcm9taXNlKSB7XG5cdCAgICAgICAgICAgICAgICBQcm9taXNlQ3RvciA9IHJvb3RfMS5yb290LlByb21pc2U7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFQcm9taXNlQ3Rvcikge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gbmV3IFByb21pc2VDdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIHN1YnNjcmlwdGlvbiwgdGhlbiB3ZSBjYW4gc3VybWlzZVxuXHQgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBuZXh0IGhhbmRsaW5nIGlzIGFzeW5jaHJvbm91cy4gQW55IGVycm9ycyB0aHJvd25cblx0ICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIGJlIHJlamVjdGVkIGV4cGxpY2l0bHkgYW5kIHVuc3Vic2NyaWJlIG11c3QgYmVcblx0ICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgbWFudWFsbHlcblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgTk8gc3Vic2NyaXB0aW9uLCB0aGVuIHdlJ3JlIGdldHRpbmcgYSBuZXh0ZWRcblx0ICAgICAgICAgICAgICAgICAgICAvLyB2YWx1ZSBzeW5jaHJvbm91c2x5IGR1cmluZyBzdWJzY3JpcHRpb24uIFdlIGNhbiBqdXN0IGNhbGwgaXQuXG5cdCAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQgZXJyb3JzLCBPYnNlcnZhYmxlJ3MgYHN1YnNjcmliZWAgaW1wbGUgd2lsbCBlbnN1cmUgdGhlXG5cdCAgICAgICAgICAgICAgICAgICAgLy8gdW5zdWJzY3JpcHRpb24gbG9naWMgaXMgY2FsbGVkLCB0aGVuIHN5bmNocm9ub3VzbHkgcmV0aHJvdyB0aGUgZXJyb3IuXG5cdCAgICAgICAgICAgICAgICAgICAgLy8gQWZ0ZXIgdGhhdCwgUHJvbWlzZSB3aWxsIHRyYXAgdGhlIGVycm9yIGFuZCBzZW5kIGl0XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gZG93biB0aGUgcmVqZWN0aW9uIHBhdGguXG5cdCAgICAgICAgICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sIHJlamVjdCwgcmVzb2x2ZSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIEFuIGludGVyb3AgcG9pbnQgZGVmaW5lZCBieSB0aGUgZXM3LW9ic2VydmFibGUgc3BlYyBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlXG5cdCAgICAgKiBAbWV0aG9kIFN5bWJvbC5vYnNlcnZhYmxlXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSB0aGlzIGluc3RhbmNlIG9mIHRoZSBvYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIE9ic2VydmFibGUucHJvdG90eXBlW29ic2VydmFibGVfMS4kJG9ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0ICAgIC8vIEhBQ0s6IFNpbmNlIFR5cGVTY3JpcHQgaW5oZXJpdHMgc3RhdGljIHByb3BlcnRpZXMgdG9vLCB3ZSBoYXZlIHRvXG5cdCAgICAvLyBmaWdodCBhZ2FpbnN0IFR5cGVTY3JpcHQgaGVyZSBzbyBTdWJqZWN0IGNhbiBoYXZlIGEgZGlmZmVyZW50IHN0YXRpYyBjcmVhdGUgc2lnbmF0dXJlXG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYSBuZXcgY29sZCBPYnNlcnZhYmxlIGJ5IGNhbGxpbmcgdGhlIE9ic2VydmFibGUgY29uc3RydWN0b3Jcblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqIEBtZXRob2QgY3JlYXRlXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJzY3JpYmU/IHRoZSBzdWJzY3JpYmVyIGZ1bmN0aW9uIHRvIGJlIHBhc3NlZCB0byB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYSBuZXcgY29sZCBvYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBPYnNlcnZhYmxlO1xuXHR9KCkpO1xuXHRleHBvcnRzLk9ic2VydmFibGUgPSBPYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKG1vZHVsZSwgZ2xvYmFsKSB7XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBvYmplY3RUeXBlcyA9IHtcblx0ICAgICdib29sZWFuJzogZmFsc2UsXG5cdCAgICAnZnVuY3Rpb24nOiB0cnVlLFxuXHQgICAgJ29iamVjdCc6IHRydWUsXG5cdCAgICAnbnVtYmVyJzogZmFsc2UsXG5cdCAgICAnc3RyaW5nJzogZmFsc2UsXG5cdCAgICAndW5kZWZpbmVkJzogZmFsc2Vcblx0fTtcblx0ZXhwb3J0cy5yb290ID0gKG9iamVjdFR5cGVzW3R5cGVvZiBzZWxmXSAmJiBzZWxmKSB8fCAob2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93KTtcblx0LyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG5cdHZhciBmcmVlRXhwb3J0cyA9IG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cdHZhciBmcmVlTW9kdWxlID0gb2JqZWN0VHlwZXNbdHlwZW9mIG1vZHVsZV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXHR2YXIgZnJlZUdsb2JhbCA9IG9iamVjdFR5cGVzW3R5cGVvZiBnbG9iYWxdICYmIGdsb2JhbDtcblx0aWYgKGZyZWVHbG9iYWwgJiYgKGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsKSkge1xuXHQgICAgZXhwb3J0cy5yb290ID0gZnJlZUdsb2JhbDtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yb290LmpzLm1hcFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg2KShtb2R1bGUpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xyXG5cdFx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxyXG5cdFx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbW9kdWxlO1xyXG5cdH1cclxuXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHJvb3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdHZhciBTeW1ib2wgPSByb290XzEucm9vdC5TeW1ib2w7XG5cdGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBpZiAoU3ltYm9sLm9ic2VydmFibGUpIHtcblx0ICAgICAgICBleHBvcnRzLiQkb2JzZXJ2YWJsZSA9IFN5bWJvbC5vYnNlcnZhYmxlO1xuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGV4cG9ydHMuJCRvYnNlcnZhYmxlID0gU3ltYm9sLmZvcignb2JzZXJ2YWJsZScpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZXhwb3J0cy4kJG9ic2VydmFibGUgPSBTeW1ib2woJ29ic2VydmFibGUnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgU3ltYm9sLm9ic2VydmFibGUgPSBleHBvcnRzLiQkb2JzZXJ2YWJsZTtcblx0ICAgIH1cblx0fVxuXHRlbHNlIHtcblx0ICAgIGV4cG9ydHMuJCRvYnNlcnZhYmxlID0gJ0BAb2JzZXJ2YWJsZSc7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHJ4U3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdGZ1bmN0aW9uIHRvU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG5cdCAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgJiYgdHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciBpbnN0YW5jZW9mIFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlcl8xLiQkcnhTdWJzY3JpYmVyXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyXzEuJCRyeFN1YnNjcmliZXJdKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcblx0fVxuXHRleHBvcnRzLnRvU3Vic2NyaWJlciA9IHRvU3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dG9TdWJzY3JpYmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBpc0Z1bmN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciByeFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgT2JzZXJ2ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHQvKipcblx0ICogSW1wbGVtZW50cyB0aGUge0BsaW5rIE9ic2VydmVyfSBpbnRlcmZhY2UgYW5kIGV4dGVuZHMgdGhlXG5cdCAqIHtAbGluayBTdWJzY3JpcHRpb259IGNsYXNzLiBXaGlsZSB0aGUge0BsaW5rIE9ic2VydmVyfSBpcyB0aGUgcHVibGljIEFQSSBmb3Jcblx0ICogY29uc3VtaW5nIHRoZSB2YWx1ZXMgb2YgYW4ge0BsaW5rIE9ic2VydmFibGV9LCBhbGwgT2JzZXJ2ZXJzIGdldCBjb252ZXJ0ZWQgdG9cblx0ICogYSBTdWJzY3JpYmVyLCBpbiBvcmRlciB0byBwcm92aWRlIFN1YnNjcmlwdGlvbi1saWtlIGNhcGFiaWxpdGllcyBzdWNoIGFzXG5cdCAqIGB1bnN1YnNjcmliZWAuIFN1YnNjcmliZXIgaXMgYSBjb21tb24gdHlwZSBpbiBSeEpTLCBhbmQgY3J1Y2lhbCBmb3Jcblx0ICogaW1wbGVtZW50aW5nIG9wZXJhdG9ycywgYnV0IGl0IGlzIHJhcmVseSB1c2VkIGFzIGEgcHVibGljIEFQSS5cblx0ICpcblx0ICogQGNsYXNzIFN1YnNjcmliZXI8VD5cblx0ICovXG5cdHZhciBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gW2Rlc3RpbmF0aW9uT3JOZXh0XSBBIHBhcnRpYWxseVxuXHQgICAgICogZGVmaW5lZCBPYnNlcnZlciBvciBhIGBuZXh0YCBjYWxsYmFjayBmdW5jdGlvbi5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZTogP2FueSk6IHZvaWR9IFtlcnJvcl0gVGhlIGBlcnJvcmAgY2FsbGJhY2sgb2YgYW5cblx0ICAgICAqIE9ic2VydmVyLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIFRoZSBgY29tcGxldGVgIGNhbGxiYWNrIG9mIGFuXG5cdCAgICAgKiBPYnNlcnZlci5cblx0ICAgICAqL1xuXHQgICAgZnVuY3Rpb24gU3Vic2NyaWJlcihkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5zeW5jRXJyb3JWYWx1ZSA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5zeW5jRXJyb3JUaHJvd24gPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG5cdCAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBPYnNlcnZlcl8xLmVtcHR5O1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMTpcblx0ICAgICAgICAgICAgICAgIGlmICghZGVzdGluYXRpb25Pck5leHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gT2JzZXJ2ZXJfMS5lbXB0eTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVzdGluYXRpb25Pck5leHQgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uT3JOZXh0IGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb25Pck5leHQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uYWRkKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKHRoaXMsIGRlc3RpbmF0aW9uT3JOZXh0KTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICB0aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKHRoaXMsIGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgLyoqXG5cdCAgICAgKiBBIHN0YXRpYyBmYWN0b3J5IGZvciBhIFN1YnNjcmliZXIsIGdpdmVuIGEgKHBvdGVudGlhbGx5IHBhcnRpYWwpIGRlZmluaXRpb25cblx0ICAgICAqIG9mIGFuIE9ic2VydmVyLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbih4OiA/VCk6IHZvaWR9IFtuZXh0XSBUaGUgYG5leHRgIGNhbGxiYWNrIG9mIGFuIE9ic2VydmVyLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbihlOiA/YW55KTogdm9pZH0gW2Vycm9yXSBUaGUgYGVycm9yYCBjYWxsYmFjayBvZiBhblxuXHQgICAgICogT2JzZXJ2ZXIuXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gVGhlIGBjb21wbGV0ZWAgY2FsbGJhY2sgb2YgYW5cblx0ICAgICAqIE9ic2VydmVyLlxuXHQgICAgICogQHJldHVybiB7U3Vic2NyaWJlcjxUPn0gQSBTdWJzY3JpYmVyIHdyYXBwaW5nIHRoZSAocGFydGlhbGx5IGRlZmluZWQpXG5cdCAgICAgKiBPYnNlcnZlciByZXByZXNlbnRlZCBieSB0aGUgZ2l2ZW4gYXJndW1lbnRzLlxuXHQgICAgICovXG5cdCAgICBTdWJzY3JpYmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcblx0ICAgICAgICB2YXIgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG5cdCAgICAgICAgc3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcblx0ICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIFRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBvZiB0eXBlIGBuZXh0YCBmcm9tXG5cdCAgICAgKiB0aGUgT2JzZXJ2YWJsZSwgd2l0aCBhIHZhbHVlLiBUaGUgT2JzZXJ2YWJsZSBtYXkgY2FsbCB0aGlzIG1ldGhvZCAwIG9yIG1vcmVcblx0ICAgICAqIHRpbWVzLlxuXHQgICAgICogQHBhcmFtIHtUfSBbdmFsdWVdIFRoZSBgbmV4dGAgdmFsdWUuXG5cdCAgICAgKiBAcmV0dXJuIHt2b2lkfVxuXHQgICAgICovXG5cdCAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICB0aGlzLl9uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBUaGUge0BsaW5rIE9ic2VydmVyfSBjYWxsYmFjayB0byByZWNlaXZlIG5vdGlmaWNhdGlvbnMgb2YgdHlwZSBgZXJyb3JgIGZyb21cblx0ICAgICAqIHRoZSBPYnNlcnZhYmxlLCB3aXRoIGFuIGF0dGFjaGVkIHtAbGluayBFcnJvcn0uIE5vdGlmaWVzIHRoZSBPYnNlcnZlciB0aGF0XG5cdCAgICAgKiB0aGUgT2JzZXJ2YWJsZSBoYXMgZXhwZXJpZW5jZWQgYW4gZXJyb3IgY29uZGl0aW9uLlxuXHQgICAgICogQHBhcmFtIHthbnl9IFtlcnJdIFRoZSBgZXJyb3JgIGV4Y2VwdGlvbi5cblx0ICAgICAqIEByZXR1cm4ge3ZvaWR9XG5cdCAgICAgKi9cblx0ICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIFRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrIHRvIHJlY2VpdmUgYSB2YWx1ZWxlc3Mgbm90aWZpY2F0aW9uIG9mIHR5cGVcblx0ICAgICAqIGBjb21wbGV0ZWAgZnJvbSB0aGUgT2JzZXJ2YWJsZS4gTm90aWZpZXMgdGhlIE9ic2VydmVyIHRoYXQgdGhlIE9ic2VydmFibGVcblx0ICAgICAqIGhhcyBmaW5pc2hlZCBzZW5kaW5nIHB1c2gtYmFzZWQgbm90aWZpY2F0aW9ucy5cblx0ICAgICAqIEByZXR1cm4ge3ZvaWR9XG5cdCAgICAgKi9cblx0ICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgfTtcblx0ICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgfTtcblx0ICAgIFN1YnNjcmliZXIucHJvdG90eXBlW3J4U3Vic2NyaWJlcl8xLiQkcnhTdWJzY3JpYmVyXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcblx0ZXhwb3J0cy5TdWJzY3JpYmVyID0gU3Vic2NyaWJlcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2FmZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFNhZmVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIoX3BhcmVudCwgb2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuX3BhcmVudCA9IF9wYXJlbnQ7XG5cdCAgICAgICAgdmFyIG5leHQ7XG5cdCAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihvYnNlcnZlck9yTmV4dCkpIHtcblx0ICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChvYnNlcnZlck9yTmV4dCkge1xuXHQgICAgICAgICAgICBjb250ZXh0ID0gb2JzZXJ2ZXJPck5leHQ7XG5cdCAgICAgICAgICAgIG5leHQgPSBvYnNlcnZlck9yTmV4dC5uZXh0O1xuXHQgICAgICAgICAgICBlcnJvciA9IG9ic2VydmVyT3JOZXh0LmVycm9yO1xuXHQgICAgICAgICAgICBjb21wbGV0ZSA9IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlO1xuXHQgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbl8xLmlzRnVuY3Rpb24oY29udGV4dC51bnN1YnNjcmliZSkpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuYWRkKGNvbnRleHQudW5zdWJzY3JpYmUuYmluZChjb250ZXh0KSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY29udGV4dC51bnN1YnNjcmliZSA9IHRoaXMudW5zdWJzY3JpYmUuYmluZCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG5cdCAgICAgICAgdGhpcy5fbmV4dCA9IG5leHQ7XG5cdCAgICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcblx0ICAgICAgICB0aGlzLl9jb21wbGV0ZSA9IGNvbXBsZXRlO1xuXHQgICAgfVxuXHQgICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkICYmIHRoaXMuX25leHQpIHtcblx0ICAgICAgICAgICAgdmFyIF9wYXJlbnQgPSB0aGlzLl9wYXJlbnQ7XG5cdCAgICAgICAgICAgIGlmICghX3BhcmVudC5zeW5jRXJyb3JUaHJvd2FibGUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHRoaXMuX25leHQsIHZhbHVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50LCB0aGlzLl9uZXh0LCB2YWx1ZSkpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICB2YXIgX3BhcmVudCA9IHRoaXMuX3BhcmVudDtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIV9wYXJlbnQuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fZXJyb3IsIGVycik7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudCwgdGhpcy5fZXJyb3IsIGVycik7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKCFfcGFyZW50LnN5bmNFcnJvclRocm93YWJsZSkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgX3BhcmVudC5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcblx0ICAgICAgICAgICAgICAgIF9wYXJlbnQuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICB2YXIgX3BhcmVudCA9IHRoaXMuX3BhcmVudDtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBsZXRlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIV9wYXJlbnQuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fY29tcGxldGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnQsIHRoaXMuX2NvbXBsZXRlKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JVbnN1YiA9IGZ1bmN0aW9uIChmbiwgdmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRocm93IGVycjtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JTZXRFcnJvciA9IGZ1bmN0aW9uIChwYXJlbnQsIGZuLCB2YWx1ZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcblx0ICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclRocm93biA9IHRydWU7XG5cdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHQgICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX3BhcmVudCA9IHRoaXMuX3BhcmVudDtcblx0ICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcblx0ICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuXHQgICAgICAgIF9wYXJlbnQudW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pc0Z1bmN0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBpc09iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdHZhciBpc0Z1bmN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIFVuc3Vic2NyaXB0aW9uRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHQvKipcblx0ICogUmVwcmVzZW50cyBhIGRpc3Bvc2FibGUgcmVzb3VyY2UsIHN1Y2ggYXMgdGhlIGV4ZWN1dGlvbiBvZiBhbiBPYnNlcnZhYmxlLiBBXG5cdCAqIFN1YnNjcmlwdGlvbiBoYXMgb25lIGltcG9ydGFudCBtZXRob2QsIGB1bnN1YnNjcmliZWAsIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRcblx0ICogYW5kIGp1c3QgZGlzcG9zZXMgdGhlIHJlc291cmNlIGhlbGQgYnkgdGhlIHN1YnNjcmlwdGlvbi5cblx0ICpcblx0ICogQWRkaXRpb25hbGx5LCBzdWJzY3JpcHRpb25zIG1heSBiZSBncm91cGVkIHRvZ2V0aGVyIHRocm91Z2ggdGhlIGBhZGQoKWBcblx0ICogbWV0aG9kLCB3aGljaCB3aWxsIGF0dGFjaCBhIGNoaWxkIFN1YnNjcmlwdGlvbiB0byB0aGUgY3VycmVudCBTdWJzY3JpcHRpb24uXG5cdCAqIFdoZW4gYSBTdWJzY3JpcHRpb24gaXMgdW5zdWJzY3JpYmVkLCBhbGwgaXRzIGNoaWxkcmVuIChhbmQgaXRzIGdyYW5kY2hpbGRyZW4pXG5cdCAqIHdpbGwgYmUgdW5zdWJzY3JpYmVkIGFzIHdlbGwuXG5cdCAqXG5cdCAqIEBjbGFzcyBTdWJzY3JpcHRpb25cblx0ICovXG5cdHZhciBTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFt1bnN1YnNjcmliZV0gQSBmdW5jdGlvbiBkZXNjcmliaW5nIGhvdyB0b1xuXHQgICAgICogcGVyZm9ybSB0aGUgZGlzcG9zYWwgb2YgcmVzb3VyY2VzIHdoZW4gdGhlIGB1bnN1YnNjcmliZWAgbWV0aG9kIGlzIGNhbGxlZC5cblx0ICAgICAqL1xuXHQgICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKHVuc3Vic2NyaWJlKSB7XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgdGhpcyBTdWJzY3JpcHRpb24gaGFzIGFscmVhZHkgYmVlbiB1bnN1YnNjcmliZWQuXG5cdCAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG5cdCAgICAgICAgICovXG5cdCAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgIGlmICh1bnN1YnNjcmliZSkge1xuXHQgICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IHVuc3Vic2NyaWJlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogRGlzcG9zZXMgdGhlIHJlc291cmNlcyBoZWxkIGJ5IHRoZSBzdWJzY3JpcHRpb24uIE1heSwgZm9yIGluc3RhbmNlLCBjYW5jZWxcblx0ICAgICAqIGFuIG9uZ29pbmcgT2JzZXJ2YWJsZSBleGVjdXRpb24gb3IgY2FuY2VsIGFueSBvdGhlciB0eXBlIG9mIHdvcmsgdGhhdFxuXHQgICAgICogc3RhcnRlZCB3aGVuIHRoZSBTdWJzY3JpcHRpb24gd2FzIGNyZWF0ZWQuXG5cdCAgICAgKiBAcmV0dXJuIHt2b2lkfVxuXHQgICAgICovXG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBoYXNFcnJvcnMgPSBmYWxzZTtcblx0ICAgICAgICB2YXIgZXJyb3JzO1xuXHQgICAgICAgIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgX3Vuc3Vic2NyaWJlID0gX2EuX3Vuc3Vic2NyaWJlLCBfc3Vic2NyaXB0aW9ucyA9IF9hLl9zdWJzY3JpcHRpb25zO1xuXHQgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBudWxsO1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihfdW5zdWJzY3JpYmUpKSB7XG5cdCAgICAgICAgICAgIHZhciB0cmlhbCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goX3Vuc3Vic2NyaWJlKS5jYWxsKHRoaXMpO1xuXHQgICAgICAgICAgICBpZiAodHJpYWwgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAoZXJyb3JzID0gZXJyb3JzIHx8IFtdKS5wdXNoKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KF9zdWJzY3JpcHRpb25zKSkge1xuXHQgICAgICAgICAgICB2YXIgaW5kZXggPSAtMTtcblx0ICAgICAgICAgICAgdmFyIGxlbiA9IF9zdWJzY3JpcHRpb25zLmxlbmd0aDtcblx0ICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzdWIgPSBfc3Vic2NyaXB0aW9uc1tpbmRleF07XG5cdCAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3RfMS5pc09iamVjdChzdWIpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyaWFsID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzdWIudW5zdWJzY3JpYmUpLmNhbGwoc3ViKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodHJpYWwgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcl8xLlVuc3Vic2NyaXB0aW9uRXJyb3IpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoZXJyLmVycm9ycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChoYXNFcnJvcnMpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vic2NyaXB0aW9uRXJyb3JfMS5VbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogQWRkcyBhIHRlYXIgZG93biB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZSB1bnN1YnNjcmliZSgpIG9mIHRoaXNcblx0ICAgICAqIFN1YnNjcmlwdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBJZiB0aGUgdGVhciBkb3duIGJlaW5nIGFkZGVkIGlzIGEgc3Vic2NyaXB0aW9uIHRoYXQgaXMgYWxyZWFkeVxuXHQgICAgICogdW5zdWJzY3JpYmVkLCBpcyB0aGUgc2FtZSByZWZlcmVuY2UgYGFkZGAgaXMgYmVpbmcgY2FsbGVkIG9uLCBvciBpc1xuXHQgICAgICogYFN1YnNjcmlwdGlvbi5FTVBUWWAsIGl0IHdpbGwgbm90IGJlIGFkZGVkLlxuXHQgICAgICpcblx0ICAgICAqIElmIHRoaXMgc3Vic2NyaXB0aW9uIGlzIGFscmVhZHkgaW4gYW4gYGlzVW5zdWJzY3JpYmVkYCBzdGF0ZSwgdGhlIHBhc3NlZFxuXHQgICAgICogdGVhciBkb3duIGxvZ2ljIHdpbGwgYmUgZXhlY3V0ZWQgaW1tZWRpYXRlbHkuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtUZWFyZG93bkxvZ2ljfSB0ZWFyZG93biBUaGUgYWRkaXRpb25hbCBsb2dpYyB0byBleGVjdXRlIG9uXG5cdCAgICAgKiB0ZWFyZG93bi5cblx0ICAgICAqIEByZXR1cm4ge1N1YnNjcmlwdGlvbn0gUmV0dXJucyB0aGUgU3Vic2NyaXB0aW9uIHVzZWQgb3IgY3JlYXRlZCB0byBiZVxuXHQgICAgICogYWRkZWQgdG8gdGhlIGlubmVyIHN1YnNjcmlwdGlvbnMgbGlzdC4gVGhpcyBTdWJzY3JpcHRpb24gY2FuIGJlIHVzZWQgd2l0aFxuXHQgICAgICogYHJlbW92ZSgpYCB0byByZW1vdmUgdGhlIHBhc3NlZCB0ZWFyZG93biBsb2dpYyBmcm9tIHRoZSBpbm5lciBzdWJzY3JpcHRpb25zXG5cdCAgICAgKiBsaXN0LlxuXHQgICAgICovXG5cdCAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0ZWFyZG93bikge1xuXHQgICAgICAgIGlmICghdGVhcmRvd24gfHwgKHRlYXJkb3duID09PSB0aGlzKSB8fCAodGVhcmRvd24gPT09IFN1YnNjcmlwdGlvbi5FTVBUWSkpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgc3ViID0gdGVhcmRvd247XG5cdCAgICAgICAgc3dpdGNoICh0eXBlb2YgdGVhcmRvd24pIHtcblx0ICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuXHQgICAgICAgICAgICAgICAgc3ViID0gbmV3IFN1YnNjcmlwdGlvbih0ZWFyZG93bik7XG5cdCAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG5cdCAgICAgICAgICAgICAgICBpZiAoc3ViLmlzVW5zdWJzY3JpYmVkIHx8IHR5cGVvZiBzdWIudW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICh0aGlzLl9zdWJzY3JpcHRpb25zIHx8ICh0aGlzLl9zdWJzY3JpcHRpb25zID0gW10pKS5wdXNoKHN1Yik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5yZWNvZ25pemVkIHRlYXJkb3duICcgKyB0ZWFyZG93biArICcgYWRkZWQgdG8gU3Vic2NyaXB0aW9uLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gc3ViO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogUmVtb3ZlcyBhIFN1YnNjcmlwdGlvbiBmcm9tIHRoZSBpbnRlcm5hbCBsaXN0IG9mIHN1YnNjcmlwdGlvbnMgdGhhdCB3aWxsXG5cdCAgICAgKiB1bnN1YnNjcmliZSBkdXJpbmcgdGhlIHVuc3Vic2NyaWJlIHByb2Nlc3Mgb2YgdGhpcyBTdWJzY3JpcHRpb24uXG5cdCAgICAgKiBAcGFyYW0ge1N1YnNjcmlwdGlvbn0gc3Vic2NyaXB0aW9uIFRoZSBzdWJzY3JpcHRpb24gdG8gcmVtb3ZlLlxuXHQgICAgICogQHJldHVybiB7dm9pZH1cblx0ICAgICAqL1xuXHQgICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgLy8gSEFDSzogVGhpcyBtaWdodCBiZSByZWR1bmRhbnQgYmVjYXVzZSBvZiB0aGUgbG9naWMgaW4gYGFkZCgpYFxuXHQgICAgICAgIGlmIChzdWJzY3JpcHRpb24gPT0gbnVsbCB8fCAoc3Vic2NyaXB0aW9uID09PSB0aGlzKSB8fCAoc3Vic2NyaXB0aW9uID09PSBTdWJzY3JpcHRpb24uRU1QVFkpKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zO1xuXHQgICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG5cdCAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25JbmRleCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSW5kZXggIT09IC0xKSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JbmRleCwgMSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3Vic2NyaXB0aW9uLkVNUFRZID0gKGZ1bmN0aW9uIChlbXB0eSkge1xuXHQgICAgICAgIGVtcHR5LmlzVW5zdWJzY3JpYmVkID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gZW1wdHk7XG5cdCAgICB9KG5ldyBTdWJzY3JpcHRpb24oKSkpO1xuXHQgICAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcblx0fSgpKTtcblx0ZXhwb3J0cy5TdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb247XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmlwdGlvbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZXhwb3J0cy5pc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggJiYgdHlwZW9mIHgubGVuZ3RoID09PSAnbnVtYmVyJzsgfSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXkuanMubWFwXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHgpIHtcblx0ICAgIHJldHVybiB4ICE9IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnO1xuXHR9XG5cdGV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aXNPYmplY3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciB0cnlDYXRjaFRhcmdldDtcblx0ZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIHRyeUNhdGNoVGFyZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBjYXRjaCAoZSkge1xuXHQgICAgICAgIGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSA9IGU7XG5cdCAgICAgICAgcmV0dXJuIGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3Q7XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gdHJ5Q2F0Y2goZm4pIHtcblx0ICAgIHRyeUNhdGNoVGFyZ2V0ID0gZm47XG5cdCAgICByZXR1cm4gdHJ5Q2F0Y2hlcjtcblx0fVxuXHRleHBvcnRzLnRyeUNhdGNoID0gdHJ5Q2F0Y2g7XG5cdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dHJ5Q2F0Y2guanMubWFwXG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdC8vIHR5cGVvZiBhbnkgc28gdGhhdCBpdCB3ZSBkb24ndCBoYXZlIHRvIGNhc3Qgd2hlbiBjb21wYXJpbmcgYSByZXN1bHQgdG8gdGhlIGVycm9yIG9iamVjdFxuXHRleHBvcnRzLmVycm9yT2JqZWN0ID0geyBlOiB7fSB9O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvck9iamVjdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0LyoqXG5cdCAqIEFuIGVycm9yIHRocm93biB3aGVuIG9uZSBvciBtb3JlIGVycm9ycyBoYXZlIG9jY3VycmVkIGR1cmluZyB0aGVcblx0ICogYHVuc3Vic2NyaWJlYCBvZiBhIHtAbGluayBTdWJzY3JpcHRpb259LlxuXHQgKi9cblx0dmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFVuc3Vic2NyaXB0aW9uRXJyb3IsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBVbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycykge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuXHQgICAgICAgIHRoaXMubmFtZSA9ICdVbnN1YnNjcmlwdGlvbkVycm9yJztcblx0ICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvcnMgPyBlcnJvcnMubGVuZ3RoICsgXCIgZXJyb3JzIG9jY3VycmVkIGR1cmluZyB1bnN1YnNjcmlwdGlvbjpcXG5cIiArIGVycm9ycy5tYXAoZnVuY3Rpb24gKGVyciwgaSkgeyByZXR1cm4gKChpICsgMSkgKyBcIikgXCIgKyBlcnIudG9TdHJpbmcoKSk7IH0pLmpvaW4oJ1xcbicpIDogJyc7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gVW5zdWJzY3JpcHRpb25FcnJvcjtcblx0fShFcnJvcikpO1xuXHRleHBvcnRzLlVuc3Vic2NyaXB0aW9uRXJyb3IgPSBVbnN1YnNjcmlwdGlvbkVycm9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1VbnN1YnNjcmlwdGlvbkVycm9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgcm9vdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIFN5bWJvbCA9IHJvb3RfMS5yb290LlN5bWJvbDtcblx0ZXhwb3J0cy4kJHJ4U3Vic2NyaWJlciA9ICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nKSA/XG5cdCAgICBTeW1ib2wuZm9yKCdyeFN1YnNjcmliZXInKSA6ICdAQHJ4U3Vic2NyaWJlcic7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ4U3Vic2NyaWJlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZXhwb3J0cy5lbXB0eSA9IHtcblx0ICAgIGlzVW5zdWJzY3JpYmVkOiB0cnVlLFxuXHQgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7IH0sXG5cdCAgICBlcnJvcjogZnVuY3Rpb24gKGVycikgeyB0aHJvdyBlcnI7IH0sXG5cdCAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgeyB9XG5cdH07XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU3ViamVjdFN1YnNjcmlwdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU3ViamVjdFN1YnNjcmlwdGlvbiwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpcHRpb24oc3ViamVjdCwgb2JzZXJ2ZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnN1YmplY3QgPSBzdWJqZWN0O1xuXHQgICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcblx0ICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBTdWJqZWN0U3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSB0cnVlO1xuXHQgICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0O1xuXHQgICAgICAgIHZhciBvYnNlcnZlcnMgPSBzdWJqZWN0Lm9ic2VydmVycztcblx0ICAgICAgICB0aGlzLnN1YmplY3QgPSBudWxsO1xuXHQgICAgICAgIGlmICghb2JzZXJ2ZXJzIHx8IG9ic2VydmVycy5sZW5ndGggPT09IDAgfHwgc3ViamVjdC5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBzdWJzY3JpYmVySW5kZXggPSBvYnNlcnZlcnMuaW5kZXhPZih0aGlzLm9ic2VydmVyKTtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlckluZGV4ICE9PSAtMSkge1xuXHQgICAgICAgICAgICBvYnNlcnZlcnMuc3BsaWNlKHN1YnNjcmliZXJJbmRleCwgMSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTdWJqZWN0U3Vic2NyaXB0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHRleHBvcnRzLlN1YmplY3RTdWJzY3JpcHRpb24gPSBTdWJqZWN0U3Vic2NyaXB0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1TdWJqZWN0U3Vic2NyaXB0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRmdW5jdGlvbiB0aHJvd0Vycm9yKGUpIHsgdGhyb3cgZTsgfVxuXHRleHBvcnRzLnRocm93RXJyb3IgPSB0aHJvd0Vycm9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aHJvd0Vycm9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHQvKipcblx0ICogQW4gZXJyb3IgdGhyb3duIHdoZW4gYW4gYWN0aW9uIGlzIGludmFsaWQgYmVjYXVzZSB0aGUgb2JqZWN0IGhhcyBiZWVuXG5cdCAqIHVuc3Vic2NyaWJlZC5cblx0ICpcblx0ICogQHNlZSB7QGxpbmsgU3ViamVjdH1cblx0ICogQHNlZSB7QGxpbmsgQmVoYXZpb3JTdWJqZWN0fVxuXHQgKlxuXHQgKiBAY2xhc3MgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3Jcblx0ICovXG5cdHZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAnb2JqZWN0IHVuc3Vic2NyaWJlZCcpO1xuXHQgICAgICAgIHRoaXMubmFtZSA9ICdPYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3I7XG5cdH0oRXJyb3IpKTtcblx0ZXhwb3J0cy5PYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1PYmplY3RVbnN1YnNjcmliZWRFcnJvci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDIyICovLFxuLyogMjMgKi8sXG4vKiAyNCAqLyxcbi8qIDI1ICovLFxuLyogMjYgKi8sXG4vKiAyNyAqLyxcbi8qIDI4ICovLFxuLyogMjkgKi8sXG4vKiAzMCAqLyxcbi8qIDMxICovLFxuLyogMzIgKi8sXG4vKiAzMyAqLyxcbi8qIDM0ICovLFxuLyogMzUgKi8sXG4vKiAzNiAqLyxcbi8qIDM3ICovLFxuLyogMzggKi8sXG4vKiAzOSAqLyxcbi8qIDQwICovLFxuLyogNDEgKi8sXG4vKiA0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cdENvcHlyaWdodCAoQykgTWljcm9zb2Z0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5cdExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG5cdHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcblx0TGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHRcclxuXHRUSElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcblx0S0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5cdFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcblx0TUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHRcclxuXHRTZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuXHRhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcblx0KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHR2YXIgUmVmbGVjdDtcclxuXHQoZnVuY3Rpb24gKFJlZmxlY3QpIHtcclxuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblx0ICAgIHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xyXG5cdCAgICAvLyBmZWF0dXJlIHRlc3QgZm9yIE9iamVjdC5jcmVhdGUgc3VwcG9ydFxyXG5cdCAgICB2YXIgc3VwcG9ydHNDcmVhdGUgPSB0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gXCJmdW5jdGlvblwiO1xyXG5cdCAgICAvLyBmZWF0dXJlIHRlc3QgZm9yIF9fcHJvdG9fXyBzdXBwb3J0XHJcblx0ICAgIHZhciBzdXBwb3J0c1Byb3RvID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBzZW50aW5lbCA9IHt9O1xyXG5cdCAgICAgICAgZnVuY3Rpb24gX18oKSB7IH1cclxuXHQgICAgICAgIF9fLnByb3RvdHlwZSA9IHNlbnRpbmVsO1xyXG5cdCAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IF9fKCk7XHJcblx0ICAgICAgICByZXR1cm4gaW5zdGFuY2UuX19wcm90b19fID09PSBzZW50aW5lbDtcclxuXHQgICAgfSkoKTtcclxuXHQgICAgLy8gY3JlYXRlIGFuIG9iamVjdCBpbiBkaWN0aW9uYXJ5IG1vZGUgKGEuay5hLiBcInNsb3dcIiBtb2RlIGluIHY4KVxyXG5cdCAgICB2YXIgY3JlYXRlRGljdGlvbmFyeSA9IHN1cHBvcnRzQ3JlYXRlID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gTWFrZURpY3Rpb25hcnkoT2JqZWN0LmNyZWF0ZShudWxsKSk7IH0gOlxyXG5cdCAgICAgICAgc3VwcG9ydHNQcm90byA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE1ha2VEaWN0aW9uYXJ5KHsgX19wcm90b19fOiBudWxsIH0pOyB9IDpcclxuXHQgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBNYWtlRGljdGlvbmFyeSh7fSk7IH07XHJcblx0ICAgIHZhciBIYXNoTWFwO1xyXG5cdCAgICAoZnVuY3Rpb24gKEhhc2hNYXApIHtcclxuXHQgICAgICAgIHZhciBkb3duTGV2ZWwgPSAhc3VwcG9ydHNDcmVhdGUgJiYgIXN1cHBvcnRzUHJvdG87XHJcblx0ICAgICAgICBIYXNoTWFwLmhhcyA9IGRvd25MZXZlbFxyXG5cdCAgICAgICAgICAgID8gZnVuY3Rpb24gKG1hcCwga2V5KSB7IHJldHVybiBoYXNPd24uY2FsbChtYXAsIGtleSk7IH1cclxuXHQgICAgICAgICAgICA6IGZ1bmN0aW9uIChtYXAsIGtleSkgeyByZXR1cm4ga2V5IGluIG1hcDsgfTtcclxuXHQgICAgICAgIEhhc2hNYXAuZ2V0ID0gZG93bkxldmVsXHJcblx0ICAgICAgICAgICAgPyBmdW5jdGlvbiAobWFwLCBrZXkpIHsgcmV0dXJuIGhhc093bi5jYWxsKG1hcCwga2V5KSA/IG1hcFtrZXldIDogdW5kZWZpbmVkOyB9XHJcblx0ICAgICAgICAgICAgOiBmdW5jdGlvbiAobWFwLCBrZXkpIHsgcmV0dXJuIG1hcFtrZXldOyB9O1xyXG5cdCAgICB9KShIYXNoTWFwIHx8IChIYXNoTWFwID0ge30pKTtcclxuXHQgICAgLy8gTG9hZCBnbG9iYWwgb3Igc2hpbSB2ZXJzaW9ucyBvZiBNYXAsIFNldCwgYW5kIFdlYWtNYXBcclxuXHQgICAgdmFyIGZ1bmN0aW9uUHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKEZ1bmN0aW9uKTtcclxuXHQgICAgdmFyIF9NYXAgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBNYXAgOiBDcmVhdGVNYXBQb2x5ZmlsbCgpO1xyXG5cdCAgICB2YXIgX1NldCA9IHR5cGVvZiBTZXQgPT09IFwiZnVuY3Rpb25cIiA/IFNldCA6IENyZWF0ZVNldFBvbHlmaWxsKCk7XHJcblx0ICAgIHZhciBfV2Vha01hcCA9IHR5cGVvZiBXZWFrTWFwID09PSBcImZ1bmN0aW9uXCIgPyBXZWFrTWFwIDogQ3JlYXRlV2Vha01hcFBvbHlmaWxsKCk7XHJcblx0ICAgIC8vIFtbTWV0YWRhdGFdXSBpbnRlcm5hbCBzbG90XHJcblx0ICAgIHZhciBNZXRhZGF0YSA9IG5ldyBfV2Vha01hcCgpO1xyXG5cdCAgICAvKipcclxuXHQgICAgICAqIEFwcGxpZXMgYSBzZXQgb2YgZGVjb3JhdG9ycyB0byBhIHByb3BlcnR5IG9mIGEgdGFyZ2V0IG9iamVjdC5cclxuXHQgICAgICAqIEBwYXJhbSBkZWNvcmF0b3JzIEFuIGFycmF5IG9mIGRlY29yYXRvcnMuXHJcblx0ICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0LlxyXG5cdCAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgdG8gZGVjb3JhdGUuXHJcblx0ICAgICAgKiBAcGFyYW0gdGFyZ2V0RGVzY3JpcHRvciAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIGZvciB0aGUgdGFyZ2V0IGtleVxyXG5cdCAgICAgICogQHJlbWFya3MgRGVjb3JhdG9ycyBhcmUgYXBwbGllZCBpbiByZXZlcnNlIG9yZGVyLlxyXG5cdCAgICAgICogQGV4YW1wbGVcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuXHQgICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcblx0ICAgICAgKiAgICAgfVxyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG5cdCAgICAgICogICAgIEV4YW1wbGUgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnNBcnJheSwgRXhhbXBsZSk7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnNBcnJheSwgRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuXHQgICAgICAqICAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnNBcnJheSwgRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcblx0ICAgICAgKiAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIsXHJcblx0ICAgICAgKiAgICAgICAgIFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9yc0FycmF5LCBFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiLFxyXG5cdCAgICAgICogICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKSkpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuXHQgICAgICAqICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIsXHJcblx0ICAgICAgKiAgICAgICAgIFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9yc0FycmF5LCBFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIixcclxuXHQgICAgICAqICAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpKSk7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICovXHJcblx0ICAgIGZ1bmN0aW9uIGRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwgdGFyZ2V0S2V5LCB0YXJnZXREZXNjcmlwdG9yKSB7XHJcblx0ICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldERlc2NyaXB0b3IpKSB7XHJcblx0ICAgICAgICAgICAgaWYgKCFJc0FycmF5KGRlY29yYXRvcnMpKVxyXG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICAgICAgaWYgKElzVW5kZWZpbmVkKHRhcmdldEtleSkpXHJcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHQgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldERlc2NyaXB0b3IpKVxyXG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG5cdCAgICAgICAgICAgIHJldHVybiBEZWNvcmF0ZVByb3BlcnR5V2l0aERlc2NyaXB0b3IoZGVjb3JhdG9ycywgdGFyZ2V0LCB0YXJnZXRLZXksIHRhcmdldERlc2NyaXB0b3IpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpIHtcclxuXHQgICAgICAgICAgICBpZiAoIUlzQXJyYXkoZGVjb3JhdG9ycykpXHJcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHQgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXHJcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHQgICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIERlY29yYXRlUHJvcGVydHlXaXRob3V0RGVzY3JpcHRvcihkZWNvcmF0b3JzLCB0YXJnZXQsIHRhcmdldEtleSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICBpZiAoIUlzQXJyYXkoZGVjb3JhdG9ycykpXHJcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHQgICAgICAgICAgICBpZiAoIUlzQ29uc3RydWN0b3IodGFyZ2V0KSlcclxuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG5cdCAgICAgICAgICAgIHJldHVybiBEZWNvcmF0ZUNvbnN0cnVjdG9yKGRlY29yYXRvcnMsIHRhcmdldCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH1cclxuXHQgICAgUmVmbGVjdC5kZWNvcmF0ZSA9IGRlY29yYXRlO1xyXG5cdCAgICAvKipcclxuXHQgICAgICAqIEEgZGVmYXVsdCBtZXRhZGF0YSBkZWNvcmF0b3IgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIG9uIGEgY2xhc3MsIGNsYXNzIG1lbWJlciwgb3IgcGFyYW1ldGVyLlxyXG5cdCAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IFRoZSBrZXkgZm9yIHRoZSBtZXRhZGF0YSBlbnRyeS5cclxuXHQgICAgICAqIEBwYXJhbSBtZXRhZGF0YVZhbHVlIFRoZSB2YWx1ZSBmb3IgdGhlIG1ldGFkYXRhIGVudHJ5LlxyXG5cdCAgICAgICogQHJldHVybnMgQSBkZWNvcmF0b3IgZnVuY3Rpb24uXHJcblx0ICAgICAgKiBAcmVtYXJrc1xyXG5cdCAgICAgICogSWYgYG1ldGFkYXRhS2V5YCBpcyBhbHJlYWR5IGRlZmluZWQgZm9yIHRoZSB0YXJnZXQgYW5kIHRhcmdldCBrZXksIHRoZVxyXG5cdCAgICAgICogbWV0YWRhdGFWYWx1ZSBmb3IgdGhhdCBrZXkgd2lsbCBiZSBvdmVyd3JpdHRlbi5cclxuXHQgICAgICAqIEBleGFtcGxlXHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcblx0ICAgICAgKiAgICAgQFJlZmxlY3QubWV0YWRhdGEoa2V5LCB2YWx1ZSlcclxuXHQgICAgICAqICAgICBjbGFzcyBFeGFtcGxlIHtcclxuXHQgICAgICAqICAgICB9XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvciwgVHlwZVNjcmlwdCBvbmx5KVxyXG5cdCAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG5cdCAgICAgICogICAgICAgICBAUmVmbGVjdC5tZXRhZGF0YShrZXksIHZhbHVlKVxyXG5cdCAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljUHJvcGVydHk7XHJcblx0ICAgICAgKiAgICAgfVxyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlLCBUeXBlU2NyaXB0IG9ubHkpXHJcblx0ICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcblx0ICAgICAgKiAgICAgICAgIEBSZWZsZWN0Lm1ldGFkYXRhKGtleSwgdmFsdWUpXHJcblx0ICAgICAgKiAgICAgICAgIHByb3BlcnR5O1xyXG5cdCAgICAgICogICAgIH1cclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICBjbGFzcyBFeGFtcGxlIHtcclxuXHQgICAgICAqICAgICAgICAgQFJlZmxlY3QubWV0YWRhdGEoa2V5LCB2YWx1ZSlcclxuXHQgICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZCgpIHsgfVxyXG5cdCAgICAgICogICAgIH1cclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcblx0ICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcblx0ICAgICAgKiAgICAgICAgIEBSZWZsZWN0Lm1ldGFkYXRhKGtleSwgdmFsdWUpXHJcblx0ICAgICAgKiAgICAgICAgIG1ldGhvZCgpIHsgfVxyXG5cdCAgICAgICogICAgIH1cclxuXHQgICAgICAqXHJcblx0ICAgICAgKi9cclxuXHQgICAgZnVuY3Rpb24gbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuXHQgICAgICAgIGZ1bmN0aW9uIGRlY29yYXRvcih0YXJnZXQsIHRhcmdldEtleSkge1xyXG5cdCAgICAgICAgICAgIGlmICghSXNVbmRlZmluZWQodGFyZ2V0S2V5KSkge1xyXG5cdCAgICAgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXHJcblx0ICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuXHQgICAgICAgICAgICAgICAgT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbHNlIHtcclxuXHQgICAgICAgICAgICAgICAgaWYgKCFJc0NvbnN0cnVjdG9yKHRhcmdldCkpXHJcblx0ICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICAgICAgICAgIE9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUsIHRhcmdldCwgLyp0YXJnZXRLZXkqLyB1bmRlZmluZWQpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBkZWNvcmF0b3I7XHJcblx0ICAgIH1cclxuXHQgICAgUmVmbGVjdC5tZXRhZGF0YSA9IG1ldGFkYXRhO1xyXG5cdCAgICAvKipcclxuXHQgICAgICAqIERlZmluZSBhIHVuaXF1ZSBtZXRhZGF0YSBlbnRyeSBvbiB0aGUgdGFyZ2V0LlxyXG5cdCAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxyXG5cdCAgICAgICogQHBhcmFtIG1ldGFkYXRhVmFsdWUgQSB2YWx1ZSB0aGF0IGNvbnRhaW5zIGF0dGFjaGVkIG1ldGFkYXRhLlxyXG5cdCAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0byBkZWZpbmUgbWV0YWRhdGEuXHJcblx0ICAgICAgKiBAcGFyYW0gdGFyZ2V0S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cclxuXHQgICAgICAqIEBleGFtcGxlXHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuXHQgICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuXHQgICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuXHQgICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgIH1cclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuXHQgICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZSk7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuXHQgICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcblx0ICAgICAgKiAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIG9wdGlvbnMsIEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuXHQgICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBkZWNvcmF0b3IgZmFjdG9yeSBhcyBtZXRhZGF0YS1wcm9kdWNpbmcgYW5ub3RhdGlvbi5cclxuXHQgICAgICAqICAgICBmdW5jdGlvbiBNeUFubm90YXRpb24ob3B0aW9ucyk6IERlY29yYXRvciB7XHJcblx0ICAgICAgKiAgICAgICAgIHJldHVybiAodGFyZ2V0LCBrZXk/KSA9PiBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgdGFyZ2V0LCBrZXkpO1xyXG5cdCAgICAgICogICAgIH1cclxuXHQgICAgICAqXHJcblx0ICAgICAgKi9cclxuXHQgICAgZnVuY3Rpb24gZGVmaW5lTWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUsIHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcblx0ICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXHJcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG5cdCAgICAgICAgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKVxyXG5cdCAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuXHQgICAgICAgIHJldHVybiBPcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCB0YXJnZXQsIHRhcmdldEtleSk7XHJcblx0ICAgIH1cclxuXHQgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YSA9IGRlZmluZU1ldGFkYXRhO1xyXG5cdCAgICAvKipcclxuXHQgICAgICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHRhcmdldCBvYmplY3Qgb3IgaXRzIHByb3RvdHlwZSBjaGFpbiBoYXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIGtleSBkZWZpbmVkLlxyXG5cdCAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxyXG5cdCAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cclxuXHQgICAgICAqIEBwYXJhbSB0YXJnZXRLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxyXG5cdCAgICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBtZXRhZGF0YSBrZXkgd2FzIGRlZmluZWQgb24gdGhlIHRhcmdldCBvYmplY3Qgb3IgaXRzIHByb3RvdHlwZSBjaGFpbjsgb3RoZXJ3aXNlLCBgZmFsc2VgLlxyXG5cdCAgICAgICogQGV4YW1wbGVcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuXHQgICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcblx0ICAgICAgKiAgICAgfVxyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0Lmhhc01ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICovXHJcblx0ICAgIGZ1bmN0aW9uIGhhc01ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG5cdCAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHQgICAgICAgIGlmICghSXNVbmRlZmluZWQodGFyZ2V0S2V5KSlcclxuXHQgICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcblx0ICAgICAgICByZXR1cm4gT3JkaW5hcnlIYXNNZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG5cdCAgICB9XHJcblx0ICAgIFJlZmxlY3QuaGFzTWV0YWRhdGEgPSBoYXNNZXRhZGF0YTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB0YXJnZXQgb2JqZWN0IGhhcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEga2V5IGRlZmluZWQuXHJcblx0ICAgICAgKiBAcGFyYW0gbWV0YWRhdGFLZXkgQSBrZXkgdXNlZCB0byBzdG9yZSBhbmQgcmV0cmlldmUgbWV0YWRhdGEuXHJcblx0ICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxyXG5cdCAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXHJcblx0ICAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG1ldGFkYXRhIGtleSB3YXMgZGVmaW5lZCBvbiB0aGUgdGFyZ2V0IG9iamVjdDsgb3RoZXJ3aXNlLCBgZmFsc2VgLlxyXG5cdCAgICAgICogQGV4YW1wbGVcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuXHQgICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcblx0ICAgICAgKiAgICAgfVxyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzT3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzT3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzT3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0Lmhhc093bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzT3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICovXHJcblx0ICAgIGZ1bmN0aW9uIGhhc093bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG5cdCAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHQgICAgICAgIGlmICghSXNVbmRlZmluZWQodGFyZ2V0S2V5KSlcclxuXHQgICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcblx0ICAgICAgICByZXR1cm4gT3JkaW5hcnlIYXNPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG5cdCAgICB9XHJcblx0ICAgIFJlZmxlY3QuaGFzT3duTWV0YWRhdGEgPSBoYXNPd25NZXRhZGF0YTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAgKiBHZXRzIHRoZSBtZXRhZGF0YSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIGtleSBvbiB0aGUgdGFyZ2V0IG9iamVjdCBvciBpdHMgcHJvdG90eXBlIGNoYWluLlxyXG5cdCAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxyXG5cdCAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cclxuXHQgICAgICAqIEBwYXJhbSB0YXJnZXRLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxyXG5cdCAgICAgICogQHJldHVybnMgVGhlIG1ldGFkYXRhIHZhbHVlIGZvciB0aGUgbWV0YWRhdGEga2V5IGlmIGZvdW5kOyBvdGhlcndpc2UsIGB1bmRlZmluZWRgLlxyXG5cdCAgICAgICogQGV4YW1wbGVcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuXHQgICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcblx0ICAgICAgKiAgICAgfVxyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICovXHJcblx0ICAgIGZ1bmN0aW9uIGdldE1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG5cdCAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHQgICAgICAgIGlmICghSXNVbmRlZmluZWQodGFyZ2V0S2V5KSlcclxuXHQgICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcblx0ICAgICAgICByZXR1cm4gT3JkaW5hcnlHZXRNZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG5cdCAgICB9XHJcblx0ICAgIFJlZmxlY3QuZ2V0TWV0YWRhdGEgPSBnZXRNZXRhZGF0YTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAgKiBHZXRzIHRoZSBtZXRhZGF0YSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIGtleSBvbiB0aGUgdGFyZ2V0IG9iamVjdC5cclxuXHQgICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cclxuXHQgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXHJcblx0ICAgICAgKiBAcGFyYW0gdGFyZ2V0S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cclxuXHQgICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSB2YWx1ZSBmb3IgdGhlIG1ldGFkYXRhIGtleSBpZiBmb3VuZDsgb3RoZXJ3aXNlLCBgdW5kZWZpbmVkYC5cclxuXHQgICAgICAqIEBleGFtcGxlXHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuXHQgICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuXHQgICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuXHQgICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgIH1cclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSk7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcblx0ICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqL1xyXG5cdCAgICBmdW5jdGlvbiBnZXRPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuXHQgICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSlcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpXHJcblx0ICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG5cdCAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0T3duTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KTtcclxuXHQgICAgfVxyXG5cdCAgICBSZWZsZWN0LmdldE93bk1ldGFkYXRhID0gZ2V0T3duTWV0YWRhdGE7XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgICogR2V0cyB0aGUgbWV0YWRhdGEga2V5cyBkZWZpbmVkIG9uIHRoZSB0YXJnZXQgb2JqZWN0IG9yIGl0cyBwcm90b3R5cGUgY2hhaW4uXHJcblx0ICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxyXG5cdCAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXHJcblx0ICAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB1bmlxdWUgbWV0YWRhdGEga2V5cy5cclxuXHQgICAgICAqIEBleGFtcGxlXHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuXHQgICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuXHQgICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuXHQgICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgIH1cclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyhFeGFtcGxlKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKEV4YW1wbGUsIFwic3RhdGljUHJvcGVydHlcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXHJcblx0ICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMoRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcblx0ICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMoRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKi9cclxuXHQgICAgZnVuY3Rpb24gZ2V0TWV0YWRhdGFLZXlzKHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcblx0ICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXHJcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG5cdCAgICAgICAgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKVxyXG5cdCAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuXHQgICAgICAgIHJldHVybiBPcmRpbmFyeU1ldGFkYXRhS2V5cyh0YXJnZXQsIHRhcmdldEtleSk7XHJcblx0ICAgIH1cclxuXHQgICAgUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMgPSBnZXRNZXRhZGF0YUtleXM7XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgICogR2V0cyB0aGUgdW5pcXVlIG1ldGFkYXRhIGtleXMgZGVmaW5lZCBvbiB0aGUgdGFyZ2V0IG9iamVjdC5cclxuXHQgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXHJcblx0ICAgICAgKiBAcGFyYW0gdGFyZ2V0S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cclxuXHQgICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHVuaXF1ZSBtZXRhZGF0YSBrZXlzLlxyXG5cdCAgICAgICogQGV4YW1wbGVcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuXHQgICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcblx0ICAgICAgKiAgICAgfVxyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGFLZXlzKEV4YW1wbGUpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXHJcblx0ICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMoRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhS2V5cyhFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhS2V5cyhFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcblx0ICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMoRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqL1xyXG5cdCAgICBmdW5jdGlvbiBnZXRPd25NZXRhZGF0YUtleXModGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuXHQgICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSlcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpXHJcblx0ICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG5cdCAgICAgICAgcmV0dXJuIE9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKHRhcmdldCwgdGFyZ2V0S2V5KTtcclxuXHQgICAgfVxyXG5cdCAgICBSZWZsZWN0LmdldE93bk1ldGFkYXRhS2V5cyA9IGdldE93bk1ldGFkYXRhS2V5cztcclxuXHQgICAgLyoqXHJcblx0ICAgICAgKiBEZWxldGVzIHRoZSBtZXRhZGF0YSBlbnRyeSBmcm9tIHRoZSB0YXJnZXQgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGtleS5cclxuXHQgICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cclxuXHQgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXHJcblx0ICAgICAgKiBAcGFyYW0gdGFyZ2V0S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cclxuXHQgICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgbWV0YWRhdGEgZW50cnkgd2FzIGZvdW5kIGFuZCBkZWxldGVkOyBvdGhlcndpc2UsIGZhbHNlLlxyXG5cdCAgICAgICogQGV4YW1wbGVcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcblx0ICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuXHQgICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG5cdCAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG5cdCAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcblx0ICAgICAgKiAgICAgfVxyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG5cdCAgICAgICpcclxuXHQgICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuXHQgICAgICAqXHJcblx0ICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuXHQgICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmRlbGV0ZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG5cdCAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcblx0ICAgICAgKlxyXG5cdCAgICAgICovXHJcblx0ICAgIGZ1bmN0aW9uIGRlbGV0ZU1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG5cdCAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JidWNrdG9uL1JlZmxlY3REZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWMvbWV0YWRhdGEubWQjZGVsZXRlbWV0YWRhdGEtbWV0YWRhdGFrZXktcC1cclxuXHQgICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSlcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpXHJcblx0ICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG5cdCAgICAgICAgdmFyIG1ldGFkYXRhTWFwID0gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0YXJnZXQsIHRhcmdldEtleSwgLypjcmVhdGUqLyBmYWxzZSk7XHJcblx0ICAgICAgICBpZiAoSXNVbmRlZmluZWQobWV0YWRhdGFNYXApKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHQgICAgICAgIGlmICghbWV0YWRhdGFNYXAuZGVsZXRlKG1ldGFkYXRhS2V5KSlcclxuXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblx0ICAgICAgICBpZiAobWV0YWRhdGFNYXAuc2l6ZSA+IDApXHJcblx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblx0ICAgICAgICB2YXIgdGFyZ2V0TWV0YWRhdGEgPSBNZXRhZGF0YS5nZXQodGFyZ2V0KTtcclxuXHQgICAgICAgIHRhcmdldE1ldGFkYXRhLmRlbGV0ZSh0YXJnZXRLZXkpO1xyXG5cdCAgICAgICAgaWYgKHRhcmdldE1ldGFkYXRhLnNpemUgPiAwKVxyXG5cdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cdCAgICAgICAgTWV0YWRhdGEuZGVsZXRlKHRhcmdldCk7XHJcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHQgICAgfVxyXG5cdCAgICBSZWZsZWN0LmRlbGV0ZU1ldGFkYXRhID0gZGVsZXRlTWV0YWRhdGE7XHJcblx0ICAgIGZ1bmN0aW9uIERlY29yYXRlQ29uc3RydWN0b3IoZGVjb3JhdG9ycywgdGFyZ2V0KSB7XHJcblx0ICAgICAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xyXG5cdCAgICAgICAgICAgIHZhciBkZWNvcmF0b3IgPSBkZWNvcmF0b3JzW2ldO1xyXG5cdCAgICAgICAgICAgIHZhciBkZWNvcmF0ZWQgPSBkZWNvcmF0b3IodGFyZ2V0KTtcclxuXHQgICAgICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKGRlY29yYXRlZCkpIHtcclxuXHQgICAgICAgICAgICAgICAgaWYgKCFJc0NvbnN0cnVjdG9yKGRlY29yYXRlZCkpXHJcblx0ICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0ICAgICAgICAgICAgICAgIHRhcmdldCA9IGRlY29yYXRlZDtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG5cdCAgICB9XHJcblx0ICAgIGZ1bmN0aW9uIERlY29yYXRlUHJvcGVydHlXaXRoRGVzY3JpcHRvcihkZWNvcmF0b3JzLCB0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKSB7XHJcblx0ICAgICAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xyXG5cdCAgICAgICAgICAgIHZhciBkZWNvcmF0b3IgPSBkZWNvcmF0b3JzW2ldO1xyXG5cdCAgICAgICAgICAgIHZhciBkZWNvcmF0ZWQgPSBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcik7XHJcblx0ICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZChkZWNvcmF0ZWQpKSB7XHJcblx0ICAgICAgICAgICAgICAgIGlmICghSXNPYmplY3QoZGVjb3JhdGVkKSlcclxuXHQgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHQgICAgICAgICAgICAgICAgZGVzY3JpcHRvciA9IGRlY29yYXRlZDtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gZGVzY3JpcHRvcjtcclxuXHQgICAgfVxyXG5cdCAgICBmdW5jdGlvbiBEZWNvcmF0ZVByb3BlcnR5V2l0aG91dERlc2NyaXB0b3IoZGVjb3JhdG9ycywgdGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xyXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcclxuXHQgICAgICAgICAgICB2YXIgZGVjb3JhdG9yID0gZGVjb3JhdG9yc1tpXTtcclxuXHQgICAgICAgICAgICBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH1cclxuXHQgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JidWNrdG9uL1JlZmxlY3REZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWMvbWV0YWRhdGEubWQjZ2V0b3JjcmVhdGVtZXRhZGF0YW1hcC0tby1wLWNyZWF0ZS1cclxuXHQgICAgZnVuY3Rpb24gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0YXJnZXQsIHRhcmdldEtleSwgY3JlYXRlKSB7XHJcblx0ICAgICAgICB2YXIgdGFyZ2V0TWV0YWRhdGEgPSBNZXRhZGF0YS5nZXQodGFyZ2V0KTtcclxuXHQgICAgICAgIGlmICghdGFyZ2V0TWV0YWRhdGEpIHtcclxuXHQgICAgICAgICAgICBpZiAoIWNyZWF0ZSlcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHQgICAgICAgICAgICB0YXJnZXRNZXRhZGF0YSA9IG5ldyBfTWFwKCk7XHJcblx0ICAgICAgICAgICAgTWV0YWRhdGEuc2V0KHRhcmdldCwgdGFyZ2V0TWV0YWRhdGEpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIGtleU1ldGFkYXRhID0gdGFyZ2V0TWV0YWRhdGEuZ2V0KHRhcmdldEtleSk7XHJcblx0ICAgICAgICBpZiAoIWtleU1ldGFkYXRhKSB7XHJcblx0ICAgICAgICAgICAgaWYgKCFjcmVhdGUpXHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcblx0ICAgICAgICAgICAga2V5TWV0YWRhdGEgPSBuZXcgX01hcCgpO1xyXG5cdCAgICAgICAgICAgIHRhcmdldE1ldGFkYXRhLnNldCh0YXJnZXRLZXksIGtleU1ldGFkYXRhKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBrZXlNZXRhZGF0YTtcclxuXHQgICAgfVxyXG5cdCAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmJ1Y2t0b24vUmVmbGVjdERlY29yYXRvcnMvYmxvYi9tYXN0ZXIvc3BlYy9tZXRhZGF0YS5tZCNvcmRpbmFyeWhhc21ldGFkYXRhLS1tZXRhZGF0YWtleS1vLXAtXHJcblx0ICAgIGZ1bmN0aW9uIE9yZGluYXJ5SGFzTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApIHtcclxuXHQgICAgICAgIHZhciBoYXNPd24gPSBPcmRpbmFyeUhhc093bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKTtcclxuXHQgICAgICAgIGlmIChoYXNPd24pXHJcblx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblx0ICAgICAgICB2YXIgcGFyZW50ID0gR2V0UHJvdG90eXBlT2YoTyk7XHJcblx0ICAgICAgICByZXR1cm4gcGFyZW50ICE9PSBudWxsID8gT3JkaW5hcnlIYXNNZXRhZGF0YShNZXRhZGF0YUtleSwgcGFyZW50LCBQKSA6IGZhbHNlO1xyXG5cdCAgICB9XHJcblx0ICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yYnVja3Rvbi9SZWZsZWN0RGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjL21ldGFkYXRhLm1kI29yZGluYXJ5aGFzb3dubWV0YWRhdGEtLW1ldGFkYXRha2V5LW8tcC1cclxuXHQgICAgZnVuY3Rpb24gT3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkge1xyXG5cdCAgICAgICAgdmFyIG1ldGFkYXRhTWFwID0gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCAvKmNyZWF0ZSovIGZhbHNlKTtcclxuXHQgICAgICAgIHJldHVybiBtZXRhZGF0YU1hcCAhPT0gdW5kZWZpbmVkICYmIEJvb2xlYW4obWV0YWRhdGFNYXAuaGFzKE1ldGFkYXRhS2V5KSk7XHJcblx0ICAgIH1cclxuXHQgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JidWNrdG9uL1JlZmxlY3REZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWMvbWV0YWRhdGEubWQjb3JkaW5hcnlnZXRtZXRhZGF0YS0tbWV0YWRhdGFrZXktby1wLVxyXG5cdCAgICBmdW5jdGlvbiBPcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XHJcblx0ICAgICAgICB2YXIgaGFzT3duID0gT3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCk7XHJcblx0ICAgICAgICBpZiAoaGFzT3duKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBPcmRpbmFyeUdldE93bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKTtcclxuXHQgICAgICAgIHZhciBwYXJlbnQgPSBHZXRQcm90b3R5cGVPZihPKTtcclxuXHQgICAgICAgIHJldHVybiBwYXJlbnQgIT09IG51bGwgPyBPcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LCBwYXJlbnQsIFApIDogdW5kZWZpbmVkO1xyXG5cdCAgICB9XHJcblx0ICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yYnVja3Rvbi9SZWZsZWN0RGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjL21ldGFkYXRhLm1kI29yZGluYXJ5Z2V0b3dubWV0YWRhdGEtLW1ldGFkYXRha2V5LW8tcC1cclxuXHQgICAgZnVuY3Rpb24gT3JkaW5hcnlHZXRPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkge1xyXG5cdCAgICAgICAgdmFyIG1ldGFkYXRhTWFwID0gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCAvKmNyZWF0ZSovIGZhbHNlKTtcclxuXHQgICAgICAgIHJldHVybiBtZXRhZGF0YU1hcCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbWV0YWRhdGFNYXAuZ2V0KE1ldGFkYXRhS2V5KTtcclxuXHQgICAgfVxyXG5cdCAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmJ1Y2t0b24vUmVmbGVjdERlY29yYXRvcnMvYmxvYi9tYXN0ZXIvc3BlYy9tZXRhZGF0YS5tZCNvcmRpbmFyeWRlZmluZW93bm1ldGFkYXRhLS1tZXRhZGF0YWtleS1tZXRhZGF0YXZhbHVlLW8tcC1cclxuXHQgICAgZnVuY3Rpb24gT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTWV0YWRhdGFWYWx1ZSwgTywgUCkge1xyXG5cdCAgICAgICAgdmFyIG1ldGFkYXRhTWFwID0gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCAvKmNyZWF0ZSovIHRydWUpO1xyXG5cdCAgICAgICAgbWV0YWRhdGFNYXAuc2V0KE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlKTtcclxuXHQgICAgfVxyXG5cdCAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmJ1Y2t0b24vUmVmbGVjdERlY29yYXRvcnMvYmxvYi9tYXN0ZXIvc3BlYy9tZXRhZGF0YS5tZCNvcmRpbmFyeW1ldGFkYXRha2V5cy0tby1wLVxyXG5cdCAgICBmdW5jdGlvbiBPcmRpbmFyeU1ldGFkYXRhS2V5cyhPLCBQKSB7XHJcblx0ICAgICAgICB2YXIgb3duS2V5cyA9IE9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKE8sIFApO1xyXG5cdCAgICAgICAgdmFyIHBhcmVudCA9IEdldFByb3RvdHlwZU9mKE8pO1xyXG5cdCAgICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbClcclxuXHQgICAgICAgICAgICByZXR1cm4gb3duS2V5cztcclxuXHQgICAgICAgIHZhciBwYXJlbnRLZXlzID0gT3JkaW5hcnlNZXRhZGF0YUtleXMocGFyZW50LCBQKTtcclxuXHQgICAgICAgIGlmIChwYXJlbnRLZXlzLmxlbmd0aCA8PSAwKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBvd25LZXlzO1xyXG5cdCAgICAgICAgaWYgKG93bktleXMubGVuZ3RoIDw9IDApXHJcblx0ICAgICAgICAgICAgcmV0dXJuIHBhcmVudEtleXM7XHJcblx0ICAgICAgICB2YXIga2V5cyA9IG5ldyBfU2V0KCk7XHJcblx0ICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgb3duS2V5cy5sZW5ndGg7IF9pKyspIHtcclxuXHQgICAgICAgICAgICB2YXIga2V5ID0gb3duS2V5c1tfaV07XHJcblx0ICAgICAgICAgICAga2V5cy5hZGQoa2V5KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGZvciAodmFyIF9hID0gMDsgX2EgPCBwYXJlbnRLZXlzLmxlbmd0aDsgX2ErKykge1xyXG5cdCAgICAgICAgICAgIHZhciBrZXkgPSBwYXJlbnRLZXlzW19hXTtcclxuXHQgICAgICAgICAgICBrZXlzLmFkZChrZXkpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIGdldEtleXMoa2V5cyk7XHJcblx0ICAgIH1cclxuXHQgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JidWNrdG9uL1JlZmxlY3REZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWMvbWV0YWRhdGEubWQjb3JkaW5hcnlvd25tZXRhZGF0YWtleXMtLW8tcC1cclxuXHQgICAgZnVuY3Rpb24gT3JkaW5hcnlPd25NZXRhZGF0YUtleXModGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuXHQgICAgICAgIHZhciBtZXRhZGF0YU1hcCA9IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAodGFyZ2V0LCB0YXJnZXRLZXksIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG5cdCAgICAgICAgdmFyIGtleXMgPSBbXTtcclxuXHQgICAgICAgIGlmIChtZXRhZGF0YU1hcClcclxuXHQgICAgICAgICAgICBmb3JFYWNoKG1ldGFkYXRhTWFwLCBmdW5jdGlvbiAoXywga2V5KSB7IHJldHVybiBrZXlzLnB1c2goa2V5KTsgfSk7XHJcblx0ICAgICAgICByZXR1cm4ga2V5cztcclxuXHQgICAgfVxyXG5cdCAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcy11bmRlZmluZWQtdHlwZVxyXG5cdCAgICBmdW5jdGlvbiBJc1VuZGVmaW5lZCh4KSB7XHJcblx0ICAgICAgICByZXR1cm4geCA9PT0gdW5kZWZpbmVkO1xyXG5cdCAgICB9XHJcblx0ICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1pc2FycmF5XHJcblx0ICAgIGZ1bmN0aW9uIElzQXJyYXkoeCkge1xyXG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkgPyBBcnJheS5pc0FycmF5KHgpIDogeCBpbnN0YW5jZW9mIEFycmF5IHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xyXG5cdCAgICB9XHJcblx0ICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QtdHlwZVxyXG5cdCAgICBmdW5jdGlvbiBJc09iamVjdCh4KSB7XHJcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09IFwib2JqZWN0XCIgPyB4ICE9PSBudWxsIDogdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIjtcclxuXHQgICAgfVxyXG5cdCAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtaXNjb25zdHJ1Y3RvclxyXG5cdCAgICBmdW5jdGlvbiBJc0NvbnN0cnVjdG9yKHgpIHtcclxuXHQgICAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiO1xyXG5cdCAgICB9XHJcblx0ICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzLXN5bWJvbC10eXBlXHJcblx0ICAgIGZ1bmN0aW9uIElzU3ltYm9sKHgpIHtcclxuXHQgICAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gXCJzeW1ib2xcIjtcclxuXHQgICAgfVxyXG5cdCAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9wcm9wZXJ0eWtleVxyXG5cdCAgICBmdW5jdGlvbiBUb1Byb3BlcnR5S2V5KHZhbHVlKSB7XHJcblx0ICAgICAgICByZXR1cm4gSXNTeW1ib2wodmFsdWUpID8gdmFsdWUgOiBTdHJpbmcodmFsdWUpO1xyXG5cdCAgICB9XHJcblx0ICAgIGZ1bmN0aW9uIEdldFByb3RvdHlwZU9mKE8pIHtcclxuXHQgICAgICAgIHZhciBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKTtcclxuXHQgICAgICAgIGlmICh0eXBlb2YgTyAhPT0gXCJmdW5jdGlvblwiIHx8IE8gPT09IGZ1bmN0aW9uUHJvdG90eXBlKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBwcm90bztcclxuXHQgICAgICAgIC8vIFR5cGVTY3JpcHQgZG9lc24ndCBzZXQgX19wcm90b19fIGluIEVTNSwgYXMgaXQncyBub24tc3RhbmRhcmQuXHJcblx0ICAgICAgICAvLyBUcnkgdG8gZGV0ZXJtaW5lIHRoZSBzdXBlcmNsYXNzIEV4YW1wbGVvbnN0cnVjdG9yLiBDb21wYXRpYmxlIGltcGxlbWVudGF0aW9uc1xyXG5cdCAgICAgICAgLy8gbXVzdCBlaXRoZXIgc2V0IF9fcHJvdG9fXyBvbiBhIHN1YmNsYXNzIEV4YW1wbGVvbnN0cnVjdG9yIHRvIHRoZSBzdXBlcmNsYXNzIEV4YW1wbGVvbnN0cnVjdG9yLFxyXG5cdCAgICAgICAgLy8gb3IgZW5zdXJlIGVhY2ggY2xhc3MgaGFzIGEgdmFsaWQgYGNvbnN0cnVjdG9yYCBwcm9wZXJ0eSBvbiBpdHMgcHJvdG90eXBlIHRoYXRcclxuXHQgICAgICAgIC8vIHBvaW50cyBiYWNrIHRvIHRoZSBjb25zdHJ1Y3Rvci5cclxuXHQgICAgICAgIC8vIElmIHRoaXMgaXMgbm90IHRoZSBzYW1lIGFzIEZ1bmN0aW9uLltbUHJvdG90eXBlXV0sIHRoZW4gdGhpcyBpcyBkZWZpbmF0ZWx5IGluaGVyaXRlZC5cclxuXHQgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlbiBpbiBFUzYgb3Igd2hlbiB1c2luZyBfX3Byb3RvX18gaW4gYSBjb21wYXRpYmxlIGJyb3dzZXIuXHJcblx0ICAgICAgICBpZiAocHJvdG8gIT09IGZ1bmN0aW9uUHJvdG90eXBlKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBwcm90bztcclxuXHQgICAgICAgIC8vIElmIHRoZSBzdXBlciBwcm90b3R5cGUgaXMgT2JqZWN0LnByb3RvdHlwZSwgbnVsbCwgb3IgdW5kZWZpbmVkLCB0aGVuIHdlIGNhbm5vdCBkZXRlcm1pbmUgdGhlIGhlcml0YWdlLlxyXG5cdCAgICAgICAgdmFyIHByb3RvdHlwZSA9IE8ucHJvdG90eXBlO1xyXG5cdCAgICAgICAgdmFyIHByb3RvdHlwZVByb3RvID0gcHJvdG90eXBlICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90b3R5cGUpO1xyXG5cdCAgICAgICAgaWYgKHByb3RvdHlwZVByb3RvID09IG51bGwgfHwgcHJvdG90eXBlUHJvdG8gPT09IE9iamVjdC5wcm90b3R5cGUpXHJcblx0ICAgICAgICAgICAgcmV0dXJuIHByb3RvO1xyXG5cdCAgICAgICAgLy8gSWYgdGhlIGNvbnN0cnVjdG9yIHdhcyBub3QgYSBmdW5jdGlvbiwgdGhlbiB3ZSBjYW5ub3QgZGV0ZXJtaW5lIHRoZSBoZXJpdGFnZS5cclxuXHQgICAgICAgIHZhciBjb25zdHJ1Y3RvciA9IHByb3RvdHlwZVByb3RvLmNvbnN0cnVjdG9yO1xyXG5cdCAgICAgICAgaWYgKHR5cGVvZiBjb25zdHJ1Y3RvciAhPT0gXCJmdW5jdGlvblwiKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBwcm90bztcclxuXHQgICAgICAgIC8vIElmIHdlIGhhdmUgc29tZSBraW5kIG9mIHNlbGYtcmVmZXJlbmNlLCB0aGVuIHdlIGNhbm5vdCBkZXRlcm1pbmUgdGhlIGhlcml0YWdlLlxyXG5cdCAgICAgICAgaWYgKGNvbnN0cnVjdG9yID09PSBPKVxyXG5cdCAgICAgICAgICAgIHJldHVybiBwcm90bztcclxuXHQgICAgICAgIC8vIHdlIGhhdmUgYSBwcmV0dHkgZ29vZCBndWVzcyBhdCB0aGUgaGVyaXRhZ2UuXHJcblx0ICAgICAgICByZXR1cm4gY29uc3RydWN0b3I7XHJcblx0ICAgIH1cclxuXHQgICAgZnVuY3Rpb24gSXRlcmF0b3JTdGVwKGl0ZXJhdG9yKSB7XHJcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xyXG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gdW5kZWZpbmVkIDogcmVzdWx0O1xyXG5cdCAgICB9XHJcblx0ICAgIGZ1bmN0aW9uIEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IpIHtcclxuXHQgICAgICAgIHZhciBmID0gaXRlcmF0b3JbXCJyZXR1cm5cIl07XHJcblx0ICAgICAgICBpZiAoZilcclxuXHQgICAgICAgICAgICBmLmNhbGwoaXRlcmF0b3IpO1xyXG5cdCAgICB9XHJcblx0ICAgIGZ1bmN0aW9uIGZvckVhY2goc291cmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG5cdCAgICAgICAgdmFyIGVudHJpZXMgPSBzb3VyY2UuZW50cmllcztcclxuXHQgICAgICAgIGlmICh0eXBlb2YgZW50cmllcyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gZW50cmllcy5jYWxsKHNvdXJjZSk7XHJcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuXHQgICAgICAgICAgICB0cnkge1xyXG5cdCAgICAgICAgICAgICAgICB3aGlsZSAocmVzdWx0ID0gSXRlcmF0b3JTdGVwKGl0ZXJhdG9yKSkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF9hID0gcmVzdWx0LnZhbHVlLCBrZXkgPSBfYVswXSwgdmFsdWUgPSBfYVsxXTtcclxuXHQgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWUsIGtleSwgc291cmNlKTtcclxuXHQgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBmaW5hbGx5IHtcclxuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdClcclxuXHQgICAgICAgICAgICAgICAgICAgIEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHZhciBmb3JFYWNoXzEgPSBzb3VyY2UuZm9yRWFjaDtcclxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGZvckVhY2hfMSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcblx0ICAgICAgICAgICAgICAgIGZvckVhY2hfMS5jYWxsKHNvdXJjZSwgY2FsbGJhY2ssIHRoaXNBcmcpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgfVxyXG5cdCAgICBmdW5jdGlvbiBnZXRLZXlzKHNvdXJjZSkge1xyXG5cdCAgICAgICAgdmFyIGtleXMgPSBbXTtcclxuXHQgICAgICAgIGZvckVhY2goc291cmNlLCBmdW5jdGlvbiAoXywga2V5KSB7IGtleXMucHVzaChrZXkpOyB9KTtcclxuXHQgICAgICAgIHJldHVybiBrZXlzO1xyXG5cdCAgICB9XHJcblx0ICAgIC8vIG5haXZlIE1hcEl0ZXJhdG9yIHNoaW1cclxuXHQgICAgZnVuY3Rpb24gQ3JlYXRlTWFwSXRlcmF0b3Ioa2V5cywgdmFsdWVzLCBraW5kKSB7XHJcblx0ICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG5cdCAgICAgICAgcmV0dXJuIHtcclxuXHQgICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgICAgIGlmICgoa2V5cyB8fCB2YWx1ZXMpICYmIGluZGV4IDwgKGtleXMgfHwgdmFsdWVzKS5sZW5ndGgpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gaW5kZXgrKztcclxuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoa2luZCkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJrZXlcIjogcmV0dXJuIHsgdmFsdWU6IGtleXNbY3VycmVudF0sIGRvbmU6IGZhbHNlIH07XHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZhbHVlXCI6IHJldHVybiB7IHZhbHVlOiB2YWx1ZXNbY3VycmVudF0sIGRvbmU6IGZhbHNlIH07XHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImtleSt2YWx1ZVwiOiByZXR1cm4geyB2YWx1ZTogW2tleXNbY3VycmVudF0sIHZhbHVlc1tjdXJyZW50XV0sIGRvbmU6IGZhbHNlIH07XHJcblx0ICAgICAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICAgICAga2V5cyA9IHVuZGVmaW5lZDtcclxuXHQgICAgICAgICAgICAgICAgdmFsdWVzID0gdW5kZWZpbmVkO1xyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XHJcblx0ICAgICAgICAgICAgfSxcclxuXHQgICAgICAgICAgICBcInRocm93XCI6IGZ1bmN0aW9uIChlcnJvcikge1xyXG5cdCAgICAgICAgICAgICAgICBpZiAoa2V5cyB8fCB2YWx1ZXMpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIGtleXMgPSB1bmRlZmluZWQ7XHJcblx0ICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSB1bmRlZmluZWQ7XHJcblx0ICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcblx0ICAgICAgICAgICAgfSxcclxuXHQgICAgICAgICAgICBcInJldHVyblwiOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuXHQgICAgICAgICAgICAgICAgaWYgKGtleXMgfHwgdmFsdWVzKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICBrZXlzID0gdW5kZWZpbmVkO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gdW5kZWZpbmVkO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2YWx1ZSwgZG9uZTogdHJ1ZSB9O1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH07XHJcblx0ICAgIH1cclxuXHQgICAgLy8gbmFpdmUgTWFwIHNoaW1cclxuXHQgICAgZnVuY3Rpb24gQ3JlYXRlTWFwUG9seWZpbGwoKSB7XHJcblx0ICAgICAgICB2YXIgY2FjaGVTZW50aW5lbCA9IHt9O1xyXG5cdCAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgZnVuY3Rpb24gTWFwKCkge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLl9rZXlzID0gW107XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZUtleSA9IGNhY2hlU2VudGluZWw7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlSW5kZXggPSAtMjtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hcC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcblx0ICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fa2V5cy5sZW5ndGg7IH0sXHJcblx0ICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcblx0ICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG5cdCAgICAgICAgICAgIH0pO1xyXG5cdCAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gdGhpcy5fZmluZChrZXksIC8qaW5zZXJ0Ki8gZmFsc2UpID49IDA7IH07XHJcblx0ICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcblx0ICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmQoa2V5LCAvKmluc2VydCovIGZhbHNlKTtcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID49IDAgPyB0aGlzLl92YWx1ZXNbaW5kZXhdIDogdW5kZWZpbmVkO1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9maW5kKGtleSwgLyppbnNlcnQqLyB0cnVlKTtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuXHQgICAgICAgICAgICB9O1xyXG5cdCAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9maW5kKGtleSwgLyppbnNlcnQqLyBmYWxzZSk7XHJcblx0ICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuX2tleXMubGVuZ3RoO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGluZGV4ICsgMTsgaSA8IHNpemU7IGkrKykge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleXNbaSAtIDFdID0gdGhpcy5fa2V5c1tpXTtcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZXNbaSAtIDFdID0gdGhpcy5fdmFsdWVzW2ldO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5cy5sZW5ndGgtLTtcclxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGgtLTtcclxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlS2V5ID0gY2FjaGVTZW50aW5lbDtcclxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlSW5kZXggPSAtMjtcclxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHQgICAgICAgICAgICB9O1xyXG5cdCAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzLmxlbmd0aCA9IDA7XHJcblx0ICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlS2V5ID0gY2FjaGVTZW50aW5lbDtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVJbmRleCA9IC0yO1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gQ3JlYXRlTWFwSXRlcmF0b3IodGhpcy5fa2V5cywgLyp2YWx1ZXMqLyB1bmRlZmluZWQsIFwia2V5XCIpOyB9O1xyXG5cdCAgICAgICAgICAgIE1hcC5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gQ3JlYXRlTWFwSXRlcmF0b3IoLyprZXlzKi8gdW5kZWZpbmVkLCB0aGlzLl92YWx1ZXMsIFwidmFsdWVcIik7IH07XHJcblx0ICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gQ3JlYXRlTWFwSXRlcmF0b3IodGhpcy5fa2V5cywgdGhpcy5fdmFsdWVzLCBcImtleSt2YWx1ZVwiKTsgfTtcclxuXHQgICAgICAgICAgICBNYXAucHJvdG90eXBlLl9maW5kID0gZnVuY3Rpb24gKGtleSwgaW5zZXJ0KSB7XHJcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jYWNoZUtleSA9PT0ga2V5KVxyXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlSW5kZXg7XHJcblx0ICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xyXG5cdCAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCAwICYmIGluc2VydCkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9rZXlzLmxlbmd0aDtcclxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleXMucHVzaChrZXkpO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzLnB1c2godW5kZWZpbmVkKTtcclxuXHQgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVLZXkgPSBrZXksIHRoaXMuX2NhY2hlSW5kZXggPSBpbmRleDtcclxuXHQgICAgICAgICAgICB9O1xyXG5cdCAgICAgICAgICAgIHJldHVybiBNYXA7XHJcblx0ICAgICAgICB9KSgpO1xyXG5cdCAgICB9XHJcblx0ICAgIC8vIG5haXZlIFNldCBzaGltXHJcblx0ICAgIGZ1bmN0aW9uIENyZWF0ZVNldFBvbHlmaWxsKCkge1xyXG5cdCAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgZnVuY3Rpb24gU2V0KCkge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLl9tYXAgPSBuZXcgX01hcCgpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0LnByb3RvdHlwZSwgXCJzaXplXCIsIHtcclxuXHQgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9tYXAuc2l6ZTsgfSxcclxuXHQgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcblx0ICAgICAgICAgICAgfSk7XHJcblx0ICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHRoaXMuX21hcC5oYXModmFsdWUpOyB9O1xyXG5cdCAgICAgICAgICAgIFNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0aGlzLl9tYXAuc2V0KHZhbHVlLCB2YWx1ZSksIHRoaXM7IH07XHJcblx0ICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHRoaXMuX21hcC5kZWxldGUodmFsdWUpOyB9O1xyXG5cdCAgICAgICAgICAgIFNldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX21hcC5jbGVhcigpOyB9O1xyXG5cdCAgICAgICAgICAgIFNldC5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX21hcC5rZXlzKCk7IH07XHJcblx0ICAgICAgICAgICAgU2V0LnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9tYXAudmFsdWVzKCk7IH07XHJcblx0ICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fbWFwLmVudHJpZXMoKTsgfTtcclxuXHQgICAgICAgICAgICByZXR1cm4gU2V0O1xyXG5cdCAgICAgICAgfSkoKTtcclxuXHQgICAgfVxyXG5cdCAgICAvLyBuYWl2ZSBXZWFrTWFwIHNoaW1cclxuXHQgICAgZnVuY3Rpb24gQ3JlYXRlV2Vha01hcFBvbHlmaWxsKCkge1xyXG5cdCAgICAgICAgdmFyIFVVSURfU0laRSA9IDE2O1xyXG5cdCAgICAgICAgdmFyIGtleXMgPSBjcmVhdGVEaWN0aW9uYXJ5KCk7XHJcblx0ICAgICAgICB2YXIgcm9vdEtleSA9IENyZWF0ZVVuaXF1ZUtleSgpO1xyXG5cdCAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgZnVuY3Rpb24gV2Vha01hcCgpIHtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5fa2V5ID0gQ3JlYXRlVW5pcXVlS2V5KCk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIFdlYWtNYXAucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuXHQgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gR2V0T3JDcmVhdGVXZWFrTWFwVGFibGUodGFyZ2V0LCAvKmNyZWF0ZSovIGZhbHNlKTtcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlICE9PSB1bmRlZmluZWQgPyBIYXNoTWFwLmhhcyh0YWJsZSwgdGhpcy5fa2V5KSA6IGZhbHNlO1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgV2Vha01hcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUgIT09IHVuZGVmaW5lZCA/IEhhc2hNYXAuZ2V0KHRhYmxlLCB0aGlzLl9rZXkpIDogdW5kZWZpbmVkO1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgV2Vha01hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHRhcmdldCwgdmFsdWUpIHtcclxuXHQgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gR2V0T3JDcmVhdGVXZWFrTWFwVGFibGUodGFyZ2V0LCAvKmNyZWF0ZSovIHRydWUpO1xyXG5cdCAgICAgICAgICAgICAgICB0YWJsZVt0aGlzLl9rZXldID0gdmFsdWU7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG5cdCAgICAgICAgICAgIH07XHJcblx0ICAgICAgICAgICAgV2Vha01hcC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG5cdCAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUgIT09IHVuZGVmaW5lZCA/IGRlbGV0ZSB0YWJsZVt0aGlzLl9rZXldIDogZmFsc2U7XHJcblx0ICAgICAgICAgICAgfTtcclxuXHQgICAgICAgICAgICBXZWFrTWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICAgICAgLy8gTk9URTogbm90IGEgcmVhbCBjbGVhciwganVzdCBtYWtlcyB0aGUgcHJldmlvdXMgZGF0YSB1bnJlYWNoYWJsZVxyXG5cdCAgICAgICAgICAgICAgICB0aGlzLl9rZXkgPSBDcmVhdGVVbmlxdWVLZXkoKTtcclxuXHQgICAgICAgICAgICB9O1xyXG5cdCAgICAgICAgICAgIHJldHVybiBXZWFrTWFwO1xyXG5cdCAgICAgICAgfSkoKTtcclxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGxSYW5kb21CeXRlcyhidWZmZXIsIHNpemUpIHtcclxuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSlcclxuXHQgICAgICAgICAgICAgICAgYnVmZmVyW2ldID0gTWF0aC5yYW5kb20oKSAqIDB4ZmYgfCAwO1xyXG5cdCAgICAgICAgICAgIHJldHVybiBidWZmZXI7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBmdW5jdGlvbiBHZW5SYW5kb21CeXRlcyhzaXplKSB7XHJcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBVaW50OEFycmF5ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHQgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjcnlwdG8gIT09IFwidW5kZWZpbmVkXCIpXHJcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheShzaXplKSk7XHJcblx0ICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbXNDcnlwdG8gIT09IFwidW5kZWZpbmVkXCIpXHJcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHNpemUpKTtcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIEZpbGxSYW5kb21CeXRlcyhuZXcgVWludDhBcnJheShzaXplKSwgc2l6ZSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIHJldHVybiBGaWxsUmFuZG9tQnl0ZXMobmV3IEFycmF5KHNpemUpLCBzaXplKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGZ1bmN0aW9uIENyZWF0ZVVVSUQoKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGRhdGEgPSBHZW5SYW5kb21CeXRlcyhVVUlEX1NJWkUpO1xyXG5cdCAgICAgICAgICAgIC8vIG1hcmsgYXMgcmFuZG9tIC0gUkZDIDQxMjIgwqcgNC40XHJcblx0ICAgICAgICAgICAgZGF0YVs2XSA9IGRhdGFbNl0gJiAweDRmIHwgMHg0MDtcclxuXHQgICAgICAgICAgICBkYXRhWzhdID0gZGF0YVs4XSAmIDB4YmYgfCAweDgwO1xyXG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSBcIlwiO1xyXG5cdCAgICAgICAgICAgIGZvciAodmFyIG9mZnNldCA9IDA7IG9mZnNldCA8IFVVSURfU0laRTsgKytvZmZzZXQpIHtcclxuXHQgICAgICAgICAgICAgICAgdmFyIGJ5dGUgPSBkYXRhW29mZnNldF07XHJcblx0ICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgPT09IDQgfHwgb2Zmc2V0ID09PSA2IHx8IG9mZnNldCA9PT0gOClcclxuXHQgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIi1cIjtcclxuXHQgICAgICAgICAgICAgICAgaWYgKGJ5dGUgPCAxNilcclxuXHQgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIjBcIjtcclxuXHQgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGJ5dGUudG9TdHJpbmcoMTYpLnRvTG93ZXJDYXNlKCk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBmdW5jdGlvbiBDcmVhdGVVbmlxdWVLZXkoKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGtleTtcclxuXHQgICAgICAgICAgICBkb1xyXG5cdCAgICAgICAgICAgICAgICBrZXkgPSBcIkBAV2Vha01hcEBAXCIgKyBDcmVhdGVVVUlEKCk7XHJcblx0ICAgICAgICAgICAgd2hpbGUgKEhhc2hNYXAuaGFzKGtleXMsIGtleSkpO1xyXG5cdCAgICAgICAgICAgIGtleXNba2V5XSA9IHRydWU7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGZ1bmN0aW9uIEdldE9yQ3JlYXRlV2Vha01hcFRhYmxlKHRhcmdldCwgY3JlYXRlKSB7XHJcblx0ICAgICAgICAgICAgaWYgKCFoYXNPd24uY2FsbCh0YXJnZXQsIHJvb3RLZXkpKSB7XHJcblx0ICAgICAgICAgICAgICAgIGlmICghY3JlYXRlKVxyXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHQgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcm9vdEtleSwgeyB2YWx1ZTogY3JlYXRlRGljdGlvbmFyeSgpIH0pO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Jvb3RLZXldO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9XHJcblx0ICAgIC8vIHVzZXMgYSBoZXVyaXN0aWMgdXNlZCBieSB2OCBhbmQgY2hha3JhIHRvIGZvcmNlIGFuIG9iamVjdCBpbnRvIGRpY3Rpb25hcnkgbW9kZS5cclxuXHQgICAgZnVuY3Rpb24gTWFrZURpY3Rpb25hcnkob2JqKSB7XHJcblx0ICAgICAgICBvYmouX19ESUNUSU9OQVJZX01PREVfXyA9IDE7XHJcblx0ICAgICAgICBkZWxldGUgb2JqLl9fX19ESUNUSU9OQVJZX01PREVfXztcclxuXHQgICAgICAgIHJldHVybiBvYmo7XHJcblx0ICAgIH1cclxuXHQgICAgLy8gcGF0Y2ggZ2xvYmFsIFJlZmxlY3RcclxuXHQgICAgKGZ1bmN0aW9uIChfX2dsb2JhbCkge1xyXG5cdCAgICAgICAgaWYgKHR5cGVvZiBfX2dsb2JhbC5SZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0ICAgICAgICAgICAgaWYgKF9fZ2xvYmFsLlJlZmxlY3QgIT09IFJlZmxlY3QpIHtcclxuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBSZWZsZWN0KSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoUmVmbGVjdCwgcCkpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfX2dsb2JhbC5SZWZsZWN0W3BdID0gUmVmbGVjdFtwXTtcclxuXHQgICAgICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIF9fZ2xvYmFsLlJlZmxlY3QgPSBSZWZsZWN0O1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9KSh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDpcclxuXHQgICAgICAgIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOlxyXG5cdCAgICAgICAgICAgIHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOlxyXG5cdCAgICAgICAgICAgICAgICBGdW5jdGlvbihcInJldHVybiB0aGlzO1wiKSgpKTtcclxuXHR9KShSZWZsZWN0IHx8IChSZWZsZWN0ID0ge30pKTtcclxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1SZWZsZWN0LmpzLm1hcFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiA0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzM1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzQwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNDEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM0Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzQ0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNDUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM0Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzQ4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNDkpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXG4vKioqLyB9LFxuLyogNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oOTYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTAyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMDMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTA1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMDYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTA4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMDkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDExMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTEyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMTQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDExNik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTE4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMjEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTIzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMjcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTMxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMzQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTM2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMzcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTQwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNDEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTQzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNDQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTQ3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNDgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTUxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNTIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTU1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNTYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNTkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTYxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNjIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTY0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNjUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTY3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNjgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTc0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNzgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTgwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxODEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTg0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxODUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTg3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxODgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTkwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTkzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxOTQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTk2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxOTcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTk5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjEyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjE4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjIxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMjMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjI1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMjYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIyOSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjMxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMzIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjM1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMzcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIzOSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjQwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNDEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI0Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjQ0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNDUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI0Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjUzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNTYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI1Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjU5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNjApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI2Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjY0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNjYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI2Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjY4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNjkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI3MCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjcxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNzIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI3Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjc0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNzUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI3Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjc3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNzgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI3OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjgwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyODEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI4Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjgzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyODQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI4Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjg3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyODgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI4OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjkwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyOTEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI5Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjk0KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyOTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI5Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjk3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyOTgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI5OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzAwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMDIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMwMyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzA1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMDYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMwNyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzA4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMTEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMxMik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzEzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMTQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMxNSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzE2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMTcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMxOCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzIwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMjEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMyMik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzIzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMjQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMyNSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzI2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMjcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMyOCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzI5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzM0KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblxuLyoqKi8gfSxcbi8qIDQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW1cblx0dmFyIGdsb2JhbCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nilcblx0ICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nylcblx0ICAsIERFU0NSSVBUT1JTICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OClcblx0ICAsICRleHBvcnQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIHJlZGVmaW5lICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MClcblx0ICAsIE1FVEEgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCkuS0VZXG5cdCAgLCAkZmFpbHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpXG5cdCAgLCBzaGFyZWQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpXG5cdCAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpXG5cdCAgLCB1aWQgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdCAgLCB3a3MgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpXG5cdCAgLCB3a3NFeHQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpXG5cdCAgLCB3a3NEZWZpbmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpXG5cdCAgLCBrZXlPZiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpXG5cdCAgLCBlbnVtS2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODQpXG5cdCAgLCBpc0FycmF5ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODcpXG5cdCAgLCBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCB0b0lPYmplY3QgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpXG5cdCAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdCAgLCBjcmVhdGVEZXNjICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpXG5cdCAgLCBfY3JlYXRlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODgpXG5cdCAgLCBnT1BORXh0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpXG5cdCAgLCAkR09QRCAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpXG5cdCAgLCAkRFAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpXG5cdCAgLCAka2V5cyAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpXG5cdCAgLCBnT1BEICAgICAgICAgICA9ICRHT1BELmZcblx0ICAsIGRQICAgICAgICAgICAgID0gJERQLmZcblx0ICAsIGdPUE4gICAgICAgICAgID0gZ09QTkV4dC5mXG5cdCAgLCAkU3ltYm9sICAgICAgICA9IGdsb2JhbC5TeW1ib2xcblx0ICAsICRKU09OICAgICAgICAgID0gZ2xvYmFsLkpTT05cblx0ICAsIF9zdHJpbmdpZnkgICAgID0gJEpTT04gJiYgJEpTT04uc3RyaW5naWZ5XG5cdCAgLCBQUk9UT1RZUEUgICAgICA9ICdwcm90b3R5cGUnXG5cdCAgLCBISURERU4gICAgICAgICA9IHdrcygnX2hpZGRlbicpXG5cdCAgLCBUT19QUklNSVRJVkUgICA9IHdrcygndG9QcmltaXRpdmUnKVxuXHQgICwgaXNFbnVtICAgICAgICAgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZVxuXHQgICwgU3ltYm9sUmVnaXN0cnkgPSBzaGFyZWQoJ3N5bWJvbC1yZWdpc3RyeScpXG5cdCAgLCBBbGxTeW1ib2xzICAgICA9IHNoYXJlZCgnc3ltYm9scycpXG5cdCAgLCBPUFN5bWJvbHMgICAgICA9IHNoYXJlZCgnb3Atc3ltYm9scycpXG5cdCAgLCBPYmplY3RQcm90byAgICA9IE9iamVjdFtQUk9UT1RZUEVdXG5cdCAgLCBVU0VfTkFUSVZFICAgICA9IHR5cGVvZiAkU3ltYm9sID09ICdmdW5jdGlvbidcblx0ICAsIFFPYmplY3QgICAgICAgID0gZ2xvYmFsLlFPYmplY3Q7XG5cdC8vIERvbid0IHVzZSBzZXR0ZXJzIGluIFF0IFNjcmlwdCwgaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzE3M1xuXHR2YXIgc2V0dGVyID0gIVFPYmplY3QgfHwgIVFPYmplY3RbUFJPVE9UWVBFXSB8fCAhUU9iamVjdFtQUk9UT1RZUEVdLmZpbmRDaGlsZDtcblx0XG5cdC8vIGZhbGxiYWNrIGZvciBvbGQgQW5kcm9pZCwgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTY4N1xuXHR2YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbigpe1xuXHQgIHJldHVybiBfY3JlYXRlKGRQKHt9LCAnYScsIHtcblx0ICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIGRQKHRoaXMsICdhJywge3ZhbHVlOiA3fSkuYTsgfVxuXHQgIH0pKS5hICE9IDc7XG5cdH0pID8gZnVuY3Rpb24oaXQsIGtleSwgRCl7XG5cdCAgdmFyIHByb3RvRGVzYyA9IGdPUEQoT2JqZWN0UHJvdG8sIGtleSk7XG5cdCAgaWYocHJvdG9EZXNjKWRlbGV0ZSBPYmplY3RQcm90b1trZXldO1xuXHQgIGRQKGl0LCBrZXksIEQpO1xuXHQgIGlmKHByb3RvRGVzYyAmJiBpdCAhPT0gT2JqZWN0UHJvdG8pZFAoT2JqZWN0UHJvdG8sIGtleSwgcHJvdG9EZXNjKTtcblx0fSA6IGRQO1xuXHRcblx0dmFyIHdyYXAgPSBmdW5jdGlvbih0YWcpe1xuXHQgIHZhciBzeW0gPSBBbGxTeW1ib2xzW3RhZ10gPSBfY3JlYXRlKCRTeW1ib2xbUFJPVE9UWVBFXSk7XG5cdCAgc3ltLl9rID0gdGFnO1xuXHQgIHJldHVybiBzeW07XG5cdH07XG5cdFxuXHR2YXIgaXNTeW1ib2wgPSBVU0VfTkFUSVZFICYmIHR5cGVvZiAkU3ltYm9sLml0ZXJhdG9yID09ICdzeW1ib2wnID8gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7XG5cdH0gOiBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIGl0IGluc3RhbmNlb2YgJFN5bWJvbDtcblx0fTtcblx0XG5cdHZhciAkZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBEKXtcblx0ICBpZihpdCA9PT0gT2JqZWN0UHJvdG8pJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTtcblx0ICBhbk9iamVjdChpdCk7XG5cdCAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTtcblx0ICBhbk9iamVjdChEKTtcblx0ICBpZihoYXMoQWxsU3ltYm9scywga2V5KSl7XG5cdCAgICBpZighRC5lbnVtZXJhYmxlKXtcblx0ICAgICAgaWYoIWhhcyhpdCwgSElEREVOKSlkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7XG5cdCAgICAgIGl0W0hJRERFTl1ba2V5XSA9IHRydWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZihoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKWl0W0hJRERFTl1ba2V5XSA9IGZhbHNlO1xuXHQgICAgICBEID0gX2NyZWF0ZShELCB7ZW51bWVyYWJsZTogY3JlYXRlRGVzYygwLCBmYWxzZSl9KTtcblx0ICAgIH0gcmV0dXJuIHNldFN5bWJvbERlc2MoaXQsIGtleSwgRCk7XG5cdCAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7XG5cdH07XG5cdHZhciAkZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoaXQsIFApe1xuXHQgIGFuT2JqZWN0KGl0KTtcblx0ICB2YXIga2V5cyA9IGVudW1LZXlzKFAgPSB0b0lPYmplY3QoUCkpXG5cdCAgICAsIGkgICAgPSAwXG5cdCAgICAsIGwgPSBrZXlzLmxlbmd0aFxuXHQgICAgLCBrZXk7XG5cdCAgd2hpbGUobCA+IGkpJGRlZmluZVByb3BlcnR5KGl0LCBrZXkgPSBrZXlzW2krK10sIFBba2V5XSk7XG5cdCAgcmV0dXJuIGl0O1xuXHR9O1xuXHR2YXIgJGNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpdCwgUCl7XG5cdCAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApO1xuXHR9O1xuXHR2YXIgJHByb3BlcnR5SXNFbnVtZXJhYmxlID0gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoa2V5KXtcblx0ICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpO1xuXHQgIGlmKHRoaXMgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybiBmYWxzZTtcblx0ICByZXR1cm4gRSB8fCAhaGFzKHRoaXMsIGtleSkgfHwgIWhhcyhBbGxTeW1ib2xzLCBrZXkpIHx8IGhhcyh0aGlzLCBISURERU4pICYmIHRoaXNbSElEREVOXVtrZXldID8gRSA6IHRydWU7XG5cdH07XG5cdHZhciAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpe1xuXHQgIGl0ICA9IHRvSU9iamVjdChpdCk7XG5cdCAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTtcblx0ICBpZihpdCA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpcmV0dXJuO1xuXHQgIHZhciBEID0gZ09QRChpdCwga2V5KTtcblx0ICBpZihEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpRC5lbnVtZXJhYmxlID0gdHJ1ZTtcblx0ICByZXR1cm4gRDtcblx0fTtcblx0dmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7XG5cdCAgdmFyIG5hbWVzICA9IGdPUE4odG9JT2JqZWN0KGl0KSlcblx0ICAgICwgcmVzdWx0ID0gW11cblx0ICAgICwgaSAgICAgID0gMFxuXHQgICAgLCBrZXk7XG5cdCAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSl7XG5cdCAgICBpZighaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpcmVzdWx0LnB1c2goa2V5KTtcblx0ICB9IHJldHVybiByZXN1bHQ7XG5cdH07XG5cdHZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KXtcblx0ICB2YXIgSVNfT1AgID0gaXQgPT09IE9iamVjdFByb3RvXG5cdCAgICAsIG5hbWVzICA9IGdPUE4oSVNfT1AgPyBPUFN5bWJvbHMgOiB0b0lPYmplY3QoaXQpKVxuXHQgICAgLCByZXN1bHQgPSBbXVxuXHQgICAgLCBpICAgICAgPSAwXG5cdCAgICAsIGtleTtcblx0ICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXtcblx0ICAgIGlmKGhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiAoSVNfT1AgPyBoYXMoT2JqZWN0UHJvdG8sIGtleSkgOiB0cnVlKSlyZXN1bHQucHVzaChBbGxTeW1ib2xzW2tleV0pO1xuXHQgIH0gcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdC8vIDE5LjQuMS4xIFN5bWJvbChbZGVzY3JpcHRpb25dKVxuXHRpZighVVNFX05BVElWRSl7XG5cdCAgJFN5bWJvbCA9IGZ1bmN0aW9uIFN5bWJvbCgpe1xuXHQgICAgaWYodGhpcyBpbnN0YW5jZW9mICRTeW1ib2wpdGhyb3cgVHlwZUVycm9yKCdTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhJyk7XG5cdCAgICB2YXIgdGFnID0gdWlkKGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTtcblx0ICAgIHZhciAkc2V0ID0gZnVuY3Rpb24odmFsdWUpe1xuXHQgICAgICBpZih0aGlzID09PSBPYmplY3RQcm90bykkc2V0LmNhbGwoT1BTeW1ib2xzLCB2YWx1ZSk7XG5cdCAgICAgIGlmKGhhcyh0aGlzLCBISURERU4pICYmIGhhcyh0aGlzW0hJRERFTl0sIHRhZykpdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTtcblx0ICAgICAgc2V0U3ltYm9sRGVzYyh0aGlzLCB0YWcsIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTtcblx0ICAgIH07XG5cdCAgICBpZihERVNDUklQVE9SUyAmJiBzZXR0ZXIpc2V0U3ltYm9sRGVzYyhPYmplY3RQcm90bywgdGFnLCB7Y29uZmlndXJhYmxlOiB0cnVlLCBzZXQ6ICRzZXR9KTtcblx0ICAgIHJldHVybiB3cmFwKHRhZyk7XG5cdCAgfTtcblx0ICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG5cdCAgICByZXR1cm4gdGhpcy5faztcblx0ICB9KTtcblx0XG5cdCAgJEdPUEQuZiA9ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cdCAgJERQLmYgICA9ICRkZWZpbmVQcm9wZXJ0eTtcblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKS5mID0gZ09QTkV4dC5mID0gJGdldE93blByb3BlcnR5TmFtZXM7XG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg4NikuZiAgPSAkcHJvcGVydHlJc0VudW1lcmFibGU7XG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg4NSkuZiA9ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG5cdFxuXHQgIGlmKERFU0NSSVBUT1JTICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKSl7XG5cdCAgICByZWRlZmluZShPYmplY3RQcm90bywgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJHByb3BlcnR5SXNFbnVtZXJhYmxlLCB0cnVlKTtcblx0ICB9XG5cdFxuXHQgIHdrc0V4dC5mID0gZnVuY3Rpb24obmFtZSl7XG5cdCAgICByZXR1cm4gd3JhcCh3a3MobmFtZSkpO1xuXHQgIH1cblx0fVxuXHRcblx0JGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwge1N5bWJvbDogJFN5bWJvbH0pO1xuXHRcblx0Zm9yKHZhciBzeW1ib2xzID0gKFxuXHQgIC8vIDE5LjQuMi4yLCAxOS40LjIuMywgMTkuNC4yLjQsIDE5LjQuMi42LCAxOS40LjIuOCwgMTkuNC4yLjksIDE5LjQuMi4xMCwgMTkuNC4yLjExLCAxOS40LjIuMTIsIDE5LjQuMi4xMywgMTkuNC4yLjE0XG5cdCAgJ2hhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzJ1xuXHQpLnNwbGl0KCcsJyksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3Moc3ltYm9sc1tpKytdKTtcblx0XG5cdGZvcih2YXIgc3ltYm9scyA9ICRrZXlzKHdrcy5zdG9yZSksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3NEZWZpbmUoc3ltYm9sc1tpKytdKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsICdTeW1ib2wnLCB7XG5cdCAgLy8gMTkuNC4yLjEgU3ltYm9sLmZvcihrZXkpXG5cdCAgJ2Zvcic6IGZ1bmN0aW9uKGtleSl7XG5cdCAgICByZXR1cm4gaGFzKFN5bWJvbFJlZ2lzdHJ5LCBrZXkgKz0gJycpXG5cdCAgICAgID8gU3ltYm9sUmVnaXN0cnlba2V5XVxuXHQgICAgICA6IFN5bWJvbFJlZ2lzdHJ5W2tleV0gPSAkU3ltYm9sKGtleSk7XG5cdCAgfSxcblx0ICAvLyAxOS40LjIuNSBTeW1ib2wua2V5Rm9yKHN5bSlcblx0ICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihrZXkpe1xuXHQgICAgaWYoaXNTeW1ib2woa2V5KSlyZXR1cm4ga2V5T2YoU3ltYm9sUmVnaXN0cnksIGtleSk7XG5cdCAgICB0aHJvdyBUeXBlRXJyb3Ioa2V5ICsgJyBpcyBub3QgYSBzeW1ib2whJyk7XG5cdCAgfSxcblx0ICB1c2VTZXR0ZXI6IGZ1bmN0aW9uKCl7IHNldHRlciA9IHRydWU7IH0sXG5cdCAgdXNlU2ltcGxlOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSBmYWxzZTsgfVxuXHR9KTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsICdPYmplY3QnLCB7XG5cdCAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxuXHQgIGNyZWF0ZTogJGNyZWF0ZSxcblx0ICAvLyAxOS4xLjIuNCBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcylcblx0ICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LFxuXHQgIC8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpXG5cdCAgZGVmaW5lUHJvcGVydGllczogJGRlZmluZVByb3BlcnRpZXMsXG5cdCAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKVxuXHQgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogJGdldE93blByb3BlcnR5RGVzY3JpcHRvcixcblx0ICAvLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKVxuXHQgIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLFxuXHQgIC8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTylcblx0ICBnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHNcblx0fSk7XG5cdFxuXHQvLyAyNC4zLjIgSlNPTi5zdHJpbmdpZnkodmFsdWUgWywgcmVwbGFjZXIgWywgc3BhY2VdXSlcblx0JEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIFMgPSAkU3ltYm9sKCk7XG5cdCAgLy8gTVMgRWRnZSBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMge31cblx0ICAvLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGxcblx0ICAvLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9sc1xuXHQgIHJldHVybiBfc3RyaW5naWZ5KFtTXSkgIT0gJ1tudWxsXScgfHwgX3N0cmluZ2lmeSh7YTogU30pICE9ICd7fScgfHwgX3N0cmluZ2lmeShPYmplY3QoUykpICE9ICd7fSc7XG5cdH0pKSwgJ0pTT04nLCB7XG5cdCAgc3RyaW5naWZ5OiBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpe1xuXHQgICAgaWYoaXQgPT09IHVuZGVmaW5lZCB8fCBpc1N5bWJvbChpdCkpcmV0dXJuOyAvLyBJRTggcmV0dXJucyBzdHJpbmcgb24gdW5kZWZpbmVkXG5cdCAgICB2YXIgYXJncyA9IFtpdF1cblx0ICAgICAgLCBpICAgID0gMVxuXHQgICAgICAsIHJlcGxhY2VyLCAkcmVwbGFjZXI7XG5cdCAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO1xuXHQgICAgcmVwbGFjZXIgPSBhcmdzWzFdO1xuXHQgICAgaWYodHlwZW9mIHJlcGxhY2VyID09ICdmdW5jdGlvbicpJHJlcGxhY2VyID0gcmVwbGFjZXI7XG5cdCAgICBpZigkcmVwbGFjZXIgfHwgIWlzQXJyYXkocmVwbGFjZXIpKXJlcGxhY2VyID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG5cdCAgICAgIGlmKCRyZXBsYWNlcil2YWx1ZSA9ICRyZXBsYWNlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpO1xuXHQgICAgICBpZighaXNTeW1ib2wodmFsdWUpKXJldHVybiB2YWx1ZTtcblx0ICAgIH07XG5cdCAgICBhcmdzWzFdID0gcmVwbGFjZXI7XG5cdCAgICByZXR1cm4gX3N0cmluZ2lmeS5hcHBseSgkSlNPTiwgYXJncyk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdC8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludClcblx0JFN5bWJvbFtQUk9UT1RZUEVdW1RPX1BSSU1JVElWRV0gfHwgX193ZWJwYWNrX3JlcXVpcmVfXyg1MikoJFN5bWJvbFtQUk9UT1RZUEVdLCBUT19QUklNSVRJVkUsICRTeW1ib2xbUFJPVE9UWVBFXS52YWx1ZU9mKTtcblx0Ly8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXVxuXHRzZXRUb1N0cmluZ1RhZygkU3ltYm9sLCAnU3ltYm9sJyk7XG5cdC8vIDIwLjIuMS45IE1hdGhbQEB0b1N0cmluZ1RhZ11cblx0c2V0VG9TdHJpbmdUYWcoTWF0aCwgJ01hdGgnLCB0cnVlKTtcblx0Ly8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ11cblx0c2V0VG9TdHJpbmdUYWcoZ2xvYmFsLkpTT04sICdKU09OJywgdHJ1ZSk7XG5cbi8qKiovIH0sXG4vKiA0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjhcblx0dmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoXG5cdCAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRpZih0eXBlb2YgX19nID09ICdudW1iZXInKV9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG4vKioqLyB9LFxuLyogNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IHt9Lmhhc093blByb3BlcnR5O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBrZXkpe1xuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcblx0bW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkoZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3O1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDQ5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gISFleGVjKCk7XG5cdCAgfSBjYXRjaChlKXtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2xvYmFsICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nilcblx0ICAsIGNvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpXG5cdCAgLCBoaWRlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHQgICwgcmVkZWZpbmUgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MClcblx0ICAsIGN0eCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpXG5cdCAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblx0XG5cdHZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXtcblx0ICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRlxuXHQgICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HXG5cdCAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlNcblx0ICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUFxuXHQgICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CXG5cdCAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSB8fCAoZ2xvYmFsW25hbWVdID0ge30pIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXVxuXHQgICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KVxuXHQgICAgLCBleHBQcm90byAgPSBleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KVxuXHQgICAgLCBrZXksIG93biwgb3V0LCBleHA7XG5cdCAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7XG5cdCAgZm9yKGtleSBpbiBzb3VyY2Upe1xuXHQgICAgLy8gY29udGFpbnMgaW4gbmF0aXZlXG5cdCAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuXHQgICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWRcblx0ICAgIG91dCA9IChvd24gPyB0YXJnZXQgOiBzb3VyY2UpW2tleV07XG5cdCAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuXHQgICAgZXhwID0gSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG5cdCAgICAvLyBleHRlbmQgZ2xvYmFsXG5cdCAgICBpZih0YXJnZXQpcmVkZWZpbmUodGFyZ2V0LCBrZXksIG91dCwgdHlwZSAmICRleHBvcnQuVSk7XG5cdCAgICAvLyBleHBvcnRcblx0ICAgIGlmKGV4cG9ydHNba2V5XSAhPSBvdXQpaGlkZShleHBvcnRzLCBrZXksIGV4cCk7XG5cdCAgICBpZihJU19QUk9UTyAmJiBleHBQcm90b1trZXldICE9IG91dClleHBQcm90b1trZXldID0gb3V0O1xuXHQgIH1cblx0fTtcblx0Z2xvYmFsLmNvcmUgPSBjb3JlO1xuXHQvLyB0eXBlIGJpdG1hcFxuXHQkZXhwb3J0LkYgPSAxOyAgIC8vIGZvcmNlZFxuXHQkZXhwb3J0LkcgPSAyOyAgIC8vIGdsb2JhbFxuXHQkZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpY1xuXHQkZXhwb3J0LlAgPSA4OyAgIC8vIHByb3RvXG5cdCRleHBvcnQuQiA9IDE2OyAgLy8gYmluZFxuXHQkZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXBcblx0JGV4cG9ydC5VID0gNjQ7ICAvLyBzYWZlXG5cdCRleHBvcnQuUiA9IDEyODsgLy8gcmVhbCBwcm90byBtZXRob2QgZm9yIGBsaWJyYXJ5YCBcblx0bW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0O1xuXG4vKioqLyB9LFxuLyogNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzIuNC4wJ307XG5cdGlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG4vKioqLyB9LFxuLyogNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBkUCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0ICAsIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSA/IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG5cdCAgcmV0dXJuIGRQLmYob2JqZWN0LCBrZXksIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTtcblx0fSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG5cdCAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcblx0ICByZXR1cm4gb2JqZWN0O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBJRThfRE9NX0RFRklORSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpXG5cdCAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdCAgLCBkUCAgICAgICAgICAgICA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblx0XG5cdGV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7XG5cdCAgYW5PYmplY3QoTyk7XG5cdCAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuXHQgIGFuT2JqZWN0KEF0dHJpYnV0ZXMpO1xuXHQgIGlmKElFOF9ET01fREVGSU5FKXRyeSB7XG5cdCAgICByZXR1cm4gZFAoTywgUCwgQXR0cmlidXRlcyk7XG5cdCAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuXHQgIGlmKCdnZXQnIGluIEF0dHJpYnV0ZXMgfHwgJ3NldCcgaW4gQXR0cmlidXRlcyl0aHJvdyBUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIScpO1xuXHQgIGlmKCd2YWx1ZScgaW4gQXR0cmlidXRlcylPW1BdID0gQXR0cmlidXRlcy52YWx1ZTtcblx0ICByZXR1cm4gTztcblx0fTtcblxuLyoqKi8gfSxcbi8qIDU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgaWYoIWlzT2JqZWN0KGl0KSl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7XG5cdCAgcmV0dXJuIGl0O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA1NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkgJiYgIV9fd2VicGFja19yZXF1aXJlX18oNDkpKGZ1bmN0aW9uKCl7XG5cdCAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KSgnZGl2JyksICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpLmRvY3VtZW50XG5cdCAgLy8gaW4gb2xkIElFIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnXG5cdCAgLCBpcyA9IGlzT2JqZWN0KGRvY3VtZW50KSAmJiBpc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSlcblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdC8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlXG5cdC8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIFMpe1xuXHQgIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIGl0O1xuXHQgIHZhciBmbiwgdmFsO1xuXHQgIGlmKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcblx0ICBpZih0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7XG5cdCAgaWYoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcblx0ICB0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIik7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXtcblx0ICByZXR1cm4ge1xuXHQgICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLFxuXHQgICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuXHQgICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLFxuXHQgICAgdmFsdWUgICAgICAgOiB2YWx1ZVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgLCBoaWRlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHQgICwgaGFzICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nylcblx0ICAsIFNSQyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpKCdzcmMnKVxuXHQgICwgVE9fU1RSSU5HID0gJ3RvU3RyaW5nJ1xuXHQgICwgJHRvU3RyaW5nID0gRnVuY3Rpb25bVE9fU1RSSU5HXVxuXHQgICwgVFBMICAgICAgID0gKCcnICsgJHRvU3RyaW5nKS5zcGxpdChUT19TVFJJTkcpO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MSkuaW5zcGVjdFNvdXJjZSA9IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gJHRvU3RyaW5nLmNhbGwoaXQpO1xuXHR9O1xuXHRcblx0KG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTywga2V5LCB2YWwsIHNhZmUpe1xuXHQgIHZhciBpc0Z1bmN0aW9uID0gdHlwZW9mIHZhbCA9PSAnZnVuY3Rpb24nO1xuXHQgIGlmKGlzRnVuY3Rpb24paGFzKHZhbCwgJ25hbWUnKSB8fCBoaWRlKHZhbCwgJ25hbWUnLCBrZXkpO1xuXHQgIGlmKE9ba2V5XSA9PT0gdmFsKXJldHVybjtcblx0ICBpZihpc0Z1bmN0aW9uKWhhcyh2YWwsIFNSQykgfHwgaGlkZSh2YWwsIFNSQywgT1trZXldID8gJycgKyBPW2tleV0gOiBUUEwuam9pbihTdHJpbmcoa2V5KSkpO1xuXHQgIGlmKE8gPT09IGdsb2JhbCl7XG5cdCAgICBPW2tleV0gPSB2YWw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmKCFzYWZlKXtcblx0ICAgICAgZGVsZXRlIE9ba2V5XTtcblx0ICAgICAgaGlkZShPLCBrZXksIHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZihPW2tleV0pT1trZXldID0gdmFsO1xuXHQgICAgICBlbHNlIGhpZGUoTywga2V5LCB2YWwpO1xuXHQgICAgfVxuXHQgIH1cblx0Ly8gYWRkIGZha2UgRnVuY3Rpb24jdG9TdHJpbmcgZm9yIGNvcnJlY3Qgd29yayB3cmFwcGVkIG1ldGhvZHMgLyBjb25zdHJ1Y3RvcnMgd2l0aCBtZXRob2RzIGxpa2UgTG9EYXNoIGlzTmF0aXZlXG5cdH0pKEZ1bmN0aW9uLnByb3RvdHlwZSwgVE9fU1RSSU5HLCBmdW5jdGlvbiB0b1N0cmluZygpe1xuXHQgIHJldHVybiB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nICYmIHRoaXNbU1JDXSB8fCAkdG9TdHJpbmcuY2FsbCh0aGlzKTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiA2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIGlkID0gMFxuXHQgICwgcHggPSBNYXRoLnJhbmRvbSgpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7XG5cdCAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcblx0dmFyIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpe1xuXHQgIGFGdW5jdGlvbihmbik7XG5cdCAgaWYodGhhdCA9PT0gdW5kZWZpbmVkKXJldHVybiBmbjtcblx0ICBzd2l0Y2gobGVuZ3RoKXtcblx0ICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKGEpe1xuXHQgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTtcblx0ICAgIH07XG5cdCAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbihhLCBiKXtcblx0ICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7XG5cdCAgICB9O1xuXHQgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oYSwgYiwgYyl7XG5cdCAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpO1xuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKC8qIC4uLmFyZ3MgKi8pe1xuXHQgICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICBpZih0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpO1xuXHQgIHJldHVybiBpdDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTUVUQSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKSgnbWV0YScpXG5cdCAgLCBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBoYXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgLCBzZXREZXNjICA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpLmZcblx0ICAsIGlkICAgICAgID0gMDtcblx0dmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGUgfHwgZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0dmFyIEZSRUVaRSA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KShmdW5jdGlvbigpe1xuXHQgIHJldHVybiBpc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSk7XG5cdH0pO1xuXHR2YXIgc2V0TWV0YSA9IGZ1bmN0aW9uKGl0KXtcblx0ICBzZXREZXNjKGl0LCBNRVRBLCB7dmFsdWU6IHtcblx0ICAgIGk6ICdPJyArICsraWQsIC8vIG9iamVjdCBJRFxuXHQgICAgdzoge30gICAgICAgICAgLy8gd2VhayBjb2xsZWN0aW9ucyBJRHNcblx0ICB9fSk7XG5cdH07XG5cdHZhciBmYXN0S2V5ID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7XG5cdCAgLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeFxuXHQgIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJyA/IGl0IDogKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyA/ICdTJyA6ICdQJykgKyBpdDtcblx0ICBpZighaGFzKGl0LCBNRVRBKSl7XG5cdCAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdFxuXHQgICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuICdGJztcblx0ICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhXG5cdCAgICBpZighY3JlYXRlKXJldHVybiAnRSc7XG5cdCAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YVxuXHQgICAgc2V0TWV0YShpdCk7XG5cdCAgLy8gcmV0dXJuIG9iamVjdCBJRFxuXHQgIH0gcmV0dXJuIGl0W01FVEFdLmk7XG5cdH07XG5cdHZhciBnZXRXZWFrID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7XG5cdCAgaWYoIWhhcyhpdCwgTUVUQSkpe1xuXHQgICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3Rcblx0ICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiB0cnVlO1xuXHQgICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGFcblx0ICAgIGlmKCFjcmVhdGUpcmV0dXJuIGZhbHNlO1xuXHQgICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcblx0ICAgIHNldE1ldGEoaXQpO1xuXHQgIC8vIHJldHVybiBoYXNoIHdlYWsgY29sbGVjdGlvbnMgSURzXG5cdCAgfSByZXR1cm4gaXRbTUVUQV0udztcblx0fTtcblx0Ly8gYWRkIG1ldGFkYXRhIG9uIGZyZWV6ZS1mYW1pbHkgbWV0aG9kcyBjYWxsaW5nXG5cdHZhciBvbkZyZWV6ZSA9IGZ1bmN0aW9uKGl0KXtcblx0ICBpZihGUkVFWkUgJiYgbWV0YS5ORUVEICYmIGlzRXh0ZW5zaWJsZShpdCkgJiYgIWhhcyhpdCwgTUVUQSkpc2V0TWV0YShpdCk7XG5cdCAgcmV0dXJuIGl0O1xuXHR9O1xuXHR2YXIgbWV0YSA9IG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIEtFWTogICAgICBNRVRBLFxuXHQgIE5FRUQ6ICAgICBmYWxzZSxcblx0ICBmYXN0S2V5OiAgZmFzdEtleSxcblx0ICBnZXRXZWFrOiAgZ2V0V2Vhayxcblx0ICBvbkZyZWV6ZTogb25GcmVlemVcblx0fTtcblxuLyoqKi8gfSxcbi8qIDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nilcblx0ICAsIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nXG5cdCAgLCBzdG9yZSAgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcblx0ICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHt9KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZGVmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MykuZlxuXHQgICwgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nylcblx0ICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpKCd0b1N0cmluZ1RhZycpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgdGFnLCBzdGF0KXtcblx0ICBpZihpdCAmJiAhaGFzKGl0ID0gc3RhdCA/IGl0IDogaXQucHJvdG90eXBlLCBUQUcpKWRlZihpdCwgVEFHLCB7Y29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogdGFnfSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHN0b3JlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KSgnd2tzJylcblx0ICAsIHVpZCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKVxuXHQgICwgU3ltYm9sICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpLlN5bWJvbFxuXHQgICwgVVNFX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT0gJ2Z1bmN0aW9uJztcblx0XG5cdHZhciAkZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7XG5cdCAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9XG5cdCAgICBVU0VfU1lNQk9MICYmIFN5bWJvbFtuYW1lXSB8fCAoVVNFX1NZTUJPTCA/IFN5bWJvbCA6IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpO1xuXHR9O1xuXHRcblx0JGV4cG9ydHMuc3RvcmUgPSBzdG9yZTtcblxuLyoqKi8gfSxcbi8qIDY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTtcblxuLyoqKi8gfSxcbi8qIDY5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2xvYmFsICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgY29yZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVxuXHQgICwgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKVxuXHQgICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KVxuXHQgICwgZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKS5mO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpe1xuXHQgIHZhciAkU3ltYm9sID0gY29yZS5TeW1ib2wgfHwgKGNvcmUuU3ltYm9sID0gTElCUkFSWSA/IHt9IDogZ2xvYmFsLlN5bWJvbCB8fCB7fSk7XG5cdCAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmYWxzZTtcblxuLyoqKi8gfSxcbi8qIDcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0S2V5cyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Milcblx0ICAsIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgZWwpe1xuXHQgIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KVxuXHQgICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pXG5cdCAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cdCAgICAsIGluZGV4ICA9IDBcblx0ICAgICwga2V5O1xuXHQgIHdoaWxlKGxlbmd0aCA+IGluZGV4KWlmKE9ba2V5ID0ga2V5c1tpbmRleCsrXV0gPT09IGVsKXJldHVybiBrZXk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pXG5cdHZhciAka2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpXG5cdCAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oODMpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pe1xuXHQgIHJldHVybiAka2V5cyhPLCBlbnVtQnVnS2V5cyk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGhhcyAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgLCB0b0lPYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KVxuXHQgICwgYXJyYXlJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCkoZmFsc2UpXG5cdCAgLCBJRV9QUk9UTyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKSgnSUVfUFJPVE8nKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBuYW1lcyl7XG5cdCAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpXG5cdCAgICAsIGkgICAgICA9IDBcblx0ICAgICwgcmVzdWx0ID0gW11cblx0ICAgICwga2V5O1xuXHQgIGZvcihrZXkgaW4gTylpZihrZXkgIT0gSUVfUFJPVE8paGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTtcblx0ICAvLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzXG5cdCAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSlpZihoYXMoTywga2V5ID0gbmFtZXNbaSsrXSkpe1xuXHQgICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3Ncblx0dmFyIElPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KVxuXHQgICwgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gSU9iamVjdChkZWZpbmVkKGl0KSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3Ncblx0dmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudClcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgaWYoaXQgPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTtcblx0ICByZXR1cm4gaXQ7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZlxuXHQvLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlc1xuXHR2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NClcblx0ICAsIHRvTGVuZ3RoICA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgLCB0b0luZGV4ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihJU19JTkNMVURFUyl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBlbCwgZnJvbUluZGV4KXtcblx0ICAgIHZhciBPICAgICAgPSB0b0lPYmplY3QoJHRoaXMpXG5cdCAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpXG5cdCAgICAgICwgaW5kZXggID0gdG9JbmRleChmcm9tSW5kZXgsIGxlbmd0aClcblx0ICAgICAgLCB2YWx1ZTtcblx0ICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG1cblx0ICAgIGlmKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKXdoaWxlKGxlbmd0aCA+IGluZGV4KXtcblx0ICAgICAgdmFsdWUgPSBPW2luZGV4KytdO1xuXHQgICAgICBpZih2YWx1ZSAhPSB2YWx1ZSlyZXR1cm4gdHJ1ZTtcblx0ICAgIC8vIEFycmF5I3RvSW5kZXggaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3Rcblx0ICAgIH0gZWxzZSBmb3IoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKWlmKElTX0lOQ0xVREVTIHx8IGluZGV4IGluIE8pe1xuXHQgICAgICBpZihPW2luZGV4XSA9PT0gZWwpcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7XG5cdCAgICB9IHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyA3LjEuMTUgVG9MZW5ndGhcblx0dmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oODApXG5cdCAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIGl0ID4gMCA/IG1pbih0b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTFcblx0fTtcblxuLyoqKi8gfSxcbi8qIDgwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyA3LjEuNCBUb0ludGVnZXJcblx0dmFyIGNlaWwgID0gTWF0aC5jZWlsXG5cdCAgLCBmbG9vciA9IE1hdGguZmxvb3I7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiBpc05hTihpdCA9ICtpdCkgPyAwIDogKGl0ID4gMCA/IGZsb29yIDogY2VpbCkoaXQpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogODEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKVxuXHQgICwgbWF4ICAgICAgID0gTWF0aC5tYXhcblx0ICAsIG1pbiAgICAgICA9IE1hdGgubWluO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluZGV4LCBsZW5ndGgpe1xuXHQgIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTtcblx0ICByZXR1cm4gaW5kZXggPCAwID8gbWF4KGluZGV4ICsgbGVuZ3RoLCAwKSA6IG1pbihpbmRleCwgbGVuZ3RoKTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDgyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgc2hhcmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkoJ2tleXMnKVxuXHQgICwgdWlkICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcblx0ICByZXR1cm4gc2hhcmVkW2tleV0gfHwgKHNoYXJlZFtrZXldID0gdWlkKGtleSkpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogODMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXNcblx0bW9kdWxlLmV4cG9ydHMgPSAoXG5cdCAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZidcblx0KS5zcGxpdCgnLCcpO1xuXG4vKioqLyB9LFxuLyogODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGFsbCBlbnVtZXJhYmxlIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBzeW1ib2xzXG5cdHZhciBnZXRLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Milcblx0ICAsIGdPUFMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KVxuXHQgICwgcElFICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODYpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcblx0ICB2YXIgcmVzdWx0ICAgICA9IGdldEtleXMoaXQpXG5cdCAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmY7XG5cdCAgaWYoZ2V0U3ltYm9scyl7XG5cdCAgICB2YXIgc3ltYm9scyA9IGdldFN5bWJvbHMoaXQpXG5cdCAgICAgICwgaXNFbnVtICA9IHBJRS5mXG5cdCAgICAgICwgaSAgICAgICA9IDBcblx0ICAgICAgLCBrZXk7XG5cdCAgICB3aGlsZShzeW1ib2xzLmxlbmd0aCA+IGkpaWYoaXNFbnVtLmNhbGwoaXQsIGtleSA9IHN5bWJvbHNbaSsrXSkpcmVzdWx0LnB1c2goa2V5KTtcblx0ICB9IHJldHVybiByZXN1bHQ7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0ZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcblxuLyoqKi8gfSxcbi8qIDg2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRleHBvcnRzLmYgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuLyoqKi8gfSxcbi8qIDg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KVxuXHR2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdG1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZyl7XG5cdCAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG5cdHZhciBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBkUHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODkpXG5cdCAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oODMpXG5cdCAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODIpKCdJRV9QUk9UTycpXG5cdCAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH1cblx0ICAsIFBST1RPVFlQRSAgID0gJ3Byb3RvdHlwZSc7XG5cdFxuXHQvLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlXG5cdHZhciBjcmVhdGVEaWN0ID0gZnVuY3Rpb24oKXtcblx0ICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Z1xuXHQgIHZhciBpZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KSgnaWZyYW1lJylcblx0ICAgICwgaSAgICAgID0gZW51bUJ1Z0tleXMubGVuZ3RoXG5cdCAgICAsIGx0ICAgICA9ICc8J1xuXHQgICAgLCBndCAgICAgPSAnPidcblx0ICAgICwgaWZyYW1lRG9jdW1lbnQ7XG5cdCAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg5MCkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblx0ICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsXG5cdCAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDtcblx0ICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG5cdCAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcblx0ICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7XG5cdCAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpO1xuXHQgIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7XG5cdCAgY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7XG5cdCAgd2hpbGUoaS0tKWRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dO1xuXHQgIHJldHVybiBjcmVhdGVEaWN0KCk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpe1xuXHQgIHZhciByZXN1bHQ7XG5cdCAgaWYoTyAhPT0gbnVsbCl7XG5cdCAgICBFbXB0eVtQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7XG5cdCAgICByZXN1bHQgPSBuZXcgRW1wdHk7XG5cdCAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDtcblx0ICAgIC8vIGFkZCBcIl9fcHJvdG9fX1wiIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGxcblx0ICAgIHJlc3VsdFtJRV9QUk9UT10gPSBPO1xuXHQgIH0gZWxzZSByZXN1bHQgPSBjcmVhdGVEaWN0KCk7XG5cdCAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA4OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGRQICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0ICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpe1xuXHQgIGFuT2JqZWN0KE8pO1xuXHQgIHZhciBrZXlzICAgPSBnZXRLZXlzKFByb3BlcnRpZXMpXG5cdCAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cdCAgICAsIGkgPSAwXG5cdCAgICAsIFA7XG5cdCAgd2hpbGUobGVuZ3RoID4gaSlkUC5mKE8sIFAgPSBrZXlzW2krK10sIFByb3BlcnRpZXNbUF0pO1xuXHQgIHJldHVybiBPO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NikuZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4vKioqLyB9LFxuLyogOTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGZhbGxiYWNrIGZvciBJRTExIGJ1Z2d5IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHdpdGggaWZyYW1lIGFuZCB3aW5kb3dcblx0dmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpXG5cdCAgLCBnT1BOICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKS5mXG5cdCAgLCB0b1N0cmluZyAgPSB7fS50b1N0cmluZztcblx0XG5cdHZhciB3aW5kb3dOYW1lcyA9IHR5cGVvZiB3aW5kb3cgPT0gJ29iamVjdCcgJiYgd2luZG93ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzXG5cdCAgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpIDogW107XG5cdFxuXHR2YXIgZ2V0V2luZG93TmFtZXMgPSBmdW5jdGlvbihpdCl7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiBnT1BOKGl0KTtcblx0ICB9IGNhdGNoKGUpe1xuXHQgICAgcmV0dXJuIHdpbmRvd05hbWVzLnNsaWNlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMuZiA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpe1xuXHQgIHJldHVybiB3aW5kb3dOYW1lcyAmJiB0b1N0cmluZy5jYWxsKGl0KSA9PSAnW29iamVjdCBXaW5kb3ddJyA/IGdldFdpbmRvd05hbWVzKGl0KSA6IGdPUE4odG9JT2JqZWN0KGl0KSk7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDkyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG5cdHZhciAka2V5cyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mylcblx0ICAsIGhpZGRlbktleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTtcblx0XG5cdGV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTyl7XG5cdCAgcmV0dXJuICRrZXlzKE8sIGhpZGRlbktleXMpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogOTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBwSUUgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODYpXG5cdCAgLCBjcmVhdGVEZXNjICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpXG5cdCAgLCB0b0lPYmplY3QgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpXG5cdCAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdCAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgLCBJRThfRE9NX0RFRklORSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpXG5cdCAgLCBnT1BEICAgICAgICAgICA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG5cdFxuXHRleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSA/IGdPUEQgOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCl7XG5cdCAgTyA9IHRvSU9iamVjdChPKTtcblx0ICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7XG5cdCAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHtcblx0ICAgIHJldHVybiBnT1BEKE8sIFApO1xuXHQgIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH1cblx0ICBpZihoYXMoTywgUCkpcmV0dXJuIGNyZWF0ZURlc2MoIXBJRS5mLmNhbGwoTywgUCksIE9bUF0pO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogOTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0Ly8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge2NyZWF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXyg4OCl9KTtcblxuLyoqKi8gfSxcbi8qIDk1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHQvLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuXHQkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSwgJ09iamVjdCcsIHtkZWZpbmVQcm9wZXJ0eTogX193ZWJwYWNrX3JlcXVpcmVfXyg1MykuZn0pO1xuXG4vKioqLyB9LFxuLyogOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdC8vIDE5LjEuMi4zIC8gMTUuMi4zLjcgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcylcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXyg0OCksICdPYmplY3QnLCB7ZGVmaW5lUHJvcGVydGllczogX193ZWJwYWNrX3JlcXVpcmVfXyg4OSl9KTtcblxuLyoqKi8gfSxcbi8qIDk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApXG5cdHZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NClcblx0ICAsICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKS5mO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoJ2dldE93blByb3BlcnR5RGVzY3JpcHRvcicsIGZ1bmN0aW9uKCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXtcblx0ICAgIHJldHVybiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRvSU9iamVjdChpdCksIGtleSk7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiA5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIGNvcmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVxuXHQgICwgZmFpbHMgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSwgZXhlYyl7XG5cdCAgdmFyIGZuICA9IChjb3JlLk9iamVjdCB8fCB7fSlbS0VZXSB8fCBPYmplY3RbS0VZXVxuXHQgICAgLCBleHAgPSB7fTtcblx0ICBleHBbS0VZXSA9IGV4ZWMoZm4pO1xuXHQgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24oKXsgZm4oMSk7IH0pLCAnT2JqZWN0JywgZXhwKTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDk5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTylcblx0dmFyIHRvT2JqZWN0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTAwKVxuXHQgICwgJGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoJ2dldFByb3RvdHlwZU9mJywgZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YoaXQpe1xuXHQgICAgcmV0dXJuICRnZXRQcm90b3R5cGVPZih0b09iamVjdChpdCkpO1xuXHQgIH07XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpXG5cdHZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKVxuXHR2YXIgaGFzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KVxuXHQgICwgdG9PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMClcblx0ICAsIElFX1BST1RPICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MikoJ0lFX1BST1RPJylcblx0ICAsIE9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKE8pe1xuXHQgIE8gPSB0b09iamVjdChPKTtcblx0ICBpZihoYXMoTywgSUVfUFJPVE8pKXJldHVybiBPW0lFX1BST1RPXTtcblx0ICBpZih0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKXtcblx0ICAgIHJldHVybiBPLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcblx0ICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTylcblx0dmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApXG5cdCAgLCAka2V5cyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoJ2tleXMnLCBmdW5jdGlvbigpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBrZXlzKGl0KXtcblx0ICAgIHJldHVybiAka2V5cyh0b09iamVjdChpdCkpO1xuXHQgIH07XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KSgnZ2V0T3duUHJvcGVydHlOYW1lcycsIGZ1bmN0aW9uKCl7XG5cdCAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oOTEpLmY7XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuNSBPYmplY3QuZnJlZXplKE8pXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBtZXRhICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpLm9uRnJlZXplO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoJ2ZyZWV6ZScsIGZ1bmN0aW9uKCRmcmVlemUpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBmcmVlemUoaXQpe1xuXHQgICAgcmV0dXJuICRmcmVlemUgJiYgaXNPYmplY3QoaXQpID8gJGZyZWV6ZShtZXRhKGl0KSkgOiBpdDtcblx0ICB9O1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDEwNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMTkuMS4yLjE3IE9iamVjdC5zZWFsKE8pXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBtZXRhICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpLm9uRnJlZXplO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoJ3NlYWwnLCBmdW5jdGlvbigkc2VhbCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHNlYWwoaXQpe1xuXHQgICAgcmV0dXJuICRzZWFsICYmIGlzT2JqZWN0KGl0KSA/ICRzZWFsKG1ldGEoaXQpKSA6IGl0O1xuXHQgIH07XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuMTUgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKE8pXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBtZXRhICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpLm9uRnJlZXplO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoJ3ByZXZlbnRFeHRlbnNpb25zJywgZnVuY3Rpb24oJHByZXZlbnRFeHRlbnNpb25zKXtcblx0ICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEV4dGVuc2lvbnMoaXQpe1xuXHQgICAgcmV0dXJuICRwcmV2ZW50RXh0ZW5zaW9ucyAmJiBpc09iamVjdChpdCkgPyAkcHJldmVudEV4dGVuc2lvbnMobWV0YShpdCkpIDogaXQ7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxMDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDE5LjEuMi4xMiBPYmplY3QuaXNGcm96ZW4oTylcblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KSgnaXNGcm96ZW4nLCBmdW5jdGlvbigkaXNGcm96ZW4pe1xuXHQgIHJldHVybiBmdW5jdGlvbiBpc0Zyb3plbihpdCl7XG5cdCAgICByZXR1cm4gaXNPYmplY3QoaXQpID8gJGlzRnJvemVuID8gJGlzRnJvemVuKGl0KSA6IGZhbHNlIDogdHJ1ZTtcblx0ICB9O1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDEwOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMTkuMS4yLjEzIE9iamVjdC5pc1NlYWxlZChPKVxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oOTgpKCdpc1NlYWxlZCcsIGZ1bmN0aW9uKCRpc1NlYWxlZCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGlzU2VhbGVkKGl0KXtcblx0ICAgIHJldHVybiBpc09iamVjdChpdCkgPyAkaXNTZWFsZWQgPyAkaXNTZWFsZWQoaXQpIDogZmFsc2UgOiB0cnVlO1xuXHQgIH07XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjIuMTEgT2JqZWN0LmlzRXh0ZW5zaWJsZShPKVxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oOTgpKCdpc0V4dGVuc2libGUnLCBmdW5jdGlvbigkaXNFeHRlbnNpYmxlKXtcblx0ICByZXR1cm4gZnVuY3Rpb24gaXNFeHRlbnNpYmxlKGl0KXtcblx0ICAgIHJldHVybiBpc09iamVjdChpdCkgPyAkaXNFeHRlbnNpYmxlID8gJGlzRXh0ZW5zaWJsZShpdCkgOiB0cnVlIDogZmFsc2U7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHthc3NpZ246IF9fd2VicGFja19yZXF1aXJlX18oMTExKX0pO1xuXG4vKioqLyB9LFxuLyogMTExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIDE5LjEuMi4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UsIC4uLilcblx0dmFyIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Milcblx0ICAsIGdPUFMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSlcblx0ICAsIHBJRSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nilcblx0ICAsIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApXG5cdCAgLCBJT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpXG5cdCAgLCAkYXNzaWduICA9IE9iamVjdC5hc3NpZ247XG5cdFxuXHQvLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1Zylcblx0bW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KShmdW5jdGlvbigpe1xuXHQgIHZhciBBID0ge31cblx0ICAgICwgQiA9IHt9XG5cdCAgICAsIFMgPSBTeW1ib2woKVxuXHQgICAgLCBLID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0Jztcblx0ICBBW1NdID0gNztcblx0ICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7XG5cdCAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7XG5cdH0pID8gZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXHQgIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldClcblx0ICAgICwgYUxlbiAgPSBhcmd1bWVudHMubGVuZ3RoXG5cdCAgICAsIGluZGV4ID0gMVxuXHQgICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mXG5cdCAgICAsIGlzRW51bSAgICAgPSBwSUUuZjtcblx0ICB3aGlsZShhTGVuID4gaW5kZXgpe1xuXHQgICAgdmFyIFMgICAgICA9IElPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKVxuXHQgICAgICAsIGtleXMgICA9IGdldFN5bWJvbHMgPyBnZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKSA6IGdldEtleXMoUylcblx0ICAgICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aFxuXHQgICAgICAsIGogICAgICA9IDBcblx0ICAgICAgLCBrZXk7XG5cdCAgICB3aGlsZShsZW5ndGggPiBqKWlmKGlzRW51bS5jYWxsKFMsIGtleSA9IGtleXNbaisrXSkpVFtrZXldID0gU1trZXldO1xuXHQgIH0gcmV0dXJuIFQ7XG5cdH0gOiAkYXNzaWduO1xuXG4vKioqLyB9LFxuLyogMTEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4xLjMuMTAgT2JqZWN0LmlzKHZhbHVlMSwgdmFsdWUyKVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHQkZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtpczogX193ZWJwYWNrX3JlcXVpcmVfXygxMTMpfSk7XG5cbi8qKiovIH0sXG4vKiAxMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIDcuMi45IFNhbWVWYWx1ZSh4LCB5KVxuXHRtb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5pcyB8fCBmdW5jdGlvbiBpcyh4LCB5KXtcblx0ICByZXR1cm4geCA9PT0geSA/IHggIT09IDAgfHwgMSAvIHggPT09IDEgLyB5IDogeCAhPSB4ICYmIHkgIT0geTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDExNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bylcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7c2V0UHJvdG90eXBlT2Y6IF9fd2VicGFja19yZXF1aXJlX18oMTE1KS5zZXR9KTtcblxuLyoqKi8gfSxcbi8qIDExNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuXG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHR2YXIgY2hlY2sgPSBmdW5jdGlvbihPLCBwcm90byl7XG5cdCAgYW5PYmplY3QoTyk7XG5cdCAgaWYoIWlzT2JqZWN0KHByb3RvKSAmJiBwcm90byAhPT0gbnVsbCl0aHJvdyBUeXBlRXJyb3IocHJvdG8gKyBcIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSFcIik7XG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblx0ICAgIGZ1bmN0aW9uKHRlc3QsIGJ1Z2d5LCBzZXQpe1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHNldCA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpKEZ1bmN0aW9uLmNhbGwsIF9fd2VicGFja19yZXF1aXJlX18oOTMpLmYoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCwgMik7XG5cdCAgICAgICAgc2V0KHRlc3QsIFtdKTtcblx0ICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTtcblx0ICAgICAgfSBjYXRjaChlKXsgYnVnZ3kgPSB0cnVlOyB9XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90byl7XG5cdCAgICAgICAgY2hlY2soTywgcHJvdG8pO1xuXHQgICAgICAgIGlmKGJ1Z2d5KU8uX19wcm90b19fID0gcHJvdG87XG5cdCAgICAgICAgZWxzZSBzZXQoTywgcHJvdG8pO1xuXHQgICAgICAgIHJldHVybiBPO1xuXHQgICAgICB9O1xuXHQgICAgfSh7fSwgZmFsc2UpIDogdW5kZWZpbmVkKSxcblx0ICBjaGVjazogY2hlY2tcblx0fTtcblxuLyoqKi8gfSxcbi8qIDExNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKClcblx0dmFyIGNsYXNzb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNylcblx0ICAsIHRlc3QgICAgPSB7fTtcblx0dGVzdFtfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgndG9TdHJpbmdUYWcnKV0gPSAneic7XG5cdGlmKHRlc3QgKyAnJyAhPSAnW29iamVjdCB6XScpe1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNjApKE9iamVjdC5wcm90b3R5cGUsICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG5cdCAgICByZXR1cm4gJ1tvYmplY3QgJyArIGNsYXNzb2YodGhpcykgKyAnXSc7XG5cdCAgfSwgdHJ1ZSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDExNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKClcblx0dmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpXG5cdCAgLCBUQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgndG9TdHJpbmdUYWcnKVxuXHQgIC8vIEVTMyB3cm9uZyBoZXJlXG5cdCAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJztcblx0XG5cdC8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yXG5cdHZhciB0cnlHZXQgPSBmdW5jdGlvbihpdCwga2V5KXtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIGl0W2tleV07XG5cdCAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG5cdCAgdmFyIE8sIFQsIEI7XG5cdCAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnXG5cdCAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2Vcblx0ICAgIDogdHlwZW9mIChUID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUQUcpKSA9PSAnc3RyaW5nJyA/IFRcblx0ICAgIC8vIGJ1aWx0aW5UYWcgY2FzZVxuXHQgICAgOiBBUkcgPyBjb2YoTylcblx0ICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2tcblx0ICAgIDogKEIgPSBjb2YoTykpID09ICdPYmplY3QnICYmIHR5cGVvZiBPLmNhbGxlZSA9PSAnZnVuY3Rpb24nID8gJ0FyZ3VtZW50cycgOiBCO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAxOS4yLjMuMiAvIDE1LjMuNC41IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kKHRoaXNBcmcsIGFyZ3MuLi4pXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCwgJ0Z1bmN0aW9uJywge2JpbmQ6IF9fd2VicGFja19yZXF1aXJlX18oMTE5KX0pO1xuXG4vKioqLyB9LFxuLyogMTE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBhRnVuY3Rpb24gID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mylcblx0ICAsIGlzT2JqZWN0ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KVxuXHQgICwgaW52b2tlICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIwKVxuXHQgICwgYXJyYXlTbGljZSA9IFtdLnNsaWNlXG5cdCAgLCBmYWN0b3JpZXMgID0ge307XG5cdFxuXHR2YXIgY29uc3RydWN0ID0gZnVuY3Rpb24oRiwgbGVuLCBhcmdzKXtcblx0ICBpZighKGxlbiBpbiBmYWN0b3JpZXMpKXtcblx0ICAgIGZvcih2YXIgbiA9IFtdLCBpID0gMDsgaSA8IGxlbjsgaSsrKW5baV0gPSAnYVsnICsgaSArICddJztcblx0ICAgIGZhY3Rvcmllc1tsZW5dID0gRnVuY3Rpb24oJ0YsYScsICdyZXR1cm4gbmV3IEYoJyArIG4uam9pbignLCcpICsgJyknKTtcblx0ICB9IHJldHVybiBmYWN0b3JpZXNbbGVuXShGLCBhcmdzKTtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRnVuY3Rpb24uYmluZCB8fCBmdW5jdGlvbiBiaW5kKHRoYXQgLyosIGFyZ3MuLi4gKi8pe1xuXHQgIHZhciBmbiAgICAgICA9IGFGdW5jdGlvbih0aGlzKVxuXHQgICAgLCBwYXJ0QXJncyA9IGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgIHZhciBib3VuZCA9IGZ1bmN0aW9uKC8qIGFyZ3MuLi4gKi8pe1xuXHQgICAgdmFyIGFyZ3MgPSBwYXJ0QXJncy5jb25jYXQoYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXHQgICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBib3VuZCA/IGNvbnN0cnVjdChmbiwgYXJncy5sZW5ndGgsIGFyZ3MpIDogaW52b2tlKGZuLCBhcmdzLCB0aGF0KTtcblx0ICB9O1xuXHQgIGlmKGlzT2JqZWN0KGZuLnByb3RvdHlwZSkpYm91bmQucHJvdG90eXBlID0gZm4ucHJvdG90eXBlO1xuXHQgIHJldHVybiBib3VuZDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIGFyZ3MsIHRoYXQpe1xuXHQgIHZhciB1biA9IHRoYXQgPT09IHVuZGVmaW5lZDtcblx0ICBzd2l0Y2goYXJncy5sZW5ndGgpe1xuXHQgICAgY2FzZSAwOiByZXR1cm4gdW4gPyBmbigpXG5cdCAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCk7XG5cdCAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pXG5cdCAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSk7XG5cdCAgICBjYXNlIDI6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0pXG5cdCAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7XG5cdCAgICBjYXNlIDM6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pXG5cdCAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG5cdCAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pXG5cdCAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7XG5cdCAgfSByZXR1cm4gICAgICAgICAgICAgIGZuLmFwcGx5KHRoYXQsIGFyZ3MpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpLmZcblx0ICAsIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KVxuXHQgICwgaGFzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgLCBGUHJvdG8gICAgID0gRnVuY3Rpb24ucHJvdG90eXBlXG5cdCAgLCBuYW1lUkUgICAgID0gL15cXHMqZnVuY3Rpb24gKFteIChdKikvXG5cdCAgLCBOQU1FICAgICAgID0gJ25hbWUnO1xuXHRcblx0dmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGUgfHwgZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0XG5cdC8vIDE5LjIuNC4yIG5hbWVcblx0TkFNRSBpbiBGUHJvdG8gfHwgX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkgJiYgZFAoRlByb3RvLCBOQU1FLCB7XG5cdCAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24oKXtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciB0aGF0ID0gdGhpc1xuXHQgICAgICAgICwgbmFtZSA9ICgnJyArIHRoYXQpLm1hdGNoKG5hbWVSRSlbMV07XG5cdCAgICAgIGhhcyh0aGF0LCBOQU1FKSB8fCAhaXNFeHRlbnNpYmxlKHRoYXQpIHx8IGRQKHRoYXQsIE5BTUUsIGNyZWF0ZURlc2MoNSwgbmFtZSkpO1xuXHQgICAgICByZXR1cm4gbmFtZTtcblx0ICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBpc09iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKVxuXHQgICwgSEFTX0lOU1RBTkNFICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnaGFzSW5zdGFuY2UnKVxuXHQgICwgRnVuY3Rpb25Qcm90byAgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG5cdC8vIDE5LjIuMy42IEZ1bmN0aW9uLnByb3RvdHlwZVtAQGhhc0luc3RhbmNlXShWKVxuXHRpZighKEhBU19JTlNUQU5DRSBpbiBGdW5jdGlvblByb3RvKSlfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKS5mKEZ1bmN0aW9uUHJvdG8sIEhBU19JTlNUQU5DRSwge3ZhbHVlOiBmdW5jdGlvbihPKXtcblx0ICBpZih0eXBlb2YgdGhpcyAhPSAnZnVuY3Rpb24nIHx8ICFpc09iamVjdChPKSlyZXR1cm4gZmFsc2U7XG5cdCAgaWYoIWlzT2JqZWN0KHRoaXMucHJvdG90eXBlKSlyZXR1cm4gTyBpbnN0YW5jZW9mIHRoaXM7XG5cdCAgLy8gZm9yIGVudmlyb25tZW50IHcvbyBuYXRpdmUgYEBAaGFzSW5zdGFuY2VgIGxvZ2ljIGVub3VnaCBgaW5zdGFuY2VvZmAsIGJ1dCBhZGQgdGhpczpcblx0ICB3aGlsZShPID0gZ2V0UHJvdG90eXBlT2YoTykpaWYodGhpcy5wcm90b3R5cGUgPT09IE8pcmV0dXJuIHRydWU7XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9fSk7XG5cbi8qKiovIH0sXG4vKiAxMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciAkZXhwb3J0ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJHBhcnNlSW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpO1xuXHQvLyAxOC4yLjUgcGFyc2VJbnQoc3RyaW5nLCByYWRpeClcblx0JGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkYgKiAocGFyc2VJbnQgIT0gJHBhcnNlSW50KSwge3BhcnNlSW50OiAkcGFyc2VJbnR9KTtcblxuLyoqKi8gfSxcbi8qIDEyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRwYXJzZUludCA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpLnBhcnNlSW50XG5cdCAgLCAkdHJpbSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSkudHJpbVxuXHQgICwgd3MgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjYpXG5cdCAgLCBoZXggICAgICAgPSAvXltcXC0rXT8wW3hYXS87XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9ICRwYXJzZUludCh3cyArICcwOCcpICE9PSA4IHx8ICRwYXJzZUludCh3cyArICcweDE2JykgIT09IDIyID8gZnVuY3Rpb24gcGFyc2VJbnQoc3RyLCByYWRpeCl7XG5cdCAgdmFyIHN0cmluZyA9ICR0cmltKFN0cmluZyhzdHIpLCAzKTtcblx0ICByZXR1cm4gJHBhcnNlSW50KHN0cmluZywgKHJhZGl4ID4+PiAwKSB8fCAoaGV4LnRlc3Qoc3RyaW5nKSA/IDE2IDogMTApKTtcblx0fSA6ICRwYXJzZUludDtcblxuLyoqKi8gfSxcbi8qIDEyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpXG5cdCAgLCBmYWlscyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSlcblx0ICAsIHNwYWNlcyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNilcblx0ICAsIHNwYWNlICAgPSAnWycgKyBzcGFjZXMgKyAnXSdcblx0ICAsIG5vbiAgICAgPSAnXFx1MjAwYlxcdTAwODUnXG5cdCAgLCBsdHJpbSAgID0gUmVnRXhwKCdeJyArIHNwYWNlICsgc3BhY2UgKyAnKicpXG5cdCAgLCBydHJpbSAgID0gUmVnRXhwKHNwYWNlICsgc3BhY2UgKyAnKiQnKTtcblx0XG5cdHZhciBleHBvcnRlciA9IGZ1bmN0aW9uKEtFWSwgZXhlYywgQUxJQVMpe1xuXHQgIHZhciBleHAgICA9IHt9O1xuXHQgIHZhciBGT1JDRSA9IGZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgICByZXR1cm4gISFzcGFjZXNbS0VZXSgpIHx8IG5vbltLRVldKCkgIT0gbm9uO1xuXHQgIH0pO1xuXHQgIHZhciBmbiA9IGV4cFtLRVldID0gRk9SQ0UgPyBleGVjKHRyaW0pIDogc3BhY2VzW0tFWV07XG5cdCAgaWYoQUxJQVMpZXhwW0FMSUFTXSA9IGZuO1xuXHQgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogRk9SQ0UsICdTdHJpbmcnLCBleHApO1xuXHR9O1xuXHRcblx0Ly8gMSAtPiBTdHJpbmcjdHJpbUxlZnRcblx0Ly8gMiAtPiBTdHJpbmcjdHJpbVJpZ2h0XG5cdC8vIDMgLT4gU3RyaW5nI3RyaW1cblx0dmFyIHRyaW0gPSBleHBvcnRlci50cmltID0gZnVuY3Rpb24oc3RyaW5nLCBUWVBFKXtcblx0ICBzdHJpbmcgPSBTdHJpbmcoZGVmaW5lZChzdHJpbmcpKTtcblx0ICBpZihUWVBFICYgMSlzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShsdHJpbSwgJycpO1xuXHQgIGlmKFRZUEUgJiAyKXN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJ0cmltLCAnJyk7XG5cdCAgcmV0dXJuIHN0cmluZztcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0ZXI7XG5cbi8qKiovIH0sXG4vKiAxMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gJ1xceDA5XFx4MEFcXHgwQlxceDBDXFx4MERcXHgyMFxceEEwXFx1MTY4MFxcdTE4MEVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzJyArXG5cdCAgJ1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMEFcXHUyMDJGXFx1MjA1RlxcdTMwMDBcXHUyMDI4XFx1MjAyOVxcdUZFRkYnO1xuXG4vKioqLyB9LFxuLyogMTI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgJGV4cG9ydCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJHBhcnNlRmxvYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOCk7XG5cdC8vIDE4LjIuNCBwYXJzZUZsb2F0KHN0cmluZylcblx0JGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkYgKiAocGFyc2VGbG9hdCAhPSAkcGFyc2VGbG9hdCksIHtwYXJzZUZsb2F0OiAkcGFyc2VGbG9hdH0pO1xuXG4vKioqLyB9LFxuLyogMTI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgJHBhcnNlRmxvYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KS5wYXJzZUZsb2F0XG5cdCAgLCAkdHJpbSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KS50cmltO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSAxIC8gJHBhcnNlRmxvYXQoX193ZWJwYWNrX3JlcXVpcmVfXygxMjYpICsgJy0wJykgIT09IC1JbmZpbml0eSA/IGZ1bmN0aW9uIHBhcnNlRmxvYXQoc3RyKXtcblx0ICB2YXIgc3RyaW5nID0gJHRyaW0oU3RyaW5nKHN0ciksIDMpXG5cdCAgICAsIHJlc3VsdCA9ICRwYXJzZUZsb2F0KHN0cmluZyk7XG5cdCAgcmV0dXJuIHJlc3VsdCA9PT0gMCAmJiBzdHJpbmcuY2hhckF0KDApID09ICctJyA/IC0wIDogcmVzdWx0O1xuXHR9IDogJHBhcnNlRmxvYXQ7XG5cbi8qKiovIH0sXG4vKiAxMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIGdsb2JhbCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nilcblx0ICAsIGhhcyAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nylcblx0ICAsIGNvZiAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nilcblx0ICAsIGluaGVyaXRJZlJlcXVpcmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApXG5cdCAgLCB0b1ByaW1pdGl2ZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdCAgLCBmYWlscyAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpXG5cdCAgLCBnT1BOICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpLmZcblx0ICAsIGdPUEQgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MykuZlxuXHQgICwgZFAgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKS5mXG5cdCAgLCAkdHJpbSAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KS50cmltXG5cdCAgLCBOVU1CRVIgICAgICAgICAgICA9ICdOdW1iZXInXG5cdCAgLCAkTnVtYmVyICAgICAgICAgICA9IGdsb2JhbFtOVU1CRVJdXG5cdCAgLCBCYXNlICAgICAgICAgICAgICA9ICROdW1iZXJcblx0ICAsIHByb3RvICAgICAgICAgICAgID0gJE51bWJlci5wcm90b3R5cGVcblx0ICAvLyBPcGVyYSB+MTIgaGFzIGJyb2tlbiBPYmplY3QjdG9TdHJpbmdcblx0ICAsIEJST0tFTl9DT0YgICAgICAgID0gY29mKF9fd2VicGFja19yZXF1aXJlX18oODgpKHByb3RvKSkgPT0gTlVNQkVSXG5cdCAgLCBUUklNICAgICAgICAgICAgICA9ICd0cmltJyBpbiBTdHJpbmcucHJvdG90eXBlO1xuXHRcblx0Ly8gNy4xLjMgVG9OdW1iZXIoYXJndW1lbnQpXG5cdHZhciB0b051bWJlciA9IGZ1bmN0aW9uKGFyZ3VtZW50KXtcblx0ICB2YXIgaXQgPSB0b1ByaW1pdGl2ZShhcmd1bWVudCwgZmFsc2UpO1xuXHQgIGlmKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyAmJiBpdC5sZW5ndGggPiAyKXtcblx0ICAgIGl0ID0gVFJJTSA/IGl0LnRyaW0oKSA6ICR0cmltKGl0LCAzKTtcblx0ICAgIHZhciBmaXJzdCA9IGl0LmNoYXJDb2RlQXQoMClcblx0ICAgICAgLCB0aGlyZCwgcmFkaXgsIG1heENvZGU7XG5cdCAgICBpZihmaXJzdCA9PT0gNDMgfHwgZmlyc3QgPT09IDQ1KXtcblx0ICAgICAgdGhpcmQgPSBpdC5jaGFyQ29kZUF0KDIpO1xuXHQgICAgICBpZih0aGlyZCA9PT0gODggfHwgdGhpcmQgPT09IDEyMClyZXR1cm4gTmFOOyAvLyBOdW1iZXIoJysweDEnKSBzaG91bGQgYmUgTmFOLCBvbGQgVjggZml4XG5cdCAgICB9IGVsc2UgaWYoZmlyc3QgPT09IDQ4KXtcblx0ICAgICAgc3dpdGNoKGl0LmNoYXJDb2RlQXQoMSkpe1xuXHQgICAgICAgIGNhc2UgNjYgOiBjYXNlIDk4ICA6IHJhZGl4ID0gMjsgbWF4Q29kZSA9IDQ5OyBicmVhazsgLy8gZmFzdCBlcXVhbCAvXjBiWzAxXSskL2lcblx0ICAgICAgICBjYXNlIDc5IDogY2FzZSAxMTEgOiByYWRpeCA9IDg7IG1heENvZGUgPSA1NTsgYnJlYWs7IC8vIGZhc3QgZXF1YWwgL14wb1swLTddKyQvaVxuXHQgICAgICAgIGRlZmF1bHQgOiByZXR1cm4gK2l0O1xuXHQgICAgICB9XG5cdCAgICAgIGZvcih2YXIgZGlnaXRzID0gaXQuc2xpY2UoMiksIGkgPSAwLCBsID0gZGlnaXRzLmxlbmd0aCwgY29kZTsgaSA8IGw7IGkrKyl7XG5cdCAgICAgICAgY29kZSA9IGRpZ2l0cy5jaGFyQ29kZUF0KGkpO1xuXHQgICAgICAgIC8vIHBhcnNlSW50IHBhcnNlcyBhIHN0cmluZyB0byBhIGZpcnN0IHVuYXZhaWxhYmxlIHN5bWJvbFxuXHQgICAgICAgIC8vIGJ1dCBUb051bWJlciBzaG91bGQgcmV0dXJuIE5hTiBpZiBhIHN0cmluZyBjb250YWlucyB1bmF2YWlsYWJsZSBzeW1ib2xzXG5cdCAgICAgICAgaWYoY29kZSA8IDQ4IHx8IGNvZGUgPiBtYXhDb2RlKXJldHVybiBOYU47XG5cdCAgICAgIH0gcmV0dXJuIHBhcnNlSW50KGRpZ2l0cywgcmFkaXgpO1xuXHQgICAgfVxuXHQgIH0gcmV0dXJuICtpdDtcblx0fTtcblx0XG5cdGlmKCEkTnVtYmVyKCcgMG8xJykgfHwgISROdW1iZXIoJzBiMScpIHx8ICROdW1iZXIoJysweDEnKSl7XG5cdCAgJE51bWJlciA9IGZ1bmN0aW9uIE51bWJlcih2YWx1ZSl7XG5cdCAgICB2YXIgaXQgPSBhcmd1bWVudHMubGVuZ3RoIDwgMSA/IDAgOiB2YWx1ZVxuXHQgICAgICAsIHRoYXQgPSB0aGlzO1xuXHQgICAgcmV0dXJuIHRoYXQgaW5zdGFuY2VvZiAkTnVtYmVyXG5cdCAgICAgIC8vIGNoZWNrIG9uIDEuLmNvbnN0cnVjdG9yKGZvbykgY2FzZVxuXHQgICAgICAmJiAoQlJPS0VOX0NPRiA/IGZhaWxzKGZ1bmN0aW9uKCl7IHByb3RvLnZhbHVlT2YuY2FsbCh0aGF0KTsgfSkgOiBjb2YodGhhdCkgIT0gTlVNQkVSKVxuXHQgICAgICAgID8gaW5oZXJpdElmUmVxdWlyZWQobmV3IEJhc2UodG9OdW1iZXIoaXQpKSwgdGhhdCwgJE51bWJlcikgOiB0b051bWJlcihpdCk7XG5cdCAgfTtcblx0ICBmb3IodmFyIGtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSA/IGdPUE4oQmFzZSkgOiAoXG5cdCAgICAvLyBFUzM6XG5cdCAgICAnTUFYX1ZBTFVFLE1JTl9WQUxVRSxOYU4sTkVHQVRJVkVfSU5GSU5JVFksUE9TSVRJVkVfSU5GSU5JVFksJyArXG5cdCAgICAvLyBFUzYgKGluIGNhc2UsIGlmIG1vZHVsZXMgd2l0aCBFUzYgTnVtYmVyIHN0YXRpY3MgcmVxdWlyZWQgYmVmb3JlKTpcblx0ICAgICdFUFNJTE9OLGlzRmluaXRlLGlzSW50ZWdlcixpc05hTixpc1NhZmVJbnRlZ2VyLE1BWF9TQUZFX0lOVEVHRVIsJyArXG5cdCAgICAnTUlOX1NBRkVfSU5URUdFUixwYXJzZUZsb2F0LHBhcnNlSW50LGlzSW50ZWdlcidcblx0ICApLnNwbGl0KCcsJyksIGogPSAwLCBrZXk7IGtleXMubGVuZ3RoID4gajsgaisrKXtcblx0ICAgIGlmKGhhcyhCYXNlLCBrZXkgPSBrZXlzW2pdKSAmJiAhaGFzKCROdW1iZXIsIGtleSkpe1xuXHQgICAgICBkUCgkTnVtYmVyLCBrZXksIGdPUEQoQmFzZSwga2V5KSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgICROdW1iZXIucHJvdG90eXBlID0gcHJvdG87XG5cdCAgcHJvdG8uY29uc3RydWN0b3IgPSAkTnVtYmVyO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNjApKGdsb2JhbCwgTlVNQkVSLCAkTnVtYmVyKTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNPYmplY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KVxuXHQgICwgc2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNSkuc2V0O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRoYXQsIHRhcmdldCwgQyl7XG5cdCAgdmFyIFAsIFMgPSB0YXJnZXQuY29uc3RydWN0b3I7XG5cdCAgaWYoUyAhPT0gQyAmJiB0eXBlb2YgUyA9PSAnZnVuY3Rpb24nICYmIChQID0gUy5wcm90b3R5cGUpICE9PSBDLnByb3RvdHlwZSAmJiBpc09iamVjdChQKSAmJiBzZXRQcm90b3R5cGVPZil7XG5cdCAgICBzZXRQcm90b3R5cGVPZih0aGF0LCBQKTtcblx0ICB9IHJldHVybiB0aGF0O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciAkZXhwb3J0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgdG9JbnRlZ2VyICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MClcblx0ICAsIGFOdW1iZXJWYWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMyKVxuXHQgICwgcmVwZWF0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzMpXG5cdCAgLCAkdG9GaXhlZCAgICAgPSAxLi50b0ZpeGVkXG5cdCAgLCBmbG9vciAgICAgICAgPSBNYXRoLmZsb29yXG5cdCAgLCBkYXRhICAgICAgICAgPSBbMCwgMCwgMCwgMCwgMCwgMF1cblx0ICAsIEVSUk9SICAgICAgICA9ICdOdW1iZXIudG9GaXhlZDogaW5jb3JyZWN0IGludm9jYXRpb24hJ1xuXHQgICwgWkVSTyAgICAgICAgID0gJzAnO1xuXHRcblx0dmFyIG11bHRpcGx5ID0gZnVuY3Rpb24obiwgYyl7XG5cdCAgdmFyIGkgID0gLTFcblx0ICAgICwgYzIgPSBjO1xuXHQgIHdoaWxlKCsraSA8IDYpe1xuXHQgICAgYzIgKz0gbiAqIGRhdGFbaV07XG5cdCAgICBkYXRhW2ldID0gYzIgJSAxZTc7XG5cdCAgICBjMiA9IGZsb29yKGMyIC8gMWU3KTtcblx0ICB9XG5cdH07XG5cdHZhciBkaXZpZGUgPSBmdW5jdGlvbihuKXtcblx0ICB2YXIgaSA9IDZcblx0ICAgICwgYyA9IDA7XG5cdCAgd2hpbGUoLS1pID49IDApe1xuXHQgICAgYyArPSBkYXRhW2ldO1xuXHQgICAgZGF0YVtpXSA9IGZsb29yKGMgLyBuKTtcblx0ICAgIGMgPSAoYyAlIG4pICogMWU3O1xuXHQgIH1cblx0fTtcblx0dmFyIG51bVRvU3RyaW5nID0gZnVuY3Rpb24oKXtcblx0ICB2YXIgaSA9IDZcblx0ICAgICwgcyA9ICcnO1xuXHQgIHdoaWxlKC0taSA+PSAwKXtcblx0ICAgIGlmKHMgIT09ICcnIHx8IGkgPT09IDAgfHwgZGF0YVtpXSAhPT0gMCl7XG5cdCAgICAgIHZhciB0ID0gU3RyaW5nKGRhdGFbaV0pO1xuXHQgICAgICBzID0gcyA9PT0gJycgPyB0IDogcyArIHJlcGVhdC5jYWxsKFpFUk8sIDcgLSB0Lmxlbmd0aCkgKyB0O1xuXHQgICAgfVxuXHQgIH0gcmV0dXJuIHM7XG5cdH07XG5cdHZhciBwb3cgPSBmdW5jdGlvbih4LCBuLCBhY2Mpe1xuXHQgIHJldHVybiBuID09PSAwID8gYWNjIDogbiAlIDIgPT09IDEgPyBwb3coeCwgbiAtIDEsIGFjYyAqIHgpIDogcG93KHggKiB4LCBuIC8gMiwgYWNjKTtcblx0fTtcblx0dmFyIGxvZyA9IGZ1bmN0aW9uKHgpe1xuXHQgIHZhciBuICA9IDBcblx0ICAgICwgeDIgPSB4O1xuXHQgIHdoaWxlKHgyID49IDQwOTYpe1xuXHQgICAgbiArPSAxMjtcblx0ICAgIHgyIC89IDQwOTY7XG5cdCAgfVxuXHQgIHdoaWxlKHgyID49IDIpe1xuXHQgICAgbiAgKz0gMTtcblx0ICAgIHgyIC89IDI7XG5cdCAgfSByZXR1cm4gbjtcblx0fTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKCEhJHRvRml4ZWQgJiYgKFxuXHQgIDAuMDAwMDgudG9GaXhlZCgzKSAhPT0gJzAuMDAwJyB8fFxuXHQgIDAuOS50b0ZpeGVkKDApICE9PSAnMScgfHxcblx0ICAxLjI1NS50b0ZpeGVkKDIpICE9PSAnMS4yNScgfHxcblx0ICAxMDAwMDAwMDAwMDAwMDAwMTI4Li50b0ZpeGVkKDApICE9PSAnMTAwMDAwMDAwMDAwMDAwMDEyOCdcblx0KSB8fCAhX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkoZnVuY3Rpb24oKXtcblx0ICAvLyBWOCB+IEFuZHJvaWQgNC4zLVxuXHQgICR0b0ZpeGVkLmNhbGwoe30pO1xuXHR9KSksICdOdW1iZXInLCB7XG5cdCAgdG9GaXhlZDogZnVuY3Rpb24gdG9GaXhlZChmcmFjdGlvbkRpZ2l0cyl7XG5cdCAgICB2YXIgeCA9IGFOdW1iZXJWYWx1ZSh0aGlzLCBFUlJPUilcblx0ICAgICAgLCBmID0gdG9JbnRlZ2VyKGZyYWN0aW9uRGlnaXRzKVxuXHQgICAgICAsIHMgPSAnJ1xuXHQgICAgICAsIG0gPSBaRVJPXG5cdCAgICAgICwgZSwgeiwgaiwgaztcblx0ICAgIGlmKGYgPCAwIHx8IGYgPiAyMCl0aHJvdyBSYW5nZUVycm9yKEVSUk9SKTtcblx0ICAgIGlmKHggIT0geClyZXR1cm4gJ05hTic7XG5cdCAgICBpZih4IDw9IC0xZTIxIHx8IHggPj0gMWUyMSlyZXR1cm4gU3RyaW5nKHgpO1xuXHQgICAgaWYoeCA8IDApe1xuXHQgICAgICBzID0gJy0nO1xuXHQgICAgICB4ID0gLXg7XG5cdCAgICB9XG5cdCAgICBpZih4ID4gMWUtMjEpe1xuXHQgICAgICBlID0gbG9nKHggKiBwb3coMiwgNjksIDEpKSAtIDY5O1xuXHQgICAgICB6ID0gZSA8IDAgPyB4ICogcG93KDIsIC1lLCAxKSA6IHggLyBwb3coMiwgZSwgMSk7XG5cdCAgICAgIHogKj0gMHgxMDAwMDAwMDAwMDAwMDtcblx0ICAgICAgZSA9IDUyIC0gZTtcblx0ICAgICAgaWYoZSA+IDApe1xuXHQgICAgICAgIG11bHRpcGx5KDAsIHopO1xuXHQgICAgICAgIGogPSBmO1xuXHQgICAgICAgIHdoaWxlKGogPj0gNyl7XG5cdCAgICAgICAgICBtdWx0aXBseSgxZTcsIDApO1xuXHQgICAgICAgICAgaiAtPSA3O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBtdWx0aXBseShwb3coMTAsIGosIDEpLCAwKTtcblx0ICAgICAgICBqID0gZSAtIDE7XG5cdCAgICAgICAgd2hpbGUoaiA+PSAyMyl7XG5cdCAgICAgICAgICBkaXZpZGUoMSA8PCAyMyk7XG5cdCAgICAgICAgICBqIC09IDIzO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBkaXZpZGUoMSA8PCBqKTtcblx0ICAgICAgICBtdWx0aXBseSgxLCAxKTtcblx0ICAgICAgICBkaXZpZGUoMik7XG5cdCAgICAgICAgbSA9IG51bVRvU3RyaW5nKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbXVsdGlwbHkoMCwgeik7XG5cdCAgICAgICAgbXVsdGlwbHkoMSA8PCAtZSwgMCk7XG5cdCAgICAgICAgbSA9IG51bVRvU3RyaW5nKCkgKyByZXBlYXQuY2FsbChaRVJPLCBmKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYoZiA+IDApe1xuXHQgICAgICBrID0gbS5sZW5ndGg7XG5cdCAgICAgIG0gPSBzICsgKGsgPD0gZiA/ICcwLicgKyByZXBlYXQuY2FsbChaRVJPLCBmIC0gaykgKyBtIDogbS5zbGljZSgwLCBrIC0gZikgKyAnLicgKyBtLnNsaWNlKGsgLSBmKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtID0gcyArIG07XG5cdCAgICB9IHJldHVybiBtO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgbXNnKXtcblx0ICBpZih0eXBlb2YgaXQgIT0gJ251bWJlcicgJiYgY29mKGl0KSAhPSAnTnVtYmVyJyl0aHJvdyBUeXBlRXJyb3IobXNnKTtcblx0ICByZXR1cm4gK2l0O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKVxuXHQgICwgZGVmaW5lZCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlcGVhdChjb3VudCl7XG5cdCAgdmFyIHN0ciA9IFN0cmluZyhkZWZpbmVkKHRoaXMpKVxuXHQgICAgLCByZXMgPSAnJ1xuXHQgICAgLCBuICAgPSB0b0ludGVnZXIoY291bnQpO1xuXHQgIGlmKG4gPCAwIHx8IG4gPT0gSW5maW5pdHkpdGhyb3cgUmFuZ2VFcnJvcihcIkNvdW50IGNhbid0IGJlIG5lZ2F0aXZlXCIpO1xuXHQgIGZvcig7biA+IDA7IChuID4+Pj0gMSkgJiYgKHN0ciArPSBzdHIpKWlmKG4gJiAxKXJlcyArPSBzdHI7XG5cdCAgcmV0dXJuIHJlcztcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICRmYWlscyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpXG5cdCAgLCBhTnVtYmVyVmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMilcblx0ICAsICR0b1ByZWNpc2lvbiA9IDEuLnRvUHJlY2lzaW9uO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoJGZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgLy8gSUU3LVxuXHQgIHJldHVybiAkdG9QcmVjaXNpb24uY2FsbCgxLCB1bmRlZmluZWQpICE9PSAnMSc7XG5cdH0pIHx8ICEkZmFpbHMoZnVuY3Rpb24oKXtcblx0ICAvLyBWOCB+IEFuZHJvaWQgNC4zLVxuXHQgICR0b1ByZWNpc2lvbi5jYWxsKHt9KTtcblx0fSkpLCAnTnVtYmVyJywge1xuXHQgIHRvUHJlY2lzaW9uOiBmdW5jdGlvbiB0b1ByZWNpc2lvbihwcmVjaXNpb24pe1xuXHQgICAgdmFyIHRoYXQgPSBhTnVtYmVyVmFsdWUodGhpcywgJ051bWJlciN0b1ByZWNpc2lvbjogaW5jb3JyZWN0IGludm9jYXRpb24hJyk7XG5cdCAgICByZXR1cm4gcHJlY2lzaW9uID09PSB1bmRlZmluZWQgPyAkdG9QcmVjaXNpb24uY2FsbCh0aGF0KSA6ICR0b1ByZWNpc2lvbi5jYWxsKHRoYXQsIHByZWNpc2lvbik7IFxuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxMzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjEuMi4xIE51bWJlci5FUFNJTE9OXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHtFUFNJTE9OOiBNYXRoLnBvdygyLCAtNTIpfSk7XG5cbi8qKiovIH0sXG4vKiAxMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjEuMi4yIE51bWJlci5pc0Zpbml0ZShudW1iZXIpXG5cdHZhciAkZXhwb3J0ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgX2lzRmluaXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NikuaXNGaW5pdGU7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHtcblx0ICBpc0Zpbml0ZTogZnVuY3Rpb24gaXNGaW5pdGUoaXQpe1xuXHQgICAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnbnVtYmVyJyAmJiBfaXNGaW5pdGUoaXQpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjEuMi4zIE51bWJlci5pc0ludGVnZXIobnVtYmVyKVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7aXNJbnRlZ2VyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCl9KTtcblxuLyoqKi8gfSxcbi8qIDEzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjAuMS4yLjMgTnVtYmVyLmlzSW50ZWdlcihudW1iZXIpXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBmbG9vciAgICA9IE1hdGguZmxvb3I7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNJbnRlZ2VyKGl0KXtcblx0ICByZXR1cm4gIWlzT2JqZWN0KGl0KSAmJiBpc0Zpbml0ZShpdCkgJiYgZmxvb3IoaXQpID09PSBpdDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjAuMS4yLjQgTnVtYmVyLmlzTmFOKG51bWJlcilcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnTnVtYmVyJywge1xuXHQgIGlzTmFOOiBmdW5jdGlvbiBpc05hTihudW1iZXIpe1xuXHQgICAgcmV0dXJuIG51bWJlciAhPSBudW1iZXI7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjAuMS4yLjUgTnVtYmVyLmlzU2FmZUludGVnZXIobnVtYmVyKVxuXHR2YXIgJGV4cG9ydCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIGlzSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTM4KVxuXHQgICwgYWJzICAgICAgID0gTWF0aC5hYnM7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHtcblx0ICBpc1NhZmVJbnRlZ2VyOiBmdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKG51bWJlcil7XG5cdCAgICByZXR1cm4gaXNJbnRlZ2VyKG51bWJlcikgJiYgYWJzKG51bWJlcikgPD0gMHgxZmZmZmZmZmZmZmZmZjtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyMC4xLjIuNiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7TUFYX1NBRkVfSU5URUdFUjogMHgxZmZmZmZmZmZmZmZmZn0pO1xuXG4vKioqLyB9LFxuLyogMTQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyMC4xLjIuMTAgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnTnVtYmVyJywge01JTl9TQUZFX0lOVEVHRVI6IC0weDFmZmZmZmZmZmZmZmZmfSk7XG5cbi8qKiovIH0sXG4vKiAxNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciAkZXhwb3J0ICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCAkcGFyc2VGbG9hdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI4KTtcblx0Ly8gMjAuMS4yLjEyIE51bWJlci5wYXJzZUZsb2F0KHN0cmluZylcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoTnVtYmVyLnBhcnNlRmxvYXQgIT0gJHBhcnNlRmxvYXQpLCAnTnVtYmVyJywge3BhcnNlRmxvYXQ6ICRwYXJzZUZsb2F0fSk7XG5cbi8qKiovIH0sXG4vKiAxNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciAkZXhwb3J0ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJHBhcnNlSW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpO1xuXHQvLyAyMC4xLjIuMTMgTnVtYmVyLnBhcnNlSW50KHN0cmluZywgcmFkaXgpXG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKE51bWJlci5wYXJzZUludCAhPSAkcGFyc2VJbnQpLCAnTnVtYmVyJywge3BhcnNlSW50OiAkcGFyc2VJbnR9KTtcblxuLyoqKi8gfSxcbi8qIDE0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjAuMi4yLjMgTWF0aC5hY29zaCh4KVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBsb2cxcCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpXG5cdCAgLCBzcXJ0ICAgID0gTWF0aC5zcXJ0XG5cdCAgLCAkYWNvc2ggID0gTWF0aC5hY29zaDtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogISgkYWNvc2hcblx0ICAvLyBWOCBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zNTA5XG5cdCAgJiYgTWF0aC5mbG9vcigkYWNvc2goTnVtYmVyLk1BWF9WQUxVRSkpID09IDcxMFxuXHQgIC8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hY29zaChJbmZpbml0eSkgLT4gTmFOIFxuXHQgICYmICRhY29zaChJbmZpbml0eSkgPT0gSW5maW5pdHlcblx0KSwgJ01hdGgnLCB7XG5cdCAgYWNvc2g6IGZ1bmN0aW9uIGFjb3NoKHgpe1xuXHQgICAgcmV0dXJuICh4ID0gK3gpIDwgMSA/IE5hTiA6IHggPiA5NDkwNjI2NS42MjQyNTE1NlxuXHQgICAgICA/IE1hdGgubG9nKHgpICsgTWF0aC5MTjJcblx0ICAgICAgOiBsb2cxcCh4IC0gMSArIHNxcnQoeCAtIDEpICogc3FydCh4ICsgMSkpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIDIwLjIuMi4yMCBNYXRoLmxvZzFwKHgpXG5cdG1vZHVsZS5leHBvcnRzID0gTWF0aC5sb2cxcCB8fCBmdW5jdGlvbiBsb2cxcCh4KXtcblx0ICByZXR1cm4gKHggPSAreCkgPiAtMWUtOCAmJiB4IDwgMWUtOCA/IHggLSB4ICogeCAvIDIgOiBNYXRoLmxvZygxICsgeCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi41IE1hdGguYXNpbmgoeClcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJGFzaW5oICA9IE1hdGguYXNpbmg7XG5cdFxuXHRmdW5jdGlvbiBhc2luaCh4KXtcblx0ICByZXR1cm4gIWlzRmluaXRlKHggPSAreCkgfHwgeCA9PSAwID8geCA6IHggPCAwID8gLWFzaW5oKC14KSA6IE1hdGgubG9nKHggKyBNYXRoLnNxcnQoeCAqIHggKyAxKSk7XG5cdH1cblx0XG5cdC8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hc2luaCgwKSAtPiAtMCBcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKCRhc2luaCAmJiAxIC8gJGFzaW5oKDApID4gMCksICdNYXRoJywge2FzaW5oOiBhc2luaH0pO1xuXG4vKioqLyB9LFxuLyogMTQ4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyMC4yLjIuNyBNYXRoLmF0YW5oKHgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICRhdGFuaCAgPSBNYXRoLmF0YW5oO1xuXHRcblx0Ly8gVG9yIEJyb3dzZXIgYnVnOiBNYXRoLmF0YW5oKC0wKSAtPiAwIFxuXHQkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoJGF0YW5oICYmIDEgLyAkYXRhbmgoLTApIDwgMCksICdNYXRoJywge1xuXHQgIGF0YW5oOiBmdW5jdGlvbiBhdGFuaCh4KXtcblx0ICAgIHJldHVybiAoeCA9ICt4KSA9PSAwID8geCA6IE1hdGgubG9nKCgxICsgeCkgLyAoMSAtIHgpKSAvIDI7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjAuMi4yLjkgTWF0aC5jYnJ0KHgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIHNpZ24gICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgY2JydDogZnVuY3Rpb24gY2JydCh4KXtcblx0ICAgIHJldHVybiBzaWduKHggPSAreCkgKiBNYXRoLnBvdyhNYXRoLmFicyh4KSwgMSAvIDMpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIDIwLjIuMi4yOCBNYXRoLnNpZ24oeClcblx0bW9kdWxlLmV4cG9ydHMgPSBNYXRoLnNpZ24gfHwgZnVuY3Rpb24gc2lnbih4KXtcblx0ICByZXR1cm4gKHggPSAreCkgPT0gMCB8fCB4ICE9IHggPyB4IDogeCA8IDAgPyAtMSA6IDE7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4xMSBNYXRoLmNsejMyKHgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgY2x6MzI6IGZ1bmN0aW9uIGNsejMyKHgpe1xuXHQgICAgcmV0dXJuICh4ID4+Pj0gMCkgPyAzMSAtIE1hdGguZmxvb3IoTWF0aC5sb2coeCArIDAuNSkgKiBNYXRoLkxPRzJFKSA6IDMyO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4xMiBNYXRoLmNvc2goeClcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgZXhwICAgICA9IE1hdGguZXhwO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywge1xuXHQgIGNvc2g6IGZ1bmN0aW9uIGNvc2goeCl7XG5cdCAgICByZXR1cm4gKGV4cCh4ID0gK3gpICsgZXhwKC14KSkgLyAyO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4xNCBNYXRoLmV4cG0xKHgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICRleHBtMSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICgkZXhwbTEgIT0gTWF0aC5leHBtMSksICdNYXRoJywge2V4cG0xOiAkZXhwbTF9KTtcblxuLyoqKi8gfSxcbi8qIDE1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gMjAuMi4yLjE0IE1hdGguZXhwbTEoeClcblx0dmFyICRleHBtMSA9IE1hdGguZXhwbTE7XG5cdG1vZHVsZS5leHBvcnRzID0gKCEkZXhwbTFcblx0ICAvLyBPbGQgRkYgYnVnXG5cdCAgfHwgJGV4cG0xKDEwKSA+IDIyMDI1LjQ2NTc5NDgwNjcxOSB8fCAkZXhwbTEoMTApIDwgMjIwMjUuNDY1Nzk0ODA2NzE2NTE2OFxuXHQgIC8vIFRvciBCcm93c2VyIGJ1Z1xuXHQgIHx8ICRleHBtMSgtMmUtMTcpICE9IC0yZS0xN1xuXHQpID8gZnVuY3Rpb24gZXhwbTEoeCl7XG5cdCAgcmV0dXJuICh4ID0gK3gpID09IDAgPyB4IDogeCA+IC0xZS02ICYmIHggPCAxZS02ID8geCArIHggKiB4IC8gMiA6IE1hdGguZXhwKHgpIC0gMTtcblx0fSA6ICRleHBtMTtcblxuLyoqKi8gfSxcbi8qIDE1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjAuMi4yLjE2IE1hdGguZnJvdW5kKHgpXG5cdHZhciAkZXhwb3J0ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgc2lnbiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTApXG5cdCAgLCBwb3cgICAgICAgPSBNYXRoLnBvd1xuXHQgICwgRVBTSUxPTiAgID0gcG93KDIsIC01Milcblx0ICAsIEVQU0lMT04zMiA9IHBvdygyLCAtMjMpXG5cdCAgLCBNQVgzMiAgICAgPSBwb3coMiwgMTI3KSAqICgyIC0gRVBTSUxPTjMyKVxuXHQgICwgTUlOMzIgICAgID0gcG93KDIsIC0xMjYpO1xuXHRcblx0dmFyIHJvdW5kVGllc1RvRXZlbiA9IGZ1bmN0aW9uKG4pe1xuXHQgIHJldHVybiBuICsgMSAvIEVQU0lMT04gLSAxIC8gRVBTSUxPTjtcblx0fTtcblx0XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgZnJvdW5kOiBmdW5jdGlvbiBmcm91bmQoeCl7XG5cdCAgICB2YXIgJGFicyAgPSBNYXRoLmFicyh4KVxuXHQgICAgICAsICRzaWduID0gc2lnbih4KVxuXHQgICAgICAsIGEsIHJlc3VsdDtcblx0ICAgIGlmKCRhYnMgPCBNSU4zMilyZXR1cm4gJHNpZ24gKiByb3VuZFRpZXNUb0V2ZW4oJGFicyAvIE1JTjMyIC8gRVBTSUxPTjMyKSAqIE1JTjMyICogRVBTSUxPTjMyO1xuXHQgICAgYSA9ICgxICsgRVBTSUxPTjMyIC8gRVBTSUxPTikgKiAkYWJzO1xuXHQgICAgcmVzdWx0ID0gYSAtIChhIC0gJGFicyk7XG5cdCAgICBpZihyZXN1bHQgPiBNQVgzMiB8fCByZXN1bHQgIT0gcmVzdWx0KXJldHVybiAkc2lnbiAqIEluZmluaXR5O1xuXHQgICAgcmV0dXJuICRzaWduICogcmVzdWx0O1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4xNyBNYXRoLmh5cG90KFt2YWx1ZTFbLCB2YWx1ZTJbLCDigKYgXV1dKVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBhYnMgICAgID0gTWF0aC5hYnM7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgaHlwb3Q6IGZ1bmN0aW9uIGh5cG90KHZhbHVlMSwgdmFsdWUyKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXHQgICAgdmFyIHN1bSAgPSAwXG5cdCAgICAgICwgaSAgICA9IDBcblx0ICAgICAgLCBhTGVuID0gYXJndW1lbnRzLmxlbmd0aFxuXHQgICAgICAsIGxhcmcgPSAwXG5cdCAgICAgICwgYXJnLCBkaXY7XG5cdCAgICB3aGlsZShpIDwgYUxlbil7XG5cdCAgICAgIGFyZyA9IGFicyhhcmd1bWVudHNbaSsrXSk7XG5cdCAgICAgIGlmKGxhcmcgPCBhcmcpe1xuXHQgICAgICAgIGRpdiAgPSBsYXJnIC8gYXJnO1xuXHQgICAgICAgIHN1bSAgPSBzdW0gKiBkaXYgKiBkaXYgKyAxO1xuXHQgICAgICAgIGxhcmcgPSBhcmc7XG5cdCAgICAgIH0gZWxzZSBpZihhcmcgPiAwKXtcblx0ICAgICAgICBkaXYgID0gYXJnIC8gbGFyZztcblx0ICAgICAgICBzdW0gKz0gZGl2ICogZGl2O1xuXHQgICAgICB9IGVsc2Ugc3VtICs9IGFyZztcblx0ICAgIH1cblx0ICAgIHJldHVybiBsYXJnID09PSBJbmZpbml0eSA/IEluZmluaXR5IDogbGFyZyAqIE1hdGguc3FydChzdW0pO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4xOCBNYXRoLmltdWwoeCwgeSlcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJGltdWwgICA9IE1hdGguaW11bDtcblx0XG5cdC8vIHNvbWUgV2ViS2l0IHZlcnNpb25zIGZhaWxzIHdpdGggYmlnIG51bWJlcnMsIHNvbWUgaGFzIHdyb25nIGFyaXR5XG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkoZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gJGltdWwoMHhmZmZmZmZmZiwgNSkgIT0gLTUgfHwgJGltdWwubGVuZ3RoICE9IDI7XG5cdH0pLCAnTWF0aCcsIHtcblx0ICBpbXVsOiBmdW5jdGlvbiBpbXVsKHgsIHkpe1xuXHQgICAgdmFyIFVJTlQxNiA9IDB4ZmZmZlxuXHQgICAgICAsIHhuID0gK3hcblx0ICAgICAgLCB5biA9ICt5XG5cdCAgICAgICwgeGwgPSBVSU5UMTYgJiB4blxuXHQgICAgICAsIHlsID0gVUlOVDE2ICYgeW47XG5cdCAgICByZXR1cm4gMCB8IHhsICogeWwgKyAoKFVJTlQxNiAmIHhuID4+PiAxNikgKiB5bCArIHhsICogKFVJTlQxNiAmIHluID4+PiAxNikgPDwgMTYgPj4+IDApO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4yMSBNYXRoLmxvZzEwKHgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgbG9nMTA6IGZ1bmN0aW9uIGxvZzEwKHgpe1xuXHQgICAgcmV0dXJuIE1hdGgubG9nKHgpIC8gTWF0aC5MTjEwO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4yMCBNYXRoLmxvZzFwKHgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7bG9nMXA6IF9fd2VicGFja19yZXF1aXJlX18oMTQ2KX0pO1xuXG4vKioqLyB9LFxuLyogMTYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyMC4yLjIuMjIgTWF0aC5sb2cyKHgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgbG9nMjogZnVuY3Rpb24gbG9nMih4KXtcblx0ICAgIHJldHVybiBNYXRoLmxvZyh4KSAvIE1hdGguTE4yO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4yOCBNYXRoLnNpZ24oeClcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtzaWduOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCl9KTtcblxuLyoqKi8gfSxcbi8qIDE2MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjAuMi4yLjMwIE1hdGguc2luaCh4KVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBleHBtMSAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTQpXG5cdCAgLCBleHAgICAgID0gTWF0aC5leHA7XG5cdFxuXHQvLyBWOCBuZWFyIENocm9taXVtIDM4IGhhcyBhIHByb2JsZW0gd2l0aCB2ZXJ5IHNtYWxsIG51bWJlcnNcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KShmdW5jdGlvbigpe1xuXHQgIHJldHVybiAhTWF0aC5zaW5oKC0yZS0xNykgIT0gLTJlLTE3O1xuXHR9KSwgJ01hdGgnLCB7XG5cdCAgc2luaDogZnVuY3Rpb24gc2luaCh4KXtcblx0ICAgIHJldHVybiBNYXRoLmFicyh4ID0gK3gpIDwgMVxuXHQgICAgICA/IChleHBtMSh4KSAtIGV4cG0xKC14KSkgLyAyXG5cdCAgICAgIDogKGV4cCh4IC0gMSkgLSBleHAoLXggLSAxKSkgKiAoTWF0aC5FIC8gMik7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjAuMi4yLjMzIE1hdGgudGFuaCh4KVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBleHBtMSAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTQpXG5cdCAgLCBleHAgICAgID0gTWF0aC5leHA7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgdGFuaDogZnVuY3Rpb24gdGFuaCh4KXtcblx0ICAgIHZhciBhID0gZXhwbTEoeCA9ICt4KVxuXHQgICAgICAsIGIgPSBleHBtMSgteCk7XG5cdCAgICByZXR1cm4gYSA9PSBJbmZpbml0eSA/IDEgOiBiID09IEluZmluaXR5ID8gLTEgOiAoYSAtIGIpIC8gKGV4cCh4KSArIGV4cCgteCkpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjIuMi4zNCBNYXRoLnRydW5jKHgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgdHJ1bmM6IGZ1bmN0aW9uIHRydW5jKGl0KXtcblx0ICAgIHJldHVybiAoaXQgPiAwID8gTWF0aC5mbG9vciA6IE1hdGguY2VpbCkoaXQpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCB0b0luZGV4ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODEpXG5cdCAgLCBmcm9tQ2hhckNvZGUgICA9IFN0cmluZy5mcm9tQ2hhckNvZGVcblx0ICAsICRmcm9tQ29kZVBvaW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQ7XG5cdFxuXHQvLyBsZW5ndGggc2hvdWxkIGJlIDEsIG9sZCBGRiBwcm9ibGVtXG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKCEhJGZyb21Db2RlUG9pbnQgJiYgJGZyb21Db2RlUG9pbnQubGVuZ3RoICE9IDEpLCAnU3RyaW5nJywge1xuXHQgIC8vIDIxLjEuMi4yIFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHMpXG5cdCAgZnJvbUNvZGVQb2ludDogZnVuY3Rpb24gZnJvbUNvZGVQb2ludCh4KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXHQgICAgdmFyIHJlcyAgPSBbXVxuXHQgICAgICAsIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoXG5cdCAgICAgICwgaSAgICA9IDBcblx0ICAgICAgLCBjb2RlO1xuXHQgICAgd2hpbGUoYUxlbiA+IGkpe1xuXHQgICAgICBjb2RlID0gK2FyZ3VtZW50c1tpKytdO1xuXHQgICAgICBpZih0b0luZGV4KGNvZGUsIDB4MTBmZmZmKSAhPT0gY29kZSl0aHJvdyBSYW5nZUVycm9yKGNvZGUgKyAnIGlzIG5vdCBhIHZhbGlkIGNvZGUgcG9pbnQnKTtcblx0ICAgICAgcmVzLnB1c2goY29kZSA8IDB4MTAwMDBcblx0ICAgICAgICA/IGZyb21DaGFyQ29kZShjb2RlKVxuXHQgICAgICAgIDogZnJvbUNoYXJDb2RlKCgoY29kZSAtPSAweDEwMDAwKSA+PiAxMCkgKyAweGQ4MDAsIGNvZGUgJSAweDQwMCArIDB4ZGMwMClcblx0ICAgICAgKTtcblx0ICAgIH0gcmV0dXJuIHJlcy5qb2luKCcnKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgJGV4cG9ydCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpXG5cdCAgLCB0b0xlbmd0aCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnU3RyaW5nJywge1xuXHQgIC8vIDIxLjEuMi40IFN0cmluZy5yYXcoY2FsbFNpdGUsIC4uLnN1YnN0aXR1dGlvbnMpXG5cdCAgcmF3OiBmdW5jdGlvbiByYXcoY2FsbFNpdGUpe1xuXHQgICAgdmFyIHRwbCAgPSB0b0lPYmplY3QoY2FsbFNpdGUucmF3KVxuXHQgICAgICAsIGxlbiAgPSB0b0xlbmd0aCh0cGwubGVuZ3RoKVxuXHQgICAgICAsIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoXG5cdCAgICAgICwgcmVzICA9IFtdXG5cdCAgICAgICwgaSAgICA9IDA7XG5cdCAgICB3aGlsZShsZW4gPiBpKXtcblx0ICAgICAgcmVzLnB1c2goU3RyaW5nKHRwbFtpKytdKSk7XG5cdCAgICAgIGlmKGkgPCBhTGVuKXJlcy5wdXNoKFN0cmluZyhhcmd1bWVudHNbaV0pKTtcblx0ICAgIH0gcmV0dXJuIHJlcy5qb2luKCcnKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIDIxLjEuMy4yNSBTdHJpbmcucHJvdG90eXBlLnRyaW0oKVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSkoJ3RyaW0nLCBmdW5jdGlvbigkdHJpbSl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHRyaW0oKXtcblx0ICAgIHJldHVybiAkdHJpbSh0aGlzLCAzKTtcblx0ICB9O1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE2OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGF0ICA9IF9fd2VicGFja19yZXF1aXJlX18oMTY5KSh0cnVlKTtcblx0XG5cdC8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKClcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNzApKFN0cmluZywgJ1N0cmluZycsIGZ1bmN0aW9uKGl0ZXJhdGVkKXtcblx0ICB0aGlzLl90ID0gU3RyaW5nKGl0ZXJhdGVkKTsgLy8gdGFyZ2V0XG5cdCAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcblx0Ly8gMjEuMS41LjIuMSAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKVxuXHR9LCBmdW5jdGlvbigpe1xuXHQgIHZhciBPICAgICA9IHRoaXMuX3Rcblx0ICAgICwgaW5kZXggPSB0aGlzLl9pXG5cdCAgICAsIHBvaW50O1xuXHQgIGlmKGluZGV4ID49IE8ubGVuZ3RoKXJldHVybiB7dmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZX07XG5cdCAgcG9pbnQgPSAkYXQoTywgaW5kZXgpO1xuXHQgIHRoaXMuX2kgKz0gcG9pbnQubGVuZ3RoO1xuXHQgIHJldHVybiB7dmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZX07XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTY5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MClcblx0ICAsIGRlZmluZWQgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpO1xuXHQvLyB0cnVlICAtPiBTdHJpbmcjYXRcblx0Ly8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oVE9fU1RSSU5HKXtcblx0ICByZXR1cm4gZnVuY3Rpb24odGhhdCwgcG9zKXtcblx0ICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpXG5cdCAgICAgICwgaSA9IHRvSW50ZWdlcihwb3MpXG5cdCAgICAgICwgbCA9IHMubGVuZ3RoXG5cdCAgICAgICwgYSwgYjtcblx0ICAgIGlmKGkgPCAwIHx8IGkgPj0gbClyZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7XG5cdCAgICBhID0gcy5jaGFyQ29kZUF0KGkpO1xuXHQgICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmZcblx0ICAgICAgPyBUT19TVFJJTkcgPyBzLmNoYXJBdChpKSA6IGFcblx0ICAgICAgOiBUT19TVFJJTkcgPyBzLnNsaWNlKGksIGkgKyAyKSA6IChhIC0gMHhkODAwIDw8IDEwKSArIChiIC0gMHhkYzAwKSArIDB4MTAwMDA7XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDE3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKVxuXHQgICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgcmVkZWZpbmUgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKVxuXHQgICwgaGlkZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHQgICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KVxuXHQgICwgSXRlcmF0b3JzICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSlcblx0ICAsICRpdGVyQ3JlYXRlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzIpXG5cdCAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpXG5cdCAgLCBnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKVxuXHQgICwgSVRFUkFUT1IgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnaXRlcmF0b3InKVxuXHQgICwgQlVHR1kgICAgICAgICAgPSAhKFtdLmtleXMgJiYgJ25leHQnIGluIFtdLmtleXMoKSkgLy8gU2FmYXJpIGhhcyBidWdneSBpdGVyYXRvcnMgdy9vIGBuZXh0YFxuXHQgICwgRkZfSVRFUkFUT1IgICAgPSAnQEBpdGVyYXRvcidcblx0ICAsIEtFWVMgICAgICAgICAgID0gJ2tleXMnXG5cdCAgLCBWQUxVRVMgICAgICAgICA9ICd2YWx1ZXMnO1xuXHRcblx0dmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKXtcblx0ICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7XG5cdCAgdmFyIGdldE1ldGhvZCA9IGZ1bmN0aW9uKGtpbmQpe1xuXHQgICAgaWYoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdO1xuXHQgICAgc3dpdGNoKGtpbmQpe1xuXHQgICAgICBjYXNlIEtFWVM6IHJldHVybiBmdW5jdGlvbiBrZXlzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG5cdCAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG5cdCAgICB9IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG5cdCAgfTtcblx0ICB2YXIgVEFHICAgICAgICA9IE5BTUUgKyAnIEl0ZXJhdG9yJ1xuXHQgICAgLCBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVNcblx0ICAgICwgVkFMVUVTX0JVRyA9IGZhbHNlXG5cdCAgICAsIHByb3RvICAgICAgPSBCYXNlLnByb3RvdHlwZVxuXHQgICAgLCAkbmF0aXZlICAgID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdXG5cdCAgICAsICRkZWZhdWx0ICAgPSAkbmF0aXZlIHx8IGdldE1ldGhvZChERUZBVUxUKVxuXHQgICAgLCAkZW50cmllcyAgID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZFxuXHQgICAgLCAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZVxuXHQgICAgLCBtZXRob2RzLCBrZXksIEl0ZXJhdG9yUHJvdG90eXBlO1xuXHQgIC8vIEZpeCBuYXRpdmVcblx0ICBpZigkYW55TmF0aXZlKXtcblx0ICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YoJGFueU5hdGl2ZS5jYWxsKG5ldyBCYXNlKSk7XG5cdCAgICBpZihJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSl7XG5cdCAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnNcblx0ICAgICAgc2V0VG9TdHJpbmdUYWcoSXRlcmF0b3JQcm90b3R5cGUsIFRBRywgdHJ1ZSk7XG5cdCAgICAgIC8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lc1xuXHQgICAgICBpZighTElCUkFSWSAmJiAhaGFzKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUikpaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGXG5cdCAgaWYoREVGX1ZBTFVFUyAmJiAkbmF0aXZlICYmICRuYXRpdmUubmFtZSAhPT0gVkFMVUVTKXtcblx0ICAgIFZBTFVFU19CVUcgPSB0cnVlO1xuXHQgICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuICRuYXRpdmUuY2FsbCh0aGlzKTsgfTtcblx0ICB9XG5cdCAgLy8gRGVmaW5lIGl0ZXJhdG9yXG5cdCAgaWYoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpe1xuXHQgICAgaGlkZShwcm90bywgSVRFUkFUT1IsICRkZWZhdWx0KTtcblx0ICB9XG5cdCAgLy8gUGx1ZyBmb3IgbGlicmFyeVxuXHQgIEl0ZXJhdG9yc1tOQU1FXSA9ICRkZWZhdWx0O1xuXHQgIEl0ZXJhdG9yc1tUQUddICA9IHJldHVyblRoaXM7XG5cdCAgaWYoREVGQVVMVCl7XG5cdCAgICBtZXRob2RzID0ge1xuXHQgICAgICB2YWx1ZXM6ICBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSxcblx0ICAgICAga2V5czogICAgSVNfU0VUICAgICA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLFxuXHQgICAgICBlbnRyaWVzOiAkZW50cmllc1xuXHQgICAgfTtcblx0ICAgIGlmKEZPUkNFRClmb3Ioa2V5IGluIG1ldGhvZHMpe1xuXHQgICAgICBpZighKGtleSBpbiBwcm90bykpcmVkZWZpbmUocHJvdG8sIGtleSwgbWV0aG9kc1trZXldKTtcblx0ICAgIH0gZWxzZSAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChCVUdHWSB8fCBWQUxVRVNfQlVHKSwgTkFNRSwgbWV0aG9kcyk7XG5cdCAgfVxuXHQgIHJldHVybiBtZXRob2RzO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vKioqLyB9LFxuLyogMTcyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBjcmVhdGUgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODgpXG5cdCAgLCBkZXNjcmlwdG9yICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpXG5cdCAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpXG5cdCAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuXHRcblx0Ly8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKClcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MikoSXRlcmF0b3JQcm90b3R5cGUsIF9fd2VicGFja19yZXF1aXJlX18oNjcpKCdpdGVyYXRvcicpLCBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KXtcblx0ICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUsIHtuZXh0OiBkZXNjcmlwdG9yKDEsIG5leHQpfSk7XG5cdCAgc2V0VG9TdHJpbmdUYWcoQ29uc3RydWN0b3IsIE5BTUUgKyAnIEl0ZXJhdG9yJyk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxNzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJGF0ICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTY5KShmYWxzZSk7XG5cdCRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywge1xuXHQgIC8vIDIxLjEuMy4zIFN0cmluZy5wcm90b3R5cGUuY29kZVBvaW50QXQocG9zKVxuXHQgIGNvZGVQb2ludEF0OiBmdW5jdGlvbiBjb2RlUG9pbnRBdChwb3Mpe1xuXHQgICAgcmV0dXJuICRhdCh0aGlzLCBwb3MpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxNzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIxLjEuMy42IFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGgoc2VhcmNoU3RyaW5nIFssIGVuZFBvc2l0aW9uXSlcblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIHRvTGVuZ3RoICA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgLCBjb250ZXh0ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3NSlcblx0ICAsIEVORFNfV0lUSCA9ICdlbmRzV2l0aCdcblx0ICAsICRlbmRzV2l0aCA9ICcnW0VORFNfV0lUSF07XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIF9fd2VicGFja19yZXF1aXJlX18oMTc3KShFTkRTX1dJVEgpLCAnU3RyaW5nJywge1xuXHQgIGVuZHNXaXRoOiBmdW5jdGlvbiBlbmRzV2l0aChzZWFyY2hTdHJpbmcgLyosIGVuZFBvc2l0aW9uID0gQGxlbmd0aCAqLyl7XG5cdCAgICB2YXIgdGhhdCA9IGNvbnRleHQodGhpcywgc2VhcmNoU3RyaW5nLCBFTkRTX1dJVEgpXG5cdCAgICAgICwgZW5kUG9zaXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZFxuXHQgICAgICAsIGxlbiAgICA9IHRvTGVuZ3RoKHRoYXQubGVuZ3RoKVxuXHQgICAgICAsIGVuZCAgICA9IGVuZFBvc2l0aW9uID09PSB1bmRlZmluZWQgPyBsZW4gOiBNYXRoLm1pbih0b0xlbmd0aChlbmRQb3NpdGlvbiksIGxlbilcblx0ICAgICAgLCBzZWFyY2ggPSBTdHJpbmcoc2VhcmNoU3RyaW5nKTtcblx0ICAgIHJldHVybiAkZW5kc1dpdGhcblx0ICAgICAgPyAkZW5kc1dpdGguY2FsbCh0aGF0LCBzZWFyY2gsIGVuZClcblx0ICAgICAgOiB0aGF0LnNsaWNlKGVuZCAtIHNlYXJjaC5sZW5ndGgsIGVuZCkgPT09IHNlYXJjaDtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBoZWxwZXIgZm9yIFN0cmluZyN7c3RhcnRzV2l0aCwgZW5kc1dpdGgsIGluY2x1ZGVzfVxuXHR2YXIgaXNSZWdFeHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nilcblx0ICAsIGRlZmluZWQgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRoYXQsIHNlYXJjaFN0cmluZywgTkFNRSl7XG5cdCAgaWYoaXNSZWdFeHAoc2VhcmNoU3RyaW5nKSl0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZyMnICsgTkFNRSArIFwiIGRvZXNuJ3QgYWNjZXB0IHJlZ2V4IVwiKTtcblx0ICByZXR1cm4gU3RyaW5nKGRlZmluZWQodGhhdCkpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyA3LjIuOCBJc1JlZ0V4cChhcmd1bWVudClcblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAsIGNvZiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nilcblx0ICAsIE1BVENIICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NykoJ21hdGNoJyk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuXHQgIHZhciBpc1JlZ0V4cDtcblx0ICByZXR1cm4gaXNPYmplY3QoaXQpICYmICgoaXNSZWdFeHAgPSBpdFtNQVRDSF0pICE9PSB1bmRlZmluZWQgPyAhIWlzUmVnRXhwIDogY29mKGl0KSA9PSAnUmVnRXhwJyk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxNzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBNQVRDSCA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpKCdtYXRjaCcpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSl7XG5cdCAgdmFyIHJlID0gLy4vO1xuXHQgIHRyeSB7XG5cdCAgICAnLy4vJ1tLRVldKHJlKTtcblx0ICB9IGNhdGNoKGUpe1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmVbTUFUQ0hdID0gZmFsc2U7XG5cdCAgICAgIHJldHVybiAhJy8uLydbS0VZXShyZSk7XG5cdCAgICB9IGNhdGNoKGYpeyAvKiBlbXB0eSAqLyB9XG5cdCAgfSByZXR1cm4gdHJ1ZTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDE3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjEuMS4zLjcgU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcyhzZWFyY2hTdHJpbmcsIHBvc2l0aW9uID0gMClcblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgY29udGV4dCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3NSlcblx0ICAsIElOQ0xVREVTID0gJ2luY2x1ZGVzJztcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogX193ZWJwYWNrX3JlcXVpcmVfXygxNzcpKElOQ0xVREVTKSwgJ1N0cmluZycsIHtcblx0ICBpbmNsdWRlczogZnVuY3Rpb24gaW5jbHVkZXMoc2VhcmNoU3RyaW5nIC8qLCBwb3NpdGlvbiA9IDAgKi8pe1xuXHQgICAgcmV0dXJuICEhfmNvbnRleHQodGhpcywgc2VhcmNoU3RyaW5nLCBJTkNMVURFUylcblx0ICAgICAgLmluZGV4T2Yoc2VhcmNoU3RyaW5nLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE3OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywge1xuXHQgIC8vIDIxLjEuMy4xMyBTdHJpbmcucHJvdG90eXBlLnJlcGVhdChjb3VudClcblx0ICByZXBlYXQ6IF9fd2VicGFja19yZXF1aXJlX18oMTMzKVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE4MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjEuMS4zLjE4IFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aChzZWFyY2hTdHJpbmcgWywgcG9zaXRpb24gXSlcblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgdG9MZW5ndGggICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KVxuXHQgICwgY29udGV4dCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3NSlcblx0ICAsIFNUQVJUU19XSVRIID0gJ3N0YXJ0c1dpdGgnXG5cdCAgLCAkc3RhcnRzV2l0aCA9ICcnW1NUQVJUU19XSVRIXTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogX193ZWJwYWNrX3JlcXVpcmVfXygxNzcpKFNUQVJUU19XSVRIKSwgJ1N0cmluZycsIHtcblx0ICBzdGFydHNXaXRoOiBmdW5jdGlvbiBzdGFydHNXaXRoKHNlYXJjaFN0cmluZyAvKiwgcG9zaXRpb24gPSAwICovKXtcblx0ICAgIHZhciB0aGF0ICAgPSBjb250ZXh0KHRoaXMsIHNlYXJjaFN0cmluZywgU1RBUlRTX1dJVEgpXG5cdCAgICAgICwgaW5kZXggID0gdG9MZW5ndGgoTWF0aC5taW4oYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIHRoYXQubGVuZ3RoKSlcblx0ICAgICAgLCBzZWFyY2ggPSBTdHJpbmcoc2VhcmNoU3RyaW5nKTtcblx0ICAgIHJldHVybiAkc3RhcnRzV2l0aFxuXHQgICAgICA/ICRzdGFydHNXaXRoLmNhbGwodGhhdCwgc2VhcmNoLCBpbmRleClcblx0ICAgICAgOiB0aGF0LnNsaWNlKGluZGV4LCBpbmRleCArIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2g7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyBCLjIuMy4yIFN0cmluZy5wcm90b3R5cGUuYW5jaG9yKG5hbWUpXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTgyKSgnYW5jaG9yJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGFuY2hvcihuYW1lKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdhJywgJ25hbWUnLCBuYW1lKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTgyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBmYWlscyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSlcblx0ICAsIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KVxuXHQgICwgcXVvdCAgICA9IC9cIi9nO1xuXHQvLyBCLjIuMy4yLjEgQ3JlYXRlSFRNTChzdHJpbmcsIHRhZywgYXR0cmlidXRlLCB2YWx1ZSlcblx0dmFyIGNyZWF0ZUhUTUwgPSBmdW5jdGlvbihzdHJpbmcsIHRhZywgYXR0cmlidXRlLCB2YWx1ZSkge1xuXHQgIHZhciBTICA9IFN0cmluZyhkZWZpbmVkKHN0cmluZykpXG5cdCAgICAsIHAxID0gJzwnICsgdGFnO1xuXHQgIGlmKGF0dHJpYnV0ZSAhPT0gJycpcDEgKz0gJyAnICsgYXR0cmlidXRlICsgJz1cIicgKyBTdHJpbmcodmFsdWUpLnJlcGxhY2UocXVvdCwgJyZxdW90OycpICsgJ1wiJztcblx0ICByZXR1cm4gcDEgKyAnPicgKyBTICsgJzwvJyArIHRhZyArICc+Jztcblx0fTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihOQU1FLCBleGVjKXtcblx0ICB2YXIgTyA9IHt9O1xuXHQgIE9bTkFNRV0gPSBleGVjKGNyZWF0ZUhUTUwpO1xuXHQgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24oKXtcblx0ICAgIHZhciB0ZXN0ID0gJydbTkFNRV0oJ1wiJyk7XG5cdCAgICByZXR1cm4gdGVzdCAhPT0gdGVzdC50b0xvd2VyQ2FzZSgpIHx8IHRlc3Quc3BsaXQoJ1wiJykubGVuZ3RoID4gMztcblx0ICB9KSwgJ1N0cmluZycsIE8pO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIEIuMi4zLjMgU3RyaW5nLnByb3RvdHlwZS5iaWcoKVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MikoJ2JpZycsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBiaWcoKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdiaWcnLCAnJywgJycpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gQi4yLjMuNCBTdHJpbmcucHJvdG90eXBlLmJsaW5rKClcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxODIpKCdibGluaycsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBibGluaygpe1xuXHQgICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2JsaW5rJywgJycsICcnKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTg1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIEIuMi4zLjUgU3RyaW5nLnByb3RvdHlwZS5ib2xkKClcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxODIpKCdib2xkJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGJvbGQoKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdiJywgJycsICcnKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTg2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIEIuMi4zLjYgU3RyaW5nLnByb3RvdHlwZS5maXhlZCgpXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTgyKSgnZml4ZWQnLCBmdW5jdGlvbihjcmVhdGVIVE1MKXtcblx0ICByZXR1cm4gZnVuY3Rpb24gZml4ZWQoKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICd0dCcsICcnLCAnJyk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyBCLjIuMy43IFN0cmluZy5wcm90b3R5cGUuZm9udGNvbG9yKGNvbG9yKVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MikoJ2ZvbnRjb2xvcicsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBmb250Y29sb3IoY29sb3Ipe1xuXHQgICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2ZvbnQnLCAnY29sb3InLCBjb2xvcik7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDE4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyBCLjIuMy44IFN0cmluZy5wcm90b3R5cGUuZm9udHNpemUoc2l6ZSlcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxODIpKCdmb250c2l6ZScsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBmb250c2l6ZShzaXplKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdmb250JywgJ3NpemUnLCBzaXplKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIEIuMi4zLjkgU3RyaW5nLnByb3RvdHlwZS5pdGFsaWNzKClcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxODIpKCdpdGFsaWNzJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGl0YWxpY3MoKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdpJywgJycsICcnKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTkwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIEIuMi4zLjEwIFN0cmluZy5wcm90b3R5cGUubGluayh1cmwpXG5cdF9fd2VicGFja19yZXF1aXJlX18oMTgyKSgnbGluaycsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBsaW5rKHVybCl7XG5cdCAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYScsICdocmVmJywgdXJsKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMTkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIEIuMi4zLjExIFN0cmluZy5wcm90b3R5cGUuc21hbGwoKVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MikoJ3NtYWxsJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHNtYWxsKCl7XG5cdCAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnc21hbGwnLCAnJywgJycpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxOTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gQi4yLjMuMTIgU3RyaW5nLnByb3RvdHlwZS5zdHJpa2UoKVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MikoJ3N0cmlrZScsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBzdHJpa2UoKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdzdHJpa2UnLCAnJywgJycpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxOTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gQi4yLjMuMTMgU3RyaW5nLnByb3RvdHlwZS5zdWIoKVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MikoJ3N1YicsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBzdWIoKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdzdWInLCAnJywgJycpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxOTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gQi4yLjMuMTQgU3RyaW5nLnByb3RvdHlwZS5zdXAoKVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MikoJ3N1cCcsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBzdXAoKXtcblx0ICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdzdXAnLCAnJywgJycpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIwLjMuMy4xIC8gMTUuOS40LjQgRGF0ZS5ub3coKVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdEYXRlJywge25vdzogZnVuY3Rpb24oKXsgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOyB9fSk7XG5cbi8qKiovIH0sXG4vKiAxOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIHRvT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApXG5cdCAgLCB0b1ByaW1pdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KShmdW5jdGlvbigpe1xuXHQgIHJldHVybiBuZXcgRGF0ZShOYU4pLnRvSlNPTigpICE9PSBudWxsIHx8IERhdGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHt0b0lTT1N0cmluZzogZnVuY3Rpb24oKXsgcmV0dXJuIDE7IH19KSAhPT0gMTtcblx0fSksICdEYXRlJywge1xuXHQgIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKGtleSl7XG5cdCAgICB2YXIgTyAgPSB0b09iamVjdCh0aGlzKVxuXHQgICAgICAsIHB2ID0gdG9QcmltaXRpdmUoTyk7XG5cdCAgICByZXR1cm4gdHlwZW9mIHB2ID09ICdudW1iZXInICYmICFpc0Zpbml0ZShwdikgPyBudWxsIDogTy50b0lTT1N0cmluZygpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxOTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gMjAuMy40LjM2IC8gMTUuOS41LjQzIERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nKClcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgZmFpbHMgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpXG5cdCAgLCBnZXRUaW1lID0gRGF0ZS5wcm90b3R5cGUuZ2V0VGltZTtcblx0XG5cdHZhciBseiA9IGZ1bmN0aW9uKG51bSl7XG5cdCAgcmV0dXJuIG51bSA+IDkgPyBudW0gOiAnMCcgKyBudW07XG5cdH07XG5cdFxuXHQvLyBQaGFudG9tSlMgLyBvbGQgV2ViS2l0IGhhcyBhIGJyb2tlbiBpbXBsZW1lbnRhdGlvbnNcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoZmFpbHMoZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gbmV3IERhdGUoLTVlMTMgLSAxKS50b0lTT1N0cmluZygpICE9ICcwMzg1LTA3LTI1VDA3OjA2OjM5Ljk5OVonO1xuXHR9KSB8fCAhZmFpbHMoZnVuY3Rpb24oKXtcblx0ICBuZXcgRGF0ZShOYU4pLnRvSVNPU3RyaW5nKCk7XG5cdH0pKSwgJ0RhdGUnLCB7XG5cdCAgdG9JU09TdHJpbmc6IGZ1bmN0aW9uIHRvSVNPU3RyaW5nKCl7XG5cdCAgICBpZighaXNGaW5pdGUoZ2V0VGltZS5jYWxsKHRoaXMpKSl0aHJvdyBSYW5nZUVycm9yKCdJbnZhbGlkIHRpbWUgdmFsdWUnKTtcblx0ICAgIHZhciBkID0gdGhpc1xuXHQgICAgICAsIHkgPSBkLmdldFVUQ0Z1bGxZZWFyKClcblx0ICAgICAgLCBtID0gZC5nZXRVVENNaWxsaXNlY29uZHMoKVxuXHQgICAgICAsIHMgPSB5IDwgMCA/ICctJyA6IHkgPiA5OTk5ID8gJysnIDogJyc7XG5cdCAgICByZXR1cm4gcyArICgnMDAwMDAnICsgTWF0aC5hYnMoeSkpLnNsaWNlKHMgPyAtNiA6IC00KSArXG5cdCAgICAgICctJyArIGx6KGQuZ2V0VVRDTW9udGgoKSArIDEpICsgJy0nICsgbHooZC5nZXRVVENEYXRlKCkpICtcblx0ICAgICAgJ1QnICsgbHooZC5nZXRVVENIb3VycygpKSArICc6JyArIGx6KGQuZ2V0VVRDTWludXRlcygpKSArXG5cdCAgICAgICc6JyArIGx6KGQuZ2V0VVRDU2Vjb25kcygpKSArICcuJyArIChtID4gOTkgPyBtIDogJzAnICsgbHoobSkpICsgJ1onO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxOTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBEYXRlUHJvdG8gICAgPSBEYXRlLnByb3RvdHlwZVxuXHQgICwgSU5WQUxJRF9EQVRFID0gJ0ludmFsaWQgRGF0ZSdcblx0ICAsIFRPX1NUUklORyAgICA9ICd0b1N0cmluZydcblx0ICAsICR0b1N0cmluZyAgICA9IERhdGVQcm90b1tUT19TVFJJTkddXG5cdCAgLCBnZXRUaW1lICAgICAgPSBEYXRlUHJvdG8uZ2V0VGltZTtcblx0aWYobmV3IERhdGUoTmFOKSArICcnICE9IElOVkFMSURfREFURSl7XG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkoRGF0ZVByb3RvLCBUT19TVFJJTkcsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG5cdCAgICB2YXIgdmFsdWUgPSBnZXRUaW1lLmNhbGwodGhpcyk7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gJHRvU3RyaW5nLmNhbGwodGhpcykgOiBJTlZBTElEX0RBVEU7XG5cdCAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFRPX1BSSU1JVElWRSA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpKCd0b1ByaW1pdGl2ZScpXG5cdCAgLCBwcm90byAgICAgICAgPSBEYXRlLnByb3RvdHlwZTtcblx0XG5cdGlmKCEoVE9fUFJJTUlUSVZFIGluIHByb3RvKSlfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKShwcm90bywgVE9fUFJJTUlUSVZFLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMCkpO1xuXG4vKioqLyB9LFxuLyogMjAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCB0b1ByaW1pdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdCAgLCBOVU1CRVIgICAgICA9ICdudW1iZXInO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihoaW50KXtcblx0ICBpZihoaW50ICE9PSAnc3RyaW5nJyAmJiBoaW50ICE9PSBOVU1CRVIgJiYgaGludCAhPT0gJ2RlZmF1bHQnKXRocm93IFR5cGVFcnJvcignSW5jb3JyZWN0IGhpbnQnKTtcblx0ICByZXR1cm4gdG9QcmltaXRpdmUoYW5PYmplY3QodGhpcyksIGhpbnQgIT0gTlVNQkVSKTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjIuMS4yLjIgLyAxNS40LjMuMiBBcnJheS5pc0FycmF5KGFyZylcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnQXJyYXknLCB7aXNBcnJheTogX193ZWJwYWNrX3JlcXVpcmVfXyg4Nyl9KTtcblxuLyoqKi8gfSxcbi8qIDIwMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgY3R4ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKVxuXHQgICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgdG9PYmplY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMClcblx0ICAsIGNhbGwgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDMpXG5cdCAgLCBpc0FycmF5SXRlciAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjA0KVxuXHQgICwgdG9MZW5ndGggICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KVxuXHQgICwgY3JlYXRlUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNSlcblx0ICAsIGdldEl0ZXJGbiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDYpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygyMDcpKGZ1bmN0aW9uKGl0ZXIpeyBBcnJheS5mcm9tKGl0ZXIpOyB9KSwgJ0FycmF5Jywge1xuXHQgIC8vIDIyLjEuMi4xIEFycmF5LmZyb20oYXJyYXlMaWtlLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZClcblx0ICBmcm9tOiBmdW5jdGlvbiBmcm9tKGFycmF5TGlrZS8qLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZCovKXtcblx0ICAgIHZhciBPICAgICAgID0gdG9PYmplY3QoYXJyYXlMaWtlKVxuXHQgICAgICAsIEMgICAgICAgPSB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nID8gdGhpcyA6IEFycmF5XG5cdCAgICAgICwgYUxlbiAgICA9IGFyZ3VtZW50cy5sZW5ndGhcblx0ICAgICAgLCBtYXBmbiAgID0gYUxlbiA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWRcblx0ICAgICAgLCBtYXBwaW5nID0gbWFwZm4gIT09IHVuZGVmaW5lZFxuXHQgICAgICAsIGluZGV4ICAgPSAwXG5cdCAgICAgICwgaXRlckZuICA9IGdldEl0ZXJGbihPKVxuXHQgICAgICAsIGxlbmd0aCwgcmVzdWx0LCBzdGVwLCBpdGVyYXRvcjtcblx0ICAgIGlmKG1hcHBpbmcpbWFwZm4gPSBjdHgobWFwZm4sIGFMZW4gPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkLCAyKTtcblx0ICAgIC8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZVxuXHQgICAgaWYoaXRlckZuICE9IHVuZGVmaW5lZCAmJiAhKEMgPT0gQXJyYXkgJiYgaXNBcnJheUl0ZXIoaXRlckZuKSkpe1xuXHQgICAgICBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChPKSwgcmVzdWx0ID0gbmV3IEM7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgaW5kZXgrKyl7XG5cdCAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IGNhbGwoaXRlcmF0b3IsIG1hcGZuLCBbc3RlcC52YWx1ZSwgaW5kZXhdLCB0cnVlKSA6IHN0ZXAudmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG5cdCAgICAgIGZvcihyZXN1bHQgPSBuZXcgQyhsZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKyl7XG5cdCAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IG1hcGZuKE9baW5kZXhdLCBpbmRleCkgOiBPW2luZGV4XSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJlc3VsdC5sZW5ndGggPSBpbmRleDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHR9KTtcblxuXG4vKioqLyB9LFxuLyogMjAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yXG5cdHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpe1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpO1xuXHQgIC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pXG5cdCAgfSBjYXRjaChlKXtcblx0ICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107XG5cdCAgICBpZihyZXQgIT09IHVuZGVmaW5lZClhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpO1xuXHQgICAgdGhyb3cgZTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3Jcblx0dmFyIEl0ZXJhdG9ycyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSlcblx0ICAsIElURVJBVE9SICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnaXRlcmF0b3InKVxuXHQgICwgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiBpdCAhPT0gdW5kZWZpbmVkICYmIChJdGVyYXRvcnMuQXJyYXkgPT09IGl0IHx8IEFycmF5UHJvdG9bSVRFUkFUT1JdID09PSBpdCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRkZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpXG5cdCAgLCBjcmVhdGVEZXNjICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBpbmRleCwgdmFsdWUpe1xuXHQgIGlmKGluZGV4IGluIG9iamVjdCkkZGVmaW5lUHJvcGVydHkuZihvYmplY3QsIGluZGV4LCBjcmVhdGVEZXNjKDAsIHZhbHVlKSk7XG5cdCAgZWxzZSBvYmplY3RbaW5kZXhdID0gdmFsdWU7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjbGFzc29mICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNylcblx0ICAsIElURVJBVE9SICA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpKCdpdGVyYXRvcicpXG5cdCAgLCBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSk7XG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSkuZ2V0SXRlcmF0b3JNZXRob2QgPSBmdW5jdGlvbihpdCl7XG5cdCAgaWYoaXQgIT0gdW5kZWZpbmVkKXJldHVybiBpdFtJVEVSQVRPUl1cblx0ICAgIHx8IGl0WydAQGl0ZXJhdG9yJ11cblx0ICAgIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBJVEVSQVRPUiAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnaXRlcmF0b3InKVxuXHQgICwgU0FGRV9DTE9TSU5HID0gZmFsc2U7XG5cdFxuXHR0cnkge1xuXHQgIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTtcblx0ICByaXRlclsncmV0dXJuJ10gPSBmdW5jdGlvbigpeyBTQUZFX0NMT1NJTkcgPSB0cnVlOyB9O1xuXHQgIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pO1xuXHR9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMsIHNraXBDbG9zaW5nKXtcblx0ICBpZighc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORylyZXR1cm4gZmFsc2U7XG5cdCAgdmFyIHNhZmUgPSBmYWxzZTtcblx0ICB0cnkge1xuXHQgICAgdmFyIGFyciAgPSBbN11cblx0ICAgICAgLCBpdGVyID0gYXJyW0lURVJBVE9SXSgpO1xuXHQgICAgaXRlci5uZXh0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHtkb25lOiBzYWZlID0gdHJ1ZX07IH07XG5cdCAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXI7IH07XG5cdCAgICBleGVjKGFycik7XG5cdCAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuXHQgIHJldHVybiBzYWZlO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMjA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBjcmVhdGVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjA1KTtcblx0XG5cdC8vIFdlYktpdCBBcnJheS5vZiBpc24ndCBnZW5lcmljXG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkoZnVuY3Rpb24oKXtcblx0ICBmdW5jdGlvbiBGKCl7fVxuXHQgIHJldHVybiAhKEFycmF5Lm9mLmNhbGwoRikgaW5zdGFuY2VvZiBGKTtcblx0fSksICdBcnJheScsIHtcblx0ICAvLyAyMi4xLjIuMyBBcnJheS5vZiggLi4uaXRlbXMpXG5cdCAgb2Y6IGZ1bmN0aW9uIG9mKC8qIC4uLmFyZ3MgKi8pe1xuXHQgICAgdmFyIGluZGV4ICA9IDBcblx0ICAgICAgLCBhTGVuICAgPSBhcmd1bWVudHMubGVuZ3RoXG5cdCAgICAgICwgcmVzdWx0ID0gbmV3ICh0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nID8gdGhpcyA6IEFycmF5KShhTGVuKTtcblx0ICAgIHdoaWxlKGFMZW4gPiBpbmRleCljcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGluZGV4LCBhcmd1bWVudHNbaW5kZXgrK10pO1xuXHQgICAgcmVzdWx0Lmxlbmd0aCA9IGFMZW47XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyMDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5qb2luKHNlcGFyYXRvcilcblx0dmFyICRleHBvcnQgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KVxuXHQgICwgYXJyYXlKb2luID0gW10uam9pbjtcblx0XG5cdC8vIGZhbGxiYWNrIGZvciBub3QgYXJyYXktbGlrZSBzdHJpbmdzXG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKF9fd2VicGFja19yZXF1aXJlX18oNzUpICE9IE9iamVjdCB8fCAhX193ZWJwYWNrX3JlcXVpcmVfXygyMTApKGFycmF5Sm9pbikpLCAnQXJyYXknLCB7XG5cdCAgam9pbjogZnVuY3Rpb24gam9pbihzZXBhcmF0b3Ipe1xuXHQgICAgcmV0dXJuIGFycmF5Sm9pbi5jYWxsKHRvSU9iamVjdCh0aGlzKSwgc2VwYXJhdG9yID09PSB1bmRlZmluZWQgPyAnLCcgOiBzZXBhcmF0b3IpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBmYWlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtZXRob2QsIGFyZyl7XG5cdCAgcmV0dXJuICEhbWV0aG9kICYmIGZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgICBhcmcgPyBtZXRob2QuY2FsbChudWxsLCBmdW5jdGlvbigpe30sIDEpIDogbWV0aG9kLmNhbGwobnVsbCk7XG5cdCAgfSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgaHRtbCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTApXG5cdCAgLCBjb2YgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nilcblx0ICAsIHRvSW5kZXggICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKVxuXHQgICwgdG9MZW5ndGggICA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgLCBhcnJheVNsaWNlID0gW10uc2xpY2U7XG5cdFxuXHQvLyBmYWxsYmFjayBmb3Igbm90IGFycmF5LWxpa2UgRVMzIHN0cmluZ3MgYW5kIERPTSBvYmplY3RzXG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkoZnVuY3Rpb24oKXtcblx0ICBpZihodG1sKWFycmF5U2xpY2UuY2FsbChodG1sKTtcblx0fSksICdBcnJheScsIHtcblx0ICBzbGljZTogZnVuY3Rpb24gc2xpY2UoYmVnaW4sIGVuZCl7XG5cdCAgICB2YXIgbGVuICAgPSB0b0xlbmd0aCh0aGlzLmxlbmd0aClcblx0ICAgICAgLCBrbGFzcyA9IGNvZih0aGlzKTtcblx0ICAgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogZW5kO1xuXHQgICAgaWYoa2xhc3MgPT0gJ0FycmF5JylyZXR1cm4gYXJyYXlTbGljZS5jYWxsKHRoaXMsIGJlZ2luLCBlbmQpO1xuXHQgICAgdmFyIHN0YXJ0ICA9IHRvSW5kZXgoYmVnaW4sIGxlbilcblx0ICAgICAgLCB1cFRvICAgPSB0b0luZGV4KGVuZCwgbGVuKVxuXHQgICAgICAsIHNpemUgICA9IHRvTGVuZ3RoKHVwVG8gLSBzdGFydClcblx0ICAgICAgLCBjbG9uZWQgPSBBcnJheShzaXplKVxuXHQgICAgICAsIGkgICAgICA9IDA7XG5cdCAgICBmb3IoOyBpIDwgc2l6ZTsgaSsrKWNsb25lZFtpXSA9IGtsYXNzID09ICdTdHJpbmcnXG5cdCAgICAgID8gdGhpcy5jaGFyQXQoc3RhcnQgKyBpKVxuXHQgICAgICA6IHRoaXNbc3RhcnQgKyBpXTtcblx0ICAgIHJldHVybiBjbG9uZWQ7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDIxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpXG5cdCAgLCB0b09iamVjdCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMClcblx0ICAsIGZhaWxzICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpXG5cdCAgLCAkc29ydCAgICAgPSBbXS5zb3J0XG5cdCAgLCB0ZXN0ICAgICAgPSBbMSwgMiwgM107XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChmYWlscyhmdW5jdGlvbigpe1xuXHQgIC8vIElFOC1cblx0ICB0ZXN0LnNvcnQodW5kZWZpbmVkKTtcblx0fSkgfHwgIWZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgLy8gVjggYnVnXG5cdCAgdGVzdC5zb3J0KG51bGwpO1xuXHQgIC8vIE9sZCBXZWJLaXRcblx0fSkgfHwgIV9fd2VicGFja19yZXF1aXJlX18oMjEwKSgkc29ydCkpLCAnQXJyYXknLCB7XG5cdCAgLy8gMjIuMS4zLjI1IEFycmF5LnByb3RvdHlwZS5zb3J0KGNvbXBhcmVmbilcblx0ICBzb3J0OiBmdW5jdGlvbiBzb3J0KGNvbXBhcmVmbil7XG5cdCAgICByZXR1cm4gY29tcGFyZWZuID09PSB1bmRlZmluZWRcblx0ICAgICAgPyAkc29ydC5jYWxsKHRvT2JqZWN0KHRoaXMpKVxuXHQgICAgICA6ICRzb3J0LmNhbGwodG9PYmplY3QodGhpcyksIGFGdW5jdGlvbihjb21wYXJlZm4pKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciAkZXhwb3J0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCAkZm9yRWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjE0KSgwKVxuXHQgICwgU1RSSUNUICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCkoW10uZm9yRWFjaCwgdHJ1ZSk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFTVFJJQ1QsICdBcnJheScsIHtcblx0ICAvLyAyMi4xLjMuMTAgLyAxNS40LjQuMTggQXJyYXkucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSlcblx0ICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKXtcblx0ICAgIHJldHVybiAkZm9yRWFjaCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHNbMV0pO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDAgLT4gQXJyYXkjZm9yRWFjaFxuXHQvLyAxIC0+IEFycmF5I21hcFxuXHQvLyAyIC0+IEFycmF5I2ZpbHRlclxuXHQvLyAzIC0+IEFycmF5I3NvbWVcblx0Ly8gNCAtPiBBcnJheSNldmVyeVxuXHQvLyA1IC0+IEFycmF5I2ZpbmRcblx0Ly8gNiAtPiBBcnJheSNmaW5kSW5kZXhcblx0dmFyIGN0eCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Milcblx0ICAsIElPYmplY3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSlcblx0ICAsIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApXG5cdCAgLCB0b0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgLCBhc2MgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjE1KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihUWVBFLCAkY3JlYXRlKXtcblx0ICB2YXIgSVNfTUFQICAgICAgICA9IFRZUEUgPT0gMVxuXHQgICAgLCBJU19GSUxURVIgICAgID0gVFlQRSA9PSAyXG5cdCAgICAsIElTX1NPTUUgICAgICAgPSBUWVBFID09IDNcblx0ICAgICwgSVNfRVZFUlkgICAgICA9IFRZUEUgPT0gNFxuXHQgICAgLCBJU19GSU5EX0lOREVYID0gVFlQRSA9PSA2XG5cdCAgICAsIE5PX0hPTEVTICAgICAgPSBUWVBFID09IDUgfHwgSVNfRklORF9JTkRFWFxuXHQgICAgLCBjcmVhdGUgICAgICAgID0gJGNyZWF0ZSB8fCBhc2M7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBjYWxsYmFja2ZuLCB0aGF0KXtcblx0ICAgIHZhciBPICAgICAgPSB0b09iamVjdCgkdGhpcylcblx0ICAgICAgLCBzZWxmICAgPSBJT2JqZWN0KE8pXG5cdCAgICAgICwgZiAgICAgID0gY3R4KGNhbGxiYWNrZm4sIHRoYXQsIDMpXG5cdCAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoc2VsZi5sZW5ndGgpXG5cdCAgICAgICwgaW5kZXggID0gMFxuXHQgICAgICAsIHJlc3VsdCA9IElTX01BUCA/IGNyZWF0ZSgkdGhpcywgbGVuZ3RoKSA6IElTX0ZJTFRFUiA/IGNyZWF0ZSgkdGhpcywgMCkgOiB1bmRlZmluZWRcblx0ICAgICAgLCB2YWwsIHJlcztcblx0ICAgIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoTk9fSE9MRVMgfHwgaW5kZXggaW4gc2VsZil7XG5cdCAgICAgIHZhbCA9IHNlbGZbaW5kZXhdO1xuXHQgICAgICByZXMgPSBmKHZhbCwgaW5kZXgsIE8pO1xuXHQgICAgICBpZihUWVBFKXtcblx0ICAgICAgICBpZihJU19NQVApcmVzdWx0W2luZGV4XSA9IHJlczsgICAgICAgICAgICAvLyBtYXBcblx0ICAgICAgICBlbHNlIGlmKHJlcylzd2l0Y2goVFlQRSl7XG5cdCAgICAgICAgICBjYXNlIDM6IHJldHVybiB0cnVlOyAgICAgICAgICAgICAgICAgICAgLy8gc29tZVxuXHQgICAgICAgICAgY2FzZSA1OiByZXR1cm4gdmFsOyAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmRcblx0ICAgICAgICAgIGNhc2UgNjogcmV0dXJuIGluZGV4OyAgICAgICAgICAgICAgICAgICAvLyBmaW5kSW5kZXhcblx0ICAgICAgICAgIGNhc2UgMjogcmVzdWx0LnB1c2godmFsKTsgICAgICAgICAgICAgICAvLyBmaWx0ZXJcblx0ICAgICAgICB9IGVsc2UgaWYoSVNfRVZFUlkpcmV0dXJuIGZhbHNlOyAgICAgICAgICAvLyBldmVyeVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gSVNfRklORF9JTkRFWCA/IC0xIDogSVNfU09NRSB8fCBJU19FVkVSWSA/IElTX0VWRVJZIDogcmVzdWx0O1xuXHQgIH07XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDkuNC4yLjMgQXJyYXlTcGVjaWVzQ3JlYXRlKG9yaWdpbmFsQXJyYXksIGxlbmd0aClcblx0dmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oMjE2KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3JpZ2luYWwsIGxlbmd0aCl7XG5cdCAgcmV0dXJuIG5ldyAoc3BlY2llc0NvbnN0cnVjdG9yKG9yaWdpbmFsKSkobGVuZ3RoKTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAsIGlzQXJyYXkgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nylcblx0ICAsIFNQRUNJRVMgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NykoJ3NwZWNpZXMnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3JpZ2luYWwpe1xuXHQgIHZhciBDO1xuXHQgIGlmKGlzQXJyYXkob3JpZ2luYWwpKXtcblx0ICAgIEMgPSBvcmlnaW5hbC5jb25zdHJ1Y3Rvcjtcblx0ICAgIC8vIGNyb3NzLXJlYWxtIGZhbGxiYWNrXG5cdCAgICBpZih0eXBlb2YgQyA9PSAnZnVuY3Rpb24nICYmIChDID09PSBBcnJheSB8fCBpc0FycmF5KEMucHJvdG90eXBlKSkpQyA9IHVuZGVmaW5lZDtcblx0ICAgIGlmKGlzT2JqZWN0KEMpKXtcblx0ICAgICAgQyA9IENbU1BFQ0lFU107XG5cdCAgICAgIGlmKEMgPT09IG51bGwpQyA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9IHJldHVybiBDID09PSB1bmRlZmluZWQgPyBBcnJheSA6IEM7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJG1hcCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjE0KSgxKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIV9fd2VicGFja19yZXF1aXJlX18oMjEwKShbXS5tYXAsIHRydWUpLCAnQXJyYXknLCB7XG5cdCAgLy8gMjIuMS4zLjE1IC8gMTUuNC40LjE5IEFycmF5LnByb3RvdHlwZS5tYXAoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSlcblx0ICBtYXA6IGZ1bmN0aW9uIG1hcChjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLyl7XG5cdCAgICByZXR1cm4gJG1hcCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHNbMV0pO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJGZpbHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjE0KSgyKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIV9fd2VicGFja19yZXF1aXJlX18oMjEwKShbXS5maWx0ZXIsIHRydWUpLCAnQXJyYXknLCB7XG5cdCAgLy8gMjIuMS4zLjcgLyAxNS40LjQuMjAgQXJyYXkucHJvdG90eXBlLmZpbHRlcihjYWxsYmFja2ZuIFssIHRoaXNBcmddKVxuXHQgIGZpbHRlcjogZnVuY3Rpb24gZmlsdGVyKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKXtcblx0ICAgIHJldHVybiAkZmlsdGVyKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50c1sxXSk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDIxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCAkc29tZSAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTQpKDMpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygyMTApKFtdLnNvbWUsIHRydWUpLCAnQXJyYXknLCB7XG5cdCAgLy8gMjIuMS4zLjIzIC8gMTUuNC40LjE3IEFycmF5LnByb3RvdHlwZS5zb21lKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pXG5cdCAgc29tZTogZnVuY3Rpb24gc29tZShjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLyl7XG5cdCAgICByZXR1cm4gJHNvbWUodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICRldmVyeSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNCkoNCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCkoW10uZXZlcnksIHRydWUpLCAnQXJyYXknLCB7XG5cdCAgLy8gMjIuMS4zLjUgLyAxNS40LjQuMTYgQXJyYXkucHJvdG90eXBlLmV2ZXJ5KGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pXG5cdCAgZXZlcnk6IGZ1bmN0aW9uIGV2ZXJ5KGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKXtcblx0ICAgIHJldHVybiAkZXZlcnkodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICRyZWR1Y2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMik7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCkoW10ucmVkdWNlLCB0cnVlKSwgJ0FycmF5Jywge1xuXHQgIC8vIDIyLjEuMy4xOCAvIDE1LjQuNC4yMSBBcnJheS5wcm90b3R5cGUucmVkdWNlKGNhbGxiYWNrZm4gWywgaW5pdGlhbFZhbHVlXSlcblx0ICByZWR1Y2U6IGZ1bmN0aW9uIHJlZHVjZShjYWxsYmFja2ZuIC8qICwgaW5pdGlhbFZhbHVlICovKXtcblx0ICAgIHJldHVybiAkcmVkdWNlKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50c1sxXSwgZmFsc2UpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKVxuXHQgICwgdG9PYmplY3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApXG5cdCAgLCBJT2JqZWN0ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KVxuXHQgICwgdG9MZW5ndGggID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRoYXQsIGNhbGxiYWNrZm4sIGFMZW4sIG1lbW8sIGlzUmlnaHQpe1xuXHQgIGFGdW5jdGlvbihjYWxsYmFja2ZuKTtcblx0ICB2YXIgTyAgICAgID0gdG9PYmplY3QodGhhdClcblx0ICAgICwgc2VsZiAgID0gSU9iamVjdChPKVxuXHQgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aClcblx0ICAgICwgaW5kZXggID0gaXNSaWdodCA/IGxlbmd0aCAtIDEgOiAwXG5cdCAgICAsIGkgICAgICA9IGlzUmlnaHQgPyAtMSA6IDE7XG5cdCAgaWYoYUxlbiA8IDIpZm9yKDs7KXtcblx0ICAgIGlmKGluZGV4IGluIHNlbGYpe1xuXHQgICAgICBtZW1vID0gc2VsZltpbmRleF07XG5cdCAgICAgIGluZGV4ICs9IGk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgaW5kZXggKz0gaTtcblx0ICAgIGlmKGlzUmlnaHQgPyBpbmRleCA8IDAgOiBsZW5ndGggPD0gaW5kZXgpe1xuXHQgICAgICB0aHJvdyBUeXBlRXJyb3IoJ1JlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yKDtpc1JpZ2h0ID8gaW5kZXggPj0gMCA6IGxlbmd0aCA+IGluZGV4OyBpbmRleCArPSBpKWlmKGluZGV4IGluIHNlbGYpe1xuXHQgICAgbWVtbyA9IGNhbGxiYWNrZm4obWVtbywgc2VsZltpbmRleF0sIGluZGV4LCBPKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1lbW87XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJHJlZHVjZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjIyKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIV9fd2VicGFja19yZXF1aXJlX18oMjEwKShbXS5yZWR1Y2VSaWdodCwgdHJ1ZSksICdBcnJheScsIHtcblx0ICAvLyAyMi4xLjMuMTkgLyAxNS40LjQuMjIgQXJyYXkucHJvdG90eXBlLnJlZHVjZVJpZ2h0KGNhbGxiYWNrZm4gWywgaW5pdGlhbFZhbHVlXSlcblx0ICByZWR1Y2VSaWdodDogZnVuY3Rpb24gcmVkdWNlUmlnaHQoY2FsbGJhY2tmbiAvKiAsIGluaXRpYWxWYWx1ZSAqLyl7XG5cdCAgICByZXR1cm4gJHJlZHVjZSh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoLCBhcmd1bWVudHNbMV0sIHRydWUpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJGluZGV4T2YgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpKGZhbHNlKVxuXHQgICwgJG5hdGl2ZSAgICAgICA9IFtdLmluZGV4T2Zcblx0ICAsIE5FR0FUSVZFX1pFUk8gPSAhISRuYXRpdmUgJiYgMSAvIFsxXS5pbmRleE9mKDEsIC0wKSA8IDA7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChORUdBVElWRV9aRVJPIHx8ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCkoJG5hdGl2ZSkpLCAnQXJyYXknLCB7XG5cdCAgLy8gMjIuMS4zLjExIC8gMTUuNC40LjE0IEFycmF5LnByb3RvdHlwZS5pbmRleE9mKHNlYXJjaEVsZW1lbnQgWywgZnJvbUluZGV4XSlcblx0ICBpbmRleE9mOiBmdW5jdGlvbiBpbmRleE9mKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCA9IDAgKi8pe1xuXHQgICAgcmV0dXJuIE5FR0FUSVZFX1pFUk9cblx0ICAgICAgLy8gY29udmVydCAtMCB0byArMFxuXHQgICAgICA/ICRuYXRpdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCAwXG5cdCAgICAgIDogJGluZGV4T2YodGhpcywgc2VhcmNoRWxlbWVudCwgYXJndW1lbnRzWzFdKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciAkZXhwb3J0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIHRvSU9iamVjdCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KVxuXHQgICwgdG9JbnRlZ2VyICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODApXG5cdCAgLCB0b0xlbmd0aCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSlcblx0ICAsICRuYXRpdmUgICAgICAgPSBbXS5sYXN0SW5kZXhPZlxuXHQgICwgTkVHQVRJVkVfWkVSTyA9ICEhJG5hdGl2ZSAmJiAxIC8gWzFdLmxhc3RJbmRleE9mKDEsIC0wKSA8IDA7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChORUdBVElWRV9aRVJPIHx8ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCkoJG5hdGl2ZSkpLCAnQXJyYXknLCB7XG5cdCAgLy8gMjIuMS4zLjE0IC8gMTUuNC40LjE1IEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZihzZWFyY2hFbGVtZW50IFssIGZyb21JbmRleF0pXG5cdCAgbGFzdEluZGV4T2Y6IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCA9IEBbKi0xXSAqLyl7XG5cdCAgICAvLyBjb252ZXJ0IC0wIHRvICswXG5cdCAgICBpZihORUdBVElWRV9aRVJPKXJldHVybiAkbmF0aXZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgMDtcblx0ICAgIHZhciBPICAgICAgPSB0b0lPYmplY3QodGhpcylcblx0ICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aClcblx0ICAgICAgLCBpbmRleCAgPSBsZW5ndGggLSAxO1xuXHQgICAgaWYoYXJndW1lbnRzLmxlbmd0aCA+IDEpaW5kZXggPSBNYXRoLm1pbihpbmRleCwgdG9JbnRlZ2VyKGFyZ3VtZW50c1sxXSkpO1xuXHQgICAgaWYoaW5kZXggPCAwKWluZGV4ID0gbGVuZ3RoICsgaW5kZXg7XG5cdCAgICBmb3IoO2luZGV4ID49IDA7IGluZGV4LS0paWYoaW5kZXggaW4gTylpZihPW2luZGV4XSA9PT0gc2VhcmNoRWxlbWVudClyZXR1cm4gaW5kZXggfHwgMDtcblx0ICAgIHJldHVybiAtMTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyMi4xLjMuMyBBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbih0YXJnZXQsIHN0YXJ0LCBlbmQgPSB0aGlzLmxlbmd0aClcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QLCAnQXJyYXknLCB7Y29weVdpdGhpbjogX193ZWJwYWNrX3JlcXVpcmVfXygyMjcpfSk7XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIyOCkoJ2NvcHlXaXRoaW4nKTtcblxuLyoqKi8gfSxcbi8qIDIyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjIuMS4zLjMgQXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4odGFyZ2V0LCBzdGFydCwgZW5kID0gdGhpcy5sZW5ndGgpXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApXG5cdCAgLCB0b0luZGV4ICA9IF9fd2VicGFja19yZXF1aXJlX18oODEpXG5cdCAgLCB0b0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBbXS5jb3B5V2l0aGluIHx8IGZ1bmN0aW9uIGNvcHlXaXRoaW4odGFyZ2V0Lyo9IDAqLywgc3RhcnQvKj0gMCwgZW5kID0gQGxlbmd0aCovKXtcblx0ICB2YXIgTyAgICAgPSB0b09iamVjdCh0aGlzKVxuXHQgICAgLCBsZW4gICA9IHRvTGVuZ3RoKE8ubGVuZ3RoKVxuXHQgICAgLCB0byAgICA9IHRvSW5kZXgodGFyZ2V0LCBsZW4pXG5cdCAgICAsIGZyb20gID0gdG9JbmRleChzdGFydCwgbGVuKVxuXHQgICAgLCBlbmQgICA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkXG5cdCAgICAsIGNvdW50ID0gTWF0aC5taW4oKGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogdG9JbmRleChlbmQsIGxlbikpIC0gZnJvbSwgbGVuIC0gdG8pXG5cdCAgICAsIGluYyAgID0gMTtcblx0ICBpZihmcm9tIDwgdG8gJiYgdG8gPCBmcm9tICsgY291bnQpe1xuXHQgICAgaW5jICA9IC0xO1xuXHQgICAgZnJvbSArPSBjb3VudCAtIDE7XG5cdCAgICB0byAgICs9IGNvdW50IC0gMTtcblx0ICB9XG5cdCAgd2hpbGUoY291bnQtLSA+IDApe1xuXHQgICAgaWYoZnJvbSBpbiBPKU9bdG9dID0gT1tmcm9tXTtcblx0ICAgIGVsc2UgZGVsZXRlIE9bdG9dO1xuXHQgICAgdG8gICArPSBpbmM7XG5cdCAgICBmcm9tICs9IGluYztcblx0ICB9IHJldHVybiBPO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMjI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyMi4xLjMuMzEgQXJyYXkucHJvdG90eXBlW0BAdW5zY29wYWJsZXNdXG5cdHZhciBVTlNDT1BBQkxFUyA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpKCd1bnNjb3BhYmxlcycpXG5cdCAgLCBBcnJheVByb3RvICA9IEFycmF5LnByb3RvdHlwZTtcblx0aWYoQXJyYXlQcm90b1tVTlNDT1BBQkxFU10gPT0gdW5kZWZpbmVkKV9fd2VicGFja19yZXF1aXJlX18oNTIpKEFycmF5UHJvdG8sIFVOU0NPUEFCTEVTLCB7fSk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcblx0ICBBcnJheVByb3RvW1VOU0NPUEFCTEVTXVtrZXldID0gdHJ1ZTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjIuMS4zLjYgQXJyYXkucHJvdG90eXBlLmZpbGwodmFsdWUsIHN0YXJ0ID0gMCwgZW5kID0gdGhpcy5sZW5ndGgpXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCwgJ0FycmF5Jywge2ZpbGw6IF9fd2VicGFja19yZXF1aXJlX18oMjMwKX0pO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMjgpKCdmaWxsJyk7XG5cbi8qKiovIH0sXG4vKiAyMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDIyLjEuMy42IEFycmF5LnByb3RvdHlwZS5maWxsKHZhbHVlLCBzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKVxuXHQndXNlIHN0cmljdCc7XG5cdHZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTAwKVxuXHQgICwgdG9JbmRleCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKVxuXHQgICwgdG9MZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmaWxsKHZhbHVlIC8qLCBzdGFydCA9IDAsIGVuZCA9IEBsZW5ndGggKi8pe1xuXHQgIHZhciBPICAgICAgPSB0b09iamVjdCh0aGlzKVxuXHQgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aClcblx0ICAgICwgYUxlbiAgID0gYXJndW1lbnRzLmxlbmd0aFxuXHQgICAgLCBpbmRleCAgPSB0b0luZGV4KGFMZW4gPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCBsZW5ndGgpXG5cdCAgICAsIGVuZCAgICA9IGFMZW4gPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkXG5cdCAgICAsIGVuZFBvcyA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogdG9JbmRleChlbmQsIGxlbmd0aCk7XG5cdCAgd2hpbGUoZW5kUG9zID4gaW5kZXgpT1tpbmRleCsrXSA9IHZhbHVlO1xuXHQgIHJldHVybiBPO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMjMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIDIyLjEuMy44IEFycmF5LnByb3RvdHlwZS5maW5kKHByZWRpY2F0ZSwgdGhpc0FyZyA9IHVuZGVmaW5lZClcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJGZpbmQgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjE0KSg1KVxuXHQgICwgS0VZICAgICA9ICdmaW5kJ1xuXHQgICwgZm9yY2VkICA9IHRydWU7XG5cdC8vIFNob3VsZG4ndCBza2lwIGhvbGVzXG5cdGlmKEtFWSBpbiBbXSlBcnJheSgxKVtLRVldKGZ1bmN0aW9uKCl7IGZvcmNlZCA9IGZhbHNlOyB9KTtcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBmb3JjZWQsICdBcnJheScsIHtcblx0ICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNhbGxiYWNrZm4vKiwgdGhhdCA9IHVuZGVmaW5lZCAqLyl7XG5cdCAgICByZXR1cm4gJGZpbmQodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuXHQgIH1cblx0fSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjI4KShLRVkpO1xuXG4vKioqLyB9LFxuLyogMjMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIDIyLjEuMy45IEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXgocHJlZGljYXRlLCB0aGlzQXJnID0gdW5kZWZpbmVkKVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCAkZmluZCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTQpKDYpXG5cdCAgLCBLRVkgICAgID0gJ2ZpbmRJbmRleCdcblx0ICAsIGZvcmNlZCAgPSB0cnVlO1xuXHQvLyBTaG91bGRuJ3Qgc2tpcCBob2xlc1xuXHRpZihLRVkgaW4gW10pQXJyYXkoMSlbS0VZXShmdW5jdGlvbigpeyBmb3JjZWQgPSBmYWxzZTsgfSk7XG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogZm9yY2VkLCAnQXJyYXknLCB7XG5cdCAgZmluZEluZGV4OiBmdW5jdGlvbiBmaW5kSW5kZXgoY2FsbGJhY2tmbi8qLCB0aGF0ID0gdW5kZWZpbmVkICovKXtcblx0ICAgIHJldHVybiAkZmluZCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG5cdCAgfVxuXHR9KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMjgpKEtFWSk7XG5cbi8qKiovIH0sXG4vKiAyMzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjM0KSgnQXJyYXknKTtcblxuLyoqKi8gfSxcbi8qIDIzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgZ2xvYmFsICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgZFAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKVxuXHQgICwgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KVxuXHQgICwgU1BFQ0lFUyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnc3BlY2llcycpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVkpe1xuXHQgIHZhciBDID0gZ2xvYmFsW0tFWV07XG5cdCAgaWYoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSlkUC5mKEMsIFNQRUNJRVMsIHtcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH1cblx0ICB9KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgYWRkVG9VbnNjb3BhYmxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjI4KVxuXHQgICwgc3RlcCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjM2KVxuXHQgICwgSXRlcmF0b3JzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcxKVxuXHQgICwgdG9JT2JqZWN0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpO1xuXHRcblx0Ly8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKVxuXHQvLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKVxuXHQvLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpXG5cdC8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcwKShBcnJheSwgJ0FycmF5JywgZnVuY3Rpb24oaXRlcmF0ZWQsIGtpbmQpe1xuXHQgIHRoaXMuX3QgPSB0b0lPYmplY3QoaXRlcmF0ZWQpOyAvLyB0YXJnZXRcblx0ICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuXHQgIHRoaXMuX2sgPSBraW5kOyAgICAgICAgICAgICAgICAvLyBraW5kXG5cdC8vIDIyLjEuNS4yLjEgJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKVxuXHR9LCBmdW5jdGlvbigpe1xuXHQgIHZhciBPICAgICA9IHRoaXMuX3Rcblx0ICAgICwga2luZCAgPSB0aGlzLl9rXG5cdCAgICAsIGluZGV4ID0gdGhpcy5faSsrO1xuXHQgIGlmKCFPIHx8IGluZGV4ID49IE8ubGVuZ3RoKXtcblx0ICAgIHRoaXMuX3QgPSB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gc3RlcCgxKTtcblx0ICB9XG5cdCAgaWYoa2luZCA9PSAna2V5cycgIClyZXR1cm4gc3RlcCgwLCBpbmRleCk7XG5cdCAgaWYoa2luZCA9PSAndmFsdWVzJylyZXR1cm4gc3RlcCgwLCBPW2luZGV4XSk7XG5cdCAgcmV0dXJuIHN0ZXAoMCwgW2luZGV4LCBPW2luZGV4XV0pO1xuXHR9LCAndmFsdWVzJyk7XG5cdFxuXHQvLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpXG5cdEl0ZXJhdG9ycy5Bcmd1bWVudHMgPSBJdGVyYXRvcnMuQXJyYXk7XG5cdFxuXHRhZGRUb1Vuc2NvcGFibGVzKCdrZXlzJyk7XG5cdGFkZFRvVW5zY29wYWJsZXMoJ3ZhbHVlcycpO1xuXHRhZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7XG5cbi8qKiovIH0sXG4vKiAyMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZG9uZSwgdmFsdWUpe1xuXHQgIHJldHVybiB7dmFsdWU6IHZhbHVlLCBkb25lOiAhIWRvbmV9O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMjM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2xvYmFsICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgaW5oZXJpdElmUmVxdWlyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMClcblx0ICAsIGRQICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MykuZlxuXHQgICwgZ09QTiAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKS5mXG5cdCAgLCBpc1JlZ0V4cCAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTc2KVxuXHQgICwgJGZsYWdzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzOClcblx0ICAsICRSZWdFeHAgICAgICAgICAgID0gZ2xvYmFsLlJlZ0V4cFxuXHQgICwgQmFzZSAgICAgICAgICAgICAgPSAkUmVnRXhwXG5cdCAgLCBwcm90byAgICAgICAgICAgICA9ICRSZWdFeHAucHJvdG90eXBlXG5cdCAgLCByZTEgICAgICAgICAgICAgICA9IC9hL2dcblx0ICAsIHJlMiAgICAgICAgICAgICAgID0gL2EvZ1xuXHQgIC8vIFwibmV3XCIgY3JlYXRlcyBhIG5ldyBvYmplY3QsIG9sZCB3ZWJraXQgYnVnZ3kgaGVyZVxuXHQgICwgQ09SUkVDVF9ORVcgICAgICAgPSBuZXcgJFJlZ0V4cChyZTEpICE9PSByZTE7XG5cdFxuXHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSAmJiAoIUNPUlJFQ1RfTkVXIHx8IF9fd2VicGFja19yZXF1aXJlX18oNDkpKGZ1bmN0aW9uKCl7XG5cdCAgcmUyW19fd2VicGFja19yZXF1aXJlX18oNjcpKCdtYXRjaCcpXSA9IGZhbHNlO1xuXHQgIC8vIFJlZ0V4cCBjb25zdHJ1Y3RvciBjYW4gYWx0ZXIgZmxhZ3MgYW5kIElzUmVnRXhwIHdvcmtzIGNvcnJlY3Qgd2l0aCBAQG1hdGNoXG5cdCAgcmV0dXJuICRSZWdFeHAocmUxKSAhPSByZTEgfHwgJFJlZ0V4cChyZTIpID09IHJlMiB8fCAkUmVnRXhwKHJlMSwgJ2knKSAhPSAnL2EvaSc7XG5cdH0pKSl7XG5cdCAgJFJlZ0V4cCA9IGZ1bmN0aW9uIFJlZ0V4cChwLCBmKXtcblx0ICAgIHZhciB0aVJFID0gdGhpcyBpbnN0YW5jZW9mICRSZWdFeHBcblx0ICAgICAgLCBwaVJFID0gaXNSZWdFeHAocClcblx0ICAgICAgLCBmaVUgID0gZiA9PT0gdW5kZWZpbmVkO1xuXHQgICAgcmV0dXJuICF0aVJFICYmIHBpUkUgJiYgcC5jb25zdHJ1Y3RvciA9PT0gJFJlZ0V4cCAmJiBmaVUgPyBwXG5cdCAgICAgIDogaW5oZXJpdElmUmVxdWlyZWQoQ09SUkVDVF9ORVdcblx0ICAgICAgICA/IG5ldyBCYXNlKHBpUkUgJiYgIWZpVSA/IHAuc291cmNlIDogcCwgZilcblx0ICAgICAgICA6IEJhc2UoKHBpUkUgPSBwIGluc3RhbmNlb2YgJFJlZ0V4cCkgPyBwLnNvdXJjZSA6IHAsIHBpUkUgJiYgZmlVID8gJGZsYWdzLmNhbGwocCkgOiBmKVxuXHQgICAgICAsIHRpUkUgPyB0aGlzIDogcHJvdG8sICRSZWdFeHApO1xuXHQgIH07XG5cdCAgdmFyIHByb3h5ID0gZnVuY3Rpb24oa2V5KXtcblx0ICAgIGtleSBpbiAkUmVnRXhwIHx8IGRQKCRSZWdFeHAsIGtleSwge1xuXHQgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIEJhc2Vba2V5XTsgfSxcblx0ICAgICAgc2V0OiBmdW5jdGlvbihpdCl7IEJhc2Vba2V5XSA9IGl0OyB9XG5cdCAgICB9KTtcblx0ICB9O1xuXHQgIGZvcih2YXIga2V5cyA9IGdPUE4oQmFzZSksIGkgPSAwOyBrZXlzLmxlbmd0aCA+IGk7IClwcm94eShrZXlzW2krK10pO1xuXHQgIHByb3RvLmNvbnN0cnVjdG9yID0gJFJlZ0V4cDtcblx0ICAkUmVnRXhwLnByb3RvdHlwZSA9IHByb3RvO1xuXHQgIF9fd2VicGFja19yZXF1aXJlX18oNjApKGdsb2JhbCwgJ1JlZ0V4cCcsICRSZWdFeHApO1xuXHR9XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNCkoJ1JlZ0V4cCcpO1xuXG4vKioqLyB9LFxuLyogMjM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIDIxLjIuNS4zIGdldCBSZWdFeHAucHJvdG90eXBlLmZsYWdzXG5cdHZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7XG5cdCAgdmFyIHRoYXQgICA9IGFuT2JqZWN0KHRoaXMpXG5cdCAgICAsIHJlc3VsdCA9ICcnO1xuXHQgIGlmKHRoYXQuZ2xvYmFsKSAgICAgcmVzdWx0ICs9ICdnJztcblx0ICBpZih0aGF0Lmlnbm9yZUNhc2UpIHJlc3VsdCArPSAnaSc7XG5cdCAgaWYodGhhdC5tdWx0aWxpbmUpICByZXN1bHQgKz0gJ20nO1xuXHQgIGlmKHRoYXQudW5pY29kZSkgICAgcmVzdWx0ICs9ICd1Jztcblx0ICBpZih0aGF0LnN0aWNreSkgICAgIHJlc3VsdCArPSAneSc7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI0MCk7XG5cdHZhciBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCAkZmxhZ3MgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjM4KVxuXHQgICwgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KVxuXHQgICwgVE9fU1RSSU5HICAgPSAndG9TdHJpbmcnXG5cdCAgLCAkdG9TdHJpbmcgICA9IC8uL1tUT19TVFJJTkddO1xuXHRcblx0dmFyIGRlZmluZSA9IGZ1bmN0aW9uKGZuKXtcblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKShSZWdFeHAucHJvdG90eXBlLCBUT19TVFJJTkcsIGZuLCB0cnVlKTtcblx0fTtcblx0XG5cdC8vIDIxLjIuNS4xNCBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nKClcblx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkoZnVuY3Rpb24oKXsgcmV0dXJuICR0b1N0cmluZy5jYWxsKHtzb3VyY2U6ICdhJywgZmxhZ3M6ICdiJ30pICE9ICcvYS9iJzsgfSkpe1xuXHQgIGRlZmluZShmdW5jdGlvbiB0b1N0cmluZygpe1xuXHQgICAgdmFyIFIgPSBhbk9iamVjdCh0aGlzKTtcblx0ICAgIHJldHVybiAnLycuY29uY2F0KFIuc291cmNlLCAnLycsXG5cdCAgICAgICdmbGFncycgaW4gUiA/IFIuZmxhZ3MgOiAhREVTQ1JJUFRPUlMgJiYgUiBpbnN0YW5jZW9mIFJlZ0V4cCA/ICRmbGFncy5jYWxsKFIpIDogdW5kZWZpbmVkKTtcblx0ICB9KTtcblx0Ly8gRkY0NC0gUmVnRXhwI3RvU3RyaW5nIGhhcyBhIHdyb25nIG5hbWVcblx0fSBlbHNlIGlmKCR0b1N0cmluZy5uYW1lICE9IFRPX1NUUklORyl7XG5cdCAgZGVmaW5lKGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG5cdCAgICByZXR1cm4gJHRvU3RyaW5nLmNhbGwodGhpcyk7XG5cdCAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjEuMi41LjMgZ2V0IFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3MoKVxuXHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSAmJiAvLi9nLmZsYWdzICE9ICdnJylfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKS5mKFJlZ0V4cC5wcm90b3R5cGUsICdmbGFncycsIHtcblx0ICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgZ2V0OiBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzOClcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIEBAbWF0Y2ggbG9naWNcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNDIpKCdtYXRjaCcsIDEsIGZ1bmN0aW9uKGRlZmluZWQsIE1BVENILCAkbWF0Y2gpe1xuXHQgIC8vIDIxLjEuMy4xMSBTdHJpbmcucHJvdG90eXBlLm1hdGNoKHJlZ2V4cClcblx0ICByZXR1cm4gW2Z1bmN0aW9uIG1hdGNoKHJlZ2V4cCl7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdCAgICB2YXIgTyAgPSBkZWZpbmVkKHRoaXMpXG5cdCAgICAgICwgZm4gPSByZWdleHAgPT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcmVnZXhwW01BVENIXTtcblx0ICAgIHJldHVybiBmbiAhPT0gdW5kZWZpbmVkID8gZm4uY2FsbChyZWdleHAsIE8pIDogbmV3IFJlZ0V4cChyZWdleHApW01BVENIXShTdHJpbmcoTykpO1xuXHQgIH0sICRtYXRjaF07XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBoaWRlICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpXG5cdCAgLCByZWRlZmluZSA9IF9fd2VicGFja19yZXF1aXJlX18oNjApXG5cdCAgLCBmYWlscyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpXG5cdCAgLCBkZWZpbmVkICA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpXG5cdCAgLCB3a3MgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGxlbmd0aCwgZXhlYyl7XG5cdCAgdmFyIFNZTUJPTCAgID0gd2tzKEtFWSlcblx0ICAgICwgZm5zICAgICAgPSBleGVjKGRlZmluZWQsIFNZTUJPTCwgJydbS0VZXSlcblx0ICAgICwgc3RyZm4gICAgPSBmbnNbMF1cblx0ICAgICwgcnhmbiAgICAgPSBmbnNbMV07XG5cdCAgaWYoZmFpbHMoZnVuY3Rpb24oKXtcblx0ICAgIHZhciBPID0ge307XG5cdCAgICBPW1NZTUJPTF0gPSBmdW5jdGlvbigpeyByZXR1cm4gNzsgfTtcblx0ICAgIHJldHVybiAnJ1tLRVldKE8pICE9IDc7XG5cdCAgfSkpe1xuXHQgICAgcmVkZWZpbmUoU3RyaW5nLnByb3RvdHlwZSwgS0VZLCBzdHJmbik7XG5cdCAgICBoaWRlKFJlZ0V4cC5wcm90b3R5cGUsIFNZTUJPTCwgbGVuZ3RoID09IDJcblx0ICAgICAgLy8gMjEuMi41LjggUmVnRXhwLnByb3RvdHlwZVtAQHJlcGxhY2VdKHN0cmluZywgcmVwbGFjZVZhbHVlKVxuXHQgICAgICAvLyAyMS4yLjUuMTEgUmVnRXhwLnByb3RvdHlwZVtAQHNwbGl0XShzdHJpbmcsIGxpbWl0KVxuXHQgICAgICA/IGZ1bmN0aW9uKHN0cmluZywgYXJnKXsgcmV0dXJuIHJ4Zm4uY2FsbChzdHJpbmcsIHRoaXMsIGFyZyk7IH1cblx0ICAgICAgLy8gMjEuMi41LjYgUmVnRXhwLnByb3RvdHlwZVtAQG1hdGNoXShzdHJpbmcpXG5cdCAgICAgIC8vIDIxLjIuNS45IFJlZ0V4cC5wcm90b3R5cGVbQEBzZWFyY2hdKHN0cmluZylcblx0ICAgICAgOiBmdW5jdGlvbihzdHJpbmcpeyByZXR1cm4gcnhmbi5jYWxsKHN0cmluZywgdGhpcyk7IH1cblx0ICAgICk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMjQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBAQHJlcGxhY2UgbG9naWNcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNDIpKCdyZXBsYWNlJywgMiwgZnVuY3Rpb24oZGVmaW5lZCwgUkVQTEFDRSwgJHJlcGxhY2Upe1xuXHQgIC8vIDIxLjEuMy4xNCBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2Uoc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSlcblx0ICByZXR1cm4gW2Z1bmN0aW9uIHJlcGxhY2Uoc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSl7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdCAgICB2YXIgTyAgPSBkZWZpbmVkKHRoaXMpXG5cdCAgICAgICwgZm4gPSBzZWFyY2hWYWx1ZSA9PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBzZWFyY2hWYWx1ZVtSRVBMQUNFXTtcblx0ICAgIHJldHVybiBmbiAhPT0gdW5kZWZpbmVkXG5cdCAgICAgID8gZm4uY2FsbChzZWFyY2hWYWx1ZSwgTywgcmVwbGFjZVZhbHVlKVxuXHQgICAgICA6ICRyZXBsYWNlLmNhbGwoU3RyaW5nKE8pLCBzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKTtcblx0ICB9LCAkcmVwbGFjZV07XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBAQHNlYXJjaCBsb2dpY1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI0MikoJ3NlYXJjaCcsIDEsIGZ1bmN0aW9uKGRlZmluZWQsIFNFQVJDSCwgJHNlYXJjaCl7XG5cdCAgLy8gMjEuMS4zLjE1IFN0cmluZy5wcm90b3R5cGUuc2VhcmNoKHJlZ2V4cClcblx0ICByZXR1cm4gW2Z1bmN0aW9uIHNlYXJjaChyZWdleHApe1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHQgICAgdmFyIE8gID0gZGVmaW5lZCh0aGlzKVxuXHQgICAgICAsIGZuID0gcmVnZXhwID09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHJlZ2V4cFtTRUFSQ0hdO1xuXHQgICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQgPyBmbi5jYWxsKHJlZ2V4cCwgTykgOiBuZXcgUmVnRXhwKHJlZ2V4cClbU0VBUkNIXShTdHJpbmcoTykpO1xuXHQgIH0sICRzZWFyY2hdO1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gQEBzcGxpdCBsb2dpY1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI0MikoJ3NwbGl0JywgMiwgZnVuY3Rpb24oZGVmaW5lZCwgU1BMSVQsICRzcGxpdCl7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHQgIHZhciBpc1JlZ0V4cCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzYpXG5cdCAgICAsIF9zcGxpdCAgICAgPSAkc3BsaXRcblx0ICAgICwgJHB1c2ggICAgICA9IFtdLnB1c2hcblx0ICAgICwgJFNQTElUICAgICA9ICdzcGxpdCdcblx0ICAgICwgTEVOR1RIICAgICA9ICdsZW5ndGgnXG5cdCAgICAsIExBU1RfSU5ERVggPSAnbGFzdEluZGV4Jztcblx0ICBpZihcblx0ICAgICdhYmJjJ1skU1BMSVRdKC8oYikqLylbMV0gPT0gJ2MnIHx8XG5cdCAgICAndGVzdCdbJFNQTElUXSgvKD86KS8sIC0xKVtMRU5HVEhdICE9IDQgfHxcblx0ICAgICdhYidbJFNQTElUXSgvKD86YWIpKi8pW0xFTkdUSF0gIT0gMiB8fFxuXHQgICAgJy4nWyRTUExJVF0oLyguPykoLj8pLylbTEVOR1RIXSAhPSA0IHx8XG5cdCAgICAnLidbJFNQTElUXSgvKCkoKS8pW0xFTkdUSF0gPiAxIHx8XG5cdCAgICAnJ1skU1BMSVRdKC8uPy8pW0xFTkdUSF1cblx0ICApe1xuXHQgICAgdmFyIE5QQ0cgPSAvKCk/Py8uZXhlYygnJylbMV0gPT09IHVuZGVmaW5lZDsgLy8gbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgIC8vIGJhc2VkIG9uIGVzNS1zaGltIGltcGxlbWVudGF0aW9uLCBuZWVkIHRvIHJld29yayBpdFxuXHQgICAgJHNwbGl0ID0gZnVuY3Rpb24oc2VwYXJhdG9yLCBsaW1pdCl7XG5cdCAgICAgIHZhciBzdHJpbmcgPSBTdHJpbmcodGhpcyk7XG5cdCAgICAgIGlmKHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkICYmIGxpbWl0ID09PSAwKXJldHVybiBbXTtcblx0ICAgICAgLy8gSWYgYHNlcGFyYXRvcmAgaXMgbm90IGEgcmVnZXgsIHVzZSBuYXRpdmUgc3BsaXRcblx0ICAgICAgaWYoIWlzUmVnRXhwKHNlcGFyYXRvcikpcmV0dXJuIF9zcGxpdC5jYWxsKHN0cmluZywgc2VwYXJhdG9yLCBsaW1pdCk7XG5cdCAgICAgIHZhciBvdXRwdXQgPSBbXTtcblx0ICAgICAgdmFyIGZsYWdzID0gKHNlcGFyYXRvci5pZ25vcmVDYXNlID8gJ2knIDogJycpICtcblx0ICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5tdWx0aWxpbmUgPyAnbScgOiAnJykgK1xuXHQgICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLnVuaWNvZGUgPyAndScgOiAnJykgK1xuXHQgICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLnN0aWNreSA/ICd5JyA6ICcnKTtcblx0ICAgICAgdmFyIGxhc3RMYXN0SW5kZXggPSAwO1xuXHQgICAgICB2YXIgc3BsaXRMaW1pdCA9IGxpbWl0ID09PSB1bmRlZmluZWQgPyA0Mjk0OTY3Mjk1IDogbGltaXQgPj4+IDA7XG5cdCAgICAgIC8vIE1ha2UgYGdsb2JhbGAgYW5kIGF2b2lkIGBsYXN0SW5kZXhgIGlzc3VlcyBieSB3b3JraW5nIHdpdGggYSBjb3B5XG5cdCAgICAgIHZhciBzZXBhcmF0b3JDb3B5ID0gbmV3IFJlZ0V4cChzZXBhcmF0b3Iuc291cmNlLCBmbGFncyArICdnJyk7XG5cdCAgICAgIHZhciBzZXBhcmF0b3IyLCBtYXRjaCwgbGFzdEluZGV4LCBsYXN0TGVuZ3RoLCBpO1xuXHQgICAgICAvLyBEb2Vzbid0IG5lZWQgZmxhZ3MgZ3ksIGJ1dCB0aGV5IGRvbid0IGh1cnRcblx0ICAgICAgaWYoIU5QQ0cpc2VwYXJhdG9yMiA9IG5ldyBSZWdFeHAoJ14nICsgc2VwYXJhdG9yQ29weS5zb3VyY2UgKyAnJCg/IVxcXFxzKScsIGZsYWdzKTtcblx0ICAgICAgd2hpbGUobWF0Y2ggPSBzZXBhcmF0b3JDb3B5LmV4ZWMoc3RyaW5nKSl7XG5cdCAgICAgICAgLy8gYHNlcGFyYXRvckNvcHkubGFzdEluZGV4YCBpcyBub3QgcmVsaWFibGUgY3Jvc3MtYnJvd3NlclxuXHQgICAgICAgIGxhc3RJbmRleCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF1bTEVOR1RIXTtcblx0ICAgICAgICBpZihsYXN0SW5kZXggPiBsYXN0TGFzdEluZGV4KXtcblx0ICAgICAgICAgIG91dHB1dC5wdXNoKHN0cmluZy5zbGljZShsYXN0TGFzdEluZGV4LCBtYXRjaC5pbmRleCkpO1xuXHQgICAgICAgICAgLy8gRml4IGJyb3dzZXJzIHdob3NlIGBleGVjYCBtZXRob2RzIGRvbid0IGNvbnNpc3RlbnRseSByZXR1cm4gYHVuZGVmaW5lZGAgZm9yIE5QQ0dcblx0ICAgICAgICAgIGlmKCFOUENHICYmIG1hdGNoW0xFTkdUSF0gPiAxKW1hdGNoWzBdLnJlcGxhY2Uoc2VwYXJhdG9yMiwgZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgZm9yKGkgPSAxOyBpIDwgYXJndW1lbnRzW0xFTkdUSF0gLSAyOyBpKyspaWYoYXJndW1lbnRzW2ldID09PSB1bmRlZmluZWQpbWF0Y2hbaV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGlmKG1hdGNoW0xFTkdUSF0gPiAxICYmIG1hdGNoLmluZGV4IDwgc3RyaW5nW0xFTkdUSF0pJHB1c2guYXBwbHkob3V0cHV0LCBtYXRjaC5zbGljZSgxKSk7XG5cdCAgICAgICAgICBsYXN0TGVuZ3RoID0gbWF0Y2hbMF1bTEVOR1RIXTtcblx0ICAgICAgICAgIGxhc3RMYXN0SW5kZXggPSBsYXN0SW5kZXg7XG5cdCAgICAgICAgICBpZihvdXRwdXRbTEVOR1RIXSA+PSBzcGxpdExpbWl0KWJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZihzZXBhcmF0b3JDb3B5W0xBU1RfSU5ERVhdID09PSBtYXRjaC5pbmRleClzZXBhcmF0b3JDb3B5W0xBU1RfSU5ERVhdKys7IC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3Bcblx0ICAgICAgfVxuXHQgICAgICBpZihsYXN0TGFzdEluZGV4ID09PSBzdHJpbmdbTEVOR1RIXSl7XG5cdCAgICAgICAgaWYobGFzdExlbmd0aCB8fCAhc2VwYXJhdG9yQ29weS50ZXN0KCcnKSlvdXRwdXQucHVzaCgnJyk7XG5cdCAgICAgIH0gZWxzZSBvdXRwdXQucHVzaChzdHJpbmcuc2xpY2UobGFzdExhc3RJbmRleCkpO1xuXHQgICAgICByZXR1cm4gb3V0cHV0W0xFTkdUSF0gPiBzcGxpdExpbWl0ID8gb3V0cHV0LnNsaWNlKDAsIHNwbGl0TGltaXQpIDogb3V0cHV0O1xuXHQgICAgfTtcblx0ICAvLyBDaGFrcmEsIFY4XG5cdCAgfSBlbHNlIGlmKCcwJ1skU1BMSVRdKHVuZGVmaW5lZCwgMClbTEVOR1RIXSl7XG5cdCAgICAkc3BsaXQgPSBmdW5jdGlvbihzZXBhcmF0b3IsIGxpbWl0KXtcblx0ICAgICAgcmV0dXJuIHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkICYmIGxpbWl0ID09PSAwID8gW10gOiBfc3BsaXQuY2FsbCh0aGlzLCBzZXBhcmF0b3IsIGxpbWl0KTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIC8vIDIxLjEuMy4xNyBTdHJpbmcucHJvdG90eXBlLnNwbGl0KHNlcGFyYXRvciwgbGltaXQpXG5cdCAgcmV0dXJuIFtmdW5jdGlvbiBzcGxpdChzZXBhcmF0b3IsIGxpbWl0KXtcblx0ICAgIHZhciBPICA9IGRlZmluZWQodGhpcylcblx0ICAgICAgLCBmbiA9IHNlcGFyYXRvciA9PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBzZXBhcmF0b3JbU1BMSVRdO1xuXHQgICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQgPyBmbi5jYWxsKHNlcGFyYXRvciwgTywgbGltaXQpIDogJHNwbGl0LmNhbGwoU3RyaW5nKE8pLCBzZXBhcmF0b3IsIGxpbWl0KTtcblx0ICB9LCAkc3BsaXRdO1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgTElCUkFSWSAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MClcblx0ICAsIGdsb2JhbCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgLCBjdHggICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKVxuXHQgICwgY2xhc3NvZiAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpXG5cdCAgLCAkZXhwb3J0ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgaXNPYmplY3QgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAsIGFGdW5jdGlvbiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpXG5cdCAgLCBhbkluc3RhbmNlICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0Nylcblx0ICAsIGZvck9mICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQ4KVxuXHQgICwgc3BlY2llc0NvbnN0cnVjdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDkpXG5cdCAgLCB0YXNrICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1MCkuc2V0XG5cdCAgLCBtaWNyb3Rhc2sgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1MSkoKVxuXHQgICwgUFJPTUlTRSAgICAgICAgICAgID0gJ1Byb21pc2UnXG5cdCAgLCBUeXBlRXJyb3IgICAgICAgICAgPSBnbG9iYWwuVHlwZUVycm9yXG5cdCAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzc1xuXHQgICwgJFByb21pc2UgICAgICAgICAgID0gZ2xvYmFsW1BST01JU0VdXG5cdCAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzc1xuXHQgICwgaXNOb2RlICAgICAgICAgICAgID0gY2xhc3NvZihwcm9jZXNzKSA9PSAncHJvY2Vzcydcblx0ICAsIGVtcHR5ICAgICAgICAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH1cblx0ICAsIEludGVybmFsLCBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHksIFdyYXBwZXI7XG5cdFxuXHR2YXIgVVNFX05BVElWRSA9ICEhZnVuY3Rpb24oKXtcblx0ICB0cnkge1xuXHQgICAgLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0XG5cdCAgICB2YXIgcHJvbWlzZSAgICAgPSAkUHJvbWlzZS5yZXNvbHZlKDEpXG5cdCAgICAgICwgRmFrZVByb21pc2UgPSAocHJvbWlzZS5jb25zdHJ1Y3RvciA9IHt9KVtfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnc3BlY2llcycpXSA9IGZ1bmN0aW9uKGV4ZWMpeyBleGVjKGVtcHR5LCBlbXB0eSk7IH07XG5cdCAgICAvLyB1bmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0XG5cdCAgICByZXR1cm4gKGlzTm9kZSB8fCB0eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50ID09ICdmdW5jdGlvbicpICYmIHByb21pc2UudGhlbihlbXB0eSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZTtcblx0ICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG5cdH0oKTtcblx0XG5cdC8vIGhlbHBlcnNcblx0dmFyIHNhbWVDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGEsIGIpe1xuXHQgIC8vIHdpdGggbGlicmFyeSB3cmFwcGVyIHNwZWNpYWwgY2FzZVxuXHQgIHJldHVybiBhID09PSBiIHx8IGEgPT09ICRQcm9taXNlICYmIGIgPT09IFdyYXBwZXI7XG5cdH07XG5cdHZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24oaXQpe1xuXHQgIHZhciB0aGVuO1xuXHQgIHJldHVybiBpc09iamVjdChpdCkgJiYgdHlwZW9mICh0aGVuID0gaXQudGhlbikgPT0gJ2Z1bmN0aW9uJyA/IHRoZW4gOiBmYWxzZTtcblx0fTtcblx0dmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7XG5cdCAgcmV0dXJuIHNhbWVDb25zdHJ1Y3RvcigkUHJvbWlzZSwgQylcblx0ICAgID8gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpXG5cdCAgICA6IG5ldyBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkoQyk7XG5cdH07XG5cdHZhciBQcm9taXNlQ2FwYWJpbGl0eSA9IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpe1xuXHQgIHZhciByZXNvbHZlLCByZWplY3Q7XG5cdCAgdGhpcy5wcm9taXNlID0gbmV3IEMoZnVuY3Rpb24oJCRyZXNvbHZlLCAkJHJlamVjdCl7XG5cdCAgICBpZihyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKCdCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuXHQgICAgcmVzb2x2ZSA9ICQkcmVzb2x2ZTtcblx0ICAgIHJlamVjdCAgPSAkJHJlamVjdDtcblx0ICB9KTtcblx0ICB0aGlzLnJlc29sdmUgPSBhRnVuY3Rpb24ocmVzb2x2ZSk7XG5cdCAgdGhpcy5yZWplY3QgID0gYUZ1bmN0aW9uKHJlamVjdCk7XG5cdH07XG5cdHZhciBwZXJmb3JtID0gZnVuY3Rpb24oZXhlYyl7XG5cdCAgdHJ5IHtcblx0ICAgIGV4ZWMoKTtcblx0ICB9IGNhdGNoKGUpe1xuXHQgICAgcmV0dXJuIHtlcnJvcjogZX07XG5cdCAgfVxuXHR9O1xuXHR2YXIgbm90aWZ5ID0gZnVuY3Rpb24ocHJvbWlzZSwgaXNSZWplY3Qpe1xuXHQgIGlmKHByb21pc2UuX24pcmV0dXJuO1xuXHQgIHByb21pc2UuX24gPSB0cnVlO1xuXHQgIHZhciBjaGFpbiA9IHByb21pc2UuX2M7XG5cdCAgbWljcm90YXNrKGZ1bmN0aW9uKCl7XG5cdCAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92XG5cdCAgICAgICwgb2sgICAgPSBwcm9taXNlLl9zID09IDFcblx0ICAgICAgLCBpICAgICA9IDA7XG5cdCAgICB2YXIgcnVuID0gZnVuY3Rpb24ocmVhY3Rpb24pe1xuXHQgICAgICB2YXIgaGFuZGxlciA9IG9rID8gcmVhY3Rpb24ub2sgOiByZWFjdGlvbi5mYWlsXG5cdCAgICAgICAgLCByZXNvbHZlID0gcmVhY3Rpb24ucmVzb2x2ZVxuXHQgICAgICAgICwgcmVqZWN0ICA9IHJlYWN0aW9uLnJlamVjdFxuXHQgICAgICAgICwgZG9tYWluICA9IHJlYWN0aW9uLmRvbWFpblxuXHQgICAgICAgICwgcmVzdWx0LCB0aGVuO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmKGhhbmRsZXIpe1xuXHQgICAgICAgICAgaWYoIW9rKXtcblx0ICAgICAgICAgICAgaWYocHJvbWlzZS5faCA9PSAyKW9uSGFuZGxlVW5oYW5kbGVkKHByb21pc2UpO1xuXHQgICAgICAgICAgICBwcm9taXNlLl9oID0gMTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmKGhhbmRsZXIgPT09IHRydWUpcmVzdWx0ID0gdmFsdWU7XG5cdCAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5lbnRlcigpO1xuXHQgICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVyKHZhbHVlKTtcblx0ICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5leGl0KCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZihyZXN1bHQgPT09IHJlYWN0aW9uLnByb21pc2Upe1xuXHQgICAgICAgICAgICByZWplY3QoVHlwZUVycm9yKCdQcm9taXNlLWNoYWluIGN5Y2xlJykpO1xuXHQgICAgICAgICAgfSBlbHNlIGlmKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpe1xuXHQgICAgICAgICAgICB0aGVuLmNhbGwocmVzdWx0LCByZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgICAgfSBlbHNlIHJlc29sdmUocmVzdWx0KTtcblx0ICAgICAgICB9IGVsc2UgcmVqZWN0KHZhbHVlKTtcblx0ICAgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICByZWplY3QoZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXJ1bihjaGFpbltpKytdKTsgLy8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2hcblx0ICAgIHByb21pc2UuX2MgPSBbXTtcblx0ICAgIHByb21pc2UuX24gPSBmYWxzZTtcblx0ICAgIGlmKGlzUmVqZWN0ICYmICFwcm9taXNlLl9oKW9uVW5oYW5kbGVkKHByb21pc2UpO1xuXHQgIH0pO1xuXHR9O1xuXHR2YXIgb25VbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXtcblx0ICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpe1xuXHQgICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdlxuXHQgICAgICAsIGFicnVwdCwgaGFuZGxlciwgY29uc29sZTtcblx0ICAgIGlmKGlzVW5oYW5kbGVkKHByb21pc2UpKXtcblx0ICAgICAgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpe1xuXHQgICAgICAgIGlmKGlzTm9kZSl7XG5cdCAgICAgICAgICBwcm9jZXNzLmVtaXQoJ3VuaGFuZGxlZFJlamVjdGlvbicsIHZhbHVlLCBwcm9taXNlKTtcblx0ICAgICAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnVuaGFuZGxlZHJlamVjdGlvbil7XG5cdCAgICAgICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHZhbHVlfSk7XG5cdCAgICAgICAgfSBlbHNlIGlmKChjb25zb2xlID0gZ2xvYmFsLmNvbnNvbGUpICYmIGNvbnNvbGUuZXJyb3Ipe1xuXHQgICAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkXG5cdCAgICAgIHByb21pc2UuX2ggPSBpc05vZGUgfHwgaXNVbmhhbmRsZWQocHJvbWlzZSkgPyAyIDogMTtcblx0ICAgIH0gcHJvbWlzZS5fYSA9IHVuZGVmaW5lZDtcblx0ICAgIGlmKGFicnVwdCl0aHJvdyBhYnJ1cHQuZXJyb3I7XG5cdCAgfSk7XG5cdH07XG5cdHZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upe1xuXHQgIGlmKHByb21pc2UuX2ggPT0gMSlyZXR1cm4gZmFsc2U7XG5cdCAgdmFyIGNoYWluID0gcHJvbWlzZS5fYSB8fCBwcm9taXNlLl9jXG5cdCAgICAsIGkgICAgID0gMFxuXHQgICAgLCByZWFjdGlvbjtcblx0ICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXtcblx0ICAgIHJlYWN0aW9uID0gY2hhaW5baSsrXTtcblx0ICAgIGlmKHJlYWN0aW9uLmZhaWwgfHwgIWlzVW5oYW5kbGVkKHJlYWN0aW9uLnByb21pc2UpKXJldHVybiBmYWxzZTtcblx0ICB9IHJldHVybiB0cnVlO1xuXHR9O1xuXHR2YXIgb25IYW5kbGVVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXtcblx0ICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpe1xuXHQgICAgdmFyIGhhbmRsZXI7XG5cdCAgICBpZihpc05vZGUpe1xuXHQgICAgICBwcm9jZXNzLmVtaXQoJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlKTtcblx0ICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9ucmVqZWN0aW9uaGFuZGxlZCl7XG5cdCAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogcHJvbWlzZS5fdn0pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXHR2YXIgJHJlamVjdCA9IGZ1bmN0aW9uKHZhbHVlKXtcblx0ICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cdCAgaWYocHJvbWlzZS5fZClyZXR1cm47XG5cdCAgcHJvbWlzZS5fZCA9IHRydWU7XG5cdCAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwXG5cdCAgcHJvbWlzZS5fdiA9IHZhbHVlO1xuXHQgIHByb21pc2UuX3MgPSAyO1xuXHQgIGlmKCFwcm9taXNlLl9hKXByb21pc2UuX2EgPSBwcm9taXNlLl9jLnNsaWNlKCk7XG5cdCAgbm90aWZ5KHByb21pc2UsIHRydWUpO1xuXHR9O1xuXHR2YXIgJHJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSl7XG5cdCAgdmFyIHByb21pc2UgPSB0aGlzXG5cdCAgICAsIHRoZW47XG5cdCAgaWYocHJvbWlzZS5fZClyZXR1cm47XG5cdCAgcHJvbWlzZS5fZCA9IHRydWU7XG5cdCAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwXG5cdCAgdHJ5IHtcblx0ICAgIGlmKHByb21pc2UgPT09IHZhbHVlKXRocm93IFR5cGVFcnJvcihcIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmXCIpO1xuXHQgICAgaWYodGhlbiA9IGlzVGhlbmFibGUodmFsdWUpKXtcblx0ICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgdmFyIHdyYXBwZXIgPSB7X3c6IHByb21pc2UsIF9kOiBmYWxzZX07IC8vIHdyYXBcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBjdHgoJHJlc29sdmUsIHdyYXBwZXIsIDEpLCBjdHgoJHJlamVjdCwgd3JhcHBlciwgMSkpO1xuXHQgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAkcmVqZWN0LmNhbGwod3JhcHBlciwgZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb21pc2UuX3YgPSB2YWx1ZTtcblx0ICAgICAgcHJvbWlzZS5fcyA9IDE7XG5cdCAgICAgIG5vdGlmeShwcm9taXNlLCBmYWxzZSk7XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKXtcblx0ICAgICRyZWplY3QuY2FsbCh7X3c6IHByb21pc2UsIF9kOiBmYWxzZX0sIGUpOyAvLyB3cmFwXG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gY29uc3RydWN0b3IgcG9seWZpbGxcblx0aWYoIVVTRV9OQVRJVkUpe1xuXHQgIC8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpXG5cdCAgJFByb21pc2UgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXtcblx0ICAgIGFuSW5zdGFuY2UodGhpcywgJFByb21pc2UsIFBST01JU0UsICdfaCcpO1xuXHQgICAgYUZ1bmN0aW9uKGV4ZWN1dG9yKTtcblx0ICAgIEludGVybmFsLmNhbGwodGhpcyk7XG5cdCAgICB0cnkge1xuXHQgICAgICBleGVjdXRvcihjdHgoJHJlc29sdmUsIHRoaXMsIDEpLCBjdHgoJHJlamVjdCwgdGhpcywgMSkpO1xuXHQgICAgfSBjYXRjaChlcnIpe1xuXHQgICAgICAkcmVqZWN0LmNhbGwodGhpcywgZXJyKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7XG5cdCAgICB0aGlzLl9jID0gW107ICAgICAgICAgICAgIC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9uc1xuXHQgICAgdGhpcy5fYSA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSBjaGVja2VkIGluIGlzVW5oYW5kbGVkIHJlYWN0aW9uc1xuXHQgICAgdGhpcy5fcyA9IDA7ICAgICAgICAgICAgICAvLyA8LSBzdGF0ZVxuXHQgICAgdGhpcy5fZCA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBkb25lXG5cdCAgICB0aGlzLl92ID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIHZhbHVlXG5cdCAgICB0aGlzLl9oID0gMDsgICAgICAgICAgICAgIC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkXG5cdCAgICB0aGlzLl9uID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIG5vdGlmeVxuXHQgIH07XG5cdCAgSW50ZXJuYWwucHJvdG90eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNTIpKCRQcm9taXNlLnByb3RvdHlwZSwge1xuXHQgICAgLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZClcblx0ICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpe1xuXHQgICAgICB2YXIgcmVhY3Rpb24gICAgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgJFByb21pc2UpKTtcblx0ICAgICAgcmVhY3Rpb24ub2sgICAgID0gdHlwZW9mIG9uRnVsZmlsbGVkID09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IHRydWU7XG5cdCAgICAgIHJlYWN0aW9uLmZhaWwgICA9IHR5cGVvZiBvblJlamVjdGVkID09ICdmdW5jdGlvbicgJiYgb25SZWplY3RlZDtcblx0ICAgICAgcmVhY3Rpb24uZG9tYWluID0gaXNOb2RlID8gcHJvY2Vzcy5kb21haW4gOiB1bmRlZmluZWQ7XG5cdCAgICAgIHRoaXMuX2MucHVzaChyZWFjdGlvbik7XG5cdCAgICAgIGlmKHRoaXMuX2EpdGhpcy5fYS5wdXNoKHJlYWN0aW9uKTtcblx0ICAgICAgaWYodGhpcy5fcylub3RpZnkodGhpcywgZmFsc2UpO1xuXHQgICAgICByZXR1cm4gcmVhY3Rpb24ucHJvbWlzZTtcblx0ICAgIH0sXG5cdCAgICAvLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKVxuXHQgICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3RlZCl7XG5cdCAgICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBvblJlamVjdGVkKTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICBQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKCl7XG5cdCAgICB2YXIgcHJvbWlzZSAgPSBuZXcgSW50ZXJuYWw7XG5cdCAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xuXHQgICAgdGhpcy5yZXNvbHZlID0gY3R4KCRyZXNvbHZlLCBwcm9taXNlLCAxKTtcblx0ICAgIHRoaXMucmVqZWN0ICA9IGN0eCgkcmVqZWN0LCBwcm9taXNlLCAxKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7UHJvbWlzZTogJFByb21pc2V9KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg2NikoJFByb21pc2UsIFBST01JU0UpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNCkoUFJPTUlTRSk7XG5cdFdyYXBwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVtQUk9NSVNFXTtcblx0XG5cdC8vIHN0YXRpY3Ncblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgUFJPTUlTRSwge1xuXHQgIC8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpXG5cdCAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocil7XG5cdCAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpXG5cdCAgICAgICwgJCRyZWplY3QgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuXHQgICAgJCRyZWplY3Qocik7XG5cdCAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlO1xuXHQgIH1cblx0fSk7XG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKExJQlJBUlkgfHwgIVVTRV9OQVRJVkUpLCBQUk9NSVNFLCB7XG5cdCAgLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpXG5cdCAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh4KXtcblx0ICAgIC8vIGluc3RhbmNlb2YgaW5zdGVhZCBvZiBpbnRlcm5hbCBzbG90IGNoZWNrIGJlY2F1c2Ugd2Ugc2hvdWxkIGZpeCBpdCB3aXRob3V0IHJlcGxhY2VtZW50IG5hdGl2ZSBQcm9taXNlIGNvcmVcblx0ICAgIGlmKHggaW5zdGFuY2VvZiAkUHJvbWlzZSAmJiBzYW1lQ29uc3RydWN0b3IoeC5jb25zdHJ1Y3RvciwgdGhpcykpcmV0dXJuIHg7XG5cdCAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpXG5cdCAgICAgICwgJCRyZXNvbHZlICA9IGNhcGFiaWxpdHkucmVzb2x2ZTtcblx0ICAgICQkcmVzb2x2ZSh4KTtcblx0ICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7XG5cdCAgfVxuXHR9KTtcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKFVTRV9OQVRJVkUgJiYgX193ZWJwYWNrX3JlcXVpcmVfXygyMDcpKGZ1bmN0aW9uKGl0ZXIpe1xuXHQgICRQcm9taXNlLmFsbChpdGVyKVsnY2F0Y2gnXShlbXB0eSk7XG5cdH0pKSwgUFJPTUlTRSwge1xuXHQgIC8vIDI1LjQuNC4xIFByb21pc2UuYWxsKGl0ZXJhYmxlKVxuXHQgIGFsbDogZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKXtcblx0ICAgIHZhciBDICAgICAgICAgID0gdGhpc1xuXHQgICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKVxuXHQgICAgICAsIHJlc29sdmUgICAgPSBjYXBhYmlsaXR5LnJlc29sdmVcblx0ICAgICAgLCByZWplY3QgICAgID0gY2FwYWJpbGl0eS5yZWplY3Q7XG5cdCAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpe1xuXHQgICAgICB2YXIgdmFsdWVzICAgID0gW11cblx0ICAgICAgICAsIGluZGV4ICAgICA9IDBcblx0ICAgICAgICAsIHJlbWFpbmluZyA9IDE7XG5cdCAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7XG5cdCAgICAgICAgdmFyICRpbmRleCAgICAgICAgPSBpbmRleCsrXG5cdCAgICAgICAgICAsIGFscmVhZHlDYWxsZWQgPSBmYWxzZTtcblx0ICAgICAgICB2YWx1ZXMucHVzaCh1bmRlZmluZWQpO1xuXHQgICAgICAgIHJlbWFpbmluZysrO1xuXHQgICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgICAgICAgIGlmKGFscmVhZHlDYWxsZWQpcmV0dXJuO1xuXHQgICAgICAgICAgYWxyZWFkeUNhbGxlZCAgPSB0cnVlO1xuXHQgICAgICAgICAgdmFsdWVzWyRpbmRleF0gPSB2YWx1ZTtcblx0ICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTtcblx0ICAgICAgICB9LCByZWplY3QpO1xuXHQgICAgICB9KTtcblx0ICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpO1xuXHQgICAgfSk7XG5cdCAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7XG5cdCAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlO1xuXHQgIH0sXG5cdCAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKVxuXHQgIHJhY2U6IGZ1bmN0aW9uIHJhY2UoaXRlcmFibGUpe1xuXHQgICAgdmFyIEMgICAgICAgICAgPSB0aGlzXG5cdCAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpXG5cdCAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuXHQgICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXtcblx0ICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbihwcm9taXNlKXtcblx0ICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihjYXBhYmlsaXR5LnJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSk7XG5cdCAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7XG5cdCAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCl7XG5cdCAgaWYoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSB8fCAoZm9yYmlkZGVuRmllbGQgIT09IHVuZGVmaW5lZCAmJiBmb3JiaWRkZW5GaWVsZCBpbiBpdCkpe1xuXHQgICAgdGhyb3cgVHlwZUVycm9yKG5hbWUgKyAnOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEnKTtcblx0ICB9IHJldHVybiBpdDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDI0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGN0eCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Milcblx0ICAsIGNhbGwgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDMpXG5cdCAgLCBpc0FycmF5SXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjA0KVxuXHQgICwgYW5PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICwgdG9MZW5ndGggICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KVxuXHQgICwgZ2V0SXRlckZuICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNilcblx0ICAsIEJSRUFLICAgICAgID0ge31cblx0ICAsIFJFVFVSTiAgICAgID0ge307XG5cdHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYWJsZSwgZW50cmllcywgZm4sIHRoYXQsIElURVJBVE9SKXtcblx0ICB2YXIgaXRlckZuID0gSVRFUkFUT1IgPyBmdW5jdGlvbigpeyByZXR1cm4gaXRlcmFibGU7IH0gOiBnZXRJdGVyRm4oaXRlcmFibGUpXG5cdCAgICAsIGYgICAgICA9IGN0eChmbiwgdGhhdCwgZW50cmllcyA/IDIgOiAxKVxuXHQgICAgLCBpbmRleCAgPSAwXG5cdCAgICAsIGxlbmd0aCwgc3RlcCwgaXRlcmF0b3IsIHJlc3VsdDtcblx0ICBpZih0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ZXJhYmxlICsgJyBpcyBub3QgaXRlcmFibGUhJyk7XG5cdCAgLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yXG5cdCAgaWYoaXNBcnJheUl0ZXIoaXRlckZuKSlmb3IobGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4Kyspe1xuXHQgICAgcmVzdWx0ID0gZW50cmllcyA/IGYoYW5PYmplY3Qoc3RlcCA9IGl0ZXJhYmxlW2luZGV4XSlbMF0sIHN0ZXBbMV0pIDogZihpdGVyYWJsZVtpbmRleF0pO1xuXHQgICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0O1xuXHQgIH0gZWxzZSBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChpdGVyYWJsZSk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgKXtcblx0ICAgIHJlc3VsdCA9IGNhbGwoaXRlcmF0b3IsIGYsIHN0ZXAudmFsdWUsIGVudHJpZXMpO1xuXHQgICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5CUkVBSyAgPSBCUkVBSztcblx0ZXhwb3J0cy5SRVRVUk4gPSBSRVRVUk47XG5cbi8qKiovIH0sXG4vKiAyNDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDcuMy4yMCBTcGVjaWVzQ29uc3RydWN0b3IoTywgZGVmYXVsdENvbnN0cnVjdG9yKVxuXHR2YXIgYW5PYmplY3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpXG5cdCAgLCBTUEVDSUVTICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnc3BlY2llcycpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE8sIEQpe1xuXHQgIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3IsIFM7XG5cdCAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMjUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY3R4ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Milcblx0ICAsIGludm9rZSAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIwKVxuXHQgICwgaHRtbCAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MClcblx0ICAsIGNlbCAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpXG5cdCAgLCBnbG9iYWwgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3Ncblx0ICAsIHNldFRhc2sgICAgICAgICAgICA9IGdsb2JhbC5zZXRJbW1lZGlhdGVcblx0ICAsIGNsZWFyVGFzayAgICAgICAgICA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZVxuXHQgICwgTWVzc2FnZUNoYW5uZWwgICAgID0gZ2xvYmFsLk1lc3NhZ2VDaGFubmVsXG5cdCAgLCBjb3VudGVyICAgICAgICAgICAgPSAwXG5cdCAgLCBxdWV1ZSAgICAgICAgICAgICAgPSB7fVxuXHQgICwgT05SRUFEWVNUQVRFQ0hBTkdFID0gJ29ucmVhZHlzdGF0ZWNoYW5nZSdcblx0ICAsIGRlZmVyLCBjaGFubmVsLCBwb3J0O1xuXHR2YXIgcnVuID0gZnVuY3Rpb24oKXtcblx0ICB2YXIgaWQgPSArdGhpcztcblx0ICBpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpe1xuXHQgICAgdmFyIGZuID0gcXVldWVbaWRdO1xuXHQgICAgZGVsZXRlIHF1ZXVlW2lkXTtcblx0ICAgIGZuKCk7XG5cdCAgfVxuXHR9O1xuXHR2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCl7XG5cdCAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7XG5cdH07XG5cdC8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZTpcblx0aWYoIXNldFRhc2sgfHwgIWNsZWFyVGFzayl7XG5cdCAgc2V0VGFzayA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbil7XG5cdCAgICB2YXIgYXJncyA9IFtdLCBpID0gMTtcblx0ICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7XG5cdCAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24oKXtcblx0ICAgICAgaW52b2tlKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4gOiBGdW5jdGlvbihmbiksIGFyZ3MpO1xuXHQgICAgfTtcblx0ICAgIGRlZmVyKGNvdW50ZXIpO1xuXHQgICAgcmV0dXJuIGNvdW50ZXI7XG5cdCAgfTtcblx0ICBjbGVhclRhc2sgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShpZCl7XG5cdCAgICBkZWxldGUgcXVldWVbaWRdO1xuXHQgIH07XG5cdCAgLy8gTm9kZS5qcyAwLjgtXG5cdCAgaWYoX193ZWJwYWNrX3JlcXVpcmVfXyg3NikocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKXtcblx0ICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuXHQgICAgICBwcm9jZXNzLm5leHRUaWNrKGN0eChydW4sIGlkLCAxKSk7XG5cdCAgICB9O1xuXHQgIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnNcblx0ICB9IGVsc2UgaWYoTWVzc2FnZUNoYW5uZWwpe1xuXHQgICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbDtcblx0ICAgIHBvcnQgICAgPSBjaGFubmVsLnBvcnQyO1xuXHQgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaXN0ZW5lcjtcblx0ICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpO1xuXHQgIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2Vyc1xuXHQgIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnXG5cdCAgfSBlbHNlIGlmKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cyl7XG5cdCAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXtcblx0ICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsICcqJyk7XG5cdCAgICB9O1xuXHQgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpO1xuXHQgIC8vIElFOC1cblx0ICB9IGVsc2UgaWYoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0Jykpe1xuXHQgICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7XG5cdCAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2VsKCdzY3JpcHQnKSlbT05SRUFEWVNUQVRFQ0hBTkdFXSA9IGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTtcblx0ICAgICAgICBydW4uY2FsbChpZCk7XG5cdCAgICAgIH07XG5cdCAgICB9O1xuXHQgIC8vIFJlc3Qgb2xkIGJyb3dzZXJzXG5cdCAgfSBlbHNlIHtcblx0ICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuXHQgICAgICBzZXRUaW1lb3V0KGN0eChydW4sIGlkLCAxKSwgMCk7XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBzZXQ6ICAgc2V0VGFzayxcblx0ICBjbGVhcjogY2xlYXJUYXNrXG5cdH07XG5cbi8qKiovIH0sXG4vKiAyNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnbG9iYWwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgbWFjcm90YXNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNTApLnNldFxuXHQgICwgT2JzZXJ2ZXIgID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXJcblx0ICAsIHByb2Nlc3MgICA9IGdsb2JhbC5wcm9jZXNzXG5cdCAgLCBQcm9taXNlICAgPSBnbG9iYWwuUHJvbWlzZVxuXHQgICwgaXNOb2RlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NikocHJvY2VzcykgPT0gJ3Byb2Nlc3MnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpe1xuXHQgIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7XG5cdFxuXHQgIHZhciBmbHVzaCA9IGZ1bmN0aW9uKCl7XG5cdCAgICB2YXIgcGFyZW50LCBmbjtcblx0ICAgIGlmKGlzTm9kZSAmJiAocGFyZW50ID0gcHJvY2Vzcy5kb21haW4pKXBhcmVudC5leGl0KCk7XG5cdCAgICB3aGlsZShoZWFkKXtcblx0ICAgICAgZm4gICA9IGhlYWQuZm47XG5cdCAgICAgIGhlYWQgPSBoZWFkLm5leHQ7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgZm4oKTtcblx0ICAgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICBpZihoZWFkKW5vdGlmeSgpO1xuXHQgICAgICAgIGVsc2UgbGFzdCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aHJvdyBlO1xuXHQgICAgICB9XG5cdCAgICB9IGxhc3QgPSB1bmRlZmluZWQ7XG5cdCAgICBpZihwYXJlbnQpcGFyZW50LmVudGVyKCk7XG5cdCAgfTtcblx0XG5cdCAgLy8gTm9kZS5qc1xuXHQgIGlmKGlzTm9kZSl7XG5cdCAgICBub3RpZnkgPSBmdW5jdGlvbigpe1xuXHQgICAgICBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcblx0ICAgIH07XG5cdCAgLy8gYnJvd3NlcnMgd2l0aCBNdXRhdGlvbk9ic2VydmVyXG5cdCAgfSBlbHNlIGlmKE9ic2VydmVyKXtcblx0ICAgIHZhciB0b2dnbGUgPSB0cnVlXG5cdCAgICAgICwgbm9kZSAgID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuXHQgICAgbmV3IE9ic2VydmVyKGZsdXNoKS5vYnNlcnZlKG5vZGUsIHtjaGFyYWN0ZXJEYXRhOiB0cnVlfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG5cdCAgICBub3RpZnkgPSBmdW5jdGlvbigpe1xuXHQgICAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAhdG9nZ2xlO1xuXHQgICAgfTtcblx0ICAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZVxuXHQgIH0gZWxzZSBpZihQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSl7XG5cdCAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXHQgICAgbm90aWZ5ID0gZnVuY3Rpb24oKXtcblx0ICAgICAgcHJvbWlzZS50aGVuKGZsdXNoKTtcblx0ICAgIH07XG5cdCAgLy8gZm9yIG90aGVyIGVudmlyb25tZW50cyAtIG1hY3JvdGFzayBiYXNlZCBvbjpcblx0ICAvLyAtIHNldEltbWVkaWF0ZVxuXHQgIC8vIC0gTWVzc2FnZUNoYW5uZWxcblx0ICAvLyAtIHdpbmRvdy5wb3N0TWVzc2FnXG5cdCAgLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2Vcblx0ICAvLyAtIHNldFRpbWVvdXRcblx0ICB9IGVsc2Uge1xuXHQgICAgbm90aWZ5ID0gZnVuY3Rpb24oKXtcblx0ICAgICAgLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKVxuXHQgICAgICBtYWNyb3Rhc2suY2FsbChnbG9iYWwsIGZsdXNoKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24oZm4pe1xuXHQgICAgdmFyIHRhc2sgPSB7Zm46IGZuLCBuZXh0OiB1bmRlZmluZWR9O1xuXHQgICAgaWYobGFzdClsYXN0Lm5leHQgPSB0YXNrO1xuXHQgICAgaWYoIWhlYWQpe1xuXHQgICAgICBoZWFkID0gdGFzaztcblx0ICAgICAgbm90aWZ5KCk7XG5cdCAgICB9IGxhc3QgPSB0YXNrO1xuXHQgIH07XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciByZWRlZmluZSA9IF9fd2VicGFja19yZXF1aXJlX18oNjApO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldCwgc3JjLCBzYWZlKXtcblx0ICBmb3IodmFyIGtleSBpbiBzcmMpcmVkZWZpbmUodGFyZ2V0LCBrZXksIHNyY1trZXldLCBzYWZlKTtcblx0ICByZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMjUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBzdHJvbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1NCk7XG5cdFxuXHQvLyAyMy4xIE1hcCBPYmplY3RzXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNTUpKCdNYXAnLCBmdW5jdGlvbihnZXQpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBNYXAoKXsgcmV0dXJuIGdldCh0aGlzLCBhcmd1bWVudHMubGVuZ3RoID4gMCA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZCk7IH07XG5cdH0sIHtcblx0ICAvLyAyMy4xLjMuNiBNYXAucHJvdG90eXBlLmdldChrZXkpXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KXtcblx0ICAgIHZhciBlbnRyeSA9IHN0cm9uZy5nZXRFbnRyeSh0aGlzLCBrZXkpO1xuXHQgICAgcmV0dXJuIGVudHJ5ICYmIGVudHJ5LnY7XG5cdCAgfSxcblx0ICAvLyAyMy4xLjMuOSBNYXAucHJvdG90eXBlLnNldChrZXksIHZhbHVlKVxuXHQgIHNldDogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpe1xuXHQgICAgcmV0dXJuIHN0cm9uZy5kZWYodGhpcywga2V5ID09PSAwID8gMCA6IGtleSwgdmFsdWUpO1xuXHQgIH1cblx0fSwgc3Ryb25nLCB0cnVlKTtcblxuLyoqKi8gfSxcbi8qIDI1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgZFAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKS5mXG5cdCAgLCBjcmVhdGUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODgpXG5cdCAgLCByZWRlZmluZUFsbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUyKVxuXHQgICwgY3R4ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKVxuXHQgICwgYW5JbnN0YW5jZSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0Nylcblx0ICAsIGRlZmluZWQgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nylcblx0ICAsIGZvck9mICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDgpXG5cdCAgLCAkaXRlckRlZmluZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcwKVxuXHQgICwgc3RlcCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNilcblx0ICAsIHNldFNwZWNpZXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMzQpXG5cdCAgLCBERVNDUklQVE9SUyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpXG5cdCAgLCBmYXN0S2V5ICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpLmZhc3RLZXlcblx0ICAsIFNJWkUgICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX3MnIDogJ3NpemUnO1xuXHRcblx0dmFyIGdldEVudHJ5ID0gZnVuY3Rpb24odGhhdCwga2V5KXtcblx0ICAvLyBmYXN0IGNhc2Vcblx0ICB2YXIgaW5kZXggPSBmYXN0S2V5KGtleSksIGVudHJ5O1xuXHQgIGlmKGluZGV4ICE9PSAnRicpcmV0dXJuIHRoYXQuX2lbaW5kZXhdO1xuXHQgIC8vIGZyb3plbiBvYmplY3QgY2FzZVxuXHQgIGZvcihlbnRyeSA9IHRoYXQuX2Y7IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm4pe1xuXHQgICAgaWYoZW50cnkuayA9PSBrZXkpcmV0dXJuIGVudHJ5O1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIGdldENvbnN0cnVjdG9yOiBmdW5jdGlvbih3cmFwcGVyLCBOQU1FLCBJU19NQVAsIEFEREVSKXtcblx0ICAgIHZhciBDID0gd3JhcHBlcihmdW5jdGlvbih0aGF0LCBpdGVyYWJsZSl7XG5cdCAgICAgIGFuSW5zdGFuY2UodGhhdCwgQywgTkFNRSwgJ19pJyk7XG5cdCAgICAgIHRoYXQuX2kgPSBjcmVhdGUobnVsbCk7IC8vIGluZGV4XG5cdCAgICAgIHRoYXQuX2YgPSB1bmRlZmluZWQ7ICAgIC8vIGZpcnN0IGVudHJ5XG5cdCAgICAgIHRoYXQuX2wgPSB1bmRlZmluZWQ7ICAgIC8vIGxhc3QgZW50cnlcblx0ICAgICAgdGhhdFtTSVpFXSA9IDA7ICAgICAgICAgLy8gc2l6ZVxuXHQgICAgICBpZihpdGVyYWJsZSAhPSB1bmRlZmluZWQpZm9yT2YoaXRlcmFibGUsIElTX01BUCwgdGhhdFtBRERFUl0sIHRoYXQpO1xuXHQgICAgfSk7XG5cdCAgICByZWRlZmluZUFsbChDLnByb3RvdHlwZSwge1xuXHQgICAgICAvLyAyMy4xLjMuMSBNYXAucHJvdG90eXBlLmNsZWFyKClcblx0ICAgICAgLy8gMjMuMi4zLjIgU2V0LnByb3RvdHlwZS5jbGVhcigpXG5cdCAgICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpe1xuXHQgICAgICAgIGZvcih2YXIgdGhhdCA9IHRoaXMsIGRhdGEgPSB0aGF0Ll9pLCBlbnRyeSA9IHRoYXQuX2Y7IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm4pe1xuXHQgICAgICAgICAgZW50cnkuciA9IHRydWU7XG5cdCAgICAgICAgICBpZihlbnRyeS5wKWVudHJ5LnAgPSBlbnRyeS5wLm4gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICBkZWxldGUgZGF0YVtlbnRyeS5pXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhhdC5fZiA9IHRoYXQuX2wgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhhdFtTSVpFXSA9IDA7XG5cdCAgICAgIH0sXG5cdCAgICAgIC8vIDIzLjEuMy4zIE1hcC5wcm90b3R5cGUuZGVsZXRlKGtleSlcblx0ICAgICAgLy8gMjMuMi4zLjQgU2V0LnByb3RvdHlwZS5kZWxldGUodmFsdWUpXG5cdCAgICAgICdkZWxldGUnOiBmdW5jdGlvbihrZXkpe1xuXHQgICAgICAgIHZhciB0aGF0ICA9IHRoaXNcblx0ICAgICAgICAgICwgZW50cnkgPSBnZXRFbnRyeSh0aGF0LCBrZXkpO1xuXHQgICAgICAgIGlmKGVudHJ5KXtcblx0ICAgICAgICAgIHZhciBuZXh0ID0gZW50cnkublxuXHQgICAgICAgICAgICAsIHByZXYgPSBlbnRyeS5wO1xuXHQgICAgICAgICAgZGVsZXRlIHRoYXQuX2lbZW50cnkuaV07XG5cdCAgICAgICAgICBlbnRyeS5yID0gdHJ1ZTtcblx0ICAgICAgICAgIGlmKHByZXYpcHJldi5uID0gbmV4dDtcblx0ICAgICAgICAgIGlmKG5leHQpbmV4dC5wID0gcHJldjtcblx0ICAgICAgICAgIGlmKHRoYXQuX2YgPT0gZW50cnkpdGhhdC5fZiA9IG5leHQ7XG5cdCAgICAgICAgICBpZih0aGF0Ll9sID09IGVudHJ5KXRoYXQuX2wgPSBwcmV2O1xuXHQgICAgICAgICAgdGhhdFtTSVpFXS0tO1xuXHQgICAgICAgIH0gcmV0dXJuICEhZW50cnk7XG5cdCAgICAgIH0sXG5cdCAgICAgIC8vIDIzLjIuMy42IFNldC5wcm90b3R5cGUuZm9yRWFjaChjYWxsYmFja2ZuLCB0aGlzQXJnID0gdW5kZWZpbmVkKVxuXHQgICAgICAvLyAyMy4xLjMuNSBNYXAucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiwgdGhpc0FyZyA9IHVuZGVmaW5lZClcblx0ICAgICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFja2ZuIC8qLCB0aGF0ID0gdW5kZWZpbmVkICovKXtcblx0ICAgICAgICBhbkluc3RhbmNlKHRoaXMsIEMsICdmb3JFYWNoJyk7XG5cdCAgICAgICAgdmFyIGYgPSBjdHgoY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIDMpXG5cdCAgICAgICAgICAsIGVudHJ5O1xuXHQgICAgICAgIHdoaWxlKGVudHJ5ID0gZW50cnkgPyBlbnRyeS5uIDogdGhpcy5fZil7XG5cdCAgICAgICAgICBmKGVudHJ5LnYsIGVudHJ5LmssIHRoaXMpO1xuXHQgICAgICAgICAgLy8gcmV2ZXJ0IHRvIHRoZSBsYXN0IGV4aXN0aW5nIGVudHJ5XG5cdCAgICAgICAgICB3aGlsZShlbnRyeSAmJiBlbnRyeS5yKWVudHJ5ID0gZW50cnkucDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdCAgICAgIC8vIDIzLjEuMy43IE1hcC5wcm90b3R5cGUuaGFzKGtleSlcblx0ICAgICAgLy8gMjMuMi4zLjcgU2V0LnByb3RvdHlwZS5oYXModmFsdWUpXG5cdCAgICAgIGhhczogZnVuY3Rpb24gaGFzKGtleSl7XG5cdCAgICAgICAgcmV0dXJuICEhZ2V0RW50cnkodGhpcywga2V5KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICBpZihERVNDUklQVE9SUylkUChDLnByb3RvdHlwZSwgJ3NpemUnLCB7XG5cdCAgICAgIGdldDogZnVuY3Rpb24oKXtcblx0ICAgICAgICByZXR1cm4gZGVmaW5lZCh0aGlzW1NJWkVdKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gQztcblx0ICB9LFxuXHQgIGRlZjogZnVuY3Rpb24odGhhdCwga2V5LCB2YWx1ZSl7XG5cdCAgICB2YXIgZW50cnkgPSBnZXRFbnRyeSh0aGF0LCBrZXkpXG5cdCAgICAgICwgcHJldiwgaW5kZXg7XG5cdCAgICAvLyBjaGFuZ2UgZXhpc3RpbmcgZW50cnlcblx0ICAgIGlmKGVudHJ5KXtcblx0ICAgICAgZW50cnkudiA9IHZhbHVlO1xuXHQgICAgLy8gY3JlYXRlIG5ldyBlbnRyeVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhhdC5fbCA9IGVudHJ5ID0ge1xuXHQgICAgICAgIGk6IGluZGV4ID0gZmFzdEtleShrZXksIHRydWUpLCAvLyA8LSBpbmRleFxuXHQgICAgICAgIGs6IGtleSwgICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSBrZXlcblx0ICAgICAgICB2OiB2YWx1ZSwgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gdmFsdWVcblx0ICAgICAgICBwOiBwcmV2ID0gdGhhdC5fbCwgICAgICAgICAgICAgLy8gPC0gcHJldmlvdXMgZW50cnlcblx0ICAgICAgICBuOiB1bmRlZmluZWQsICAgICAgICAgICAgICAgICAgLy8gPC0gbmV4dCBlbnRyeVxuXHQgICAgICAgIHI6IGZhbHNlICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSByZW1vdmVkXG5cdCAgICAgIH07XG5cdCAgICAgIGlmKCF0aGF0Ll9mKXRoYXQuX2YgPSBlbnRyeTtcblx0ICAgICAgaWYocHJldilwcmV2Lm4gPSBlbnRyeTtcblx0ICAgICAgdGhhdFtTSVpFXSsrO1xuXHQgICAgICAvLyBhZGQgdG8gaW5kZXhcblx0ICAgICAgaWYoaW5kZXggIT09ICdGJyl0aGF0Ll9pW2luZGV4XSA9IGVudHJ5O1xuXHQgICAgfSByZXR1cm4gdGhhdDtcblx0ICB9LFxuXHQgIGdldEVudHJ5OiBnZXRFbnRyeSxcblx0ICBzZXRTdHJvbmc6IGZ1bmN0aW9uKEMsIE5BTUUsIElTX01BUCl7XG5cdCAgICAvLyBhZGQgLmtleXMsIC52YWx1ZXMsIC5lbnRyaWVzLCBbQEBpdGVyYXRvcl1cblx0ICAgIC8vIDIzLjEuMy40LCAyMy4xLjMuOCwgMjMuMS4zLjExLCAyMy4xLjMuMTIsIDIzLjIuMy41LCAyMy4yLjMuOCwgMjMuMi4zLjEwLCAyMy4yLjMuMTFcblx0ICAgICRpdGVyRGVmaW5lKEMsIE5BTUUsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXtcblx0ICAgICAgdGhpcy5fdCA9IGl0ZXJhdGVkOyAgLy8gdGFyZ2V0XG5cdCAgICAgIHRoaXMuX2sgPSBraW5kOyAgICAgIC8vIGtpbmRcblx0ICAgICAgdGhpcy5fbCA9IHVuZGVmaW5lZDsgLy8gcHJldmlvdXNcblx0ICAgIH0sIGZ1bmN0aW9uKCl7XG5cdCAgICAgIHZhciB0aGF0ICA9IHRoaXNcblx0ICAgICAgICAsIGtpbmQgID0gdGhhdC5fa1xuXHQgICAgICAgICwgZW50cnkgPSB0aGF0Ll9sO1xuXHQgICAgICAvLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnlcblx0ICAgICAgd2hpbGUoZW50cnkgJiYgZW50cnkucillbnRyeSA9IGVudHJ5LnA7XG5cdCAgICAgIC8vIGdldCBuZXh0IGVudHJ5XG5cdCAgICAgIGlmKCF0aGF0Ll90IHx8ICEodGhhdC5fbCA9IGVudHJ5ID0gZW50cnkgPyBlbnRyeS5uIDogdGhhdC5fdC5fZikpe1xuXHQgICAgICAgIC8vIG9yIGZpbmlzaCB0aGUgaXRlcmF0aW9uXG5cdCAgICAgICAgdGhhdC5fdCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICByZXR1cm4gc3RlcCgxKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyByZXR1cm4gc3RlcCBieSBraW5kXG5cdCAgICAgIGlmKGtpbmQgPT0gJ2tleXMnICApcmV0dXJuIHN0ZXAoMCwgZW50cnkuayk7XG5cdCAgICAgIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgZW50cnkudik7XG5cdCAgICAgIHJldHVybiBzdGVwKDAsIFtlbnRyeS5rLCBlbnRyeS52XSk7XG5cdCAgICB9LCBJU19NQVAgPyAnZW50cmllcycgOiAndmFsdWVzJyAsICFJU19NQVAsIHRydWUpO1xuXHRcblx0ICAgIC8vIGFkZCBbQEBzcGVjaWVzXSwgMjMuMS4yLjIsIDIzLjIuMi4yXG5cdCAgICBzZXRTcGVjaWVzKE5BTUUpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDI1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgZ2xvYmFsICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgJGV4cG9ydCAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgcmVkZWZpbmUgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKVxuXHQgICwgcmVkZWZpbmVBbGwgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1Milcblx0ICAsIG1ldGEgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NClcblx0ICAsIGZvck9mICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDgpXG5cdCAgLCBhbkluc3RhbmNlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQ3KVxuXHQgICwgaXNPYmplY3QgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KVxuXHQgICwgZmFpbHMgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KVxuXHQgICwgJGl0ZXJEZXRlY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNylcblx0ICAsIHNldFRvU3RyaW5nVGFnICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nilcblx0ICAsIGluaGVyaXRJZlJlcXVpcmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihOQU1FLCB3cmFwcGVyLCBtZXRob2RzLCBjb21tb24sIElTX01BUCwgSVNfV0VBSyl7XG5cdCAgdmFyIEJhc2UgID0gZ2xvYmFsW05BTUVdXG5cdCAgICAsIEMgICAgID0gQmFzZVxuXHQgICAgLCBBRERFUiA9IElTX01BUCA/ICdzZXQnIDogJ2FkZCdcblx0ICAgICwgcHJvdG8gPSBDICYmIEMucHJvdG90eXBlXG5cdCAgICAsIE8gICAgID0ge307XG5cdCAgdmFyIGZpeE1ldGhvZCA9IGZ1bmN0aW9uKEtFWSl7XG5cdCAgICB2YXIgZm4gPSBwcm90b1tLRVldO1xuXHQgICAgcmVkZWZpbmUocHJvdG8sIEtFWSxcblx0ICAgICAgS0VZID09ICdkZWxldGUnID8gZnVuY3Rpb24oYSl7XG5cdCAgICAgICAgcmV0dXJuIElTX1dFQUsgJiYgIWlzT2JqZWN0KGEpID8gZmFsc2UgOiBmbi5jYWxsKHRoaXMsIGEgPT09IDAgPyAwIDogYSk7XG5cdCAgICAgIH0gOiBLRVkgPT0gJ2hhcycgPyBmdW5jdGlvbiBoYXMoYSl7XG5cdCAgICAgICAgcmV0dXJuIElTX1dFQUsgJiYgIWlzT2JqZWN0KGEpID8gZmFsc2UgOiBmbi5jYWxsKHRoaXMsIGEgPT09IDAgPyAwIDogYSk7XG5cdCAgICAgIH0gOiBLRVkgPT0gJ2dldCcgPyBmdW5jdGlvbiBnZXQoYSl7XG5cdCAgICAgICAgcmV0dXJuIElTX1dFQUsgJiYgIWlzT2JqZWN0KGEpID8gdW5kZWZpbmVkIDogZm4uY2FsbCh0aGlzLCBhID09PSAwID8gMCA6IGEpO1xuXHQgICAgICB9IDogS0VZID09ICdhZGQnID8gZnVuY3Rpb24gYWRkKGEpeyBmbi5jYWxsKHRoaXMsIGEgPT09IDAgPyAwIDogYSk7IHJldHVybiB0aGlzOyB9XG5cdCAgICAgICAgOiBmdW5jdGlvbiBzZXQoYSwgYil7IGZuLmNhbGwodGhpcywgYSA9PT0gMCA/IDAgOiBhLCBiKTsgcmV0dXJuIHRoaXM7IH1cblx0ICAgICk7XG5cdCAgfTtcblx0ICBpZih0eXBlb2YgQyAhPSAnZnVuY3Rpb24nIHx8ICEoSVNfV0VBSyB8fCBwcm90by5mb3JFYWNoICYmICFmYWlscyhmdW5jdGlvbigpe1xuXHQgICAgbmV3IEMoKS5lbnRyaWVzKCkubmV4dCgpO1xuXHQgIH0pKSl7XG5cdCAgICAvLyBjcmVhdGUgY29sbGVjdGlvbiBjb25zdHJ1Y3RvclxuXHQgICAgQyA9IGNvbW1vbi5nZXRDb25zdHJ1Y3Rvcih3cmFwcGVyLCBOQU1FLCBJU19NQVAsIEFEREVSKTtcblx0ICAgIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLCBtZXRob2RzKTtcblx0ICAgIG1ldGEuTkVFRCA9IHRydWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBpbnN0YW5jZSAgICAgICAgICAgICA9IG5ldyBDXG5cdCAgICAgIC8vIGVhcmx5IGltcGxlbWVudGF0aW9ucyBub3Qgc3VwcG9ydHMgY2hhaW5pbmdcblx0ICAgICAgLCBIQVNOVF9DSEFJTklORyAgICAgICA9IGluc3RhbmNlW0FEREVSXShJU19XRUFLID8ge30gOiAtMCwgMSkgIT0gaW5zdGFuY2Vcblx0ICAgICAgLy8gVjggfiAgQ2hyb21pdW0gNDAtIHdlYWstY29sbGVjdGlvbnMgdGhyb3dzIG9uIHByaW1pdGl2ZXMsIGJ1dCBzaG91bGQgcmV0dXJuIGZhbHNlXG5cdCAgICAgICwgVEhST1dTX09OX1BSSU1JVElWRVMgPSBmYWlscyhmdW5jdGlvbigpeyBpbnN0YW5jZS5oYXMoMSk7IH0pXG5cdCAgICAgIC8vIG1vc3QgZWFybHkgaW1wbGVtZW50YXRpb25zIGRvZXNuJ3Qgc3VwcG9ydHMgaXRlcmFibGVzLCBtb3N0IG1vZGVybiAtIG5vdCBjbG9zZSBpdCBjb3JyZWN0bHlcblx0ICAgICAgLCBBQ0NFUFRfSVRFUkFCTEVTICAgICA9ICRpdGVyRGV0ZWN0KGZ1bmN0aW9uKGl0ZXIpeyBuZXcgQyhpdGVyKTsgfSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcblx0ICAgICAgLy8gZm9yIGVhcmx5IGltcGxlbWVudGF0aW9ucyAtMCBhbmQgKzAgbm90IHRoZSBzYW1lXG5cdCAgICAgICwgQlVHR1lfWkVSTyA9ICFJU19XRUFLICYmIGZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgLy8gVjggfiBDaHJvbWl1bSA0Mi0gZmFpbHMgb25seSB3aXRoIDUrIGVsZW1lbnRzXG5cdCAgICAgICAgdmFyICRpbnN0YW5jZSA9IG5ldyBDKClcblx0ICAgICAgICAgICwgaW5kZXggICAgID0gNTtcblx0ICAgICAgICB3aGlsZShpbmRleC0tKSRpbnN0YW5jZVtBRERFUl0oaW5kZXgsIGluZGV4KTtcblx0ICAgICAgICByZXR1cm4gISRpbnN0YW5jZS5oYXMoLTApO1xuXHQgICAgICB9KTtcblx0ICAgIGlmKCFBQ0NFUFRfSVRFUkFCTEVTKXsgXG5cdCAgICAgIEMgPSB3cmFwcGVyKGZ1bmN0aW9uKHRhcmdldCwgaXRlcmFibGUpe1xuXHQgICAgICAgIGFuSW5zdGFuY2UodGFyZ2V0LCBDLCBOQU1FKTtcblx0ICAgICAgICB2YXIgdGhhdCA9IGluaGVyaXRJZlJlcXVpcmVkKG5ldyBCYXNlLCB0YXJnZXQsIEMpO1xuXHQgICAgICAgIGlmKGl0ZXJhYmxlICE9IHVuZGVmaW5lZClmb3JPZihpdGVyYWJsZSwgSVNfTUFQLCB0aGF0W0FEREVSXSwgdGhhdCk7XG5cdCAgICAgICAgcmV0dXJuIHRoYXQ7XG5cdCAgICAgIH0pO1xuXHQgICAgICBDLnByb3RvdHlwZSA9IHByb3RvO1xuXHQgICAgICBwcm90by5jb25zdHJ1Y3RvciA9IEM7XG5cdCAgICB9XG5cdCAgICBpZihUSFJPV1NfT05fUFJJTUlUSVZFUyB8fCBCVUdHWV9aRVJPKXtcblx0ICAgICAgZml4TWV0aG9kKCdkZWxldGUnKTtcblx0ICAgICAgZml4TWV0aG9kKCdoYXMnKTtcblx0ICAgICAgSVNfTUFQICYmIGZpeE1ldGhvZCgnZ2V0Jyk7XG5cdCAgICB9XG5cdCAgICBpZihCVUdHWV9aRVJPIHx8IEhBU05UX0NIQUlOSU5HKWZpeE1ldGhvZChBRERFUik7XG5cdCAgICAvLyB3ZWFrIGNvbGxlY3Rpb25zIHNob3VsZCBub3QgY29udGFpbnMgLmNsZWFyIG1ldGhvZFxuXHQgICAgaWYoSVNfV0VBSyAmJiBwcm90by5jbGVhcilkZWxldGUgcHJvdG8uY2xlYXI7XG5cdCAgfVxuXHRcblx0ICBzZXRUb1N0cmluZ1RhZyhDLCBOQU1FKTtcblx0XG5cdCAgT1tOQU1FXSA9IEM7XG5cdCAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAoQyAhPSBCYXNlKSwgTyk7XG5cdFxuXHQgIGlmKCFJU19XRUFLKWNvbW1vbi5zZXRTdHJvbmcoQywgTkFNRSwgSVNfTUFQKTtcblx0XG5cdCAgcmV0dXJuIEM7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyNTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIHN0cm9uZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjU0KTtcblx0XG5cdC8vIDIzLjIgU2V0IE9iamVjdHNcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1NSkoJ1NldCcsIGZ1bmN0aW9uKGdldCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIFNldCgpeyByZXR1cm4gZ2V0KHRoaXMsIGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTsgfTtcblx0fSwge1xuXHQgIC8vIDIzLjIuMy4xIFNldC5wcm90b3R5cGUuYWRkKHZhbHVlKVxuXHQgIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKXtcblx0ICAgIHJldHVybiBzdHJvbmcuZGVmKHRoaXMsIHZhbHVlID0gdmFsdWUgPT09IDAgPyAwIDogdmFsdWUsIHZhbHVlKTtcblx0ICB9XG5cdH0sIHN0cm9uZyk7XG5cbi8qKiovIH0sXG4vKiAyNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIGVhY2ggICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjE0KSgwKVxuXHQgICwgcmVkZWZpbmUgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MClcblx0ICAsIG1ldGEgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpXG5cdCAgLCBhc3NpZ24gICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSlcblx0ICAsIHdlYWsgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjU4KVxuXHQgICwgaXNPYmplY3QgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAsIGdldFdlYWsgICAgICA9IG1ldGEuZ2V0V2Vha1xuXHQgICwgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZVxuXHQgICwgdW5jYXVnaHRGcm96ZW5TdG9yZSA9IHdlYWsudWZzdG9yZVxuXHQgICwgdG1wICAgICAgICAgID0ge31cblx0ICAsIEludGVybmFsTWFwO1xuXHRcblx0dmFyIHdyYXBwZXIgPSBmdW5jdGlvbihnZXQpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBXZWFrTWFwKCl7XG5cdCAgICByZXR1cm4gZ2V0KHRoaXMsIGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTtcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIG1ldGhvZHMgPSB7XG5cdCAgLy8gMjMuMy4zLjMgV2Vha01hcC5wcm90b3R5cGUuZ2V0KGtleSlcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldChrZXkpe1xuXHQgICAgaWYoaXNPYmplY3Qoa2V5KSl7XG5cdCAgICAgIHZhciBkYXRhID0gZ2V0V2VhayhrZXkpO1xuXHQgICAgICBpZihkYXRhID09PSB0cnVlKXJldHVybiB1bmNhdWdodEZyb3plblN0b3JlKHRoaXMpLmdldChrZXkpO1xuXHQgICAgICByZXR1cm4gZGF0YSA/IGRhdGFbdGhpcy5faV0gOiB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgfSxcblx0ICAvLyAyMy4zLjMuNSBXZWFrTWFwLnByb3RvdHlwZS5zZXQoa2V5LCB2YWx1ZSlcblx0ICBzZXQ6IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKXtcblx0ICAgIHJldHVybiB3ZWFrLmRlZih0aGlzLCBrZXksIHZhbHVlKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyAyMy4zIFdlYWtNYXAgT2JqZWN0c1xuXHR2YXIgJFdlYWtNYXAgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjU1KSgnV2Vha01hcCcsIHdyYXBwZXIsIG1ldGhvZHMsIHdlYWssIHRydWUsIHRydWUpO1xuXHRcblx0Ly8gSUUxMSBXZWFrTWFwIGZyb3plbiBrZXlzIGZpeFxuXHRpZihuZXcgJFdlYWtNYXAoKS5zZXQoKE9iamVjdC5mcmVlemUgfHwgT2JqZWN0KSh0bXApLCA3KS5nZXQodG1wKSAhPSA3KXtcblx0ICBJbnRlcm5hbE1hcCA9IHdlYWsuZ2V0Q29uc3RydWN0b3Iod3JhcHBlcik7XG5cdCAgYXNzaWduKEludGVybmFsTWFwLnByb3RvdHlwZSwgbWV0aG9kcyk7XG5cdCAgbWV0YS5ORUVEID0gdHJ1ZTtcblx0ICBlYWNoKFsnZGVsZXRlJywgJ2hhcycsICdnZXQnLCAnc2V0J10sIGZ1bmN0aW9uKGtleSl7XG5cdCAgICB2YXIgcHJvdG8gID0gJFdlYWtNYXAucHJvdG90eXBlXG5cdCAgICAgICwgbWV0aG9kID0gcHJvdG9ba2V5XTtcblx0ICAgIHJlZGVmaW5lKHByb3RvLCBrZXksIGZ1bmN0aW9uKGEsIGIpe1xuXHQgICAgICAvLyBzdG9yZSBmcm96ZW4gb2JqZWN0cyBvbiBpbnRlcm5hbCB3ZWFrbWFwIHNoaW1cblx0ICAgICAgaWYoaXNPYmplY3QoYSkgJiYgIWlzRXh0ZW5zaWJsZShhKSl7XG5cdCAgICAgICAgaWYoIXRoaXMuX2YpdGhpcy5fZiA9IG5ldyBJbnRlcm5hbE1hcDtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fZltrZXldKGEsIGIpO1xuXHQgICAgICAgIHJldHVybiBrZXkgPT0gJ3NldCcgPyB0aGlzIDogcmVzdWx0O1xuXHQgICAgICAvLyBzdG9yZSBhbGwgdGhlIHJlc3Qgb24gbmF0aXZlIHdlYWttYXBcblx0ICAgICAgfSByZXR1cm4gbWV0aG9kLmNhbGwodGhpcywgYSwgYik7XG5cdCAgICB9KTtcblx0ICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciByZWRlZmluZUFsbCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUyKVxuXHQgICwgZ2V0V2VhayAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KS5nZXRXZWFrXG5cdCAgLCBhbk9iamVjdCAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBpc09iamVjdCAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgLCBhbkluc3RhbmNlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQ3KVxuXHQgICwgZm9yT2YgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0OClcblx0ICAsIGNyZWF0ZUFycmF5TWV0aG9kID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTQpXG5cdCAgLCAkaGFzICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgLCBhcnJheUZpbmQgICAgICAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDUpXG5cdCAgLCBhcnJheUZpbmRJbmRleCAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDYpXG5cdCAgLCBpZCAgICAgICAgICAgICAgICA9IDA7XG5cdFxuXHQvLyBmYWxsYmFjayBmb3IgdW5jYXVnaHQgZnJvemVuIGtleXNcblx0dmFyIHVuY2F1Z2h0RnJvemVuU3RvcmUgPSBmdW5jdGlvbih0aGF0KXtcblx0ICByZXR1cm4gdGhhdC5fbCB8fCAodGhhdC5fbCA9IG5ldyBVbmNhdWdodEZyb3plblN0b3JlKTtcblx0fTtcblx0dmFyIFVuY2F1Z2h0RnJvemVuU3RvcmUgPSBmdW5jdGlvbigpe1xuXHQgIHRoaXMuYSA9IFtdO1xuXHR9O1xuXHR2YXIgZmluZFVuY2F1Z2h0RnJvemVuID0gZnVuY3Rpb24oc3RvcmUsIGtleSl7XG5cdCAgcmV0dXJuIGFycmF5RmluZChzdG9yZS5hLCBmdW5jdGlvbihpdCl7XG5cdCAgICByZXR1cm4gaXRbMF0gPT09IGtleTtcblx0ICB9KTtcblx0fTtcblx0VW5jYXVnaHRGcm96ZW5TdG9yZS5wcm90b3R5cGUgPSB7XG5cdCAgZ2V0OiBmdW5jdGlvbihrZXkpe1xuXHQgICAgdmFyIGVudHJ5ID0gZmluZFVuY2F1Z2h0RnJvemVuKHRoaXMsIGtleSk7XG5cdCAgICBpZihlbnRyeSlyZXR1cm4gZW50cnlbMV07XG5cdCAgfSxcblx0ICBoYXM6IGZ1bmN0aW9uKGtleSl7XG5cdCAgICByZXR1cm4gISFmaW5kVW5jYXVnaHRGcm96ZW4odGhpcywga2V5KTtcblx0ICB9LFxuXHQgIHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG5cdCAgICB2YXIgZW50cnkgPSBmaW5kVW5jYXVnaHRGcm96ZW4odGhpcywga2V5KTtcblx0ICAgIGlmKGVudHJ5KWVudHJ5WzFdID0gdmFsdWU7XG5cdCAgICBlbHNlIHRoaXMuYS5wdXNoKFtrZXksIHZhbHVlXSk7XG5cdCAgfSxcblx0ICAnZGVsZXRlJzogZnVuY3Rpb24oa2V5KXtcblx0ICAgIHZhciBpbmRleCA9IGFycmF5RmluZEluZGV4KHRoaXMuYSwgZnVuY3Rpb24oaXQpe1xuXHQgICAgICByZXR1cm4gaXRbMF0gPT09IGtleTtcblx0ICAgIH0pO1xuXHQgICAgaWYofmluZGV4KXRoaXMuYS5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgcmV0dXJuICEhfmluZGV4O1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIGdldENvbnN0cnVjdG9yOiBmdW5jdGlvbih3cmFwcGVyLCBOQU1FLCBJU19NQVAsIEFEREVSKXtcblx0ICAgIHZhciBDID0gd3JhcHBlcihmdW5jdGlvbih0aGF0LCBpdGVyYWJsZSl7XG5cdCAgICAgIGFuSW5zdGFuY2UodGhhdCwgQywgTkFNRSwgJ19pJyk7XG5cdCAgICAgIHRoYXQuX2kgPSBpZCsrOyAgICAgIC8vIGNvbGxlY3Rpb24gaWRcblx0ICAgICAgdGhhdC5fbCA9IHVuZGVmaW5lZDsgLy8gbGVhayBzdG9yZSBmb3IgdW5jYXVnaHQgZnJvemVuIG9iamVjdHNcblx0ICAgICAgaWYoaXRlcmFibGUgIT0gdW5kZWZpbmVkKWZvck9mKGl0ZXJhYmxlLCBJU19NQVAsIHRoYXRbQURERVJdLCB0aGF0KTtcblx0ICAgIH0pO1xuXHQgICAgcmVkZWZpbmVBbGwoQy5wcm90b3R5cGUsIHtcblx0ICAgICAgLy8gMjMuMy4zLjIgV2Vha01hcC5wcm90b3R5cGUuZGVsZXRlKGtleSlcblx0ICAgICAgLy8gMjMuNC4zLjMgV2Vha1NldC5wcm90b3R5cGUuZGVsZXRlKHZhbHVlKVxuXHQgICAgICAnZGVsZXRlJzogZnVuY3Rpb24oa2V5KXtcblx0ICAgICAgICBpZighaXNPYmplY3Qoa2V5KSlyZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgdmFyIGRhdGEgPSBnZXRXZWFrKGtleSk7XG5cdCAgICAgICAgaWYoZGF0YSA9PT0gdHJ1ZSlyZXR1cm4gdW5jYXVnaHRGcm96ZW5TdG9yZSh0aGlzKVsnZGVsZXRlJ10oa2V5KTtcblx0ICAgICAgICByZXR1cm4gZGF0YSAmJiAkaGFzKGRhdGEsIHRoaXMuX2kpICYmIGRlbGV0ZSBkYXRhW3RoaXMuX2ldO1xuXHQgICAgICB9LFxuXHQgICAgICAvLyAyMy4zLjMuNCBXZWFrTWFwLnByb3RvdHlwZS5oYXMoa2V5KVxuXHQgICAgICAvLyAyMy40LjMuNCBXZWFrU2V0LnByb3RvdHlwZS5oYXModmFsdWUpXG5cdCAgICAgIGhhczogZnVuY3Rpb24gaGFzKGtleSl7XG5cdCAgICAgICAgaWYoIWlzT2JqZWN0KGtleSkpcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIHZhciBkYXRhID0gZ2V0V2VhayhrZXkpO1xuXHQgICAgICAgIGlmKGRhdGEgPT09IHRydWUpcmV0dXJuIHVuY2F1Z2h0RnJvemVuU3RvcmUodGhpcykuaGFzKGtleSk7XG5cdCAgICAgICAgcmV0dXJuIGRhdGEgJiYgJGhhcyhkYXRhLCB0aGlzLl9pKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gQztcblx0ICB9LFxuXHQgIGRlZjogZnVuY3Rpb24odGhhdCwga2V5LCB2YWx1ZSl7XG5cdCAgICB2YXIgZGF0YSA9IGdldFdlYWsoYW5PYmplY3Qoa2V5KSwgdHJ1ZSk7XG5cdCAgICBpZihkYXRhID09PSB0cnVlKXVuY2F1Z2h0RnJvemVuU3RvcmUodGhhdCkuc2V0KGtleSwgdmFsdWUpO1xuXHQgICAgZWxzZSBkYXRhW3RoYXQuX2ldID0gdmFsdWU7XG5cdCAgICByZXR1cm4gdGhhdDtcblx0ICB9LFxuXHQgIHVmc3RvcmU6IHVuY2F1Z2h0RnJvemVuU3RvcmVcblx0fTtcblxuLyoqKi8gfSxcbi8qIDI1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgd2VhayA9IF9fd2VicGFja19yZXF1aXJlX18oMjU4KTtcblx0XG5cdC8vIDIzLjQgV2Vha1NldCBPYmplY3RzXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjU1KSgnV2Vha1NldCcsIGZ1bmN0aW9uKGdldCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIFdlYWtTZXQoKXsgcmV0dXJuIGdldCh0aGlzLCBhcmd1bWVudHMubGVuZ3RoID4gMCA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZCk7IH07XG5cdH0sIHtcblx0ICAvLyAyMy40LjMuMSBXZWFrU2V0LnByb3RvdHlwZS5hZGQodmFsdWUpXG5cdCAgYWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpe1xuXHQgICAgcmV0dXJuIHdlYWsuZGVmKHRoaXMsIHZhbHVlLCB0cnVlKTtcblx0ICB9XG5cdH0sIHdlYWssIGZhbHNlLCB0cnVlKTtcblxuLyoqKi8gfSxcbi8qIDI2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICR0eXBlZCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYxKVxuXHQgICwgYnVmZmVyICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNjIpXG5cdCAgLCBhbk9iamVjdCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICwgdG9JbmRleCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSlcblx0ICAsIHRvTGVuZ3RoICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgLCBpc09iamVjdCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KVxuXHQgICwgQXJyYXlCdWZmZXIgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NikuQXJyYXlCdWZmZXJcblx0ICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oMjQ5KVxuXHQgICwgJEFycmF5QnVmZmVyID0gYnVmZmVyLkFycmF5QnVmZmVyXG5cdCAgLCAkRGF0YVZpZXcgICAgPSBidWZmZXIuRGF0YVZpZXdcblx0ICAsICRpc1ZpZXcgICAgICA9ICR0eXBlZC5BQlYgJiYgQXJyYXlCdWZmZXIuaXNWaWV3XG5cdCAgLCAkc2xpY2UgICAgICAgPSAkQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlXG5cdCAgLCBWSUVXICAgICAgICAgPSAkdHlwZWQuVklFV1xuXHQgICwgQVJSQVlfQlVGRkVSID0gJ0FycmF5QnVmZmVyJztcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogKEFycmF5QnVmZmVyICE9PSAkQXJyYXlCdWZmZXIpLCB7QXJyYXlCdWZmZXI6ICRBcnJheUJ1ZmZlcn0pO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhJHR5cGVkLkNPTlNUUiwgQVJSQVlfQlVGRkVSLCB7XG5cdCAgLy8gMjQuMS4zLjEgQXJyYXlCdWZmZXIuaXNWaWV3KGFyZylcblx0ICBpc1ZpZXc6IGZ1bmN0aW9uIGlzVmlldyhpdCl7XG5cdCAgICByZXR1cm4gJGlzVmlldyAmJiAkaXNWaWV3KGl0KSB8fCBpc09iamVjdChpdCkgJiYgVklFVyBpbiBpdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LlUgKyAkZXhwb3J0LkYgKiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KShmdW5jdGlvbigpe1xuXHQgIHJldHVybiAhbmV3ICRBcnJheUJ1ZmZlcigyKS5zbGljZSgxLCB1bmRlZmluZWQpLmJ5dGVMZW5ndGg7XG5cdH0pLCBBUlJBWV9CVUZGRVIsIHtcblx0ICAvLyAyNC4xLjQuMyBBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2Uoc3RhcnQsIGVuZClcblx0ICBzbGljZTogZnVuY3Rpb24gc2xpY2Uoc3RhcnQsIGVuZCl7XG5cdCAgICBpZigkc2xpY2UgIT09IHVuZGVmaW5lZCAmJiBlbmQgPT09IHVuZGVmaW5lZClyZXR1cm4gJHNsaWNlLmNhbGwoYW5PYmplY3QodGhpcyksIHN0YXJ0KTsgLy8gRkYgZml4XG5cdCAgICB2YXIgbGVuICAgID0gYW5PYmplY3QodGhpcykuYnl0ZUxlbmd0aFxuXHQgICAgICAsIGZpcnN0ICA9IHRvSW5kZXgoc3RhcnQsIGxlbilcblx0ICAgICAgLCBmaW5hbCAgPSB0b0luZGV4KGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogZW5kLCBsZW4pXG5cdCAgICAgICwgcmVzdWx0ID0gbmV3IChzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgJEFycmF5QnVmZmVyKSkodG9MZW5ndGgoZmluYWwgLSBmaXJzdCkpXG5cdCAgICAgICwgdmlld1MgID0gbmV3ICREYXRhVmlldyh0aGlzKVxuXHQgICAgICAsIHZpZXdUICA9IG5ldyAkRGF0YVZpZXcocmVzdWx0KVxuXHQgICAgICAsIGluZGV4ICA9IDA7XG5cdCAgICB3aGlsZShmaXJzdCA8IGZpbmFsKXtcblx0ICAgICAgdmlld1Quc2V0VWludDgoaW5kZXgrKywgdmlld1MuZ2V0VWludDgoZmlyc3QrKykpO1xuXHQgICAgfSByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNCkoQVJSQVlfQlVGRkVSKTtcblxuLyoqKi8gfSxcbi8qIDI2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdsb2JhbCA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgLCBoaWRlICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHQgICwgdWlkICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSlcblx0ICAsIFRZUEVEICA9IHVpZCgndHlwZWRfYXJyYXknKVxuXHQgICwgVklFVyAgID0gdWlkKCd2aWV3Jylcblx0ICAsIEFCViAgICA9ICEhKGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBnbG9iYWwuRGF0YVZpZXcpXG5cdCAgLCBDT05TVFIgPSBBQlZcblx0ICAsIGkgPSAwLCBsID0gOSwgVHlwZWQ7XG5cdFxuXHR2YXIgVHlwZWRBcnJheUNvbnN0cnVjdG9ycyA9IChcblx0ICAnSW50OEFycmF5LFVpbnQ4QXJyYXksVWludDhDbGFtcGVkQXJyYXksSW50MTZBcnJheSxVaW50MTZBcnJheSxJbnQzMkFycmF5LFVpbnQzMkFycmF5LEZsb2F0MzJBcnJheSxGbG9hdDY0QXJyYXknXG5cdCkuc3BsaXQoJywnKTtcblx0XG5cdHdoaWxlKGkgPCBsKXtcblx0ICBpZihUeXBlZCA9IGdsb2JhbFtUeXBlZEFycmF5Q29uc3RydWN0b3JzW2krK11dKXtcblx0ICAgIGhpZGUoVHlwZWQucHJvdG90eXBlLCBUWVBFRCwgdHJ1ZSk7XG5cdCAgICBoaWRlKFR5cGVkLnByb3RvdHlwZSwgVklFVywgdHJ1ZSk7XG5cdCAgfSBlbHNlIENPTlNUUiA9IGZhbHNlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBBQlY6ICAgIEFCVixcblx0ICBDT05TVFI6IENPTlNUUixcblx0ICBUWVBFRDogIFRZUEVELFxuXHQgIFZJRVc6ICAgVklFV1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMjYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBnbG9iYWwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgLCBERVNDUklQVE9SUyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpXG5cdCAgLCBMSUJSQVJZICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzApXG5cdCAgLCAkdHlwZWQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYxKVxuXHQgICwgaGlkZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHQgICwgcmVkZWZpbmVBbGwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1Milcblx0ICAsIGZhaWxzICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSlcblx0ICAsIGFuSW5zdGFuY2UgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDcpXG5cdCAgLCB0b0ludGVnZXIgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODApXG5cdCAgLCB0b0xlbmd0aCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgLCBnT1BOICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpLmZcblx0ICAsIGRQICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MykuZlxuXHQgICwgYXJyYXlGaWxsICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMClcblx0ICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nilcblx0ICAsIEFSUkFZX0JVRkZFUiAgID0gJ0FycmF5QnVmZmVyJ1xuXHQgICwgREFUQV9WSUVXICAgICAgPSAnRGF0YVZpZXcnXG5cdCAgLCBQUk9UT1RZUEUgICAgICA9ICdwcm90b3R5cGUnXG5cdCAgLCBXUk9OR19MRU5HVEggICA9ICdXcm9uZyBsZW5ndGghJ1xuXHQgICwgV1JPTkdfSU5ERVggICAgPSAnV3JvbmcgaW5kZXghJ1xuXHQgICwgJEFycmF5QnVmZmVyICAgPSBnbG9iYWxbQVJSQVlfQlVGRkVSXVxuXHQgICwgJERhdGFWaWV3ICAgICAgPSBnbG9iYWxbREFUQV9WSUVXXVxuXHQgICwgTWF0aCAgICAgICAgICAgPSBnbG9iYWwuTWF0aFxuXHQgICwgUmFuZ2VFcnJvciAgICAgPSBnbG9iYWwuUmFuZ2VFcnJvclxuXHQgICwgSW5maW5pdHkgICAgICAgPSBnbG9iYWwuSW5maW5pdHlcblx0ICAsIEJhc2VCdWZmZXIgICAgID0gJEFycmF5QnVmZmVyXG5cdCAgLCBhYnMgICAgICAgICAgICA9IE1hdGguYWJzXG5cdCAgLCBwb3cgICAgICAgICAgICA9IE1hdGgucG93XG5cdCAgLCBmbG9vciAgICAgICAgICA9IE1hdGguZmxvb3Jcblx0ICAsIGxvZyAgICAgICAgICAgID0gTWF0aC5sb2dcblx0ICAsIExOMiAgICAgICAgICAgID0gTWF0aC5MTjJcblx0ICAsIEJVRkZFUiAgICAgICAgID0gJ2J1ZmZlcidcblx0ICAsIEJZVEVfTEVOR1RIICAgID0gJ2J5dGVMZW5ndGgnXG5cdCAgLCBCWVRFX09GRlNFVCAgICA9ICdieXRlT2Zmc2V0J1xuXHQgICwgJEJVRkZFUiAgICAgICAgPSBERVNDUklQVE9SUyA/ICdfYicgOiBCVUZGRVJcblx0ICAsICRMRU5HVEggICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX2wnIDogQllURV9MRU5HVEhcblx0ICAsICRPRkZTRVQgICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX28nIDogQllURV9PRkZTRVQ7XG5cdFxuXHQvLyBJRUVFNzU0IGNvbnZlcnNpb25zIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvaWVlZTc1NFxuXHR2YXIgcGFja0lFRUU3NTQgPSBmdW5jdGlvbih2YWx1ZSwgbUxlbiwgbkJ5dGVzKXtcblx0ICB2YXIgYnVmZmVyID0gQXJyYXkobkJ5dGVzKVxuXHQgICAgLCBlTGVuICAgPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcblx0ICAgICwgZU1heCAgID0gKDEgPDwgZUxlbikgLSAxXG5cdCAgICAsIGVCaWFzICA9IGVNYXggPj4gMVxuXHQgICAgLCBydCAgICAgPSBtTGVuID09PSAyMyA/IHBvdygyLCAtMjQpIC0gcG93KDIsIC03NykgOiAwXG5cdCAgICAsIGkgICAgICA9IDBcblx0ICAgICwgcyAgICAgID0gdmFsdWUgPCAwIHx8IHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDAgPyAxIDogMFxuXHQgICAgLCBlLCBtLCBjO1xuXHQgIHZhbHVlID0gYWJzKHZhbHVlKVxuXHQgIGlmKHZhbHVlICE9IHZhbHVlIHx8IHZhbHVlID09PSBJbmZpbml0eSl7XG5cdCAgICBtID0gdmFsdWUgIT0gdmFsdWUgPyAxIDogMDtcblx0ICAgIGUgPSBlTWF4O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBlID0gZmxvb3IobG9nKHZhbHVlKSAvIExOMik7XG5cdCAgICBpZih2YWx1ZSAqIChjID0gcG93KDIsIC1lKSkgPCAxKXtcblx0ICAgICAgZS0tO1xuXHQgICAgICBjICo9IDI7XG5cdCAgICB9XG5cdCAgICBpZihlICsgZUJpYXMgPj0gMSl7XG5cdCAgICAgIHZhbHVlICs9IHJ0IC8gYztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhbHVlICs9IHJ0ICogcG93KDIsIDEgLSBlQmlhcyk7XG5cdCAgICB9XG5cdCAgICBpZih2YWx1ZSAqIGMgPj0gMil7XG5cdCAgICAgIGUrKztcblx0ICAgICAgYyAvPSAyO1xuXHQgICAgfVxuXHQgICAgaWYoZSArIGVCaWFzID49IGVNYXgpe1xuXHQgICAgICBtID0gMDtcblx0ICAgICAgZSA9IGVNYXg7XG5cdCAgICB9IGVsc2UgaWYoZSArIGVCaWFzID49IDEpe1xuXHQgICAgICBtID0gKHZhbHVlICogYyAtIDEpICogcG93KDIsIG1MZW4pO1xuXHQgICAgICBlID0gZSArIGVCaWFzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbSA9IHZhbHVlICogcG93KDIsIGVCaWFzIC0gMSkgKiBwb3coMiwgbUxlbik7XG5cdCAgICAgIGUgPSAwO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IoOyBtTGVuID49IDg7IGJ1ZmZlcltpKytdID0gbSAmIDI1NSwgbSAvPSAyNTYsIG1MZW4gLT0gOCk7XG5cdCAgZSA9IGUgPDwgbUxlbiB8IG07XG5cdCAgZUxlbiArPSBtTGVuO1xuXHQgIGZvcig7IGVMZW4gPiAwOyBidWZmZXJbaSsrXSA9IGUgJiAyNTUsIGUgLz0gMjU2LCBlTGVuIC09IDgpO1xuXHQgIGJ1ZmZlclstLWldIHw9IHMgKiAxMjg7XG5cdCAgcmV0dXJuIGJ1ZmZlcjtcblx0fTtcblx0dmFyIHVucGFja0lFRUU3NTQgPSBmdW5jdGlvbihidWZmZXIsIG1MZW4sIG5CeXRlcyl7XG5cdCAgdmFyIGVMZW4gID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG5cdCAgICAsIGVNYXggID0gKDEgPDwgZUxlbikgLSAxXG5cdCAgICAsIGVCaWFzID0gZU1heCA+PiAxXG5cdCAgICAsIG5CaXRzID0gZUxlbiAtIDdcblx0ICAgICwgaSAgICAgPSBuQnl0ZXMgLSAxXG5cdCAgICAsIHMgICAgID0gYnVmZmVyW2ktLV1cblx0ICAgICwgZSAgICAgPSBzICYgMTI3XG5cdCAgICAsIG07XG5cdCAgcyA+Pj0gNztcblx0ICBmb3IoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW2ldLCBpLS0sIG5CaXRzIC09IDgpO1xuXHQgIG0gPSBlICYgKDEgPDwgLW5CaXRzKSAtIDE7XG5cdCAgZSA+Pj0gLW5CaXRzO1xuXHQgIG5CaXRzICs9IG1MZW47XG5cdCAgZm9yKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltpXSwgaS0tLCBuQml0cyAtPSA4KTtcblx0ICBpZihlID09PSAwKXtcblx0ICAgIGUgPSAxIC0gZUJpYXM7XG5cdCAgfSBlbHNlIGlmKGUgPT09IGVNYXgpe1xuXHQgICAgcmV0dXJuIG0gPyBOYU4gOiBzID8gLUluZmluaXR5IDogSW5maW5pdHk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG0gPSBtICsgcG93KDIsIG1MZW4pO1xuXHQgICAgZSA9IGUgLSBlQmlhcztcblx0ICB9IHJldHVybiAocyA/IC0xIDogMSkgKiBtICogcG93KDIsIGUgLSBtTGVuKTtcblx0fTtcblx0XG5cdHZhciB1bnBhY2tJMzIgPSBmdW5jdGlvbihieXRlcyl7XG5cdCAgcmV0dXJuIGJ5dGVzWzNdIDw8IDI0IHwgYnl0ZXNbMl0gPDwgMTYgfCBieXRlc1sxXSA8PCA4IHwgYnl0ZXNbMF07XG5cdH07XG5cdHZhciBwYWNrSTggPSBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIFtpdCAmIDB4ZmZdO1xuXHR9O1xuXHR2YXIgcGFja0kxNiA9IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gW2l0ICYgMHhmZiwgaXQgPj4gOCAmIDB4ZmZdO1xuXHR9O1xuXHR2YXIgcGFja0kzMiA9IGZ1bmN0aW9uKGl0KXtcblx0ICByZXR1cm4gW2l0ICYgMHhmZiwgaXQgPj4gOCAmIDB4ZmYsIGl0ID4+IDE2ICYgMHhmZiwgaXQgPj4gMjQgJiAweGZmXTtcblx0fTtcblx0dmFyIHBhY2tGNjQgPSBmdW5jdGlvbihpdCl7XG5cdCAgcmV0dXJuIHBhY2tJRUVFNzU0KGl0LCA1MiwgOCk7XG5cdH07XG5cdHZhciBwYWNrRjMyID0gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiBwYWNrSUVFRTc1NChpdCwgMjMsIDQpO1xuXHR9O1xuXHRcblx0dmFyIGFkZEdldHRlciA9IGZ1bmN0aW9uKEMsIGtleSwgaW50ZXJuYWwpe1xuXHQgIGRQKENbUFJPVE9UWVBFXSwga2V5LCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpc1tpbnRlcm5hbF07IH19KTtcblx0fTtcblx0XG5cdHZhciBnZXQgPSBmdW5jdGlvbih2aWV3LCBieXRlcywgaW5kZXgsIGlzTGl0dGxlRW5kaWFuKXtcblx0ICB2YXIgbnVtSW5kZXggPSAraW5kZXhcblx0ICAgICwgaW50SW5kZXggPSB0b0ludGVnZXIobnVtSW5kZXgpO1xuXHQgIGlmKG51bUluZGV4ICE9IGludEluZGV4IHx8IGludEluZGV4IDwgMCB8fCBpbnRJbmRleCArIGJ5dGVzID4gdmlld1skTEVOR1RIXSl0aHJvdyBSYW5nZUVycm9yKFdST05HX0lOREVYKTtcblx0ICB2YXIgc3RvcmUgPSB2aWV3WyRCVUZGRVJdLl9iXG5cdCAgICAsIHN0YXJ0ID0gaW50SW5kZXggKyB2aWV3WyRPRkZTRVRdXG5cdCAgICAsIHBhY2sgID0gc3RvcmUuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgYnl0ZXMpO1xuXHQgIHJldHVybiBpc0xpdHRsZUVuZGlhbiA/IHBhY2sgOiBwYWNrLnJldmVyc2UoKTtcblx0fTtcblx0dmFyIHNldCA9IGZ1bmN0aW9uKHZpZXcsIGJ5dGVzLCBpbmRleCwgY29udmVyc2lvbiwgdmFsdWUsIGlzTGl0dGxlRW5kaWFuKXtcblx0ICB2YXIgbnVtSW5kZXggPSAraW5kZXhcblx0ICAgICwgaW50SW5kZXggPSB0b0ludGVnZXIobnVtSW5kZXgpO1xuXHQgIGlmKG51bUluZGV4ICE9IGludEluZGV4IHx8IGludEluZGV4IDwgMCB8fCBpbnRJbmRleCArIGJ5dGVzID4gdmlld1skTEVOR1RIXSl0aHJvdyBSYW5nZUVycm9yKFdST05HX0lOREVYKTtcblx0ICB2YXIgc3RvcmUgPSB2aWV3WyRCVUZGRVJdLl9iXG5cdCAgICAsIHN0YXJ0ID0gaW50SW5kZXggKyB2aWV3WyRPRkZTRVRdXG5cdCAgICAsIHBhY2sgID0gY29udmVyc2lvbigrdmFsdWUpO1xuXHQgIGZvcih2YXIgaSA9IDA7IGkgPCBieXRlczsgaSsrKXN0b3JlW3N0YXJ0ICsgaV0gPSBwYWNrW2lzTGl0dGxlRW5kaWFuID8gaSA6IGJ5dGVzIC0gaSAtIDFdO1xuXHR9O1xuXHRcblx0dmFyIHZhbGlkYXRlQXJyYXlCdWZmZXJBcmd1bWVudHMgPSBmdW5jdGlvbih0aGF0LCBsZW5ndGgpe1xuXHQgIGFuSW5zdGFuY2UodGhhdCwgJEFycmF5QnVmZmVyLCBBUlJBWV9CVUZGRVIpO1xuXHQgIHZhciBudW1iZXJMZW5ndGggPSArbGVuZ3RoXG5cdCAgICAsIGJ5dGVMZW5ndGggICA9IHRvTGVuZ3RoKG51bWJlckxlbmd0aCk7XG5cdCAgaWYobnVtYmVyTGVuZ3RoICE9IGJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuXHQgIHJldHVybiBieXRlTGVuZ3RoO1xuXHR9O1xuXHRcblx0aWYoISR0eXBlZC5BQlYpe1xuXHQgICRBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIEFycmF5QnVmZmVyKGxlbmd0aCl7XG5cdCAgICB2YXIgYnl0ZUxlbmd0aCA9IHZhbGlkYXRlQXJyYXlCdWZmZXJBcmd1bWVudHModGhpcywgbGVuZ3RoKTtcblx0ICAgIHRoaXMuX2IgICAgICAgPSBhcnJheUZpbGwuY2FsbChBcnJheShieXRlTGVuZ3RoKSwgMCk7XG5cdCAgICB0aGlzWyRMRU5HVEhdID0gYnl0ZUxlbmd0aDtcblx0ICB9O1xuXHRcblx0ICAkRGF0YVZpZXcgPSBmdW5jdGlvbiBEYXRhVmlldyhidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpe1xuXHQgICAgYW5JbnN0YW5jZSh0aGlzLCAkRGF0YVZpZXcsIERBVEFfVklFVyk7XG5cdCAgICBhbkluc3RhbmNlKGJ1ZmZlciwgJEFycmF5QnVmZmVyLCBEQVRBX1ZJRVcpO1xuXHQgICAgdmFyIGJ1ZmZlckxlbmd0aCA9IGJ1ZmZlclskTEVOR1RIXVxuXHQgICAgICAsIG9mZnNldCAgICAgICA9IHRvSW50ZWdlcihieXRlT2Zmc2V0KTtcblx0ICAgIGlmKG9mZnNldCA8IDAgfHwgb2Zmc2V0ID4gYnVmZmVyTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoJ1dyb25nIG9mZnNldCEnKTtcblx0ICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID09PSB1bmRlZmluZWQgPyBidWZmZXJMZW5ndGggLSBvZmZzZXQgOiB0b0xlbmd0aChieXRlTGVuZ3RoKTtcblx0ICAgIGlmKG9mZnNldCArIGJ5dGVMZW5ndGggPiBidWZmZXJMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuXHQgICAgdGhpc1skQlVGRkVSXSA9IGJ1ZmZlcjtcblx0ICAgIHRoaXNbJE9GRlNFVF0gPSBvZmZzZXQ7XG5cdCAgICB0aGlzWyRMRU5HVEhdID0gYnl0ZUxlbmd0aDtcblx0ICB9O1xuXHRcblx0ICBpZihERVNDUklQVE9SUyl7XG5cdCAgICBhZGRHZXR0ZXIoJEFycmF5QnVmZmVyLCBCWVRFX0xFTkdUSCwgJ19sJyk7XG5cdCAgICBhZGRHZXR0ZXIoJERhdGFWaWV3LCBCVUZGRVIsICdfYicpO1xuXHQgICAgYWRkR2V0dGVyKCREYXRhVmlldywgQllURV9MRU5HVEgsICdfbCcpO1xuXHQgICAgYWRkR2V0dGVyKCREYXRhVmlldywgQllURV9PRkZTRVQsICdfbycpO1xuXHQgIH1cblx0XG5cdCAgcmVkZWZpbmVBbGwoJERhdGFWaWV3W1BST1RPVFlQRV0sIHtcblx0ICAgIGdldEludDg6IGZ1bmN0aW9uIGdldEludDgoYnl0ZU9mZnNldCl7XG5cdCAgICAgIHJldHVybiBnZXQodGhpcywgMSwgYnl0ZU9mZnNldClbMF0gPDwgMjQgPj4gMjQ7XG5cdCAgICB9LFxuXHQgICAgZ2V0VWludDg6IGZ1bmN0aW9uIGdldFVpbnQ4KGJ5dGVPZmZzZXQpe1xuXHQgICAgICByZXR1cm4gZ2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQpWzBdO1xuXHQgICAgfSxcblx0ICAgIGdldEludDE2OiBmdW5jdGlvbiBnZXRJbnQxNihieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuXHQgICAgICB2YXIgYnl0ZXMgPSBnZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgYXJndW1lbnRzWzFdKTtcblx0ICAgICAgcmV0dXJuIChieXRlc1sxXSA8PCA4IHwgYnl0ZXNbMF0pIDw8IDE2ID4+IDE2O1xuXHQgICAgfSxcblx0ICAgIGdldFVpbnQxNjogZnVuY3Rpb24gZ2V0VWludDE2KGJ5dGVPZmZzZXQgLyosIGxpdHRsZUVuZGlhbiAqLyl7XG5cdCAgICAgIHZhciBieXRlcyA9IGdldCh0aGlzLCAyLCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pO1xuXHQgICAgICByZXR1cm4gYnl0ZXNbMV0gPDwgOCB8IGJ5dGVzWzBdO1xuXHQgICAgfSxcblx0ICAgIGdldEludDMyOiBmdW5jdGlvbiBnZXRJbnQzMihieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuXHQgICAgICByZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pKTtcblx0ICAgIH0sXG5cdCAgICBnZXRVaW50MzI6IGZ1bmN0aW9uIGdldFVpbnQzMihieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuXHQgICAgICByZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pKSA+Pj4gMDtcblx0ICAgIH0sXG5cdCAgICBnZXRGbG9hdDMyOiBmdW5jdGlvbiBnZXRGbG9hdDMyKGJ5dGVPZmZzZXQgLyosIGxpdHRsZUVuZGlhbiAqLyl7XG5cdCAgICAgIHJldHVybiB1bnBhY2tJRUVFNzU0KGdldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pLCAyMywgNCk7XG5cdCAgICB9LFxuXHQgICAgZ2V0RmxvYXQ2NDogZnVuY3Rpb24gZ2V0RmxvYXQ2NChieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuXHQgICAgICByZXR1cm4gdW5wYWNrSUVFRTc1NChnZXQodGhpcywgOCwgYnl0ZU9mZnNldCwgYXJndW1lbnRzWzFdKSwgNTIsIDgpO1xuXHQgICAgfSxcblx0ICAgIHNldEludDg6IGZ1bmN0aW9uIHNldEludDgoYnl0ZU9mZnNldCwgdmFsdWUpe1xuXHQgICAgICBzZXQodGhpcywgMSwgYnl0ZU9mZnNldCwgcGFja0k4LCB2YWx1ZSk7XG5cdCAgICB9LFxuXHQgICAgc2V0VWludDg6IGZ1bmN0aW9uIHNldFVpbnQ4KGJ5dGVPZmZzZXQsIHZhbHVlKXtcblx0ICAgICAgc2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQsIHBhY2tJOCwgdmFsdWUpO1xuXHQgICAgfSxcblx0ICAgIHNldEludDE2OiBmdW5jdGlvbiBzZXRJbnQxNihieXRlT2Zmc2V0LCB2YWx1ZSAvKiwgbGl0dGxlRW5kaWFuICovKXtcblx0ICAgICAgc2V0KHRoaXMsIDIsIGJ5dGVPZmZzZXQsIHBhY2tJMTYsIHZhbHVlLCBhcmd1bWVudHNbMl0pO1xuXHQgICAgfSxcblx0ICAgIHNldFVpbnQxNjogZnVuY3Rpb24gc2V0VWludDE2KGJ5dGVPZmZzZXQsIHZhbHVlIC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuXHQgICAgICBzZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgcGFja0kxNiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7XG5cdCAgICB9LFxuXHQgICAgc2V0SW50MzI6IGZ1bmN0aW9uIHNldEludDMyKGJ5dGVPZmZzZXQsIHZhbHVlIC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuXHQgICAgICBzZXQodGhpcywgNCwgYnl0ZU9mZnNldCwgcGFja0kzMiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7XG5cdCAgICB9LFxuXHQgICAgc2V0VWludDMyOiBmdW5jdGlvbiBzZXRVaW50MzIoYnl0ZU9mZnNldCwgdmFsdWUgLyosIGxpdHRsZUVuZGlhbiAqLyl7XG5cdCAgICAgIHNldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBwYWNrSTMyLCB2YWx1ZSwgYXJndW1lbnRzWzJdKTtcblx0ICAgIH0sXG5cdCAgICBzZXRGbG9hdDMyOiBmdW5jdGlvbiBzZXRGbG9hdDMyKGJ5dGVPZmZzZXQsIHZhbHVlIC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuXHQgICAgICBzZXQodGhpcywgNCwgYnl0ZU9mZnNldCwgcGFja0YzMiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7XG5cdCAgICB9LFxuXHQgICAgc2V0RmxvYXQ2NDogZnVuY3Rpb24gc2V0RmxvYXQ2NChieXRlT2Zmc2V0LCB2YWx1ZSAvKiwgbGl0dGxlRW5kaWFuICovKXtcblx0ICAgICAgc2V0KHRoaXMsIDgsIGJ5dGVPZmZzZXQsIHBhY2tGNjQsIHZhbHVlLCBhcmd1bWVudHNbMl0pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9IGVsc2Uge1xuXHQgIGlmKCFmYWlscyhmdW5jdGlvbigpe1xuXHQgICAgbmV3ICRBcnJheUJ1ZmZlcjsgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG5cdCAgfSkgfHwgIWZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgICBuZXcgJEFycmF5QnVmZmVyKC41KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcblx0ICB9KSl7XG5cdCAgICAkQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiBBcnJheUJ1ZmZlcihsZW5ndGgpe1xuXHQgICAgICByZXR1cm4gbmV3IEJhc2VCdWZmZXIodmFsaWRhdGVBcnJheUJ1ZmZlckFyZ3VtZW50cyh0aGlzLCBsZW5ndGgpKTtcblx0ICAgIH07XG5cdCAgICB2YXIgQXJyYXlCdWZmZXJQcm90byA9ICRBcnJheUJ1ZmZlcltQUk9UT1RZUEVdID0gQmFzZUJ1ZmZlcltQUk9UT1RZUEVdO1xuXHQgICAgZm9yKHZhciBrZXlzID0gZ09QTihCYXNlQnVmZmVyKSwgaiA9IDAsIGtleTsga2V5cy5sZW5ndGggPiBqOyApe1xuXHQgICAgICBpZighKChrZXkgPSBrZXlzW2orK10pIGluICRBcnJheUJ1ZmZlcikpaGlkZSgkQXJyYXlCdWZmZXIsIGtleSwgQmFzZUJ1ZmZlcltrZXldKTtcblx0ICAgIH07XG5cdCAgICBpZighTElCUkFSWSlBcnJheUJ1ZmZlclByb3RvLmNvbnN0cnVjdG9yID0gJEFycmF5QnVmZmVyO1xuXHQgIH1cblx0ICAvLyBpT1MgU2FmYXJpIDcueCBidWdcblx0ICB2YXIgdmlldyA9IG5ldyAkRGF0YVZpZXcobmV3ICRBcnJheUJ1ZmZlcigyKSlcblx0ICAgICwgJHNldEludDggPSAkRGF0YVZpZXdbUFJPVE9UWVBFXS5zZXRJbnQ4O1xuXHQgIHZpZXcuc2V0SW50OCgwLCAyMTQ3NDgzNjQ4KTtcblx0ICB2aWV3LnNldEludDgoMSwgMjE0NzQ4MzY0OSk7XG5cdCAgaWYodmlldy5nZXRJbnQ4KDApIHx8ICF2aWV3LmdldEludDgoMSkpcmVkZWZpbmVBbGwoJERhdGFWaWV3W1BST1RPVFlQRV0sIHtcblx0ICAgIHNldEludDg6IGZ1bmN0aW9uIHNldEludDgoYnl0ZU9mZnNldCwgdmFsdWUpe1xuXHQgICAgICAkc2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTtcblx0ICAgIH0sXG5cdCAgICBzZXRVaW50ODogZnVuY3Rpb24gc2V0VWludDgoYnl0ZU9mZnNldCwgdmFsdWUpe1xuXHQgICAgICAkc2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTtcblx0ICAgIH1cblx0ICB9LCB0cnVlKTtcblx0fVxuXHRzZXRUb1N0cmluZ1RhZygkQXJyYXlCdWZmZXIsIEFSUkFZX0JVRkZFUik7XG5cdHNldFRvU3RyaW5nVGFnKCREYXRhVmlldywgREFUQV9WSUVXKTtcblx0aGlkZSgkRGF0YVZpZXdbUFJPVE9UWVBFXSwgJHR5cGVkLlZJRVcsIHRydWUpO1xuXHRleHBvcnRzW0FSUkFZX0JVRkZFUl0gPSAkQXJyYXlCdWZmZXI7XG5cdGV4cG9ydHNbREFUQV9WSUVXXSA9ICREYXRhVmlldztcblxuLyoqKi8gfSxcbi8qIDI2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0JGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygyNjEpLkFCViwge1xuXHQgIERhdGFWaWV3OiBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2MikuRGF0YVZpZXdcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjY1KSgnSW50OCcsIDEsIGZ1bmN0aW9uKGluaXQpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBJbnQ4QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcblx0ICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkpe1xuXHQgIHZhciBMSUJSQVJZICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MClcblx0ICAgICwgZ2xvYmFsICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgICAsIGZhaWxzICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KVxuXHQgICAgLCAkZXhwb3J0ICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAgICwgJHR5cGVkICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYxKVxuXHQgICAgLCAkYnVmZmVyICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNjIpXG5cdCAgICAsIGN0eCAgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKVxuXHQgICAgLCBhbkluc3RhbmNlICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDcpXG5cdCAgICAsIHByb3BlcnR5RGVzYyAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KVxuXHQgICAgLCBoaWRlICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0ICAgICwgcmVkZWZpbmVBbGwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUyKVxuXHQgICAgLCB0b0ludGVnZXIgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MClcblx0ICAgICwgdG9MZW5ndGggICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgICAsIHRvSW5kZXggICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKVxuXHQgICAgLCB0b1ByaW1pdGl2ZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OClcblx0ICAgICwgaGFzICAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgICAsIHNhbWUgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMylcblx0ICAgICwgY2xhc3NvZiAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTE3KVxuXHQgICAgLCBpc09iamVjdCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAgICwgdG9PYmplY3QgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTAwKVxuXHQgICAgLCBpc0FycmF5SXRlciAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDQpXG5cdCAgICAsIGNyZWF0ZSAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KVxuXHQgICAgLCBnZXRQcm90b3R5cGVPZiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpXG5cdCAgICAsIGdPUE4gICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKS5mXG5cdCAgICAsIGdldEl0ZXJGbiAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNilcblx0ICAgICwgdWlkICAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdCAgICAsIHdrcyAgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KVxuXHQgICAgLCBjcmVhdGVBcnJheU1ldGhvZCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTQpXG5cdCAgICAsIGNyZWF0ZUFycmF5SW5jbHVkZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KVxuXHQgICAgLCBzcGVjaWVzQ29uc3RydWN0b3IgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDkpXG5cdCAgICAsIEFycmF5SXRlcmF0b3JzICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNSlcblx0ICAgICwgSXRlcmF0b3JzICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcxKVxuXHQgICAgLCAkaXRlckRldGVjdCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDcpXG5cdCAgICAsIHNldFNwZWNpZXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNClcblx0ICAgICwgYXJyYXlGaWxsICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMwKVxuXHQgICAgLCBhcnJheUNvcHlXaXRoaW4gICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjcpXG5cdCAgICAsICREUCAgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKVxuXHQgICAgLCAkR09QRCAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mylcblx0ICAgICwgZFAgICAgICAgICAgICAgICAgICA9ICREUC5mXG5cdCAgICAsIGdPUEQgICAgICAgICAgICAgICAgPSAkR09QRC5mXG5cdCAgICAsIFJhbmdlRXJyb3IgICAgICAgICAgPSBnbG9iYWwuUmFuZ2VFcnJvclxuXHQgICAgLCBUeXBlRXJyb3IgICAgICAgICAgID0gZ2xvYmFsLlR5cGVFcnJvclxuXHQgICAgLCBVaW50OEFycmF5ICAgICAgICAgID0gZ2xvYmFsLlVpbnQ4QXJyYXlcblx0ICAgICwgQVJSQVlfQlVGRkVSICAgICAgICA9ICdBcnJheUJ1ZmZlcidcblx0ICAgICwgU0hBUkVEX0JVRkZFUiAgICAgICA9ICdTaGFyZWQnICsgQVJSQVlfQlVGRkVSXG5cdCAgICAsIEJZVEVTX1BFUl9FTEVNRU5UICAgPSAnQllURVNfUEVSX0VMRU1FTlQnXG5cdCAgICAsIFBST1RPVFlQRSAgICAgICAgICAgPSAncHJvdG90eXBlJ1xuXHQgICAgLCBBcnJheVByb3RvICAgICAgICAgID0gQXJyYXlbUFJPVE9UWVBFXVxuXHQgICAgLCAkQXJyYXlCdWZmZXIgICAgICAgID0gJGJ1ZmZlci5BcnJheUJ1ZmZlclxuXHQgICAgLCAkRGF0YVZpZXcgICAgICAgICAgID0gJGJ1ZmZlci5EYXRhVmlld1xuXHQgICAgLCBhcnJheUZvckVhY2ggICAgICAgID0gY3JlYXRlQXJyYXlNZXRob2QoMClcblx0ICAgICwgYXJyYXlGaWx0ZXIgICAgICAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDIpXG5cdCAgICAsIGFycmF5U29tZSAgICAgICAgICAgPSBjcmVhdGVBcnJheU1ldGhvZCgzKVxuXHQgICAgLCBhcnJheUV2ZXJ5ICAgICAgICAgID0gY3JlYXRlQXJyYXlNZXRob2QoNClcblx0ICAgICwgYXJyYXlGaW5kICAgICAgICAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDUpXG5cdCAgICAsIGFycmF5RmluZEluZGV4ICAgICAgPSBjcmVhdGVBcnJheU1ldGhvZCg2KVxuXHQgICAgLCBhcnJheUluY2x1ZGVzICAgICAgID0gY3JlYXRlQXJyYXlJbmNsdWRlcyh0cnVlKVxuXHQgICAgLCBhcnJheUluZGV4T2YgICAgICAgID0gY3JlYXRlQXJyYXlJbmNsdWRlcyhmYWxzZSlcblx0ICAgICwgYXJyYXlWYWx1ZXMgICAgICAgICA9IEFycmF5SXRlcmF0b3JzLnZhbHVlc1xuXHQgICAgLCBhcnJheUtleXMgICAgICAgICAgID0gQXJyYXlJdGVyYXRvcnMua2V5c1xuXHQgICAgLCBhcnJheUVudHJpZXMgICAgICAgID0gQXJyYXlJdGVyYXRvcnMuZW50cmllc1xuXHQgICAgLCBhcnJheUxhc3RJbmRleE9mICAgID0gQXJyYXlQcm90by5sYXN0SW5kZXhPZlxuXHQgICAgLCBhcnJheVJlZHVjZSAgICAgICAgID0gQXJyYXlQcm90by5yZWR1Y2Vcblx0ICAgICwgYXJyYXlSZWR1Y2VSaWdodCAgICA9IEFycmF5UHJvdG8ucmVkdWNlUmlnaHRcblx0ICAgICwgYXJyYXlKb2luICAgICAgICAgICA9IEFycmF5UHJvdG8uam9pblxuXHQgICAgLCBhcnJheVNvcnQgICAgICAgICAgID0gQXJyYXlQcm90by5zb3J0XG5cdCAgICAsIGFycmF5U2xpY2UgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlXG5cdCAgICAsIGFycmF5VG9TdHJpbmcgICAgICAgPSBBcnJheVByb3RvLnRvU3RyaW5nXG5cdCAgICAsIGFycmF5VG9Mb2NhbGVTdHJpbmcgPSBBcnJheVByb3RvLnRvTG9jYWxlU3RyaW5nXG5cdCAgICAsIElURVJBVE9SICAgICAgICAgICAgPSB3a3MoJ2l0ZXJhdG9yJylcblx0ICAgICwgVEFHICAgICAgICAgICAgICAgICA9IHdrcygndG9TdHJpbmdUYWcnKVxuXHQgICAgLCBUWVBFRF9DT05TVFJVQ1RPUiAgID0gdWlkKCd0eXBlZF9jb25zdHJ1Y3RvcicpXG5cdCAgICAsIERFRl9DT05TVFJVQ1RPUiAgICAgPSB1aWQoJ2RlZl9jb25zdHJ1Y3RvcicpXG5cdCAgICAsIEFMTF9DT05TVFJVQ1RPUlMgICAgPSAkdHlwZWQuQ09OU1RSXG5cdCAgICAsIFRZUEVEX0FSUkFZICAgICAgICAgPSAkdHlwZWQuVFlQRURcblx0ICAgICwgVklFVyAgICAgICAgICAgICAgICA9ICR0eXBlZC5WSUVXXG5cdCAgICAsIFdST05HX0xFTkdUSCAgICAgICAgPSAnV3JvbmcgbGVuZ3RoISc7XG5cdFxuXHQgIHZhciAkbWFwID0gY3JlYXRlQXJyYXlNZXRob2QoMSwgZnVuY3Rpb24oTywgbGVuZ3RoKXtcblx0ICAgIHJldHVybiBhbGxvY2F0ZShzcGVjaWVzQ29uc3RydWN0b3IoTywgT1tERUZfQ09OU1RSVUNUT1JdKSwgbGVuZ3RoKTtcblx0ICB9KTtcblx0XG5cdCAgdmFyIExJVFRMRV9FTkRJQU4gPSBmYWlscyhmdW5jdGlvbigpe1xuXHQgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KG5ldyBVaW50MTZBcnJheShbMV0pLmJ1ZmZlcilbMF0gPT09IDE7XG5cdCAgfSk7XG5cdFxuXHQgIHZhciBGT1JDRURfU0VUID0gISFVaW50OEFycmF5ICYmICEhVWludDhBcnJheVtQUk9UT1RZUEVdLnNldCAmJiBmYWlscyhmdW5jdGlvbigpe1xuXHQgICAgbmV3IFVpbnQ4QXJyYXkoMSkuc2V0KHt9KTtcblx0ICB9KTtcblx0XG5cdCAgdmFyIHN0cmljdFRvTGVuZ3RoID0gZnVuY3Rpb24oaXQsIFNBTUUpe1xuXHQgICAgaWYoaXQgPT09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoV1JPTkdfTEVOR1RIKTtcblx0ICAgIHZhciBudW1iZXIgPSAraXRcblx0ICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChpdCk7XG5cdCAgICBpZihTQU1FICYmICFzYW1lKG51bWJlciwgbGVuZ3RoKSl0aHJvdyBSYW5nZUVycm9yKFdST05HX0xFTkdUSCk7XG5cdCAgICByZXR1cm4gbGVuZ3RoO1xuXHQgIH07XG5cdFxuXHQgIHZhciB0b09mZnNldCA9IGZ1bmN0aW9uKGl0LCBCWVRFUyl7XG5cdCAgICB2YXIgb2Zmc2V0ID0gdG9JbnRlZ2VyKGl0KTtcblx0ICAgIGlmKG9mZnNldCA8IDAgfHwgb2Zmc2V0ICUgQllURVMpdGhyb3cgUmFuZ2VFcnJvcignV3Jvbmcgb2Zmc2V0IScpO1xuXHQgICAgcmV0dXJuIG9mZnNldDtcblx0ICB9O1xuXHRcblx0ICB2YXIgdmFsaWRhdGUgPSBmdW5jdGlvbihpdCl7XG5cdCAgICBpZihpc09iamVjdChpdCkgJiYgVFlQRURfQVJSQVkgaW4gaXQpcmV0dXJuIGl0O1xuXHQgICAgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSB0eXBlZCBhcnJheSEnKTtcblx0ICB9O1xuXHRcblx0ICB2YXIgYWxsb2NhdGUgPSBmdW5jdGlvbihDLCBsZW5ndGgpe1xuXHQgICAgaWYoIShpc09iamVjdChDKSAmJiBUWVBFRF9DT05TVFJVQ1RPUiBpbiBDKSl7XG5cdCAgICAgIHRocm93IFR5cGVFcnJvcignSXQgaXMgbm90IGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IhJyk7XG5cdCAgICB9IHJldHVybiBuZXcgQyhsZW5ndGgpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBzcGVjaWVzRnJvbUxpc3QgPSBmdW5jdGlvbihPLCBsaXN0KXtcblx0ICAgIHJldHVybiBmcm9tTGlzdChzcGVjaWVzQ29uc3RydWN0b3IoTywgT1tERUZfQ09OU1RSVUNUT1JdKSwgbGlzdCk7XG5cdCAgfTtcblx0XG5cdCAgdmFyIGZyb21MaXN0ID0gZnVuY3Rpb24oQywgbGlzdCl7XG5cdCAgICB2YXIgaW5kZXggID0gMFxuXHQgICAgICAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoXG5cdCAgICAgICwgcmVzdWx0ID0gYWxsb2NhdGUoQywgbGVuZ3RoKTtcblx0ICAgIHdoaWxlKGxlbmd0aCA+IGluZGV4KXJlc3VsdFtpbmRleF0gPSBsaXN0W2luZGV4KytdO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICB2YXIgYWRkR2V0dGVyID0gZnVuY3Rpb24oaXQsIGtleSwgaW50ZXJuYWwpe1xuXHQgICAgZFAoaXQsIGtleSwge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuX2RbaW50ZXJuYWxdOyB9fSk7XG5cdCAgfTtcblx0XG5cdCAgdmFyICRmcm9tID0gZnVuY3Rpb24gZnJvbShzb3VyY2UgLyosIG1hcGZuLCB0aGlzQXJnICovKXtcblx0ICAgIHZhciBPICAgICAgID0gdG9PYmplY3Qoc291cmNlKVxuXHQgICAgICAsIGFMZW4gICAgPSBhcmd1bWVudHMubGVuZ3RoXG5cdCAgICAgICwgbWFwZm4gICA9IGFMZW4gPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkXG5cdCAgICAgICwgbWFwcGluZyA9IG1hcGZuICE9PSB1bmRlZmluZWRcblx0ICAgICAgLCBpdGVyRm4gID0gZ2V0SXRlckZuKE8pXG5cdCAgICAgICwgaSwgbGVuZ3RoLCB2YWx1ZXMsIHJlc3VsdCwgc3RlcCwgaXRlcmF0b3I7XG5cdCAgICBpZihpdGVyRm4gIT0gdW5kZWZpbmVkICYmICFpc0FycmF5SXRlcihpdGVyRm4pKXtcblx0ICAgICAgZm9yKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoTyksIHZhbHVlcyA9IFtdLCBpID0gMDsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyBpKyspe1xuXHQgICAgICAgIHZhbHVlcy5wdXNoKHN0ZXAudmFsdWUpO1xuXHQgICAgICB9IE8gPSB2YWx1ZXM7XG5cdCAgICB9XG5cdCAgICBpZihtYXBwaW5nICYmIGFMZW4gPiAyKW1hcGZuID0gY3R4KG1hcGZuLCBhcmd1bWVudHNbMl0sIDIpO1xuXHQgICAgZm9yKGkgPSAwLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCksIHJlc3VsdCA9IGFsbG9jYXRlKHRoaXMsIGxlbmd0aCk7IGxlbmd0aCA+IGk7IGkrKyl7XG5cdCAgICAgIHJlc3VsdFtpXSA9IG1hcHBpbmcgPyBtYXBmbihPW2ldLCBpKSA6IE9baV07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIHZhciAkb2YgPSBmdW5jdGlvbiBvZigvKi4uLml0ZW1zKi8pe1xuXHQgICAgdmFyIGluZGV4ICA9IDBcblx0ICAgICAgLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoXG5cdCAgICAgICwgcmVzdWx0ID0gYWxsb2NhdGUodGhpcywgbGVuZ3RoKTtcblx0ICAgIHdoaWxlKGxlbmd0aCA+IGluZGV4KXJlc3VsdFtpbmRleF0gPSBhcmd1bWVudHNbaW5kZXgrK107XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIC8vIGlPUyBTYWZhcmkgNi54IGZhaWxzIGhlcmVcblx0ICB2YXIgVE9fTE9DQUxFX0JVRyA9ICEhVWludDhBcnJheSAmJiBmYWlscyhmdW5jdGlvbigpeyBhcnJheVRvTG9jYWxlU3RyaW5nLmNhbGwobmV3IFVpbnQ4QXJyYXkoMSkpOyB9KTtcblx0XG5cdCAgdmFyICR0b0xvY2FsZVN0cmluZyA9IGZ1bmN0aW9uIHRvTG9jYWxlU3RyaW5nKCl7XG5cdCAgICByZXR1cm4gYXJyYXlUb0xvY2FsZVN0cmluZy5hcHBseShUT19MT0NBTEVfQlVHID8gYXJyYXlTbGljZS5jYWxsKHZhbGlkYXRlKHRoaXMpKSA6IHZhbGlkYXRlKHRoaXMpLCBhcmd1bWVudHMpO1xuXHQgIH07XG5cdFxuXHQgIHZhciBwcm90byA9IHtcblx0ICAgIGNvcHlXaXRoaW46IGZ1bmN0aW9uIGNvcHlXaXRoaW4odGFyZ2V0LCBzdGFydCAvKiwgZW5kICovKXtcblx0ICAgICAgcmV0dXJuIGFycmF5Q29weVdpdGhpbi5jYWxsKHZhbGlkYXRlKHRoaXMpLCB0YXJnZXQsIHN0YXJ0LCBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZCk7XG5cdCAgICB9LFxuXHQgICAgZXZlcnk6IGZ1bmN0aW9uIGV2ZXJ5KGNhbGxiYWNrZm4gLyosIHRoaXNBcmcgKi8pe1xuXHQgICAgICByZXR1cm4gYXJyYXlFdmVyeSh2YWxpZGF0ZSh0aGlzKSwgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuXHQgICAgfSxcblx0ICAgIGZpbGw6IGZ1bmN0aW9uIGZpbGwodmFsdWUgLyosIHN0YXJ0LCBlbmQgKi8peyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdCAgICAgIHJldHVybiBhcnJheUZpbGwuYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7XG5cdCAgICB9LFxuXHQgICAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIoY2FsbGJhY2tmbiAvKiwgdGhpc0FyZyAqLyl7XG5cdCAgICAgIHJldHVybiBzcGVjaWVzRnJvbUxpc3QodGhpcywgYXJyYXlGaWx0ZXIodmFsaWRhdGUodGhpcyksIGNhbGxiYWNrZm4sXG5cdCAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpKTtcblx0ICAgIH0sXG5cdCAgICBmaW5kOiBmdW5jdGlvbiBmaW5kKHByZWRpY2F0ZSAvKiwgdGhpc0FyZyAqLyl7XG5cdCAgICAgIHJldHVybiBhcnJheUZpbmQodmFsaWRhdGUodGhpcyksIHByZWRpY2F0ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuXHQgICAgfSxcblx0ICAgIGZpbmRJbmRleDogZnVuY3Rpb24gZmluZEluZGV4KHByZWRpY2F0ZSAvKiwgdGhpc0FyZyAqLyl7XG5cdCAgICAgIHJldHVybiBhcnJheUZpbmRJbmRleCh2YWxpZGF0ZSh0aGlzKSwgcHJlZGljYXRlLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG5cdCAgICB9LFxuXHQgICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFja2ZuIC8qLCB0aGlzQXJnICovKXtcblx0ICAgICAgYXJyYXlGb3JFYWNoKHZhbGlkYXRlKHRoaXMpLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG5cdCAgICB9LFxuXHQgICAgaW5kZXhPZjogZnVuY3Rpb24gaW5kZXhPZihzZWFyY2hFbGVtZW50IC8qLCBmcm9tSW5kZXggKi8pe1xuXHQgICAgICByZXR1cm4gYXJyYXlJbmRleE9mKHZhbGlkYXRlKHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG5cdCAgICB9LFxuXHQgICAgaW5jbHVkZXM6IGZ1bmN0aW9uIGluY2x1ZGVzKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCAqLyl7XG5cdCAgICAgIHJldHVybiBhcnJheUluY2x1ZGVzKHZhbGlkYXRlKHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG5cdCAgICB9LFxuXHQgICAgam9pbjogZnVuY3Rpb24gam9pbihzZXBhcmF0b3IpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdCAgICAgIHJldHVybiBhcnJheUpvaW4uYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7XG5cdCAgICB9LFxuXHQgICAgbGFzdEluZGV4T2Y6IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCAqLyl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblx0ICAgICAgcmV0dXJuIGFycmF5TGFzdEluZGV4T2YuYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7XG5cdCAgICB9LFxuXHQgICAgbWFwOiBmdW5jdGlvbiBtYXAobWFwZm4gLyosIHRoaXNBcmcgKi8pe1xuXHQgICAgICByZXR1cm4gJG1hcCh2YWxpZGF0ZSh0aGlzKSwgbWFwZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcblx0ICAgIH0sXG5cdCAgICByZWR1Y2U6IGZ1bmN0aW9uIHJlZHVjZShjYWxsYmFja2ZuIC8qLCBpbml0aWFsVmFsdWUgKi8peyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdCAgICAgIHJldHVybiBhcnJheVJlZHVjZS5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTtcblx0ICAgIH0sXG5cdCAgICByZWR1Y2VSaWdodDogZnVuY3Rpb24gcmVkdWNlUmlnaHQoY2FsbGJhY2tmbiAvKiwgaW5pdGlhbFZhbHVlICovKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXHQgICAgICByZXR1cm4gYXJyYXlSZWR1Y2VSaWdodC5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTtcblx0ICAgIH0sXG5cdCAgICByZXZlcnNlOiBmdW5jdGlvbiByZXZlcnNlKCl7XG5cdCAgICAgIHZhciB0aGF0ICAgPSB0aGlzXG5cdCAgICAgICAgLCBsZW5ndGggPSB2YWxpZGF0ZSh0aGF0KS5sZW5ndGhcblx0ICAgICAgICAsIG1pZGRsZSA9IE1hdGguZmxvb3IobGVuZ3RoIC8gMilcblx0ICAgICAgICAsIGluZGV4ICA9IDBcblx0ICAgICAgICAsIHZhbHVlO1xuXHQgICAgICB3aGlsZShpbmRleCA8IG1pZGRsZSl7XG5cdCAgICAgICAgdmFsdWUgICAgICAgICA9IHRoYXRbaW5kZXhdO1xuXHQgICAgICAgIHRoYXRbaW5kZXgrK10gPSB0aGF0Wy0tbGVuZ3RoXTtcblx0ICAgICAgICB0aGF0W2xlbmd0aF0gID0gdmFsdWU7XG5cdCAgICAgIH0gcmV0dXJuIHRoYXQ7XG5cdCAgICB9LFxuXHQgICAgc29tZTogZnVuY3Rpb24gc29tZShjYWxsYmFja2ZuIC8qLCB0aGlzQXJnICovKXtcblx0ICAgICAgcmV0dXJuIGFycmF5U29tZSh2YWxpZGF0ZSh0aGlzKSwgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuXHQgICAgfSxcblx0ICAgIHNvcnQ6IGZ1bmN0aW9uIHNvcnQoY29tcGFyZWZuKXtcblx0ICAgICAgcmV0dXJuIGFycmF5U29ydC5jYWxsKHZhbGlkYXRlKHRoaXMpLCBjb21wYXJlZm4pO1xuXHQgICAgfSxcblx0ICAgIHN1YmFycmF5OiBmdW5jdGlvbiBzdWJhcnJheShiZWdpbiwgZW5kKXtcblx0ICAgICAgdmFyIE8gICAgICA9IHZhbGlkYXRlKHRoaXMpXG5cdCAgICAgICAgLCBsZW5ndGggPSBPLmxlbmd0aFxuXHQgICAgICAgICwgJGJlZ2luID0gdG9JbmRleChiZWdpbiwgbGVuZ3RoKTtcblx0ICAgICAgcmV0dXJuIG5ldyAoc3BlY2llc0NvbnN0cnVjdG9yKE8sIE9bREVGX0NPTlNUUlVDVE9SXSkpKFxuXHQgICAgICAgIE8uYnVmZmVyLFxuXHQgICAgICAgIE8uYnl0ZU9mZnNldCArICRiZWdpbiAqIE8uQllURVNfUEVSX0VMRU1FTlQsXG5cdCAgICAgICAgdG9MZW5ndGgoKGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogdG9JbmRleChlbmQsIGxlbmd0aCkpIC0gJGJlZ2luKVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHZhciAkc2xpY2UgPSBmdW5jdGlvbiBzbGljZShzdGFydCwgZW5kKXtcblx0ICAgIHJldHVybiBzcGVjaWVzRnJvbUxpc3QodGhpcywgYXJyYXlTbGljZS5jYWxsKHZhbGlkYXRlKHRoaXMpLCBzdGFydCwgZW5kKSk7XG5cdCAgfTtcblx0XG5cdCAgdmFyICRzZXQgPSBmdW5jdGlvbiBzZXQoYXJyYXlMaWtlIC8qLCBvZmZzZXQgKi8pe1xuXHQgICAgdmFsaWRhdGUodGhpcyk7XG5cdCAgICB2YXIgb2Zmc2V0ID0gdG9PZmZzZXQoYXJndW1lbnRzWzFdLCAxKVxuXHQgICAgICAsIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG5cdCAgICAgICwgc3JjICAgID0gdG9PYmplY3QoYXJyYXlMaWtlKVxuXHQgICAgICAsIGxlbiAgICA9IHRvTGVuZ3RoKHNyYy5sZW5ndGgpXG5cdCAgICAgICwgaW5kZXggID0gMDtcblx0ICAgIGlmKGxlbiArIG9mZnNldCA+IGxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFdST05HX0xFTkdUSCk7XG5cdCAgICB3aGlsZShpbmRleCA8IGxlbil0aGlzW29mZnNldCArIGluZGV4XSA9IHNyY1tpbmRleCsrXTtcblx0ICB9O1xuXHRcblx0ICB2YXIgJGl0ZXJhdG9ycyA9IHtcblx0ICAgIGVudHJpZXM6IGZ1bmN0aW9uIGVudHJpZXMoKXtcblx0ICAgICAgcmV0dXJuIGFycmF5RW50cmllcy5jYWxsKHZhbGlkYXRlKHRoaXMpKTtcblx0ICAgIH0sXG5cdCAgICBrZXlzOiBmdW5jdGlvbiBrZXlzKCl7XG5cdCAgICAgIHJldHVybiBhcnJheUtleXMuY2FsbCh2YWxpZGF0ZSh0aGlzKSk7XG5cdCAgICB9LFxuXHQgICAgdmFsdWVzOiBmdW5jdGlvbiB2YWx1ZXMoKXtcblx0ICAgICAgcmV0dXJuIGFycmF5VmFsdWVzLmNhbGwodmFsaWRhdGUodGhpcykpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHZhciBpc1RBSW5kZXggPSBmdW5jdGlvbih0YXJnZXQsIGtleSl7XG5cdCAgICByZXR1cm4gaXNPYmplY3QodGFyZ2V0KVxuXHQgICAgICAmJiB0YXJnZXRbVFlQRURfQVJSQVldXG5cdCAgICAgICYmIHR5cGVvZiBrZXkgIT0gJ3N5bWJvbCdcblx0ICAgICAgJiYga2V5IGluIHRhcmdldFxuXHQgICAgICAmJiBTdHJpbmcoK2tleSkgPT0gU3RyaW5nKGtleSk7XG5cdCAgfTtcblx0ICB2YXIgJGdldERlc2MgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpe1xuXHQgICAgcmV0dXJuIGlzVEFJbmRleCh0YXJnZXQsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpXG5cdCAgICAgID8gcHJvcGVydHlEZXNjKDIsIHRhcmdldFtrZXldKVxuXHQgICAgICA6IGdPUEQodGFyZ2V0LCBrZXkpO1xuXHQgIH07XG5cdCAgdmFyICRzZXREZXNjID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2Mpe1xuXHQgICAgaWYoaXNUQUluZGV4KHRhcmdldCwga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSlcblx0ICAgICAgJiYgaXNPYmplY3QoZGVzYylcblx0ICAgICAgJiYgaGFzKGRlc2MsICd2YWx1ZScpXG5cdCAgICAgICYmICFoYXMoZGVzYywgJ2dldCcpXG5cdCAgICAgICYmICFoYXMoZGVzYywgJ3NldCcpXG5cdCAgICAgIC8vIFRPRE86IGFkZCB2YWxpZGF0aW9uIGRlc2NyaXB0b3Igdy9vIGNhbGxpbmcgYWNjZXNzb3JzXG5cdCAgICAgICYmICFkZXNjLmNvbmZpZ3VyYWJsZVxuXHQgICAgICAmJiAoIWhhcyhkZXNjLCAnd3JpdGFibGUnKSB8fCBkZXNjLndyaXRhYmxlKVxuXHQgICAgICAmJiAoIWhhcyhkZXNjLCAnZW51bWVyYWJsZScpIHx8IGRlc2MuZW51bWVyYWJsZSlcblx0ICAgICl7XG5cdCAgICAgIHRhcmdldFtrZXldID0gZGVzYy52YWx1ZTtcblx0ICAgICAgcmV0dXJuIHRhcmdldDtcblx0ICAgIH0gZWxzZSByZXR1cm4gZFAodGFyZ2V0LCBrZXksIGRlc2MpO1xuXHQgIH07XG5cdFxuXHQgIGlmKCFBTExfQ09OU1RSVUNUT1JTKXtcblx0ICAgICRHT1BELmYgPSAkZ2V0RGVzYztcblx0ICAgICREUC5mICAgPSAkc2V0RGVzYztcblx0ICB9XG5cdFxuXHQgICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIUFMTF9DT05TVFJVQ1RPUlMsICdPYmplY3QnLCB7XG5cdCAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXREZXNjLFxuXHQgICAgZGVmaW5lUHJvcGVydHk6ICAgICAgICAgICAkc2V0RGVzY1xuXHQgIH0pO1xuXHRcblx0ICBpZihmYWlscyhmdW5jdGlvbigpeyBhcnJheVRvU3RyaW5nLmNhbGwoe30pOyB9KSl7XG5cdCAgICBhcnJheVRvU3RyaW5nID0gYXJyYXlUb0xvY2FsZVN0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG5cdCAgICAgIHJldHVybiBhcnJheUpvaW4uY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciAkVHlwZWRBcnJheVByb3RvdHlwZSQgPSByZWRlZmluZUFsbCh7fSwgcHJvdG8pO1xuXHQgIHJlZGVmaW5lQWxsKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJGl0ZXJhdG9ycyk7XG5cdCAgaGlkZSgkVHlwZWRBcnJheVByb3RvdHlwZSQsIElURVJBVE9SLCAkaXRlcmF0b3JzLnZhbHVlcyk7XG5cdCAgcmVkZWZpbmVBbGwoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCB7XG5cdCAgICBzbGljZTogICAgICAgICAgJHNsaWNlLFxuXHQgICAgc2V0OiAgICAgICAgICAgICRzZXQsXG5cdCAgICBjb25zdHJ1Y3RvcjogICAgZnVuY3Rpb24oKXsgLyogbm9vcCAqLyB9LFxuXHQgICAgdG9TdHJpbmc6ICAgICAgIGFycmF5VG9TdHJpbmcsXG5cdCAgICB0b0xvY2FsZVN0cmluZzogJHRvTG9jYWxlU3RyaW5nXG5cdCAgfSk7XG5cdCAgYWRkR2V0dGVyKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJ2J1ZmZlcicsICdiJyk7XG5cdCAgYWRkR2V0dGVyKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJ2J5dGVPZmZzZXQnLCAnbycpO1xuXHQgIGFkZEdldHRlcigkVHlwZWRBcnJheVByb3RvdHlwZSQsICdieXRlTGVuZ3RoJywgJ2wnKTtcblx0ICBhZGRHZXR0ZXIoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCAnbGVuZ3RoJywgJ2UnKTtcblx0ICBkUCgkVHlwZWRBcnJheVByb3RvdHlwZSQsIFRBRywge1xuXHQgICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpc1tUWVBFRF9BUlJBWV07IH1cblx0ICB9KTtcblx0XG5cdCAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIEJZVEVTLCB3cmFwcGVyLCBDTEFNUEVEKXtcblx0ICAgIENMQU1QRUQgPSAhIUNMQU1QRUQ7XG5cdCAgICB2YXIgTkFNRSAgICAgICA9IEtFWSArIChDTEFNUEVEID8gJ0NsYW1wZWQnIDogJycpICsgJ0FycmF5J1xuXHQgICAgICAsIElTTlRfVUlOVDggPSBOQU1FICE9ICdVaW50OEFycmF5J1xuXHQgICAgICAsIEdFVFRFUiAgICAgPSAnZ2V0JyArIEtFWVxuXHQgICAgICAsIFNFVFRFUiAgICAgPSAnc2V0JyArIEtFWVxuXHQgICAgICAsIFR5cGVkQXJyYXkgPSBnbG9iYWxbTkFNRV1cblx0ICAgICAgLCBCYXNlICAgICAgID0gVHlwZWRBcnJheSB8fCB7fVxuXHQgICAgICAsIFRBQyAgICAgICAgPSBUeXBlZEFycmF5ICYmIGdldFByb3RvdHlwZU9mKFR5cGVkQXJyYXkpXG5cdCAgICAgICwgRk9SQ0VEICAgICA9ICFUeXBlZEFycmF5IHx8ICEkdHlwZWQuQUJWXG5cdCAgICAgICwgTyAgICAgICAgICA9IHt9XG5cdCAgICAgICwgVHlwZWRBcnJheVByb3RvdHlwZSA9IFR5cGVkQXJyYXkgJiYgVHlwZWRBcnJheVtQUk9UT1RZUEVdO1xuXHQgICAgdmFyIGdldHRlciA9IGZ1bmN0aW9uKHRoYXQsIGluZGV4KXtcblx0ICAgICAgdmFyIGRhdGEgPSB0aGF0Ll9kO1xuXHQgICAgICByZXR1cm4gZGF0YS52W0dFVFRFUl0oaW5kZXggKiBCWVRFUyArIGRhdGEubywgTElUVExFX0VORElBTik7XG5cdCAgICB9O1xuXHQgICAgdmFyIHNldHRlciA9IGZ1bmN0aW9uKHRoYXQsIGluZGV4LCB2YWx1ZSl7XG5cdCAgICAgIHZhciBkYXRhID0gdGhhdC5fZDtcblx0ICAgICAgaWYoQ0xBTVBFRCl2YWx1ZSA9ICh2YWx1ZSA9IE1hdGgucm91bmQodmFsdWUpKSA8IDAgPyAwIDogdmFsdWUgPiAweGZmID8gMHhmZiA6IHZhbHVlICYgMHhmZjtcblx0ICAgICAgZGF0YS52W1NFVFRFUl0oaW5kZXggKiBCWVRFUyArIGRhdGEubywgdmFsdWUsIExJVFRMRV9FTkRJQU4pO1xuXHQgICAgfTtcblx0ICAgIHZhciBhZGRFbGVtZW50ID0gZnVuY3Rpb24odGhhdCwgaW5kZXgpe1xuXHQgICAgICBkUCh0aGF0LCBpbmRleCwge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24oKXtcblx0ICAgICAgICAgIHJldHVybiBnZXR0ZXIodGhpcywgaW5kZXgpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSl7XG5cdCAgICAgICAgICByZXR1cm4gc2V0dGVyKHRoaXMsIGluZGV4LCB2YWx1ZSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIGlmKEZPUkNFRCl7XG5cdCAgICAgIFR5cGVkQXJyYXkgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGRhdGEsICRvZmZzZXQsICRsZW5ndGgpe1xuXHQgICAgICAgIGFuSW5zdGFuY2UodGhhdCwgVHlwZWRBcnJheSwgTkFNRSwgJ19kJyk7XG5cdCAgICAgICAgdmFyIGluZGV4ICA9IDBcblx0ICAgICAgICAgICwgb2Zmc2V0ID0gMFxuXHQgICAgICAgICAgLCBidWZmZXIsIGJ5dGVMZW5ndGgsIGxlbmd0aCwga2xhc3M7XG5cdCAgICAgICAgaWYoIWlzT2JqZWN0KGRhdGEpKXtcblx0ICAgICAgICAgIGxlbmd0aCAgICAgPSBzdHJpY3RUb0xlbmd0aChkYXRhLCB0cnVlKVxuXHQgICAgICAgICAgYnl0ZUxlbmd0aCA9IGxlbmd0aCAqIEJZVEVTO1xuXHQgICAgICAgICAgYnVmZmVyICAgICA9IG5ldyAkQXJyYXlCdWZmZXIoYnl0ZUxlbmd0aCk7XG5cdCAgICAgICAgfSBlbHNlIGlmKGRhdGEgaW5zdGFuY2VvZiAkQXJyYXlCdWZmZXIgfHwgKGtsYXNzID0gY2xhc3NvZihkYXRhKSkgPT0gQVJSQVlfQlVGRkVSIHx8IGtsYXNzID09IFNIQVJFRF9CVUZGRVIpe1xuXHQgICAgICAgICAgYnVmZmVyID0gZGF0YTtcblx0ICAgICAgICAgIG9mZnNldCA9IHRvT2Zmc2V0KCRvZmZzZXQsIEJZVEVTKTtcblx0ICAgICAgICAgIHZhciAkbGVuID0gZGF0YS5ieXRlTGVuZ3RoO1xuXHQgICAgICAgICAgaWYoJGxlbmd0aCA9PT0gdW5kZWZpbmVkKXtcblx0ICAgICAgICAgICAgaWYoJGxlbiAlIEJZVEVTKXRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTtcblx0ICAgICAgICAgICAgYnl0ZUxlbmd0aCA9ICRsZW4gLSBvZmZzZXQ7XG5cdCAgICAgICAgICAgIGlmKGJ5dGVMZW5ndGggPCAwKXRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGJ5dGVMZW5ndGggPSB0b0xlbmd0aCgkbGVuZ3RoKSAqIEJZVEVTO1xuXHQgICAgICAgICAgICBpZihieXRlTGVuZ3RoICsgb2Zmc2V0ID4gJGxlbil0aHJvdyBSYW5nZUVycm9yKFdST05HX0xFTkdUSCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBsZW5ndGggPSBieXRlTGVuZ3RoIC8gQllURVM7XG5cdCAgICAgICAgfSBlbHNlIGlmKFRZUEVEX0FSUkFZIGluIGRhdGEpe1xuXHQgICAgICAgICAgcmV0dXJuIGZyb21MaXN0KFR5cGVkQXJyYXksIGRhdGEpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gJGZyb20uY2FsbChUeXBlZEFycmF5LCBkYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaGlkZSh0aGF0LCAnX2QnLCB7XG5cdCAgICAgICAgICBiOiBidWZmZXIsXG5cdCAgICAgICAgICBvOiBvZmZzZXQsXG5cdCAgICAgICAgICBsOiBieXRlTGVuZ3RoLFxuXHQgICAgICAgICAgZTogbGVuZ3RoLFxuXHQgICAgICAgICAgdjogbmV3ICREYXRhVmlldyhidWZmZXIpXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgd2hpbGUoaW5kZXggPCBsZW5ndGgpYWRkRWxlbWVudCh0aGF0LCBpbmRleCsrKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIFR5cGVkQXJyYXlQcm90b3R5cGUgPSBUeXBlZEFycmF5W1BST1RPVFlQRV0gPSBjcmVhdGUoJFR5cGVkQXJyYXlQcm90b3R5cGUkKTtcblx0ICAgICAgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCAnY29uc3RydWN0b3InLCBUeXBlZEFycmF5KTtcblx0ICAgIH0gZWxzZSBpZighJGl0ZXJEZXRlY3QoZnVuY3Rpb24oaXRlcil7XG5cdCAgICAgIC8vIFY4IHdvcmtzIHdpdGggaXRlcmF0b3JzLCBidXQgZmFpbHMgaW4gbWFueSBvdGhlciBjYXNlc1xuXHQgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDU1MlxuXHQgICAgICBuZXcgVHlwZWRBcnJheShudWxsKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcblx0ICAgICAgbmV3IFR5cGVkQXJyYXkoaXRlcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG5cdCAgICB9LCB0cnVlKSl7XG5cdCAgICAgIFR5cGVkQXJyYXkgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGRhdGEsICRvZmZzZXQsICRsZW5ndGgpe1xuXHQgICAgICAgIGFuSW5zdGFuY2UodGhhdCwgVHlwZWRBcnJheSwgTkFNRSk7XG5cdCAgICAgICAgdmFyIGtsYXNzO1xuXHQgICAgICAgIC8vIGB3c2AgbW9kdWxlIGJ1ZywgdGVtcG9yYXJpbHkgcmVtb3ZlIHZhbGlkYXRpb24gbGVuZ3RoIGZvciBVaW50OEFycmF5XG5cdCAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnNvY2tldHMvd3MvcHVsbC82NDVcblx0ICAgICAgICBpZighaXNPYmplY3QoZGF0YSkpcmV0dXJuIG5ldyBCYXNlKHN0cmljdFRvTGVuZ3RoKGRhdGEsIElTTlRfVUlOVDgpKTtcblx0ICAgICAgICBpZihkYXRhIGluc3RhbmNlb2YgJEFycmF5QnVmZmVyIHx8IChrbGFzcyA9IGNsYXNzb2YoZGF0YSkpID09IEFSUkFZX0JVRkZFUiB8fCBrbGFzcyA9PSBTSEFSRURfQlVGRkVSKXtcblx0ICAgICAgICAgIHJldHVybiAkbGVuZ3RoICE9PSB1bmRlZmluZWRcblx0ICAgICAgICAgICAgPyBuZXcgQmFzZShkYXRhLCB0b09mZnNldCgkb2Zmc2V0LCBCWVRFUyksICRsZW5ndGgpXG5cdCAgICAgICAgICAgIDogJG9mZnNldCAhPT0gdW5kZWZpbmVkXG5cdCAgICAgICAgICAgICAgPyBuZXcgQmFzZShkYXRhLCB0b09mZnNldCgkb2Zmc2V0LCBCWVRFUykpXG5cdCAgICAgICAgICAgICAgOiBuZXcgQmFzZShkYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYoVFlQRURfQVJSQVkgaW4gZGF0YSlyZXR1cm4gZnJvbUxpc3QoVHlwZWRBcnJheSwgZGF0YSk7XG5cdCAgICAgICAgcmV0dXJuICRmcm9tLmNhbGwoVHlwZWRBcnJheSwgZGF0YSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBhcnJheUZvckVhY2goVEFDICE9PSBGdW5jdGlvbi5wcm90b3R5cGUgPyBnT1BOKEJhc2UpLmNvbmNhdChnT1BOKFRBQykpIDogZ09QTihCYXNlKSwgZnVuY3Rpb24oa2V5KXtcblx0ICAgICAgICBpZighKGtleSBpbiBUeXBlZEFycmF5KSloaWRlKFR5cGVkQXJyYXksIGtleSwgQmFzZVtrZXldKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIFR5cGVkQXJyYXlbUFJPVE9UWVBFXSA9IFR5cGVkQXJyYXlQcm90b3R5cGU7XG5cdCAgICAgIGlmKCFMSUJSQVJZKVR5cGVkQXJyYXlQcm90b3R5cGUuY29uc3RydWN0b3IgPSBUeXBlZEFycmF5O1xuXHQgICAgfVxuXHQgICAgdmFyICRuYXRpdmVJdGVyYXRvciAgID0gVHlwZWRBcnJheVByb3RvdHlwZVtJVEVSQVRPUl1cblx0ICAgICAgLCBDT1JSRUNUX0lURVJfTkFNRSA9ICEhJG5hdGl2ZUl0ZXJhdG9yICYmICgkbmF0aXZlSXRlcmF0b3IubmFtZSA9PSAndmFsdWVzJyB8fCAkbmF0aXZlSXRlcmF0b3IubmFtZSA9PSB1bmRlZmluZWQpXG5cdCAgICAgICwgJGl0ZXJhdG9yICAgICAgICAgPSAkaXRlcmF0b3JzLnZhbHVlcztcblx0ICAgIGhpZGUoVHlwZWRBcnJheSwgVFlQRURfQ09OU1RSVUNUT1IsIHRydWUpO1xuXHQgICAgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBUWVBFRF9BUlJBWSwgTkFNRSk7XG5cdCAgICBoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIFZJRVcsIHRydWUpO1xuXHQgICAgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBERUZfQ09OU1RSVUNUT1IsIFR5cGVkQXJyYXkpO1xuXHRcblx0ICAgIGlmKENMQU1QRUQgPyBuZXcgVHlwZWRBcnJheSgxKVtUQUddICE9IE5BTUUgOiAhKFRBRyBpbiBUeXBlZEFycmF5UHJvdG90eXBlKSl7XG5cdCAgICAgIGRQKFR5cGVkQXJyYXlQcm90b3R5cGUsIFRBRywge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIE5BTUU7IH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgT1tOQU1FXSA9IFR5cGVkQXJyYXk7XG5cdFxuXHQgICAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAoVHlwZWRBcnJheSAhPSBCYXNlKSwgTyk7XG5cdFxuXHQgICAgJGV4cG9ydCgkZXhwb3J0LlMsIE5BTUUsIHtcblx0ICAgICAgQllURVNfUEVSX0VMRU1FTlQ6IEJZVEVTLFxuXHQgICAgICBmcm9tOiAkZnJvbSxcblx0ICAgICAgb2Y6ICRvZlxuXHQgICAgfSk7XG5cdFxuXHQgICAgaWYoIShCWVRFU19QRVJfRUxFTUVOVCBpbiBUeXBlZEFycmF5UHJvdG90eXBlKSloaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIEJZVEVTX1BFUl9FTEVNRU5ULCBCWVRFUyk7XG5cdFxuXHQgICAgJGV4cG9ydCgkZXhwb3J0LlAsIE5BTUUsIHByb3RvKTtcblx0XG5cdCAgICBzZXRTcGVjaWVzKE5BTUUpO1xuXHRcblx0ICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogRk9SQ0VEX1NFVCwgTkFNRSwge3NldDogJHNldH0pO1xuXHRcblx0ICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIUNPUlJFQ1RfSVRFUl9OQU1FLCBOQU1FLCAkaXRlcmF0b3JzKTtcblx0XG5cdCAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChUeXBlZEFycmF5UHJvdG90eXBlLnRvU3RyaW5nICE9IGFycmF5VG9TdHJpbmcpLCBOQU1FLCB7dG9TdHJpbmc6IGFycmF5VG9TdHJpbmd9KTtcblx0XG5cdCAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgICAgIG5ldyBUeXBlZEFycmF5KDEpLnNsaWNlKCk7XG5cdCAgICB9KSwgTkFNRSwge3NsaWNlOiAkc2xpY2V9KTtcblx0XG5cdCAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChmYWlscyhmdW5jdGlvbigpe1xuXHQgICAgICByZXR1cm4gWzEsIDJdLnRvTG9jYWxlU3RyaW5nKCkgIT0gbmV3IFR5cGVkQXJyYXkoWzEsIDJdKS50b0xvY2FsZVN0cmluZygpXG5cdCAgICB9KSB8fCAhZmFpbHMoZnVuY3Rpb24oKXtcblx0ICAgICAgVHlwZWRBcnJheVByb3RvdHlwZS50b0xvY2FsZVN0cmluZy5jYWxsKFsxLCAyXSk7XG5cdCAgICB9KSksIE5BTUUsIHt0b0xvY2FsZVN0cmluZzogJHRvTG9jYWxlU3RyaW5nfSk7XG5cdFxuXHQgICAgSXRlcmF0b3JzW05BTUVdID0gQ09SUkVDVF9JVEVSX05BTUUgPyAkbmF0aXZlSXRlcmF0b3IgOiAkaXRlcmF0b3I7XG5cdCAgICBpZighTElCUkFSWSAmJiAhQ09SUkVDVF9JVEVSX05BTUUpaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBJVEVSQVRPUiwgJGl0ZXJhdG9yKTtcblx0ICB9O1xuXHR9IGVsc2UgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9O1xuXG4vKioqLyB9LFxuLyogMjY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDI2NSkoJ1VpbnQ4JywgMSwgZnVuY3Rpb24oaW5pdCl7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIFVpbnQ4QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcblx0ICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjY1KSgnVWludDgnLCAxLCBmdW5jdGlvbihpbml0KXtcblx0ICByZXR1cm4gZnVuY3Rpb24gVWludDhDbGFtcGVkQXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcblx0ICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG5cdCAgfTtcblx0fSwgdHJ1ZSk7XG5cbi8qKiovIH0sXG4vKiAyNjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjY1KSgnSW50MTYnLCAyLCBmdW5jdGlvbihpbml0KXtcblx0ICByZXR1cm4gZnVuY3Rpb24gSW50MTZBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpe1xuXHQgICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTtcblx0ICB9O1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI2OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNjUpKCdVaW50MTYnLCAyLCBmdW5jdGlvbihpbml0KXtcblx0ICByZXR1cm4gZnVuY3Rpb24gVWludDE2QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcblx0ICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjY1KSgnSW50MzInLCA0LCBmdW5jdGlvbihpbml0KXtcblx0ICByZXR1cm4gZnVuY3Rpb24gSW50MzJBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpe1xuXHQgICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTtcblx0ICB9O1xuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNjUpKCdVaW50MzInLCA0LCBmdW5jdGlvbihpbml0KXtcblx0ICByZXR1cm4gZnVuY3Rpb24gVWludDMyQXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcblx0ICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjY1KSgnRmxvYXQzMicsIDQsIGZ1bmN0aW9uKGluaXQpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBGbG9hdDMyQXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcblx0ICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjY1KSgnRmxvYXQ2NCcsIDgsIGZ1bmN0aW9uKGluaXQpe1xuXHQgIHJldHVybiBmdW5jdGlvbiBGbG9hdDY0QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcblx0ICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG5cdCAgfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyNzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDI2LjEuMSBSZWZsZWN0LmFwcGx5KHRhcmdldCwgdGhpc0FyZ3VtZW50LCBhcmd1bWVudHNMaXN0KVxuXHR2YXIgJGV4cG9ydCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpXG5cdCAgLCBhbk9iamVjdCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICwgckFwcGx5ICAgID0gKF9fd2VicGFja19yZXF1aXJlX18oNDYpLlJlZmxlY3QgfHwge30pLmFwcGx5XG5cdCAgLCBmQXBwbHkgICAgPSBGdW5jdGlvbi5hcHBseTtcblx0Ly8gTVMgRWRnZSBhcmd1bWVudHNMaXN0IGFyZ3VtZW50IGlzIG9wdGlvbmFsXG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIV9fd2VicGFja19yZXF1aXJlX18oNDkpKGZ1bmN0aW9uKCl7XG5cdCAgckFwcGx5KGZ1bmN0aW9uKCl7fSk7XG5cdH0pLCAnUmVmbGVjdCcsIHtcblx0ICBhcHBseTogZnVuY3Rpb24gYXBwbHkodGFyZ2V0LCB0aGlzQXJndW1lbnQsIGFyZ3VtZW50c0xpc3Qpe1xuXHQgICAgdmFyIFQgPSBhRnVuY3Rpb24odGFyZ2V0KVxuXHQgICAgICAsIEwgPSBhbk9iamVjdChhcmd1bWVudHNMaXN0KTtcblx0ICAgIHJldHVybiByQXBwbHkgPyByQXBwbHkoVCwgdGhpc0FyZ3VtZW50LCBMKSA6IGZBcHBseS5jYWxsKFQsIHRoaXNBcmd1bWVudCwgTCk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjYuMS4yIFJlZmxlY3QuY29uc3RydWN0KHRhcmdldCwgYXJndW1lbnRzTGlzdCBbLCBuZXdUYXJnZXRdKVxuXHR2YXIgJGV4cG9ydCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBjcmVhdGUgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OClcblx0ICAsIGFGdW5jdGlvbiAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKVxuXHQgICwgYW5PYmplY3QgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBpc09iamVjdCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAsIGZhaWxzICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KVxuXHQgICwgYmluZCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KVxuXHQgICwgckNvbnN0cnVjdCA9IChfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KS5SZWZsZWN0IHx8IHt9KS5jb25zdHJ1Y3Q7XG5cdFxuXHQvLyBNUyBFZGdlIHN1cHBvcnRzIG9ubHkgMiBhcmd1bWVudHMgYW5kIGFyZ3VtZW50c0xpc3QgYXJndW1lbnQgaXMgb3B0aW9uYWxcblx0Ly8gRkYgTmlnaHRseSBzZXRzIHRoaXJkIGFyZ3VtZW50IGFzIGBuZXcudGFyZ2V0YCwgYnV0IGRvZXMgbm90IGNyZWF0ZSBgdGhpc2AgZnJvbSBpdFxuXHR2YXIgTkVXX1RBUkdFVF9CVUcgPSBmYWlscyhmdW5jdGlvbigpe1xuXHQgIGZ1bmN0aW9uIEYoKXt9XG5cdCAgcmV0dXJuICEockNvbnN0cnVjdChmdW5jdGlvbigpe30sIFtdLCBGKSBpbnN0YW5jZW9mIEYpO1xuXHR9KTtcblx0dmFyIEFSR1NfQlVHID0gIWZhaWxzKGZ1bmN0aW9uKCl7XG5cdCAgckNvbnN0cnVjdChmdW5jdGlvbigpe30pO1xuXHR9KTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKE5FV19UQVJHRVRfQlVHIHx8IEFSR1NfQlVHKSwgJ1JlZmxlY3QnLCB7XG5cdCAgY29uc3RydWN0OiBmdW5jdGlvbiBjb25zdHJ1Y3QoVGFyZ2V0LCBhcmdzIC8qLCBuZXdUYXJnZXQqLyl7XG5cdCAgICBhRnVuY3Rpb24oVGFyZ2V0KTtcblx0ICAgIGFuT2JqZWN0KGFyZ3MpO1xuXHQgICAgdmFyIG5ld1RhcmdldCA9IGFyZ3VtZW50cy5sZW5ndGggPCAzID8gVGFyZ2V0IDogYUZ1bmN0aW9uKGFyZ3VtZW50c1syXSk7XG5cdCAgICBpZihBUkdTX0JVRyAmJiAhTkVXX1RBUkdFVF9CVUcpcmV0dXJuIHJDb25zdHJ1Y3QoVGFyZ2V0LCBhcmdzLCBuZXdUYXJnZXQpO1xuXHQgICAgaWYoVGFyZ2V0ID09IG5ld1RhcmdldCl7XG5cdCAgICAgIC8vIHcvbyBhbHRlcmVkIG5ld1RhcmdldCwgb3B0aW1pemF0aW9uIGZvciAwLTQgYXJndW1lbnRzXG5cdCAgICAgIHN3aXRjaChhcmdzLmxlbmd0aCl7XG5cdCAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IFRhcmdldDtcblx0ICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0pO1xuXHQgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBUYXJnZXQoYXJnc1swXSwgYXJnc1sxXSk7XG5cdCAgICAgICAgY2FzZSAzOiByZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICAgICAgICBjYXNlIDQ6IHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHcvbyBhbHRlcmVkIG5ld1RhcmdldCwgbG90IG9mIGFyZ3VtZW50cyBjYXNlXG5cdCAgICAgIHZhciAkYXJncyA9IFtudWxsXTtcblx0ICAgICAgJGFyZ3MucHVzaC5hcHBseSgkYXJncywgYXJncyk7XG5cdCAgICAgIHJldHVybiBuZXcgKGJpbmQuYXBwbHkoVGFyZ2V0LCAkYXJncykpO1xuXHQgICAgfVxuXHQgICAgLy8gd2l0aCBhbHRlcmVkIG5ld1RhcmdldCwgbm90IHN1cHBvcnQgYnVpbHQtaW4gY29uc3RydWN0b3JzXG5cdCAgICB2YXIgcHJvdG8gICAgPSBuZXdUYXJnZXQucHJvdG90eXBlXG5cdCAgICAgICwgaW5zdGFuY2UgPSBjcmVhdGUoaXNPYmplY3QocHJvdG8pID8gcHJvdG8gOiBPYmplY3QucHJvdG90eXBlKVxuXHQgICAgICAsIHJlc3VsdCAgID0gRnVuY3Rpb24uYXBwbHkuY2FsbChUYXJnZXQsIGluc3RhbmNlLCBhcmdzKTtcblx0ICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogaW5zdGFuY2U7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI3NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjYuMS4zIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleSwgYXR0cmlidXRlcylcblx0dmFyIGRQICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0ICAsICRleHBvcnQgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIGFuT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsIHRvUHJpbWl0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdFxuXHQvLyBNUyBFZGdlIGhhcyBicm9rZW4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSAtIHRocm93aW5nIGluc3RlYWQgb2YgcmV0dXJuaW5nIGZhbHNlXG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkoZnVuY3Rpb24oKXtcblx0ICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KGRQLmYoe30sIDEsIHt2YWx1ZTogMX0pLCAxLCB7dmFsdWU6IDJ9KTtcblx0fSksICdSZWZsZWN0Jywge1xuXHQgIGRlZmluZVByb3BlcnR5OiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5LCBhdHRyaWJ1dGVzKXtcblx0ICAgIGFuT2JqZWN0KHRhcmdldCk7XG5cdCAgICBwcm9wZXJ0eUtleSA9IHRvUHJpbWl0aXZlKHByb3BlcnR5S2V5LCB0cnVlKTtcblx0ICAgIGFuT2JqZWN0KGF0dHJpYnV0ZXMpO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgZFAuZih0YXJnZXQsIHByb3BlcnR5S2V5LCBhdHRyaWJ1dGVzKTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9IGNhdGNoKGUpe1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI3NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjYuMS40IFJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleSlcblx0dmFyICRleHBvcnQgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIGdPUEQgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MykuZlxuXHQgICwgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtcblx0ICBkZWxldGVQcm9wZXJ0eTogZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleSl7XG5cdCAgICB2YXIgZGVzYyA9IGdPUEQoYW5PYmplY3QodGFyZ2V0KSwgcHJvcGVydHlLZXkpO1xuXHQgICAgcmV0dXJuIGRlc2MgJiYgIWRlc2MuY29uZmlndXJhYmxlID8gZmFsc2UgOiBkZWxldGUgdGFyZ2V0W3Byb3BlcnR5S2V5XTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjc4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIDI2LjEuNSBSZWZsZWN0LmVudW1lcmF0ZSh0YXJnZXQpXG5cdHZhciAkZXhwb3J0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHR2YXIgRW51bWVyYXRlID0gZnVuY3Rpb24oaXRlcmF0ZWQpe1xuXHQgIHRoaXMuX3QgPSBhbk9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldFxuXHQgIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcblx0ICB2YXIga2V5cyA9IHRoaXMuX2sgPSBbXSAgICAgICAvLyBrZXlzXG5cdCAgICAsIGtleTtcblx0ICBmb3Ioa2V5IGluIGl0ZXJhdGVkKWtleXMucHVzaChrZXkpO1xuXHR9O1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MikoRW51bWVyYXRlLCAnT2JqZWN0JywgZnVuY3Rpb24oKXtcblx0ICB2YXIgdGhhdCA9IHRoaXNcblx0ICAgICwga2V5cyA9IHRoYXQuX2tcblx0ICAgICwga2V5O1xuXHQgIGRvIHtcblx0ICAgIGlmKHRoYXQuX2kgPj0ga2V5cy5sZW5ndGgpcmV0dXJuIHt2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlfTtcblx0ICB9IHdoaWxlKCEoKGtleSA9IGtleXNbdGhhdC5faSsrXSkgaW4gdGhhdC5fdCkpO1xuXHQgIHJldHVybiB7dmFsdWU6IGtleSwgZG9uZTogZmFsc2V9O1xuXHR9KTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtcblx0ICBlbnVtZXJhdGU6IGZ1bmN0aW9uIGVudW1lcmF0ZSh0YXJnZXQpe1xuXHQgICAgcmV0dXJuIG5ldyBFbnVtZXJhdGUodGFyZ2V0KTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyNi4xLjYgUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wZXJ0eUtleSBbLCByZWNlaXZlcl0pXG5cdHZhciBnT1BEICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpXG5cdCAgLCBnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKVxuXHQgICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KVxuXHQgICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgaXNPYmplY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KVxuXHQgICwgYW5PYmplY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTtcblx0XG5cdGZ1bmN0aW9uIGdldCh0YXJnZXQsIHByb3BlcnR5S2V5LyosIHJlY2VpdmVyKi8pe1xuXHQgIHZhciByZWNlaXZlciA9IGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdGFyZ2V0IDogYXJndW1lbnRzWzJdXG5cdCAgICAsIGRlc2MsIHByb3RvO1xuXHQgIGlmKGFuT2JqZWN0KHRhcmdldCkgPT09IHJlY2VpdmVyKXJldHVybiB0YXJnZXRbcHJvcGVydHlLZXldO1xuXHQgIGlmKGRlc2MgPSBnT1BELmYodGFyZ2V0LCBwcm9wZXJ0eUtleSkpcmV0dXJuIGhhcyhkZXNjLCAndmFsdWUnKVxuXHQgICAgPyBkZXNjLnZhbHVlXG5cdCAgICA6IGRlc2MuZ2V0ICE9PSB1bmRlZmluZWRcblx0ICAgICAgPyBkZXNjLmdldC5jYWxsKHJlY2VpdmVyKVxuXHQgICAgICA6IHVuZGVmaW5lZDtcblx0ICBpZihpc09iamVjdChwcm90byA9IGdldFByb3RvdHlwZU9mKHRhcmdldCkpKXJldHVybiBnZXQocHJvdG8sIHByb3BlcnR5S2V5LCByZWNlaXZlcik7XG5cdH1cblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtnZXQ6IGdldH0pO1xuXG4vKioqLyB9LFxuLyogMjgwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyNi4xLjcgUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSlcblx0dmFyIGdPUEQgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mylcblx0ICAsICRleHBvcnQgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG5cdCAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSl7XG5cdCAgICByZXR1cm4gZ09QRC5mKGFuT2JqZWN0KHRhcmdldCksIHByb3BlcnR5S2V5KTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjgxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyNi4xLjggUmVmbGVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpXG5cdHZhciAkZXhwb3J0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBnZXRQcm90byA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKVxuXHQgICwgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtcblx0ICBnZXRQcm90b3R5cGVPZjogZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YodGFyZ2V0KXtcblx0ICAgIHJldHVybiBnZXRQcm90byhhbk9iamVjdCh0YXJnZXQpKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjgyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyAyNi4xLjkgUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wZXJ0eUtleSlcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtcblx0ICBoYXM6IGZ1bmN0aW9uIGhhcyh0YXJnZXQsIHByb3BlcnR5S2V5KXtcblx0ICAgIHJldHVybiBwcm9wZXJ0eUtleSBpbiB0YXJnZXQ7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI4MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjYuMS4xMCBSZWZsZWN0LmlzRXh0ZW5zaWJsZSh0YXJnZXQpXG5cdHZhciAkZXhwb3J0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIGFuT2JqZWN0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICwgJGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGU7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG5cdCAgaXNFeHRlbnNpYmxlOiBmdW5jdGlvbiBpc0V4dGVuc2libGUodGFyZ2V0KXtcblx0ICAgIGFuT2JqZWN0KHRhcmdldCk7XG5cdCAgICByZXR1cm4gJGlzRXh0ZW5zaWJsZSA/ICRpc0V4dGVuc2libGUodGFyZ2V0KSA6IHRydWU7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI4NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjYuMS4xMSBSZWZsZWN0Lm93bktleXModGFyZ2V0KVxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge293bktleXM6IF9fd2VicGFja19yZXF1aXJlX18oMjg1KX0pO1xuXG4vKioqLyB9LFxuLyogMjg1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzXG5cdHZhciBnT1BOICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpXG5cdCAgLCBnT1BTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODUpXG5cdCAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBSZWZsZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpLlJlZmxlY3Q7XG5cdG1vZHVsZS5leHBvcnRzID0gUmVmbGVjdCAmJiBSZWZsZWN0Lm93bktleXMgfHwgZnVuY3Rpb24gb3duS2V5cyhpdCl7XG5cdCAgdmFyIGtleXMgICAgICAgPSBnT1BOLmYoYW5PYmplY3QoaXQpKVxuXHQgICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mO1xuXHQgIHJldHVybiBnZXRTeW1ib2xzID8ga2V5cy5jb25jYXQoZ2V0U3ltYm9scyhpdCkpIDoga2V5cztcblx0fTtcblxuLyoqKi8gfSxcbi8qIDI4NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjYuMS4xMiBSZWZsZWN0LnByZXZlbnRFeHRlbnNpb25zKHRhcmdldClcblx0dmFyICRleHBvcnQgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBhbk9iamVjdCAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICwgJHByZXZlbnRFeHRlbnNpb25zID0gT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge1xuXHQgIHByZXZlbnRFeHRlbnNpb25zOiBmdW5jdGlvbiBwcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpe1xuXHQgICAgYW5PYmplY3QodGFyZ2V0KTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGlmKCRwcmV2ZW50RXh0ZW5zaW9ucykkcHJldmVudEV4dGVuc2lvbnModGFyZ2V0KTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9IGNhdGNoKGUpe1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gMjYuMS4xMyBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3BlcnR5S2V5LCBWIFssIHJlY2VpdmVyXSlcblx0dmFyIGRQICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0ICAsIGdPUEQgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mylcblx0ICAsIGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpXG5cdCAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdCAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBjcmVhdGVEZXNjICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpXG5cdCAgLCBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBpc09iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHRcblx0ZnVuY3Rpb24gc2V0KHRhcmdldCwgcHJvcGVydHlLZXksIFYvKiwgcmVjZWl2ZXIqLyl7XG5cdCAgdmFyIHJlY2VpdmVyID0gYXJndW1lbnRzLmxlbmd0aCA8IDQgPyB0YXJnZXQgOiBhcmd1bWVudHNbM11cblx0ICAgICwgb3duRGVzYyAgPSBnT1BELmYoYW5PYmplY3QodGFyZ2V0KSwgcHJvcGVydHlLZXkpXG5cdCAgICAsIGV4aXN0aW5nRGVzY3JpcHRvciwgcHJvdG87XG5cdCAgaWYoIW93bkRlc2Mpe1xuXHQgICAgaWYoaXNPYmplY3QocHJvdG8gPSBnZXRQcm90b3R5cGVPZih0YXJnZXQpKSl7XG5cdCAgICAgIHJldHVybiBzZXQocHJvdG8sIHByb3BlcnR5S2V5LCBWLCByZWNlaXZlcik7XG5cdCAgICB9XG5cdCAgICBvd25EZXNjID0gY3JlYXRlRGVzYygwKTtcblx0ICB9XG5cdCAgaWYoaGFzKG93bkRlc2MsICd2YWx1ZScpKXtcblx0ICAgIGlmKG93bkRlc2Mud3JpdGFibGUgPT09IGZhbHNlIHx8ICFpc09iamVjdChyZWNlaXZlcikpcmV0dXJuIGZhbHNlO1xuXHQgICAgZXhpc3RpbmdEZXNjcmlwdG9yID0gZ09QRC5mKHJlY2VpdmVyLCBwcm9wZXJ0eUtleSkgfHwgY3JlYXRlRGVzYygwKTtcblx0ICAgIGV4aXN0aW5nRGVzY3JpcHRvci52YWx1ZSA9IFY7XG5cdCAgICBkUC5mKHJlY2VpdmVyLCBwcm9wZXJ0eUtleSwgZXhpc3RpbmdEZXNjcmlwdG9yKTtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gb3duRGVzYy5zZXQgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogKG93bkRlc2Muc2V0LmNhbGwocmVjZWl2ZXIsIFYpLCB0cnVlKTtcblx0fVxuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge3NldDogc2V0fSk7XG5cbi8qKiovIH0sXG4vKiAyODggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIDI2LjEuMTQgUmVmbGVjdC5zZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvKVxuXHR2YXIgJGV4cG9ydCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgc2V0UHJvdG8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNSk7XG5cdFxuXHRpZihzZXRQcm90bykkZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG5cdCAgc2V0UHJvdG90eXBlT2Y6IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKHRhcmdldCwgcHJvdG8pe1xuXHQgICAgc2V0UHJvdG8uY2hlY2sodGFyZ2V0LCBwcm90byk7XG5cdCAgICB0cnkge1xuXHQgICAgICBzZXRQcm90by5zZXQodGFyZ2V0LCBwcm90byk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyODkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzXG5cdHZhciAkZXhwb3J0ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJGluY2x1ZGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCkodHJ1ZSk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCwgJ0FycmF5Jywge1xuXHQgIGluY2x1ZGVzOiBmdW5jdGlvbiBpbmNsdWRlcyhlbCAvKiwgZnJvbUluZGV4ID0gMCAqLyl7XG5cdCAgICByZXR1cm4gJGluY2x1ZGVzKHRoaXMsIGVsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMjI4KSgnaW5jbHVkZXMnKTtcblxuLyoqKi8gfSxcbi8qIDI5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vbWF0aGlhc2J5bmVucy9TdHJpbmcucHJvdG90eXBlLmF0XG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICRhdCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSkodHJ1ZSk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCwgJ1N0cmluZycsIHtcblx0ICBhdDogZnVuY3Rpb24gYXQocG9zKXtcblx0ICAgIHJldHVybiAkYXQodGhpcywgcG9zKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXN0cmluZy1wYWQtc3RhcnQtZW5kXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICRwYWQgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5Mik7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCwgJ1N0cmluZycsIHtcblx0ICBwYWRTdGFydDogZnVuY3Rpb24gcGFkU3RhcnQobWF4TGVuZ3RoIC8qLCBmaWxsU3RyaW5nID0gJyAnICovKXtcblx0ICAgIHJldHVybiAkcGFkKHRoaXMsIG1heExlbmd0aCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIHRydWUpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAyOTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXN0cmluZy1wYWQtc3RhcnQtZW5kXG5cdHZhciB0b0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgLCByZXBlYXQgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKVxuXHQgICwgZGVmaW5lZCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGhhdCwgbWF4TGVuZ3RoLCBmaWxsU3RyaW5nLCBsZWZ0KXtcblx0ICB2YXIgUyAgICAgICAgICAgID0gU3RyaW5nKGRlZmluZWQodGhhdCkpXG5cdCAgICAsIHN0cmluZ0xlbmd0aCA9IFMubGVuZ3RoXG5cdCAgICAsIGZpbGxTdHIgICAgICA9IGZpbGxTdHJpbmcgPT09IHVuZGVmaW5lZCA/ICcgJyA6IFN0cmluZyhmaWxsU3RyaW5nKVxuXHQgICAgLCBpbnRNYXhMZW5ndGggPSB0b0xlbmd0aChtYXhMZW5ndGgpO1xuXHQgIGlmKGludE1heExlbmd0aCA8PSBzdHJpbmdMZW5ndGggfHwgZmlsbFN0ciA9PSAnJylyZXR1cm4gUztcblx0ICB2YXIgZmlsbExlbiA9IGludE1heExlbmd0aCAtIHN0cmluZ0xlbmd0aFxuXHQgICAgLCBzdHJpbmdGaWxsZXIgPSByZXBlYXQuY2FsbChmaWxsU3RyLCBNYXRoLmNlaWwoZmlsbExlbiAvIGZpbGxTdHIubGVuZ3RoKSk7XG5cdCAgaWYoc3RyaW5nRmlsbGVyLmxlbmd0aCA+IGZpbGxMZW4pc3RyaW5nRmlsbGVyID0gc3RyaW5nRmlsbGVyLnNsaWNlKDAsIGZpbGxMZW4pO1xuXHQgIHJldHVybiBsZWZ0ID8gc3RyaW5nRmlsbGVyICsgUyA6IFMgKyBzdHJpbmdGaWxsZXI7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDI5MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZFxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCAkcGFkICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOTIpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAsICdTdHJpbmcnLCB7XG5cdCAgcGFkRW5kOiBmdW5jdGlvbiBwYWRFbmQobWF4TGVuZ3RoIC8qLCBmaWxsU3RyaW5nID0gJyAnICovKXtcblx0ICAgIHJldHVybiAkcGFkKHRoaXMsIG1heExlbmd0aCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIGZhbHNlKTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMjk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zZWJtYXJrYmFnZS9lY21hc2NyaXB0LXN0cmluZy1sZWZ0LXJpZ2h0LXRyaW1cblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMjUpKCd0cmltTGVmdCcsIGZ1bmN0aW9uKCR0cmltKXtcblx0ICByZXR1cm4gZnVuY3Rpb24gdHJpbUxlZnQoKXtcblx0ICAgIHJldHVybiAkdHJpbSh0aGlzLCAxKTtcblx0ICB9O1xuXHR9LCAndHJpbVN0YXJ0Jyk7XG5cbi8qKiovIH0sXG4vKiAyOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL3NlYm1hcmtiYWdlL2VjbWFzY3JpcHQtc3RyaW5nLWxlZnQtcmlnaHQtdHJpbVxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSkoJ3RyaW1SaWdodCcsIGZ1bmN0aW9uKCR0cmltKXtcblx0ICByZXR1cm4gZnVuY3Rpb24gdHJpbVJpZ2h0KCl7XG5cdCAgICByZXR1cm4gJHRyaW0odGhpcywgMik7XG5cdCAgfTtcblx0fSwgJ3RyaW1FbmQnKTtcblxuLyoqKi8gfSxcbi8qIDI5NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL1N0cmluZy5wcm90b3R5cGUubWF0Y2hBbGwvXG5cdHZhciAkZXhwb3J0ICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBkZWZpbmVkICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpXG5cdCAgLCB0b0xlbmd0aCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpXG5cdCAgLCBpc1JlZ0V4cCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTc2KVxuXHQgICwgZ2V0RmxhZ3MgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzOClcblx0ICAsIFJlZ0V4cFByb3RvID0gUmVnRXhwLnByb3RvdHlwZTtcblx0XG5cdHZhciAkUmVnRXhwU3RyaW5nSXRlcmF0b3IgPSBmdW5jdGlvbihyZWdleHAsIHN0cmluZyl7XG5cdCAgdGhpcy5fciA9IHJlZ2V4cDtcblx0ICB0aGlzLl9zID0gc3RyaW5nO1xuXHR9O1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxNzIpKCRSZWdFeHBTdHJpbmdJdGVyYXRvciwgJ1JlZ0V4cCBTdHJpbmcnLCBmdW5jdGlvbiBuZXh0KCl7XG5cdCAgdmFyIG1hdGNoID0gdGhpcy5fci5leGVjKHRoaXMuX3MpO1xuXHQgIHJldHVybiB7dmFsdWU6IG1hdGNoLCBkb25lOiBtYXRjaCA9PT0gbnVsbH07XG5cdH0pO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAsICdTdHJpbmcnLCB7XG5cdCAgbWF0Y2hBbGw6IGZ1bmN0aW9uIG1hdGNoQWxsKHJlZ2V4cCl7XG5cdCAgICBkZWZpbmVkKHRoaXMpO1xuXHQgICAgaWYoIWlzUmVnRXhwKHJlZ2V4cCkpdGhyb3cgVHlwZUVycm9yKHJlZ2V4cCArICcgaXMgbm90IGEgcmVnZXhwIScpO1xuXHQgICAgdmFyIFMgICAgID0gU3RyaW5nKHRoaXMpXG5cdCAgICAgICwgZmxhZ3MgPSAnZmxhZ3MnIGluIFJlZ0V4cFByb3RvID8gU3RyaW5nKHJlZ2V4cC5mbGFncykgOiBnZXRGbGFncy5jYWxsKHJlZ2V4cClcblx0ICAgICAgLCByeCAgICA9IG5ldyBSZWdFeHAocmVnZXhwLnNvdXJjZSwgfmZsYWdzLmluZGV4T2YoJ2cnKSA/IGZsYWdzIDogJ2cnICsgZmxhZ3MpO1xuXHQgICAgcngubGFzdEluZGV4ID0gdG9MZW5ndGgocmVnZXhwLmxhc3RJbmRleCk7XG5cdCAgICByZXR1cm4gbmV3ICRSZWdFeHBTdHJpbmdJdGVyYXRvcihyeCwgUyk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDI5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg2OSkoJ2FzeW5jSXRlcmF0b3InKTtcblxuLyoqKi8gfSxcbi8qIDI5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg2OSkoJ29ic2VydmFibGUnKTtcblxuLyoqKi8gfSxcbi8qIDI5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvcnNcblx0dmFyICRleHBvcnQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIG93bktleXMgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyODUpXG5cdCAgLCB0b0lPYmplY3QgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpXG5cdCAgLCBnT1BEICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpXG5cdCAgLCBjcmVhdGVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjA1KTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge1xuXHQgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnM6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob2JqZWN0KXtcblx0ICAgIHZhciBPICAgICAgID0gdG9JT2JqZWN0KG9iamVjdClcblx0ICAgICAgLCBnZXREZXNjID0gZ09QRC5mXG5cdCAgICAgICwga2V5cyAgICA9IG93bktleXMoTylcblx0ICAgICAgLCByZXN1bHQgID0ge31cblx0ICAgICAgLCBpICAgICAgID0gMFxuXHQgICAgICAsIGtleTtcblx0ICAgIHdoaWxlKGtleXMubGVuZ3RoID4gaSljcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGtleSA9IGtleXNbaSsrXSwgZ2V0RGVzYyhPLCBrZXkpKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDMwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LXZhbHVlcy1lbnRyaWVzXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICR2YWx1ZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwMSkoZmFsc2UpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7XG5cdCAgdmFsdWVzOiBmdW5jdGlvbiB2YWx1ZXMoaXQpe1xuXHQgICAgcmV0dXJuICR2YWx1ZXMoaXQpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAzMDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRLZXlzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKVxuXHQgICwgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NClcblx0ICAsIGlzRW51bSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODYpLmY7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXNFbnRyaWVzKXtcblx0ICByZXR1cm4gZnVuY3Rpb24oaXQpe1xuXHQgICAgdmFyIE8gICAgICA9IHRvSU9iamVjdChpdClcblx0ICAgICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pXG5cdCAgICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGhcblx0ICAgICAgLCBpICAgICAgPSAwXG5cdCAgICAgICwgcmVzdWx0ID0gW11cblx0ICAgICAgLCBrZXk7XG5cdCAgICB3aGlsZShsZW5ndGggPiBpKWlmKGlzRW51bS5jYWxsKE8sIGtleSA9IGtleXNbaSsrXSkpe1xuXHQgICAgICByZXN1bHQucHVzaChpc0VudHJpZXMgPyBba2V5LCBPW2tleV1dIDogT1trZXldKTtcblx0ICAgIH0gcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMzAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtdmFsdWVzLWVudHJpZXNcblx0dmFyICRleHBvcnQgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsICRlbnRyaWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMDEpKHRydWUpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7XG5cdCAgZW50cmllczogZnVuY3Rpb24gZW50cmllcyhpdCl7XG5cdCAgICByZXR1cm4gJGVudHJpZXMoaXQpO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAzMDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCB0b09iamVjdCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMClcblx0ICAsIGFGdW5jdGlvbiAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpXG5cdCAgLCAkZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblx0XG5cdC8vIEIuMi4yLjIgT2JqZWN0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKFAsIGdldHRlcilcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0OCkgJiYgJGV4cG9ydCgkZXhwb3J0LlAgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwNCksICdPYmplY3QnLCB7XG5cdCAgX19kZWZpbmVHZXR0ZXJfXzogZnVuY3Rpb24gX19kZWZpbmVHZXR0ZXJfXyhQLCBnZXR0ZXIpe1xuXHQgICAgJGRlZmluZVByb3BlcnR5LmYodG9PYmplY3QodGhpcyksIFAsIHtnZXQ6IGFGdW5jdGlvbihnZXR0ZXIpLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWV9KTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMzA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBGb3JjZWQgcmVwbGFjZW1lbnQgcHJvdG90eXBlIGFjY2Vzc29ycyBtZXRob2RzXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCl8fCAhX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkoZnVuY3Rpb24oKXtcblx0ICB2YXIgSyA9IE1hdGgucmFuZG9tKCk7XG5cdCAgLy8gSW4gRkYgdGhyb3dzIG9ubHkgZGVmaW5lIG1ldGhvZHNcblx0ICBfX2RlZmluZVNldHRlcl9fLmNhbGwobnVsbCwgSywgZnVuY3Rpb24oKXsgLyogZW1wdHkgKi99KTtcblx0ICBkZWxldGUgX193ZWJwYWNrX3JlcXVpcmVfXyg0NilbS107XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMzA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciAkZXhwb3J0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgdG9PYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApXG5cdCAgLCBhRnVuY3Rpb24gICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKVxuXHQgICwgJGRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdFxuXHQvLyBCLjIuMi4zIE9iamVjdC5wcm90b3R5cGUuX19kZWZpbmVTZXR0ZXJfXyhQLCBzZXR0ZXIpXG5cdF9fd2VicGFja19yZXF1aXJlX18oNDgpICYmICRleHBvcnQoJGV4cG9ydC5QICsgX193ZWJwYWNrX3JlcXVpcmVfXygzMDQpLCAnT2JqZWN0Jywge1xuXHQgIF9fZGVmaW5lU2V0dGVyX186IGZ1bmN0aW9uIF9fZGVmaW5lU2V0dGVyX18oUCwgc2V0dGVyKXtcblx0ICAgICRkZWZpbmVQcm9wZXJ0eS5mKHRvT2JqZWN0KHRoaXMpLCBQLCB7c2V0OiBhRnVuY3Rpb24oc2V0dGVyKSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlfSk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDMwNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCAgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIHRvT2JqZWN0ICAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTAwKVxuXHQgICwgdG9QcmltaXRpdmUgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OClcblx0ICAsIGdldFByb3RvdHlwZU9mICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKVxuXHQgICwgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MykuZjtcblx0XG5cdC8vIEIuMi4yLjQgT2JqZWN0LnByb3RvdHlwZS5fX2xvb2t1cEdldHRlcl9fKFApXG5cdF9fd2VicGFja19yZXF1aXJlX18oNDgpICYmICRleHBvcnQoJGV4cG9ydC5QICsgX193ZWJwYWNrX3JlcXVpcmVfXygzMDQpLCAnT2JqZWN0Jywge1xuXHQgIF9fbG9va3VwR2V0dGVyX186IGZ1bmN0aW9uIF9fbG9va3VwR2V0dGVyX18oUCl7XG5cdCAgICB2YXIgTyA9IHRvT2JqZWN0KHRoaXMpXG5cdCAgICAgICwgSyA9IHRvUHJpbWl0aXZlKFAsIHRydWUpXG5cdCAgICAgICwgRDtcblx0ICAgIGRvIHtcblx0ICAgICAgaWYoRCA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBLKSlyZXR1cm4gRC5nZXQ7XG5cdCAgICB9IHdoaWxlKE8gPSBnZXRQcm90b3R5cGVPZihPKSk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDMwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgJGV4cG9ydCAgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0ICAsIHRvT2JqZWN0ICAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTAwKVxuXHQgICwgdG9QcmltaXRpdmUgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OClcblx0ICAsIGdldFByb3RvdHlwZU9mICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKVxuXHQgICwgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MykuZjtcblx0XG5cdC8vIEIuMi4yLjUgT2JqZWN0LnByb3RvdHlwZS5fX2xvb2t1cFNldHRlcl9fKFApXG5cdF9fd2VicGFja19yZXF1aXJlX18oNDgpICYmICRleHBvcnQoJGV4cG9ydC5QICsgX193ZWJwYWNrX3JlcXVpcmVfXygzMDQpLCAnT2JqZWN0Jywge1xuXHQgIF9fbG9va3VwU2V0dGVyX186IGZ1bmN0aW9uIF9fbG9va3VwU2V0dGVyX18oUCl7XG5cdCAgICB2YXIgTyA9IHRvT2JqZWN0KHRoaXMpXG5cdCAgICAgICwgSyA9IHRvUHJpbWl0aXZlKFAsIHRydWUpXG5cdCAgICAgICwgRDtcblx0ICAgIGRvIHtcblx0ICAgICAgaWYoRCA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBLKSlyZXR1cm4gRC5zZXQ7XG5cdCAgICB9IHdoaWxlKE8gPSBnZXRQcm90b3R5cGVPZihPKSk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDMwOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTlxuXHR2YXIgJGV4cG9ydCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5SLCAnTWFwJywge3RvSlNPTjogX193ZWJwYWNrX3JlcXVpcmVfXygzMDkpKCdNYXAnKX0pO1xuXG4vKioqLyB9LFxuLyogMzA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OXG5cdHZhciBjbGFzc29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpXG5cdCAgLCBmcm9tICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTApO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE5BTUUpe1xuXHQgIHJldHVybiBmdW5jdGlvbiB0b0pTT04oKXtcblx0ICAgIGlmKGNsYXNzb2YodGhpcykgIT0gTkFNRSl0aHJvdyBUeXBlRXJyb3IoTkFNRSArIFwiI3RvSlNPTiBpc24ndCBnZW5lcmljXCIpO1xuXHQgICAgcmV0dXJuIGZyb20odGhpcyk7XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDMxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGZvck9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyLCBJVEVSQVRPUil7XG5cdCAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgIGZvck9mKGl0ZXIsIGZhbHNlLCByZXN1bHQucHVzaCwgcmVzdWx0LCBJVEVSQVRPUik7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMzExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OXG5cdHZhciAkZXhwb3J0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LlIsICdTZXQnLCB7dG9KU09OOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwOSkoJ1NldCcpfSk7XG5cbi8qKiovIH0sXG4vKiAzMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9samhhcmIvcHJvcG9zYWwtZ2xvYmFsXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ1N5c3RlbScsIHtnbG9iYWw6IF9fd2VicGFja19yZXF1aXJlX18oNDYpfSk7XG5cbi8qKiovIH0sXG4vKiAzMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9samhhcmIvcHJvcG9zYWwtaXMtZXJyb3Jcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgY29mICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdFcnJvcicsIHtcblx0ICBpc0Vycm9yOiBmdW5jdGlvbiBpc0Vycm9yKGl0KXtcblx0ICAgIHJldHVybiBjb2YoaXQpID09PSAnRXJyb3InO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAzMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgaWFkZGg6IGZ1bmN0aW9uIGlhZGRoKHgwLCB4MSwgeTAsIHkxKXtcblx0ICAgIHZhciAkeDAgPSB4MCA+Pj4gMFxuXHQgICAgICAsICR4MSA9IHgxID4+PiAwXG5cdCAgICAgICwgJHkwID0geTAgPj4+IDA7XG5cdCAgICByZXR1cm4gJHgxICsgKHkxID4+PiAwKSArICgoJHgwICYgJHkwIHwgKCR4MCB8ICR5MCkgJiB+KCR4MCArICR5MCA+Pj4gMCkpID4+PiAzMSkgfCAwO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAzMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG5cdCAgaXN1Ymg6IGZ1bmN0aW9uIGlzdWJoKHgwLCB4MSwgeTAsIHkxKXtcblx0ICAgIHZhciAkeDAgPSB4MCA+Pj4gMFxuXHQgICAgICAsICR4MSA9IHgxID4+PiAwXG5cdCAgICAgICwgJHkwID0geTAgPj4+IDA7XG5cdCAgICByZXR1cm4gJHgxIC0gKHkxID4+PiAwKSAtICgofiR4MCAmICR5MCB8IH4oJHgwIF4gJHkwKSAmICR4MCAtICR5MCA+Pj4gMCkgPj4+IDMxKSB8IDA7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDMxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDNcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcblx0ICBpbXVsaDogZnVuY3Rpb24gaW11bGgodSwgdil7XG5cdCAgICB2YXIgVUlOVDE2ID0gMHhmZmZmXG5cdCAgICAgICwgJHUgPSArdVxuXHQgICAgICAsICR2ID0gK3Zcblx0ICAgICAgLCB1MCA9ICR1ICYgVUlOVDE2XG5cdCAgICAgICwgdjAgPSAkdiAmIFVJTlQxNlxuXHQgICAgICAsIHUxID0gJHUgPj4gMTZcblx0ICAgICAgLCB2MSA9ICR2ID4+IDE2XG5cdCAgICAgICwgdCAgPSAodTEgKiB2MCA+Pj4gMCkgKyAodTAgKiB2MCA+Pj4gMTYpO1xuXHQgICAgcmV0dXJuIHUxICogdjEgKyAodCA+PiAxNikgKyAoKHUwICogdjEgPj4+IDApICsgKHQgJiBVSU5UMTYpID4+IDE2KTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMzE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwM1xuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywge1xuXHQgIHVtdWxoOiBmdW5jdGlvbiB1bXVsaCh1LCB2KXtcblx0ICAgIHZhciBVSU5UMTYgPSAweGZmZmZcblx0ICAgICAgLCAkdSA9ICt1XG5cdCAgICAgICwgJHYgPSArdlxuXHQgICAgICAsIHUwID0gJHUgJiBVSU5UMTZcblx0ICAgICAgLCB2MCA9ICR2ICYgVUlOVDE2XG5cdCAgICAgICwgdTEgPSAkdSA+Pj4gMTZcblx0ICAgICAgLCB2MSA9ICR2ID4+PiAxNlxuXHQgICAgICAsIHQgID0gKHUxICogdjAgPj4+IDApICsgKHUwICogdjAgPj4+IDE2KTtcblx0ICAgIHJldHVybiB1MSAqIHYxICsgKHQgPj4+IDE2KSArICgodTAgKiB2MSA+Pj4gMCkgKyAodCAmIFVJTlQxNikgPj4+IDE2KTtcblx0ICB9XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMzE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWV0YWRhdGEgICAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzE5KVxuXHQgICwgYW5PYmplY3QgICAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCB0b01ldGFLZXkgICAgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5XG5cdCAgLCBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhID0gbWV0YWRhdGEuc2V0O1xuXHRcblx0bWV0YWRhdGEuZXhwKHtkZWZpbmVNZXRhZGF0YTogZnVuY3Rpb24gZGVmaW5lTWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUsIHRhcmdldCwgdGFyZ2V0S2V5KXtcblx0ICBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCBhbk9iamVjdCh0YXJnZXQpLCB0b01ldGFLZXkodGFyZ2V0S2V5KSk7XG5cdH19KTtcblxuLyoqKi8gfSxcbi8qIDMxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIE1hcCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1Mylcblx0ICAsICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgc2hhcmVkICA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpKCdtZXRhZGF0YScpXG5cdCAgLCBzdG9yZSAgID0gc2hhcmVkLnN0b3JlIHx8IChzaGFyZWQuc3RvcmUgPSBuZXcgKF9fd2VicGFja19yZXF1aXJlX18oMjU3KSkpO1xuXHRcblx0dmFyIGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAgPSBmdW5jdGlvbih0YXJnZXQsIHRhcmdldEtleSwgY3JlYXRlKXtcblx0ICB2YXIgdGFyZ2V0TWV0YWRhdGEgPSBzdG9yZS5nZXQodGFyZ2V0KTtcblx0ICBpZighdGFyZ2V0TWV0YWRhdGEpe1xuXHQgICAgaWYoIWNyZWF0ZSlyZXR1cm4gdW5kZWZpbmVkO1xuXHQgICAgc3RvcmUuc2V0KHRhcmdldCwgdGFyZ2V0TWV0YWRhdGEgPSBuZXcgTWFwKTtcblx0ICB9XG5cdCAgdmFyIGtleU1ldGFkYXRhID0gdGFyZ2V0TWV0YWRhdGEuZ2V0KHRhcmdldEtleSk7XG5cdCAgaWYoIWtleU1ldGFkYXRhKXtcblx0ICAgIGlmKCFjcmVhdGUpcmV0dXJuIHVuZGVmaW5lZDtcblx0ICAgIHRhcmdldE1ldGFkYXRhLnNldCh0YXJnZXRLZXksIGtleU1ldGFkYXRhID0gbmV3IE1hcCk7XG5cdCAgfSByZXR1cm4ga2V5TWV0YWRhdGE7XG5cdH07XG5cdHZhciBvcmRpbmFyeUhhc093bk1ldGFkYXRhID0gZnVuY3Rpb24oTWV0YWRhdGFLZXksIE8sIFApe1xuXHQgIHZhciBtZXRhZGF0YU1hcCA9IGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgZmFsc2UpO1xuXHQgIHJldHVybiBtZXRhZGF0YU1hcCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBtZXRhZGF0YU1hcC5oYXMoTWV0YWRhdGFLZXkpO1xuXHR9O1xuXHR2YXIgb3JkaW5hcnlHZXRPd25NZXRhZGF0YSA9IGZ1bmN0aW9uKE1ldGFkYXRhS2V5LCBPLCBQKXtcblx0ICB2YXIgbWV0YWRhdGFNYXAgPSBnZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIGZhbHNlKTtcblx0ICByZXR1cm4gbWV0YWRhdGFNYXAgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IG1ldGFkYXRhTWFwLmdldChNZXRhZGF0YUtleSk7XG5cdH07XG5cdHZhciBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhID0gZnVuY3Rpb24oTWV0YWRhdGFLZXksIE1ldGFkYXRhVmFsdWUsIE8sIFApe1xuXHQgIGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgdHJ1ZSkuc2V0KE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlKTtcblx0fTtcblx0dmFyIG9yZGluYXJ5T3duTWV0YWRhdGFLZXlzID0gZnVuY3Rpb24odGFyZ2V0LCB0YXJnZXRLZXkpe1xuXHQgIHZhciBtZXRhZGF0YU1hcCA9IGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAodGFyZ2V0LCB0YXJnZXRLZXksIGZhbHNlKVxuXHQgICAgLCBrZXlzICAgICAgICA9IFtdO1xuXHQgIGlmKG1ldGFkYXRhTWFwKW1ldGFkYXRhTWFwLmZvckVhY2goZnVuY3Rpb24oXywga2V5KXsga2V5cy5wdXNoKGtleSk7IH0pO1xuXHQgIHJldHVybiBrZXlzO1xuXHR9O1xuXHR2YXIgdG9NZXRhS2V5ID0gZnVuY3Rpb24oaXQpe1xuXHQgIHJldHVybiBpdCA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBpdCA9PSAnc3ltYm9sJyA/IGl0IDogU3RyaW5nKGl0KTtcblx0fTtcblx0dmFyIGV4cCA9IGZ1bmN0aW9uKE8pe1xuXHQgICRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIE8pO1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgc3RvcmU6IHN0b3JlLFxuXHQgIG1hcDogZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcCxcblx0ICBoYXM6IG9yZGluYXJ5SGFzT3duTWV0YWRhdGEsXG5cdCAgZ2V0OiBvcmRpbmFyeUdldE93bk1ldGFkYXRhLFxuXHQgIHNldDogb3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSxcblx0ICBrZXlzOiBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyxcblx0ICBrZXk6IHRvTWV0YUtleSxcblx0ICBleHA6IGV4cFxuXHR9O1xuXG4vKioqLyB9LFxuLyogMzIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWV0YWRhdGEgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzE5KVxuXHQgICwgYW5PYmplY3QgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCB0b01ldGFLZXkgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5XG5cdCAgLCBnZXRPckNyZWF0ZU1ldGFkYXRhTWFwID0gbWV0YWRhdGEubWFwXG5cdCAgLCBzdG9yZSAgICAgICAgICAgICAgICAgID0gbWV0YWRhdGEuc3RvcmU7XG5cdFxuXHRtZXRhZGF0YS5leHAoe2RlbGV0ZU1ldGFkYXRhOiBmdW5jdGlvbiBkZWxldGVNZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0IC8qLCB0YXJnZXRLZXkgKi8pe1xuXHQgIHZhciB0YXJnZXRLZXkgICA9IGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSlcblx0ICAgICwgbWV0YWRhdGFNYXAgPSBnZXRPckNyZWF0ZU1ldGFkYXRhTWFwKGFuT2JqZWN0KHRhcmdldCksIHRhcmdldEtleSwgZmFsc2UpO1xuXHQgIGlmKG1ldGFkYXRhTWFwID09PSB1bmRlZmluZWQgfHwgIW1ldGFkYXRhTWFwWydkZWxldGUnXShtZXRhZGF0YUtleSkpcmV0dXJuIGZhbHNlO1xuXHQgIGlmKG1ldGFkYXRhTWFwLnNpemUpcmV0dXJuIHRydWU7XG5cdCAgdmFyIHRhcmdldE1ldGFkYXRhID0gc3RvcmUuZ2V0KHRhcmdldCk7XG5cdCAgdGFyZ2V0TWV0YWRhdGFbJ2RlbGV0ZSddKHRhcmdldEtleSk7XG5cdCAgcmV0dXJuICEhdGFyZ2V0TWV0YWRhdGEuc2l6ZSB8fCBzdG9yZVsnZGVsZXRlJ10odGFyZ2V0KTtcblx0fX0pO1xuXG4vKioqLyB9LFxuLyogMzIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWV0YWRhdGEgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzE5KVxuXHQgICwgYW5PYmplY3QgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBnZXRQcm90b3R5cGVPZiAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpXG5cdCAgLCBvcmRpbmFyeUhhc093bk1ldGFkYXRhID0gbWV0YWRhdGEuaGFzXG5cdCAgLCBvcmRpbmFyeUdldE93bk1ldGFkYXRhID0gbWV0YWRhdGEuZ2V0XG5cdCAgLCB0b01ldGFLZXkgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5O1xuXHRcblx0dmFyIG9yZGluYXJ5R2V0TWV0YWRhdGEgPSBmdW5jdGlvbihNZXRhZGF0YUtleSwgTywgUCl7XG5cdCAgdmFyIGhhc093biA9IG9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xuXHQgIGlmKGhhc093bilyZXR1cm4gb3JkaW5hcnlHZXRPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCk7XG5cdCAgdmFyIHBhcmVudCA9IGdldFByb3RvdHlwZU9mKE8pO1xuXHQgIHJldHVybiBwYXJlbnQgIT09IG51bGwgPyBvcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LCBwYXJlbnQsIFApIDogdW5kZWZpbmVkO1xuXHR9O1xuXHRcblx0bWV0YWRhdGEuZXhwKHtnZXRNZXRhZGF0YTogZnVuY3Rpb24gZ2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCAvKiwgdGFyZ2V0S2V5ICovKXtcblx0ICByZXR1cm4gb3JkaW5hcnlHZXRNZXRhZGF0YShtZXRhZGF0YUtleSwgYW5PYmplY3QodGFyZ2V0KSwgYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiB0b01ldGFLZXkoYXJndW1lbnRzWzJdKSk7XG5cdH19KTtcblxuLyoqKi8gfSxcbi8qIDMyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFNldCAgICAgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNTYpXG5cdCAgLCBmcm9tICAgICAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzEwKVxuXHQgICwgbWV0YWRhdGEgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxOSlcblx0ICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsIGdldFByb3RvdHlwZU9mICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpXG5cdCAgLCBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyA9IG1ldGFkYXRhLmtleXNcblx0ICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5O1xuXHRcblx0dmFyIG9yZGluYXJ5TWV0YWRhdGFLZXlzID0gZnVuY3Rpb24oTywgUCl7XG5cdCAgdmFyIG9LZXlzICA9IG9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKE8sIFApXG5cdCAgICAsIHBhcmVudCA9IGdldFByb3RvdHlwZU9mKE8pO1xuXHQgIGlmKHBhcmVudCA9PT0gbnVsbClyZXR1cm4gb0tleXM7XG5cdCAgdmFyIHBLZXlzICA9IG9yZGluYXJ5TWV0YWRhdGFLZXlzKHBhcmVudCwgUCk7XG5cdCAgcmV0dXJuIHBLZXlzLmxlbmd0aCA/IG9LZXlzLmxlbmd0aCA/IGZyb20obmV3IFNldChvS2V5cy5jb25jYXQocEtleXMpKSkgOiBwS2V5cyA6IG9LZXlzO1xuXHR9O1xuXHRcblx0bWV0YWRhdGEuZXhwKHtnZXRNZXRhZGF0YUtleXM6IGZ1bmN0aW9uIGdldE1ldGFkYXRhS2V5cyh0YXJnZXQgLyosIHRhcmdldEtleSAqLyl7XG5cdCAgcmV0dXJuIG9yZGluYXJ5TWV0YWRhdGFLZXlzKGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1sxXSkpO1xuXHR9fSk7XG5cbi8qKiovIH0sXG4vKiAzMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtZXRhZGF0YSAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTkpXG5cdCAgLCBhbk9iamVjdCAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsIG9yZGluYXJ5R2V0T3duTWV0YWRhdGEgPSBtZXRhZGF0YS5nZXRcblx0ICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXk7XG5cdFxuXHRtZXRhZGF0YS5leHAoe2dldE93bk1ldGFkYXRhOiBmdW5jdGlvbiBnZXRPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0IC8qLCB0YXJnZXRLZXkgKi8pe1xuXHQgIHJldHVybiBvcmRpbmFyeUdldE93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBhbk9iamVjdCh0YXJnZXQpXG5cdCAgICAsIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpO1xuXHR9fSk7XG5cbi8qKiovIH0sXG4vKiAzMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtZXRhZGF0YSAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzE5KVxuXHQgICwgYW5PYmplY3QgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICwgb3JkaW5hcnlPd25NZXRhZGF0YUtleXMgPSBtZXRhZGF0YS5rZXlzXG5cdCAgLCB0b01ldGFLZXkgICAgICAgICAgICAgICA9IG1ldGFkYXRhLmtleTtcblx0XG5cdG1ldGFkYXRhLmV4cCh7Z2V0T3duTWV0YWRhdGFLZXlzOiBmdW5jdGlvbiBnZXRPd25NZXRhZGF0YUtleXModGFyZ2V0IC8qLCB0YXJnZXRLZXkgKi8pe1xuXHQgIHJldHVybiBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyhhbk9iamVjdCh0YXJnZXQpLCBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IHVuZGVmaW5lZCA6IHRvTWV0YUtleShhcmd1bWVudHNbMV0pKTtcblx0fX0pO1xuXG4vKioqLyB9LFxuLyogMzI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWV0YWRhdGEgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzE5KVxuXHQgICwgYW5PYmplY3QgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBnZXRQcm90b3R5cGVPZiAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpXG5cdCAgLCBvcmRpbmFyeUhhc093bk1ldGFkYXRhID0gbWV0YWRhdGEuaGFzXG5cdCAgLCB0b01ldGFLZXkgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5O1xuXHRcblx0dmFyIG9yZGluYXJ5SGFzTWV0YWRhdGEgPSBmdW5jdGlvbihNZXRhZGF0YUtleSwgTywgUCl7XG5cdCAgdmFyIGhhc093biA9IG9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xuXHQgIGlmKGhhc093bilyZXR1cm4gdHJ1ZTtcblx0ICB2YXIgcGFyZW50ID0gZ2V0UHJvdG90eXBlT2YoTyk7XG5cdCAgcmV0dXJuIHBhcmVudCAhPT0gbnVsbCA/IG9yZGluYXJ5SGFzTWV0YWRhdGEoTWV0YWRhdGFLZXksIHBhcmVudCwgUCkgOiBmYWxzZTtcblx0fTtcblx0XG5cdG1ldGFkYXRhLmV4cCh7aGFzTWV0YWRhdGE6IGZ1bmN0aW9uIGhhc01ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyosIHRhcmdldEtleSAqLyl7XG5cdCAgcmV0dXJuIG9yZGluYXJ5SGFzTWV0YWRhdGEobWV0YWRhdGFLZXksIGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpO1xuXHR9fSk7XG5cbi8qKiovIH0sXG4vKiAzMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtZXRhZGF0YSAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTkpXG5cdCAgLCBhbk9iamVjdCAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsIG9yZGluYXJ5SGFzT3duTWV0YWRhdGEgPSBtZXRhZGF0YS5oYXNcblx0ICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXk7XG5cdFxuXHRtZXRhZGF0YS5leHAoe2hhc093bk1ldGFkYXRhOiBmdW5jdGlvbiBoYXNPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0IC8qLCB0YXJnZXRLZXkgKi8pe1xuXHQgIHJldHVybiBvcmRpbmFyeUhhc093bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBhbk9iamVjdCh0YXJnZXQpXG5cdCAgICAsIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpO1xuXHR9fSk7XG5cbi8qKiovIH0sXG4vKiAzMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtZXRhZGF0YSAgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMTkpXG5cdCAgLCBhbk9iamVjdCAgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAsIGFGdW5jdGlvbiAgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKVxuXHQgICwgdG9NZXRhS2V5ICAgICAgICAgICAgICAgICA9IG1ldGFkYXRhLmtleVxuXHQgICwgb3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSA9IG1ldGFkYXRhLnNldDtcblx0XG5cdG1ldGFkYXRhLmV4cCh7bWV0YWRhdGE6IGZ1bmN0aW9uIG1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKXtcblx0ICByZXR1cm4gZnVuY3Rpb24gZGVjb3JhdG9yKHRhcmdldCwgdGFyZ2V0S2V5KXtcblx0ICAgIG9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEoXG5cdCAgICAgIG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLFxuXHQgICAgICAodGFyZ2V0S2V5ICE9PSB1bmRlZmluZWQgPyBhbk9iamVjdCA6IGFGdW5jdGlvbikodGFyZ2V0KSxcblx0ICAgICAgdG9NZXRhS2V5KHRhcmdldEtleSlcblx0ICAgICk7XG5cdCAgfTtcblx0fX0pO1xuXG4vKioqLyB9LFxuLyogMzI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vcndhbGRyb24vdGMzOS1ub3Rlcy9ibG9iL21hc3Rlci9lczYvMjAxNC0wOS9zZXB0LTI1Lm1kIzUxMC1nbG9iYWxhc2FwLWZvci1lbnF1ZXVpbmctYS1taWNyb3Rhc2tcblx0dmFyICRleHBvcnQgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBtaWNyb3Rhc2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1MSkoKVxuXHQgICwgcHJvY2VzcyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NikucHJvY2Vzc1xuXHQgICwgaXNOb2RlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NikocHJvY2VzcykgPT0gJ3Byb2Nlc3MnO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LkcsIHtcblx0ICBhc2FwOiBmdW5jdGlvbiBhc2FwKGZuKXtcblx0ICAgIHZhciBkb21haW4gPSBpc05vZGUgJiYgcHJvY2Vzcy5kb21haW47XG5cdCAgICBtaWNyb3Rhc2soZG9tYWluID8gZG9tYWluLmJpbmQoZm4pIDogZm4pO1xuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0sXG4vKiAzMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZVxuXHR2YXIgJGV4cG9ydCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgZ2xvYmFsICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgY29yZSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVxuXHQgICwgbWljcm90YXNrICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1MSkoKVxuXHQgICwgT0JTRVJWQUJMRSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnb2JzZXJ2YWJsZScpXG5cdCAgLCBhRnVuY3Rpb24gICA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpXG5cdCAgLCBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgLCBhbkluc3RhbmNlICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQ3KVxuXHQgICwgcmVkZWZpbmVBbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1Milcblx0ICAsIGhpZGUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0ICAsIGZvck9mICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDgpXG5cdCAgLCBSRVRVUk4gICAgICA9IGZvck9mLlJFVFVSTjtcblx0XG5cdHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihmbil7XG5cdCAgcmV0dXJuIGZuID09IG51bGwgPyB1bmRlZmluZWQgOiBhRnVuY3Rpb24oZm4pO1xuXHR9O1xuXHRcblx0dmFyIGNsZWFudXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbihzdWJzY3JpcHRpb24pe1xuXHQgIHZhciBjbGVhbnVwID0gc3Vic2NyaXB0aW9uLl9jO1xuXHQgIGlmKGNsZWFudXApe1xuXHQgICAgc3Vic2NyaXB0aW9uLl9jID0gdW5kZWZpbmVkO1xuXHQgICAgY2xlYW51cCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzdWJzY3JpcHRpb25DbG9zZWQgPSBmdW5jdGlvbihzdWJzY3JpcHRpb24pe1xuXHQgIHJldHVybiBzdWJzY3JpcHRpb24uX28gPT09IHVuZGVmaW5lZDtcblx0fTtcblx0XG5cdHZhciBjbG9zZVN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbil7XG5cdCAgaWYoIXN1YnNjcmlwdGlvbkNsb3NlZChzdWJzY3JpcHRpb24pKXtcblx0ICAgIHN1YnNjcmlwdGlvbi5fbyA9IHVuZGVmaW5lZDtcblx0ICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24ob2JzZXJ2ZXIsIHN1YnNjcmliZXIpe1xuXHQgIGFuT2JqZWN0KG9ic2VydmVyKTtcblx0ICB0aGlzLl9jID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuX28gPSBvYnNlcnZlcjtcblx0ICBvYnNlcnZlciA9IG5ldyBTdWJzY3JpcHRpb25PYnNlcnZlcih0aGlzKTtcblx0ICB0cnkge1xuXHQgICAgdmFyIGNsZWFudXAgICAgICA9IHN1YnNjcmliZXIob2JzZXJ2ZXIpXG5cdCAgICAgICwgc3Vic2NyaXB0aW9uID0gY2xlYW51cDtcblx0ICAgIGlmKGNsZWFudXAgIT0gbnVsbCl7XG5cdCAgICAgIGlmKHR5cGVvZiBjbGVhbnVwLnVuc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nKWNsZWFudXAgPSBmdW5jdGlvbigpeyBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsgfTtcblx0ICAgICAgZWxzZSBhRnVuY3Rpb24oY2xlYW51cCk7XG5cdCAgICAgIHRoaXMuX2MgPSBjbGVhbnVwO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSl7XG5cdCAgICBvYnNlcnZlci5lcnJvcihlKTtcblx0ICAgIHJldHVybjtcblx0ICB9IGlmKHN1YnNjcmlwdGlvbkNsb3NlZCh0aGlzKSljbGVhbnVwU3Vic2NyaXB0aW9uKHRoaXMpO1xuXHR9O1xuXHRcblx0U3Vic2NyaXB0aW9uLnByb3RvdHlwZSA9IHJlZGVmaW5lQWxsKHt9LCB7XG5cdCAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCl7IGNsb3NlU3Vic2NyaXB0aW9uKHRoaXMpOyB9XG5cdH0pO1xuXHRcblx0dmFyIFN1YnNjcmlwdGlvbk9ic2VydmVyID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKXtcblx0ICB0aGlzLl9zID0gc3Vic2NyaXB0aW9uO1xuXHR9O1xuXHRcblx0U3Vic2NyaXB0aW9uT2JzZXJ2ZXIucHJvdG90eXBlID0gcmVkZWZpbmVBbGwoe30sIHtcblx0ICBuZXh0OiBmdW5jdGlvbiBuZXh0KHZhbHVlKXtcblx0ICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zO1xuXHQgICAgaWYoIXN1YnNjcmlwdGlvbkNsb3NlZChzdWJzY3JpcHRpb24pKXtcblx0ICAgICAgdmFyIG9ic2VydmVyID0gc3Vic2NyaXB0aW9uLl9vO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBtID0gZ2V0TWV0aG9kKG9ic2VydmVyLm5leHQpO1xuXHQgICAgICAgIGlmKG0pcmV0dXJuIG0uY2FsbChvYnNlcnZlciwgdmFsdWUpO1xuXHQgICAgICB9IGNhdGNoKGUpe1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBjbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKHZhbHVlKXtcblx0ICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zO1xuXHQgICAgaWYoc3Vic2NyaXB0aW9uQ2xvc2VkKHN1YnNjcmlwdGlvbikpdGhyb3cgdmFsdWU7XG5cdCAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX287XG5cdCAgICBzdWJzY3JpcHRpb24uX28gPSB1bmRlZmluZWQ7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlci5lcnJvcik7XG5cdCAgICAgIGlmKCFtKXRocm93IHZhbHVlO1xuXHQgICAgICB2YWx1ZSA9IG0uY2FsbChvYnNlcnZlciwgdmFsdWUpO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG5cdCAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgfVxuXHQgICAgfSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfSxcblx0ICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUodmFsdWUpe1xuXHQgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuX3M7XG5cdCAgICBpZighc3Vic2NyaXB0aW9uQ2xvc2VkKHN1YnNjcmlwdGlvbikpe1xuXHQgICAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX287XG5cdCAgICAgIHN1YnNjcmlwdGlvbi5fbyA9IHVuZGVmaW5lZDtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlci5jb21wbGV0ZSk7XG5cdCAgICAgICAgdmFsdWUgPSBtID8gbS5jYWxsKG9ic2VydmVyLCB2YWx1ZSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2xlYW51cFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciAkT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlcil7XG5cdCAgYW5JbnN0YW5jZSh0aGlzLCAkT2JzZXJ2YWJsZSwgJ09ic2VydmFibGUnLCAnX2YnKS5fZiA9IGFGdW5jdGlvbihzdWJzY3JpYmVyKTtcblx0fTtcblx0XG5cdHJlZGVmaW5lQWxsKCRPYnNlcnZhYmxlLnByb3RvdHlwZSwge1xuXHQgIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKG9ic2VydmVyKXtcblx0ICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKG9ic2VydmVyLCB0aGlzLl9mKTtcblx0ICB9LFxuXHQgIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goZm4pe1xuXHQgICAgdmFyIHRoYXQgPSB0aGlzO1xuXHQgICAgcmV0dXJuIG5ldyAoY29yZS5Qcm9taXNlIHx8IGdsb2JhbC5Qcm9taXNlKShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgICBhRnVuY3Rpb24oZm4pO1xuXHQgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhhdC5zdWJzY3JpYmUoe1xuXHQgICAgICAgIG5leHQgOiBmdW5jdGlvbih2YWx1ZSl7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXR1cm4gZm4odmFsdWUpO1xuXHQgICAgICAgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICAgICAgcmVqZWN0KGUpO1xuXHQgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVycm9yOiByZWplY3QsXG5cdCAgICAgICAgY29tcGxldGU6IHJlc29sdmVcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH0pO1xuXHRcblx0cmVkZWZpbmVBbGwoJE9ic2VydmFibGUsIHtcblx0ICBmcm9tOiBmdW5jdGlvbiBmcm9tKHgpe1xuXHQgICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiAkT2JzZXJ2YWJsZTtcblx0ICAgIHZhciBtZXRob2QgPSBnZXRNZXRob2QoYW5PYmplY3QoeClbT0JTRVJWQUJMRV0pO1xuXHQgICAgaWYobWV0aG9kKXtcblx0ICAgICAgdmFyIG9ic2VydmFibGUgPSBhbk9iamVjdChtZXRob2QuY2FsbCh4KSk7XG5cdCAgICAgIHJldHVybiBvYnNlcnZhYmxlLmNvbnN0cnVjdG9yID09PSBDID8gb2JzZXJ2YWJsZSA6IG5ldyBDKGZ1bmN0aW9uKG9ic2VydmVyKXtcblx0ICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbihvYnNlcnZlcil7XG5cdCAgICAgIHZhciBkb25lID0gZmFsc2U7XG5cdCAgICAgIG1pY3JvdGFzayhmdW5jdGlvbigpe1xuXHQgICAgICAgIGlmKCFkb25lKXtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGlmKGZvck9mKHgsIGZhbHNlLCBmdW5jdGlvbihpdCl7XG5cdCAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChpdCk7XG5cdCAgICAgICAgICAgICAgaWYoZG9uZSlyZXR1cm4gUkVUVVJOO1xuXHQgICAgICAgICAgICB9KSA9PT0gUkVUVVJOKXJldHVybjtcblx0ICAgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAgIGlmKGRvbmUpdGhyb3cgZTtcblx0ICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH0gb2JzZXJ2ZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKXsgZG9uZSA9IHRydWU7IH07XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIG9mOiBmdW5jdGlvbiBvZigpe1xuXHQgICAgZm9yKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGgsIGl0ZW1zID0gQXJyYXkobCk7IGkgPCBsOylpdGVtc1tpXSA9IGFyZ3VtZW50c1tpKytdO1xuXHQgICAgcmV0dXJuIG5ldyAodHlwZW9mIHRoaXMgPT09ICdmdW5jdGlvbicgPyB0aGlzIDogJE9ic2VydmFibGUpKGZ1bmN0aW9uKG9ic2VydmVyKXtcblx0ICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcblx0ICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgaWYoIWRvbmUpe1xuXHQgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKXtcblx0ICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChpdGVtc1tpXSk7XG5cdCAgICAgICAgICAgIGlmKGRvbmUpcmV0dXJuO1xuXHQgICAgICAgICAgfSBvYnNlcnZlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpeyBkb25lID0gdHJ1ZTsgfTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fSk7XG5cdFxuXHRoaWRlKCRPYnNlcnZhYmxlLnByb3RvdHlwZSwgT0JTRVJWQUJMRSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LkcsIHtPYnNlcnZhYmxlOiAkT2JzZXJ2YWJsZX0pO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMzQpKCdPYnNlcnZhYmxlJyk7XG5cbi8qKiovIH0sXG4vKiAzMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGllOS0gc2V0VGltZW91dCAmIHNldEludGVydmFsIGFkZGl0aW9uYWwgcGFyYW1ldGVycyBmaXhcblx0dmFyIGdsb2JhbCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICwgJGV4cG9ydCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBpbnZva2UgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApXG5cdCAgLCBwYXJ0aWFsICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzEpXG5cdCAgLCBuYXZpZ2F0b3IgID0gZ2xvYmFsLm5hdmlnYXRvclxuXHQgICwgTVNJRSAgICAgICA9ICEhbmF2aWdhdG9yICYmIC9NU0lFIC5cXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7IC8vIDwtIGRpcnR5IGllOS0gY2hlY2tcblx0dmFyIHdyYXAgPSBmdW5jdGlvbihzZXQpe1xuXHQgIHJldHVybiBNU0lFID8gZnVuY3Rpb24oZm4sIHRpbWUgLyosIC4uLmFyZ3MgKi8pe1xuXHQgICAgcmV0dXJuIHNldChpbnZva2UoXG5cdCAgICAgIHBhcnRpYWwsXG5cdCAgICAgIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSxcblx0ICAgICAgdHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKVxuXHQgICAgKSwgdGltZSk7XG5cdCAgfSA6IHNldDtcblx0fTtcblx0JGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkIgKyAkZXhwb3J0LkYgKiBNU0lFLCB7XG5cdCAgc2V0VGltZW91dDogIHdyYXAoZ2xvYmFsLnNldFRpbWVvdXQpLFxuXHQgIHNldEludGVydmFsOiB3cmFwKGdsb2JhbC5zZXRJbnRlcnZhbClcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAzMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIHBhdGggICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzMyKVxuXHQgICwgaW52b2tlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApXG5cdCAgLCBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigvKiAuLi5wYXJncyAqLyl7XG5cdCAgdmFyIGZuICAgICA9IGFGdW5jdGlvbih0aGlzKVxuXHQgICAgLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoXG5cdCAgICAsIHBhcmdzICA9IEFycmF5KGxlbmd0aClcblx0ICAgICwgaSAgICAgID0gMFxuXHQgICAgLCBfICAgICAgPSBwYXRoLl9cblx0ICAgICwgaG9sZGVyID0gZmFsc2U7XG5cdCAgd2hpbGUobGVuZ3RoID4gaSlpZigocGFyZ3NbaV0gPSBhcmd1bWVudHNbaSsrXSkgPT09IF8paG9sZGVyID0gdHJ1ZTtcblx0ICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXNcblx0ICAgICAgLCBhTGVuID0gYXJndW1lbnRzLmxlbmd0aFxuXHQgICAgICAsIGogPSAwLCBrID0gMCwgYXJncztcblx0ICAgIGlmKCFob2xkZXIgJiYgIWFMZW4pcmV0dXJuIGludm9rZShmbiwgcGFyZ3MsIHRoYXQpO1xuXHQgICAgYXJncyA9IHBhcmdzLnNsaWNlKCk7XG5cdCAgICBpZihob2xkZXIpZm9yKDtsZW5ndGggPiBqOyBqKyspaWYoYXJnc1tqXSA9PT0gXylhcmdzW2pdID0gYXJndW1lbnRzW2srK107XG5cdCAgICB3aGlsZShhTGVuID4gaylhcmdzLnB1c2goYXJndW1lbnRzW2srK10pO1xuXHQgICAgcmV0dXJuIGludm9rZShmbiwgYXJncywgdGhhdCk7XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDMzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTtcblxuLyoqKi8gfSxcbi8qIDMzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJHRhc2sgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUwKTtcblx0JGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkIsIHtcblx0ICBzZXRJbW1lZGlhdGU6ICAgJHRhc2suc2V0LFxuXHQgIGNsZWFySW1tZWRpYXRlOiAkdGFzay5jbGVhclxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDMzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRpdGVyYXRvcnMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNSlcblx0ICAsIHJlZGVmaW5lICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKVxuXHQgICwgZ2xvYmFsICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgLCBoaWRlICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0ICAsIEl0ZXJhdG9ycyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSlcblx0ICAsIHdrcyAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KVxuXHQgICwgSVRFUkFUT1IgICAgICA9IHdrcygnaXRlcmF0b3InKVxuXHQgICwgVE9fU1RSSU5HX1RBRyA9IHdrcygndG9TdHJpbmdUYWcnKVxuXHQgICwgQXJyYXlWYWx1ZXMgICA9IEl0ZXJhdG9ycy5BcnJheTtcblx0XG5cdGZvcih2YXIgY29sbGVjdGlvbnMgPSBbJ05vZGVMaXN0JywgJ0RPTVRva2VuTGlzdCcsICdNZWRpYUxpc3QnLCAnU3R5bGVTaGVldExpc3QnLCAnQ1NTUnVsZUxpc3QnXSwgaSA9IDA7IGkgPCA1OyBpKyspe1xuXHQgIHZhciBOQU1FICAgICAgID0gY29sbGVjdGlvbnNbaV1cblx0ICAgICwgQ29sbGVjdGlvbiA9IGdsb2JhbFtOQU1FXVxuXHQgICAgLCBwcm90byAgICAgID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZVxuXHQgICAgLCBrZXk7XG5cdCAgaWYocHJvdG8pe1xuXHQgICAgaWYoIXByb3RvW0lURVJBVE9SXSloaWRlKHByb3RvLCBJVEVSQVRPUiwgQXJyYXlWYWx1ZXMpO1xuXHQgICAgaWYoIXByb3RvW1RPX1NUUklOR19UQUddKWhpZGUocHJvdG8sIFRPX1NUUklOR19UQUcsIE5BTUUpO1xuXHQgICAgSXRlcmF0b3JzW05BTUVdID0gQXJyYXlWYWx1ZXM7XG5cdCAgICBmb3Ioa2V5IGluICRpdGVyYXRvcnMpaWYoIXByb3RvW2tleV0pcmVkZWZpbmUocHJvdG8sIGtleSwgJGl0ZXJhdG9yc1trZXldLCB0cnVlKTtcblx0ICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgY3R4ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKVxuXHQgICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgY3JlYXRlRGVzYyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KVxuXHQgICwgYXNzaWduICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSlcblx0ICAsIGNyZWF0ZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OClcblx0ICAsIGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpXG5cdCAgLCBnZXRLZXlzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpXG5cdCAgLCBkUCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpXG5cdCAgLCBrZXlPZiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpXG5cdCAgLCBhRnVuY3Rpb24gICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpXG5cdCAgLCBmb3JPZiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQ4KVxuXHQgICwgaXNJdGVyYWJsZSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNilcblx0ICAsICRpdGVyQ3JlYXRlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzIpXG5cdCAgLCBzdGVwICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjM2KVxuXHQgICwgaXNPYmplY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KVxuXHQgICwgdG9JT2JqZWN0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KVxuXHQgICwgREVTQ1JJUFRPUlMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KVxuXHQgICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0XG5cdC8vIDAgLT4gRGljdC5mb3JFYWNoXG5cdC8vIDEgLT4gRGljdC5tYXBcblx0Ly8gMiAtPiBEaWN0LmZpbHRlclxuXHQvLyAzIC0+IERpY3Quc29tZVxuXHQvLyA0IC0+IERpY3QuZXZlcnlcblx0Ly8gNSAtPiBEaWN0LmZpbmRcblx0Ly8gNiAtPiBEaWN0LmZpbmRLZXlcblx0Ly8gNyAtPiBEaWN0Lm1hcFBhaXJzXG5cdHZhciBjcmVhdGVEaWN0TWV0aG9kID0gZnVuY3Rpb24oVFlQRSl7XG5cdCAgdmFyIElTX01BUCAgID0gVFlQRSA9PSAxXG5cdCAgICAsIElTX0VWRVJZID0gVFlQRSA9PSA0O1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGNhbGxiYWNrZm4sIHRoYXQgLyogPSB1bmRlZmluZWQgKi8pe1xuXHQgICAgdmFyIGYgICAgICA9IGN0eChjYWxsYmFja2ZuLCB0aGF0LCAzKVxuXHQgICAgICAsIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpXG5cdCAgICAgICwgcmVzdWx0ID0gSVNfTUFQIHx8IFRZUEUgPT0gNyB8fCBUWVBFID09IDJcblx0ICAgICAgICAgID8gbmV3ICh0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nID8gdGhpcyA6IERpY3QpIDogdW5kZWZpbmVkXG5cdCAgICAgICwga2V5LCB2YWwsIHJlcztcblx0ICAgIGZvcihrZXkgaW4gTylpZihoYXMoTywga2V5KSl7XG5cdCAgICAgIHZhbCA9IE9ba2V5XTtcblx0ICAgICAgcmVzID0gZih2YWwsIGtleSwgb2JqZWN0KTtcblx0ICAgICAgaWYoVFlQRSl7XG5cdCAgICAgICAgaWYoSVNfTUFQKXJlc3VsdFtrZXldID0gcmVzOyAgICAgICAgICAgIC8vIG1hcFxuXHQgICAgICAgIGVsc2UgaWYocmVzKXN3aXRjaChUWVBFKXtcblx0ICAgICAgICAgIGNhc2UgMjogcmVzdWx0W2tleV0gPSB2YWw7IGJyZWFrOyAgICAgLy8gZmlsdGVyXG5cdCAgICAgICAgICBjYXNlIDM6IHJldHVybiB0cnVlOyAgICAgICAgICAgICAgICAgIC8vIHNvbWVcblx0ICAgICAgICAgIGNhc2UgNTogcmV0dXJuIHZhbDsgICAgICAgICAgICAgICAgICAgLy8gZmluZFxuXHQgICAgICAgICAgY2FzZSA2OiByZXR1cm4ga2V5OyAgICAgICAgICAgICAgICAgICAvLyBmaW5kS2V5XG5cdCAgICAgICAgICBjYXNlIDc6IHJlc3VsdFtyZXNbMF1dID0gcmVzWzFdOyAgICAgIC8vIG1hcFBhaXJzXG5cdCAgICAgICAgfSBlbHNlIGlmKElTX0VWRVJZKXJldHVybiBmYWxzZTsgICAgICAgIC8vIGV2ZXJ5XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBUWVBFID09IDMgfHwgSVNfRVZFUlkgPyBJU19FVkVSWSA6IHJlc3VsdDtcblx0ICB9O1xuXHR9O1xuXHR2YXIgZmluZEtleSA9IGNyZWF0ZURpY3RNZXRob2QoNik7XG5cdFxuXHR2YXIgY3JlYXRlRGljdEl0ZXIgPSBmdW5jdGlvbihraW5kKXtcblx0ICByZXR1cm4gZnVuY3Rpb24oaXQpe1xuXHQgICAgcmV0dXJuIG5ldyBEaWN0SXRlcmF0b3IoaXQsIGtpbmQpO1xuXHQgIH07XG5cdH07XG5cdHZhciBEaWN0SXRlcmF0b3IgPSBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7XG5cdCAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldFxuXHQgIHRoaXMuX2EgPSBnZXRLZXlzKGl0ZXJhdGVkKTsgICAvLyBrZXlzXG5cdCAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcblx0ICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZFxuXHR9O1xuXHQkaXRlckNyZWF0ZShEaWN0SXRlcmF0b3IsICdEaWN0JywgZnVuY3Rpb24oKXtcblx0ICB2YXIgdGhhdCA9IHRoaXNcblx0ICAgICwgTyAgICA9IHRoYXQuX3Rcblx0ICAgICwga2V5cyA9IHRoYXQuX2Fcblx0ICAgICwga2luZCA9IHRoYXQuX2tcblx0ICAgICwga2V5O1xuXHQgIGRvIHtcblx0ICAgIGlmKHRoYXQuX2kgPj0ga2V5cy5sZW5ndGgpe1xuXHQgICAgICB0aGF0Ll90ID0gdW5kZWZpbmVkO1xuXHQgICAgICByZXR1cm4gc3RlcCgxKTtcblx0ICAgIH1cblx0ICB9IHdoaWxlKCFoYXMoTywga2V5ID0ga2V5c1t0aGF0Ll9pKytdKSk7XG5cdCAgaWYoa2luZCA9PSAna2V5cycgIClyZXR1cm4gc3RlcCgwLCBrZXkpO1xuXHQgIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgT1trZXldKTtcblx0ICByZXR1cm4gc3RlcCgwLCBba2V5LCBPW2tleV1dKTtcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBEaWN0KGl0ZXJhYmxlKXtcblx0ICB2YXIgZGljdCA9IGNyZWF0ZShudWxsKTtcblx0ICBpZihpdGVyYWJsZSAhPSB1bmRlZmluZWQpe1xuXHQgICAgaWYoaXNJdGVyYWJsZShpdGVyYWJsZSkpe1xuXHQgICAgICBmb3JPZihpdGVyYWJsZSwgdHJ1ZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG5cdCAgICAgICAgZGljdFtrZXldID0gdmFsdWU7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIGFzc2lnbihkaWN0LCBpdGVyYWJsZSk7XG5cdCAgfVxuXHQgIHJldHVybiBkaWN0O1xuXHR9XG5cdERpY3QucHJvdG90eXBlID0gbnVsbDtcblx0XG5cdGZ1bmN0aW9uIHJlZHVjZShvYmplY3QsIG1hcGZuLCBpbml0KXtcblx0ICBhRnVuY3Rpb24obWFwZm4pO1xuXHQgIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KVxuXHQgICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pXG5cdCAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cdCAgICAsIGkgICAgICA9IDBcblx0ICAgICwgbWVtbywga2V5O1xuXHQgIGlmKGFyZ3VtZW50cy5sZW5ndGggPCAzKXtcblx0ICAgIGlmKCFsZW5ndGgpdGhyb3cgVHlwZUVycm9yKCdSZWR1Y2Ugb2YgZW1wdHkgb2JqZWN0IHdpdGggbm8gaW5pdGlhbCB2YWx1ZScpO1xuXHQgICAgbWVtbyA9IE9ba2V5c1tpKytdXTtcblx0ICB9IGVsc2UgbWVtbyA9IE9iamVjdChpbml0KTtcblx0ICB3aGlsZShsZW5ndGggPiBpKWlmKGhhcyhPLCBrZXkgPSBrZXlzW2krK10pKXtcblx0ICAgIG1lbW8gPSBtYXBmbihtZW1vLCBPW2tleV0sIGtleSwgb2JqZWN0KTtcblx0ICB9XG5cdCAgcmV0dXJuIG1lbW87XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGluY2x1ZGVzKG9iamVjdCwgZWwpe1xuXHQgIHJldHVybiAoZWwgPT0gZWwgPyBrZXlPZihvYmplY3QsIGVsKSA6IGZpbmRLZXkob2JqZWN0LCBmdW5jdGlvbihpdCl7XG5cdCAgICByZXR1cm4gaXQgIT0gaXQ7XG5cdCAgfSkpICE9PSB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldChvYmplY3QsIGtleSl7XG5cdCAgaWYoaGFzKG9iamVjdCwga2V5KSlyZXR1cm4gb2JqZWN0W2tleV07XG5cdH1cblx0ZnVuY3Rpb24gc2V0KG9iamVjdCwga2V5LCB2YWx1ZSl7XG5cdCAgaWYoREVTQ1JJUFRPUlMgJiYga2V5IGluIE9iamVjdClkUC5mKG9iamVjdCwga2V5LCBjcmVhdGVEZXNjKDAsIHZhbHVlKSk7XG5cdCAgZWxzZSBvYmplY3Rba2V5XSA9IHZhbHVlO1xuXHQgIHJldHVybiBvYmplY3Q7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzRGljdChpdCl7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiBnZXRQcm90b3R5cGVPZihpdCkgPT09IERpY3QucHJvdG90eXBlO1xuXHR9XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuRiwge0RpY3Q6IERpY3R9KTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnRGljdCcsIHtcblx0ICBrZXlzOiAgICAgY3JlYXRlRGljdEl0ZXIoJ2tleXMnKSxcblx0ICB2YWx1ZXM6ICAgY3JlYXRlRGljdEl0ZXIoJ3ZhbHVlcycpLFxuXHQgIGVudHJpZXM6ICBjcmVhdGVEaWN0SXRlcignZW50cmllcycpLFxuXHQgIGZvckVhY2g6ICBjcmVhdGVEaWN0TWV0aG9kKDApLFxuXHQgIG1hcDogICAgICBjcmVhdGVEaWN0TWV0aG9kKDEpLFxuXHQgIGZpbHRlcjogICBjcmVhdGVEaWN0TWV0aG9kKDIpLFxuXHQgIHNvbWU6ICAgICBjcmVhdGVEaWN0TWV0aG9kKDMpLFxuXHQgIGV2ZXJ5OiAgICBjcmVhdGVEaWN0TWV0aG9kKDQpLFxuXHQgIGZpbmQ6ICAgICBjcmVhdGVEaWN0TWV0aG9kKDUpLFxuXHQgIGZpbmRLZXk6ICBmaW5kS2V5LFxuXHQgIG1hcFBhaXJzOiBjcmVhdGVEaWN0TWV0aG9kKDcpLFxuXHQgIHJlZHVjZTogICByZWR1Y2UsXG5cdCAga2V5T2Y6ICAgIGtleU9mLFxuXHQgIGluY2x1ZGVzOiBpbmNsdWRlcyxcblx0ICBoYXM6ICAgICAgaGFzLFxuXHQgIGdldDogICAgICBnZXQsXG5cdCAgc2V0OiAgICAgIHNldCxcblx0ICBpc0RpY3Q6ICAgaXNEaWN0XG5cdH0pO1xuXG4vKioqLyB9LFxuLyogMzM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY2xhc3NvZiAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpXG5cdCAgLCBJVEVSQVRPUiAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KSgnaXRlcmF0b3InKVxuXHQgICwgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzEpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpLmlzSXRlcmFibGUgPSBmdW5jdGlvbihpdCl7XG5cdCAgdmFyIE8gPSBPYmplY3QoaXQpO1xuXHQgIHJldHVybiBPW0lURVJBVE9SXSAhPT0gdW5kZWZpbmVkXG5cdCAgICB8fCAnQEBpdGVyYXRvcicgaW4gT1xuXHQgICAgfHwgSXRlcmF0b3JzLmhhc093blByb3BlcnR5KGNsYXNzb2YoTykpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMzM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICwgZ2V0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNik7XG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSkuZ2V0SXRlcmF0b3IgPSBmdW5jdGlvbihpdCl7XG5cdCAgdmFyIGl0ZXJGbiA9IGdldChpdCk7XG5cdCAgaWYodHlwZW9mIGl0ZXJGbiAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGl0ZXJhYmxlIScpO1xuXHQgIHJldHVybiBhbk9iamVjdChpdGVyRm4uY2FsbChpdCkpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMzM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2xvYmFsICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgLCBjb3JlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSlcblx0ICAsICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgcGFydGlhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMxKTtcblx0Ly8gaHR0cHM6Ly9lc2Rpc2N1c3Mub3JnL3RvcGljL3Byb21pc2UtcmV0dXJuaW5nLWRlbGF5LWZ1bmN0aW9uXG5cdCRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5GLCB7XG5cdCAgZGVsYXk6IGZ1bmN0aW9uIGRlbGF5KHRpbWUpe1xuXHQgICAgcmV0dXJuIG5ldyAoY29yZS5Qcm9taXNlIHx8IGdsb2JhbC5Qcm9taXNlKShmdW5jdGlvbihyZXNvbHZlKXtcblx0ICAgICAgc2V0VGltZW91dChwYXJ0aWFsLmNhbGwocmVzb2x2ZSwgdHJ1ZSksIHRpbWUpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDMzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHBhdGggICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMilcblx0ICAsICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0XG5cdC8vIFBsYWNlaG9sZGVyXG5cdF9fd2VicGFja19yZXF1aXJlX18oNTEpLl8gPSBwYXRoLl8gPSBwYXRoLl8gfHwge307XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiwgJ0Z1bmN0aW9uJywge3BhcnQ6IF9fd2VicGFja19yZXF1aXJlX18oMzMxKX0pO1xuXG4vKioqLyB9LFxuLyogMzQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7aXNPYmplY3Q6IF9fd2VicGFja19yZXF1aXJlX18oNTUpfSk7XG5cbi8qKiovIH0sXG4vKiAzNDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHtjbGFzc29mOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNyl9KTtcblxuLyoqKi8gfSxcbi8qIDM0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgZGVmaW5lICA9IF9fd2VicGFja19yZXF1aXJlX18oMzQzKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GLCAnT2JqZWN0Jywge2RlZmluZTogZGVmaW5lfSk7XG5cbi8qKiovIH0sXG4vKiAzNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBkUCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKVxuXHQgICwgZ09QRCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mylcblx0ICAsIG93bktleXMgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjg1KVxuXHQgICwgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZSh0YXJnZXQsIG1peGluKXtcblx0ICB2YXIga2V5cyAgID0gb3duS2V5cyh0b0lPYmplY3QobWl4aW4pKVxuXHQgICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aFxuXHQgICAgLCBpID0gMCwga2V5O1xuXHQgIHdoaWxlKGxlbmd0aCA+IGkpZFAuZih0YXJnZXQsIGtleSA9IGtleXNbaSsrXSwgZ09QRC5mKG1peGluLCBrZXkpKTtcblx0ICByZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMzQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApXG5cdCAgLCBkZWZpbmUgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDMpXG5cdCAgLCBjcmVhdGUgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCk7XG5cdFxuXHQkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHtcblx0ICBtYWtlOiBmdW5jdGlvbihwcm90bywgbWl4aW4pe1xuXHQgICAgcmV0dXJuIGRlZmluZShjcmVhdGUocHJvdG8pLCBtaXhpbik7XG5cdCAgfVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDM0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MCkoTnVtYmVyLCAnTnVtYmVyJywgZnVuY3Rpb24oaXRlcmF0ZWQpe1xuXHQgIHRoaXMuX2wgPSAraXRlcmF0ZWQ7XG5cdCAgdGhpcy5faSA9IDA7XG5cdH0sIGZ1bmN0aW9uKCl7XG5cdCAgdmFyIGkgICAgPSB0aGlzLl9pKytcblx0ICAgICwgZG9uZSA9ICEoaSA8IHRoaXMuX2wpO1xuXHQgIHJldHVybiB7ZG9uZTogZG9uZSwgdmFsdWU6IGRvbmUgPyB1bmRlZmluZWQgOiBpfTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAzNDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZW5qYW1pbmdyL1JleEV4cC5lc2NhcGVcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgJHJlICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ3KSgvW1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKTtcblx0XG5cdCRleHBvcnQoJGV4cG9ydC5TLCAnUmVnRXhwJywge2VzY2FwZTogZnVuY3Rpb24gZXNjYXBlKGl0KXsgcmV0dXJuICRyZShpdCk7IH19KTtcblxuXG4vKioqLyB9LFxuLyogMzQ3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHJlZ0V4cCwgcmVwbGFjZSl7XG5cdCAgdmFyIHJlcGxhY2VyID0gcmVwbGFjZSA9PT0gT2JqZWN0KHJlcGxhY2UpID8gZnVuY3Rpb24ocGFydCl7XG5cdCAgICByZXR1cm4gcmVwbGFjZVtwYXJ0XTtcblx0ICB9IDogcmVwbGFjZTtcblx0ICByZXR1cm4gZnVuY3Rpb24oaXQpe1xuXHQgICAgcmV0dXJuIFN0cmluZyhpdCkucmVwbGFjZShyZWdFeHAsIHJlcGxhY2VyKTtcblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMzQ4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciAkcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0NykoL1smPD5cIiddL2csIHtcblx0ICAnJic6ICcmYW1wOycsXG5cdCAgJzwnOiAnJmx0OycsXG5cdCAgJz4nOiAnJmd0OycsXG5cdCAgJ1wiJzogJyZxdW90OycsXG5cdCAgXCInXCI6ICcmYXBvczsnXG5cdH0pO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYsICdTdHJpbmcnLCB7ZXNjYXBlSFRNTDogZnVuY3Rpb24gZXNjYXBlSFRNTCgpeyByZXR1cm4gJHJlKHRoaXMpOyB9fSk7XG5cbi8qKiovIH0sXG4vKiAzNDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyICRyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ3KSgvJig/OmFtcHxsdHxndHxxdW90fGFwb3MpOy9nLCB7XG5cdCAgJyZhbXA7JzogICcmJyxcblx0ICAnJmx0Oyc6ICAgJzwnLFxuXHQgICcmZ3Q7JzogICAnPicsXG5cdCAgJyZxdW90Oyc6ICdcIicsXG5cdCAgJyZhcG9zOyc6IFwiJ1wiXG5cdH0pO1xuXHRcblx0JGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYsICdTdHJpbmcnLCB7dW5lc2NhcGVIVE1MOiAgZnVuY3Rpb24gdW5lc2NhcGVIVE1MKCl7IHJldHVybiAkcmUodGhpcyk7IH19KTtcblxuLyoqKi8gfSxcbi8qIDM1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdC8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuXHQvLyBTdWJqZWN0IGltcG9ydGVkIGJlZm9yZSBPYnNlcnZhYmxlIHRvIGJ5cGFzcyBjaXJjdWxhciBkZXBlbmRlbmN5IGlzc3VlIHNpbmNlXG5cdC8vIFN1YmplY3QgZXh0ZW5kcyBPYnNlcnZhYmxlIGFuZCBPYnNlcnZhYmxlIHJlZmVyZW5jZXMgU3ViamVjdCBpbiBpdCdzXG5cdC8vIGRlZmluaXRpb25cblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdGV4cG9ydHMuU3ViamVjdCA9IFN1YmplY3RfMS5TdWJqZWN0O1xuXHQvKiB0c2xpbnQ6ZW5hYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0ZXhwb3J0cy5PYnNlcnZhYmxlID0gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGU7XG5cdC8vIHN0YXRpY3Ncblx0LyogdHNsaW50OmRpc2FibGU6bm8tdXNlLWJlZm9yZS1kZWNsYXJlICovXG5cdF9fd2VicGFja19yZXF1aXJlX18oMzUxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM1OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzY5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzNzMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzc4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzODEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM4OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMzkyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygzOTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDA2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MDkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQxMSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDE1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MTcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQyMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDIzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MjcpO1xuXHQvL29wZXJhdG9yc1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQzMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDMyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0MzQpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQzNik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDM4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NDApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDQ5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NTEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDUzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1OCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDYxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NjMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDY3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NjkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3MSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDczKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0NzUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDc5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0ODEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDg1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0ODgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNDk1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0OTcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTAxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MDMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUwNSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTA3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MDkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUxMSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTEyKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MTMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUxNCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTE1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MTYpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUxNyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTIwKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MjIpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUyNCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTI3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MjgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUzMCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTMxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MzMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDUzNSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTM3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1MzkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU0MSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTQzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NDUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU0Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTQ5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NTEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU1Myk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTU1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NTcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU2Nik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTY4KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NzApO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU3Mik7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTc1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1NzcpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU3OSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTgxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1ODMpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU4NSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTg3KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1ODkpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU5MSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTkzKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1OTUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDU5Nyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNTk5KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg2MDEpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDYwMyk7XG5cdF9fd2VicGFja19yZXF1aXJlX18oNjA1KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg2MDYpO1xuXHQvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cblx0dmFyIE9wZXJhdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwOCk7XG5cdGV4cG9ydHMuT3BlcmF0b3IgPSBPcGVyYXRvcl8xLk9wZXJhdG9yO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0ZXhwb3J0cy5TdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb247XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRleHBvcnRzLlN1YnNjcmliZXIgPSBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcjtcblx0dmFyIEFzeW5jU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTQpO1xuXHRleHBvcnRzLkFzeW5jU3ViamVjdCA9IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdDtcblx0dmFyIFJlcGxheVN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQzKTtcblx0ZXhwb3J0cy5SZXBsYXlTdWJqZWN0ID0gUmVwbGF5U3ViamVjdF8xLlJlcGxheVN1YmplY3Q7XG5cdHZhciBCZWhhdmlvclN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTI2KTtcblx0ZXhwb3J0cy5CZWhhdmlvclN1YmplY3QgPSBCZWhhdmlvclN1YmplY3RfMS5CZWhhdmlvclN1YmplY3Q7XG5cdHZhciBDb25uZWN0YWJsZU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQ2KTtcblx0ZXhwb3J0cy5Db25uZWN0YWJsZU9ic2VydmFibGUgPSBDb25uZWN0YWJsZU9ic2VydmFibGVfMS5Db25uZWN0YWJsZU9ic2VydmFibGU7XG5cdHZhciBOb3RpZmljYXRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg4KTtcblx0ZXhwb3J0cy5Ob3RpZmljYXRpb24gPSBOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb247XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4Nyk7XG5cdGV4cG9ydHMuRW1wdHlFcnJvciA9IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yO1xuXHR2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTc0KTtcblx0ZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG5cdHZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdGV4cG9ydHMuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgPSBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yO1xuXHR2YXIgVW5zdWJzY3JpcHRpb25FcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdGV4cG9ydHMuVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JfMS5VbnN1YnNjcmlwdGlvbkVycm9yO1xuXHR2YXIgYXNhcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NjApO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAxKTtcblx0dmFyIHF1ZXVlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0NCk7XG5cdHZhciByeFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgb2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIGl0ZXJhdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Nyk7XG5cdC8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG5cdC8qKlxuXHQgKiBAdHlwZWRlZiB7T2JqZWN0fSBSeC5TY2hlZHVsZXJcblx0ICogQHByb3BlcnR5IHtTY2hlZHVsZXJ9IHF1ZXVlIFNjaGVkdWxlcyBvbiBhIHF1ZXVlIGluIHRoZSBjdXJyZW50IGV2ZW50IGZyYW1lXG5cdCAqICh0cmFtcG9saW5lIHNjaGVkdWxlcikuIFVzZSB0aGlzIGZvciBpdGVyYXRpb24gb3BlcmF0aW9ucy5cblx0ICogQHByb3BlcnR5IHtTY2hlZHVsZXJ9IGFzYXAgU2NoZWR1bGVzIG9uIHRoZSBtaWNybyB0YXNrIHF1ZXVlLCB3aGljaCB1c2VzIHRoZVxuXHQgKiBmYXN0ZXN0IHRyYW5zcG9ydCBtZWNoYW5pc20gYXZhaWxhYmxlLCBlaXRoZXIgTm9kZS5qcycgYHByb2Nlc3MubmV4dFRpY2soKWBcblx0ICogb3IgV2ViIFdvcmtlciBNZXNzYWdlQ2hhbm5lbCBvciBzZXRUaW1lb3V0IG9yIG90aGVycy4gVXNlIHRoaXMgZm9yXG5cdCAqIGFzeW5jaHJvbm91cyBjb252ZXJzaW9ucy5cblx0ICogQHByb3BlcnR5IHtTY2hlZHVsZXJ9IGFzeW5jIFNjaGVkdWxlcyB3b3JrIHdpdGggYHNldEludGVydmFsYC4gVXNlIHRoaXMgZm9yXG5cdCAqIHRpbWUtYmFzZWQgb3BlcmF0aW9ucy5cblx0ICovXG5cdHZhciBTY2hlZHVsZXIgPSB7XG5cdCAgICBhc2FwOiBhc2FwXzEuYXNhcCxcblx0ICAgIGFzeW5jOiBhc3luY18xLmFzeW5jLFxuXHQgICAgcXVldWU6IHF1ZXVlXzEucXVldWVcblx0fTtcblx0ZXhwb3J0cy5TY2hlZHVsZXIgPSBTY2hlZHVsZXI7XG5cdC8qKlxuXHQgKiBAdHlwZWRlZiB7T2JqZWN0fSBSeC5TeW1ib2xcblx0ICogQHByb3BlcnR5IHtTeW1ib2x8c3RyaW5nfSByeFN1YnNjcmliZXIgQSBzeW1ib2wgdG8gdXNlIGFzIGEgcHJvcGVydHkgbmFtZSB0b1xuXHQgKiByZXRyaWV2ZSBhbiBcIlJ4IHNhZmVcIiBPYnNlcnZlciBmcm9tIGFuIG9iamVjdC4gXCJSeCBzYWZldHlcIiBjYW4gYmUgZGVmaW5lZCBhc1xuXHQgKiBhbiBvYmplY3QgdGhhdCBoYXMgYWxsIG9mIHRoZSB0cmFpdHMgb2YgYW4gUnggU3Vic2NyaWJlciwgaW5jbHVkaW5nIHRoZVxuXHQgKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHN1YnNjcmlwdGlvbiBjaGFpbiBhbmRcblx0ICogZ3VhcmFudGVlcyBpbnZvbHZpbmcgZXZlbnQgdHJpZ2dlcmluZyAoY2FuJ3QgXCJuZXh0XCIgYWZ0ZXIgdW5zdWJzY3JpcHRpb24sXG5cdCAqIGV0YykuXG5cdCAqIEBwcm9wZXJ0eSB7U3ltYm9sfHN0cmluZ30gb2JzZXJ2YWJsZSBBIHN5bWJvbCB0byB1c2UgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvXG5cdCAqIHJldHJpZXZlIGFuIE9ic2VydmFibGUgYXMgZGVmaW5lZCBieSB0aGUgW0VDTUFTY3JpcHQgXCJPYnNlcnZhYmxlXCIgc3BlY10oaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZSkuXG5cdCAqIEBwcm9wZXJ0eSB7U3ltYm9sfHN0cmluZ30gaXRlcmF0b3IgVGhlIEVTNiBzeW1ib2wgdG8gdXNlIGFzIGEgcHJvcGVydHkgbmFtZVxuXHQgKiB0byByZXRyaWV2ZSBhbiBpdGVyYXRvciBmcm9tIGFuIG9iamVjdC5cblx0ICovXG5cdHZhciBTeW1ib2wgPSB7XG5cdCAgICByeFN1YnNjcmliZXI6IHJ4U3Vic2NyaWJlcl8xLiQkcnhTdWJzY3JpYmVyLFxuXHQgICAgb2JzZXJ2YWJsZTogb2JzZXJ2YWJsZV8xLiQkb2JzZXJ2YWJsZSxcblx0ICAgIGl0ZXJhdG9yOiBpdGVyYXRvcl8xLiQkaXRlcmF0b3Jcblx0fTtcblx0ZXhwb3J0cy5TeW1ib2wgPSBTeW1ib2w7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVJ4LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBiaW5kQ2FsbGJhY2tfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUyKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuYmluZENhbGxiYWNrID0gYmluZENhbGxiYWNrXzEuYmluZENhbGxiYWNrO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kQ2FsbGJhY2suanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQm91bmRDYWxsYmFja09ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUzKTtcblx0ZXhwb3J0cy5iaW5kQ2FsbGJhY2sgPSBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZV8xLkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZENhbGxiYWNrLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBBc3luY1N1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU0KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgQm91bmRDYWxsYmFja09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQm91bmRDYWxsYmFja09ic2VydmFibGUoY2FsbGJhY2tGdW5jLCBzZWxlY3RvciwgYXJncywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5jYWxsYmFja0Z1bmMgPSBjYWxsYmFja0Z1bmM7XG5cdCAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBDb252ZXJ0cyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja0Z1bmMgRnVuY3Rpb24gd2l0aCBhIGNhbGxiYWNrIGFzIHRoZSBsYXN0XG5cdCAgICAgKiBwYXJhbWV0ZXIuXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGVcblx0ICAgICAqIGNhbGxiYWNrIHRvIHByb2R1Y2UgYSBzaW5nbGUgaXRlbSB0byB5aWVsZCBvbiBuZXh0LlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGVcblx0ICAgICAqIHRoZSBjYWxsYmFja3MuXG5cdCAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbiguLi5wYXJhbXM6ICopOiBPYnNlcnZhYmxlPFQ+fSBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlXG5cdCAgICAgKiBPYnNlcnZhYmxlIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGNhbGxiYWNrLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBiaW5kQ2FsbGJhY2tcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBpZiAoc2VsZWN0b3IgPT09IHZvaWQgMCkgeyBzZWxlY3RvciA9IHVuZGVmaW5lZDsgfVxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHZhciBhcmdzID0gW107XG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmRDYWxsYmFja09ic2VydmFibGUoY2FsbGJhY2tGdW5jLCBzZWxlY3RvciwgYXJncywgc2NoZWR1bGVyKTtcblx0ICAgICAgICB9O1xuXHQgICAgfTtcblx0ICAgIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2tGdW5jID0gdGhpcy5jYWxsYmFja0Z1bmM7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmFyZ3M7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0O1xuXHQgICAgICAgIGlmICghc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgICAgIGlmICghc3ViamVjdCkge1xuXHQgICAgICAgICAgICAgICAgc3ViamVjdCA9IHRoaXMuc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3RfMS5Bc3luY1N1YmplY3QoKTtcblx0ICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlckZuKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpbm5lckFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBoYW5kbGVyRm4uc291cmNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHNvdXJjZS5zZWxlY3Rvciwgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzEgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZXN1bHRfMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChpbm5lckFyZ3MubGVuZ3RoID09PSAxID8gaW5uZXJBcmdzWzBdIDogaW5uZXJBcmdzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gaW5zdGFuY2UgdG8gYXZvaWQgY2xvc3VyZS5cblx0ICAgICAgICAgICAgICAgIGhhbmRsZXIuc291cmNlID0gdGhpcztcblx0ICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNhbGxiYWNrRnVuYykuYXBwbHkodGhpcywgYXJncy5jb25jYXQoaGFuZGxlcikpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoLCAwLCB7IHNvdXJjZTogdGhpcywgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuQm91bmRDYWxsYmFja09ic2VydmFibGUgPSBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZTtcblx0ZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zb3VyY2UsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgdmFyIGNhbGxiYWNrRnVuYyA9IHNvdXJjZS5jYWxsYmFja0Z1bmMsIGFyZ3MgPSBzb3VyY2UuYXJncywgc2NoZWR1bGVyID0gc291cmNlLnNjaGVkdWxlcjtcblx0ICAgIHZhciBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG5cdCAgICBpZiAoIXN1YmplY3QpIHtcblx0ICAgICAgICBzdWJqZWN0ID0gc291cmNlLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG5cdCAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcblx0ICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG5cdCAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8yID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzZWxlY3RvcikuYXBwbHkodGhpcywgaW5uZXJBcmdzKTtcblx0ICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMiA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEVycm9yLCAwLCB7IGVycjogZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHJlc3VsdF8yLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3M7XG5cdCAgICAgICAgICAgICAgICBzZWxmLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCAwLCB7IHZhbHVlOiB2YWx1ZSwgc3ViamVjdDogc3ViamVjdCB9KSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiB0byBwYXNzIHZhbHVlcyBpbiB3aXRob3V0IGNsb3N1cmVcblx0ICAgICAgICBoYW5kbGVyLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjYWxsYmFja0Z1bmMpLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KGhhbmRsZXIpKTtcblx0ICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBzZWxmLmFkZChzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG5cdH1cblx0ZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KGFyZykge1xuXHQgICAgdmFyIHZhbHVlID0gYXJnLnZhbHVlLCBzdWJqZWN0ID0gYXJnLnN1YmplY3Q7XG5cdCAgICBzdWJqZWN0Lm5leHQodmFsdWUpO1xuXHQgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuXHR9XG5cdGZ1bmN0aW9uIGRpc3BhdGNoRXJyb3IoYXJnKSB7XG5cdCAgICB2YXIgZXJyID0gYXJnLmVyciwgc3ViamVjdCA9IGFyZy5zdWJqZWN0O1xuXHQgICAgc3ViamVjdC5lcnJvcihlcnIpO1xuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdC8qKlxuXHQgKiBAY2xhc3MgQXN5bmNTdWJqZWN0PFQ+XG5cdCAqL1xuXHR2YXIgQXN5bmNTdWJqZWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhBc3luY1N1YmplY3QsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBc3luY1N1YmplY3QoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5oYXNOZXh0ID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmhhc05leHQpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG5cdCAgICB9O1xuXHQgICAgQXN5bmNTdWJqZWN0LnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc05leHQgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcblx0ICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gdG8gYmxvY2sgb3VyIFN1YmplY3RTdWJzY3JpcHRpb25zIGZyb21cblx0ICAgICAgICAvLyBzcGxpY2luZyB0aGVtc2VsdmVzIG91dCBvZiB0aGUgb2JzZXJ2ZXJzIGxpc3Qgb25lIGJ5IG9uZS5cblx0ICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5oYXNOZXh0KSB7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgbyA9IG9ic2VydmVyc1tpbmRleF07XG5cdCAgICAgICAgICAgICAgICBvLm5leHQodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICBvLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICBvYnNlcnZlcnNbaW5kZXhdLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXN5bmNTdWJqZWN0O1xuXHR9KFN1YmplY3RfMS5TdWJqZWN0KSk7XG5cdGV4cG9ydHMuQXN5bmNTdWJqZWN0ID0gQXN5bmNTdWJqZWN0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Bc3luY1N1YmplY3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGJpbmROb2RlQ2FsbGJhY2tfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuYmluZE5vZGVDYWxsYmFjayA9IGJpbmROb2RlQ2FsbGJhY2tfMS5iaW5kTm9kZUNhbGxiYWNrO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kTm9kZUNhbGxiYWNrLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTcpO1xuXHRleHBvcnRzLmJpbmROb2RlQ2FsbGJhY2sgPSBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGVfMS5Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kTm9kZUNhbGxiYWNrLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzU3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBBc3luY1N1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU0KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUoY2FsbGJhY2tGdW5jLCBzZWxlY3RvciwgYXJncywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5jYWxsYmFja0Z1bmMgPSBjYWxsYmFja0Z1bmM7XG5cdCAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBDb252ZXJ0cyBhIG5vZGUgY2FsbGJhY2sgdG8gYW4gT2JzZXJ2YWJsZS5cblx0ICAgICAqIEBwYXJhbSBjYWxsYmFja0Z1bmNcblx0ICAgICAqIEBwYXJhbSBzZWxlY3RvclxuXHQgICAgICogQHBhcmFtIHNjaGVkdWxlclxuXHQgICAgICogQHJldHVybiB7ZnVuY3Rpb24oLi4ucGFyYW1zOiAqKTogT2JzZXJ2YWJsZTxUPn1cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgYmluZE5vZGVDYWxsYmFja1xuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBpZiAoc2VsZWN0b3IgPT09IHZvaWQgMCkgeyBzZWxlY3RvciA9IHVuZGVmaW5lZDsgfVxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHZhciBhcmdzID0gW107XG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlKGNhbGxiYWNrRnVuYywgc2VsZWN0b3IsIGFyZ3MsIHNjaGVkdWxlcik7XG5cdCAgICAgICAgfTtcblx0ICAgIH07XG5cdCAgICBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBjYWxsYmFja0Z1bmMgPSB0aGlzLmNhbGxiYWNrRnVuYztcblx0ICAgICAgICB2YXIgYXJncyA9IHRoaXMuYXJncztcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG5cdCAgICAgICAgaWYgKCFzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgaWYgKCFzdWJqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpO1xuXHQgICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGhhbmRsZXJGbi5zb3VyY2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGVyciA9IGlubmVyQXJncy5zaGlmdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxlY3Rvcikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzEgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChyZXN1bHRfMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChpbm5lckFyZ3MubGVuZ3RoID09PSAxID8gaW5uZXJBcmdzWzBdIDogaW5uZXJBcmdzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gaW5zdGFuY2UgdG8gYXZvaWQgY2xvc3VyZS5cblx0ICAgICAgICAgICAgICAgIGhhbmRsZXIuc291cmNlID0gdGhpcztcblx0ICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNhbGxiYWNrRnVuYykuYXBwbHkodGhpcywgYXJncy5jb25jYXQoaGFuZGxlcikpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoLCAwLCB7IHNvdXJjZTogdGhpcywgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZSA9IEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZTtcblx0ZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zb3VyY2UsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgdmFyIGNhbGxiYWNrRnVuYyA9IHNvdXJjZS5jYWxsYmFja0Z1bmMsIGFyZ3MgPSBzb3VyY2UuYXJncywgc2NoZWR1bGVyID0gc291cmNlLnNjaGVkdWxlcjtcblx0ICAgIHZhciBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG5cdCAgICBpZiAoIXN1YmplY3QpIHtcblx0ICAgICAgICBzdWJqZWN0ID0gc291cmNlLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG5cdCAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcblx0ICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG5cdCAgICAgICAgICAgIHZhciBlcnIgPSBpbm5lckFyZ3Muc2hpZnQoKTtcblx0ICAgICAgICAgICAgaWYgKGVycikge1xuXHQgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8yID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogcmVzdWx0XzIsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaW5uZXJBcmdzLmxlbmd0aCA9PT0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJncztcblx0ICAgICAgICAgICAgICAgIHNlbGYuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgLy8gdXNlIG5hbWVkIGZ1bmN0aW9uIHRvIHBhc3MgdmFsdWVzIGluIHdpdGhvdXQgY2xvc3VyZVxuXHQgICAgICAgIGhhbmRsZXIuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNhbGxiYWNrRnVuYykuYXBwbHkodGhpcywgYXJncy5jb25jYXQoaGFuZGxlcikpO1xuXHQgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHNlbGYuYWRkKHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7XG5cdCAgICB2YXIgdmFsdWUgPSBhcmcudmFsdWUsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcblx0ICAgIHN1YmplY3QubmV4dCh2YWx1ZSk7XG5cdCAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG5cdH1cblx0ZnVuY3Rpb24gZGlzcGF0Y2hFcnJvcihhcmcpIHtcblx0ICAgIHZhciBlcnIgPSBhcmcuZXJyLCBzdWJqZWN0ID0gYXJnLnN1YmplY3Q7XG5cdCAgICBzdWJqZWN0LmVycm9yKGVycik7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Qm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBjb21iaW5lTGF0ZXN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1OSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0XzEuY29tYmluZUxhdGVzdFN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBBcnJheU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYwKTtcblx0dmFyIGlzQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIENvbWJpbmVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvIGNyZWF0ZSBhbiBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmVcblx0ICogY2FsY3VsYXRlZCBmcm9tIHRoZSBsYXRlc3QgdmFsdWVzIG9mIGVhY2ggb2YgaXRzIGlucHV0IE9ic2VydmFibGVzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbmV2ZXIgYW55IGlucHV0IE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcblx0ICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dHMsIHRoZW4gZW1pdHNcblx0ICogdGhlIG91dHB1dCBvZiB0aGF0IGZvcm11bGEuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVMYXRlc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIGBjb21iaW5lTGF0ZXN0YCBjb21iaW5lcyB0aGUgdmFsdWVzIGZyb20gdGhpcyBPYnNlcnZhYmxlIHdpdGggdmFsdWVzIGZyb21cblx0ICogT2JzZXJ2YWJsZXMgcGFzc2VkIGFzIGFyZ3VtZW50cy4gVGhpcyBpcyBkb25lIGJ5IHN1YnNjcmliaW5nIHRvIGVhY2hcblx0ICogT2JzZXJ2YWJsZSwgaW4gb3JkZXIsIGFuZCBjb2xsZWN0aW5nIGFuIGFycmF5IG9mIGVhY2ggb2YgdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlcyBhbnkgdGltZSBhbnkgb2YgdGhlIGlucHV0IE9ic2VydmFibGVzIGVtaXRzLCB0aGVuIGVpdGhlciB0YWtpbmcgdGhhdFxuXHQgKiBhcnJheSBhbmQgcGFzc2luZyBpdCBhcyBhcmd1bWVudHMgdG8gYW4gb3B0aW9uYWwgYHByb2plY3RgIGZ1bmN0aW9uIGFuZFxuXHQgKiBlbWl0dGluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoYXQsIG9yIGp1c3QgZW1pdHRpbmcgdGhlIGFycmF5IG9mIHJlY2VudFxuXHQgKiB2YWx1ZXMgZGlyZWN0bHkgaWYgdGhlcmUgaXMgbm8gYHByb2plY3RgIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5EeW5hbWljYWxseSBjYWxjdWxhdGUgdGhlIEJvZHktTWFzcyBJbmRleCBmcm9tIGFuIE9ic2VydmFibGUgb2Ygd2VpZ2h0IGFuZCBvbmUgZm9yIGhlaWdodDwvY2FwdGlvbj5cblx0ICogdmFyIHdlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoNzAsIDcyLCA3NiwgNzksIDc1KTtcblx0ICogdmFyIGhlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoMS43NiwgMS43NywgMS43OCk7XG5cdCAqIHZhciBibWkgPSB3ZWlnaHQuY29tYmluZUxhdGVzdChoZWlnaHQsICh3LCBoKSA9PiB3IC8gKGggKiBoKSk7XG5cdCAqIGJtaS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZygnQk1JIGlzICcgKyB4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlfVxuXHQgKiBAc2VlIHtAbGluayB3aXRoTGF0ZXN0RnJvbX1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbWJpbmUgd2l0aCB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcHJvamVjdF0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gcHJvamVjdCB0aGUgdmFsdWVzIGZyb21cblx0ICogdGhlIGNvbWJpbmVkIGxhdGVzdCB2YWx1ZXMgaW50byBhIG5ldyB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuXHQgKiB2YWx1ZXMgZnJvbSBlYWNoIGlucHV0IE9ic2VydmFibGUsIG9yIGFuIGFycmF5IG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgZnJvbVxuXHQgKiBlYWNoIGlucHV0IE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgY29tYmluZUxhdGVzdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29tYmluZUxhdGVzdCgpIHtcblx0ICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9qZWN0ID0gbnVsbDtcblx0ICAgIGlmICh0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBwcm9qZWN0ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiB0aGUgZmlyc3QgYW5kIG9ubHkgb3RoZXIgYXJndW1lbnQgYmVzaWRlcyB0aGUgcmVzdWx0U2VsZWN0b3IgaXMgYW4gYXJyYXlcblx0ICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCBwcm9qZWN0KWBcblx0ICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheV8xLmlzQXJyYXkob2JzZXJ2YWJsZXNbMF0pKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcblx0ICAgIH1cblx0ICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcblx0fVxuXHRleHBvcnRzLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0O1xuXHQvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuXHQvKipcblx0ICogQ29tYmluZXMgdGhlIHZhbHVlcyBmcm9tIG9ic2VydmFibGVzIHBhc3NlZCBhcyBhcmd1bWVudHMuIFRoaXMgaXMgZG9uZSBieSBzdWJzY3JpYmluZ1xuXHQgKiB0byBlYWNoIG9ic2VydmFibGUsIGluIG9yZGVyLCBhbmQgY29sbGVjdGluZyBhbiBhcnJheSBvZiBlYWNoIG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgYW55IHRpbWUgYW55IG9mIHRoZSBvYnNlcnZhYmxlc1xuXHQgKiBlbWl0cywgdGhlbiBlaXRoZXIgdGFraW5nIHRoYXQgYXJyYXkgYW5kIHBhc3NpbmcgaXQgYXMgYXJndW1lbnRzIHRvIGFuIG9wdGlvbiBgcHJvamVjdGAgZnVuY3Rpb24gYW5kIGVtaXR0aW5nIHRoZSByZXR1cm5cblx0ICogdmFsdWUgb2YgdGhhdCwgb3IganVzdCBlbWl0dGluZyB0aGUgYXJyYXkgb2YgcmVjZW50IHZhbHVlcyBkaXJlY3RseSBpZiB0aGVyZSBpcyBubyBgcHJvamVjdGAgZnVuY3Rpb24uXG5cdCAqIEBwYXJhbSB7Li4uT2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZXMgdGhlIG9ic2VydmFibGVzIHRvIGNvbWJpbmVcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gW3Byb2plY3RdIGFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIHByb2plY3QgdGhlIHZhbHVlcyBmcm9tIHRoZSBjb21iaW5lZCByZWNlbnQgdmFsdWVzIGludG8gYSBuZXcgdmFsdWUgZm9yIGVtaXNzaW9uLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBvYnNlcnZhYmxlIG9mIG90aGVyIHByb2plY3RlZCB2YWx1ZXMgZnJvbSB0aGUgbW9zdCByZWNlbnQgdmFsdWVzIGZyb20gZWFjaCBvYnNlcnZhYmxlLCBvciBhbiBhcnJheSBvZiBlYWNoIG9mXG5cdCAqIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgZnJvbSBlYWNoIG9ic2VydmFibGUuXG5cdCAqIEBzdGF0aWMgdHJ1ZVxuXHQgKiBAbmFtZSBjb21iaW5lTGF0ZXN0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBjb21iaW5lTGF0ZXN0U3RhdGljKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb2plY3QgPSBudWxsO1xuXHQgICAgdmFyIHNjaGVkdWxlciA9IG51bGw7XG5cdCAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSkpIHtcblx0ICAgICAgICBzY2hlZHVsZXIgPSBvYnNlcnZhYmxlcy5wb3AoKTtcblx0ICAgIH1cblx0ICAgIGlmICh0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBwcm9qZWN0ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiB0aGUgZmlyc3QgYW5kIG9ubHkgb3RoZXIgYXJndW1lbnQgYmVzaWRlcyB0aGUgcmVzdWx0U2VsZWN0b3IgaXMgYW4gYXJyYXlcblx0ICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCBwcm9qZWN0KWBcblx0ICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheV8xLmlzQXJyYXkob2JzZXJ2YWJsZXNbMF0pKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKG9ic2VydmFibGVzLCBzY2hlZHVsZXIpLmxpZnQobmV3IENvbWJpbmVMYXRlc3RPcGVyYXRvcihwcm9qZWN0KSk7XG5cdH1cblx0ZXhwb3J0cy5jb21iaW5lTGF0ZXN0U3RhdGljID0gY29tYmluZUxhdGVzdFN0YXRpYztcblx0dmFyIENvbWJpbmVMYXRlc3RPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T3BlcmF0b3IocHJvamVjdCkge1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICB9XG5cdCAgICBDb21iaW5lTGF0ZXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLkNvbWJpbmVMYXRlc3RPcGVyYXRvciA9IENvbWJpbmVMYXRlc3RPcGVyYXRvcjtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gW107XG5cdCAgICAgICAgdGhpcy50b1Jlc3BvbmQgPSBbXTtcblx0ICAgIH1cblx0ICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlKSB7XG5cdCAgICAgICAgdmFyIHRvUmVzcG9uZCA9IHRoaXMudG9SZXNwb25kO1xuXHQgICAgICAgIHRvUmVzcG9uZC5wdXNoKHRvUmVzcG9uZC5sZW5ndGgpO1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlKTtcblx0ICAgIH07XG5cdCAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IHRoaXMub2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdmFyIGxlbiA9IG9ic2VydmFibGVzLmxlbmd0aDtcblx0ICAgICAgICBpZiAobGVuID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gbGVuO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG9ic2VydmFibGVzW2ldO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKHVudXNlZCkge1xuXHQgICAgICAgIGlmICgodGhpcy5hY3RpdmUgLT0gMSkgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcblx0ICAgICAgICB2YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlO1xuXHQgICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcblx0ICAgICAgICBpZiAodG9SZXNwb25kLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIGZvdW5kID0gdG9SZXNwb25kLmluZGV4T2Yob3V0ZXJJbmRleCk7XG5cdCAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgICAgIHRvUmVzcG9uZC5zcGxpY2UoZm91bmQsIDEpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0b1Jlc3BvbmQubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnByb2plY3QpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuX3RyeVByb2plY3QodmFsdWVzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJvamVjdCA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5hcHBseSh0aGlzLCB2YWx1ZXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ29tYmluZUxhdGVzdFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuQ29tYmluZUxhdGVzdFN1YnNjcmliZXIgPSBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgU2NhbGFyT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjEpO1xuXHR2YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Mik7XG5cdHZhciBpc1NjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjMpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBBcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFycmF5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmICghc2NoZWR1bGVyICYmIGFycmF5Lmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBhcnJheVswXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBBcnJheU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGFycmF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHNvbWUgdmFsdWVzIHlvdSBzcGVjaWZ5IGFzIGFyZ3VtZW50cyxcblx0ICAgICAqIGltbWVkaWF0ZWx5IG9uZSBhZnRlciB0aGUgb3RoZXIsIGFuZCB0aGVuIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyB0aGUgYXJndW1lbnRzIHlvdSBwcm92aWRlLCB0aGVuIGNvbXBsZXRlcy5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL29mLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcblx0ICAgICAqIGVtaXRzIHRoZSBhcmd1bWVudHMgZ2l2ZW4sIGFuZCB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uIHRoZXJlYWZ0ZXIuIEl0IGNhblxuXHQgICAgICogYmUgdXNlZCBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgd2l0aCB7QGxpbmsgY29uY2F0fS5cblx0ICAgICAqIEJ5IGRlZmF1bHQsIGl0IHVzZXMgYSBgbnVsbGAgU2NoZWR1bGVyLCB3aGljaCBtZWFucyB0aGUgYG5leHRgXG5cdCAgICAgKiBub3RpZmljYXRpb25zIGFyZSBzZW50IHN5bmNocm9ub3VzbHksIGFsdGhvdWdoIHdpdGggYSBkaWZmZXJlbnQgU2NoZWR1bGVyXG5cdCAgICAgKiBpdCBpcyBwb3NzaWJsZSB0byBkZXRlcm1pbmUgd2hlbiB0aG9zZSBub3RpZmljYXRpb25zIHdpbGwgYmUgZGVsaXZlcmVkLlxuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgMTAsIDIwLCAzMCwgdGhlbiAnYScsICdiJywgJ2MnLCB0aGVuIHN0YXJ0IHRpY2tpbmcgZXZlcnkgc2Vjb25kLjwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5vZigxMCwgMjAsIDMwKTtcblx0ICAgICAqIHZhciBsZXR0ZXJzID0gUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKTtcblx0ICAgICAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb25jYXQobGV0dGVycykuY29uY2F0KGludGVydmFsKTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZW1wdHl9XG5cdCAgICAgKiBAc2VlIHtAbGluayBuZXZlcn1cblx0ICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7Li4uVH0gdmFsdWVzIEFyZ3VtZW50cyB0aGF0IHJlcHJlc2VudCBgbmV4dGAgdmFsdWVzIHRvIGJlIGVtaXR0ZWQuXG5cdCAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcblx0ICAgICAqIHRoZSBlbWlzc2lvbnMgb2YgdGhlIGBuZXh0YCBub3RpZmljYXRpb25zLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGVhY2ggZ2l2ZW4gaW5wdXQgdmFsdWUuXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIG9mXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBBcnJheU9ic2VydmFibGUub2YgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGFycmF5ID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgYXJyYXlbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcblx0ICAgICAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG5cdCAgICAgICAgICAgIGFycmF5LnBvcCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aDtcblx0ICAgICAgICBpZiAobGVuID4gMSkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAobGVuID09PSAxKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlbMF0sIHNjaGVkdWxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBBcnJheU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgYXJyYXkgPSBzdGF0ZS5hcnJheSwgaW5kZXggPSBzdGF0ZS5pbmRleCwgY291bnQgPSBzdGF0ZS5jb3VudCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICAgICAgaWYgKGluZGV4ID49IGNvdW50KSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQoYXJyYXlbaW5kZXhdKTtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIEFycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5O1xuXHQgICAgICAgIHZhciBjb3VudCA9IGFycmF5Lmxlbmd0aDtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEFycmF5T2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgYXJyYXk6IGFycmF5LCBpbmRleDogaW5kZXgsIGNvdW50OiBjb3VudCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQgJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5W2ldKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBBcnJheU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5BcnJheU9ic2VydmFibGUgPSBBcnJheU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5T2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBTY2FsYXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTY2FsYXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU2NhbGFyT2JzZXJ2YWJsZSh2YWx1ZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuX2lzU2NhbGFyID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIFNjYWxhck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFNjYWxhck9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcik7XG5cdCAgICB9O1xuXHQgICAgU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBkb25lID0gc3RhdGUuZG9uZSwgdmFsdWUgPSBzdGF0ZS52YWx1ZSwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICAgICAgaWYgKGRvbmUpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGF0ZS5kb25lID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBTY2FsYXJPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgZG9uZTogZmFsc2UsIHZhbHVlOiB2YWx1ZSwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTY2FsYXJPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuU2NhbGFyT2JzZXJ2YWJsZSA9IFNjYWxhck9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjYWxhck9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgRW1wdHlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhFbXB0eU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBFbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG5vIGl0ZW1zIHRvIHRoZSBPYnNlcnZlciBhbmQgaW1tZWRpYXRlbHlcblx0ICAgICAqIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5KdXN0IGVtaXRzICdjb21wbGV0ZScsIGFuZCBub3RoaW5nIGVsc2UuXG5cdCAgICAgKiA8L3NwYW4+XG5cdCAgICAgKlxuXHQgICAgICogPGltZyBzcmM9XCIuL2ltZy9lbXB0eS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBUaGlzIHN0YXRpYyBvcGVyYXRvciBpcyB1c2VmdWwgZm9yIGNyZWF0aW5nIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBvbmx5XG5cdCAgICAgKiBlbWl0cyB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uLiBJdCBjYW4gYmUgdXNlZCBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXJcblx0ICAgICAqIE9ic2VydmFibGVzLCBzdWNoIGFzIGluIGEge0BsaW5rIG1lcmdlTWFwfS5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBjb21wbGV0ZS48L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpLnN0YXJ0V2l0aCg3KTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIG9ubHkgb2RkIG51bWJlcnMgdG8gdGhlIHNlcXVlbmNlICdhJywgJ2InLCAnYyc8L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuXHQgICAgICogdmFyIHJlc3VsdCA9IGludGVydmFsLm1lcmdlTWFwKHggPT5cblx0ICAgICAqICAgeCAlIDIgPT09IDEgPyBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpIDogUnguT2JzZXJ2YWJsZS5lbXB0eSgpXG5cdCAgICAgKiApO1xuXHQgICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAc2VlIHtAbGluayBjcmVhdGV9XG5cdCAgICAgKiBAc2VlIHtAbGluayBuZXZlcn1cblx0ICAgICAqIEBzZWUge0BsaW5rIG9mfVxuXHQgICAgICogQHNlZSB7QGxpbmsgdGhyb3d9XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG5cdCAgICAgKiB0aGUgZW1pc3Npb24gb2YgdGhlIGNvbXBsZXRlIG5vdGlmaWNhdGlvbi5cblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIFwiZW1wdHlcIiBPYnNlcnZhYmxlOiBlbWl0cyBvbmx5IHRoZSBjb21wbGV0ZVxuXHQgICAgICogbm90aWZpY2F0aW9uLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBlbXB0eVxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgRW1wdHlPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIEVtcHR5T2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBFbXB0eU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBFbXB0eU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5FbXB0eU9ic2VydmFibGUgPSBFbXB0eU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUVtcHR5T2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdGZ1bmN0aW9uIGlzU2NoZWR1bGVyKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnNjaGVkdWxlID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdGV4cG9ydHMuaXNTY2hlZHVsZXIgPSBpc1NjaGVkdWxlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aXNTY2hlZHVsZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhPdXRlclN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBPdXRlclN1YnNjcmliZXIoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBPdXRlclN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5PdXRlclN1YnNjcmliZXIgPSBPdXRlclN1YnNjcmliZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU91dGVyU3Vic2NyaWJlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciByb290XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBpc1Byb21pc2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY2KTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBpdGVyYXRvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjcpO1xuXHR2YXIgb2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIElubmVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjgpO1xuXHRmdW5jdGlvbiBzdWJzY3JpYmVUb1Jlc3VsdChvdXRlclN1YnNjcmliZXIsIHJlc3VsdCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkge1xuXHQgICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IElubmVyU3Vic2NyaWJlcl8xLklubmVyU3Vic2NyaWJlcihvdXRlclN1YnNjcmliZXIsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpO1xuXHQgICAgaWYgKGRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSB7XG5cdCAgICAgICAgaWYgKHJlc3VsdC5faXNTY2FsYXIpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQudmFsdWUpO1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHJlc3VsdCkpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVzdWx0Lmxlbmd0aDsgaSA8IGxlbiAmJiAhZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHJlc3VsdFtpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChpc1Byb21pc2VfMS5pc1Byb21pc2UocmVzdWx0KSkge1xuXHQgICAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBkZXN0aW5hdGlvbi5lcnJvcihlcnIpOyB9KVxuXHQgICAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgICAgIC8vIEVzY2FwaW5nIHRoZSBQcm9taXNlIHRyYXA6IGdsb2JhbGx5IHRocm93IHVuaGFuZGxlZCBlcnJvcnNcblx0ICAgICAgICAgICAgcm9vdF8xLnJvb3Quc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRocm93IGVycjsgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAodHlwZW9mIHJlc3VsdFtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHJlc3VsdDsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaXRlbSk7XG5cdCAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKHR5cGVvZiByZXN1bHRbb2JzZXJ2YWJsZV8xLiQkb2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICB2YXIgb2JzID0gcmVzdWx0W29ic2VydmFibGVfMS4kJG9ic2VydmFibGVdKCk7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBvYnMuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKCdpbnZhbGlkIG9ic2VydmFibGUnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYnMuc3Vic2NyaWJlKG5ldyBJbm5lclN1YnNjcmliZXJfMS5Jbm5lclN1YnNjcmliZXIob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgZGVzdGluYXRpb24uZXJyb3IobmV3IFR5cGVFcnJvcigndW5rbm93biB0eXBlIHJldHVybmVkJykpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMuc3Vic2NyaWJlVG9SZXN1bHQgPSBzdWJzY3JpYmVUb1Jlc3VsdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9SZXN1bHQuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRmdW5jdGlvbiBpc1Byb21pc2UodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdGV4cG9ydHMuaXNQcm9taXNlID0gaXNQcm9taXNlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pc1Byb21pc2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgcm9vdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIFN5bWJvbCA9IHJvb3RfMS5yb290LlN5bWJvbDtcblx0aWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIGlmIChTeW1ib2wuaXRlcmF0b3IpIHtcblx0ICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSBTeW1ib2wuaXRlcmF0b3I7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmICh0eXBlb2YgU3ltYm9sLmZvciA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9IFN5bWJvbC5mb3IoJ2l0ZXJhdG9yJyk7XG5cdCAgICB9XG5cdH1cblx0ZWxzZSB7XG5cdCAgICBpZiAocm9vdF8xLnJvb3QuU2V0ICYmIHR5cGVvZiBuZXcgcm9vdF8xLnJvb3QuU2V0KClbJ0BAaXRlcmF0b3InXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIC8vIEJ1ZyBmb3IgbW96aWxsYSB2ZXJzaW9uXG5cdCAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0gJ0BAaXRlcmF0b3InO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAocm9vdF8xLnJvb3QuTWFwKSB7XG5cdCAgICAgICAgLy8gZXM2LXNoaW0gc3BlY2lmaWMgbG9naWNcblx0ICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHJvb3RfMS5yb290Lk1hcC5wcm90b3R5cGUpO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuXHQgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgICAgICAgaWYgKGtleSAhPT0gJ2VudHJpZXMnICYmIGtleSAhPT0gJ3NpemUnICYmIHJvb3RfMS5yb290Lk1hcC5wcm90b3R5cGVba2V5XSA9PT0gcm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZVsnZW50cmllcyddKSB7XG5cdCAgICAgICAgICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSBrZXk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9ICdAQGl0ZXJhdG9yJztcblx0ICAgIH1cblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYXRvci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM2OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBJbm5lclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKElubmVyU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIElubmVyU3Vic2NyaWJlcihwYXJlbnQsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgICAgICB0aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuXHQgICAgICAgIHRoaXMub3V0ZXJJbmRleCA9IG91dGVySW5kZXg7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBJbm5lclN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5TmV4dCh0aGlzLm91dGVyVmFsdWUsIHZhbHVlLCB0aGlzLm91dGVySW5kZXgsIHRoaXMuaW5kZXgrKywgdGhpcyk7XG5cdCAgICB9O1xuXHQgICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcblx0ICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlFcnJvcihlcnJvciwgdGhpcyk7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgfTtcblx0ICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSW5uZXJTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuSW5uZXJTdWJzY3JpYmVyID0gSW5uZXJTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5lclN1YnNjcmliZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGNvbmNhdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5jb25jYXQgPSBjb25jYXRfMS5jb25jYXQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBjb25jYXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzcxKTtcblx0ZXhwb3J0cy5jb25jYXQgPSBjb25jYXRfMS5jb25jYXRTdGF0aWM7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBpc1NjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjMpO1xuXHR2YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdHZhciBtZXJnZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzIpO1xuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBvdXRwdXQgT2JzZXJ2YWJsZSB3aGljaCBzZXF1ZW50aWFsbHkgZW1pdHMgYWxsIHZhbHVlcyBmcm9tIGV2ZXJ5XG5cdCAqIGdpdmVuIGlucHV0IE9ic2VydmFibGUgYWZ0ZXIgdGhlIGN1cnJlbnQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbmNhdGVuYXRlcyBtdWx0aXBsZSBPYnNlcnZhYmxlcyB0b2dldGhlciBieVxuXHQgKiBzZXF1ZW50aWFsbHkgZW1pdHRpbmcgdGhlaXIgdmFsdWVzLCBvbmUgT2JzZXJ2YWJsZSBhZnRlciB0aGUgb3RoZXIuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogSm9pbnMgdGhpcyBPYnNlcnZhYmxlIHdpdGggbXVsdGlwbGUgb3RoZXIgT2JzZXJ2YWJsZXMgYnkgc3Vic2NyaWJpbmcgdG8gdGhlbVxuXHQgKiBvbmUgYXQgYSB0aW1lLCBzdGFydGluZyB3aXRoIHRoZSBzb3VyY2UsIGFuZCBtZXJnaW5nIHRoZWlyIHJlc3VsdHMgaW50byB0aGVcblx0ICogb3V0cHV0IE9ic2VydmFibGUuIFdpbGwgd2FpdCBmb3IgZWFjaCBPYnNlcnZhYmxlIHRvIGNvbXBsZXRlIGJlZm9yZSBtb3Zpbmdcblx0ICogb24gdG8gdGhlIG5leHQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbmNhdGVuYXRlIGEgdGltZXIgY291bnRpbmcgZnJvbSAwIHRvIDMgd2l0aCBhIHN5bmNocm9ub3VzIHNlcXVlbmNlIGZyb20gMSB0byAxMDwvY2FwdGlvbj5cblx0ICogdmFyIHRpbWVyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpO1xuXHQgKiB2YXIgc2VxdWVuY2UgPSBSeC5PYnNlcnZhYmxlLnJhbmdlKDEsIDEwKTtcblx0ICogdmFyIHJlc3VsdCA9IHRpbWVyLmNvbmNhdChzZXF1ZW5jZSk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbmNhdGVuYXRlIDMgT2JzZXJ2YWJsZXM8L2NhcHRpb24+XG5cdCAqIHZhciB0aW1lcjEgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoMTApO1xuXHQgKiB2YXIgdGltZXIyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgyMDAwKS50YWtlKDYpO1xuXHQgKiB2YXIgdGltZXIzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApLnRha2UoMTApO1xuXHQgKiB2YXIgcmVzdWx0ID0gdGltZXIxLmNvbmNhdCh0aW1lcjIsIHRpbWVyMyk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIGNvbmNhdGVuYXRlIGFmdGVyIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPW51bGxdIEFuIG9wdGlvbmFsIFNjaGVkdWxlciB0byBzY2hlZHVsZSBlYWNoXG5cdCAqIE9ic2VydmFibGUgc3Vic2NyaXB0aW9uIG9uLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbGwgdmFsdWVzIG9mIGVhY2ggcGFzc2VkIE9ic2VydmFibGUgbWVyZ2VkIGludG8gYVxuXHQgKiBzaW5nbGUgT2JzZXJ2YWJsZSwgaW4gb3JkZXIsIGluIHNlcmlhbCBmYXNoaW9uLlxuXHQgKiBAbWV0aG9kIGNvbmNhdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uY2F0KCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGNvbmNhdFN0YXRpYy5hcHBseSh2b2lkIDAsIFt0aGlzXS5jb25jYXQob2JzZXJ2YWJsZXMpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdCA9IGNvbmNhdDtcblx0LyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggc2VxdWVudGlhbGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuXHQgKiBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlIGFmdGVyIHRoZSBjdXJyZW50IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db25jYXRlbmF0ZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnlcblx0ICogc2VxdWVudGlhbGx5IGVtaXR0aW5nIHRoZWlyIHZhbHVlcywgb25lIE9ic2VydmFibGUgYWZ0ZXIgdGhlIG90aGVyLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEpvaW5zIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5IHN1YnNjcmliaW5nIHRvIHRoZW0gb25lIGF0IGEgdGltZSBhbmRcblx0ICogbWVyZ2luZyB0aGVpciByZXN1bHRzIGludG8gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBXaWxsIHdhaXQgZm9yIGVhY2hcblx0ICogT2JzZXJ2YWJsZSB0byBjb21wbGV0ZSBiZWZvcmUgbW92aW5nIG9uIHRvIHRoZSBuZXh0LlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSBhIHRpbWVyIGNvdW50aW5nIGZyb20gMCB0byAzIHdpdGggYSBzeW5jaHJvbm91cyBzZXF1ZW5jZSBmcm9tIDEgdG8gMTA8L2NhcHRpb24+XG5cdCAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KTtcblx0ICogdmFyIHNlcXVlbmNlID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCAxMCk7XG5cdCAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmNvbmNhdCh0aW1lciwgc2VxdWVuY2UpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSAzIE9ic2VydmFibGVzPC9jYXB0aW9uPlxuXHQgKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcblx0ICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcblx0ICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcblx0ICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUuY29uY2F0KHRpbWVyMSwgdGltZXIyLCB0aW1lcjMpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQxIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29uY2F0ZW5hdGUgd2l0aCBvdGhlcnMuXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29uY2F0ZW5hdGUgd2l0aCBvdGhlcnMuXG5cdCAqIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBBbiBvcHRpb25hbCBTY2hlZHVsZXIgdG8gc2NoZWR1bGUgZWFjaFxuXHQgKiBPYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBvbi5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQWxsIHZhbHVlcyBvZiBlYWNoIHBhc3NlZCBPYnNlcnZhYmxlIG1lcmdlZCBpbnRvIGFcblx0ICogc2luZ2xlIE9ic2VydmFibGUsIGluIG9yZGVyLCBpbiBzZXJpYWwgZmFzaGlvbi5cblx0ICogQHN0YXRpYyB0cnVlXG5cdCAqIEBuYW1lIGNvbmNhdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uY2F0U3RhdGljKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIHNjaGVkdWxlciA9IG51bGw7XG5cdCAgICB2YXIgYXJncyA9IG9ic2VydmFibGVzO1xuXHQgICAgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIoYXJnc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSkpIHtcblx0ICAgICAgICBzY2hlZHVsZXIgPSBhcmdzLnBvcCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikubGlmdChuZXcgbWVyZ2VBbGxfMS5NZXJnZUFsbE9wZXJhdG9yKDEpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdFN0YXRpYyA9IGNvbmNhdFN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzcyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgd2hpY2hcblx0ICogY29uY3VycmVudGx5IGRlbGl2ZXJzIGFsbCB2YWx1ZXMgdGhhdCBhcmUgZW1pdHRlZCBvbiB0aGUgaW5uZXIgT2JzZXJ2YWJsZXMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5GbGF0dGVucyBhbiBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZUFsbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYG1lcmdlQWxsYCBzdWJzY3JpYmVzIHRvIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBPYnNlcnZhYmxlcywgYWxzbyBrbm93biBhc1xuXHQgKiBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlLiBFYWNoIHRpbWUgaXQgb2JzZXJ2ZXMgb25lIG9mIHRoZXNlIGVtaXR0ZWQgaW5uZXJcblx0ICogT2JzZXJ2YWJsZXMsIGl0IHN1YnNjcmliZXMgdG8gdGhhdCBhbmQgZGVsaXZlcnMgYWxsIHRoZSB2YWx1ZXMgZnJvbSB0aGVcblx0ICogaW5uZXIgT2JzZXJ2YWJsZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5XG5cdCAqIGNvbXBsZXRlcyBvbmNlIGFsbCBpbm5lciBPYnNlcnZhYmxlcyBoYXZlIGNvbXBsZXRlZC4gQW55IGVycm9yIGRlbGl2ZXJlZCBieVxuXHQgKiBhIGlubmVyIE9ic2VydmFibGUgd2lsbCBiZSBpbW1lZGlhdGVseSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+U3Bhd24gYSBuZXcgaW50ZXJ2YWwgT2JzZXJ2YWJsZSBmb3IgZWFjaCBjbGljayBldmVudCwgYW5kIGJsZW5kIHRoZWlyIG91dHB1dHMgYXMgb25lIE9ic2VydmFibGU8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcblx0ICogdmFyIGZpcnN0T3JkZXIgPSBoaWdoZXJPcmRlci5tZXJnZUFsbCgpO1xuXHQgKiBmaXJzdE9yZGVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnQgZnJvbSAwIHRvIDkgZXZlcnkgc2Vjb25kIGZvciBlYWNoIGNsaWNrLCBidXQgb25seSBhbGxvdyAyIGNvbmN1cnJlbnQgdGltZXJzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgaGlnaGVyT3JkZXIgPSBjbGlja3MubWFwKChldikgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKSk7XG5cdCAqIHZhciBmaXJzdE9yZGVyID0gaGlnaGVyT3JkZXIubWVyZ2VBbGwoMik7XG5cdCAqIGZpcnN0T3JkZXIuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGV4aGF1c3R9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2h9XG5cdCAqIEBzZWUge0BsaW5rIHppcEFsbH1cblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5uZXJcblx0ICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB2YWx1ZXMgY29taW5nIGZyb20gYWxsIHRoZVxuXHQgKiBpbm5lciBPYnNlcnZhYmxlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBtZXJnZUFsbFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VBbGwoY29uY3VycmVudCkge1xuXHQgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNZXJnZUFsbE9wZXJhdG9yKGNvbmN1cnJlbnQpKTtcblx0fVxuXHRleHBvcnRzLm1lcmdlQWxsID0gbWVyZ2VBbGw7XG5cdHZhciBNZXJnZUFsbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlQWxsT3BlcmF0b3IoY29uY3VycmVudCkge1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICB9XG5cdCAgICBNZXJnZUFsbE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1lcmdlQWxsU3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5jb25jdXJyZW50KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1lcmdlQWxsT3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuTWVyZ2VBbGxPcGVyYXRvciA9IE1lcmdlQWxsT3BlcmF0b3I7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIE1lcmdlQWxsU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoTWVyZ2VBbGxTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWVyZ2VBbGxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb25jdXJyZW50KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgIH1cblx0ICAgIE1lcmdlQWxsU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAob2JzZXJ2YWJsZSkge1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuXHQgICAgICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuXHQgICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9ic2VydmFibGUpKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2gob2JzZXJ2YWJsZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlQWxsU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VBbGxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcblx0ICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUtLTtcblx0ICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1lcmdlQWxsU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5NZXJnZUFsbFN1YnNjcmliZXIgPSBNZXJnZUFsbFN1YnNjcmliZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlQWxsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBkZWZlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5kZWZlciA9IGRlZmVyXzEuZGVmZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIERlZmVyT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzUpO1xuXHRleHBvcnRzLmRlZmVyID0gRGVmZXJPYnNlcnZhYmxlXzEuRGVmZXJPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzNzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NSk7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY0KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgRGVmZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhEZWZlck9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBEZWZlck9ic2VydmFibGUob2JzZXJ2YWJsZUZhY3RvcnkpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVGYWN0b3J5ID0gb2JzZXJ2YWJsZUZhY3Rvcnk7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0LCBvbiBzdWJzY3JpYmUsIGNhbGxzIGFuIE9ic2VydmFibGUgZmFjdG9yeSB0b1xuXHQgICAgICogbWFrZSBhbiBPYnNlcnZhYmxlIGZvciBlYWNoIG5ldyBPYnNlcnZlci5cblx0ICAgICAqXG5cdCAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q3JlYXRlcyB0aGUgT2JzZXJ2YWJsZSBsYXppbHksIHRoYXQgaXMsIG9ubHkgd2hlbiBpdFxuXHQgICAgICogaXMgc3Vic2NyaWJlZC5cblx0ICAgICAqIDwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2RlZmVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIGBkZWZlcmAgYWxsb3dzIHlvdSB0byBjcmVhdGUgdGhlIE9ic2VydmFibGUgb25seSB3aGVuIHRoZSBPYnNlcnZlclxuXHQgICAgICogc3Vic2NyaWJlcywgYW5kIGNyZWF0ZSBhIGZyZXNoIE9ic2VydmFibGUgZm9yIGVhY2ggT2JzZXJ2ZXIuIEl0IHdhaXRzIHVudGlsXG5cdCAgICAgKiBhbiBPYnNlcnZlciBzdWJzY3JpYmVzIHRvIGl0LCBhbmQgdGhlbiBpdCBnZW5lcmF0ZXMgYW4gT2JzZXJ2YWJsZSxcblx0ICAgICAqIHR5cGljYWxseSB3aXRoIGFuIE9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbi4gSXQgZG9lcyB0aGlzIGFmcmVzaCBmb3IgZWFjaFxuXHQgICAgICogc3Vic2NyaWJlciwgc28gYWx0aG91Z2ggZWFjaCBzdWJzY3JpYmVyIG1heSB0aGluayBpdCBpcyBzdWJzY3JpYmluZyB0byB0aGVcblx0ICAgICAqIHNhbWUgT2JzZXJ2YWJsZSwgaW4gZmFjdCBlYWNoIHN1YnNjcmliZXIgZ2V0cyBpdHMgb3duIGluZGl2aWR1YWxcblx0ICAgICAqIE9ic2VydmFibGUuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHRvIGVpdGhlciBhbiBPYnNlcnZhYmxlIG9mIGNsaWNrcyBvciBhbiBPYnNlcnZhYmxlIG9mIGludGVydmFsLCBhdCByYW5kb208L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgY2xpY2tzT3JJbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuZGVmZXIoZnVuY3Rpb24gKCkge1xuXHQgICAgICogICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuXHQgICAgICogICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAgICAgKiAgIH0gZWxzZSB7XG5cdCAgICAgKiAgICAgcmV0dXJuIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiAgIH1cblx0ICAgICAqIH0pO1xuXHQgICAgICogY2xpY2tzT3JJbnRlcnZhbC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBvYnNlcnZhYmxlRmFjdG9yeSBUaGUgT2JzZXJ2YWJsZVxuXHQgICAgICogZmFjdG9yeSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggT2JzZXJ2ZXIgdGhhdCBzdWJzY3JpYmVzIHRvIHRoZSBvdXRwdXRcblx0ICAgICAqIE9ic2VydmFibGUuIE1heSBhbHNvIHJldHVybiBhIFByb21pc2UsIHdoaWNoIHdpbGwgYmUgY29udmVydGVkIG9uIHRoZSBmbHlcblx0ICAgICAqIHRvIGFuIE9ic2VydmFibGUuXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHdob3NlIE9ic2VydmVycycgc3Vic2NyaXB0aW9ucyB0cmlnZ2VyXG5cdCAgICAgKiBhbiBpbnZvY2F0aW9uIG9mIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGRlZmVyXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBEZWZlck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKG9ic2VydmFibGVGYWN0b3J5KSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBEZWZlck9ic2VydmFibGUob2JzZXJ2YWJsZUZhY3RvcnkpO1xuXHQgICAgfTtcblx0ICAgIERlZmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBEZWZlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlRmFjdG9yeSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlZmVyT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkRlZmVyT2JzZXJ2YWJsZSA9IERlZmVyT2JzZXJ2YWJsZTtcblx0dmFyIERlZmVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVmZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVmZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBmYWN0b3J5KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG5cdCAgICAgICAgdGhpcy50cnlEZWZlcigpO1xuXHQgICAgfVxuXHQgICAgRGVmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlEZWZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLl9jYWxsRmFjdG9yeSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERlZmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2NhbGxGYWN0b3J5ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmZhY3RvcnkoKTtcblx0ICAgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgcmVzdWx0KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWZlclN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgZW1wdHlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzc3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZW1wdHkgPSBlbXB0eV8xLmVtcHR5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1lbXB0eS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM3NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYyKTtcblx0ZXhwb3J0cy5lbXB0eSA9IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZS5jcmVhdGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtcHR5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzc4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBmb3JrSm9pbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzkpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mb3JrSm9pbiA9IGZvcmtKb2luXzEuZm9ya0pvaW47XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvcmtKb2luLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEZvcmtKb2luT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODApO1xuXHRleHBvcnRzLmZvcmtKb2luID0gRm9ya0pvaW5PYnNlcnZhYmxlXzEuRm9ya0pvaW5PYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9ya0pvaW4uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjIpO1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIEZvcmtKb2luT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRm9ya0pvaW5PYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRm9ya0pvaW5PYnNlcnZhYmxlKHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSBzb3VyY2VzXG5cdCAgICAgKiBAcmV0dXJuIHthbnl9XG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIGZvcmtKb2luXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBGb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzb3VyY2VzID0gW107XG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgc291cmNlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHNvdXJjZXMgPT09IG51bGwgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBudWxsO1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc291cmNlc1tzb3VyY2VzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHJlc3VsdFNlbGVjdG9yID0gc291cmNlcy5wb3AoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gaWYgdGhlIGZpcnN0IGFuZCBvbmx5IG90aGVyIGFyZ3VtZW50IGJlc2lkZXMgdGhlIHJlc3VsdFNlbGVjdG9yIGlzIGFuIGFycmF5XG5cdCAgICAgICAgLy8gYXNzdW1lIGl0J3MgYmVlbiBjYWxsZWQgd2l0aCBgZm9ya0pvaW4oW29iczEsIG9iczIsIG9iczNdLCByZXN1bHRTZWxlY3RvcilgXG5cdCAgICAgICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXlfMS5pc0FycmF5KHNvdXJjZXNbMF0pKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGb3JrSm9pbk9ic2VydmFibGUoc291cmNlcywgcmVzdWx0U2VsZWN0b3IpO1xuXHQgICAgfTtcblx0ICAgIEZvcmtKb2luT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGb3JrSm9pblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zb3VyY2VzLCB0aGlzLnJlc3VsdFNlbGVjdG9yKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRm9ya0pvaW5PYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuRm9ya0pvaW5PYnNlcnZhYmxlID0gRm9ya0pvaW5PYnNlcnZhYmxlO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBGb3JrSm9pblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZvcmtKb2luU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZvcmtKb2luU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgc291cmNlcywgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAwO1xuXHQgICAgICAgIHRoaXMuaGF2ZVZhbHVlcyA9IDA7XG5cdCAgICAgICAgdmFyIGxlbiA9IHNvdXJjZXMubGVuZ3RoO1xuXHQgICAgICAgIHRoaXMudG90YWwgPSBsZW47XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldO1xuXHQgICAgICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHNvdXJjZSwgbnVsbCwgaSk7XG5cdCAgICAgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24ub3V0ZXJJbmRleCA9IGk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBGb3JrSm9pblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG5cdCAgICAgICAgaWYgKCFpbm5lclN1Yi5faGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgaW5uZXJTdWIuX2hhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdGhpcy5oYXZlVmFsdWVzKys7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZvcmtKb2luU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGhhdmVWYWx1ZXMgPSBfYS5oYXZlVmFsdWVzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCB2YWx1ZXMgPSBfYS52YWx1ZXM7XG5cdCAgICAgICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG5cdCAgICAgICAgaWYgKCFpbm5lclN1Yi5faGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmNvbXBsZXRlZCsrO1xuXHQgICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCAhPT0gbGVuKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGhhdmVWYWx1ZXMgPT09IGxlbikge1xuXHQgICAgICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHRTZWxlY3RvciA/IHJlc3VsdFNlbGVjdG9yLmFwcGx5KHRoaXMsIHZhbHVlcykgOiB2YWx1ZXM7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGb3JrSm9pblN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUZvcmtKb2luT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgZnJvbV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mcm9tID0gZnJvbV8xLmZyb207XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb20uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRnJvbU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgzKTtcblx0ZXhwb3J0cy5mcm9tID0gRnJvbU9ic2VydmFibGVfMS5Gcm9tT2JzZXJ2YWJsZS5jcmVhdGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb20uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBpc0Z1bmN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIGlzUHJvbWlzZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjYpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0dmFyIFByb21pc2VPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4NCk7XG5cdHZhciBJdGVyYXRvck9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg1KTtcblx0dmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjApO1xuXHR2YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODYpO1xuXHR2YXIgb2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIGl0ZXJhdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Nyk7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgb2JzZXJ2ZU9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4Nyk7XG5cdHZhciBpc0FycmF5TGlrZSA9IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgRnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZyb21PYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRnJvbU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBudWxsKTtcblx0ICAgICAgICB0aGlzLmlzaCA9IGlzaDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIEZyb21PYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpc2gsIG1hcEZuT3JTY2hlZHVsZXIsIHRoaXNBcmcsIGxhc3RTY2hlZHVsZXIpIHtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgICAgICB2YXIgbWFwRm4gPSBudWxsO1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihtYXBGbk9yU2NoZWR1bGVyKSkge1xuXHQgICAgICAgICAgICBzY2hlZHVsZXIgPSBsYXN0U2NoZWR1bGVyIHx8IG51bGw7XG5cdCAgICAgICAgICAgIG1hcEZuID0gbWFwRm5PclNjaGVkdWxlcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlciA9IG1hcEZuT3JTY2hlZHVsZXI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc2ggIT0gbnVsbCkge1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGlzaFtvYnNlcnZhYmxlXzEuJCRvYnNlcnZhYmxlXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGlzaCBpbnN0YW5jZW9mIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlICYmICFzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNoO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGcm9tT2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAoaXNBcnJheV8xLmlzQXJyYXkoaXNoKSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKGlzUHJvbWlzZV8xLmlzUHJvbWlzZShpc2gpKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2VPYnNlcnZhYmxlXzEuUHJvbWlzZU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpc2hbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgaXNoID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvck9ic2VydmFibGVfMS5JdGVyYXRvck9ic2VydmFibGUoaXNoLCBudWxsLCBudWxsLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlKGlzaCkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xLkFycmF5TGlrZU9ic2VydmFibGUoaXNoLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKChpc2ggIT09IG51bGwgJiYgdHlwZW9mIGlzaCB8fCBpc2gpICsgJyBpcyBub3Qgb2JzZXJ2YWJsZScpO1xuXHQgICAgfTtcblx0ICAgIEZyb21PYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgaXNoID0gdGhpcy5pc2g7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIgPT0gbnVsbCkge1xuXHQgICAgICAgICAgICByZXR1cm4gaXNoW29ic2VydmFibGVfMS4kJG9ic2VydmFibGVdKCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGlzaFtvYnNlcnZhYmxlXzEuJCRvYnNlcnZhYmxlXSgpLnN1YnNjcmliZShuZXcgb2JzZXJ2ZU9uXzEuT2JzZXJ2ZU9uU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBzY2hlZHVsZXIsIDApKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZyb21PYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuRnJvbU9ic2VydmFibGUgPSBGcm9tT2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RnJvbU9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgcm9vdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIFByb21pc2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhQcm9taXNlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFByb21pc2VPYnNlcnZhYmxlKHByb21pc2UsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBudWxsOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHByb21pc2Vcblx0ICAgICAqIEBwYXJhbSBzY2hlZHVsZXJcblx0ICAgICAqIEByZXR1cm4ge1Byb21pc2VPYnNlcnZhYmxlfVxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBmcm9tUHJvbWlzZVxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgUHJvbWlzZU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHByb21pc2UsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBudWxsOyB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlT2JzZXJ2YWJsZShwcm9taXNlLCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIFByb21pc2VPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHQgICAgICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2NhbGFyKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodGhpcy52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2lzU2NhbGFyID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIGVzY2FwZSB0aGUgcHJvbWlzZSB0cmFwLCB0aHJvdyB1bmhhbmRsZWQgZXJyb3JzXG5cdCAgICAgICAgICAgICAgICAgICAgcm9vdF8xLnJvb3Quc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRocm93IGVycjsgfSk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2NhbGFyKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogdGhpcy52YWx1ZSwgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzLl9pc1NjYWxhciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEVycm9yLCAwLCB7IGVycjogZXJyLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9KVxuXHQgICAgICAgICAgICAgICAgICAgIC50aGVuKG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBlc2NhcGUgdGhlIHByb21pc2UgdHJhcCwgdGhyb3cgdW5oYW5kbGVkIGVycm9yc1xuXHQgICAgICAgICAgICAgICAgICAgIHJvb3RfMS5yb290LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFByb21pc2VPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuUHJvbWlzZU9ic2VydmFibGUgPSBQcm9taXNlT2JzZXJ2YWJsZTtcblx0ZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KGFyZykge1xuXHQgICAgdmFyIHZhbHVlID0gYXJnLnZhbHVlLCBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG5cdCAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuXHQgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgIH1cblx0fVxuXHRmdW5jdGlvbiBkaXNwYXRjaEVycm9yKGFyZykge1xuXHQgICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcblx0ICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTtcblx0ICAgIH1cblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9taXNlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciByb290XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgaXNPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGlzRnVuY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgaXRlcmF0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY3KTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgSXRlcmF0b3JPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhJdGVyYXRvck9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBJdGVyYXRvck9ic2VydmFibGUoaXRlcmF0b3IsIHByb2plY3QsIHRoaXNBcmcsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIGlmIChpdGVyYXRvciA9PSBudWxsKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaXRlcmF0b3IgY2Fubm90IGJlIG51bGwuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc09iamVjdF8xLmlzT2JqZWN0KHByb2plY3QpKSB7XG5cdCAgICAgICAgICAgIHRoaXMudGhpc0FyZyA9IHByb2plY3Q7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gdGhpc0FyZztcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbl8xLmlzRnVuY3Rpb24ocHJvamVjdCkpIHtcblx0ICAgICAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZztcblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKHByb2plY3QgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doZW4gcHJvdmlkZWQsIGBwcm9qZWN0YCBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuaXRlcmF0b3IgPSBnZXRJdGVyYXRvcihpdGVyYXRvcik7XG5cdCAgICB9XG5cdCAgICBJdGVyYXRvck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGl0ZXJhdG9yLCBwcm9qZWN0LCB0aGlzQXJnLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yT2JzZXJ2YWJsZShpdGVyYXRvciwgcHJvamVjdCwgdGhpc0FyZywgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICBJdGVyYXRvck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgaGFzRXJyb3IgPSBzdGF0ZS5oYXNFcnJvciwgdGhpc0FyZyA9IHN0YXRlLnRoaXNBcmcsIHByb2plY3QgPSBzdGF0ZS5wcm9qZWN0LCBpdGVyYXRvciA9IHN0YXRlLml0ZXJhdG9yLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcblx0ICAgICAgICBpZiAoaGFzRXJyb3IpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihzdGF0ZS5lcnJvcik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChwcm9qZWN0KSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2gocHJvamVjdCkuY2FsbCh0aGlzQXJnLCByZXN1bHQudmFsdWUsIGluZGV4KTtcblx0ICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmU7XG5cdCAgICAgICAgICAgICAgICBzdGF0ZS5oYXNFcnJvciA9IHRydWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcblx0ICAgICAgICAgICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcblx0ICAgICAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG5cdCAgICB9O1xuXHQgICAgSXRlcmF0b3JPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSAwO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGl0ZXJhdG9yID0gX2EuaXRlcmF0b3IsIHByb2plY3QgPSBfYS5wcm9qZWN0LCB0aGlzQXJnID0gX2EudGhpc0FyZywgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShJdGVyYXRvck9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcblx0ICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCwgdGhpc0FyZzogdGhpc0FyZywgcHJvamVjdDogcHJvamVjdCwgaXRlcmF0b3I6IGl0ZXJhdG9yLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZG8ge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcblx0ICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb2plY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHByb2plY3QpLmNhbGwodGhpc0FyZywgcmVzdWx0LnZhbHVlLCBpbmRleCsrKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdC52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEl0ZXJhdG9yT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkl0ZXJhdG9yT2JzZXJ2YWJsZSA9IEl0ZXJhdG9yT2JzZXJ2YWJsZTtcblx0dmFyIFN0cmluZ0l0ZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN0cmluZ0l0ZXJhdG9yKHN0ciwgaWR4LCBsZW4pIHtcblx0ICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuXHQgICAgICAgIGlmIChsZW4gPT09IHZvaWQgMCkgeyBsZW4gPSBzdHIubGVuZ3RoOyB9XG5cdCAgICAgICAgdGhpcy5zdHIgPSBzdHI7XG5cdCAgICAgICAgdGhpcy5pZHggPSBpZHg7XG5cdCAgICAgICAgdGhpcy5sZW4gPSBsZW47XG5cdCAgICB9XG5cdCAgICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0aGlzKTsgfTtcblx0ICAgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmlkeCA8IHRoaXMubGVuID8ge1xuXHQgICAgICAgICAgICBkb25lOiBmYWxzZSxcblx0ICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RyLmNoYXJBdCh0aGlzLmlkeCsrKVxuXHQgICAgICAgIH0gOiB7XG5cdCAgICAgICAgICAgIGRvbmU6IHRydWUsXG5cdCAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWRcblx0ICAgICAgICB9O1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTdHJpbmdJdGVyYXRvcjtcblx0fSgpKTtcblx0dmFyIEFycmF5SXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQXJyYXlJdGVyYXRvcihhcnIsIGlkeCwgbGVuKSB7XG5cdCAgICAgICAgaWYgKGlkeCA9PT0gdm9pZCAwKSB7IGlkeCA9IDA7IH1cblx0ICAgICAgICBpZiAobGVuID09PSB2b2lkIDApIHsgbGVuID0gdG9MZW5ndGgoYXJyKTsgfVxuXHQgICAgICAgIHRoaXMuYXJyID0gYXJyO1xuXHQgICAgICAgIHRoaXMuaWR4ID0gaWR4O1xuXHQgICAgICAgIHRoaXMubGVuID0gbGVuO1xuXHQgICAgfVxuXHQgICAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cdCAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmlkeCA8IHRoaXMubGVuID8ge1xuXHQgICAgICAgICAgICBkb25lOiBmYWxzZSxcblx0ICAgICAgICAgICAgdmFsdWU6IHRoaXMuYXJyW3RoaXMuaWR4KytdXG5cdCAgICAgICAgfSA6IHtcblx0ICAgICAgICAgICAgZG9uZTogdHJ1ZSxcblx0ICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuXHQgICAgICAgIH07XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEFycmF5SXRlcmF0b3I7XG5cdH0oKSk7XG5cdGZ1bmN0aW9uIGdldEl0ZXJhdG9yKG9iaikge1xuXHQgICAgdmFyIGkgPSBvYmpbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXTtcblx0ICAgIGlmICghaSAmJiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHJldHVybiBuZXcgU3RyaW5nSXRlcmF0b3Iob2JqKTtcblx0ICAgIH1cblx0ICAgIGlmICghaSAmJiBvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEFycmF5SXRlcmF0b3Iob2JqKTtcblx0ICAgIH1cblx0ICAgIGlmICghaSkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdCBpcyBub3QgaXRlcmFibGUnKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvYmpbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSgpO1xuXHR9XG5cdHZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cdGZ1bmN0aW9uIHRvTGVuZ3RoKG8pIHtcblx0ICAgIHZhciBsZW4gPSArby5sZW5ndGg7XG5cdCAgICBpZiAoaXNOYU4obGVuKSkge1xuXHQgICAgICAgIHJldHVybiAwO1xuXHQgICAgfVxuXHQgICAgaWYgKGxlbiA9PT0gMCB8fCAhbnVtYmVySXNGaW5pdGUobGVuKSkge1xuXHQgICAgICAgIHJldHVybiBsZW47XG5cdCAgICB9XG5cdCAgICBsZW4gPSBzaWduKGxlbikgKiBNYXRoLmZsb29yKE1hdGguYWJzKGxlbikpO1xuXHQgICAgaWYgKGxlbiA8PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIDA7XG5cdCAgICB9XG5cdCAgICBpZiAobGVuID4gbWF4U2FmZUludGVnZXIpIHtcblx0ICAgICAgICByZXR1cm4gbWF4U2FmZUludGVnZXI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbGVuO1xuXHR9XG5cdGZ1bmN0aW9uIG51bWJlcklzRmluaXRlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiByb290XzEucm9vdC5pc0Zpbml0ZSh2YWx1ZSk7XG5cdH1cblx0ZnVuY3Rpb24gc2lnbih2YWx1ZSkge1xuXHQgICAgdmFyIHZhbHVlQXNOdW1iZXIgPSArdmFsdWU7XG5cdCAgICBpZiAodmFsdWVBc051bWJlciA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzTmFOKHZhbHVlQXNOdW1iZXIpKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlQXNOdW1iZXI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWVBc051bWJlciA8IDAgPyAtMSA6IDE7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9SXRlcmF0b3JPYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzg2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYyKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXJyYXlMaWtlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFycmF5TGlrZU9ic2VydmFibGUoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5hcnJheUxpa2UgPSBhcnJheUxpa2U7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKCFtYXBGbiAmJiAhc2NoZWR1bGVyICYmIGFycmF5TGlrZS5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLnZhbHVlID0gYXJyYXlMaWtlWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAobWFwRm4pIHtcblx0ICAgICAgICAgICAgdGhpcy5tYXBGbiA9IG1hcEZuLmJpbmQodGhpc0FyZyk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5TGlrZS5sZW5ndGg7XG5cdCAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChsZW5ndGggPT09IDEgJiYgIW1hcEZuKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlMaWtlWzBdLCBzY2hlZHVsZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpa2VPYnNlcnZhYmxlKGFycmF5TGlrZSwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEFycmF5TGlrZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgYXJyYXlMaWtlID0gc3RhdGUuYXJyYXlMaWtlLCBpbmRleCA9IHN0YXRlLmluZGV4LCBsZW5ndGggPSBzdGF0ZS5sZW5ndGgsIG1hcEZuID0gc3RhdGUubWFwRm4sIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGluZGV4ID49IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2luZGV4XSwgaW5kZXgpIDogYXJyYXlMaWtlW2luZGV4XTtcblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcblx0ICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBBcnJheUxpa2VPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSAwO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGFycmF5TGlrZSA9IF9hLmFycmF5TGlrZSwgbWFwRm4gPSBfYS5tYXBGbiwgc2NoZWR1bGVyID0gX2Euc2NoZWR1bGVyO1xuXHQgICAgICAgIHZhciBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShBcnJheUxpa2VPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG5cdCAgICAgICAgICAgICAgICBhcnJheUxpa2U6IGFycmF5TGlrZSwgaW5kZXg6IGluZGV4LCBsZW5ndGg6IGxlbmd0aCwgbWFwRm46IG1hcEZuLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2ldLCBpKSA6IGFycmF5TGlrZVtpXTtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEFycmF5TGlrZU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5BcnJheUxpa2VPYnNlcnZhYmxlID0gQXJyYXlMaWtlT2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QXJyYXlMaWtlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgTm90aWZpY2F0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4OCk7XG5cdC8qKlxuXHQgKiBAc2VlIHtAbGluayBOb3RpZmljYXRpb259XG5cdCAqXG5cdCAqIEBwYXJhbSBzY2hlZHVsZXJcblx0ICogQHBhcmFtIGRlbGF5XG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuXHQgKiBAbWV0aG9kIG9ic2VydmVPblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gb2JzZXJ2ZU9uKHNjaGVkdWxlciwgZGVsYXkpIHtcblx0ICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgT2JzZXJ2ZU9uT3BlcmF0b3Ioc2NoZWR1bGVyLCBkZWxheSkpO1xuXHR9XG5cdGV4cG9ydHMub2JzZXJ2ZU9uID0gb2JzZXJ2ZU9uO1xuXHR2YXIgT2JzZXJ2ZU9uT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gT2JzZXJ2ZU9uT3BlcmF0b3Ioc2NoZWR1bGVyLCBkZWxheSkge1xuXHQgICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcblx0ICAgIH1cblx0ICAgIE9ic2VydmVPbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgT2JzZXJ2ZU9uU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNjaGVkdWxlciwgdGhpcy5kZWxheSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBPYnNlcnZlT25PcGVyYXRvcjtcblx0fSgpKTtcblx0ZXhwb3J0cy5PYnNlcnZlT25PcGVyYXRvciA9IE9ic2VydmVPbk9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBPYnNlcnZlT25TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhPYnNlcnZlT25TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gT2JzZXJ2ZU9uU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgc2NoZWR1bGVyLCBkZWxheSkge1xuXHQgICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICB9XG5cdCAgICBPYnNlcnZlT25TdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgIHZhciBub3RpZmljYXRpb24gPSBhcmcubm90aWZpY2F0aW9uLCBkZXN0aW5hdGlvbiA9IGFyZy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG5cdCAgICB9O1xuXHQgICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuc2NoZWR1bGVNZXNzYWdlID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKE9ic2VydmVPblN1YnNjcmliZXIuZGlzcGF0Y2gsIHRoaXMuZGVsYXksIG5ldyBPYnNlcnZlT25NZXNzYWdlKG5vdGlmaWNhdGlvbiwgdGhpcy5kZXN0aW5hdGlvbikpKTtcblx0ICAgIH07XG5cdCAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG5cdCAgICB9O1xuXHQgICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVFcnJvcihlcnIpKTtcblx0ICAgIH07XG5cdCAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBPYnNlcnZlT25TdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IE9ic2VydmVPblN1YnNjcmliZXI7XG5cdHZhciBPYnNlcnZlT25NZXNzYWdlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE9ic2VydmVPbk1lc3NhZ2Uobm90aWZpY2F0aW9uLCBkZXN0aW5hdGlvbikge1xuXHQgICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBPYnNlcnZlT25NZXNzYWdlO1xuXHR9KCkpO1xuXHRleHBvcnRzLk9ic2VydmVPbk1lc3NhZ2UgPSBPYnNlcnZlT25NZXNzYWdlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlT24uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzODggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0LyoqXG5cdCAqIFJlcHJlc2VudHMgYSBwdXNoLWJhc2VkIGV2ZW50IG9yIHZhbHVlIHRoYXQgYW4ge0BsaW5rIE9ic2VydmFibGV9IGNhbiBlbWl0LlxuXHQgKiBUaGlzIGNsYXNzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIG9wZXJhdG9ycyB0aGF0IG1hbmFnZSBub3RpZmljYXRpb25zLFxuXHQgKiBsaWtlIHtAbGluayBtYXRlcmlhbGl6ZX0sIHtAbGluayBkZW1hdGVyaWFsaXplfSwge0BsaW5rIG9ic2VydmVPbn0sIGFuZFxuXHQgKiBvdGhlcnMuIEJlc2lkZXMgd3JhcHBpbmcgdGhlIGFjdHVhbCBkZWxpdmVyZWQgdmFsdWUsIGl0IGFsc28gYW5ub3RhdGVzIGl0XG5cdCAqIHdpdGggbWV0YWRhdGEgb2YsIGZvciBpbnN0YW5jZSwgd2hhdCB0eXBlIG9mIHB1c2ggbWVzc2FnZSBpdCBpcyAoYG5leHRgLFxuXHQgKiBgZXJyb3JgLCBvciBgY29tcGxldGVgKS5cblx0ICpcblx0ICogQHNlZSB7QGxpbmsgbWF0ZXJpYWxpemV9XG5cdCAqIEBzZWUge0BsaW5rIGRlbWF0ZXJpYWxpemV9XG5cdCAqIEBzZWUge0BsaW5rIG9ic2VydmVPbn1cblx0ICpcblx0ICogQGNsYXNzIE5vdGlmaWNhdGlvbjxUPlxuXHQgKi9cblx0dmFyIE5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBOb3RpZmljYXRpb24oa2luZCwgdmFsdWUsIGV4Y2VwdGlvbikge1xuXHQgICAgICAgIHRoaXMua2luZCA9IGtpbmQ7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgIHRoaXMuZXhjZXB0aW9uID0gZXhjZXB0aW9uO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBraW5kID09PSAnTic7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIERlbGl2ZXJzIHRvIHRoZSBnaXZlbiBgb2JzZXJ2ZXJgIHRoZSB2YWx1ZSB3cmFwcGVkIGJ5IHRoaXMgTm90aWZpY2F0aW9uLlxuXHQgICAgICogQHBhcmFtIHtPYnNlcnZlcn0gb2JzZXJ2ZXJcblx0ICAgICAqIEByZXR1cm5cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG5cdCAgICAgICAgc3dpdGNoICh0aGlzLmtpbmQpIHtcblx0ICAgICAgICAgICAgY2FzZSAnTic6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIubmV4dCAmJiBvYnNlcnZlci5uZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgICAgICAgICBjYXNlICdFJzpcblx0ICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvciAmJiBvYnNlcnZlci5lcnJvcih0aGlzLmV4Y2VwdGlvbik7XG5cdCAgICAgICAgICAgIGNhc2UgJ0MnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmNvbXBsZXRlICYmIG9ic2VydmVyLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogR2l2ZW4gc29tZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrcywgZGVsaXZlciB0aGUgdmFsdWUgcmVwcmVzZW50ZWQgYnkgdGhlXG5cdCAgICAgKiBjdXJyZW50IE5vdGlmaWNhdGlvbiB0byB0aGUgY29ycmVjdGx5IGNvcnJlc3BvbmRpbmcgY2FsbGJhY2suXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dCBBbiBPYnNlcnZlciBgbmV4dGAgY2FsbGJhY2suXG5cdCAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGVycjogYW55KTogdm9pZH0gW2Vycm9yXSBBbiBPYnNlcnZlciBgZXJyb3JgIGNhbGxiYWNrLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG5cdCAgICAgKiBAcmV0dXJuIHthbnl9XG5cdCAgICAgKi9cblx0ICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuZG8gPSBmdW5jdGlvbiAobmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG5cdCAgICAgICAgdmFyIGtpbmQgPSB0aGlzLmtpbmQ7XG5cdCAgICAgICAgc3dpdGNoIChraW5kKSB7XG5cdCAgICAgICAgICAgIGNhc2UgJ04nOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQgJiYgbmV4dCh0aGlzLnZhbHVlKTtcblx0ICAgICAgICAgICAgY2FzZSAnRSc6XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IgJiYgZXJyb3IodGhpcy5leGNlcHRpb24pO1xuXHQgICAgICAgICAgICBjYXNlICdDJzpcblx0ICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZSAmJiBjb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIFRha2VzIGFuIE9ic2VydmVyIG9yIGl0cyBpbmRpdmlkdWFsIGNhbGxiYWNrIGZ1bmN0aW9ucywgYW5kIGNhbGxzIGBvYnNlcnZlYFxuXHQgICAgICogb3IgYGRvYCBtZXRob2RzIGFjY29yZGluZ2x5LlxuXHQgICAgICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbih2YWx1ZTogVCk6IHZvaWR9IG5leHRPck9ic2VydmVyIEFuIE9ic2VydmVyIG9yXG5cdCAgICAgKiB0aGUgYG5leHRgIGNhbGxiYWNrLlxuXHQgICAgICogQHBhcmFtIHtmdW5jdGlvbihlcnI6IGFueSk6IHZvaWR9IFtlcnJvcl0gQW4gT2JzZXJ2ZXIgYGVycm9yYCBjYWxsYmFjay5cblx0ICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gW2NvbXBsZXRlXSBBbiBPYnNlcnZlciBgY29tcGxldGVgIGNhbGxiYWNrLlxuXHQgICAgICogQHJldHVybiB7YW55fVxuXHQgICAgICovXG5cdCAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG5cdCAgICAgICAgaWYgKG5leHRPck9ic2VydmVyICYmIHR5cGVvZiBuZXh0T3JPYnNlcnZlci5uZXh0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmUobmV4dE9yT2JzZXJ2ZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG8obmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQganVzdCBkZWxpdmVycyB0aGUgbm90aWZpY2F0aW9uIHJlcHJlc2VudGVkXG5cdCAgICAgKiBieSB0aGlzIE5vdGlmaWNhdGlvbiBpbnN0YW5jZS5cblx0ICAgICAqIEByZXR1cm4ge2FueX1cblx0ICAgICAqL1xuXHQgICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGtpbmQgPSB0aGlzLmtpbmQ7XG5cdCAgICAgICAgc3dpdGNoIChraW5kKSB7XG5cdCAgICAgICAgICAgIGNhc2UgJ04nOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm9mKHRoaXMudmFsdWUpO1xuXHQgICAgICAgICAgICBjYXNlICdFJzpcblx0ICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS50aHJvdyh0aGlzLmV4Y2VwdGlvbik7XG5cdCAgICAgICAgICAgIGNhc2UgJ0MnOlxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmVtcHR5KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYG5leHRgIGZyb20gYVxuXHQgICAgICogZ2l2ZW4gdmFsdWUuXG5cdCAgICAgKiBAcGFyYW0ge1R9IHZhbHVlIFRoZSBgbmV4dGAgdmFsdWUuXG5cdCAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcIm5leHRcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZVxuXHQgICAgICogYXJndW1lbnQuXG5cdCAgICAgKi9cblx0ICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBOb3RpZmljYXRpb24oJ04nLCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aGlzLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uO1xuXHQgICAgfTtcblx0ICAgIC8qKlxuXHQgICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGVycm9yYCBmcm9tIGFcblx0ICAgICAqIGdpdmVuIGVycm9yLlxuXHQgICAgICogQHBhcmFtIHthbnl9IFtlcnJdIFRoZSBgZXJyb3JgIGV4Y2VwdGlvbi5cblx0ICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxUPn0gVGhlIFwiZXJyb3JcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZVxuXHQgICAgICogYXJndW1lbnQuXG5cdCAgICAgKi9cblx0ICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignRScsIHVuZGVmaW5lZCwgZXJyKTtcblx0ICAgIH07XG5cdCAgICAvKipcblx0ICAgICAqIEEgc2hvcnRjdXQgdG8gY3JlYXRlIGEgTm90aWZpY2F0aW9uIGluc3RhbmNlIG9mIHRoZSB0eXBlIGBjb21wbGV0ZWAuXG5cdCAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248YW55Pn0gVGhlIHZhbHVlbGVzcyBcImNvbXBsZXRlXCIgTm90aWZpY2F0aW9uLlxuXHQgICAgICovXG5cdCAgICBOb3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVOb3RpZmljYXRpb247XG5cdCAgICB9O1xuXHQgICAgTm90aWZpY2F0aW9uLmNvbXBsZXRlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbignQycpO1xuXHQgICAgTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbignTicsIHVuZGVmaW5lZCk7XG5cdCAgICByZXR1cm4gTm90aWZpY2F0aW9uO1xuXHR9KCkpO1xuXHRleHBvcnRzLk5vdGlmaWNhdGlvbiA9IE5vdGlmaWNhdGlvbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Tm90aWZpY2F0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBmcm9tRXZlbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzkwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbUV2ZW50ID0gZnJvbUV2ZW50XzEuZnJvbUV2ZW50O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRnJvbUV2ZW50T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOTEpO1xuXHRleHBvcnRzLmZyb21FdmVudCA9IEZyb21FdmVudE9ic2VydmFibGVfMS5Gcm9tRXZlbnRPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBTdWJzY3JpcHRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRmdW5jdGlvbiBpc05vZGVTdHlsZUV2ZW50RW1taXR0ZXIoc291cmNlT2JqKSB7XG5cdCAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5hZGRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLnJlbW92ZUxpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdGZ1bmN0aW9uIGlzSlF1ZXJ5U3R5bGVFdmVudEVtaXR0ZXIoc291cmNlT2JqKSB7XG5cdCAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5vbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLm9mZiA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXHRmdW5jdGlvbiBpc05vZGVMaXN0KHNvdXJjZU9iaikge1xuXHQgICAgcmV0dXJuICEhc291cmNlT2JqICYmIHNvdXJjZU9iai50b1N0cmluZygpID09PSAnW29iamVjdCBOb2RlTGlzdF0nO1xuXHR9XG5cdGZ1bmN0aW9uIGlzSFRNTENvbGxlY3Rpb24oc291cmNlT2JqKSB7XG5cdCAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgc291cmNlT2JqLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXSc7XG5cdH1cblx0ZnVuY3Rpb24gaXNFdmVudFRhcmdldChzb3VyY2VPYmopIHtcblx0ICAgIHJldHVybiAhIXNvdXJjZU9iaiAmJiB0eXBlb2Ygc291cmNlT2JqLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5yZW1vdmVFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIEZyb21FdmVudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZyb21FdmVudE9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBGcm9tRXZlbnRPYnNlcnZhYmxlKHNvdXJjZU9iaiwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuc291cmNlT2JqID0gc291cmNlT2JqO1xuXHQgICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuXHQgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHNvdXJjZU9ialxuXHQgICAgICogQHBhcmFtIGV2ZW50TmFtZVxuXHQgICAgICogQHBhcmFtIHNlbGVjdG9yXG5cdCAgICAgKiBAcmV0dXJuIHtGcm9tRXZlbnRPYnNlcnZhYmxlfVxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBmcm9tRXZlbnRcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIEZyb21FdmVudE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNvdXJjZU9iaiwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuXHQgICAgICAgIHJldHVybiBuZXcgRnJvbUV2ZW50T2JzZXJ2YWJsZShzb3VyY2VPYmosIGV2ZW50TmFtZSwgc2VsZWN0b3IpO1xuXHQgICAgfTtcblx0ICAgIEZyb21FdmVudE9ic2VydmFibGUuc2V0dXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc291cmNlT2JqLCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgdW5zdWJzY3JpYmU7XG5cdCAgICAgICAgaWYgKGlzTm9kZUxpc3Qoc291cmNlT2JqKSB8fCBpc0hUTUxDb2xsZWN0aW9uKHNvdXJjZU9iaikpIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZU9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICAgICAgRnJvbUV2ZW50T2JzZXJ2YWJsZS5zZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmpbaV0sIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNFdmVudFRhcmdldChzb3VyY2VPYmopKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZU9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG5cdCAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopKSB7XG5cdCAgICAgICAgICAgIHNvdXJjZU9iai5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuXHQgICAgICAgICAgICB1bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNvdXJjZU9iai5vZmYoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAoaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyKHNvdXJjZU9iaikpIHtcblx0ICAgICAgICAgICAgc291cmNlT2JqLmFkZExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG5cdCAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmliZXIuYWRkKG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpKTtcblx0ICAgIH07XG5cdCAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgc291cmNlT2JqID0gdGhpcy5zb3VyY2VPYmo7XG5cdCAgICAgICAgdmFyIGV2ZW50TmFtZSA9IHRoaXMuZXZlbnROYW1lO1xuXHQgICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSBzZWxlY3RvciA/IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcblx0ICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG5cdCAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBzdWJzY3JpYmVyLm5leHQoZSk7IH07XG5cdCAgICAgICAgRnJvbUV2ZW50T2JzZXJ2YWJsZS5zZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmosIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlcik7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZyb21FdmVudE9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5Gcm9tRXZlbnRPYnNlcnZhYmxlID0gRnJvbUV2ZW50T2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RnJvbUV2ZW50T2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgZnJvbUV2ZW50UGF0dGVybl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOTMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mcm9tRXZlbnRQYXR0ZXJuID0gZnJvbUV2ZW50UGF0dGVybl8xLmZyb21FdmVudFBhdHRlcm47XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudFBhdHRlcm4uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzk0KTtcblx0ZXhwb3J0cy5mcm9tRXZlbnRQYXR0ZXJuID0gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGVfMS5Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5jcmVhdGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudFBhdHRlcm4uanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciB0cnlDYXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciBlcnJvck9iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5hZGRIYW5kbGVyID0gYWRkSGFuZGxlcjtcblx0ICAgICAgICB0aGlzLnJlbW92ZUhhbmRsZXIgPSByZW1vdmVIYW5kbGVyO1xuXHQgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIGFkZEhhbmRsZXJcblx0ICAgICAqIEBwYXJhbSByZW1vdmVIYW5kbGVyXG5cdCAgICAgKiBAcGFyYW0gc2VsZWN0b3Jcblx0ICAgICAqIEByZXR1cm4ge0Zyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlfVxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBmcm9tRXZlbnRQYXR0ZXJuXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKTtcblx0ICAgIH07XG5cdCAgICBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIGFkZEhhbmRsZXIgPSB0aGlzLmFkZEhhbmRsZXI7XG5cdCAgICAgICAgdmFyIHJlbW92ZUhhbmRsZXIgPSB0aGlzLnJlbW92ZUhhbmRsZXI7XG5cdCAgICAgICAgdmFyIHNlbGVjdG9yID0gdGhpcy5zZWxlY3Rvcjtcblx0ICAgICAgICB2YXIgaGFuZGxlciA9IHNlbGVjdG9yID8gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IocmVzdWx0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IDogZnVuY3Rpb24gKGUpIHsgc3Vic2NyaWJlci5uZXh0KGUpOyB9O1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGFkZEhhbmRsZXIpKGhhbmRsZXIpO1xuXHQgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihyZXN1bHQuZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmliZXIuYWRkKG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvL1RPRE86IGRldGVybWluZSB3aGV0aGVyIG9yIG5vdCB0byBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcblx0ICAgICAgICAgICAgcmVtb3ZlSGFuZGxlcihoYW5kbGVyKTtcblx0ICAgICAgICB9KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUgPSBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGZyb21Qcm9taXNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Nik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZyb21Qcm9taXNlID0gZnJvbVByb21pc2VfMS5mcm9tUHJvbWlzZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbVByb21pc2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiAzOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgUHJvbWlzZU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg0KTtcblx0ZXhwb3J0cy5mcm9tUHJvbWlzZSA9IFByb21pc2VPYnNlcnZhYmxlXzEuUHJvbWlzZU9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tUHJvbWlzZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgaW50ZXJ2YWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzk4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuaW50ZXJ2YWwgPSBpbnRlcnZhbF8xLmludGVydmFsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnZhbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDM5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBJbnRlcnZhbE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzk5KTtcblx0ZXhwb3J0cy5pbnRlcnZhbCA9IEludGVydmFsT2JzZXJ2YWJsZV8xLkludGVydmFsT2JzZXJ2YWJsZS5jcmVhdGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVydmFsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogMzk5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIGlzTnVtZXJpY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDApO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICogQGhpZGUgdHJ1ZVxuXHQgKi9cblx0dmFyIEludGVydmFsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoSW50ZXJ2YWxPYnNlcnZhYmxlLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gSW50ZXJ2YWxPYnNlcnZhYmxlKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHBlcmlvZCA9PT0gdm9pZCAwKSB7IHBlcmlvZCA9IDA7IH1cblx0ICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMucGVyaW9kID0gcGVyaW9kO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmICghaXNOdW1lcmljXzEuaXNOdW1lcmljKHBlcmlvZCkgfHwgcGVyaW9kIDwgMCkge1xuXHQgICAgICAgICAgICB0aGlzLnBlcmlvZCA9IDA7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghc2NoZWR1bGVyIHx8IHR5cGVvZiBzY2hlZHVsZXIuc2NoZWR1bGUgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgc2VxdWVudGlhbCBudW1iZXJzIGV2ZXJ5IHNwZWNpZmllZFxuXHQgICAgICogaW50ZXJ2YWwgb2YgdGltZSwgb24gYSBzcGVjaWZpZWQgU2NoZWR1bGVyLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyBpbmNyZW1lbnRhbCBudW1iZXJzIHBlcmlvZGljYWxseSBpbiB0aW1lLlxuXHQgICAgICogPC9zcGFuPlxuXHQgICAgICpcblx0ICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvaW50ZXJ2YWwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAgICAgKlxuXHQgICAgICogYGludGVydmFsYCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbiBpbmZpbml0ZSBzZXF1ZW5jZSBvZlxuXHQgICAgICogYXNjZW5kaW5nIGludGVnZXJzLCB3aXRoIGEgY29uc3RhbnQgaW50ZXJ2YWwgb2YgdGltZSBvZiB5b3VyIGNob29zaW5nXG5cdCAgICAgKiBiZXR3ZWVuIHRob3NlIGVtaXNzaW9ucy4gVGhlIGZpcnN0IGVtaXNzaW9uIGlzIG5vdCBzZW50IGltbWVkaWF0ZWx5LCBidXRcblx0ICAgICAqIG9ubHkgYWZ0ZXIgdGhlIGZpcnN0IHBlcmlvZCBoYXMgcGFzc2VkLiBCeSBkZWZhdWx0LCB0aGlzIG9wZXJhdG9yIHVzZXMgdGhlXG5cdCAgICAgKiBgYXN5bmNgIFNjaGVkdWxlciB0byBwcm92aWRlIGEgbm90aW9uIG9mIHRpbWUsIGJ1dCB5b3UgbWF5IHBhc3MgYW55XG5cdCAgICAgKiBTY2hlZHVsZXIgdG8gaXQuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgYXNjZW5kaW5nIG51bWJlcnMsIG9uZSBldmVyeSBzZWNvbmQgKDEwMDBtcyk8L2NhcHRpb24+XG5cdCAgICAgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAc2VlIHtAbGluayB0aW1lcn1cblx0ICAgICAqIEBzZWUge0BsaW5rIGRlbGF5fVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcGVyaW9kPTBdIFRoZSBpbnRlcnZhbCBzaXplIGluIG1pbGxpc2Vjb25kcyAoYnkgZGVmYXVsdClcblx0ICAgICAqIG9yIHRoZSB0aW1lIHVuaXQgZGV0ZXJtaW5lZCBieSB0aGUgc2NoZWR1bGVyJ3MgY2xvY2suXG5cdCAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIHNjaGVkdWxpbmdcblx0ICAgICAqIHRoZSBlbWlzc2lvbiBvZiB2YWx1ZXMsIGFuZCBwcm92aWRpbmcgYSBub3Rpb24gb2YgXCJ0aW1lXCIuXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzZXF1ZW50aWFsIG51bWJlciBlYWNoIHRpbWVcblx0ICAgICAqIGludGVydmFsLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBpbnRlcnZhbFxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgSW50ZXJ2YWxPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChwZXJpb2QsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChwZXJpb2QgPT09IHZvaWQgMCkgeyBwZXJpb2QgPSAwOyB9XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgICAgICByZXR1cm4gbmV3IEludGVydmFsT2JzZXJ2YWJsZShwZXJpb2QsIHNjaGVkdWxlcik7XG5cdCAgICB9O1xuXHQgICAgSW50ZXJ2YWxPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBwZXJpb2QgPSBzdGF0ZS5wZXJpb2Q7XG5cdCAgICAgICAgc3Vic2NyaWJlci5uZXh0KGluZGV4KTtcblx0ICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN0YXRlLmluZGV4ICs9IDE7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgcGVyaW9kKTtcblx0ICAgIH07XG5cdCAgICBJbnRlcnZhbE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICAgICAgdmFyIHBlcmlvZCA9IHRoaXMucGVyaW9kO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBzdWJzY3JpYmVyLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoSW50ZXJ2YWxPYnNlcnZhYmxlLmRpc3BhdGNoLCBwZXJpb2QsIHtcblx0ICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLCBwZXJpb2Q6IHBlcmlvZFxuXHQgICAgICAgIH0pKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSW50ZXJ2YWxPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuSW50ZXJ2YWxPYnNlcnZhYmxlID0gSW50ZXJ2YWxPYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlcnZhbE9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdGZ1bmN0aW9uIGlzTnVtZXJpYyh2YWwpIHtcblx0ICAgIC8vIHBhcnNlRmxvYXQgTmFOcyBudW1lcmljLWNhc3QgZmFsc2UgcG9zaXRpdmVzIChudWxsfHRydWV8ZmFsc2V8XCJcIilcblx0ICAgIC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcblx0ICAgIC8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTlxuXHQgICAgLy8gYWRkaW5nIDEgY29ycmVjdHMgbG9zcyBvZiBwcmVjaXNpb24gZnJvbSBwYXJzZUZsb2F0ICgjMTUxMDApXG5cdCAgICByZXR1cm4gIWlzQXJyYXlfMS5pc0FycmF5KHZhbCkgJiYgKHZhbCAtIHBhcnNlRmxvYXQodmFsKSArIDEpID49IDA7XG5cdH1cblx0ZXhwb3J0cy5pc051bWVyaWMgPSBpc051bWVyaWM7XG5cdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aXNOdW1lcmljLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEFzeW5jU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMik7XG5cdGV4cG9ydHMuYXN5bmMgPSBuZXcgQXN5bmNTY2hlZHVsZXJfMS5Bc3luY1NjaGVkdWxlcigpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1hc3luYy5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBGdXR1cmVBY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAzKTtcblx0dmFyIFF1ZXVlU2NoZWR1bGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwNCk7XG5cdHZhciBBc3luY1NjaGVkdWxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXN5bmNTY2hlZHVsZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBc3luY1NjaGVkdWxlcigpIHtcblx0ICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIEFzeW5jU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdyA9IGZ1bmN0aW9uICh3b3JrLCBzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRnV0dXJlQWN0aW9uXzEuRnV0dXJlQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlLCAwKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXN5bmNTY2hlZHVsZXI7XG5cdH0oUXVldWVTY2hlZHVsZXJfMS5RdWV1ZVNjaGVkdWxlcikpO1xuXHRleHBvcnRzLkFzeW5jU2NoZWR1bGVyID0gQXN5bmNTY2hlZHVsZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzeW5jU2NoZWR1bGVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIHJvb3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdHZhciBTdWJzY3JpcHRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBGdXR1cmVBY3Rpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZ1dHVyZUFjdGlvbiwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZ1dHVyZUFjdGlvbihzY2hlZHVsZXIsIHdvcmspIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLndvcmsgPSB3b3JrO1xuXHQgICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgRnV0dXJlQWN0aW9uLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBuZXcgRXJyb3IoJ2V4ZWN1dGluZyBhIGNhbmNlbGxlZCBhY3Rpb24nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLndvcmsodGhpcy5zdGF0ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZShzdGF0ZSwgZGVsYXkpO1xuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuX3NjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgLy8gQWx3YXlzIHJlcGxhY2UgdGhlIGN1cnJlbnQgc3RhdGUgd2l0aCB0aGUgbmV3IHN0YXRlLlxuXHQgICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblx0ICAgICAgICAvLyBTZXQgdGhlIHBlbmRpbmcgZmxhZyBpbmRpY2F0aW5nIHRoYXQgdGhpcyBhY3Rpb24gaGFzIGJlZW4gc2NoZWR1bGVkLCBvclxuXHQgICAgICAgIC8vIGhhcyByZWN1cnNpdmVseSByZXNjaGVkdWxlZCBpdHNlbGYuXG5cdCAgICAgICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgaWQgPSB0aGlzLmlkO1xuXHQgICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGhhcyBhbiBpbnRlcnZhbElEIGFuZCB0aGUgc3BlY2lmaWVkIGRlbGF5IG1hdGNoZXMgdGhlXG5cdCAgICAgICAgLy8gZGVsYXkgd2UgdXNlZCB0byBjcmVhdGUgdGhlIGludGVydmFsSUQsIGRvbid0IGNhbGwgYHNldEludGVydmFsYCBhZ2Fpbi5cblx0ICAgICAgICBpZiAoaWQgIT0gbnVsbCAmJiB0aGlzLmRlbGF5ID09PSBkZWxheSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuXHQgICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGhhcyBhbiBpbnRlcnZhbElELCBidXQgd2FzIHJlc2NoZWR1bGVkIHdpdGggYSBkaWZmZXJlbnRcblx0ICAgICAgICAvLyBgZGVsYXlgIHRpbWUsIGNhbmNlbCB0aGUgY3VycmVudCBpbnRlcnZhbElEIGFuZCBjYWxsIGBzZXRJbnRlcnZhbGAgd2l0aFxuXHQgICAgICAgIC8vIHRoZSBuZXcgYGRlbGF5YCB0aW1lLlxuXHQgICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgIHRoaXMuaWQgPSBudWxsO1xuXHQgICAgICAgICAgICByb290XzEucm9vdC5jbGVhckludGVydmFsKGlkKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyBJbXBvcnRhbnQgaW1wbGVtZW50YXRpb24gbm90ZTpcblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIEJ5IGRlZmF1bHQsIEZ1dHVyZUFjdGlvbiBvbmx5IGV4ZWN1dGVzIG9uY2UuIEhvd2V2ZXIsIEFjdGlvbnMgaGF2ZSB0aGVcblx0ICAgICAgICAvLyBhYmlsaXR5IHRvIGJlIHJlc2NoZWR1bGVkIGZyb20gd2l0aGluIHRoZSBzY2hlZHVsZWQgY2FsbGJhY2sgKG1pbWlja2luZ1xuXHQgICAgICAgIC8vIHJlY3Vyc2lvbiBmb3IgYXN5bmNocm9ub3VzIG1ldGhvZHMpLiBUaGlzIGFsbG93cyB1cyB0byBpbXBsZW1lbnQgc2luZ2xlXG5cdCAgICAgICAgLy8gYW5kIHJlcGVhdGVkIGFjdGlvbnMgd2l0aCB0aGUgc2FtZSBjb2RlIHBhdGggd2l0aG91dCBhZGRpbmcgQVBJIHN1cmZhY2Vcblx0ICAgICAgICAvLyBhcmVhLCBhbmQgaW1wbGVtZW50IHRhaWwtY2FsbCBvcHRpbWl6YXRpb24gb3ZlciBhc3luY2hyb25vdXMgYm91bmRhcmllcy5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIEhvd2V2ZXIsIEpTIHJ1bnRpbWVzIG1ha2UgYSBkaXN0aW5jdGlvbiBiZXR3ZWVuIGludGVydmFscyBzY2hlZHVsZWQgYnlcblx0ICAgICAgICAvLyByZXBlYXRlZGx5IGNhbGxpbmcgYHNldFRpbWVvdXRgIHZzLiBhIHNpbmdsZSBgc2V0SW50ZXJ2YWxgIGNhbGwsIHdpdGhcblx0ICAgICAgICAvLyB0aGUgbGF0dGVyIHByb3ZpZGluZyBhIGJldHRlciBndWFyYW50ZWUgb2YgcHJlY2lzaW9uLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gSW4gb3JkZXIgdG8gYWNjb21tb2RhdGUgYm90aCBzaW5nbGUgYW5kIHJlcGVhdGVkbHkgcmVzY2hlZHVsZWQgYWN0aW9ucyxcblx0ICAgICAgICAvLyB1c2UgYHNldEludGVydmFsYCBoZXJlIGZvciBib3RoIGNhc2VzLiBCeSBkZWZhdWx0LCB0aGUgaW50ZXJ2YWwgd2lsbCBiZVxuXHQgICAgICAgIC8vIGNhbmNlbGVkIGFmdGVyIGl0cyBmaXJzdCBleGVjdXRpb24sIG9yIGlmIHRoZSBhY3Rpb24gc2NoZWR1bGVzIGl0c2VsZiB0b1xuXHQgICAgICAgIC8vIHJ1biBhZ2FpbiB3aXRoIGEgZGlmZmVyZW50IGBkZWxheWAgdGltZS5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIElmIHRoZSBhY3Rpb24gcmVjdXJzaXZlbHkgc2NoZWR1bGVzIGl0c2VsZiB0byBydW4gYWdhaW4gd2l0aCB0aGUgc2FtZVxuXHQgICAgICAgIC8vIGBkZWxheWAgdGltZSwgdGhlIGludGVydmFsIGlzIG5vdCBjYW5jZWxlZCwgYnV0IGFsbG93ZWQgdG8gbG9vcCBhZ2Fpbi5cblx0ICAgICAgICAvLyBUaGUgY2hlY2sgb2Ygd2hldGhlciB0aGUgaW50ZXJ2YWwgc2hvdWxkIGJlIGNhbmNlbGVkIG9yIG5vdCBpcyBydW4gZXZlcnlcblx0ICAgICAgICAvLyB0aW1lIHRoZSBpbnRlcnZhbCBpcyBleGVjdXRlZC4gVGhlIGZpcnN0IHRpbWUgYW4gYWN0aW9uIGZhaWxzIHRvXG5cdCAgICAgICAgLy8gcmVzY2hlZHVsZSBpdHNlbGYsIHRoZSBpbnRlcnZhbCBpcyBjYW5jZWxlZC5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIHRoaXMuaWQgPSByb290XzEucm9vdC5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIF90aGlzLnBlbmRpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMsIGlkID0gX2EuaWQsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcblx0ICAgICAgICAgICAgc2NoZWR1bGVyLmFjdGlvbnMucHVzaChfdGhpcyk7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuXHQgICAgICAgICAgICAvL1xuXHQgICAgICAgICAgICAvLyBUZXJtaW5hdGUgdGhpcyBpbnRlcnZhbCBpZiB0aGUgYWN0aW9uIGRpZG4ndCByZXNjaGVkdWxlIGl0c2VsZi5cblx0ICAgICAgICAgICAgLy8gRG9uJ3QgY2FsbCBgdGhpcy51bnN1YnNjcmliZSgpYCBoZXJlLCBiZWNhdXNlIHRoZSBhY3Rpb24gY291bGQgYmVcblx0ICAgICAgICAgICAgLy8gcmVzY2hlZHVsZWQgbGF0ZXIuIEZvciBleGFtcGxlOlxuXHQgICAgICAgICAgICAvL1xuXHQgICAgICAgICAgICAvLyBgYGBcblx0ICAgICAgICAgICAgLy8gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uIGRvV29yayhjb3VudGVyKSB7XG5cdCAgICAgICAgICAgIC8vICAgLyogLi4uIEknbSBhIGJ1c3kgd29ya2VyIGJlZSAuLi4gKi9cblx0ICAgICAgICAgICAgLy8gICB2YXIgb3JpZ2luYWxBY3Rpb24gPSB0aGlzO1xuXHQgICAgICAgICAgICAvLyAgIC8qIHdhaXQgMTAwbXMgYmVmb3JlIHJlc2NoZWR1bGluZyB0aGlzIGFjdGlvbiBhZ2FpbiAqL1xuXHQgICAgICAgICAgICAvLyAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyAgICAgb3JpZ2luYWxBY3Rpb24uc2NoZWR1bGUoY291bnRlciArIDEpO1xuXHQgICAgICAgICAgICAvLyAgIH0sIDEwMCk7XG5cdCAgICAgICAgICAgIC8vIH0sIDEwMDApO1xuXHQgICAgICAgICAgICAvLyBgYGBcblx0ICAgICAgICAgICAgaWYgKF90aGlzLnBlbmRpbmcgPT09IGZhbHNlICYmIGlkICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIF90aGlzLmlkID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHJvb3RfMS5yb290LmNsZWFySW50ZXJ2YWwoaWQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZGVsYXkpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0ICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGlkID0gX2EuaWQsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zO1xuXHQgICAgICAgIHZhciBpbmRleCA9IGFjdGlvbnMuaW5kZXhPZih0aGlzKTtcblx0ICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICB0aGlzLmlkID0gbnVsbDtcblx0ICAgICAgICAgICAgcm9vdF8xLnJvb3QuY2xlYXJJbnRlcnZhbChpZCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLndvcmsgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRnV0dXJlQWN0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHRleHBvcnRzLkZ1dHVyZUFjdGlvbiA9IEZ1dHVyZUFjdGlvbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9RnV0dXJlQWN0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIFF1ZXVlQWN0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwNSk7XG5cdHZhciBGdXR1cmVBY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAzKTtcblx0dmFyIFF1ZXVlU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFF1ZXVlU2NoZWR1bGVyKCkge1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5hY3Rpb25zID0gW107IC8vIFhYWDogdXNlIGBhbnlgIHRvIHJlbW92ZSB0eXBlIHBhcmFtIGBUYCBmcm9tIGBWaXJ0dWFsVGltZVNjaGVkdWxlcmAuXG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZWRJZCA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUubm93ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBEYXRlLm5vdygpO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgfHwgdGhpcy5zY2hlZHVsZWRJZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcblx0ICAgICAgICAvLyBYWFg6IHVzZSBgYW55YCB0byByZW1vdmUgdHlwZSBwYXJhbSBgVGAgZnJvbSBgVmlydHVhbFRpbWVTY2hlZHVsZXJgLlxuXHQgICAgICAgIGZvciAodmFyIGFjdGlvbiA9IG51bGw7IGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKTspIHtcblx0ICAgICAgICAgICAgYWN0aW9uLmV4ZWN1dGUoKTtcblx0ICAgICAgICAgICAgaWYgKGFjdGlvbi5lcnJvcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIHRocm93IGFjdGlvbi5lcnJvcjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHtcblx0ICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cblx0ICAgICAgICByZXR1cm4gKGRlbGF5IDw9IDApID9cblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU5vdyh3b3JrLCBzdGF0ZSkgOlxuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlTGF0ZXIod29yaywgZGVsYXksIHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVOb3cgPSBmdW5jdGlvbiAod29yaywgc3RhdGUpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFF1ZXVlQWN0aW9uXzEuUXVldWVBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUpO1xuXHQgICAgfTtcblx0ICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUxhdGVyID0gZnVuY3Rpb24gKHdvcmssIGRlbGF5LCBzdGF0ZSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRnV0dXJlQWN0aW9uXzEuRnV0dXJlQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlLCBkZWxheSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFF1ZXVlU2NoZWR1bGVyO1xuXHR9KCkpO1xuXHRleHBvcnRzLlF1ZXVlU2NoZWR1bGVyID0gUXVldWVTY2hlZHVsZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXVlU2NoZWR1bGVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIEZ1dHVyZUFjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDMpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBRdWV1ZUFjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUXVldWVBY3Rpb24sIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBRdWV1ZUFjdGlvbigpIHtcblx0ICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIFF1ZXVlQWN0aW9uLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKHRoaXMpO1xuXHQgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBRdWV1ZUFjdGlvbjtcblx0fShGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24pKTtcblx0ZXhwb3J0cy5RdWV1ZUFjdGlvbiA9IFF1ZXVlQWN0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1RdWV1ZUFjdGlvbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgbWVyZ2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDA3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUubWVyZ2UgPSBtZXJnZV8xLm1lcmdlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtZXJnZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDgpO1xuXHRleHBvcnRzLm1lcmdlID0gbWVyZ2VfMS5tZXJnZVN0YXRpYztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdHZhciBtZXJnZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzIpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggY29uY3VycmVudGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuXHQgKiBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnkgYmxlbmRpbmdcblx0ICogdGhlaXIgdmFsdWVzIGludG8gb25lIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL21lcmdlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgbWVyZ2VgIHN1YnNjcmliZXMgdG8gZWFjaCBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlIChlaXRoZXIgdGhlIHNvdXJjZSBvciBhblxuXHQgKiBPYnNlcnZhYmxlIGdpdmVuIGFzIGFyZ3VtZW50KSwgYW5kIHNpbXBseSBmb3J3YXJkcyAod2l0aG91dCBkb2luZyBhbnlcblx0ICogdHJhbnNmb3JtYXRpb24pIGFsbCB0aGUgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dCBPYnNlcnZhYmxlcyB0byB0aGUgb3V0cHV0XG5cdCAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBvbmx5IGNvbXBsZXRlcyBvbmNlIGFsbCBpbnB1dCBPYnNlcnZhYmxlc1xuXHQgKiBoYXZlIGNvbXBsZXRlZC4gQW55IGVycm9yIGRlbGl2ZXJlZCBieSBhbiBpbnB1dCBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHlcblx0ICogZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIHR3byBPYnNlcnZhYmxlczogMXMgaW50ZXJ2YWwgYW5kIGNsaWNrczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHRpbWVyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGNsaWNrc09yVGltZXIgPSBjbGlja3MubWVyZ2UodGltZXIpO1xuXHQgKiBjbGlja3NPclRpbWVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+TWVyZ2UgdG9nZXRoZXIgMyBPYnNlcnZhYmxlcywgYnV0IG9ubHkgMiBydW4gY29uY3VycmVudGx5PC9jYXB0aW9uPlxuXHQgKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcblx0ICogdmFyIHRpbWVyMiA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMjAwMCkudGFrZSg2KTtcblx0ICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcblx0ICogdmFyIGNvbmN1cnJlbnQgPSAyOyAvLyB0aGUgYXJndW1lbnRcblx0ICogdmFyIG1lcmdlZCA9IHRpbWVyMS5tZXJnZSh0aW1lcjIsIHRpbWVyMywgY29uY3VycmVudCk7XG5cdCAqIG1lcmdlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gbWVyZ2Ugd2l0aCB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuXHQgKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9bnVsbF0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIG1hbmFnaW5nXG5cdCAqIGNvbmN1cnJlbmN5IG9mIGlucHV0IE9ic2VydmFibGVzLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgdGhhdCBhcmUgdGhlIHJlc3VsdCBvZlxuXHQgKiBldmVyeSBpbnB1dCBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIG1lcmdlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZSgpIHtcblx0ICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG5cdCAgICByZXR1cm4gbWVyZ2VTdGF0aWMuYXBwbHkodGhpcywgb2JzZXJ2YWJsZXMpO1xuXHR9XG5cdGV4cG9ydHMubWVyZ2UgPSBtZXJnZTtcblx0LyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggY29uY3VycmVudGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuXHQgKiBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnkgYmxlbmRpbmdcblx0ICogdGhlaXIgdmFsdWVzIGludG8gb25lIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL21lcmdlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgbWVyZ2VgIHN1YnNjcmliZXMgdG8gZWFjaCBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlIChhcyBhcmd1bWVudHMpLCBhbmQgc2ltcGx5XG5cdCAqIGZvcndhcmRzICh3aXRob3V0IGRvaW5nIGFueSB0cmFuc2Zvcm1hdGlvbikgYWxsIHRoZSB2YWx1ZXMgZnJvbSBhbGwgdGhlIGlucHV0XG5cdCAqIE9ic2VydmFibGVzIHRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIG9ubHkgY29tcGxldGVzXG5cdCAqIG9uY2UgYWxsIGlucHV0IE9ic2VydmFibGVzIGhhdmUgY29tcGxldGVkLiBBbnkgZXJyb3IgZGVsaXZlcmVkIGJ5IGFuIGlucHV0XG5cdCAqIE9ic2VydmFibGUgd2lsbCBiZSBpbW1lZGlhdGVseSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+TWVyZ2UgdG9nZXRoZXIgdHdvIE9ic2VydmFibGVzOiAxcyBpbnRlcnZhbCBhbmQgY2xpY2tzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgdGltZXIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuXHQgKiB2YXIgY2xpY2tzT3JUaW1lciA9IFJ4Lk9ic2VydmFibGUubWVyZ2UoY2xpY2tzLCB0aW1lcik7XG5cdCAqIGNsaWNrc09yVGltZXIuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NZXJnZSB0b2dldGhlciAzIE9ic2VydmFibGVzLCBidXQgb25seSAyIHJ1biBjb25jdXJyZW50bHk8L2NhcHRpb24+XG5cdCAqIHZhciB0aW1lcjEgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoMTApO1xuXHQgKiB2YXIgdGltZXIyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgyMDAwKS50YWtlKDYpO1xuXHQgKiB2YXIgdGltZXIzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApLnRha2UoMTApO1xuXHQgKiB2YXIgY29uY3VycmVudCA9IDI7IC8vIHRoZSBhcmd1bWVudFxuXHQgKiB2YXIgbWVyZ2VkID0gUnguT2JzZXJ2YWJsZS5tZXJnZSh0aW1lcjEsIHRpbWVyMiwgdGltZXIzLCBjb25jdXJyZW50KTtcblx0ICogbWVyZ2VkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQxIEFuIGlucHV0IE9ic2VydmFibGUgdG8gbWVyZ2Ugd2l0aCBvdGhlcnMuXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gbWVyZ2Ugd2l0aCBvdGhlcnMuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG5cdCAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3IgbWFuYWdpbmdcblx0ICogY29uY3VycmVuY3kgb2YgaW5wdXQgT2JzZXJ2YWJsZXMuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyB0aGF0IGFyZSB0aGUgcmVzdWx0IG9mXG5cdCAqIGV2ZXJ5IGlucHV0IE9ic2VydmFibGUuXG5cdCAqIEBzdGF0aWMgdHJ1ZVxuXHQgKiBAbmFtZSBtZXJnZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VTdGF0aWMoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICB2YXIgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcblx0ICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuXHQgICAgdmFyIGxhc3QgPSBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXTtcblx0ICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKGxhc3QpKSB7XG5cdCAgICAgICAgc2NoZWR1bGVyID0gb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICAgICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgICAgICBjb25jdXJyZW50ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAodHlwZW9mIGxhc3QgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgY29uY3VycmVudCA9IG9ic2VydmFibGVzLnBvcCgpO1xuXHQgICAgfVxuXHQgICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIHJldHVybiBvYnNlcnZhYmxlc1swXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKG9ic2VydmFibGVzLCBzY2hlZHVsZXIpLmxpZnQobmV3IG1lcmdlQWxsXzEuTWVyZ2VBbGxPcGVyYXRvcihjb25jdXJyZW50KSk7XG5cdH1cblx0ZXhwb3J0cy5tZXJnZVN0YXRpYyA9IG1lcmdlU3RhdGljO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQwOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgcmFjZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5yYWNlID0gcmFjZV8xLnJhY2VTdGF0aWM7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhY2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgaXNBcnJheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBBcnJheU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYwKTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIGZpcnN0IHNvdXJjZSBPYnNlcnZhYmxlIHRvIGVtaXQgYW4gaXRlbVxuXHQgKiBmcm9tIHRoZSBjb21iaW5hdGlvbiBvZiB0aGlzIE9ic2VydmFibGUgYW5kIHN1cHBsaWVkIE9ic2VydmFibGVzXG5cdCAqIEBwYXJhbSB7Li4uT2JzZXJ2YWJsZXN9IC4uLm9ic2VydmFibGVzIHNvdXJjZXMgdXNlZCB0byByYWNlIGZvciB3aGljaCBPYnNlcnZhYmxlIGVtaXRzIGZpcnN0LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgb3V0cHV0IG9mIHRoZSBmaXJzdCBPYnNlcnZhYmxlIHRvIGVtaXQgYW4gaXRlbS5cblx0ICogQG1ldGhvZCByYWNlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiByYWNlKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgdGhlIG9ubHkgYXJndW1lbnQgaXMgYW4gYXJyYXksIGl0IHdhcyBtb3N0IGxpa2VseSBjYWxsZWQgd2l0aFxuXHQgICAgLy8gYHBhaXIoW29iczEsIG9iczIsIC4uLl0pYFxuXHQgICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcblx0ICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuXHQgICAgfVxuXHQgICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcblx0ICAgIHJldHVybiByYWNlU3RhdGljLmFwcGx5KHRoaXMsIG9ic2VydmFibGVzKTtcblx0fVxuXHRleHBvcnRzLnJhY2UgPSByYWNlO1xuXHRmdW5jdGlvbiByYWNlU3RhdGljKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgdGhlIG9ubHkgYXJndW1lbnQgaXMgYW4gYXJyYXksIGl0IHdhcyBtb3N0IGxpa2VseSBjYWxsZWQgd2l0aFxuXHQgICAgLy8gYHBhaXIoW29iczEsIG9iczIsIC4uLl0pYFxuXHQgICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIGlmIChpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcblx0ICAgICAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYnNlcnZhYmxlc1swXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgUmFjZU9wZXJhdG9yKCkpO1xuXHR9XG5cdGV4cG9ydHMucmFjZVN0YXRpYyA9IHJhY2VTdGF0aWM7XG5cdHZhciBSYWNlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmFjZU9wZXJhdG9yKCkge1xuXHQgICAgfVxuXHQgICAgUmFjZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmFjZVN1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSYWNlT3BlcmF0b3I7XG5cdH0oKSk7XG5cdGV4cG9ydHMuUmFjZU9wZXJhdG9yID0gUmFjZU9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSYWNlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmFjZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSYWNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmhhc0ZpcnN0ID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5vYnNlcnZhYmxlcyA9IFtdO1xuXHQgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuXHQgICAgfVxuXHQgICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzLnB1c2gob2JzZXJ2YWJsZSk7XG5cdCAgICB9O1xuXHQgICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgb2JzZXJ2YWJsZXMgPSB0aGlzLm9ic2VydmFibGVzO1xuXHQgICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG5cdCAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG9ic2VydmFibGVzW2ldO1xuXHQgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSwgaSk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaGFzRmlyc3QpIHtcblx0ICAgICAgICAgICAgdGhpcy5oYXNGaXJzdCA9IHRydWU7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoaSAhPT0gb3V0ZXJJbmRleCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmlwdGlvbnNbaV07XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJhY2VTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLlJhY2VTdWJzY3JpYmVyID0gUmFjZVN1YnNjcmliZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhY2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIG5ldmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxMik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm5ldmVyID0gbmV2ZXJfMS5uZXZlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bmV2ZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgTmV2ZXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxMyk7XG5cdGV4cG9ydHMubmV2ZXIgPSBOZXZlck9ic2VydmFibGVfMS5OZXZlck9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgbm9vcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTQpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBOZXZlck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE5ldmVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE5ldmVyT2JzZXJ2YWJsZSgpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5BbiBPYnNlcnZhYmxlIHRoYXQgbmV2ZXIgZW1pdHMgYW55dGhpbmcuPC9zcGFuPlxuXHQgICAgICpcblx0ICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvbmV2ZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAgICAgKlxuXHQgICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgZW1pdHNcblx0ICAgICAqIG5laXRoZXIgdmFsdWVzIG5vciBlcnJvcnMgbm9yIHRoZSBjb21wbGV0aW9uIG5vdGlmaWNhdGlvbi4gSXQgY2FuIGJlIHVzZWRcblx0ICAgICAqIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9yIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlciBPYnNlcnZhYmxlcy4gUGxlYXNlIG5vdFxuXHQgICAgICogdGhhdCBieSBuZXZlciBlbWl0dGluZyBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbiwgdGhpcyBPYnNlcnZhYmxlIGtlZXBzIHRoZVxuXHQgICAgICogc3Vic2NyaXB0aW9uIGZyb20gYmVpbmcgZGlzcG9zZWQgYXV0b21hdGljYWxseS4gU3Vic2NyaXB0aW9ucyBuZWVkIHRvIGJlXG5cdCAgICAgKiBtYW51YWxseSBkaXNwb3NlZC5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBuZXZlciBlbWl0IGFueXRoaW5nIGVsc2UgKG5vdCBldmVuIGNvbXBsZXRlKS48L2NhcHRpb24+XG5cdCAgICAgKiBmdW5jdGlvbiBpbmZvKCkge1xuXHQgICAgICogICBjb25zb2xlLmxvZygnV2lsbCBub3QgYmUgY2FsbGVkJyk7XG5cdCAgICAgKiB9XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5uZXZlcigpLnN0YXJ0V2l0aCg3KTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSwgaW5mbywgaW5mbyk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuXHQgICAgICogQHNlZSB7QGxpbmsgZW1wdHl9XG5cdCAgICAgKiBAc2VlIHtAbGluayBvZn1cblx0ICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEEgXCJuZXZlclwiIE9ic2VydmFibGU6IG5ldmVyIGVtaXRzIGFueXRoaW5nLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSBuZXZlclxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgTmV2ZXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IE5ldmVyT2JzZXJ2YWJsZSgpO1xuXHQgICAgfTtcblx0ICAgIE5ldmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgbm9vcF8xLm5vb3AoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTmV2ZXJPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuTmV2ZXJPYnNlcnZhYmxlID0gTmV2ZXJPYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1OZXZlck9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eSAqL1xuXHRmdW5jdGlvbiBub29wKCkgeyB9XG5cdGV4cG9ydHMubm9vcCA9IG5vb3A7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vb3AuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIG9mXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxNik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm9mID0gb2ZfMS5vZjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9b2YuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdGV4cG9ydHMub2YgPSBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUub2Y7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW9mLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciByYW5nZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTgpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5yYW5nZSA9IHJhbmdlXzEucmFuZ2U7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhbmdlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIFJhbmdlT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTkpO1xuXHRleHBvcnRzLnJhbmdlID0gUmFuZ2VPYnNlcnZhYmxlXzEuUmFuZ2VPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZ2UuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgUmFuZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSYW5nZU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG5cdCAgICAgICAgdGhpcy5fY291bnQgPSBjb3VudDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzZXF1ZW5jZSBvZiBudW1iZXJzIHdpdGhpbiBhIHNwZWNpZmllZFxuXHQgICAgICogcmFuZ2UuXG5cdCAgICAgKlxuXHQgICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIGEgc2VxdWVuY2Ugb2YgbnVtYmVycyBpbiBhIHJhbmdlLjwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3JhbmdlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIGByYW5nZWAgb3BlcmF0b3IgZW1pdHMgYSByYW5nZSBvZiBzZXF1ZW50aWFsIGludGVnZXJzLCBpbiBvcmRlciwgd2hlcmUgeW91XG5cdCAgICAgKiBzZWxlY3QgdGhlIGBzdGFydGAgb2YgdGhlIHJhbmdlIGFuZCBpdHMgYGxlbmd0aGAuIEJ5IGRlZmF1bHQsIHVzZXMgbm9cblx0ICAgICAqIFNjaGVkdWxlciBhbmQganVzdCBkZWxpdmVycyB0aGUgbm90aWZpY2F0aW9ucyBzeW5jaHJvbm91c2x5LCBidXQgbWF5IHVzZVxuXHQgICAgICogYW4gb3B0aW9uYWwgU2NoZWR1bGVyIHRvIHJlZ3VsYXRlIHRob3NlIGRlbGl2ZXJpZXMuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgdGhlIG51bWJlcnMgMSB0byAxMDwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5yYW5nZSgxLCAxMCk7XG5cdCAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAc2VlIHtAbGluayB0aW1lcn1cblx0ICAgICAqIEBzZWUge0BsaW5rIGludGVydmFsfVxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHRoZSBzZXF1ZW5jZS5cblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY291bnQ9MF0gVGhlIG51bWJlciBvZiBzZXF1ZW50aWFsIGludGVnZXJzIHRvIGdlbmVyYXRlLlxuXHQgICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG5cdCAgICAgKiB0aGUgZW1pc3Npb25zIG9mIHRoZSBub3RpZmljYXRpb25zLlxuXHQgICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBudW1iZXJzIHRoYXQgZW1pdHMgYSBmaW5pdGUgcmFuZ2Ugb2Zcblx0ICAgICAqIHNlcXVlbnRpYWwgaW50ZWdlcnMuXG5cdCAgICAgKiBAc3RhdGljIHRydWVcblx0ICAgICAqIEBuYW1lIHJhbmdlXG5cdCAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgICAgICovXG5cdCAgICBSYW5nZU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsgc3RhcnQgPSAwOyB9XG5cdCAgICAgICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsgY291bnQgPSAwOyB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzdGFydCA9IHN0YXRlLnN0YXJ0LCBpbmRleCA9IHN0YXRlLmluZGV4LCBjb3VudCA9IHN0YXRlLmNvdW50LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcblx0ICAgICAgICBpZiAoaW5kZXggPj0gY291bnQpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmliZXIubmV4dChzdGFydCk7XG5cdCAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICBzdGF0ZS5zdGFydCA9IHN0YXJ0ICsgMTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICBSYW5nZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcblx0ICAgICAgICB2YXIgY291bnQgPSB0aGlzLl9jb3VudDtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuXHQgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBjb3VudDogY291bnQsIHN0YXJ0OiBzdGFydCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGRvIHtcblx0ICAgICAgICAgICAgICAgIGlmIChpbmRleCsrID49IGNvdW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHN0YXJ0KyspO1xuXHQgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBSYW5nZU9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5SYW5nZU9ic2VydmFibGUgPSBSYW5nZU9ic2VydmFibGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPVJhbmdlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgdGhyb3dfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUudGhyb3cgPSB0aHJvd18xLl90aHJvdztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3cuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgRXJyb3JPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyMik7XG5cdGV4cG9ydHMuX3Rocm93ID0gRXJyb3JPYnNlcnZhYmxlXzEuRXJyb3JPYnNlcnZhYmxlLmNyZWF0ZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3cuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgRXJyb3JPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhFcnJvck9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBFcnJvck9ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIC8qKlxuXHQgICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuXHQgICAgICogZW1pdHMgYW4gZXJyb3Igbm90aWZpY2F0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5KdXN0IGVtaXRzICdlcnJvcicsIGFuZCBub3RoaW5nIGVsc2UuXG5cdCAgICAgKiA8L3NwYW4+XG5cdCAgICAgKlxuXHQgICAgICogPGltZyBzcmM9XCIuL2ltZy90aHJvdy5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICAgICAqXG5cdCAgICAgKiBUaGlzIHN0YXRpYyBvcGVyYXRvciBpcyB1c2VmdWwgZm9yIGNyZWF0aW5nIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBvbmx5XG5cdCAgICAgKiBlbWl0cyB0aGUgZXJyb3Igbm90aWZpY2F0aW9uLiBJdCBjYW4gYmUgdXNlZCBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXJcblx0ICAgICAqIE9ic2VydmFibGVzLCBzdWNoIGFzIGluIGEge0BsaW5rIG1lcmdlTWFwfS5cblx0ICAgICAqXG5cdCAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBlbWl0IGFuIGVycm9yLjwvY2FwdGlvbj5cblx0ICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLnRocm93KG5ldyBFcnJvcignb29wcyEnKSkuc3RhcnRXaXRoKDcpO1xuXHQgICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBhbmQgZmxhdHRlbnMgbnVtYmVycyB0byB0aGUgc2VxdWVuY2UgJ2EnLCAnYicsICdjJywgYnV0IHRocm93IGFuIGVycm9yIGZvciAxMzwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuXHQgICAgICogICB4ID09PSAxMyA/XG5cdCAgICAgKiAgICAgUnguT2JzZXJ2YWJsZS50aHJvdygnVGhpcnRlZW5zIGFyZSBiYWQnKSA6XG5cdCAgICAgKiAgICAgUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKVxuXHQgICAgICogKTtcblx0ICAgICAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSwgZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcblx0ICAgICAqXG5cdCAgICAgKiBAc2VlIHtAbGluayBjcmVhdGV9XG5cdCAgICAgKiBAc2VlIHtAbGluayBlbXB0eX1cblx0ICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuXHQgICAgICogQHNlZSB7QGxpbmsgb2Z9XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHthbnl9IGVycm9yIFRoZSBwYXJ0aWN1bGFyIEVycm9yIHRvIHBhc3MgdG8gdGhlIGVycm9yIG5vdGlmaWNhdGlvbi5cblx0ICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBBIHtAbGluayBTY2hlZHVsZXJ9IHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuXHQgICAgICogdGhlIGVtaXNzaW9uIG9mIHRoZSBlcnJvciBub3RpZmljYXRpb24uXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBlcnJvciBPYnNlcnZhYmxlOiBlbWl0cyBvbmx5IHRoZSBlcnJvciBub3RpZmljYXRpb25cblx0ICAgICAqIHVzaW5nIHRoZSBnaXZlbiBlcnJvciBhcmd1bWVudC5cblx0ICAgICAqIEBzdGF0aWMgdHJ1ZVxuXHQgICAgICogQG5hbWUgdGhyb3dcblx0ICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAgICAgKi9cblx0ICAgIEVycm9yT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoZXJyb3IsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHJldHVybiBuZXcgRXJyb3JPYnNlcnZhYmxlKGVycm9yLCBzY2hlZHVsZXIpO1xuXHQgICAgfTtcblx0ICAgIEVycm9yT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICB2YXIgZXJyb3IgPSBhcmcuZXJyb3IsIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcblx0ICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBFcnJvck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBlcnJvciA9IHRoaXMuZXJyb3I7XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIGlmIChzY2hlZHVsZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShFcnJvck9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcblx0ICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRXJyb3JPYnNlcnZhYmxlO1xuXHR9KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5cdGV4cG9ydHMuRXJyb3JPYnNlcnZhYmxlID0gRXJyb3JPYnNlcnZhYmxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1FcnJvck9ic2VydmFibGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHRpbWVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyNCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnRpbWVyID0gdGltZXJfMS50aW1lcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgVGltZXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyNSk7XG5cdGV4cG9ydHMudGltZXIgPSBUaW1lck9ic2VydmFibGVfMS5UaW1lck9ic2VydmFibGUuY3JlYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBpc051bWVyaWNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAwKTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBhc3luY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0dmFyIGlzRGF0ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjYpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqIEBoaWRlIHRydWVcblx0ICovXG5cdHZhciBUaW1lck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRpbWVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFRpbWVyT2JzZXJ2YWJsZShkdWVUaW1lLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChkdWVUaW1lID09PSB2b2lkIDApIHsgZHVlVGltZSA9IDA7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnBlcmlvZCA9IC0xO1xuXHQgICAgICAgIHRoaXMuZHVlVGltZSA9IDA7XG5cdCAgICAgICAgaWYgKGlzTnVtZXJpY18xLmlzTnVtZXJpYyhwZXJpb2QpKSB7XG5cdCAgICAgICAgICAgIHRoaXMucGVyaW9kID0gTnVtYmVyKHBlcmlvZCkgPCAxICYmIDEgfHwgTnVtYmVyKHBlcmlvZCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIocGVyaW9kKSkge1xuXHQgICAgICAgICAgICBzY2hlZHVsZXIgPSBwZXJpb2Q7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuZHVlVGltZSA9IGlzRGF0ZV8xLmlzRGF0ZShkdWVUaW1lKSA/XG5cdCAgICAgICAgICAgICgrZHVlVGltZSAtIHRoaXMuc2NoZWR1bGVyLm5vdygpKSA6XG5cdCAgICAgICAgICAgIGR1ZVRpbWU7XG5cdCAgICB9XG5cdCAgICAvKipcblx0ICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IHN0YXJ0cyBlbWl0dGluZyBhZnRlciBhbiBgaW5pdGlhbERlbGF5YCBhbmRcblx0ICAgICAqIGVtaXRzIGV2ZXIgaW5jcmVhc2luZyBudW1iZXJzIGFmdGVyIGVhY2ggYHBlcmlvZGAgb2YgdGltZSB0aGVyZWFmdGVyLlxuXHQgICAgICpcblx0ICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdHMgbGlrZSB7QGxpbmsgaW50ZXJ2YWx9LCBidXQgeW91IGNhbiBzcGVjaWZ5IHdoZW5cblx0ICAgICAqIHNob3VsZCB0aGUgZW1pc3Npb25zIHN0YXJ0Ljwvc3Bhbj5cblx0ICAgICAqXG5cdCAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3RpbWVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgICAgICpcblx0ICAgICAqIGB0aW1lcmAgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYW4gaW5maW5pdGUgc2VxdWVuY2Ugb2YgYXNjZW5kaW5nXG5cdCAgICAgKiBpbnRlZ2Vycywgd2l0aCBhIGNvbnN0YW50IGludGVydmFsIG9mIHRpbWUsIGBwZXJpb2RgIG9mIHlvdXIgY2hvb3Npbmdcblx0ICAgICAqIGJldHdlZW4gdGhvc2UgZW1pc3Npb25zLiBUaGUgZmlyc3QgZW1pc3Npb24gaGFwcGVucyBhZnRlciB0aGUgc3BlY2lmaWVkXG5cdCAgICAgKiBgaW5pdGlhbERlbGF5YC4gVGhlIGluaXRpYWwgZGVsYXkgbWF5IGJlIGEge0BsaW5rIERhdGV9LiBCeSBkZWZhdWx0LCB0aGlzXG5cdCAgICAgKiBvcGVyYXRvciB1c2VzIHRoZSBgYXN5bmNgIFNjaGVkdWxlciB0byBwcm92aWRlIGEgbm90aW9uIG9mIHRpbWUsIGJ1dCB5b3Vcblx0ICAgICAqIG1heSBwYXNzIGFueSBTY2hlZHVsZXIgdG8gaXQuIElmIGBwZXJpb2RgIGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBvdXRwdXRcblx0ICAgICAqIE9ic2VydmFibGUgZW1pdHMgb25seSBvbmUgdmFsdWUsIGAwYC4gT3RoZXJ3aXNlLCBpdCBlbWl0cyBhbiBpbmZpbml0ZVxuXHQgICAgICogc2VxdWVuY2UuXG5cdCAgICAgKlxuXHQgICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgYXNjZW5kaW5nIG51bWJlcnMsIG9uZSBldmVyeSBzZWNvbmQgKDEwMDBtcyksIHN0YXJ0aW5nIGFmdGVyIDMgc2Vjb25kczwvY2FwdGlvbj5cblx0ICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS50aW1lcigzMDAwLCAxMDAwKTtcblx0ICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgICAgICpcblx0ICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIG9uZSBudW1iZXIgYWZ0ZXIgZml2ZSBzZWNvbmRzPC9jYXB0aW9uPlxuXHQgICAgICogdmFyIG51bWJlcnMgPSBSeC5PYnNlcnZhYmxlLnRpbWVyKDUwMDApO1xuXHQgICAgICogbnVtYmVycy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAgICAgKlxuXHQgICAgICogQHNlZSB7QGxpbmsgaW50ZXJ2YWx9XG5cdCAgICAgKiBAc2VlIHtAbGluayBkZWxheX1cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge251bWJlcnxEYXRlfSBpbml0aWFsRGVsYXkgVGhlIGluaXRpYWwgZGVsYXkgdGltZSB0byB3YWl0IGJlZm9yZVxuXHQgICAgICogZW1pdHRpbmcgdGhlIGZpcnN0IHZhbHVlIG9mIGAwYC5cblx0ICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcGVyaW9kXSBUaGUgcGVyaW9kIG9mIHRpbWUgYmV0d2VlbiBlbWlzc2lvbnMgb2YgdGhlXG5cdCAgICAgKiBzdWJzZXF1ZW50IG51bWJlcnMuXG5cdCAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIHNjaGVkdWxpbmdcblx0ICAgICAqIHRoZSBlbWlzc2lvbiBvZiB2YWx1ZXMsIGFuZCBwcm92aWRpbmcgYSBub3Rpb24gb2YgXCJ0aW1lXCIuXG5cdCAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBgMGAgYWZ0ZXIgdGhlXG5cdCAgICAgKiBgaW5pdGlhbERlbGF5YCBhbmQgZXZlciBpbmNyZWFzaW5nIG51bWJlcnMgYWZ0ZXIgZWFjaCBgcGVyaW9kYCBvZiB0aW1lXG5cdCAgICAgKiB0aGVyZWFmdGVyLlxuXHQgICAgICogQHN0YXRpYyB0cnVlXG5cdCAgICAgKiBAbmFtZSB0aW1lclxuXHQgICAgICogQG93bmVyIE9ic2VydmFibGVcblx0ICAgICAqL1xuXHQgICAgVGltZXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsRGVsYXksIHBlcmlvZCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKGluaXRpYWxEZWxheSA9PT0gdm9pZCAwKSB7IGluaXRpYWxEZWxheSA9IDA7IH1cblx0ICAgICAgICByZXR1cm4gbmV3IFRpbWVyT2JzZXJ2YWJsZShpbml0aWFsRGVsYXksIHBlcmlvZCwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICBUaW1lck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgcGVyaW9kID0gc3RhdGUucGVyaW9kLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcblx0ICAgICAgICB2YXIgYWN0aW9uID0gdGhpcztcblx0ICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5kZXgpO1xuXHQgICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSBpZiAocGVyaW9kID09PSAtMSkge1xuXHQgICAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICBhY3Rpb24uc2NoZWR1bGUoc3RhdGUsIHBlcmlvZCk7XG5cdCAgICB9O1xuXHQgICAgVGltZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSAwO1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHBlcmlvZCA9IF9hLnBlcmlvZCwgZHVlVGltZSA9IF9hLmR1ZVRpbWUsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcblx0ICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVyT2JzZXJ2YWJsZS5kaXNwYXRjaCwgZHVlVGltZSwge1xuXHQgICAgICAgICAgICBpbmRleDogaW5kZXgsIHBlcmlvZDogcGVyaW9kLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRpbWVyT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLlRpbWVyT2JzZXJ2YWJsZSA9IFRpbWVyT2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9VGltZXJPYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTigrdmFsdWUpO1xuXHR9XG5cdGV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pc0RhdGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHppcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjgpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS56aXAgPSB6aXBfMS56aXA7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciB6aXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDI5KTtcblx0ZXhwb3J0cy56aXAgPSB6aXBfMS56aXBTdGF0aWM7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBBcnJheU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYwKTtcblx0dmFyIGlzQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0dmFyIGl0ZXJhdG9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Nyk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gb2JzZXJ2YWJsZXNcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cblx0ICogQG1ldGhvZCB6aXBcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHppcFByb3RvKCkge1xuXHQgICAgdmFyIG9ic2VydmFibGVzID0gW107XG5cdCAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcblx0ICAgIHJldHVybiB6aXBTdGF0aWMuYXBwbHkodGhpcywgb2JzZXJ2YWJsZXMpO1xuXHR9XG5cdGV4cG9ydHMuemlwUHJvdG8gPSB6aXBQcm90bztcblx0LyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cblx0LyoqXG5cdCAqIEBwYXJhbSBvYnNlcnZhYmxlc1xuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fVxuXHQgKiBAc3RhdGljIHRydWVcblx0ICogQG5hbWUgemlwXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB6aXBTdGF0aWMoKSB7XG5cdCAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvamVjdCA9IG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdO1xuXHQgICAgaWYgKHR5cGVvZiBwcm9qZWN0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgb2JzZXJ2YWJsZXMucG9wKCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgWmlwT3BlcmF0b3IocHJvamVjdCkpO1xuXHR9XG5cdGV4cG9ydHMuemlwU3RhdGljID0gemlwU3RhdGljO1xuXHR2YXIgWmlwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gWmlwT3BlcmF0b3IocHJvamVjdCkge1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICB9XG5cdCAgICBaaXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFppcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFppcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLlppcE9wZXJhdG9yID0gWmlwT3BlcmF0b3I7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFppcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFppcFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBaaXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB2YWx1ZXMpIHtcblx0ICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgfVxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9ycyA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSAodHlwZW9mIHByb2plY3QgPT09ICdmdW5jdGlvbicpID8gcHJvamVjdCA6IG51bGw7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG5cdCAgICB9XG5cdCAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcblx0ICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgU3RhdGljQXJyYXlJdGVyYXRvcih2YWx1ZSkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgU3RhdGljSXRlcmF0b3IodmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSgpKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBpdGVyYXRvcnMucHVzaChuZXcgWmlwQnVmZmVySXRlcmF0b3IodGhpcy5kZXN0aW5hdGlvbiwgdGhpcywgdmFsdWUsIGluZGV4KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgaXRlcmF0b3JzID0gdGhpcy5pdGVyYXRvcnM7XG5cdCAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSBsZW47XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG5cdCAgICAgICAgICAgIGlmIChpdGVyYXRvci5zdGlsbFVuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5hZGQoaXRlcmF0b3Iuc3Vic2NyaWJlKGl0ZXJhdG9yLCBpKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZS0tOyAvLyBub3QgYW4gb2JzZXJ2YWJsZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuYWN0aXZlLS07XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuY2hlY2tJdGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGl0ZXJhdG9ycyA9IHRoaXMuaXRlcmF0b3JzO1xuXHQgICAgICAgIHZhciBsZW4gPSBpdGVyYXRvcnMubGVuZ3RoO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgLy8gYWJvcnQgaWYgbm90IGFsbCBvZiB0aGVtIGhhdmUgdmFsdWVzXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IuaGFzVmFsdWUgPT09ICdmdW5jdGlvbicgJiYgIWl0ZXJhdG9yLmhhc1ZhbHVlKCkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgc2hvdWxkQ29tcGxldGUgPSBmYWxzZTtcblx0ICAgICAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JzW2ldO1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgaXQncyBjb21wbGV0ZWQgbm93IHRoYXQgeW91J3ZlIGdvdHRlblxuXHQgICAgICAgICAgICAvLyB0aGUgbmV4dCB2YWx1ZS5cblx0ICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmhhc0NvbXBsZXRlZCgpKSB7XG5cdCAgICAgICAgICAgICAgICBzaG91bGRDb21wbGV0ZSA9IHRydWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGFyZ3MucHVzaChyZXN1bHQudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3RyeVByb2plY3QoYXJncyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoc2hvdWxkQ29tcGxldGUpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gWmlwU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLlppcFN1YnNjcmliZXIgPSBaaXBTdWJzY3JpYmVyO1xuXHR2YXIgU3RhdGljSXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3RhdGljSXRlcmF0b3IoaXRlcmF0b3IpIHtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRlcmF0b3I7XG5cdCAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuXHQgICAgfVxuXHQgICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfTtcblx0ICAgIFN0YXRpY0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm5leHRSZXN1bHQ7XG5cdCAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gdGhpcy5pdGVyYXRvci5uZXh0KCk7XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH07XG5cdCAgICBTdGF0aWNJdGVyYXRvci5wcm90b3R5cGUuaGFzQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBuZXh0UmVzdWx0ID0gdGhpcy5uZXh0UmVzdWx0O1xuXHQgICAgICAgIHJldHVybiBuZXh0UmVzdWx0ICYmIG5leHRSZXN1bHQuZG9uZTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3RhdGljSXRlcmF0b3I7XG5cdH0oKSk7XG5cdHZhciBTdGF0aWNBcnJheUl0ZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN0YXRpY0FycmF5SXRlcmF0b3IoYXJyYXkpIHtcblx0ICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuXHQgICAgICAgIHRoaXMubGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheTtcblx0ICAgICAgICByZXR1cm4gaSA8IHRoaXMubGVuZ3RoID8geyB2YWx1ZTogYXJyYXlbaV0sIGRvbmU6IGZhbHNlIH0gOiB7IGRvbmU6IHRydWUgfTtcblx0ICAgIH07XG5cdCAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGggPiB0aGlzLmluZGV4O1xuXHQgICAgfTtcblx0ICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlLmhhc0NvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGggPT09IHRoaXMuaW5kZXg7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN0YXRpY0FycmF5SXRlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFppcEJ1ZmZlckl0ZXJhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhaaXBCdWZmZXJJdGVyYXRvciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFppcEJ1ZmZlckl0ZXJhdG9yKGRlc3RpbmF0aW9uLCBwYXJlbnQsIG9ic2VydmFibGUsIGluZGV4KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuXHQgICAgICAgIHRoaXMuc3RpbGxVbnN1YnNjcmliZWQgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICAvLyBOT1RFOiB0aGVyZSBpcyBhY3R1YWxseSBhIG5hbWUgY29sbGlzaW9uIGhlcmUgd2l0aCBTdWJzY3JpYmVyLm5leHQgYW5kIEl0ZXJhdG9yLm5leHRcblx0ICAgIC8vICAgIHRoaXMgaXMgbGVnaXQgYmVjYXVzZSBgbmV4dCgpYCB3aWxsIG5ldmVyIGJlIGNhbGxlZCBieSBhIHN1YnNjcmlwdGlvbiBpbiB0aGlzIGNhc2UuXG5cdCAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDAgJiYgdGhpcy5pc0NvbXBsZXRlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBidWZmZXIuc2hpZnQoKSwgZG9uZTogZmFsc2UgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmlzQ29tcGxldGU7XG5cdCAgICB9O1xuXHQgICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUluYWN0aXZlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXIucHVzaChpbm5lclZhbHVlKTtcblx0ICAgICAgICB0aGlzLnBhcmVudC5jaGVja0l0ZXJhdG9ycygpO1xuXHQgICAgfTtcblx0ICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgcmV0dXJuIHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgdGhpcy5vYnNlcnZhYmxlLCB0aGlzLCBpbmRleCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFppcEJ1ZmZlckl0ZXJhdG9yO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD16aXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGJ1ZmZlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzEpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyID0gYnVmZmVyXzEuYnVmZmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIHVudGlsIGBjbG9zaW5nTm90aWZpZXJgIGVtaXRzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXksIGFuZCBlbWl0c1xuXHQgKiB0aGF0IGFycmF5IG9ubHkgd2hlbiBhbm90aGVyIE9ic2VydmFibGUgZW1pdHMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2J1ZmZlci5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQnVmZmVycyB0aGUgaW5jb21pbmcgT2JzZXJ2YWJsZSB2YWx1ZXMgdW50aWwgdGhlIGdpdmVuIGBjbG9zaW5nTm90aWZpZXJgXG5cdCAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgYXQgd2hpY2ggcG9pbnQgaXQgZW1pdHMgdGhlIGJ1ZmZlciBvbiB0aGUgb3V0cHV0XG5cdCAqIE9ic2VydmFibGUgYW5kIHN0YXJ0cyBhIG5ldyBidWZmZXIgaW50ZXJuYWxseSwgYXdhaXRpbmcgdGhlIG5leHQgdGltZVxuXHQgKiBgY2xvc2luZ05vdGlmaWVyYCBlbWl0cy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+T24gZXZlcnkgY2xpY2ssIGVtaXQgYXJyYXkgb2YgbW9zdCByZWNlbnQgaW50ZXJ2YWwgZXZlbnRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuXHQgKiB2YXIgYnVmZmVyZWQgPSBpbnRlcnZhbC5idWZmZXIoY2xpY2tzKTtcblx0ICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJDb3VudH1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJXaGVufVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3d9XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxhbnk+fSBjbG9zaW5nTm90aWZpZXIgQW4gT2JzZXJ2YWJsZSB0aGF0IHNpZ25hbHMgdGhlXG5cdCAqIGJ1ZmZlciB0byBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBPYnNlcnZhYmxlIG9mIGJ1ZmZlcnMsIHdoaWNoIGFyZSBhcnJheXMgb2Zcblx0ICogdmFsdWVzLlxuXHQgKiBAbWV0aG9kIGJ1ZmZlclxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gYnVmZmVyKGNsb3NpbmdOb3RpZmllcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyT3BlcmF0b3IoY2xvc2luZ05vdGlmaWVyKSk7XG5cdH1cblx0ZXhwb3J0cy5idWZmZXIgPSBidWZmZXI7XG5cdHZhciBCdWZmZXJPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJPcGVyYXRvcihjbG9zaW5nTm90aWZpZXIpIHtcblx0ICAgICAgICB0aGlzLmNsb3NpbmdOb3RpZmllciA9IGNsb3NpbmdOb3RpZmllcjtcblx0ICAgIH1cblx0ICAgIEJ1ZmZlck9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdOb3RpZmllcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBCdWZmZXJPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQnVmZmVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQnVmZmVyU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJ1ZmZlclN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNsb3NpbmdOb3RpZmllcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyKSk7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBidWZmZXJDb3VudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyQ291bnQgPSBidWZmZXJDb3VudF8xLmJ1ZmZlckNvdW50O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJDb3VudC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIHVudGlsIHRoZSBzaXplIGhpdHMgdGhlIG1heGltdW1cblx0ICogYGJ1ZmZlclNpemVgIGdpdmVuLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXksIGFuZCBlbWl0c1xuXHQgKiB0aGF0IGFycmF5IG9ubHkgd2hlbiBpdHMgc2l6ZSByZWFjaGVzIGBidWZmZXJTaXplYC48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvYnVmZmVyQ291bnQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEJ1ZmZlcnMgYSBudW1iZXIgb2YgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGBidWZmZXJTaXplYCB0aGVuXG5cdCAqIGVtaXRzIHRoZSBidWZmZXIgYW5kIGNsZWFycyBpdCwgYW5kIHN0YXJ0cyBhIG5ldyBidWZmZXIgZWFjaFxuXHQgKiBgc3RhcnRCdWZmZXJFdmVyeWAgdmFsdWVzLiBJZiBgc3RhcnRCdWZmZXJFdmVyeWAgaXMgbm90IHByb3ZpZGVkIG9yIGlzXG5cdCAqIGBudWxsYCwgdGhlbiBuZXcgYnVmZmVycyBhcmUgc3RhcnRlZCBpbW1lZGlhdGVseSBhdCB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZVxuXHQgKiBhbmQgd2hlbiBlYWNoIGJ1ZmZlciBjbG9zZXMgYW5kIGlzIGVtaXR0ZWQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIGxhc3QgdHdvIGNsaWNrIGV2ZW50cyBhcyBhbiBhcnJheTwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlckNvdW50KDIpO1xuXHQgKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk9uIGV2ZXJ5IGNsaWNrLCBlbWl0IHRoZSBsYXN0IHR3byBjbGljayBldmVudHMgYXMgYW4gYXJyYXk8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJDb3VudCgyLCAxKTtcblx0ICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJ9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93Q291bnR9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXJTaXplIFRoZSBtYXhpbXVtIHNpemUgb2YgdGhlIGJ1ZmZlciBlbWl0dGVkLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0QnVmZmVyRXZlcnldIEludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IGEgbmV3IGJ1ZmZlci5cblx0ICogRm9yIGV4YW1wbGUgaWYgYHN0YXJ0QnVmZmVyRXZlcnlgIGlzIGAyYCwgdGhlbiBhIG5ldyBidWZmZXIgd2lsbCBiZSBzdGFydGVkXG5cdCAqIG9uIGV2ZXJ5IG90aGVyIHZhbHVlIGZyb20gdGhlIHNvdXJjZS4gQSBuZXcgYnVmZmVyIGlzIHN0YXJ0ZWQgYXQgdGhlXG5cdCAqIGJlZ2lubmluZyBvZiB0aGUgc291cmNlIGJ5IGRlZmF1bHQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gT2JzZXJ2YWJsZSBvZiBhcnJheXMgb2YgYnVmZmVyZWQgdmFsdWVzLlxuXHQgKiBAbWV0aG9kIGJ1ZmZlckNvdW50XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBidWZmZXJDb3VudChidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSB7XG5cdCAgICBpZiAoc3RhcnRCdWZmZXJFdmVyeSA9PT0gdm9pZCAwKSB7IHN0YXJ0QnVmZmVyRXZlcnkgPSBudWxsOyB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJDb3VudE9wZXJhdG9yKGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpKTtcblx0fVxuXHRleHBvcnRzLmJ1ZmZlckNvdW50ID0gYnVmZmVyQ291bnQ7XG5cdHZhciBCdWZmZXJDb3VudE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEJ1ZmZlckNvdW50T3BlcmF0b3IoYnVmZmVyU2l6ZSwgc3RhcnRCdWZmZXJFdmVyeSkge1xuXHQgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG5cdCAgICAgICAgdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5ID0gc3RhcnRCdWZmZXJFdmVyeTtcblx0ICAgIH1cblx0ICAgIEJ1ZmZlckNvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5idWZmZXJTaXplLCB0aGlzLnN0YXJ0QnVmZmVyRXZlcnkpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyQ291bnRPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQnVmZmVyQ291bnRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhCdWZmZXJDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZTtcblx0ICAgICAgICB0aGlzLnN0YXJ0QnVmZmVyRXZlcnkgPSBzdGFydEJ1ZmZlckV2ZXJ5O1xuXHQgICAgICAgIHRoaXMuYnVmZmVycyA9IFtbXV07XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IDA7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGNvdW50ID0gKHRoaXMuY291bnQgKz0gMSk7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICB2YXIgYnVmZmVyU2l6ZSA9IHRoaXMuYnVmZmVyU2l6ZTtcblx0ICAgICAgICB2YXIgc3RhcnRCdWZmZXJFdmVyeSA9ICh0aGlzLnN0YXJ0QnVmZmVyRXZlcnkgPT0gbnVsbCkgPyBidWZmZXJTaXplIDogdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5O1xuXHQgICAgICAgIHZhciBidWZmZXJzID0gdGhpcy5idWZmZXJzO1xuXHQgICAgICAgIHZhciBsZW4gPSBidWZmZXJzLmxlbmd0aDtcblx0ICAgICAgICB2YXIgcmVtb3ZlID0gLTE7XG5cdCAgICAgICAgaWYgKGNvdW50ICUgc3RhcnRCdWZmZXJFdmVyeSA9PT0gMCkge1xuXHQgICAgICAgICAgICBidWZmZXJzLnB1c2goW10pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBidWZmZXIgPSBidWZmZXJzW2ldO1xuXHQgICAgICAgICAgICBidWZmZXIucHVzaCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSBidWZmZXJTaXplKSB7XG5cdCAgICAgICAgICAgICAgICByZW1vdmUgPSBpO1xuXHQgICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChyZW1vdmUgIT09IC0xKSB7XG5cdCAgICAgICAgICAgIGJ1ZmZlcnMuc3BsaWNlKHJlbW92ZSwgMSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEJ1ZmZlckNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIGJ1ZmZlcnMgPSB0aGlzLmJ1ZmZlcnM7XG5cdCAgICAgICAgd2hpbGUgKGJ1ZmZlcnMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVycy5zaGlmdCgpO1xuXHQgICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBCdWZmZXJDb3VudFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyQ291bnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGJ1ZmZlclRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDM1KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlclRpbWUgPSBidWZmZXJUaW1lXzEuYnVmZmVyVGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAxKTtcblx0LyoqXG5cdCAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBmb3IgYSBzcGVjaWZpYyB0aW1lIHBlcmlvZC5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcblx0ICogdGhvc2UgYXJyYXlzIHBlcmlvZGljYWxseSBpbiB0aW1lLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBCdWZmZXJzIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2UgZm9yIGEgc3BlY2lmaWMgdGltZSBkdXJhdGlvbiBgYnVmZmVyVGltZVNwYW5gLlxuXHQgKiBVbmxlc3MgdGhlIG9wdGlvbmFsIGFyZ3VtZW50IGBidWZmZXJDcmVhdGlvbkludGVydmFsYCBpcyBnaXZlbiwgaXQgZW1pdHMgYW5kXG5cdCAqIHJlc2V0cyB0aGUgYnVmZmVyIGV2ZXJ5IGBidWZmZXJUaW1lU3BhbmAgbWlsbGlzZWNvbmRzLiBJZlxuXHQgKiBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgaXMgZ2l2ZW4sIHRoaXMgb3BlcmF0b3Igb3BlbnMgdGhlIGJ1ZmZlciBldmVyeVxuXHQgKiBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgbWlsbGlzZWNvbmRzIGFuZCBjbG9zZXMgKGVtaXRzIGFuZCByZXNldHMpIHRoZVxuXHQgKiBidWZmZXIgZXZlcnkgYGJ1ZmZlclRpbWVTcGFuYCBtaWxsaXNlY29uZHMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IHNlY29uZCwgZW1pdCBhbiBhcnJheSBvZiB0aGUgcmVjZW50IGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlclRpbWUoMTAwMCk7XG5cdCAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgNSBzZWNvbmRzLCBlbWl0IHRoZSBjbGljayBldmVudHMgZnJvbSB0aGUgbmV4dCAyIHNlY29uZHM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJUaW1lKDIwMDAsIDUwMDApO1xuXHQgKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9IGJ1ZmZlclRpbWVTcGFuIFRoZSBhbW91bnQgb2YgdGltZSB0byBmaWxsIGVhY2ggYnVmZmVyIGFycmF5LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2J1ZmZlckNyZWF0aW9uSW50ZXJ2YWxdIFRoZSBpbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBuZXdcblx0ICogYnVmZmVycy5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBzY2hlZHVsZXIgb24gd2hpY2ggdG8gc2NoZWR1bGUgdGhlXG5cdCAqIGludGVydmFscyB0aGF0IGRldGVybWluZSBidWZmZXIgYm91bmRhcmllcy5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBvYnNlcnZhYmxlIG9mIGFycmF5cyBvZiBidWZmZXJlZCB2YWx1ZXMuXG5cdCAqIEBtZXRob2QgYnVmZmVyVGltZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gYnVmZmVyVGltZShidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPSBudWxsOyB9XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyVGltZU9wZXJhdG9yKGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmJ1ZmZlclRpbWUgPSBidWZmZXJUaW1lO1xuXHR2YXIgQnVmZmVyVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEJ1ZmZlclRpbWVPcGVyYXRvcihidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXJUaW1lU3BhbiA9IGJ1ZmZlclRpbWVTcGFuO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmJ1ZmZlclRpbWVTcGFuLCB0aGlzLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHRoaXMuc2NoZWR1bGVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclRpbWVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQnVmZmVyVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJ1ZmZlclRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5idWZmZXJUaW1lU3BhbiA9IGJ1ZmZlclRpbWVTcGFuO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5idWZmZXJzID0gW107XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMub3BlbkJ1ZmZlcigpO1xuXHQgICAgICAgIGlmIChidWZmZXJDcmVhdGlvbkludGVydmFsICE9PSBudWxsICYmIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPj0gMCkge1xuXHQgICAgICAgICAgICB2YXIgY2xvc2VTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgYnVmZmVyOiBidWZmZXIgfTtcblx0ICAgICAgICAgICAgdmFyIGNyZWF0aW9uU3RhdGUgPSB7IGJ1ZmZlclRpbWVTcGFuOiBidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDogYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc3Vic2NyaWJlcjogdGhpcywgc2NoZWR1bGVyOiBzY2hlZHVsZXIgfTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyQ2xvc2UsIGJ1ZmZlclRpbWVTcGFuLCBjbG9zZVN0YXRlKSk7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlckNyZWF0aW9uLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBjcmVhdGlvblN0YXRlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgdGltZVNwYW5Pbmx5U3RhdGUgPSB7IHN1YnNjcmliZXI6IHRoaXMsIGJ1ZmZlcjogYnVmZmVyLCBidWZmZXJUaW1lU3BhbjogYnVmZmVyVGltZVNwYW4gfTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5LCBidWZmZXJUaW1lU3BhbiwgdGltZVNwYW5Pbmx5U3RhdGUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcblx0ICAgICAgICB2YXIgbGVuID0gYnVmZmVycy5sZW5ndGg7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICBidWZmZXJzW2ldLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuYnVmZmVycy5sZW5ndGggPSAwO1xuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIGJ1ZmZlcnMgPSBfYS5idWZmZXJzLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHdoaWxlIChidWZmZXJzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChidWZmZXJzLnNoaWZ0KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5idWZmZXJzID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbkJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5idWZmZXJzLnB1c2goYnVmZmVyKTtcblx0ICAgICAgICByZXR1cm4gYnVmZmVyO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcblx0ICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcblx0ICAgICAgICBidWZmZXJzLnNwbGljZShidWZmZXJzLmluZGV4T2YoYnVmZmVyKSwgMSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEJ1ZmZlclRpbWVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5KHN0YXRlKSB7XG5cdCAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG5cdCAgICB2YXIgcHJldkJ1ZmZlciA9IHN0YXRlLmJ1ZmZlcjtcblx0ICAgIGlmIChwcmV2QnVmZmVyKSB7XG5cdCAgICAgICAgc3Vic2NyaWJlci5jbG9zZUJ1ZmZlcihwcmV2QnVmZmVyKTtcblx0ICAgIH1cblx0ICAgIHN0YXRlLmJ1ZmZlciA9IHN1YnNjcmliZXIub3BlbkJ1ZmZlcigpO1xuXHQgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgc3RhdGUuYnVmZmVyVGltZVNwYW4pO1xuXHQgICAgfVxuXHR9XG5cdGZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyQ3JlYXRpb24oc3RhdGUpIHtcblx0ICAgIHZhciBidWZmZXJDcmVhdGlvbkludGVydmFsID0gc3RhdGUuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgYnVmZmVyVGltZVNwYW4gPSBzdGF0ZS5idWZmZXJUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlcjtcblx0ICAgIHZhciBidWZmZXIgPSBzdWJzY3JpYmVyLm9wZW5CdWZmZXIoKTtcblx0ICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuXHQgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgYWN0aW9uLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hCdWZmZXJDbG9zZSwgYnVmZmVyVGltZVNwYW4sIHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgYnVmZmVyOiBidWZmZXIgfSkpO1xuXHQgICAgICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCk7XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gZGlzcGF0Y2hCdWZmZXJDbG9zZShhcmcpIHtcblx0ICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIGJ1ZmZlciA9IGFyZy5idWZmZXI7XG5cdCAgICBzdWJzY3JpYmVyLmNsb3NlQnVmZmVyKGJ1ZmZlcik7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgYnVmZmVyVG9nZ2xlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzNyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJUb2dnbGUgPSBidWZmZXJUb2dnbGVfMS5idWZmZXJUb2dnbGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlclRvZ2dsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpcHRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHQvKipcblx0ICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIHN0YXJ0aW5nIGZyb20gYW4gZW1pc3Npb24gZnJvbVxuXHQgKiBgb3BlbmluZ3NgIGFuZCBlbmRpbmcgd2hlbiB0aGUgb3V0cHV0IG9mIGBjbG9zaW5nU2VsZWN0b3JgIGVtaXRzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXkuIFN0YXJ0c1xuXHQgKiBjb2xsZWN0aW5nIG9ubHkgd2hlbiBgb3BlbmluZ2AgZW1pdHMsIGFuZCBjYWxscyB0aGUgYGNsb3NpbmdTZWxlY3RvcmBcblx0ICogZnVuY3Rpb24gdG8gZ2V0IGFuIE9ic2VydmFibGUgdGhhdCB0ZWxscyB3aGVuIHRvIGNsb3NlIHRoZSBidWZmZXIuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2J1ZmZlclRvZ2dsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQnVmZmVycyB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIGJ5IG9wZW5pbmcgdGhlIGJ1ZmZlciB2aWEgc2lnbmFscyBmcm9tIGFuXG5cdCAqIE9ic2VydmFibGUgcHJvdmlkZWQgdG8gYG9wZW5pbmdzYCwgYW5kIGNsb3NpbmcgYW5kIHNlbmRpbmcgdGhlIGJ1ZmZlcnMgd2hlblxuXHQgKiBhIFN1YnNjcmliYWJsZSBvciBQcm9taXNlIHJldHVybmVkIGJ5IHRoZSBgY2xvc2luZ1NlbGVjdG9yYCBmdW5jdGlvbiBlbWl0cy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgb3RoZXIgc2Vjb25kLCBlbWl0IHRoZSBjbGljayBldmVudHMgZnJvbSB0aGUgbmV4dCA1MDBtczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIG9wZW5pbmdzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcblx0ICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlclRvZ2dsZShvcGVuaW5ncywgaSA9PlxuXHQgKiAgIGkgJSAyID8gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApIDogUnguT2JzZXJ2YWJsZS5lbXB0eSgpXG5cdCAqICk7XG5cdCAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyfVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJDb3VudH1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N1YnNjcmliYWJsZU9yUHJvbWlzZTxPPn0gb3BlbmluZ3MgQSBTdWJzY3JpYmFibGUgb3IgUHJvbWlzZSBvZiBub3RpZmljYXRpb25zIHRvIHN0YXJ0IG5ld1xuXHQgKiBidWZmZXJzLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBPKTogU3Vic2NyaWJhYmxlT3JQcm9taXNlfSBjbG9zaW5nU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHRha2VzXG5cdCAqIHRoZSB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBgb3BlbmluZ3NgIG9ic2VydmFibGUgYW5kIHJldHVybnMgYSBTdWJzY3JpYmFibGUgb3IgUHJvbWlzZSxcblx0ICogd2hpY2gsIHdoZW4gaXQgZW1pdHMsIHNpZ25hbHMgdGhhdCB0aGUgYXNzb2NpYXRlZCBidWZmZXIgc2hvdWxkIGJlIGVtaXR0ZWRcblx0ICogYW5kIGNsZWFyZWQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gb2JzZXJ2YWJsZSBvZiBhcnJheXMgb2YgYnVmZmVyZWQgdmFsdWVzLlxuXHQgKiBAbWV0aG9kIGJ1ZmZlclRvZ2dsZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gYnVmZmVyVG9nZ2xlKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlclRvZ2dsZU9wZXJhdG9yKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmJ1ZmZlclRvZ2dsZSA9IGJ1ZmZlclRvZ2dsZTtcblx0dmFyIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBCdWZmZXJUb2dnbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vcGVuaW5ncywgdGhpcy5jbG9zaW5nU2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyVG9nZ2xlT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMub3BlbmluZ3MgPSBvcGVuaW5ncztcblx0ICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gW107XG5cdCAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvcGVuaW5ncykpO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuXHQgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICBjb250ZXh0c1tpXS5idWZmZXIucHVzaCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuXHQgICAgICAgIHdoaWxlIChjb250ZXh0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHMuc2hpZnQoKTtcblx0ICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgY29udGV4dC5idWZmZXIgPSBudWxsO1xuXHQgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuY29udGV4dHMgPSBudWxsO1xuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB3aGlsZSAoY29udGV4dHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzLnNoaWZ0KCk7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChjb250ZXh0LmJ1ZmZlcik7XG5cdCAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIGNvbnRleHQuYnVmZmVyID0gbnVsbDtcblx0ICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICBvdXRlclZhbHVlID8gdGhpcy5jbG9zZUJ1ZmZlcihvdXRlclZhbHVlKSA6IHRoaXMub3BlbkJ1ZmZlcihpbm5lclZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuY2xvc2VCdWZmZXIoaW5uZXJTdWIuY29udGV4dCk7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbkJ1ZmZlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHZhciBjbG9zaW5nU2VsZWN0b3IgPSB0aGlzLmNsb3NpbmdTZWxlY3Rvcjtcblx0ICAgICAgICAgICAgdmFyIGNsb3NpbmdOb3RpZmllciA9IGNsb3NpbmdTZWxlY3Rvci5jYWxsKHRoaXMsIHZhbHVlKTtcblx0ICAgICAgICAgICAgaWYgKGNsb3NpbmdOb3RpZmllcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy50cnlTdWJzY3JpYmUoY2xvc2luZ05vdGlmaWVyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLmNsb3NlQnVmZmVyID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcblx0ICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuXHQgICAgICAgIGlmIChjb250ZXh0cyAmJiBjb250ZXh0KSB7XG5cdCAgICAgICAgICAgIHZhciBidWZmZXIgPSBjb250ZXh0LmJ1ZmZlciwgc3Vic2NyaXB0aW9uID0gY29udGV4dC5zdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuXHQgICAgICAgICAgICBjb250ZXh0cy5zcGxpY2UoY29udGV4dHMuaW5kZXhPZihjb250ZXh0KSwgMSk7XG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoY2xvc2luZ05vdGlmaWVyKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB2YXIgYnVmZmVyID0gW107XG5cdCAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oKTtcblx0ICAgICAgICB2YXIgY29udGV4dCA9IHsgYnVmZmVyOiBidWZmZXIsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uIH07XG5cdCAgICAgICAgY29udGV4dHMucHVzaChjb250ZXh0KTtcblx0ICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllciwgY29udGV4dCk7XG5cdCAgICAgICAgaWYgKCFpbm5lclN1YnNjcmlwdGlvbiB8fCBpbm5lclN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmNsb3NlQnVmZmVyKGNvbnRleHQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24uY29udGV4dCA9IGNvbnRleHQ7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUb2dnbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0MzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGJ1ZmZlcldoZW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDM5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlcldoZW4gPSBidWZmZXJXaGVuXzEuYnVmZmVyV2hlbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyV2hlbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpcHRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzLCB1c2luZyBhIGZhY3RvcnkgZnVuY3Rpb24gb2YgY2xvc2luZ1xuXHQgKiBPYnNlcnZhYmxlcyB0byBkZXRlcm1pbmUgd2hlbiB0byBjbG9zZSwgZW1pdCwgYW5kIHJlc2V0IHRoZSBidWZmZXIuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db2xsZWN0cyB2YWx1ZXMgZnJvbSB0aGUgcGFzdCBhcyBhbiBhcnJheS4gV2hlbiBpdFxuXHQgKiBzdGFydHMgY29sbGVjdGluZyB2YWx1ZXMsIGl0IGNhbGxzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdFxuXHQgKiB0ZWxscyB3aGVuIHRvIGNsb3NlIHRoZSBidWZmZXIgYW5kIHJlc3RhcnQgY29sbGVjdGluZy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvYnVmZmVyV2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogT3BlbnMgYSBidWZmZXIgaW1tZWRpYXRlbHksIHRoZW4gY2xvc2VzIHRoZSBidWZmZXIgd2hlbiB0aGUgb2JzZXJ2YWJsZVxuXHQgKiByZXR1cm5lZCBieSBjYWxsaW5nIGBjbG9zaW5nU2VsZWN0b3JgIGZ1bmN0aW9uIGVtaXRzIGEgdmFsdWUuIFdoZW4gaXQgY2xvc2VzXG5cdCAqIHRoZSBidWZmZXIsIGl0IGltbWVkaWF0ZWx5IG9wZW5zIGEgbmV3IGJ1ZmZlciBhbmQgcmVwZWF0cyB0aGUgcHJvY2Vzcy5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBhbiBhcnJheSBvZiB0aGUgbGFzdCBjbGlja3MgZXZlcnkgWzEtNV0gcmFuZG9tIHNlY29uZHM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJXaGVuKCgpID0+XG5cdCAqICAgUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwICsgTWF0aC5yYW5kb20oKSAqIDQwMDApXG5cdCAqICk7XG5cdCAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyfVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJDb3VudH1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cblx0ICogQHNlZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IE9ic2VydmFibGV9IGNsb3NpbmdTZWxlY3RvciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgbm9cblx0ICogYXJndW1lbnRzIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBzaWduYWxzIGJ1ZmZlciBjbG9zdXJlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFRbXT59IEFuIG9ic2VydmFibGUgb2YgYXJyYXlzIG9mIGJ1ZmZlcmVkIHZhbHVlcy5cblx0ICogQG1ldGhvZCBidWZmZXJXaGVuXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBidWZmZXJXaGVuKGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyV2hlbk9wZXJhdG9yKGNsb3NpbmdTZWxlY3RvcikpO1xuXHR9XG5cdGV4cG9ydHMuYnVmZmVyV2hlbiA9IGJ1ZmZlcldoZW47XG5cdHZhciBCdWZmZXJXaGVuT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQnVmZmVyV2hlbk9wZXJhdG9yKGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgQnVmZmVyV2hlbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyV2hlblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jbG9zaW5nU2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQnVmZmVyV2hlbk9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBCdWZmZXJXaGVuU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQnVmZmVyV2hlblN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJXaGVuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLm9wZW5CdWZmZXIoKTtcblx0ICAgIH1cblx0ICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXHQgICAgICAgIGlmIChidWZmZXIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5zdWJzY3JpYmluZyA9IGZhbHNlO1xuXHQgICAgfTtcblx0ICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5vcGVuQnVmZmVyKCk7XG5cdCAgICB9O1xuXHQgICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLnN1YnNjcmliaW5nKSB7XG5cdCAgICAgICAgICAgIHRoaXMuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMub3BlbkJ1ZmZlcigpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbkJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgY2xvc2luZ1N1YnNjcmlwdGlvbiA9IHRoaXMuY2xvc2luZ1N1YnNjcmlwdGlvbjtcblx0ICAgICAgICBpZiAoY2xvc2luZ1N1YnNjcmlwdGlvbikge1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShjbG9zaW5nU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgY2xvc2luZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgaWYgKHRoaXMuYnVmZmVyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuY2xvc2luZ1NlbGVjdG9yKSgpO1xuXHQgICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgdGhpcy5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgY2xvc2luZ1N1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oKTtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zaW5nU3Vic2NyaXB0aW9uID0gY2xvc2luZ1N1YnNjcmlwdGlvbjtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoY2xvc2luZ1N1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSB0cnVlO1xuXHQgICAgICAgICAgICBjbG9zaW5nU3Vic2NyaXB0aW9uLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllcikpO1xuXHQgICAgICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBCdWZmZXJXaGVuU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyV2hlbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgY2FjaGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNhY2hlID0gY2FjaGVfMS5jYWNoZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgcHVibGlzaFJlcGxheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NDIpO1xuXHQvKipcblx0ICogQHBhcmFtIGJ1ZmZlclNpemVcblx0ICogQHBhcmFtIHdpbmRvd1RpbWVcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPGFueT59XG5cdCAqIEBtZXRob2QgY2FjaGVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGNhY2hlKGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkgeyBidWZmZXJTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICBpZiAod2luZG93VGltZSA9PT0gdm9pZCAwKSB7IHdpbmRvd1RpbWUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cblx0ICAgIHJldHVybiBwdWJsaXNoUmVwbGF5XzEucHVibGlzaFJlcGxheS5jYWxsKHRoaXMsIGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikucmVmQ291bnQoKTtcblx0fVxuXHRleHBvcnRzLmNhY2hlID0gY2FjaGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIFJlcGxheVN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQzKTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NDUpO1xuXHQvKipcblx0ICogQHBhcmFtIGJ1ZmZlclNpemVcblx0ICogQHBhcmFtIHdpbmRvd1RpbWVcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtDb25uZWN0YWJsZU9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgcHVibGlzaFJlcGxheVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcHVibGlzaFJlcGxheShidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChidWZmZXJTaXplID09PSB2b2lkIDApIHsgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgaWYgKHdpbmRvd1RpbWUgPT09IHZvaWQgMCkgeyB3aW5kb3dUaW1lID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IFJlcGxheVN1YmplY3RfMS5SZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMucHVibGlzaFJlcGxheSA9IHB1Ymxpc2hSZXBsYXk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hSZXBsYXkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHF1ZXVlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0NCk7XG5cdHZhciBvYnNlcnZlT25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg3KTtcblx0LyoqXG5cdCAqIEBjbGFzcyBSZXBsYXlTdWJqZWN0PFQ+XG5cdCAqL1xuXHR2YXIgUmVwbGF5U3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmVwbGF5U3ViamVjdCwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlcGxheVN1YmplY3QoYnVmZmVyU2l6ZSwgd2luZG93VGltZSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkgeyBidWZmZXJTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICAgICAgaWYgKHdpbmRvd1RpbWUgPT09IHZvaWQgMCkgeyB3aW5kb3dUaW1lID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5ldmVudHMgPSBbXTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplIDwgMSA/IDEgOiBidWZmZXJTaXplO1xuXHQgICAgICAgIHRoaXMuX3dpbmRvd1RpbWUgPSB3aW5kb3dUaW1lIDwgMSA/IDEgOiB3aW5kb3dUaW1lO1xuXHQgICAgfVxuXHQgICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgbm93ID0gdGhpcy5fZ2V0Tm93KCk7XG5cdCAgICAgICAgdGhpcy5ldmVudHMucHVzaChuZXcgUmVwbGF5RXZlbnQobm93LCB2YWx1ZSkpO1xuXHQgICAgICAgIHRoaXMuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzKG5vdyk7XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHModGhpcy5fZ2V0Tm93KCkpO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKHN1YnNjcmliZXIgPSBuZXcgb2JzZXJ2ZU9uXzEuT2JzZXJ2ZU9uU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBzY2hlZHVsZXIpKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICAgICAgdmFyIGxlbiA9IGV2ZW50cy5sZW5ndGg7XG5cdCAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4gJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGV2ZW50c1tpbmRleF0udmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG5cdCAgICB9O1xuXHQgICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX2dldE5vdyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gKHRoaXMuc2NoZWR1bGVyIHx8IHF1ZXVlXzEucXVldWUpLm5vdygpO1xuXHQgICAgfTtcblx0ICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cyA9IGZ1bmN0aW9uIChub3cpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyU2l6ZSA9IHRoaXMuYnVmZmVyU2l6ZTtcblx0ICAgICAgICB2YXIgX3dpbmRvd1RpbWUgPSB0aGlzLl93aW5kb3dUaW1lO1xuXHQgICAgICAgIHZhciBldmVudHMgPSB0aGlzLmV2ZW50cztcblx0ICAgICAgICB2YXIgZXZlbnRzQ291bnQgPSBldmVudHMubGVuZ3RoO1xuXHQgICAgICAgIHZhciBzcGxpY2VDb3VudCA9IDA7XG5cdCAgICAgICAgLy8gVHJpbSBldmVudHMgdGhhdCBmYWxsIG91dCBvZiB0aGUgdGltZSB3aW5kb3cuXG5cdCAgICAgICAgLy8gU3RhcnQgYXQgdGhlIGZyb250IG9mIHRoZSBsaXN0LiBCcmVhayBlYXJseSBvbmNlXG5cdCAgICAgICAgLy8gd2UgZW5jb3VudGVyIGFuIGV2ZW50IHRoYXQgZmFsbHMgd2l0aGluIHRoZSB3aW5kb3cuXG5cdCAgICAgICAgd2hpbGUgKHNwbGljZUNvdW50IDwgZXZlbnRzQ291bnQpIHtcblx0ICAgICAgICAgICAgaWYgKChub3cgLSBldmVudHNbc3BsaWNlQ291bnRdLnRpbWUpIDwgX3dpbmRvd1RpbWUpIHtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHNwbGljZUNvdW50ICs9IDE7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChldmVudHNDb3VudCA+IGJ1ZmZlclNpemUpIHtcblx0ICAgICAgICAgICAgc3BsaWNlQ291bnQgPSBNYXRoLm1heChzcGxpY2VDb3VudCwgZXZlbnRzQ291bnQgLSBidWZmZXJTaXplKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHNwbGljZUNvdW50ID4gMCkge1xuXHQgICAgICAgICAgICBldmVudHMuc3BsaWNlKDAsIHNwbGljZUNvdW50KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGV2ZW50cztcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVwbGF5U3ViamVjdDtcblx0fShTdWJqZWN0XzEuU3ViamVjdCkpO1xuXHRleHBvcnRzLlJlcGxheVN1YmplY3QgPSBSZXBsYXlTdWJqZWN0O1xuXHR2YXIgUmVwbGF5RXZlbnQgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmVwbGF5RXZlbnQodGltZSwgdmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBSZXBsYXlFdmVudDtcblx0fSgpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9UmVwbGF5U3ViamVjdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBRdWV1ZVNjaGVkdWxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDQpO1xuXHRleHBvcnRzLnF1ZXVlID0gbmV3IFF1ZXVlU2NoZWR1bGVyXzEuUXVldWVTY2hlZHVsZXIoKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0Nik7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0cyBvZiBpbnZva2luZyBhIHNwZWNpZmllZCBzZWxlY3RvciBvbiBpdGVtc1xuXHQgKiBlbWl0dGVkIGJ5IGEgQ29ubmVjdGFibGVPYnNlcnZhYmxlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvbXVsdGljYXN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciAtIGEgZnVuY3Rpb24gdGhhdCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc3RyZWFtXG5cdCAqIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IGNhdXNpbmcgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHN0cmVhbS5cblx0ICogU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIHJlY2VpdmUgYWxsIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBmcm9tIHRoZVxuXHQgKiB0aW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gZm9yd2FyZC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHRzIG9mIGludm9raW5nIHRoZSBzZWxlY3RvclxuXHQgKiBvbiB0aGUgaXRlbXMgZW1pdHRlZCBieSBhIGBDb25uZWN0YWJsZU9ic2VydmFibGVgIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0b1xuXHQgKiB0aGUgdW5kZXJseWluZyBzdHJlYW0uXG5cdCAqIEBtZXRob2QgbXVsdGljYXN0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtdWx0aWNhc3Qoc3ViamVjdE9yU3ViamVjdEZhY3RvcnkpIHtcblx0ICAgIHZhciBzdWJqZWN0RmFjdG9yeTtcblx0ICAgIGlmICh0eXBlb2Ygc3ViamVjdE9yU3ViamVjdEZhY3RvcnkgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBzdWJqZWN0RmFjdG9yeSA9IHN1YmplY3RPclN1YmplY3RGYWN0b3J5O1xuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgc3ViamVjdEZhY3RvcnkgPSBmdW5jdGlvbiBzdWJqZWN0RmFjdG9yeSgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YmplY3RPclN1YmplY3RGYWN0b3J5O1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IENvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSh0aGlzLCBzdWJqZWN0RmFjdG9yeSk7XG5cdH1cblx0ZXhwb3J0cy5tdWx0aWNhc3QgPSBtdWx0aWNhc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW11bHRpY2FzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdC8qKlxuXHQgKiBAY2xhc3MgQ29ubmVjdGFibGVPYnNlcnZhYmxlPFQ+XG5cdCAqL1xuXHR2YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDb25uZWN0YWJsZU9ic2VydmFibGUoc291cmNlLCBzdWJqZWN0RmFjdG9yeSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0RmFjdG9yeTtcblx0ICAgIH1cblx0ICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3ViamVjdCgpLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgIH07XG5cdCAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmdldFN1YmplY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG5cdCAgICAgICAgaWYgKHN1YmplY3QgJiYgIXN1YmplY3QuaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAodGhpcy5zdWJqZWN0ID0gdGhpcy5zdWJqZWN0RmFjdG9yeSgpKTtcblx0ICAgIH07XG5cdCAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmlwdGlvbjtcblx0ICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICYmICFzdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZSh0aGlzLmdldFN1YmplY3QoKSk7XG5cdCAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChuZXcgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24odGhpcykpO1xuXHQgICAgICAgIHJldHVybiAodGhpcy5zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb24pO1xuXHQgICAgfTtcblx0ICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVmQ291bnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudE9ic2VydmFibGUodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIG1ldGhvZCBpcyBvcGVuZWQgZm9yIGBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbmAuXG5cdCAgICAgKiBOb3QgdG8gY2FsbCBmcm9tIG90aGVycy5cblx0ICAgICAqL1xuXHQgICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fY2xvc2VTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5zdWJqZWN0ID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQ29ubmVjdGFibGVTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gQ29ubmVjdGFibGVTdWJzY3JpcHRpb24oY29ubmVjdGFibGUpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG5cdCAgICB9XG5cdCAgICBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuY29ubmVjdGFibGU7XG5cdCAgICAgICAgY29ubmVjdGFibGUuX2Nsb3NlU3Vic2NyaXB0aW9uKCk7XG5cdCAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uO1xuXHR9KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZWZDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJlZkNvdW50T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlZkNvdW50T2JzZXJ2YWJsZShjb25uZWN0YWJsZSwgcmVmQ291bnQpIHtcblx0ICAgICAgICBpZiAocmVmQ291bnQgPT09IHZvaWQgMCkgeyByZWZDb3VudCA9IDA7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG5cdCAgICAgICAgdGhpcy5yZWZDb3VudCA9IHJlZkNvdW50O1xuXHQgICAgfVxuXHQgICAgUmVmQ291bnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB2YXIgY29ubmVjdGFibGUgPSB0aGlzLmNvbm5lY3RhYmxlO1xuXHQgICAgICAgIHZhciByZWZDb3VudFN1YnNjcmliZXIgPSBuZXcgUmVmQ291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMpO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBjb25uZWN0YWJsZS5zdWJzY3JpYmUocmVmQ291bnRTdWJzY3JpYmVyKTtcblx0ICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCAmJiArK3RoaXMucmVmQ291bnQgPT09IDEpIHtcblx0ICAgICAgICAgICAgcmVmQ291bnRTdWJzY3JpYmVyLmNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0YWJsZS5jb25uZWN0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJlZkNvdW50T2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZWZDb3VudFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFJlZkNvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlZkNvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcmVmQ291bnRPYnNlcnZhYmxlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgbnVsbCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHRoaXMucmVmQ291bnRPYnNlcnZhYmxlID0gcmVmQ291bnRPYnNlcnZhYmxlO1xuXHQgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IHJlZkNvdW50T2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh0aGlzKTtcblx0ICAgIH1cblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuX3Jlc2V0Q29ubmVjdGFibGUoKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5fcmVzZXRDb25uZWN0YWJsZSgpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBSZWZDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9yZXNldENvbm5lY3RhYmxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcy5yZWZDb3VudE9ic2VydmFibGU7XG5cdCAgICAgICAgdmFyIG9ic0Nvbm5lY3Rpb24gPSBvYnNlcnZhYmxlLmNvbm5lY3Rpb247XG5cdCAgICAgICAgdmFyIHN1YkNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb247XG5cdCAgICAgICAgaWYgKHN1YkNvbm5lY3Rpb24gJiYgc3ViQ29ubmVjdGlvbiA9PT0gb2JzQ29ubmVjdGlvbikge1xuXHQgICAgICAgICAgICBvYnNlcnZhYmxlLnJlZkNvdW50ID0gMDtcblx0ICAgICAgICAgICAgb2JzQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICBvYnNlcnZhYmxlLmNvbm5lY3Rpb24gPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcy5yZWZDb3VudE9ic2VydmFibGU7XG5cdCAgICAgICAgaWYgKG9ic2VydmFibGUucmVmQ291bnQgPT09IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoLS1vYnNlcnZhYmxlLnJlZkNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICAgIHZhciBvYnNDb25uZWN0aW9uID0gb2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuXHQgICAgICAgICAgICB2YXIgc3ViQ29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjtcblx0ICAgICAgICAgICAgaWYgKHN1YkNvbm5lY3Rpb24gJiYgc3ViQ29ubmVjdGlvbiA9PT0gb2JzQ29ubmVjdGlvbikge1xuXHQgICAgICAgICAgICAgICAgb2JzQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5jb25uZWN0aW9uID0gbnVsbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVmQ291bnRTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3RhYmxlT2JzZXJ2YWJsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgY2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQ4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNhdGNoID0gY2F0Y2hfMS5fY2F0Y2g7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDQ4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdC8qKlxuXHQgKiBDYXRjaGVzIGVycm9ycyBvbiB0aGUgb2JzZXJ2YWJsZSB0byBiZSBoYW5kbGVkIGJ5IHJldHVybmluZyBhIG5ldyBvYnNlcnZhYmxlIG9yIHRocm93aW5nIGFuIGVycm9yLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzZWxlY3RvciBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYXMgYXJndW1lbnRzIGBlcnJgLCB3aGljaCBpcyB0aGUgZXJyb3IsIGFuZCBgY2F1Z2h0YCwgd2hpY2hcblx0ICogIGlzIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSwgaW4gY2FzZSB5b3UnZCBsaWtlIHRvIFwicmV0cnlcIiB0aGF0IG9ic2VydmFibGUgYnkgcmV0dXJuaW5nIGl0IGFnYWluLiBXaGF0ZXZlciBvYnNlcnZhYmxlXG5cdCAqICBpcyByZXR1cm5lZCBieSB0aGUgYHNlbGVjdG9yYCB3aWxsIGJlIHVzZWQgdG8gY29udGludWUgdGhlIG9ic2VydmFibGUgY2hhaW4uXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIG9ic2VydmFibGUgdGhhdCBvcmlnaW5hdGVzIGZyb20gZWl0aGVyIHRoZSBzb3VyY2Ugb3IgdGhlIG9ic2VydmFibGUgcmV0dXJuZWQgYnkgdGhlXG5cdCAqICBjYXRjaCBgc2VsZWN0b3JgIGZ1bmN0aW9uLlxuXHQgKiBAbWV0aG9kIGNhdGNoXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBfY2F0Y2goc2VsZWN0b3IpIHtcblx0ICAgIHZhciBvcGVyYXRvciA9IG5ldyBDYXRjaE9wZXJhdG9yKHNlbGVjdG9yKTtcblx0ICAgIHZhciBjYXVnaHQgPSB0aGlzLmxpZnQob3BlcmF0b3IpO1xuXHQgICAgcmV0dXJuIChvcGVyYXRvci5jYXVnaHQgPSBjYXVnaHQpO1xuXHR9XG5cdGV4cG9ydHMuX2NhdGNoID0gX2NhdGNoO1xuXHR2YXIgQ2F0Y2hPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBDYXRjaE9wZXJhdG9yKHNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgQ2F0Y2hPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IENhdGNoU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNlbGVjdG9yLCB0aGlzLmNhdWdodCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBDYXRjaE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBDYXRjaFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKENhdGNoU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIENhdGNoU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgc2VsZWN0b3IsIGNhdWdodCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jYXVnaHQgPSBjYXVnaHQ7XG5cdCAgICB9XG5cdCAgICAvLyBOT1RFOiBvdmVycmlkaW5nIGBlcnJvcmAgaW5zdGVhZCBvZiBgX2Vycm9yYCBiZWNhdXNlIHdlIGRvbid0IHdhbnRcblx0ICAgIC8vIHRvIGhhdmUgdGhpcyBmbGFnIHRoaXMgc3Vic2NyaWJlciBhcyBgaXNTdG9wcGVkYC5cblx0ICAgIENhdGNoU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zZWxlY3RvcihlcnIsIHRoaXMuY2F1Z2h0KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5faW5uZXJTdWIocmVzdWx0KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQ2F0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ucmVtb3ZlKHRoaXMpO1xuXHQgICAgICAgIHJlc3VsdC5zdWJzY3JpYmUodGhpcy5kZXN0aW5hdGlvbik7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENhdGNoU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jYXRjaC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgY29tYmluZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NTApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29tYmluZUFsbCA9IGNvbWJpbmVBbGxfMS5jb21iaW5lQWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lQWxsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDUwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIGNvbWJpbmVMYXRlc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU5KTtcblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgYnkgd2FpdGluZ1xuXHQgKiBmb3IgdGhlIG91dGVyIE9ic2VydmFibGUgdG8gY29tcGxldGUsIHRoZW4gYXBwbHlpbmcge0BsaW5rIGNvbWJpbmVMYXRlc3R9LlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBieSBhcHBseWluZ1xuXHQgKiB7QGxpbmsgY29tYmluZUxhdGVzdH0gd2hlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBjb21wbGV0ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVBbGwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFRha2VzIGFuIE9ic2VydmFibGUgb2YgT2JzZXJ2YWJsZXMsIGFuZCBjb2xsZWN0cyBhbGwgT2JzZXJ2YWJsZXMgZnJvbSBpdC5cblx0ICogT25jZSB0aGUgb3V0ZXIgT2JzZXJ2YWJsZSBjb21wbGV0ZXMsIGl0IHN1YnNjcmliZXMgdG8gYWxsIGNvbGxlY3RlZFxuXHQgKiBPYnNlcnZhYmxlcyBhbmQgY29tYmluZXMgdGhlaXIgdmFsdWVzIHVzaW5nIHRoZSB7QGxpbmsgY29tYmluZUxhdGVzdH1cblx0ICogc3RyYXRlZ3ksIHN1Y2ggdGhhdDpcblx0ICogLSBFdmVyeSB0aW1lIGFuIGlubmVyIE9ic2VydmFibGUgZW1pdHMsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cy5cblx0ICogLSBXaGVuIHRoZSByZXR1cm5lZCBvYnNlcnZhYmxlIGVtaXRzLCBpdCBlbWl0cyBhbGwgb2YgdGhlIGxhdGVzdCB2YWx1ZXMgYnk6XG5cdCAqICAgLSBJZiBhIGBwcm9qZWN0YCBmdW5jdGlvbiBpcyBwcm92aWRlZCwgaXQgaXMgY2FsbGVkIHdpdGggZWFjaCByZWNlbnQgdmFsdWVcblx0ICogICAgIGZyb20gZWFjaCBpbm5lciBPYnNlcnZhYmxlIGluIHdoYXRldmVyIG9yZGVyIHRoZXkgYXJyaXZlZCwgYW5kIHRoZSByZXN1bHRcblx0ICogICAgIG9mIHRoZSBgcHJvamVjdGAgZnVuY3Rpb24gaXMgd2hhdCBpcyBlbWl0dGVkIGJ5IHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogICAtIElmIHRoZXJlIGlzIG5vIGBwcm9qZWN0YCBmdW5jdGlvbiwgYW4gYXJyYXkgb2YgYWxsIG9mIHRoZSBtb3N0IHJlY2VudFxuXHQgKiAgICAgdmFsdWVzIGlzIGVtaXR0ZWQgYnkgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgdHdvIGNsaWNrIGV2ZW50cyB0byBhIGZpbml0ZSBpbnRlcnZhbCBPYnNlcnZhYmxlLCB0aGVuIGFwcGx5IGNvbWJpbmVBbGw8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoZXYgPT5cblx0ICogICBSeC5PYnNlcnZhYmxlLmludGVydmFsKE1hdGgucmFuZG9tKCkqMjAwMCkudGFrZSgzKVxuXHQgKiApLnRha2UoMik7XG5cdCAqIHZhciByZXN1bHQgPSBoaWdoZXJPcmRlci5jb21iaW5lQWxsKCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVMYXRlc3R9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbcHJvamVjdF0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gbWFwIHRoZSBtb3N0IHJlY2VudFxuXHQgKiB2YWx1ZXMgZnJvbSBlYWNoIGlubmVyIE9ic2VydmFibGUgaW50byBhIG5ldyByZXN1bHQuIFRha2VzIGVhY2ggb2YgdGhlIG1vc3Rcblx0ICogcmVjZW50IHZhbHVlcyBmcm9tIGVhY2ggY29sbGVjdGVkIGlubmVyIE9ic2VydmFibGUgYXMgYXJndW1lbnRzLCBpbiBvcmRlci5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgcmVzdWx0cyBvciBhcnJheXMgb2YgcmVjZW50XG5cdCAqIHZhbHVlcy5cblx0ICogQG1ldGhvZCBjb21iaW5lQWxsXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBjb21iaW5lQWxsKHByb2plY3QpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IGNvbWJpbmVMYXRlc3RfMS5Db21iaW5lTGF0ZXN0T3BlcmF0b3IocHJvamVjdCkpO1xuXHR9XG5cdGV4cG9ydHMuY29tYmluZUFsbCA9IGNvbWJpbmVBbGw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVBbGwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGNvbWJpbmVMYXRlc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0XzEuY29tYmluZUxhdGVzdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgY29uY2F0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3MSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXQgPSBjb25jYXRfMS5jb25jYXQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgY29uY2F0QWxsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1NCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRBbGwgPSBjb25jYXRBbGxfMS5jb25jYXRBbGw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdEFsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtZXJnZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzIpO1xuXHQvKipcblx0ICogQ29udmVydHMgYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSBpbnRvIGEgZmlyc3Qtb3JkZXIgT2JzZXJ2YWJsZSBieVxuXHQgKiBjb25jYXRlbmF0aW5nIHRoZSBpbm5lciBPYnNlcnZhYmxlcyBpbiBvcmRlci5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIGFuIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXMgYnkgcHV0dGluZyBvbmVcblx0ICogaW5uZXIgT2JzZXJ2YWJsZSBhZnRlciB0aGUgb3RoZXIuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdEFsbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogSm9pbnMgZXZlcnkgT2JzZXJ2YWJsZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgKGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUpLCBpblxuXHQgKiBhIHNlcmlhbCBmYXNoaW9uLiBJdCBzdWJzY3JpYmVzIHRvIGVhY2ggaW5uZXIgT2JzZXJ2YWJsZSBvbmx5IGFmdGVyIHRoZVxuXHQgKiBwcmV2aW91cyBpbm5lciBPYnNlcnZhYmxlIGhhcyBjb21wbGV0ZWQsIGFuZCBtZXJnZXMgYWxsIG9mIHRoZWlyIHZhbHVlcyBpbnRvXG5cdCAqIHRoZSByZXR1cm5lZCBvYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBfX1dhcm5pbmc6X18gSWYgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzIE9ic2VydmFibGVzIHF1aWNrbHkgYW5kXG5cdCAqIGVuZGxlc3NseSwgYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlcyBpdCBlbWl0cyBnZW5lcmFsbHkgY29tcGxldGUgc2xvd2VyIHRoYW5cblx0ICogdGhlIHNvdXJjZSBlbWl0cywgeW91IGNhbiBydW4gaW50byBtZW1vcnkgaXNzdWVzIGFzIHRoZSBpbmNvbWluZyBPYnNlcnZhYmxlc1xuXHQgKiBjb2xsZWN0IGluIGFuIHVuYm91bmRlZCBidWZmZXIuXG5cdCAqXG5cdCAqIE5vdGU6IGBjb25jYXRBbGxgIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlQWxsYCB3aXRoIGNvbmN1cnJlbmN5IHBhcmFtZXRlciBzZXRcblx0ICogdG8gYDFgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgdGljayBldmVyeSBzZWNvbmQgZnJvbSAwIHRvIDMsIHdpdGggbm8gY29uY3VycmVuY3k8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoZXYgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpKTtcblx0ICogdmFyIGZpcnN0T3JkZXIgPSBoaWdoZXJPcmRlci5jb25jYXRBbGwoKTtcblx0ICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbWJpbmVBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaH1cblx0ICogQHNlZSB7QGxpbmsgemlwQWxsfVxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIGVtaXR0aW5nIHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5uZXJcblx0ICogT2JzZXJ2YWJsZXMgY29uY2F0ZW5hdGVkLlxuXHQgKiBAbWV0aG9kIGNvbmNhdEFsbFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uY2F0QWxsKCkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgbWVyZ2VBbGxfMS5NZXJnZUFsbE9wZXJhdG9yKDEpKTtcblx0fVxuXHRleHBvcnRzLmNvbmNhdEFsbCA9IGNvbmNhdEFsbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0QWxsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDU1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBjb25jYXRNYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDU2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdE1hcCA9IGNvbmNhdE1hcF8xLmNvbmNhdE1hcDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIG1lcmdlTWFwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1Nyk7XG5cdC8qKlxuXHQgKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBpbiB0aGUgb3V0cHV0XG5cdCAqIE9ic2VydmFibGUsIGluIGEgc2VyaWFsaXplZCBmYXNoaW9uIHdhaXRpbmcgZm9yIGVhY2ggb25lIHRvIGNvbXBsZXRlIGJlZm9yZVxuXHQgKiBtZXJnaW5nIHRoZSBuZXh0LlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TWFwcyBlYWNoIHZhbHVlIHRvIGFuIE9ic2VydmFibGUsIHRoZW4gZmxhdHRlbnMgYWxsIG9mXG5cdCAqIHRoZXNlIGlubmVyIE9ic2VydmFibGVzIHVzaW5nIHtAbGluayBjb25jYXRBbGx9Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXRNYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGJhc2VkIG9uIGFwcGx5aW5nIGEgZnVuY3Rpb24gdGhhdCB5b3Vcblx0ICogc3VwcGx5IHRvIGVhY2ggaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgd2hlcmUgdGhhdCBmdW5jdGlvblxuXHQgKiByZXR1cm5zIGFuIChzby1jYWxsZWQgXCJpbm5lclwiKSBPYnNlcnZhYmxlLiBFYWNoIG5ldyBpbm5lciBPYnNlcnZhYmxlIGlzXG5cdCAqIGNvbmNhdGVuYXRlZCB3aXRoIHRoZSBwcmV2aW91cyBpbm5lciBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBfX1dhcm5pbmc6X18gaWYgc291cmNlIHZhbHVlcyBhcnJpdmUgZW5kbGVzc2x5IGFuZCBmYXN0ZXIgdGhhbiB0aGVpclxuXHQgKiBjb3JyZXNwb25kaW5nIGlubmVyIE9ic2VydmFibGVzIGNhbiBjb21wbGV0ZSwgaXQgd2lsbCByZXN1bHQgaW4gbWVtb3J5IGlzc3Vlc1xuXHQgKiBhcyBpbm5lciBPYnNlcnZhYmxlcyBhbWFzcyBpbiBhbiB1bmJvdW5kZWQgYnVmZmVyIHdhaXRpbmcgZm9yIHRoZWlyIHR1cm4gdG9cblx0ICogYmUgc3Vic2NyaWJlZCB0by5cblx0ICpcblx0ICogTm90ZTogYGNvbmNhdE1hcGAgaXMgZXF1aXZhbGVudCB0byBgbWVyZ2VNYXBgIHdpdGggY29uY3VycmVuY3kgcGFyYW1ldGVyIHNldFxuXHQgKiB0byBgMWAuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkZvciBlYWNoIGNsaWNrIGV2ZW50LCB0aWNrIGV2ZXJ5IHNlY29uZCBmcm9tIDAgdG8gMywgd2l0aCBubyBjb25jdXJyZW5jeTwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5jb25jYXRNYXAoZXYgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29uY2F0fVxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuXHQgKiBAc2VlIHtAbGluayBleGhhdXN0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCA/aW5kZXg6IG51bWJlcik6IE9ic2VydmFibGV9IHByb2plY3QgQSBmdW5jdGlvblxuXHQgKiB0aGF0LCB3aGVuIGFwcGxpZWQgdG8gYW4gaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcmV0dXJucyBhblxuXHQgKiBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG5cdCAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcblx0ICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcblx0ICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuXHQgKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIG9ic2VydmFibGUgb2YgdmFsdWVzIG1lcmdlZCBmcm9tIHRoZSBwcm9qZWN0ZWRcblx0ICogT2JzZXJ2YWJsZXMgYXMgdGhleSB3ZXJlIHN1YnNjcmliZWQgdG8sIG9uZSBhdCBhIHRpbWUuIE9wdGlvbmFsbHksIHRoZXNlXG5cdCAqIHZhbHVlcyBtYXkgaGF2ZSBiZWVuIHByb2plY3RlZCBmcm9tIGEgcGFzc2VkIGBwcm9qZWN0UmVzdWx0YCBhcmd1bWVudC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG5cdCAqIHByb2plY3Rpb24gZnVuY3Rpb24gKGFuZCB0aGUgb3B0aW9uYWwgYHJlc3VsdFNlbGVjdG9yYCkgdG8gZWFjaCBpdGVtIGVtaXR0ZWRcblx0ICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCB0YWtpbmcgdmFsdWVzIGZyb20gZWFjaCBwcm9qZWN0ZWQgaW5uZXJcblx0ICogT2JzZXJ2YWJsZSBzZXF1ZW50aWFsbHkuXG5cdCAqIEBtZXRob2QgY29uY2F0TWFwXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBjb25jYXRNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IG1lcmdlTWFwXzEuTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgMSkpO1xuXHR9XG5cdGV4cG9ydHMuY29uY2F0TWFwID0gY29uY2F0TWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHQvKipcblx0ICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgaW4gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TWFwcyBlYWNoIHZhbHVlIHRvIGFuIE9ic2VydmFibGUsIHRoZW4gZmxhdHRlbnMgYWxsIG9mXG5cdCAqIHRoZXNlIGlubmVyIE9ic2VydmFibGVzIHVzaW5nIHtAbGluayBtZXJnZUFsbH0uPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL21lcmdlTWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG5cdCAqIHN1cHBseSB0byBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoZXJlIHRoYXQgZnVuY3Rpb25cblx0ICogcmV0dXJucyBhbiBPYnNlcnZhYmxlLCBhbmQgdGhlbiBtZXJnaW5nIHRob3NlIHJlc3VsdGluZyBPYnNlcnZhYmxlcyBhbmRcblx0ICogZW1pdHRpbmcgdGhlIHJlc3VsdHMgb2YgdGhpcyBtZXJnZXIuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBhbmQgZmxhdHRlbiBlYWNoIGxldHRlciB0byBhbiBPYnNlcnZhYmxlIHRpY2tpbmcgZXZlcnkgMSBzZWNvbmQ8L2NhcHRpb24+XG5cdCAqIHZhciBsZXR0ZXJzID0gUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKTtcblx0ICogdmFyIHJlc3VsdCA9IGxldHRlcnMubWVyZ2VNYXAoeCA9PlxuXHQgKiAgIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkubWFwKGkgPT4geCtpKVxuXHQgKiApO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG5cdCAqIEBzZWUge0BsaW5rIGV4aGF1c3RNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsID9pbmRleDogbnVtYmVyKTogT2JzZXJ2YWJsZX0gcHJvamVjdCBBIGZ1bmN0aW9uXG5cdCAqIHRoYXQsIHdoZW4gYXBwbGllZCB0byBhbiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXR1cm5zIGFuXG5cdCAqIE9ic2VydmFibGUuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cblx0ICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuXHQgKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuXHQgKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG5cdCAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcblx0ICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuXHQgKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG5cdCAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgbWVyZ2luZyB0aGUgcmVzdWx0cyBvZiB0aGUgT2JzZXJ2YWJsZXMgb2J0YWluZWRcblx0ICogZnJvbSB0aGlzIHRyYW5zZm9ybWF0aW9uLlxuXHQgKiBAbWV0aG9kIG1lcmdlTWFwXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZU1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuXHQgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgIGNvbmN1cnJlbnQgPSByZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgICByZXN1bHRTZWxlY3RvciA9IG51bGw7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNZXJnZU1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSk7XG5cdH1cblx0ZXhwb3J0cy5tZXJnZU1hcCA9IG1lcmdlTWFwO1xuXHR2YXIgTWVyZ2VNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNZXJnZU1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG5cdCAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcblx0ICAgIH1cblx0ICAgIE1lcmdlTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWVyZ2VNYXBTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByb2plY3QsIHRoaXMucmVzdWx0U2VsZWN0b3IsIHRoaXMuY29uY3VycmVudCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNZXJnZU1hcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLk1lcmdlTWFwT3BlcmF0b3IgPSBNZXJnZU1hcE9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNZXJnZU1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1lcmdlTWFwU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcblx0ICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuYnVmZmVyID0gW107XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuXHQgICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWN0aXZlKys7XG5cdCAgICAgICAgdGhpcy5faW5uZXJTdWIocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKGlzaCwgdmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBpc2gsIHZhbHVlLCBpbmRleCkpO1xuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGhpcy5fbm90aWZ5UmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25vdGlmeVJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdCAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlLS07XG5cdCAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmhhc0NvbXBsZXRlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBNZXJnZU1hcFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdGV4cG9ydHMuTWVyZ2VNYXBTdWJzY3JpYmVyID0gTWVyZ2VNYXBTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ1OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgY29uY2F0TWFwVG9fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDU5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdE1hcFRvID0gY29uY2F0TWFwVG9fMS5jb25jYXRNYXBUbztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgbWVyZ2VNYXBUb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NjApO1xuXHQvKipcblx0ICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIHNhbWUgT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgbXVsdGlwbGVcblx0ICogdGltZXMgaW4gYSBzZXJpYWxpemVkIGZhc2hpb24gb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBjb25jYXRNYXB9LCBidXQgbWFwcyBlYWNoIHZhbHVlXG5cdCAqIGFsd2F5cyB0byB0aGUgc2FtZSBpbm5lciBPYnNlcnZhYmxlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXRNYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogTWFwcyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgZ2l2ZW4gT2JzZXJ2YWJsZSBgaW5uZXJPYnNlcnZhYmxlYCByZWdhcmRsZXNzXG5cdCAqIG9mIHRoZSBzb3VyY2UgdmFsdWUsIGFuZCB0aGVuIGZsYXR0ZW5zIHRob3NlIHJlc3VsdGluZyBPYnNlcnZhYmxlcyBpbnRvIG9uZVxuXHQgKiBzaW5nbGUgT2JzZXJ2YWJsZSwgd2hpY2ggaXMgdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBFYWNoIG5ldyBgaW5uZXJPYnNlcnZhYmxlYFxuXHQgKiBpbnN0YW5jZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBpcyBjb25jYXRlbmF0ZWQgd2l0aCB0aGUgcHJldmlvdXNcblx0ICogYGlubmVyT2JzZXJ2YWJsZWAgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIF9fV2FybmluZzpfXyBpZiBzb3VyY2UgdmFsdWVzIGFycml2ZSBlbmRsZXNzbHkgYW5kIGZhc3RlciB0aGFuIHRoZWlyXG5cdCAqIGNvcnJlc3BvbmRpbmcgaW5uZXIgT2JzZXJ2YWJsZXMgY2FuIGNvbXBsZXRlLCBpdCB3aWxsIHJlc3VsdCBpbiBtZW1vcnkgaXNzdWVzXG5cdCAqIGFzIGlubmVyIE9ic2VydmFibGVzIGFtYXNzIGluIGFuIHVuYm91bmRlZCBidWZmZXIgd2FpdGluZyBmb3IgdGhlaXIgdHVybiB0b1xuXHQgKiBiZSBzdWJzY3JpYmVkIHRvLlxuXHQgKlxuXHQgKiBOb3RlOiBgY29uY2F0TWFwVG9gIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlTWFwVG9gIHdpdGggY29uY3VycmVuY3kgcGFyYW1ldGVyXG5cdCAqIHNldCB0byBgMWAuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkZvciBlYWNoIGNsaWNrIGV2ZW50LCB0aWNrIGV2ZXJ5IHNlY29uZCBmcm9tIDAgdG8gMywgd2l0aCBubyBjb25jdXJyZW5jeTwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5jb25jYXRNYXBUbyhSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCkpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXR9XG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbm5lck9ic2VydmFibGUgQW4gT2JzZXJ2YWJsZSB0byByZXBsYWNlIGVhY2ggdmFsdWUgZnJvbVxuXHQgKiB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cblx0ICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuXHQgKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuXHQgKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG5cdCAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBvZiB2YWx1ZXMgbWVyZ2VkIHRvZ2V0aGVyIGJ5IGpvaW5pbmcgdGhlXG5cdCAqIHBhc3NlZCBvYnNlcnZhYmxlIHdpdGggaXRzZWxmLCBvbmUgYWZ0ZXIgdGhlIG90aGVyLCBmb3IgZWFjaCB2YWx1ZSBlbWl0dGVkXG5cdCAqIGZyb20gdGhlIHNvdXJjZS5cblx0ICogQG1ldGhvZCBjb25jYXRNYXBUb1xuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY29uY2F0TWFwVG8oaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgbWVyZ2VNYXBUb18xLk1lcmdlTWFwVG9PcGVyYXRvcihpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yLCAxKSk7XG5cdH1cblx0ZXhwb3J0cy5jb25jYXRNYXBUbyA9IGNvbmNhdE1hcFRvO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY0KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NSk7XG5cdC8qKlxuXHQgKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgc2FtZSBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBtdWx0aXBsZVxuXHQgKiB0aW1lcyBpbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIG1lcmdlTWFwfSwgYnV0IG1hcHMgZWFjaCB2YWx1ZSBhbHdheXNcblx0ICogdG8gdGhlIHNhbWUgaW5uZXIgT2JzZXJ2YWJsZS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvbWVyZ2VNYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogTWFwcyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgZ2l2ZW4gT2JzZXJ2YWJsZSBgaW5uZXJPYnNlcnZhYmxlYCByZWdhcmRsZXNzXG5cdCAqIG9mIHRoZSBzb3VyY2UgdmFsdWUsIGFuZCB0aGVuIG1lcmdlcyB0aG9zZSByZXN1bHRpbmcgT2JzZXJ2YWJsZXMgaW50byBvbmVcblx0ICogc2luZ2xlIE9ic2VydmFibGUsIHdoaWNoIGlzIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Rm9yIGVhY2ggY2xpY2sgZXZlbnQsIHN0YXJ0IGFuIGludGVydmFsIE9ic2VydmFibGUgdGlja2luZyBldmVyeSAxIHNlY29uZDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5tZXJnZU1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2V9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbm5lck9ic2VydmFibGUgQW4gT2JzZXJ2YWJsZSB0byByZXBsYWNlIGVhY2ggdmFsdWUgZnJvbVxuXHQgKiB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cblx0ICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuXHQgKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuXHQgKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG5cdCAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcblx0ICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCAoYW5kIG9wdGlvbmFsbHkgdHJhbnNmb3JtZWQgdGhyb3VnaCBgcmVzdWx0U2VsZWN0b3JgKSBldmVyeVxuXHQgKiB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgbWVyZ2VNYXBUb1xuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VNYXBUbyhpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG5cdCAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cblx0ICAgIGlmICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgY29uY3VycmVudCA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHJlc3VsdFNlbGVjdG9yID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1lcmdlTWFwVG9PcGVyYXRvcihpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSk7XG5cdH1cblx0ZXhwb3J0cy5tZXJnZU1hcFRvID0gbWVyZ2VNYXBUbztcblx0Ly8gVE9ETzogRmlndXJlIG91dCBjb3JyZWN0IHNpZ25hdHVyZSBoZXJlOiBhbiBPcGVyYXRvcjxPYnNlcnZhYmxlPFQ+LCBSPlxuXHQvLyAgICAgICBuZWVkcyB0byBpbXBsZW1lbnQgY2FsbChvYnNlcnZlcjogU3Vic2NyaWJlcjxSPik6IFN1YnNjcmliZXI8T2JzZXJ2YWJsZTxUPj5cblx0dmFyIE1lcmdlTWFwVG9PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNZXJnZU1hcFRvT3BlcmF0b3IoaXNoLCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuXHQgICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuXHQgICAgICAgIHRoaXMuaXNoID0gaXNoO1xuXHQgICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuXHQgICAgfVxuXHQgICAgTWVyZ2VNYXBUb09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1lcmdlTWFwVG9TdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLmlzaCwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5jb25jdXJyZW50KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1lcmdlTWFwVG9PcGVyYXRvcjtcblx0fSgpKTtcblx0ZXhwb3J0cy5NZXJnZU1hcFRvT3BlcmF0b3IgPSBNZXJnZU1hcFRvT3BlcmF0b3I7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIE1lcmdlTWFwVG9TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhNZXJnZU1hcFRvU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1lcmdlTWFwVG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBpc2gsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG5cdCAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuaXNoID0gaXNoO1xuXHQgICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gdGhpcy5yZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuXHQgICAgICAgICAgICB2YXIgaXNoID0gdGhpcy5pc2g7XG5cdCAgICAgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgICAgIHRoaXMuYWN0aXZlKys7XG5cdCAgICAgICAgICAgIHRoaXMuX2lubmVyU3ViKGlzaCwgZGVzdGluYXRpb24sIHJlc3VsdFNlbGVjdG9yLCB2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAoaXNoLCBkZXN0aW5hdGlvbiwgcmVzdWx0U2VsZWN0b3IsIHZhbHVlLCBpbmRleCkge1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgaXNoLCB2YWx1ZSwgaW5kZXgpKTtcblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmIChyZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICB0aGlzLnRyeVNlbGVjdFJlc3VsdChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS50cnlTZWxlY3RSZXN1bHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgfTtcblx0ICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcblx0ICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUtLTtcblx0ICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1lcmdlTWFwVG9TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLk1lcmdlTWFwVG9TdWJzY3JpYmVyID0gTWVyZ2VNYXBUb1N1YnNjcmliZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGNvdW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2Mik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb3VudCA9IGNvdW50XzEuY291bnQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdC8qKlxuXHQgKiBDb3VudHMgdGhlIG51bWJlciBvZiBlbWlzc2lvbnMgb24gdGhlIHNvdXJjZSBhbmQgZW1pdHMgdGhhdCBudW1iZXIgd2hlbiB0aGVcblx0ICogc291cmNlIGNvbXBsZXRlcy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlRlbGxzIGhvdyBtYW55IHZhbHVlcyB3ZXJlIGVtaXR0ZWQsIHdoZW4gdGhlIHNvdXJjZVxuXHQgKiBjb21wbGV0ZXMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2NvdW50LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBgY291bnRgIHRyYW5zZm9ybXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHZhbHVlcyBpbnRvIGFuIE9ic2VydmFibGUgdGhhdFxuXHQgKiBlbWl0cyBhIHNpbmdsZSB2YWx1ZSB0aGF0IHJlcHJlc2VudHMgdGhlIG51bWJlciBvZiB2YWx1ZXMgZW1pdHRlZCBieSB0aGVcblx0ICogc291cmNlIE9ic2VydmFibGUuIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0ZXJtaW5hdGVzIHdpdGggYW4gZXJyb3IsIGBjb3VudGBcblx0ICogd2lsbCBwYXNzIHRoaXMgZXJyb3Igbm90aWZpY2F0aW9uIGFsb25nIHdpdGhvdXQgZW1pdHRpbmcgYW4gdmFsdWUgZmlyc3QuIElmXG5cdCAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBkb2VzIG5vdCB0ZXJtaW5hdGUgYXQgYWxsLCBgY291bnRgIHdpbGwgbmVpdGhlciBlbWl0XG5cdCAqIGEgdmFsdWUgbm9yIHRlcm1pbmF0ZS4gVGhpcyBvcGVyYXRvciB0YWtlcyBhbiBvcHRpb25hbCBgcHJlZGljYXRlYCBmdW5jdGlvblxuXHQgKiBhcyBhcmd1bWVudCwgaW4gd2hpY2ggY2FzZSB0aGUgb3V0cHV0IGVtaXNzaW9uIHdpbGwgcmVwcmVzZW50IHRoZSBudW1iZXIgb2Zcblx0ICogc291cmNlIHZhbHVlcyB0aGF0IG1hdGNoZWQgYHRydWVgIHdpdGggdGhlIGBwcmVkaWNhdGVgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db3VudHMgaG93IG1hbnkgc2Vjb25kcyBoYXZlIHBhc3NlZCBiZWZvcmUgdGhlIGZpcnN0IGNsaWNrIGhhcHBlbmVkPC9jYXB0aW9uPlxuXHQgKiB2YXIgc2Vjb25kcyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBzZWNvbmRzQmVmb3JlQ2xpY2sgPSBzZWNvbmRzLnRha2VVbnRpbChjbGlja3MpO1xuXHQgKiB2YXIgcmVzdWx0ID0gc2Vjb25kc0JlZm9yZUNsaWNrLmNvdW50KCk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkNvdW50cyBob3cgbWFueSBvZGQgbnVtYmVycyBhcmUgdGhlcmUgYmV0d2VlbiAxIGFuZCA3PC9jYXB0aW9uPlxuXHQgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgNyk7XG5cdCAqIHZhciByZXN1bHQgPSBudW1iZXJzLmNvdW50KGkgPT4gaSAlIDIgPT09IDEpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXh9XG5cdCAqIEBzZWUge0BsaW5rIG1pbn1cblx0ICogQHNlZSB7QGxpbmsgcmVkdWNlfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpOiBudW1iZXIsIHNvdXJjZTogT2JzZXJ2YWJsZTxUPik6IGJvb2xlYW59IFtwcmVkaWNhdGVdIEFcblx0ICogYm9vbGVhbiBmdW5jdGlvbiB0byBzZWxlY3Qgd2hhdCB2YWx1ZXMgYXJlIHRvIGJlIGNvdW50ZWQuIEl0IGlzIHByb3ZpZGVkIHdpdGhcblx0ICogYXJndW1lbnRzIG9mOlxuXHQgKiAtIGB2YWx1ZWA6IHRoZSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogLSBgaW5kZXhgOiB0aGUgKHplcm8tYmFzZWQpIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIC0gYHNvdXJjZWA6IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpbnN0YW5jZSBpdHNlbGYuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2Ygb25lIG51bWJlciB0aGF0IHJlcHJlc2VudHMgdGhlIGNvdW50IGFzXG5cdCAqIGRlc2NyaWJlZCBhYm92ZS5cblx0ICogQG1ldGhvZCBjb3VudFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gY291bnQocHJlZGljYXRlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBDb3VudE9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpcykpO1xuXHR9XG5cdGV4cG9ydHMuY291bnQgPSBjb3VudDtcblx0dmFyIENvdW50T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQ291bnRPcGVyYXRvcihwcmVkaWNhdGUsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgQ291bnRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IENvdW50U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQ291bnRPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQ291bnRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIGlmICh0aGlzLnByZWRpY2F0ZSkge1xuXHQgICAgICAgICAgICB0aGlzLl90cnlQcmVkaWNhdGUodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4KyssIHRoaXMuc291cmNlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgICAgICB0aGlzLmNvdW50Kys7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIENvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmNvdW50KTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIENvdW50U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1jb3VudC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgZGVtYXRlcmlhbGl6ZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NjQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVtYXRlcmlhbGl6ZSA9IGRlbWF0ZXJpYWxpemVfMS5kZW1hdGVyaWFsaXplO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kZW1hdGVyaWFsaXplLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCB0cmFuc2Zvcm1zIE5vdGlmaWNhdGlvbiBvYmplY3RzIGludG8gdGhlIGl0ZW1zIG9yIG5vdGlmaWNhdGlvbnMgdGhleSByZXByZXNlbnQuXG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIE5vdGlmaWNhdGlvbn1cblx0ICpcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGFuZCBub3RpZmljYXRpb25zIGVtYmVkZGVkIGluIE5vdGlmaWNhdGlvbiBvYmplY3RzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIGRlbWF0ZXJpYWxpemVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlbWF0ZXJpYWxpemUoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZU1hdGVyaWFsaXplT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5kZW1hdGVyaWFsaXplID0gZGVtYXRlcmlhbGl6ZTtcblx0dmFyIERlTWF0ZXJpYWxpemVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZU1hdGVyaWFsaXplT3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBEZU1hdGVyaWFsaXplT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlTWF0ZXJpYWxpemVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICB9XG5cdCAgICBEZU1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YWx1ZS5vYnNlcnZlKHRoaXMuZGVzdGluYXRpb24pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kZW1hdGVyaWFsaXplLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBkZWJvdW5jZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NjYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVib3VuY2UgPSBkZWJvdW5jZV8xLmRlYm91bmNlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY0KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBkZWxheWVkIGJ5IHRoZSBjb21wdXRlZCBkZWJvdW5jZSBkdXJhdGlvbixcblx0ICogd2l0aCB0aGUgZHVyYXRpb24gbGVuZ3RoZW5lZCBpZiBhIG5ldyBzb3VyY2UgaXRlbSBhcnJpdmVzIGJlZm9yZSB0aGUgZGVsYXlcblx0ICogZHVyYXRpb24gZW5kcy5cblx0ICogSW4gcHJhY3RpY2UsIGZvciBlYWNoIGl0ZW0gZW1pdHRlZCBvbiB0aGUgc291cmNlLCB0aGlzIG9wZXJhdG9yIGhvbGRzIHRoZVxuXHQgKiBsYXRlc3QgaXRlbSwgd2FpdHMgZm9yIGEgc2lsZW5jZSBhcyBsb25nIGFzIHRoZSBgZHVyYXRpb25TZWxlY3RvcmAgc3BlY2lmaWVzLFxuXHQgKiBhbmQgb25seSB0aGVuIGVtaXRzIHRoZSBsYXRlc3Qgc291cmNlIGl0ZW0gb24gdGhlIHJlc3VsdCBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBkdXJhdGlvblNlbGVjdG9yIGZ1bmN0aW9uIGZvciBjb21wdXRpbmcgdGhlIHRpbWVvdXQgZHVyYXRpb24gZm9yIGVhY2ggaXRlbS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGUgc2FtZSBhcyBzb3VyY2UgT2JzZXJ2YWJsZSwgYnV0IGRyb3BzIGl0ZW1zLlxuXHQgKiBAbWV0aG9kIGRlYm91bmNlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWJvdW5jZShkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWJvdW5jZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmRlYm91bmNlID0gZGVib3VuY2U7XG5cdHZhciBEZWJvdW5jZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBEZWJvdW5jZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVib3VuY2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWJvdW5jZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlYm91bmNlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5kdXJhdGlvblNlbGVjdG9yLmNhbGwodGhpcywgdmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlLCByZXN1bHQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBkdXJhdGlvbikge1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGR1cmF0aW9uKTtcblx0ICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG5cdCAgICB9O1xuXHQgICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZVN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBkZWJvdW5jZVRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDY4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlYm91bmNlVGltZSA9IGRlYm91bmNlVGltZV8xLmRlYm91bmNlVGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVib3VuY2VUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBhc3luY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHQvKipcblx0ICogUmV0dXJucyB0aGUgc291cmNlIE9ic2VydmFibGUgZGVsYXllZCBieSB0aGUgY29tcHV0ZWQgZGVib3VuY2UgZHVyYXRpb24sXG5cdCAqIHdpdGggdGhlIGR1cmF0aW9uIGxlbmd0aGVuZWQgaWYgYSBuZXcgc291cmNlIGl0ZW0gYXJyaXZlcyBiZWZvcmUgdGhlIGRlbGF5XG5cdCAqIGR1cmF0aW9uIGVuZHMuXG5cdCAqIEluIHByYWN0aWNlLCBmb3IgZWFjaCBpdGVtIGVtaXR0ZWQgb24gdGhlIHNvdXJjZSwgdGhpcyBvcGVyYXRvciBob2xkcyB0aGVcblx0ICogbGF0ZXN0IGl0ZW0sIHdhaXRzIGZvciBhIHNpbGVuY2UgZm9yIHRoZSBgZHVlVGltZWAgbGVuZ3RoLCBhbmQgb25seSB0aGVuXG5cdCAqIGVtaXRzIHRoZSBsYXRlc3Qgc291cmNlIGl0ZW0gb24gdGhlIHJlc3VsdCBPYnNlcnZhYmxlLlxuXHQgKiBPcHRpb25hbGx5IHRha2VzIGEgc2NoZWR1bGVyIGZvciBtYW5naW5nIHRpbWVycy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGR1ZVRpbWUgdGhlIHRpbWVvdXQgdmFsdWUgZm9yIHRoZSB3aW5kb3cgb2YgdGltZSByZXF1aXJlZCB0byBub3QgZHJvcCB0aGUgaXRlbS5cblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIHRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSB0aW1lb3V0IGZvciBlYWNoIGl0ZW0uXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhlIHNhbWUgYXMgc291cmNlIE9ic2VydmFibGUsIGJ1dCBkcm9wcyBpdGVtcy5cblx0ICogQG1ldGhvZCBkZWJvdW5jZVRpbWVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlVGltZShkdWVUaW1lLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWJvdW5jZVRpbWVPcGVyYXRvcihkdWVUaW1lLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmRlYm91bmNlVGltZSA9IGRlYm91bmNlVGltZTtcblx0dmFyIERlYm91bmNlVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZU9wZXJhdG9yKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBEZWJvdW5jZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlYm91bmNlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdWVUaW1lLCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWJvdW5jZVRpbWVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRGVib3VuY2VUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVib3VuY2VUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmR1ZVRpbWUgPSBkdWVUaW1lO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgRGVib3VuY2VUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmNsZWFyRGVib3VuY2UoKTtcblx0ICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1ZVRpbWUsIHRoaXMpKTtcblx0ICAgIH07XG5cdCAgICBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5kZWJvdW5jZWROZXh0KCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmRlYm91bmNlZE5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5jbGVhckRlYm91bmNlKCk7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTtcblx0ICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyRGVib3VuY2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmIChkZWJvdW5jZWRTdWJzY3JpcHRpb24gIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUoZGVib3VuY2VkU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgZGVib3VuY2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERlYm91bmNlVGltZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0ZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KHN1YnNjcmliZXIpIHtcblx0ICAgIHN1YnNjcmliZXIuZGVib3VuY2VkTmV4dCgpO1xuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlVGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ2OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgZGVmYXVsdElmRW1wdHlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlZmF1bHRJZkVtcHR5ID0gZGVmYXVsdElmRW1wdHlfMS5kZWZhdWx0SWZFbXB0eTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmYXVsdElmRW1wdHkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBlbGVtZW50cyBvZiB0aGUgc291cmNlIG9yIGEgc3BlY2lmaWVkIGRlZmF1bHQgdmFsdWUgaWYgZW1wdHkuXG5cdCAqIEBwYXJhbSB7YW55fSBkZWZhdWx0VmFsdWUgdGhlIGRlZmF1bHQgdmFsdWUgdXNlZCBpZiBzb3VyY2UgaXMgZW1wdHk7IGRlZmF1bHRzIHRvIG51bGwuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgb2YgdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHdoZXJlIGVtcHR5IHZhbHVlcyBhcmUgcmVwbGFjZWQgYnkgdGhlIHNwZWNpZmllZCBkZWZhdWx0IHZhbHVlIG9yIG51bGwuXG5cdCAqIEBtZXRob2QgZGVmYXVsdElmRW1wdHlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlZmF1bHRJZkVtcHR5KGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7IGRlZmF1bHRWYWx1ZSA9IG51bGw7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERlZmF1bHRJZkVtcHR5T3BlcmF0b3IoZGVmYXVsdFZhbHVlKSk7XG5cdH1cblx0ZXhwb3J0cy5kZWZhdWx0SWZFbXB0eSA9IGRlZmF1bHRJZkVtcHR5O1xuXHR2YXIgRGVmYXVsdElmRW1wdHlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yKGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgfVxuXHQgICAgRGVmYXVsdElmRW1wdHlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlZmF1bHRWYWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgIHRoaXMuaXNFbXB0eSA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5pc0VtcHR5KSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmRlZmF1bHRWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRJZkVtcHR5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBkZWxheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NzIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVsYXkgPSBkZWxheV8xLmRlbGF5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kZWxheS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ3MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBhc3luY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHR2YXIgaXNEYXRlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyNik7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgTm90aWZpY2F0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4OCk7XG5cdC8qKlxuXHQgKiBEZWxheXMgdGhlIGVtaXNzaW9uIG9mIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGEgZ2l2ZW4gdGltZW91dCBvclxuXHQgKiB1bnRpbCBhIGdpdmVuIERhdGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5UaW1lIHNoaWZ0cyBlYWNoIGl0ZW0gYnkgc29tZSBzcGVjaWZpZWQgYW1vdW50IG9mXG5cdCAqIG1pbGxpc2Vjb25kcy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvZGVsYXkucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIElmIHRoZSBkZWxheSBhcmd1bWVudCBpcyBhIE51bWJlciwgdGhpcyBvcGVyYXRvciB0aW1lIHNoaWZ0cyB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgYnkgdGhhdCBhbW91bnQgb2YgdGltZSBleHByZXNzZWQgaW4gbWlsbGlzZWNvbmRzLiBUaGUgcmVsYXRpdmVcblx0ICogdGltZSBpbnRlcnZhbHMgYmV0d2VlbiB0aGUgdmFsdWVzIGFyZSBwcmVzZXJ2ZWQuXG5cdCAqXG5cdCAqIElmIHRoZSBkZWxheSBhcmd1bWVudCBpcyBhIERhdGUsIHRoaXMgb3BlcmF0b3IgdGltZSBzaGlmdHMgdGhlIHN0YXJ0IG9mIHRoZVxuXHQgKiBPYnNlcnZhYmxlIGV4ZWN1dGlvbiB1bnRpbCB0aGUgZ2l2ZW4gZGF0ZSBvY2N1cnMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkRlbGF5IGVhY2ggY2xpY2sgYnkgb25lIHNlY29uZDwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXkoMTAwMCk7IC8vIGVhY2ggY2xpY2sgZW1pdHRlZCBhZnRlciAxIHNlY29uZFxuXHQgKiBkZWxheWVkQ2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RGVsYXkgYWxsIGNsaWNrcyB1bnRpbCBhIGZ1dHVyZSBkYXRlIGhhcHBlbnM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBkYXRlID0gbmV3IERhdGUoJ01hcmNoIDE1LCAyMDUwIDEyOjAwOjAwJyk7IC8vIGluIHRoZSBmdXR1cmVcblx0ICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXkoZGF0ZSk7IC8vIGNsaWNrIGVtaXR0ZWQgb25seSBhZnRlciB0aGF0IGRhdGVcblx0ICogZGVsYXllZENsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cblx0ICogQHNlZSB7QGxpbmsgZGVsYXlXaGVufVxuXHQgKlxuXHQgKiBAcGFyYW0ge251bWJlcnxEYXRlfSBkZWxheSBUaGUgZGVsYXkgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIChhIGBudW1iZXJgKSBvclxuXHQgKiBhIGBEYXRlYCB1bnRpbCB3aGljaCB0aGUgZW1pc3Npb24gb2YgdGhlIHNvdXJjZSBpdGVtcyBpcyBkZWxheWVkLlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yXG5cdCAqIG1hbmFnaW5nIHRoZSB0aW1lcnMgdGhhdCBoYW5kbGUgdGhlIHRpbWUtc2hpZnQgZm9yIGVhY2ggaXRlbS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGRlbGF5cyB0aGUgZW1pc3Npb25zIG9mIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSBieSB0aGUgc3BlY2lmaWVkIHRpbWVvdXQgb3IgRGF0ZS5cblx0ICogQG1ldGhvZCBkZWxheVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZGVsYXkoZGVsYXksIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgIHZhciBhYnNvbHV0ZURlbGF5ID0gaXNEYXRlXzEuaXNEYXRlKGRlbGF5KTtcblx0ICAgIHZhciBkZWxheUZvciA9IGFic29sdXRlRGVsYXkgPyAoK2RlbGF5IC0gc2NoZWR1bGVyLm5vdygpKSA6IE1hdGguYWJzKGRlbGF5KTtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERlbGF5T3BlcmF0b3IoZGVsYXlGb3IsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMuZGVsYXkgPSBkZWxheTtcblx0dmFyIERlbGF5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gRGVsYXlPcGVyYXRvcihkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgRGVsYXlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlbGF5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5LCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWxheU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBEZWxheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKERlbGF5U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlbGF5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXksIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5lcnJvcmVkID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBEZWxheVN1YnNjcmliZXIuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgc291cmNlID0gc3RhdGUuc291cmNlO1xuXHQgICAgICAgIHZhciBxdWV1ZSA9IHNvdXJjZS5xdWV1ZTtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gc3RhdGUuc2NoZWR1bGVyO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHN0YXRlLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwICYmIChxdWV1ZVswXS50aW1lIC0gc2NoZWR1bGVyLm5vdygpKSA8PSAwKSB7XG5cdCAgICAgICAgICAgIHF1ZXVlLnNoaWZ0KCkubm90aWZpY2F0aW9uLm9ic2VydmUoZGVzdGluYXRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICB2YXIgZGVsYXlfMSA9IE1hdGgubWF4KDAsIHF1ZXVlWzBdLnRpbWUgLSBzY2hlZHVsZXIubm93KCkpO1xuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBkZWxheV8xKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHNvdXJjZS5hY3RpdmUgPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShEZWxheVN1YnNjcmliZXIuZGlzcGF0Y2gsIHRoaXMuZGVsYXksIHtcblx0ICAgICAgICAgICAgc291cmNlOiB0aGlzLCBkZXN0aW5hdGlvbjogdGhpcy5kZXN0aW5hdGlvbiwgc2NoZWR1bGVyOiBzY2hlZHVsZXJcblx0ICAgICAgICB9KSk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcblx0ICAgICAgICBpZiAodGhpcy5lcnJvcmVkID09PSB0cnVlKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuXHQgICAgICAgIHZhciBtZXNzYWdlID0gbmV3IERlbGF5TWVzc2FnZShzY2hlZHVsZXIubm93KCkgKyB0aGlzLmRlbGF5LCBub3RpZmljYXRpb24pO1xuXHQgICAgICAgIHRoaXMucXVldWUucHVzaChtZXNzYWdlKTtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKHNjaGVkdWxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLnF1ZXVlID0gW107XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgfTtcblx0ICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVOb3RpZmljYXRpb24oTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWxheVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0dmFyIERlbGF5TWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZWxheU1lc3NhZ2UodGltZSwgbm90aWZpY2F0aW9uKSB7XG5cdCAgICAgICAgdGhpcy50aW1lID0gdGltZTtcblx0ICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBEZWxheU1lc3NhZ2U7XG5cdH0oKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBkZWxheVdoZW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDc0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlbGF5V2hlbiA9IGRlbGF5V2hlbl8xLmRlbGF5V2hlbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXlXaGVuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbiBvZiBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZVxuXHQgKiBieSBhIHN1YnNjcmlwdGlvbiBkZWxheSBhbmQgYSBkZWxheSBzZWxlY3RvciBmdW5jdGlvbiBmb3IgZWFjaCBlbGVtZW50LlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBmdW5jdGlvbiB0byByZXRyaWV2ZSBhIHNlcXVlbmNlIGluZGljYXRpbmcgdGhlIGRlbGF5IGZvciBlYWNoIGdpdmVuIGVsZW1lbnQuXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc2VxdWVuY2UgaW5kaWNhdGluZyB0aGUgZGVsYXkgZm9yIHRoZSBzdWJzY3JpcHRpb24gdG8gdGhlIHNvdXJjZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGRlbGF5cyB0aGUgZW1pc3Npb25zIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSB0aGUgc3BlY2lmaWVkIHRpbWVvdXQgb3IgRGF0ZS5cblx0ICogQG1ldGhvZCBkZWxheVdoZW5cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGRlbGF5V2hlbihkZWxheUR1cmF0aW9uU2VsZWN0b3IsIHN1YnNjcmlwdGlvbkRlbGF5KSB7XG5cdCAgICBpZiAoc3Vic2NyaXB0aW9uRGVsYXkpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSh0aGlzLCBzdWJzY3JpcHRpb25EZWxheSlcblx0ICAgICAgICAgICAgLmxpZnQobmV3IERlbGF5V2hlbk9wZXJhdG9yKGRlbGF5RHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5kZWxheVdoZW4gPSBkZWxheVdoZW47XG5cdHZhciBEZWxheVdoZW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEZWxheVdoZW5PcGVyYXRvcihkZWxheUR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvciA9IGRlbGF5RHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIERlbGF5V2hlbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVsYXlXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWxheVdoZW5PcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRGVsYXlXaGVuU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGVsYXlXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIERlbGF5V2hlblN1YnNjcmliZXIoZGVzdGluYXRpb24sIGRlbGF5RHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvciA9IGRlbGF5RHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMgPSBbXTtcblx0ICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuXHQgICAgfVxuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChvdXRlclZhbHVlKTtcblx0ICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmlwdGlvbihpbm5lclN1Yik7XG5cdCAgICAgICAgdGhpcy50cnlDb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcblx0ICAgIH07XG5cdCAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKGlubmVyU3ViKTtcblx0ICAgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy50cnlDb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdmFyIGRlbGF5Tm90aWZpZXIgPSB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3Rvcih2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChkZWxheU5vdGlmaWVyKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnRyeURlbGF5KGRlbGF5Tm90aWZpZXIsIHZhbHVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUucmVtb3ZlU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb25JZHggPSB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICB2YXIgdmFsdWUgPSBudWxsO1xuXHQgICAgICAgIGlmIChzdWJzY3JpcHRpb25JZHggIT09IC0xKSB7XG5cdCAgICAgICAgICAgIHZhbHVlID0gdGhpcy52YWx1ZXNbc3Vic2NyaXB0aW9uSWR4XTtcblx0ICAgICAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5zcGxpY2Uoc3Vic2NyaXB0aW9uSWR4LCAxKTtcblx0ICAgICAgICAgICAgdGhpcy52YWx1ZXMuc3BsaWNlKHN1YnNjcmlwdGlvbklkeCwgMSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH07XG5cdCAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS50cnlEZWxheSA9IGZ1bmN0aW9uIChkZWxheU5vdGlmaWVyLCB2YWx1ZSkge1xuXHQgICAgICAgIHZhciBub3RpZmllclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgZGVsYXlOb3RpZmllciwgdmFsdWUpO1xuXHQgICAgICAgIHRoaXMuYWRkKG5vdGlmaWVyU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLnB1c2gobm90aWZpZXJTdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIHRoaXMudmFsdWVzLnB1c2godmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLnRyeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCAmJiB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBEZWxheVdoZW5TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTdWJzY3JpcHRpb25EZWxheU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZShzb3VyY2UsIHN1YnNjcmlwdGlvbkRlbGF5KSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25EZWxheSA9IHN1YnNjcmlwdGlvbkRlbGF5O1xuXHQgICAgfVxuXHQgICAgU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcblx0ICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkRlbGF5LnN1YnNjcmliZShuZXcgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuc291cmNlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlcihwYXJlbnQsIHNvdXJjZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuc291cmNlU3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh1bnVzZWQpIHtcblx0ICAgICAgICB0aGlzLnN1YnNjcmliZVRvU291cmNlKCk7XG5cdCAgICB9O1xuXHQgICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgIHRoaXMucGFyZW50LmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1NvdXJjZSgpO1xuXHQgICAgfTtcblx0ICAgIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuc3Vic2NyaWJlVG9Tb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLnNvdXJjZVN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5zb3VyY2VTdWJzY3JpYmVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUodGhpcy5wYXJlbnQpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGF5V2hlbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgZGlzdGluY3RVbnRpbENoYW5nZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDc2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRpc3RpbmN0VW50aWxDaGFuZ2VkID0gZGlzdGluY3RVbnRpbENoYW5nZWRfMS5kaXN0aW5jdFVudGlsQ2hhbmdlZDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3RVbnRpbENoYW5nZWQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFsbCBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IGFyZSBkaXN0aW5jdCBieSBjb21wYXJpc29uIGZyb20gdGhlIHByZXZpb3VzIGl0ZW0uXG5cdCAqIElmIGEgY29tcGFyYXRvciBmdW5jdGlvbiBpcyBwcm92aWRlZCwgdGhlbiBpdCB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBpdGVtIHRvIHRlc3QgZm9yIHdoZXRoZXIgb3Igbm90IHRoYXQgdmFsdWUgc2hvdWxkIGJlIGVtaXR0ZWQuXG5cdCAqIElmIGEgY29tcGFyYXRvciBmdW5jdGlvbiBpcyBub3QgcHJvdmlkZWQsIGFuIGVxdWFsaXR5IGNoZWNrIGlzIHVzZWQgYnkgZGVmYXVsdC5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gW2NvbXBhcmVdIG9wdGlvbmFsIGNvbXBhcmlzb24gZnVuY3Rpb24gY2FsbGVkIHRvIHRlc3QgaWYgYW4gaXRlbSBpcyBkaXN0aW5jdCBmcm9tIHRoZSBwcmV2aW91cyBpdGVtIGluIHRoZSBzb3VyY2UuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aXRoIGRpc3RpbmN0IHZhbHVlcy5cblx0ICogQG1ldGhvZCBkaXN0aW5jdFVudGlsQ2hhbmdlZFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZGlzdGluY3RVbnRpbENoYW5nZWQoY29tcGFyZSwga2V5U2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IoY29tcGFyZSwga2V5U2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmRpc3RpbmN0VW50aWxDaGFuZ2VkID0gZGlzdGluY3RVbnRpbENoYW5nZWQ7XG5cdHZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IoY29tcGFyZSwga2V5U2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLmNvbXBhcmUgPSBjb21wYXJlO1xuXHQgICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb21wYXJlLCB0aGlzLmtleVNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb21wYXJlLCBrZXlTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5oYXNLZXkgPSBmYWxzZTtcblx0ICAgICAgICBpZiAodHlwZW9mIGNvbXBhcmUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgdGhpcy5jb21wYXJlID0gY29tcGFyZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiAoeCwgeSkge1xuXHQgICAgICAgIHJldHVybiB4ID09PSB5O1xuXHQgICAgfTtcblx0ICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIga2V5U2VsZWN0b3IgPSB0aGlzLmtleVNlbGVjdG9yO1xuXHQgICAgICAgIHZhciBrZXkgPSB2YWx1ZTtcblx0ICAgICAgICBpZiAoa2V5U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAga2V5ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLmtleVNlbGVjdG9yKSh2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICAgIGlmICh0aGlzLmhhc0tleSkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuY29tcGFyZSkodGhpcy5rZXksIGtleSk7XG5cdCAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuaGFzS2V5ID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKEJvb2xlYW4ocmVzdWx0KSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3RVbnRpbENoYW5nZWQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0NzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGRvXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3OCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kbyA9IGRvXzEuX2RvO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1kby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogUGVyZm9ybSBhIHNpZGUgZWZmZWN0IGZvciBldmVyeSBlbWlzc2lvbiBvbiB0aGUgc291cmNlIE9ic2VydmFibGUsIGJ1dCByZXR1cm5cblx0ICogYW4gT2JzZXJ2YWJsZSB0aGF0IGlzIGlkZW50aWNhbCB0byB0aGUgc291cmNlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SW50ZXJjZXB0cyBlYWNoIGVtaXNzaW9uIG9uIHRoZSBzb3VyY2UgYW5kIHJ1bnMgYVxuXHQgKiBmdW5jdGlvbiwgYnV0IHJldHVybnMgYW4gb3V0cHV0IHdoaWNoIGlzIGlkZW50aWNhbCB0byB0aGUgc291cmNlLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9kby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhIG1pcnJvcmVkIE9ic2VydmFibGUgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgbW9kaWZpZWQgc28gdGhhdFxuXHQgKiB0aGUgcHJvdmlkZWQgT2JzZXJ2ZXIgaXMgY2FsbGVkIHRvIHBlcmZvcm0gYSBzaWRlIGVmZmVjdCBmb3IgZXZlcnkgdmFsdWUsXG5cdCAqIGVycm9yLCBhbmQgY29tcGxldGlvbiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UuIEFueSBlcnJvcnMgdGhhdCBhcmUgdGhyb3duIGluXG5cdCAqIHRoZSBhZm9yZW1lbnRpb25lZCBPYnNlcnZlciBvciBoYW5kbGVycyBhcmUgc2FmZWx5IHNlbnQgZG93biB0aGUgZXJyb3IgcGF0aFxuXHQgKiBvZiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIFRoaXMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgeW91ciBPYnNlcnZhYmxlcyBmb3IgdGhlIGNvcnJlY3QgdmFsdWVzXG5cdCAqIG9yIHBlcmZvcm1pbmcgb3RoZXIgc2lkZSBlZmZlY3RzLlxuXHQgKlxuXHQgKiBOb3RlOiB0aGlzIGlzIGRpZmZlcmVudCB0byBhIGBzdWJzY3JpYmVgIG9uIHRoZSBPYnNlcnZhYmxlLiBJZiB0aGUgT2JzZXJ2YWJsZVxuXHQgKiByZXR1cm5lZCBieSBgZG9gIGlzIG5vdCBzdWJzY3JpYmVkLCB0aGUgc2lkZSBlZmZlY3RzIHNwZWNpZmllZCBieSB0aGVcblx0ICogT2JzZXJ2ZXIgd2lsbCBuZXZlciBoYXBwZW4uIGBkb2AgdGhlcmVmb3JlIHNpbXBseSBzcGllcyBvbiBleGlzdGluZ1xuXHQgKiBleGVjdXRpb24sIGl0IGRvZXMgbm90IHRyaWdnZXIgYW4gZXhlY3V0aW9uIHRvIGhhcHBlbiBsaWtlIGBzdWJzY3JpYmVgIGRvZXMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgY2xpZW50WCBwb3NpdGlvbiBvZiB0aGF0IGNsaWNrLCB3aGlsZSBhbHNvIGxvZ2dpbmcgdGhlIGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcG9zaXRpb25zID0gY2xpY2tzXG5cdCAqICAgLmRvKGV2ID0+IGNvbnNvbGUubG9nKGV2KSlcblx0ICogICAubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuXHQgKiBwb3NpdGlvbnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXB9XG5cdCAqIEBzZWUge0BsaW5rIHN1YnNjcmliZX1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbn0gW25leHRPck9ic2VydmVyXSBBIG5vcm1hbCBPYnNlcnZlciBvYmplY3Qgb3IgYVxuXHQgKiBjYWxsYmFjayBmb3IgYG5leHRgLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBbZXJyb3JdIENhbGxiYWNrIGZvciBlcnJvcnMgaW4gdGhlIHNvdXJjZS5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gW2NvbXBsZXRlXSBDYWxsYmFjayBmb3IgdGhlIGNvbXBsZXRpb24gb2YgdGhlIHNvdXJjZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBpZGVudGljYWwgdG8gdGhlIHNvdXJjZSwgYnV0IHJ1bnMgdGhlXG5cdCAqIHNwZWNpZmllZCBPYnNlcnZlciBvciBjYWxsYmFjayhzKSBmb3IgZWFjaCBpdGVtLlxuXHQgKiBAbWV0aG9kIGRvXG5cdCAqIEBuYW1lIGRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBfZG8obmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRG9PcGVyYXRvcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSk7XG5cdH1cblx0ZXhwb3J0cy5fZG8gPSBfZG87XG5cdHZhciBEb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIERvT3BlcmF0b3IobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuXHQgICAgICAgIHRoaXMubmV4dE9yT2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcblx0ICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlO1xuXHQgICAgfVxuXHQgICAgRG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5leHRPck9ic2VydmVyLCB0aGlzLmVycm9yLCB0aGlzLmNvbXBsZXRlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERvT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIERvU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRG9TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuXHQgICAgICAgIHRoaXMuYWRkKHNhZmVTdWJzY3JpYmVyKTtcblx0ICAgICAgICB0aGlzLnNhZmVTdWJzY3JpYmVyID0gc2FmZVN1YnNjcmliZXI7XG5cdCAgICB9XG5cdCAgICBEb1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHNhZmVTdWJzY3JpYmVyID0gdGhpcy5zYWZlU3Vic2NyaWJlcjtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcblx0ICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Ioc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIHNhZmVTdWJzY3JpYmVyID0gdGhpcy5zYWZlU3Vic2NyaWJlcjtcblx0ICAgICAgICBzYWZlU3Vic2NyaWJlci5lcnJvcihlcnIpO1xuXHQgICAgICAgIGlmIChzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24pIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERvU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IHRoaXMuc2FmZVN1YnNjcmliZXI7XG5cdCAgICAgICAgc2FmZVN1YnNjcmliZXIuY29tcGxldGUoKTtcblx0ICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Ioc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRG9TdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBleHBhbmRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmV4cGFuZCA9IGV4cGFuZF8xLmV4cGFuZDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhwYW5kLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDgwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB3aGVyZSBmb3IgZWFjaCBpdGVtIGluIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgdGhlIHN1cHBsaWVkIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gZWFjaCBpdGVtLFxuXHQgKiByZXN1bHRpbmcgaW4gYSBuZXcgdmFsdWUgdG8gdGhlbiBiZSBhcHBsaWVkIGFnYWluIHdpdGggdGhlIGZ1bmN0aW9uLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9qZWN0IHRoZSBmdW5jdGlvbiBmb3IgcHJvamVjdGluZyB0aGUgbmV4dCBlbWl0dGVkIGl0ZW0gb2YgdGhlIE9ic2VydmFibGUuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudF0gdGhlIG1heCBudW1iZXIgb2Ygb2JzZXJ2YWJsZXMgdGhhdCBjYW4gYmUgY3JlYXRlZCBjb25jdXJyZW50bHkuIGRlZmF1bHRzIHRvIGluZmluaXR5LlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIG1hbmFnaW5nIHRoZSBleHBhbnNpb25zLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIGNvbnRhaW5pbmcgdGhlIGV4cGFuc2lvbnMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIGV4cGFuZFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZXhwYW5kKHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gdW5kZWZpbmVkOyB9XG5cdCAgICBjb25jdXJyZW50ID0gKGNvbmN1cnJlbnQgfHwgMCkgPCAxID8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIDogY29uY3VycmVudDtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEV4cGFuZE9wZXJhdG9yKHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMuZXhwYW5kID0gZXhwYW5kO1xuXHR2YXIgRXhwYW5kT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gRXhwYW5kT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgRXhwYW5kT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBFeHBhbmRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy5jb25jdXJyZW50LCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBFeHBhbmRPcGVyYXRvcjtcblx0fSgpKTtcblx0ZXhwb3J0cy5FeHBhbmRPcGVyYXRvciA9IEV4cGFuZE9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBFeHBhbmRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhFeHBhbmRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRXhwYW5kU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcblx0ICAgICAgICBpZiAoY29uY3VycmVudCA8IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkge1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIEV4cGFuZFN1YnNjcmliZXIuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlciwgcmVzdWx0ID0gYXJnLnJlc3VsdCwgdmFsdWUgPSBhcmcudmFsdWUsIGluZGV4ID0gYXJnLmluZGV4O1xuXHQgICAgICAgIHN1YnNjcmliZXIuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcblx0ICAgIH07XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgaWYgKGRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5wcm9qZWN0KSh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLnNjaGVkdWxlcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1Byb2plY3Rpb24ocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCByZXN1bHQ6IHJlc3VsdCwgdmFsdWU6IHZhbHVlLCBpbmRleDogaW5kZXggfTtcblx0ICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKEV4cGFuZFN1YnNjcmliZXIuZGlzcGF0Y2gsIDAsIHN0YXRlKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5zdWJzY3JpYmVUb1Byb2plY3Rpb24gPSBmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwgaW5kZXgpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgcmVzdWx0LCB2YWx1ZSwgaW5kZXgpKTtcblx0ICAgIH07XG5cdCAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuXHQgICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmFjdGl2ZSA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLl9uZXh0KGlubmVyVmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuXHQgICAgICAgIGlmIChidWZmZXIgJiYgYnVmZmVyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmFjdGl2ZSA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBFeHBhbmRTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHRleHBvcnRzLkV4cGFuZFN1YnNjcmliZXIgPSBFeHBhbmRTdWJzY3JpYmVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1leHBhbmQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGZpbHRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0ODIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmlsdGVyID0gZmlsdGVyXzEuZmlsdGVyO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0LyoqXG5cdCAqIEZpbHRlciBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBvbmx5IGVtaXR0aW5nIHRob3NlIHRoYXRcblx0ICogc2F0aXNmeSBhIHNwZWNpZmllZCBwcmVkaWNhdGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlXG5cdCAqIFtBcnJheS5wcm90b3R5cGUuZmlsdGVyKCldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2ZpbHRlciksXG5cdCAqIGl0IG9ubHkgZW1pdHMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgaWYgaXQgcGFzc2VzIGEgY3JpdGVyaW9uIGZ1bmN0aW9uLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9maWx0ZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFNpbWlsYXIgdG8gdGhlIHdlbGwta25vd24gYEFycmF5LnByb3RvdHlwZS5maWx0ZXJgIG1ldGhvZCwgdGhpcyBvcGVyYXRvclxuXHQgKiB0YWtlcyB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUsIHBhc3NlcyB0aGVtIHRocm91Z2ggYSBgcHJlZGljYXRlYFxuXHQgKiBmdW5jdGlvbiBhbmQgb25seSBlbWl0cyB0aG9zZSB2YWx1ZXMgdGhhdCB5aWVsZGVkIGB0cnVlYC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBvbmx5IGNsaWNrIGV2ZW50cyB3aG9zZSB0YXJnZXQgd2FzIGEgRElWIGVsZW1lbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBjbGlja3NPbkRpdnMgPSBjbGlja3MuZmlsdGVyKGV2ID0+IGV2LnRhcmdldC50YWdOYW1lID09PSAnRElWJyk7XG5cdCAqIGNsaWNrc09uRGl2cy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGRpc3RpbmN0fVxuXHQgKiBAc2VlIHtAbGluayBkaXN0aW5jdEtleX1cblx0ICogQHNlZSB7QGxpbmsgZGlzdGluY3RVbnRpbENoYW5nZWR9XG5cdCAqIEBzZWUge0BsaW5rIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkfVxuXHQgKiBAc2VlIHtAbGluayBpZ25vcmVFbGVtZW50c31cblx0ICogQHNlZSB7QGxpbmsgcGFydGl0aW9ufVxuXHQgKiBAc2VlIHtAbGluayBza2lwfVxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogYm9vbGVhbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdGhhdFxuXHQgKiBldmFsdWF0ZXMgZWFjaCB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgaXQgcmV0dXJucyBgdHJ1ZWAsXG5cdCAqIHRoZSB2YWx1ZSBpcyBlbWl0dGVkLCBpZiBgZmFsc2VgIHRoZSB2YWx1ZSBpcyBub3QgcGFzc2VkIHRvIHRoZSBvdXRwdXRcblx0ICogT2JzZXJ2YWJsZS4gVGhlIGBpbmRleGAgcGFyYW1ldGVyIGlzIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBzb3VyY2Vcblx0ICogZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyXG5cdCAqIGAwYC5cblx0ICogQHBhcmFtIHthbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBhcmd1bWVudCB0byBkZXRlcm1pbmUgdGhlIHZhbHVlIG9mIGB0aGlzYFxuXHQgKiBpbiB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSB0aGF0IHdlcmVcblx0ICogYWxsb3dlZCBieSB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG5cdCAqIEBtZXRob2QgZmlsdGVyXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlLCB0aGlzQXJnKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBGaWx0ZXJPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXNBcmcpKTtcblx0fVxuXHRleHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcblx0dmFyIEZpbHRlck9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEZpbHRlck9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG5cdCAgICB9XG5cdCAgICBGaWx0ZXJPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEZpbHRlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUsIHRoaXMudGhpc0FyZykpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGaWx0ZXJPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRmlsdGVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoRmlsdGVyU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEZpbHRlclN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgfVxuXHQgICAgLy8gdGhlIHRyeSBjYXRjaCBibG9jayBiZWxvdyBpcyBsZWZ0IHNwZWNpZmljYWxseSBmb3Jcblx0ICAgIC8vIG9wdGltaXphdGlvbiBhbmQgcGVyZiByZWFzb25zLiBhIHRyeUNhdGNoZXIgaXMgbm90IG5lY2Vzc2FyeSBoZXJlLlxuXHQgICAgRmlsdGVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5jb3VudCsrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRmlsdGVyU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGZpbmFsbHlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDg0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmZpbmFsbHkgPSBmaW5hbGx5XzEuX2ZpbmFsbHk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmFsbHkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIFN1YnNjcmlwdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYnV0IHdpbGwgY2FsbCBhIHNwZWNpZmllZCBmdW5jdGlvbiB3aGVuXG5cdCAqIHRoZSBzb3VyY2UgdGVybWluYXRlcyBvbiBjb21wbGV0ZSBvciBlcnJvci5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gZmluYWxseVNlbGVjdG9yIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHNvdXJjZSB0ZXJtaW5hdGVzLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgc291cmNlLCBidXQgd2lsbCBjYWxsIHRoZSBzcGVjaWZpZWQgZnVuY3Rpb24gb24gdGVybWluYXRpb24uXG5cdCAqIEBtZXRob2QgZmluYWxseVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gX2ZpbmFsbHkoZmluYWxseVNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBGaW5hbGx5T3BlcmF0b3IoZmluYWxseVNlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5fZmluYWxseSA9IF9maW5hbGx5O1xuXHR2YXIgRmluYWxseU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEZpbmFsbHlPcGVyYXRvcihmaW5hbGx5U2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLmZpbmFsbHlTZWxlY3RvciA9IGZpbmFsbHlTZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIEZpbmFsbHlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEZpbmFsbHlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZmluYWxseVNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEZpbmFsbHlPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRmluYWxseVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEZpbmFsbHlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gRmluYWxseVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGZpbmFsbHlTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKGZpbmFsbHlTZWxlY3RvcikpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIEZpbmFsbHlTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmFsbHkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGZpcnN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4Nik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maXJzdCA9IGZpcnN0XzEuZmlyc3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcnN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDg2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4Nyk7XG5cdC8qKlxuXHQgKiBFbWl0cyBvbmx5IHRoZSBmaXJzdCB2YWx1ZSAob3IgdGhlIGZpcnN0IHZhbHVlIHRoYXQgbWVldHMgc29tZSBjb25kaXRpb24pXG5cdCAqIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RW1pdHMgb25seSB0aGUgZmlyc3QgdmFsdWUuIE9yIGVtaXRzIG9ubHkgdGhlIGZpcnN0XG5cdCAqIHZhbHVlIHRoYXQgcGFzc2VzIHNvbWUgdGVzdC48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvZmlyc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIElmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgYGZpcnN0YCBlbWl0cyB0aGUgZmlyc3QgdmFsdWUgb2YgdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLCB0aGVuIGNvbXBsZXRlcy4gSWYgY2FsbGVkIHdpdGggYSBgcHJlZGljYXRlYCBmdW5jdGlvbiwgYGZpcnN0YFxuXHQgKiBlbWl0cyB0aGUgZmlyc3QgdmFsdWUgb2YgdGhlIHNvdXJjZSB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBjb25kaXRpb24uIEl0XG5cdCAqIG1heSBhbHNvIHRha2UgYSBgcmVzdWx0U2VsZWN0b3JgIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIG91dHB1dCB2YWx1ZSBmcm9tXG5cdCAqIHRoZSBpbnB1dCB2YWx1ZSwgYW5kIGEgYGRlZmF1bHRWYWx1ZWAgdG8gZW1pdCBpbiBjYXNlIHRoZSBzb3VyY2UgY29tcGxldGVzXG5cdCAqIGJlZm9yZSBpdCBpcyBhYmxlIHRvIGVtaXQgYSB2YWxpZCB2YWx1ZS4gVGhyb3dzIGFuIGVycm9yIGlmIGBkZWZhdWx0VmFsdWVgXG5cdCAqIHdhcyBub3QgcHJvdmlkZWQgYW5kIGEgbWF0Y2hpbmcgZWxlbWVudCBpcyBub3QgZm91bmQuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgb25seSB0aGUgZmlyc3QgY2xpY2sgdGhhdCBoYXBwZW5zIG9uIHRoZSBET008L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3MuZmlyc3QoKTtcblx0ICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgdGhlIGZpcnN0IGNsaWNrIHRoYXQgaGFwcGVucyBvbiBhIERJVjwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy5maXJzdChldiA9PiBldi50YXJnZXQudGFnTmFtZSA9PT0gJ0RJVicpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBmaWx0ZXJ9XG5cdCAqIEBzZWUge0BsaW5rIGZpbmR9XG5cdCAqIEBzZWUge0BsaW5rIHRha2V9XG5cdCAqXG5cdCAqIEB0aHJvd3Mge0VtcHR5RXJyb3J9IERlbGl2ZXJzIGFuIEVtcHR5RXJyb3IgdG8gdGhlIE9ic2VydmVyJ3MgYGVycm9yYFxuXHQgKiBjYWxsYmFjayBpZiB0aGUgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgYmVmb3JlIGFueSBgbmV4dGAgbm90aWZpY2F0aW9uIHdhcyBzZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBzb3VyY2U6IE9ic2VydmFibGU8VD4pOiBib29sZWFufSBbcHJlZGljYXRlXVxuXHQgKiBBbiBvcHRpb25hbCBmdW5jdGlvbiBjYWxsZWQgd2l0aCBlYWNoIGl0ZW0gdG8gdGVzdCBmb3IgY29uZGl0aW9uIG1hdGNoaW5nLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogUn0gW3Jlc3VsdFNlbGVjdG9yXSBBIGZ1bmN0aW9uIHRvXG5cdCAqIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG5cdCAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIE9ic2VydmFibGUuIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXNcblx0ICogZnVuY3Rpb24gYXJlOlxuXHQgKiAtIGB2YWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IHdhcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UuXG5cdCAqIC0gYGluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgc291cmNlLlxuXHQgKiBAcGFyYW0ge1J9IFtkZWZhdWx0VmFsdWVdIFRoZSBkZWZhdWx0IHZhbHVlIGVtaXR0ZWQgaW4gY2FzZSBubyB2YWxpZCB2YWx1ZVxuXHQgKiB3YXMgZm91bmQgb24gdGhlIHNvdXJjZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUfFI+fSBhbiBPYnNlcnZhYmxlIG9mIHRoZSBmaXJzdCBpdGVtIHRoYXQgbWF0Y2hlcyB0aGVcblx0ICogY29uZGl0aW9uLlxuXHQgKiBAbWV0aG9kIGZpcnN0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBmaXJzdChwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEZpcnN0T3BlcmF0b3IocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlLCB0aGlzKSk7XG5cdH1cblx0ZXhwb3J0cy5maXJzdCA9IGZpcnN0O1xuXHR2YXIgRmlyc3RPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBGaXJzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG5cdCAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgRmlyc3RPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBGaXJzdFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmRlZmF1bHRWYWx1ZSwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRmlyc3RPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgRmlyc3RTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhGaXJzdFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBGaXJzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgRmlyc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcblx0ICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLl9lbWl0KHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByZWRpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCBpbmRleCwgdGhpcy5zb3VyY2UpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2VtaXQodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRmlyc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fZW1pdCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcblx0ICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgICAgICB0aGlzLl90cnlSZXN1bHRTZWxlY3Rvcih2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX2VtaXRGaW5hbCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgRmlyc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX2VtaXRGaW5hbChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2VtaXRGaW5hbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG5cdCAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgRmlyc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBpZiAoIXRoaXMuaGFzQ29tcGxldGVkICYmIHR5cGVvZiB0aGlzLmRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh0aGlzLmRlZmF1bHRWYWx1ZSk7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKCF0aGlzLmhhc0NvbXBsZXRlZCkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgRW1wdHlFcnJvcl8xLkVtcHR5RXJyb3IpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gRmlyc3RTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcnN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0LyoqXG5cdCAqIEFuIGVycm9yIHRocm93biB3aGVuIGFuIE9ic2VydmFibGUgb3IgYSBzZXF1ZW5jZSB3YXMgcXVlcmllZCBidXQgaGFzIG5vXG5cdCAqIGVsZW1lbnRzLlxuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBmaXJzdH1cblx0ICogQHNlZSB7QGxpbmsgbGFzdH1cblx0ICogQHNlZSB7QGxpbmsgc2luZ2xlfVxuXHQgKlxuXHQgKiBAY2xhc3MgRW1wdHlFcnJvclxuXHQgKi9cblx0dmFyIEVtcHR5RXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEVtcHR5RXJyb3IsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBFbXB0eUVycm9yKCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsICdubyBlbGVtZW50cyBpbiBzZXF1ZW5jZScpO1xuXHQgICAgICAgIHRoaXMubmFtZSA9ICdFbXB0eUVycm9yJztcblx0ICAgIH1cblx0ICAgIHJldHVybiBFbXB0eUVycm9yO1xuXHR9KEVycm9yKSk7XG5cdGV4cG9ydHMuRW1wdHlFcnJvciA9IEVtcHR5RXJyb3I7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUVtcHR5RXJyb3IuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0ODggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGdyb3VwQnlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDg5KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmdyb3VwQnkgPSBncm91cEJ5XzEuZ3JvdXBCeTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JvdXBCeS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ4OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgTWFwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5MCk7XG5cdHZhciBGYXN0TWFwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5Mik7XG5cdC8qKlxuXHQgKiBHcm91cHMgdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZSBhY2NvcmRpbmcgdG8gYSBzcGVjaWZpZWQgY3JpdGVyaW9uLFxuXHQgKiBhbmQgZW1pdHMgdGhlc2UgZ3JvdXBlZCBpdGVtcyBhcyBgR3JvdXBlZE9ic2VydmFibGVzYCwgb25lXG5cdCAqIHtAbGluayBHcm91cGVkT2JzZXJ2YWJsZX0gcGVyIGdyb3VwLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL2dyb3VwQnkucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBLfSBrZXlTZWxlY3RvciBhIGZ1bmN0aW9uIHRoYXQgZXh0cmFjdHMgdGhlIGtleVxuXHQgKiBmb3IgZWFjaCBpdGVtLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogUn0gW2VsZW1lbnRTZWxlY3Rvcl0gYSBmdW5jdGlvbiB0aGF0IGV4dHJhY3RzIHRoZVxuXHQgKiByZXR1cm4gZWxlbWVudCBmb3IgZWFjaCBpdGVtLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKGdyb3VwZWQ6IEdyb3VwZWRPYnNlcnZhYmxlPEssUj4pOiBPYnNlcnZhYmxlPGFueT59IFtkdXJhdGlvblNlbGVjdG9yXVxuXHQgKiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRvIGRldGVybWluZSBob3cgbG9uZyBlYWNoIGdyb3VwIHNob3VsZFxuXHQgKiBleGlzdC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxHcm91cGVkT2JzZXJ2YWJsZTxLLFI+Pn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzXG5cdCAqIEdyb3VwZWRPYnNlcnZhYmxlcywgZWFjaCBvZiB3aGljaCBjb3JyZXNwb25kcyB0byBhIHVuaXF1ZSBrZXkgdmFsdWUgYW5kIGVhY2hcblx0ICogb2Ygd2hpY2ggZW1pdHMgdGhvc2UgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBzaGFyZSB0aGF0IGtleVxuXHQgKiB2YWx1ZS5cblx0ICogQG1ldGhvZCBncm91cEJ5XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBncm91cEJ5KGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEdyb3VwQnlPcGVyYXRvcih0aGlzLCBrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBkdXJhdGlvblNlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5ncm91cEJ5ID0gZ3JvdXBCeTtcblx0dmFyIEdyb3VwQnlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBHcm91cEJ5T3BlcmF0b3Ioc291cmNlLCBrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuZWxlbWVudFNlbGVjdG9yID0gZWxlbWVudFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBHcm91cEJ5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBHcm91cEJ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmtleVNlbGVjdG9yLCB0aGlzLmVsZW1lbnRTZWxlY3RvciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEdyb3VwQnlPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgR3JvdXBCeVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEdyb3VwQnlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gR3JvdXBCeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5lbGVtZW50U2VsZWN0b3IgPSBlbGVtZW50U2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmdyb3VwcyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IDA7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHRoaXMuYWRkKGRlc3RpbmF0aW9uKTtcblx0ICAgIH1cblx0ICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBrZXk7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAga2V5ID0gdGhpcy5rZXlTZWxlY3Rvcih2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX2dyb3VwKHZhbHVlLCBrZXkpO1xuXHQgICAgfTtcblx0ICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZ3JvdXAgPSBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgIHZhciBncm91cHMgPSB0aGlzLmdyb3Vwcztcblx0ICAgICAgICBpZiAoIWdyb3Vwcykge1xuXHQgICAgICAgICAgICBncm91cHMgPSB0aGlzLmdyb3VwcyA9IHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnID8gbmV3IEZhc3RNYXBfMS5GYXN0TWFwKCkgOiBuZXcgTWFwXzEuTWFwKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBncm91cCA9IGdyb3Vwcy5nZXQoa2V5KTtcblx0ICAgICAgICBpZiAoIWdyb3VwKSB7XG5cdCAgICAgICAgICAgIGdyb3Vwcy5zZXQoa2V5LCBncm91cCA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpKTtcblx0ICAgICAgICAgICAgdmFyIGdyb3VwZWRPYnNlcnZhYmxlID0gbmV3IEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgZ3JvdXAsIHRoaXMpO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5kdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3REdXJhdGlvbihrZXksIGdyb3VwKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoZ3JvdXBlZE9ic2VydmFibGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGhpcy5lbGVtZW50U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGhpcy5fc2VsZWN0RWxlbWVudCh2YWx1ZSwgZ3JvdXApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy50cnlHcm91cE5leHQodmFsdWUsIGdyb3VwKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9zZWxlY3RFbGVtZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBncm91cCkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5lbGVtZW50U2VsZWN0b3IodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnRyeUdyb3VwTmV4dChyZXN1bHQsIGdyb3VwKTtcblx0ICAgIH07XG5cdCAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX3NlbGVjdER1cmF0aW9uID0gZnVuY3Rpb24gKGtleSwgZ3JvdXApIHtcblx0ICAgICAgICB2YXIgZHVyYXRpb247XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uU2VsZWN0b3IobmV3IEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgZ3JvdXApKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5hZGQoZHVyYXRpb24uc3Vic2NyaWJlKG5ldyBHcm91cER1cmF0aW9uU3Vic2NyaWJlcihrZXksIGdyb3VwLCB0aGlzKSkpO1xuXHQgICAgfTtcblx0ICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlHcm91cE5leHQgPSBmdW5jdGlvbiAodmFsdWUsIGdyb3VwKSB7XG5cdCAgICAgICAgaWYgKCFncm91cC5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBncm91cC5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7XG5cdCAgICAgICAgaWYgKGdyb3Vwcykge1xuXHQgICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgZ3JvdXAuZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIGdyb3Vwcy5jbGVhcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7XG5cdCAgICAgICAgaWYgKGdyb3Vwcykge1xuXHQgICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgZ3JvdXAuY29tcGxldGUoKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIGdyb3Vwcy5jbGVhcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnJlbW92ZUdyb3VwID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHRoaXMuZ3JvdXBzLmRlbGV0ZShrZXkpO1xuXHQgICAgfTtcblx0ICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNVbnN1YnNjcmliZWQgJiYgIXRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSkge1xuXHQgICAgICAgICAgICB0aGlzLmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUgPSB0cnVlO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBHcm91cEJ5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBHcm91cER1cmF0aW9uU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoR3JvdXBEdXJhdGlvblN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBHcm91cER1cmF0aW9uU3Vic2NyaWJlcihrZXksIGdyb3VwLCBwYXJlbnQpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmtleSA9IGtleTtcblx0ICAgICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XG5cdCAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cdCAgICB9XG5cdCAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLnRyeUVycm9yKGVycik7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLnRyeUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXA7XG5cdCAgICAgICAgaWYgKCFncm91cC5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBncm91cC5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVHcm91cCh0aGlzLmtleSk7XG5cdCAgICB9O1xuXHQgICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLnRyeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXA7XG5cdCAgICAgICAgaWYgKCFncm91cC5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBncm91cC5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVHcm91cCh0aGlzLmtleSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdC8qKlxuXHQgKiBBbiBPYnNlcnZhYmxlIHJlcHJlc2VudGluZyB2YWx1ZXMgYmVsb25naW5nIHRvIHRoZSBzYW1lIGdyb3VwIHJlcHJlc2VudGVkIGJ5XG5cdCAqIGEgY29tbW9uIGtleS4gVGhlIHZhbHVlcyBlbWl0dGVkIGJ5IGEgR3JvdXBlZE9ic2VydmFibGUgY29tZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gVGhlIGNvbW1vbiBrZXkgaXMgYXZhaWxhYmxlIGFzIHRoZSBmaWVsZCBga2V5YCBvbiBhXG5cdCAqIEdyb3VwZWRPYnNlcnZhYmxlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAY2xhc3MgR3JvdXBlZE9ic2VydmFibGU8SywgVD5cblx0ICovXG5cdHZhciBHcm91cGVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoR3JvdXBlZE9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBHcm91cGVkT2JzZXJ2YWJsZShrZXksIGdyb3VwU3ViamVjdCwgcmVmQ291bnRTdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLmtleSA9IGtleTtcblx0ICAgICAgICB0aGlzLmdyb3VwU3ViamVjdCA9IGdyb3VwU3ViamVjdDtcblx0ICAgICAgICB0aGlzLnJlZkNvdW50U3Vic2NyaXB0aW9uID0gcmVmQ291bnRTdWJzY3JpcHRpb247XG5cdCAgICB9XG5cdCAgICBHcm91cGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG5cdCAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oKTtcblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCByZWZDb3VudFN1YnNjcmlwdGlvbiA9IF9hLnJlZkNvdW50U3Vic2NyaXB0aW9uLCBncm91cFN1YmplY3QgPSBfYS5ncm91cFN1YmplY3Q7XG5cdCAgICAgICAgaWYgKHJlZkNvdW50U3Vic2NyaXB0aW9uICYmICFyZWZDb3VudFN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBzdWJzY3JpcHRpb24uYWRkKG5ldyBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uKHJlZkNvdW50U3Vic2NyaXB0aW9uKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoZ3JvdXBTdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG5cdCAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gR3JvdXBlZE9ic2VydmFibGU7XG5cdH0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcblx0ZXhwb3J0cy5Hcm91cGVkT2JzZXJ2YWJsZSA9IEdyb3VwZWRPYnNlcnZhYmxlO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbihwYXJlbnQpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblx0ICAgICAgICBwYXJlbnQuY291bnQrKztcblx0ICAgIH1cblx0ICAgIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudDtcblx0ICAgICAgICBpZiAoIXBhcmVudC5pc1Vuc3Vic2NyaWJlZCAmJiAhdGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgICAgIHBhcmVudC5jb3VudCAtPSAxO1xuXHQgICAgICAgICAgICBpZiAocGFyZW50LmNvdW50ID09PSAwICYmIHBhcmVudC5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlKSB7XG5cdCAgICAgICAgICAgICAgICBwYXJlbnQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbjtcblx0fShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JvdXBCeS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciByb290XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgTWFwUG9seWZpbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDkxKTtcblx0ZXhwb3J0cy5NYXAgPSByb290XzEucm9vdC5NYXAgfHwgKGZ1bmN0aW9uICgpIHsgcmV0dXJuIE1hcFBvbHlmaWxsXzEuTWFwUG9seWZpbGw7IH0pKCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBNYXBQb2x5ZmlsbCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBNYXBQb2x5ZmlsbCgpIHtcblx0ICAgICAgICB0aGlzLnNpemUgPSAwO1xuXHQgICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuXHQgICAgICAgIHRoaXMuX2tleXMgPSBbXTtcblx0ICAgIH1cblx0ICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcblx0ICAgICAgICByZXR1cm4gaSA9PT0gLTEgPyB1bmRlZmluZWQgOiB0aGlzLl92YWx1ZXNbaV07XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcblx0ICAgICAgICBpZiAoaSA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgdGhpcy5fa2V5cy5wdXNoKGtleSk7XG5cdCAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHZhbHVlKTtcblx0ICAgICAgICAgICAgdGhpcy5zaXplKys7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLl92YWx1ZXNbaV0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuXHQgICAgICAgIGlmIChpID09PSAtMSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgdGhpcy5fa2V5cy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgdGhpcy5zaXplLS07XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHQgICAgTWFwUG9seWZpbGwucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcblx0ICAgICAgICB0aGlzLl92YWx1ZXMubGVuZ3RoID0gMDtcblx0ICAgICAgICB0aGlzLnNpemUgPSAwO1xuXHQgICAgfTtcblx0ICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiLCB0aGlzQXJnKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkrKykge1xuXHQgICAgICAgICAgICBjYi5jYWxsKHRoaXNBcmcsIHRoaXMuX3ZhbHVlc1tpXSwgdGhpcy5fa2V5c1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBQb2x5ZmlsbDtcblx0fSgpKTtcblx0ZXhwb3J0cy5NYXBQb2x5ZmlsbCA9IE1hcFBvbHlmaWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQb2x5ZmlsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBGYXN0TWFwID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEZhc3RNYXAoKSB7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSB7fTtcblx0ICAgIH1cblx0ICAgIEZhc3RNYXAucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlc1trZXldID0gbnVsbDtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWVzW2tleV0gPSB2YWx1ZTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2tleV07XG5cdCAgICB9O1xuXHQgICAgRmFzdE1hcC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYiwgdGhpc0FyZykge1xuXHQgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiB2YWx1ZXNba2V5XSAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCB2YWx1ZXNba2V5XSwga2V5KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBGYXN0TWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlcyA9IHt9O1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBGYXN0TWFwO1xuXHR9KCkpO1xuXHRleHBvcnRzLkZhc3RNYXAgPSBGYXN0TWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1GYXN0TWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDkzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBpZ25vcmVFbGVtZW50c18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OTQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuaWdub3JlRWxlbWVudHMgPSBpZ25vcmVFbGVtZW50c18xLmlnbm9yZUVsZW1lbnRzO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1pZ25vcmVFbGVtZW50cy5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDQ5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgbm9vcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MTQpO1xuXHQvKipcblx0ICogSWdub3JlcyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIG9ubHkgcGFzc2VzIGNhbGxzIG9mIGBjb21wbGV0ZWAgb3IgYGVycm9yYC5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9pZ25vcmVFbGVtZW50cy5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gZW1wdHkgT2JzZXJ2YWJsZSB0aGF0IG9ubHkgY2FsbHMgYGNvbXBsZXRlYFxuXHQgKiBvciBgZXJyb3JgLCBiYXNlZCBvbiB3aGljaCBvbmUgaXMgY2FsbGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBpZ25vcmVFbGVtZW50c1xuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gaWdub3JlRWxlbWVudHMoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBJZ25vcmVFbGVtZW50c09wZXJhdG9yKCkpO1xuXHR9XG5cdGV4cG9ydHMuaWdub3JlRWxlbWVudHMgPSBpZ25vcmVFbGVtZW50cztcblx0O1xuXHR2YXIgSWdub3JlRWxlbWVudHNPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c09wZXJhdG9yKCkge1xuXHQgICAgfVxuXHQgICAgSWdub3JlRWxlbWVudHNPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyKCkge1xuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgICAgSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh1bnVzZWQpIHtcblx0ICAgICAgICBub29wXzEubm9vcCgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9aWdub3JlRWxlbWVudHMuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0OTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGF1ZGl0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5Nik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5hdWRpdCA9IGF1ZGl0XzEuYXVkaXQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1ZGl0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDk2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIEBwYXJhbSBkdXJhdGlvblNlbGVjdG9yXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuXHQgKiBAbWV0aG9kIGF1ZGl0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBhdWRpdChkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBBdWRpdE9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLmF1ZGl0ID0gYXVkaXQ7XG5cdHZhciBBdWRpdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEF1ZGl0T3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBBdWRpdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQXVkaXRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBdWRpdE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBBdWRpdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEF1ZGl0U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEF1ZGl0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgIH1cblx0ICAgIEF1ZGl0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG5cdCAgICAgICAgaWYgKCF0aGlzLnRocm90dGxlZCkge1xuXHQgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuZHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkdXJhdGlvbikpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEF1ZGl0U3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJUaHJvdHRsZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCB2YWx1ZSA9IF9hLnZhbHVlLCBoYXNWYWx1ZSA9IF9hLmhhc1ZhbHVlLCB0aHJvdHRsZWQgPSBfYS50aHJvdHRsZWQ7XG5cdCAgICAgICAgaWYgKHRocm90dGxlZCkge1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZSh0aHJvdHRsZWQpO1xuXHQgICAgICAgICAgICB0aGlzLnRocm90dGxlZCA9IG51bGw7XG5cdCAgICAgICAgICAgIHRocm90dGxlZC51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG5cdCAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcblx0ICAgICAgICB0aGlzLmNsZWFyVGhyb3R0bGUoKTtcblx0ICAgIH07XG5cdCAgICBBdWRpdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuY2xlYXJUaHJvdHRsZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBBdWRpdFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1ZGl0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBhdWRpdFRpbWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDk4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmF1ZGl0VGltZSA9IGF1ZGl0VGltZV8xLmF1ZGl0VGltZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXRUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNDk4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMSk7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogQHBhcmFtIGRlbGF5XG5cdCAqIEBwYXJhbSBzY2hlZHVsZXJcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgYXVkaXRUaW1lXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBhdWRpdFRpbWUoZGVsYXksIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEF1ZGl0VGltZU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLmF1ZGl0VGltZSA9IGF1ZGl0VGltZTtcblx0dmFyIEF1ZGl0VGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEF1ZGl0VGltZU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBBdWRpdFRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IEF1ZGl0VGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kZWxheSwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXVkaXRUaW1lT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIEF1ZGl0VGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEF1ZGl0VGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBdWRpdFRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBBdWRpdFRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmRlbGF5LCB0aGlzKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEF1ZGl0VGltZVN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyVGhyb3R0bGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgdmFsdWUgPSBfYS52YWx1ZSwgaGFzVmFsdWUgPSBfYS5oYXNWYWx1ZSwgdGhyb3R0bGVkID0gX2EudGhyb3R0bGVkO1xuXHQgICAgICAgIGlmICh0aHJvdHRsZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcblx0ICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuXHQgICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGhhc1ZhbHVlKSB7XG5cdCAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBBdWRpdFRpbWVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGZ1bmN0aW9uIGRpc3BhdGNoTmV4dChzdWJzY3JpYmVyKSB7XG5cdCAgICBzdWJzY3JpYmVyLmNsZWFyVGhyb3R0bGUoKTtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1hdWRpdFRpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA0OTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIGxhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTAwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmxhc3QgPSBsYXN0XzEubGFzdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bGFzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgRW1wdHlFcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0ODcpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgbGFzdCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBJdCBvcHRpb25hbGx5IHRha2VzIGEgcHJlZGljYXRlIGZ1bmN0aW9uIGFzIGEgcGFyYW1ldGVyLCBpbiB3aGljaCBjYXNlLCByYXRoZXIgdGhhbiBlbWl0dGluZ1xuXHQgKiB0aGUgbGFzdCBpdGVtIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGUgcmVzdWx0aW5nIE9ic2VydmFibGUgd2lsbCBlbWl0IHRoZSBsYXN0IGl0ZW1cblx0ICogZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9sYXN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAdGhyb3dzIHtFbXB0eUVycm9yfSBEZWxpdmVycyBhbiBFbXB0eUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmBcblx0ICogY2FsbGJhY2sgaWYgdGhlIE9ic2VydmFibGUgY29tcGxldGVzIGJlZm9yZSBhbnkgYG5leHRgIG5vdGlmaWNhdGlvbiB3YXMgc2VudC5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcHJlZGljYXRlIC0gdGhlIGNvbmRpdGlvbiBhbnkgc291cmNlIGVtaXR0ZWQgaXRlbSBoYXMgdG8gc2F0aXNmeS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGxhc3QgaXRlbSBzYXRpc2Z5aW5nIHRoZSBnaXZlbiBjb25kaXRpb25cblx0ICogZnJvbSB0aGUgc291cmNlLCBvciBhbiBOb1N1Y2hFbGVtZW50RXhjZXB0aW9uIGlmIG5vIHN1Y2ggaXRlbXMgYXJlIGVtaXR0ZWQuXG5cdCAqIEB0aHJvd3MgLSBUaHJvd3MgaWYgbm8gaXRlbXMgdGhhdCBtYXRjaCB0aGUgcHJlZGljYXRlIGFyZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBsYXN0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBsYXN0KHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTGFzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgdGhpcykpO1xuXHR9XG5cdGV4cG9ydHMubGFzdCA9IGxhc3Q7XG5cdHZhciBMYXN0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTGFzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG5cdCAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgTGFzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IExhc3RTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5kZWZhdWx0VmFsdWUsIHRoaXMuc291cmNlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIExhc3RPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgTGFzdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKExhc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTGFzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvcjtcblx0ICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG5cdCAgICAgICAgaWYgKHRoaXMucHJlZGljYXRlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3RyeVByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuX3RyeVJlc3VsdFNlbGVjdG9yKHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJlZGljYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUodmFsdWUsIGluZGV4LCB0aGlzLnNvdXJjZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuX3RyeVJlc3VsdFNlbGVjdG9yKHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMubGFzdFZhbHVlID0gcmVzdWx0O1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuXHQgICAgfTtcblx0ICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBFbXB0eUVycm9yXzEuRW1wdHlFcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBMYXN0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1sYXN0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBsZXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTAyKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmxldCA9IGxldF8xLmxldFByb3RvO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubGV0QmluZCA9IGxldF8xLmxldFByb3RvO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1sZXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKipcblx0ICogQHBhcmFtIGZ1bmNcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cblx0ICogQG1ldGhvZCBsZXRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIGxldFByb3RvKGZ1bmMpIHtcblx0ICAgIHJldHVybiBmdW5jKHRoaXMpO1xuXHR9XG5cdGV4cG9ydHMubGV0UHJvdG8gPSBsZXRQcm90bztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bGV0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBldmVyeV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MDQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZXZlcnkgPSBldmVyeV8xLmV2ZXJ5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ldmVyeS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2hldGhlciBvciBub3QgZXZlcnkgaXRlbSBvZiB0aGUgc291cmNlIHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIHNwZWNpZmllZC5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcHJlZGljYXRlIGEgZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIGlmIGFuIGl0ZW0gbWVldHMgYSBzcGVjaWZpZWQgY29uZGl0aW9uLlxuXHQgKiBAcGFyYW0ge2FueX0gW3RoaXNBcmddIG9wdGlvbmFsIG9iamVjdCB0byB1c2UgZm9yIGB0aGlzYCBpbiB0aGUgY2FsbGJhY2tcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSBvZiBib29sZWFucyB0aGF0IGRldGVybWluZXMgaWYgYWxsIGl0ZW1zIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBtZWV0IHRoZSBjb25kaXRpb24gc3BlY2lmaWVkLlxuXHQgKiBAbWV0aG9kIGV2ZXJ5XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBldmVyeShwcmVkaWNhdGUsIHRoaXNBcmcpIHtcblx0ICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuXHQgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBFdmVyeU9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZywgc291cmNlKSk7XG5cdH1cblx0ZXhwb3J0cy5ldmVyeSA9IGV2ZXJ5O1xuXHR2YXIgRXZlcnlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBFdmVyeU9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZywgc291cmNlKSB7XG5cdCAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG5cdCAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZztcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIEV2ZXJ5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRXZlcnlTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy50aGlzQXJnLCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBFdmVyeU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBFdmVyeVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEV2ZXJ5U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEV2ZXJ5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnLCBzb3VyY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG5cdCAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZztcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnIHx8IHRoaXM7XG5cdCAgICB9XG5cdCAgICBFdmVyeVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGV2ZXJ5VmFsdWVNYXRjaCkge1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChldmVyeVZhbHVlTWF0Y2gpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBFdmVyeVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5pbmRleCsrLCB0aGlzLnNvdXJjZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghcmVzdWx0KSB7XG5cdCAgICAgICAgICAgIHRoaXMubm90aWZ5Q29tcGxldGUoZmFsc2UpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBFdmVyeVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLm5vdGlmeUNvbXBsZXRlKHRydWUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBFdmVyeVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlcnkuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIG1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MDYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwID0gbWFwXzEubWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0LyoqXG5cdCAqIEFwcGxpZXMgYSBnaXZlbiBgcHJvamVjdGAgZnVuY3Rpb24gdG8gZWFjaCB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSwgYW5kIGVtaXRzIHRoZSByZXN1bHRpbmcgdmFsdWVzIGFzIGFuIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlIFtBcnJheS5wcm90b3R5cGUubWFwKCldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L21hcCksXG5cdCAqIGl0IHBhc3NlcyBlYWNoIHNvdXJjZSB2YWx1ZSB0aHJvdWdoIGEgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb24gdG8gZ2V0XG5cdCAqIGNvcnJlc3BvbmRpbmcgb3V0cHV0IHZhbHVlcy48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvbWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBTaW1pbGFyIHRvIHRoZSB3ZWxsIGtub3duIGBBcnJheS5wcm90b3R5cGUubWFwYCBmdW5jdGlvbiwgdGhpcyBvcGVyYXRvclxuXHQgKiBhcHBsaWVzIGEgcHJvamVjdGlvbiB0byBlYWNoIHZhbHVlIGFuZCBlbWl0cyB0aGF0IHByb2plY3Rpb24gaW4gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgZXZlcnkgY2xpY2sgdG8gdGhlIGNsaWVudFggcG9zaXRpb24gb2YgdGhhdCBjbGljazwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHBvc2l0aW9ucyA9IGNsaWNrcy5tYXAoZXYgPT4gZXYuY2xpZW50WCk7XG5cdCAqIHBvc2l0aW9ucy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIG1hcFRvfVxuXHQgKiBAc2VlIHtAbGluayBwbHVja31cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlcik6IFJ9IHByb2plY3QgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5XG5cdCAqIHRvIGVhY2ggYHZhbHVlYCBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gVGhlIGBpbmRleGAgcGFyYW1ldGVyIGlzXG5cdCAqIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBlbWlzc2lvbiB0aGF0IGhhcyBoYXBwZW5lZCBzaW5jZSB0aGVcblx0ICogc3Vic2NyaXB0aW9uLCBzdGFydGluZyBmcm9tIHRoZSBudW1iZXIgYDBgLlxuXHQgKiBAcGFyYW0ge2FueX0gW3RoaXNBcmddIEFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIGRlZmluZSB3aGF0IGB0aGlzYCBpcyBpbiB0aGVcblx0ICogYHByb2plY3RgIGZ1bmN0aW9uLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSB0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uLlxuXHQgKiBAbWV0aG9kIG1hcFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwKHByb2plY3QsIHRoaXNBcmcpIHtcblx0ICAgIGlmICh0eXBlb2YgcHJvamVjdCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLiBBcmUgeW91IGxvb2tpbmcgZm9yIGBtYXBUbygpYD8nKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1hcE9wZXJhdG9yKHByb2plY3QsIHRoaXNBcmcpKTtcblx0fVxuXHRleHBvcnRzLm1hcCA9IG1hcDtcblx0dmFyIE1hcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE1hcE9wZXJhdG9yKHByb2plY3QsIHRoaXNBcmcpIHtcblx0ICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuXHQgICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG5cdCAgICB9XG5cdCAgICBNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1hcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnRoaXNBcmcpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gTWFwT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIE1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB0aGlzQXJnKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IDA7XG5cdCAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZyB8fCB0aGlzO1xuXHQgICAgfVxuXHQgICAgLy8gTk9URTogVGhpcyBsb29rcyB1bm9wdGltaXplZCwgYnV0IGl0J3MgYWN0dWFsbHkgcHVycG9zZWZ1bGx5IE5PVFxuXHQgICAgLy8gdXNpbmcgdHJ5L2NhdGNoIG9wdGltaXphdGlvbnMuXG5cdCAgICBNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5jb3VudCsrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1hcFN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBtYXBUb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MDgpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwVG8gPSBtYXBUb18xLm1hcFRvO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUwOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogRW1pdHMgdGhlIGdpdmVuIGNvbnN0YW50IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBldmVyeSB0aW1lIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSB7QGxpbmsgbWFwfSwgYnV0IGl0IG1hcHMgZXZlcnkgc291cmNlIHZhbHVlIHRvXG5cdCAqIHRoZSBzYW1lIG91dHB1dCB2YWx1ZSBldmVyeSB0aW1lLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tYXBUby5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogVGFrZXMgYSBjb25zdGFudCBgdmFsdWVgIGFzIGFyZ3VtZW50LCBhbmQgZW1pdHMgdGhhdCB3aGVuZXZlciB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZS4gSW4gb3RoZXIgd29yZHMsIGlnbm9yZXMgdGhlIGFjdHVhbCBzb3VyY2UgdmFsdWUsXG5cdCAqIGFuZCBzaW1wbHkgdXNlcyB0aGUgZW1pc3Npb24gbW9tZW50IHRvIGtub3cgd2hlbiB0byBlbWl0IHRoZSBnaXZlbiBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgZXZlcnkgY2xpY2sgdG8gdGhlIHN0cmluZyAnSGknPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgZ3JlZXRpbmdzID0gY2xpY2tzLm1hcFRvKCdIaScpO1xuXHQgKiBncmVldGluZ3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7YW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFwIGVhY2ggc291cmNlIHZhbHVlIHRvLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGdpdmVuIGB2YWx1ZWAgZXZlcnkgdGltZVxuXHQgKiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgc29tZXRoaW5nLlxuXHQgKiBAbWV0aG9kIG1hcFRvXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBUbyh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWFwVG9PcGVyYXRvcih2YWx1ZSkpO1xuXHR9XG5cdGV4cG9ydHMubWFwVG8gPSBtYXBUbztcblx0dmFyIE1hcFRvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTWFwVG9PcGVyYXRvcih2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICAgIE1hcFRvT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBUb1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy52YWx1ZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBUb09wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1hcFRvU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1hcFRvU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdmFsdWUpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgfVxuXHQgICAgTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMudmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXBUb1N1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIG1hdGVyaWFsaXplXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxMCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tYXRlcmlhbGl6ZSA9IG1hdGVyaWFsaXplXzEubWF0ZXJpYWxpemU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGVyaWFsaXplLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBOb3RpZmljYXRpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzg4KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcHJlc2VudHMgYWxsIG9mIHRoZSBlbWlzc2lvbnMgYW5kIG5vdGlmaWNhdGlvbnNcblx0ICogZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgaW50byBlbWlzc2lvbnMgbWFya2VkIHdpdGggdGhlaXIgb3JpZ2luYWwgdHlwZXNcblx0ICogd2l0aGluIGEgYE5vdGlmaWNhdGlvbmAgb2JqZWN0cy5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9tYXRlcmlhbGl6ZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHNlZSB7QGxpbmsgTm90aWZpY2F0aW9ufVxuXHQgKlxuXHQgKiBAc2NoZWR1bGVyIG1hdGVyaWFsaXplIGRvZXMgbm90IG9wZXJhdGUgYnkgZGVmYXVsdCBvbiBhIHBhcnRpY3VsYXIgU2NoZWR1bGVyLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE5vdGlmaWNhdGlvbjxUPj59IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyB0aGF0IGFyZSB0aGUgcmVzdWx0IG9mXG5cdCAqIG1hdGVyaWFsaXppbmcgdGhlIGl0ZW1zIGFuZCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBtYXRlcmlhbGl6ZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWF0ZXJpYWxpemUoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXRlcmlhbGl6ZU9wZXJhdG9yKCkpO1xuXHR9XG5cdGV4cG9ydHMubWF0ZXJpYWxpemUgPSBtYXRlcmlhbGl6ZTtcblx0dmFyIE1hdGVyaWFsaXplT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVPcGVyYXRvcigpIHtcblx0ICAgIH1cblx0ICAgIE1hdGVyaWFsaXplT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXRlcmlhbGl6ZVN1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXRlcmlhbGl6ZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBNYXRlcmlhbGl6ZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE1hdGVyaWFsaXplU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgIH1cblx0ICAgIE1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQodmFsdWUpKTtcblx0ICAgIH07XG5cdCAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKGVycikpO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgTWF0ZXJpYWxpemVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSgpKTtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNYXRlcmlhbGl6ZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0ZXJpYWxpemUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIG1lcmdlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwOCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZSA9IG1lcmdlXzEubWVyZ2U7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBtZXJnZUFsbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VBbGwgPSBtZXJnZUFsbF8xLm1lcmdlQWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZUFsbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgbWVyZ2VNYXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDU3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlTWFwID0gbWVyZ2VNYXBfMS5tZXJnZU1hcDtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmZsYXRNYXAgPSBtZXJnZU1hcF8xLm1lcmdlTWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgbWVyZ2VNYXBUb18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NjApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NDUpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubXVsdGljYXN0ID0gbXVsdGljYXN0XzEubXVsdGljYXN0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1tdWx0aWNhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIG9ic2VydmVPbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODcpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUub2JzZXJ2ZU9uID0gb2JzZXJ2ZU9uXzEub2JzZXJ2ZU9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlT24uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHBhcnRpdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MTgpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucGFydGl0aW9uID0gcGFydGl0aW9uXzEucGFydGl0aW9uO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wYXJ0aXRpb24uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgbm90XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxOSk7XG5cdHZhciBmaWx0ZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgyKTtcblx0LyoqXG5cdCAqIEBwYXJhbSBwcmVkaWNhdGVcblx0ICogQHBhcmFtIHRoaXNBcmdcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPltdfVxuXHQgKiBAbWV0aG9kIHBhcnRpdGlvblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcGFydGl0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuXHQgICAgcmV0dXJuIFtcblx0ICAgICAgICBmaWx0ZXJfMS5maWx0ZXIuY2FsbCh0aGlzLCBwcmVkaWNhdGUpLFxuXHQgICAgICAgIGZpbHRlcl8xLmZpbHRlci5jYWxsKHRoaXMsIG5vdF8xLm5vdChwcmVkaWNhdGUsIHRoaXNBcmcpKVxuXHQgICAgXTtcblx0fVxuXHRleHBvcnRzLnBhcnRpdGlvbiA9IHBhcnRpdGlvbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cGFydGl0aW9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0ZnVuY3Rpb24gbm90KHByZWQsIHRoaXNBcmcpIHtcblx0ICAgIGZ1bmN0aW9uIG5vdFByZWQoKSB7XG5cdCAgICAgICAgcmV0dXJuICEobm90UHJlZC5wcmVkLmFwcGx5KG5vdFByZWQudGhpc0FyZywgYXJndW1lbnRzKSk7XG5cdCAgICB9XG5cdCAgICBub3RQcmVkLnByZWQgPSBwcmVkO1xuXHQgICAgbm90UHJlZC50aGlzQXJnID0gdGhpc0FyZztcblx0ICAgIHJldHVybiBub3RQcmVkO1xuXHR9XG5cdGV4cG9ydHMubm90ID0gbm90O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1ub3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHBsdWNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyMSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wbHVjayA9IHBsdWNrXzEucGx1Y2s7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsdWNrLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIG1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MDYpO1xuXHQvKipcblx0ICogTWFwcyBlYWNoIHNvdXJjZSB2YWx1ZSAoYW4gb2JqZWN0KSB0byBpdHMgc3BlY2lmaWVkIG5lc3RlZCBwcm9wZXJ0eS5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxpa2Uge0BsaW5rIG1hcH0sIGJ1dCBtZWFudCBvbmx5IGZvciBwaWNraW5nIG9uZSBvZlxuXHQgKiB0aGUgbmVzdGVkIHByb3BlcnRpZXMgb2YgZXZlcnkgZW1pdHRlZCBvYmplY3QuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3BsdWNrLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBHaXZlbiBhIGxpc3Qgb2Ygc3RyaW5ncyBkZXNjcmliaW5nIGEgcGF0aCB0byBhbiBvYmplY3QgcHJvcGVydHksIHJldHJpZXZlc1xuXHQgKiB0aGUgdmFsdWUgb2YgYSBzcGVjaWZpZWQgbmVzdGVkIHByb3BlcnR5IGZyb20gYWxsIHZhbHVlcyBpbiB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIElmIGEgcHJvcGVydHkgY2FuJ3QgYmUgcmVzb2x2ZWQsIGl0IHdpbGwgcmV0dXJuIGB1bmRlZmluZWRgIGZvclxuXHQgKiB0aGF0IHZhbHVlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgZXZlcnkgY2xpY2sgdG8gdGhlIHRhZ05hbWUgb2YgdGhlIGNsaWNrZWQgdGFyZ2V0IGVsZW1lbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciB0YWdOYW1lcyA9IGNsaWNrcy5wbHVjaygndGFyZ2V0JywgJ3RhZ05hbWUnKTtcblx0ICogdGFnTmFtZXMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBtYXB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7Li4uc3RyaW5nfSBwcm9wZXJ0aWVzIFRoZSBuZXN0ZWQgcHJvcGVydGllcyB0byBwbHVjayBmcm9tIGVhY2ggc291cmNlXG5cdCAqIHZhbHVlIChhbiBvYmplY3QpLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgb2YgcHJvcGVydHkgdmFsdWVzIGZyb20gdGhlXG5cdCAqIHNvdXJjZSB2YWx1ZXMuXG5cdCAqIEBtZXRob2QgcGx1Y2tcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHBsdWNrKCkge1xuXHQgICAgdmFyIHByb3BlcnRpZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgcHJvcGVydGllc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBsZW5ndGggPSBwcm9wZXJ0aWVzLmxlbmd0aDtcblx0ICAgIGlmIChsZW5ndGggPT09IDApIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpc3Qgb2YgcHJvcGVydGllcyBjYW5ub3QgYmUgZW1wdHkuJyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbWFwXzEubWFwLmNhbGwodGhpcywgcGx1Y2tlcihwcm9wZXJ0aWVzLCBsZW5ndGgpKTtcblx0fVxuXHRleHBvcnRzLnBsdWNrID0gcGx1Y2s7XG5cdGZ1bmN0aW9uIHBsdWNrZXIocHJvcHMsIGxlbmd0aCkge1xuXHQgICAgdmFyIG1hcHBlciA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgdmFyIGN1cnJlbnRQcm9wID0geDtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBwID0gY3VycmVudFByb3BbcHJvcHNbaV1dO1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIHAgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UHJvcCA9IHA7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBjdXJyZW50UHJvcDtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gbWFwcGVyO1xuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsdWNrLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBwdWJsaXNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyMyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wdWJsaXNoID0gcHVibGlzaF8xLnB1Ymxpc2g7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2guanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NDUpO1xuXHQvKipcblx0ICogUmV0dXJucyBhIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSwgd2hpY2ggaXMgYSB2YXJpZXR5IG9mIE9ic2VydmFibGUgdGhhdCB3YWl0cyB1bnRpbCBpdHMgY29ubmVjdCBtZXRob2QgaXMgY2FsbGVkXG5cdCAqIGJlZm9yZSBpdCBiZWdpbnMgZW1pdHRpbmcgaXRlbXMgdG8gdGhvc2UgT2JzZXJ2ZXJzIHRoYXQgaGF2ZSBzdWJzY3JpYmVkIHRvIGl0LlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3B1Ymxpc2gucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEByZXR1cm4gYSBDb25uZWN0YWJsZU9ic2VydmFibGUgdGhhdCB1cG9uIGNvbm5lY3Rpb24gY2F1c2VzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0byBlbWl0IGl0ZW1zIHRvIGl0cyBPYnNlcnZlcnMuXG5cdCAqIEBtZXRob2QgcHVibGlzaFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcHVibGlzaCgpIHtcblx0ICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgU3ViamVjdF8xLlN1YmplY3QoKSk7XG5cdH1cblx0ZXhwb3J0cy5wdWJsaXNoID0gcHVibGlzaDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgcHVibGlzaEJlaGF2aW9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyNSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wdWJsaXNoQmVoYXZpb3IgPSBwdWJsaXNoQmVoYXZpb3JfMS5wdWJsaXNoQmVoYXZpb3I7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hCZWhhdmlvci5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBCZWhhdmlvclN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTI2KTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NDUpO1xuXHQvKipcblx0ICogQHBhcmFtIHZhbHVlXG5cdCAqIEByZXR1cm4ge0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCBwdWJsaXNoQmVoYXZpb3Jcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHB1Ymxpc2hCZWhhdmlvcih2YWx1ZSkge1xuXHQgICAgcmV0dXJuIG11bHRpY2FzdF8xLm11bHRpY2FzdC5jYWxsKHRoaXMsIG5ldyBCZWhhdmlvclN1YmplY3RfMS5CZWhhdmlvclN1YmplY3QodmFsdWUpKTtcblx0fVxuXHRleHBvcnRzLnB1Ymxpc2hCZWhhdmlvciA9IHB1Ymxpc2hCZWhhdmlvcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaEJlaGF2aW9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB0aHJvd0Vycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0LyoqXG5cdCAqIEBjbGFzcyBCZWhhdmlvclN1YmplY3Q8VD5cblx0ICovXG5cdHZhciBCZWhhdmlvclN1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEJlaGF2aW9yU3ViamVjdCwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEJlaGF2aW9yU3ViamVjdChfdmFsdWUpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblx0ICAgICAgICB0aGlzLl92YWx1ZSA9IF92YWx1ZTtcblx0ICAgIH1cblx0ICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3JlZCkge1xuXHQgICAgICAgICAgICB0aHJvd0Vycm9yXzEudGhyb3dFcnJvcih0aGlzLmVycm9yVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHRocm93RXJyb3JfMS50aHJvd0Vycm9yKG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBfc3VwZXIucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcblx0ICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICYmICFzdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMuX3ZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcblx0ICAgIH07XG5cdCAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHRoaXMuX3ZhbHVlID0gdmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMuaGFzRXJyb3JlZCA9IHRydWU7XG5cdCAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLCB0aGlzLmVycm9yVmFsdWUgPSBlcnIpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBCZWhhdmlvclN1YmplY3Q7XG5cdH0oU3ViamVjdF8xLlN1YmplY3QpKTtcblx0ZXhwb3J0cy5CZWhhdmlvclN1YmplY3QgPSBCZWhhdmlvclN1YmplY3Q7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUJlaGF2aW9yU3ViamVjdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgcHVibGlzaFJlcGxheV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NDIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaFJlcGxheSA9IHB1Ymxpc2hSZXBsYXlfMS5wdWJsaXNoUmVwbGF5O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoUmVwbGF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBwdWJsaXNoTGFzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MjkpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaExhc3QgPSBwdWJsaXNoTGFzdF8xLnB1Ymxpc2hMYXN0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoTGFzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBBc3luY1N1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU0KTtcblx0dmFyIG11bHRpY2FzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NDUpO1xuXHQvKipcblx0ICogQHJldHVybiB7Q29ubmVjdGFibGVPYnNlcnZhYmxlPFQ+fVxuXHQgKiBAbWV0aG9kIHB1Ymxpc2hMYXN0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBwdWJsaXNoTGFzdCgpIHtcblx0ICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCkpO1xuXHR9XG5cdGV4cG9ydHMucHVibGlzaExhc3QgPSBwdWJsaXNoTGFzdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaExhc3QuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHJhY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDEwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnJhY2UgPSByYWNlXzEucmFjZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmFjZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgcmVkdWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzMik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZWR1Y2UgPSByZWR1Y2VfMS5yZWR1Y2U7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZHVjZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgYXBwbGllcyBhIHNwZWNpZmllZCBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byB0aGUgZmlyc3QgaXRlbSBlbWl0dGVkIGJ5IGEgc291cmNlIE9ic2VydmFibGUsXG5cdCAqIHRoZW4gZmVlZHMgdGhlIHJlc3VsdCBvZiB0aGF0IGZ1bmN0aW9uIGFsb25nIHdpdGggdGhlIHNlY29uZCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGludG8gdGhlIHNhbWVcblx0ICogZnVuY3Rpb24sIGFuZCBzbyBvbiB1bnRpbCBhbGwgaXRlbXMgaGF2ZSBiZWVuIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBhbmQgZW1pdHMgdGhlIGZpbmFsIHJlc3VsdCBmcm9tXG5cdCAqIHRoZSBmaW5hbCBjYWxsIHRvIHlvdXIgZnVuY3Rpb24gYXMgaXRzIHNvbGUgaXRlbS5cblx0ICogVGhpcyB0ZWNobmlxdWUsIHdoaWNoIGlzIGNhbGxlZCBcInJlZHVjZVwiIGhlcmUsIGlzIHNvbWV0aW1lcyBjYWxsZWQgXCJhZ2dyZWdhdGUsXCIgXCJmb2xkLFwiIFwiYWNjdW11bGF0ZSxcIiBcImNvbXByZXNzLFwiIG9yXG5cdCAqIFwiaW5qZWN0XCIgaW4gb3RoZXIgcHJvZ3JhbW1pbmcgY29udGV4dHMuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvcmVkdWNlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge2luaXRpYWxWYWx1ZX0gdGhlIGluaXRpYWwgKHNlZWQpIGFjY3VtdWxhdG9yIHZhbHVlXG5cdCAqIEBwYXJhbSB7YWNjdW11bGF0b3J9IGFuIGFjY3VtdWxhdG9yIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgb24gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVcblx0ICogcmVzdWx0IG9mIHdoaWNoIHdpbGwgYmUgdXNlZCBpbiB0aGUgbmV4dCBhY2N1bXVsYXRvciBjYWxsLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzaW5nbGUgaXRlbSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYWNjdW11bGF0aW5nIHRoZSBvdXRwdXQgZnJvbSB0aGVcblx0ICogaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2QgcmVkdWNlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiByZWR1Y2UocHJvamVjdCwgc2VlZCkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmVkdWNlT3BlcmF0b3IocHJvamVjdCwgc2VlZCkpO1xuXHR9XG5cdGV4cG9ydHMucmVkdWNlID0gcmVkdWNlO1xuXHR2YXIgUmVkdWNlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmVkdWNlT3BlcmF0b3IocHJvamVjdCwgc2VlZCkge1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcblx0ICAgIH1cblx0ICAgIFJlZHVjZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmVkdWNlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMuc2VlZCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZWR1Y2VPcGVyYXRvcjtcblx0fSgpKTtcblx0ZXhwb3J0cy5SZWR1Y2VPcGVyYXRvciA9IFJlZHVjZU9wZXJhdG9yO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBSZWR1Y2VTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSZWR1Y2VTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gUmVkdWNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgc2VlZCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5hY2MgPSBzZWVkO1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5oYXNTZWVkID0gdHlwZW9mIHNlZWQgIT09ICd1bmRlZmluZWQnO1xuXHQgICAgfVxuXHQgICAgUmVkdWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSB8fCAodGhpcy5oYXNWYWx1ZSA9IHRoaXMuaGFzU2VlZCkpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5UmVkdWNlKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWNjID0gdmFsdWU7XG5cdCAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBSZWR1Y2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UmVkdWNlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QodGhpcy5hY2MsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5hY2MgPSByZXN1bHQ7XG5cdCAgICB9O1xuXHQgICAgUmVkdWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlIHx8IHRoaXMuaGFzU2VlZCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5hY2MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJlZHVjZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0ZXhwb3J0cy5SZWR1Y2VTdWJzY3JpYmVyID0gUmVkdWNlU3Vic2NyaWJlcjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmVkdWNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciByZXBlYXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTM0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnJlcGVhdCA9IHJlcGVhdF8xLnJlcGVhdDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwZWF0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYyKTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcGVhdHMgdGhlIHN0cmVhbSBvZiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBtb3N0IGNvdW50IHRpbWVzLFxuXHQgKiBvbiBhIHBhcnRpY3VsYXIgU2NoZWR1bGVyLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3JlcGVhdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIHRoZSBTY2hlZHVsZXIgdG8gZW1pdCB0aGUgaXRlbXMgb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbY291bnRdIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGl0ZW1zIGFyZSByZXBlYXRlZCwgYSBjb3VudCBvZiAwIHdpbGwgeWllbGRcblx0ICogYW4gZW1wdHkgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcGVhdHMgdGhlIHN0cmVhbSBvZiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBtb3N0XG5cdCAqIGNvdW50IHRpbWVzLlxuXHQgKiBAbWV0aG9kIHJlcGVhdFxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVwZWF0KGNvdW50KSB7XG5cdCAgICBpZiAoY291bnQgPT09IHZvaWQgMCkgeyBjb3VudCA9IC0xOyB9XG5cdCAgICBpZiAoY291bnQgPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAoY291bnQgPCAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmVwZWF0T3BlcmF0b3IoLTEsIHRoaXMpKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJlcGVhdE9wZXJhdG9yKGNvdW50IC0gMSwgdGhpcykpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMucmVwZWF0ID0gcmVwZWF0O1xuXHR2YXIgUmVwZWF0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmVwZWF0T3BlcmF0b3IoY291bnQsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIFJlcGVhdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmVwZWF0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNvdW50LCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZXBlYXRPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgUmVwZWF0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmVwZWF0U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJlcGVhdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvdW50LCBzb3VyY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgUmVwZWF0U3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICB2YXIgX2EgPSB0aGlzLCBzb3VyY2UgPSBfYS5zb3VyY2UsIGNvdW50ID0gX2EuY291bnQ7XG5cdCAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChjb3VudCA+IC0xKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gY291bnQgLSAxO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmVwZWF0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHJldHJ5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzNik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZXRyeSA9IHJldHJ5XzEucmV0cnk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBtaXJyb3JzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcmVzdWJzY3JpYmluZyB0byBpdCBpZiBpdCBjYWxscyBgZXJyb3JgIGFuZCB0aGVcblx0ICogcHJlZGljYXRlIHJldHVybnMgdHJ1ZSBmb3IgdGhhdCBzcGVjaWZpYyBleGNlcHRpb24gYW5kIHJldHJ5IGNvdW50LlxuXHQgKiBJZiB0aGUgc291cmNlIE9ic2VydmFibGUgY2FsbHMgYGVycm9yYCwgdGhpcyBtZXRob2Qgd2lsbCByZXN1YnNjcmliZSB0byB0aGUgc291cmNlIE9ic2VydmFibGUgZm9yIGEgbWF4aW11bSBvZlxuXHQgKiBjb3VudCByZXN1YnNjcmlwdGlvbnMgKGdpdmVuIGFzIGEgbnVtYmVyIHBhcmFtZXRlcikgcmF0aGVyIHRoYW4gcHJvcGFnYXRpbmcgdGhlIGBlcnJvcmAgY2FsbC5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9yZXRyeS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQW55IGFuZCBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgd2lsbCBiZSBlbWl0dGVkIGJ5IHRoZSByZXN1bHRpbmcgT2JzZXJ2YWJsZSwgZXZlbiB0aG9zZSBlbWl0dGVkXG5cdCAqIGR1cmluZyBmYWlsZWQgc3Vic2NyaXB0aW9ucy4gRm9yIGV4YW1wbGUsIGlmIGFuIE9ic2VydmFibGUgZmFpbHMgYXQgZmlyc3QgYnV0IGVtaXRzIFsxLCAyXSB0aGVuIHN1Y2NlZWRzIHRoZSBzZWNvbmRcblx0ICogdGltZSBhbmQgZW1pdHM6IFsxLCAyLCAzLCA0LCA1XSB0aGVuIHRoZSBjb21wbGV0ZSBzdHJlYW0gb2YgZW1pc3Npb25zIGFuZCBub3RpZmljYXRpb25zXG5cdCAqIHdvdWxkIGJlOiBbMSwgMiwgMSwgMiwgMywgNCwgNSwgYGNvbXBsZXRlYF0uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgb2YgcmV0cnkgYXR0ZW1wdHMgYmVmb3JlIGZhaWxpbmcuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBtb2RpZmllZCB3aXRoIHRoZSByZXRyeSBsb2dpYy5cblx0ICogQG1ldGhvZCByZXRyeVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcmV0cnkoY291bnQpIHtcblx0ICAgIGlmIChjb3VudCA9PT0gdm9pZCAwKSB7IGNvdW50ID0gLTE7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJldHJ5T3BlcmF0b3IoY291bnQsIHRoaXMpKTtcblx0fVxuXHRleHBvcnRzLnJldHJ5ID0gcmV0cnk7XG5cdHZhciBSZXRyeU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJldHJ5T3BlcmF0b3IoY291bnQsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIFJldHJ5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBSZXRyeVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb3VudCwgdGhpcy5zb3VyY2UpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gUmV0cnlPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgUmV0cnlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhSZXRyeVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBSZXRyeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvdW50LCBzb3VyY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgUmV0cnlTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIHZhciBfYSA9IHRoaXMsIHNvdXJjZSA9IF9hLnNvdXJjZSwgY291bnQgPSBfYS5jb3VudDtcblx0ICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsIGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAoY291bnQgPiAtMSkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50IC0gMTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgc291cmNlLnN1YnNjcmliZSh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFJldHJ5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyeS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgcmV0cnlXaGVuXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzOCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZXRyeVdoZW4gPSByZXRyeVdoZW5fMS5yZXRyeVdoZW47XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5V2hlbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDUzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdHJ5Q2F0Y2hfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgZXJyb3JPYmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSB3aXRoIHRoZSBleGNlcHRpb24gb2YgYW4gYGVycm9yYC5cblx0ICogQW4gYGVycm9yYCB3aWxsIGNhdXNlIHRoZSBlbWlzc2lvbiBvZiB0aGUgVGhyb3dhYmxlIHRoYXQgY2F1c2UgdGhlIGVycm9yIHRvIHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGZyb21cblx0ICogbm90aWZpY2F0aW9uSGFuZGxlci4gSWYgdGhhdCBPYnNlcnZhYmxlIGNhbGxzIG9uQ29tcGxldGUgb3IgYGVycm9yYCB0aGVuIHJldHJ5IHdpbGwgY2FsbCBgY29tcGxldGVgIG9yIGBlcnJvcmBcblx0ICogb24gdGhlIGNoaWxkIHN1YnNjcmlwdGlvbi4gT3RoZXJ3aXNlLCB0aGlzIE9ic2VydmFibGUgd2lsbCByZXN1YnNjcmliZSB0byB0aGUgc291cmNlIG9ic2VydmFibGUsIG9uIGEgcGFydGljdWxhclxuXHQgKiBTY2hlZHVsZXIuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvcmV0cnlXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge25vdGlmaWNhdGlvbkhhbmRsZXJ9IHJlY2VpdmVzIGFuIE9ic2VydmFibGUgb2Ygbm90aWZpY2F0aW9ucyB3aXRoIHdoaWNoIGEgdXNlciBjYW4gYGNvbXBsZXRlYCBvciBgZXJyb3JgLFxuXHQgKiBhYm9ydGluZyB0aGUgcmV0cnkuXG5cdCAqIEBwYXJhbSB7c2NoZWR1bGVyfSB0aGUgU2NoZWR1bGVyIG9uIHdoaWNoIHRvIHN1YnNjcmliZSB0byB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBtb2RpZmllZCB3aXRoIHJldHJ5IGxvZ2ljLlxuXHQgKiBAbWV0aG9kIHJldHJ5V2hlblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gcmV0cnlXaGVuKG5vdGlmaWVyKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBSZXRyeVdoZW5PcGVyYXRvcihub3RpZmllciwgdGhpcykpO1xuXHR9XG5cdGV4cG9ydHMucmV0cnlXaGVuID0gcmV0cnlXaGVuO1xuXHR2YXIgUmV0cnlXaGVuT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUmV0cnlXaGVuT3BlcmF0b3Iobm90aWZpZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcblx0ICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgIH1cblx0ICAgIFJldHJ5V2hlbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmV0cnlXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5vdGlmaWVyLCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZXRyeVdoZW5PcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgUmV0cnlXaGVuU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoUmV0cnlXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFJldHJ5V2hlblN1YnNjcmliZXIoZGVzdGluYXRpb24sIG5vdGlmaWVyLCBzb3VyY2UpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgUmV0cnlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICB2YXIgZXJyb3JzID0gdGhpcy5lcnJvcnM7XG5cdCAgICAgICAgICAgIHZhciByZXRyaWVzID0gdGhpcy5yZXRyaWVzO1xuXHQgICAgICAgICAgICB2YXIgcmV0cmllc1N1YnNjcmlwdGlvbiA9IHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbjtcblx0ICAgICAgICAgICAgaWYgKCFyZXRyaWVzKSB7XG5cdCAgICAgICAgICAgICAgICBlcnJvcnMgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcblx0ICAgICAgICAgICAgICAgIHJldHJpZXMgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMubm90aWZpZXIpKGVycm9ycyk7XG5cdCAgICAgICAgICAgICAgICBpZiAocmV0cmllcyA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcywgZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHJldHJpZXNTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJldHJpZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG5cdCAgICAgICAgICAgIHRoaXMucmV0cmllcyA9IHJldHJpZXM7XG5cdCAgICAgICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IHJldHJpZXNTdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgIGVycm9ycy5uZXh0KGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFJldHJ5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCBlcnJvcnMgPSBfYS5lcnJvcnMsIHJldHJpZXNTdWJzY3JpcHRpb24gPSBfYS5yZXRyaWVzU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmIChlcnJvcnMpIHtcblx0ICAgICAgICAgICAgZXJyb3JzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHJldHJpZXNTdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgcmV0cmllc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnJldHJpZXMgPSBudWxsO1xuXHQgICAgfTtcblx0ICAgIFJldHJ5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB2YXIgX2EgPSB0aGlzLCBlcnJvcnMgPSBfYS5lcnJvcnMsIHJldHJpZXMgPSBfYS5yZXRyaWVzLCByZXRyaWVzU3Vic2NyaXB0aW9uID0gX2EucmV0cmllc1N1YnNjcmlwdGlvbjtcblx0ICAgICAgICB0aGlzLmVycm9ycyA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5yZXRyaWVzID0gbnVsbDtcblx0ICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcblx0ICAgICAgICB0aGlzLnJldHJpZXMgPSByZXRyaWVzO1xuXHQgICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IHJldHJpZXNTdWJzY3JpcHRpb247XG5cdCAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBSZXRyeVdoZW5TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyeVdoZW4uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1MzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHNhbXBsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NDApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2FtcGxlID0gc2FtcGxlXzEuc2FtcGxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zYW1wbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQsIHdoZW4gdGhlIHNwZWNpZmllZCBzYW1wbGVyIE9ic2VydmFibGUgZW1pdHMgYW4gaXRlbSBvciBjb21wbGV0ZXMsIGl0IHRoZW4gZW1pdHMgdGhlIG1vc3Rcblx0ICogcmVjZW50bHkgZW1pdHRlZCBpdGVtIChpZiBhbnkpIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHNpbmNlIHRoZSBwcmV2aW91cyBlbWlzc2lvbiBmcm9tIHRoZSBzYW1wbGVyXG5cdCAqIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvc2FtcGxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IHNhbXBsZXIgLSB0aGUgT2JzZXJ2YWJsZSB0byB1c2UgZm9yIHNhbXBsaW5nIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHRzIG9mIHNhbXBsaW5nIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoaXMgT2JzZXJ2YWJsZVxuXHQgKiB3aGVuZXZlciB0aGUgc2FtcGxlciBPYnNlcnZhYmxlIGVtaXRzIGFuIGl0ZW0gb3IgY29tcGxldGVzLlxuXHQgKiBAbWV0aG9kIHNhbXBsZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2FtcGxlKG5vdGlmaWVyKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTYW1wbGVPcGVyYXRvcihub3RpZmllcikpO1xuXHR9XG5cdGV4cG9ydHMuc2FtcGxlID0gc2FtcGxlO1xuXHR2YXIgU2FtcGxlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU2FtcGxlT3BlcmF0b3Iobm90aWZpZXIpIHtcblx0ICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG5cdCAgICB9XG5cdCAgICBTYW1wbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNhbXBsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTYW1wbGVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2FtcGxlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2FtcGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNhbXBsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIG5vdGlmaWVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG5vdGlmaWVyKSk7XG5cdCAgICB9XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTtcblx0ICAgIH07XG5cdCAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuXHQgICAgfTtcblx0ICAgIFNhbXBsZVN1YnNjcmliZXIucHJvdG90eXBlLmVtaXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuXHQgICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNhbXBsZVN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgc2FtcGxlVGltZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NDIpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2FtcGxlVGltZSA9IHNhbXBsZVRpbWVfMS5zYW1wbGVUaW1lO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zYW1wbGVUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBhc3luY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHQvKipcblx0ICogQHBhcmFtIGRlbGF5XG5cdCAqIEBwYXJhbSBzY2hlZHVsZXJcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2Qgc2FtcGxlVGltZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2FtcGxlVGltZShkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2FtcGxlVGltZU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLnNhbXBsZVRpbWUgPSBzYW1wbGVUaW1lO1xuXHR2YXIgU2FtcGxlVGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNhbXBsZVRpbWVPcGVyYXRvcihkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgU2FtcGxlVGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2FtcGxlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kZWxheSwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2FtcGxlVGltZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTYW1wbGVUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2FtcGxlVGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTYW1wbGVUaW1lU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXksIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5vdGlmaWNhdGlvbiwgZGVsYXksIHsgc3Vic2NyaWJlcjogdGhpcywgZGVsYXk6IGRlbGF5IH0pKTtcblx0ICAgIH1cblx0ICAgIFNhbXBsZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMubGFzdFZhbHVlID0gdmFsdWU7XG5cdCAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgU2FtcGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5sYXN0VmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2FtcGxlVGltZVN1YnNjcmliZXI7XG5cdH0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcblx0ZnVuY3Rpb24gZGlzcGF0Y2hOb3RpZmljYXRpb24oc3RhdGUpIHtcblx0ICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgZGVsYXkgPSBzdGF0ZS5kZWxheTtcblx0ICAgIHN1YnNjcmliZXIubm90aWZ5TmV4dCgpO1xuXHQgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgZGVsYXkpO1xuXHR9XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZVRpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHNjYW5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNjYW4gPSBzY2FuXzEuc2Nhbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2Nhbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogQXBwbGllcyBhbiBhY2N1bXVsYXRpb24gZnVuY3Rpb24gb3ZlciB0aGUgc291cmNlIE9ic2VydmFibGUsIGFuZCByZXR1cm5zIGVhY2hcblx0ICogaW50ZXJtZWRpYXRlIHJlc3VsdCwgd2l0aCBhbiBvcHRpb25hbCBzZWVkIHZhbHVlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayByZWR1Y2V9LCBidXQgZW1pdHMgdGhlIGN1cnJlbnRcblx0ICogYWNjdW11bGF0aW9uIHdoZW5ldmVyIHRoZSBzb3VyY2UgZW1pdHMgYSB2YWx1ZS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvc2Nhbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQ29tYmluZXMgdG9nZXRoZXIgYWxsIHZhbHVlcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UsIHVzaW5nIGFuIGFjY3VtdWxhdG9yXG5cdCAqIGZ1bmN0aW9uIHRoYXQga25vd3MgaG93IHRvIGpvaW4gYSBuZXcgc291cmNlIHZhbHVlIGludG8gdGhlIGFjY3VtdWxhdGlvbiBmcm9tXG5cdCAqIHRoZSBwYXN0LiBJcyBzaW1pbGFyIHRvIHtAbGluayByZWR1Y2V9LCBidXQgZW1pdHMgdGhlIGludGVybWVkaWF0ZVxuXHQgKiBhY2N1bXVsYXRpb25zLlxuXHQgKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBhcHBsaWVzIGEgc3BlY2lmaWVkIGBhY2N1bXVsYXRvcmAgZnVuY3Rpb24gdG8gZWFjaFxuXHQgKiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiBhIGBzZWVkYCB2YWx1ZSBpcyBzcGVjaWZpZWQsIHRoZW5cblx0ICogdGhhdCB2YWx1ZSB3aWxsIGJlIHVzZWQgYXMgdGhlIGluaXRpYWwgdmFsdWUgZm9yIHRoZSBhY2N1bXVsYXRvci4gSWYgbm8gc2VlZFxuXHQgKiB2YWx1ZSBpcyBzcGVjaWZpZWQsIHRoZSBmaXJzdCBpdGVtIG9mIHRoZSBzb3VyY2UgaXMgdXNlZCBhcyB0aGUgc2VlZC5cblx0ICpcblx0ICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnQgdGhlIG51bWJlciBvZiBjbGljayBldmVudHM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBvbmVzID0gY2xpY2tzLm1hcFRvKDEpO1xuXHQgKiB2YXIgc2VlZCA9IDA7XG5cdCAqIHZhciBjb3VudCA9IG9uZXMuc2NhbigoYWNjLCBvbmUpID0+IGFjYyArIG9uZSwgc2VlZCk7XG5cdCAqIGNvdW50LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgZXhwYW5kfVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG5cdCAqIEBzZWUge0BsaW5rIHJlZHVjZX1cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbihhY2M6IFIsIHZhbHVlOiBUKTogUn0gYWNjdW11bGF0b3IgVGhlIGFjY3VtdWxhdG9yIGZ1bmN0aW9uXG5cdCAqIGNhbGxlZCBvbiBlYWNoIHNvdXJjZSB2YWx1ZS5cblx0ICogQHBhcmFtIHtUfFJ9IFtzZWVkXSBUaGUgaW5pdGlhbCBhY2N1bXVsYXRpb24gdmFsdWUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59IEFuIG9ic2VydmFibGUgb2YgdGhlIGFjY3VtdWxhdGVkIHZhbHVlcy5cblx0ICogQG1ldGhvZCBzY2FuXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBzY2FuKGFjY3VtdWxhdG9yLCBzZWVkKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTY2FuT3BlcmF0b3IoYWNjdW11bGF0b3IsIHNlZWQpKTtcblx0fVxuXHRleHBvcnRzLnNjYW4gPSBzY2FuO1xuXHR2YXIgU2Nhbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNjYW5PcGVyYXRvcihhY2N1bXVsYXRvciwgc2VlZCkge1xuXHQgICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjtcblx0ICAgICAgICB0aGlzLnNlZWQgPSBzZWVkO1xuXHQgICAgfVxuXHQgICAgU2Nhbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2NhblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5hY2N1bXVsYXRvciwgdGhpcy5zZWVkKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNjYW5PcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2NhblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFNjYW5TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gU2NhblN1YnNjcmliZXIoZGVzdGluYXRpb24sIGFjY3VtdWxhdG9yLCBzZWVkKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjtcblx0ICAgICAgICB0aGlzLmFjY3VtdWxhdG9yU2V0ID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcblx0ICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG5cdCAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHR5cGVvZiBzZWVkICE9PSAndW5kZWZpbmVkJztcblx0ICAgIH1cblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTY2FuU3Vic2NyaWJlci5wcm90b3R5cGUsIFwic2VlZFwiLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWVkO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHRydWU7XG5cdCAgICAgICAgICAgIHRoaXMuX3NlZWQgPSB2YWx1ZTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIFNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIGlmICghdGhpcy5hY2N1bXVsYXRvclNldCkge1xuXHQgICAgICAgICAgICB0aGlzLnNlZWQgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl90cnlOZXh0KHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmFjY3VtdWxhdG9yKHRoaXMuc2VlZCwgdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5zZWVkID0gcmVzdWx0O1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTY2FuU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zY2FuLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBzaGFyZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NDYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2hhcmUgPSBzaGFyZV8xLnNoYXJlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBtdWx0aWNhc3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQ1KTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdGZ1bmN0aW9uIHNoYXJlU3ViamVjdEZhY3RvcnkoKSB7XG5cdCAgICByZXR1cm4gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdH1cblx0LyoqXG5cdCAqIFJldHVybnMgYSBuZXcgT2JzZXJ2YWJsZSB0aGF0IG11bHRpY2FzdHMgKHNoYXJlcykgdGhlIG9yaWdpbmFsIE9ic2VydmFibGUuIEFzIGxvbmcgYXMgdGhlcmUgaXMgYXQgbGVhc3Qgb25lXG5cdCAqIFN1YnNjcmliZXIgdGhpcyBPYnNlcnZhYmxlIHdpbGwgYmUgc3Vic2NyaWJlZCBhbmQgZW1pdHRpbmcgZGF0YS4gV2hlbiBhbGwgc3Vic2NyaWJlcnMgaGF2ZSB1bnN1YnNjcmliZWQgaXQgd2lsbFxuXHQgKiB1bnN1YnNjcmliZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gQmVjYXVzZSB0aGUgT2JzZXJ2YWJsZSBpcyBtdWx0aWNhc3RpbmcgaXQgbWFrZXMgdGhlIHN0cmVhbSBgaG90YC5cblx0ICogVGhpcyBpcyBhbiBhbGlhcyBmb3IgLnB1Ymxpc2goKS5yZWZDb3VudCgpLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NoYXJlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgdXBvbiBjb25uZWN0aW9uIGNhdXNlcyB0aGUgc291cmNlIE9ic2VydmFibGUgdG8gZW1pdCBpdGVtcyB0byBpdHMgT2JzZXJ2ZXJzXG5cdCAqIEBtZXRob2Qgc2hhcmVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHNoYXJlKCkge1xuXHQgICAgcmV0dXJuIG11bHRpY2FzdF8xLm11bHRpY2FzdC5jYWxsKHRoaXMsIHNoYXJlU3ViamVjdEZhY3RvcnkpLnJlZkNvdW50KCk7XG5cdH1cblx0ZXhwb3J0cy5zaGFyZSA9IHNoYXJlO1xuXHQ7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXJlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQ3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBzaW5nbGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ4KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNpbmdsZSA9IHNpbmdsZV8xLnNpbmdsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2luZ2xlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTQ4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBFbXB0eUVycm9yXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4Nyk7XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgc2luZ2xlIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBtYXRjaGVzIGEgc3BlY2lmaWVkXG5cdCAqIHByZWRpY2F0ZSwgaWYgdGhhdCBPYnNlcnZhYmxlIGVtaXRzIG9uZSBzdWNoIGl0ZW0uIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0cyBtb3JlIHRoYW4gb25lIHN1Y2ggaXRlbSBvciBub1xuXHQgKiBzdWNoIGl0ZW1zLCBub3RpZnkgb2YgYW4gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIG9yIE5vU3VjaEVsZW1lbnRFeGNlcHRpb24gcmVzcGVjdGl2ZWx5LlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3NpbmdsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogQHRocm93cyB7RW1wdHlFcnJvcn0gRGVsaXZlcnMgYW4gRW1wdHlFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgXG5cdCAqIGNhbGxiYWNrIGlmIHRoZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBiZWZvcmUgYW55IGBuZXh0YCBub3RpZmljYXRpb24gd2FzIHNlbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGEgcHJlZGljYXRlIGZ1bmN0aW9uIHRvIGV2YWx1YXRlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHNpbmdsZSBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRoYXQgbWF0Y2hlc1xuXHQgKiB0aGUgcHJlZGljYXRlLlxuXHQgLlxuXHQgKiBAbWV0aG9kIHNpbmdsZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2luZ2xlKHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2luZ2xlT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzKSk7XG5cdH1cblx0ZXhwb3J0cy5zaW5nbGUgPSBzaW5nbGU7XG5cdHZhciBTaW5nbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTaW5nbGVPcGVyYXRvcihwcmVkaWNhdGUsIHNvdXJjZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgfVxuXHQgICAgU2luZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTaW5nbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnNvdXJjZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTaW5nbGVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2luZ2xlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2luZ2xlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNpbmdsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgc291cmNlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXHQgICAgICAgIHRoaXMuc2VlblZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICB9XG5cdCAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5hcHBseVNpbmdsZVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuc2VlblZhbHVlKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoJ1NlcXVlbmNlIGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgZWxlbWVudCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5zZWVuVmFsdWUgPSB0cnVlO1xuXHQgICAgICAgICAgICB0aGlzLnNpbmdsZVZhbHVlID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHByZWRpY2F0ZSA9IHRoaXMucHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuaW5kZXgrKztcblx0ICAgICAgICBpZiAocHJlZGljYXRlKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5TmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmFwcGx5U2luZ2xlVmFsdWUodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLnNvdXJjZSk7XG5cdCAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTaW5nbGVWYWx1ZSh2YWx1ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmICh0aGlzLmluZGV4ID4gMCkge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHRoaXMuc2VlblZhbHVlID8gdGhpcy5zaW5nbGVWYWx1ZSA6IHVuZGVmaW5lZCk7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgRW1wdHlFcnJvcl8xLkVtcHR5RXJyb3IpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2luZ2xlU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zaW5nbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHNraXBfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNraXAgPSBza2lwXzEuc2tpcDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgYG5gIGl0ZW1zIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9za2lwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gdGhlIGBuYCBvZiB0aW1lcywgaXRlbXMgZW1pdHRlZCBieSBzb3VyY2UgT2JzZXJ2YWJsZSBzaG91bGQgYmUgc2tpcHBlZC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICpcblx0ICogQG1ldGhvZCBza2lwXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBza2lwKHRvdGFsKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTa2lwT3BlcmF0b3IodG90YWwpKTtcblx0fVxuXHRleHBvcnRzLnNraXAgPSBza2lwO1xuXHR2YXIgU2tpcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNraXBPcGVyYXRvcih0b3RhbCkge1xuXHQgICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcblx0ICAgIH1cblx0ICAgIFNraXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNraXBTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudG90YWwpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2tpcE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBTa2lwU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2tpcFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTa2lwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgfVxuXHQgICAgU2tpcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICBpZiAoKyt0aGlzLmNvdW50ID4gdGhpcy50b3RhbCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoeCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTa2lwU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1za2lwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBza2lwVW50aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUyKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNraXBVbnRpbCA9IHNraXBVbnRpbF8xLnNraXBVbnRpbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcFVudGlsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTUyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHVudGlsIGEgc2Vjb25kIE9ic2VydmFibGUgZW1pdHMgYW4gaXRlbS5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9za2lwVW50aWwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gdGhlIHNlY29uZCBPYnNlcnZhYmxlIHRoYXQgaGFzIHRvIGVtaXQgYW4gaXRlbSBiZWZvcmUgdGhlIHNvdXJjZSBPYnNlcnZhYmxlJ3MgZWxlbWVudHMgYmVnaW4gdG9cblx0ICogYmUgbWlycm9yZWQgYnkgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdW50aWwgdGhlIHNlY29uZCBPYnNlcnZhYmxlIGVtaXRzXG5cdCAqIGFuIGl0ZW0sIHRoZW4gZW1pdHMgdGhlIHJlbWFpbmluZyBpdGVtcy5cblx0ICogQG1ldGhvZCBza2lwVW50aWxcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHNraXBVbnRpbChub3RpZmllcikge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2tpcFVudGlsT3BlcmF0b3Iobm90aWZpZXIpKTtcblx0fVxuXHRleHBvcnRzLnNraXBVbnRpbCA9IHNraXBVbnRpbDtcblx0dmFyIFNraXBVbnRpbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNraXBVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSB7XG5cdCAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuXHQgICAgfVxuXHQgICAgU2tpcFVudGlsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwVW50aWxTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2tpcFVudGlsT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFNraXBVbnRpbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFNraXBVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTa2lwVW50aWxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5pc0lubmVyU3RvcHBlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgbm90aWZpZXIpKTtcblx0ICAgIH1cblx0ICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmlzSW5uZXJTdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBTa2lwVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmlzSW5uZXJTdG9wcGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFNraXBVbnRpbFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBVbnRpbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgc2tpcFdoaWxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1NCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwV2hpbGUgPSBza2lwV2hpbGVfMS5za2lwV2hpbGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBXaGlsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgYWxsIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFzIGxvbmcgYXMgYSBzcGVjaWZpZWQgY29uZGl0aW9uIGhvbGRzXG5cdCAqIHRydWUsIGJ1dCBlbWl0cyBhbGwgZnVydGhlciBzb3VyY2UgaXRlbXMgYXMgc29vbiBhcyB0aGUgY29uZGl0aW9uIGJlY29tZXMgZmFsc2UuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvc2tpcFdoaWxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgLSBhIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBpdGVtIGVtaXR0ZWQgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IGFuIE9ic2VydmFibGUgdGhhdCBiZWdpbnMgZW1pdHRpbmcgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgd2hlbiB0aGVcblx0ICogc3BlY2lmaWVkIHByZWRpY2F0ZSBiZWNvbWVzIGZhbHNlLlxuXHQgKiBAbWV0aG9kIHNraXBXaGlsZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc2tpcFdoaWxlKHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2tpcFdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSk7XG5cdH1cblx0ZXhwb3J0cy5za2lwV2hpbGUgPSBza2lwV2hpbGU7XG5cdHZhciBTa2lwV2hpbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTa2lwV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpIHtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgIH1cblx0ICAgIFNraXBXaGlsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2tpcFdoaWxlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTa2lwV2hpbGVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU2tpcFdoaWxlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU2tpcFdoaWxlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFNraXBXaGlsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcblx0ICAgICAgICB0aGlzLnNraXBwaW5nID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLmluZGV4ID0gMDtcblx0ICAgIH1cblx0ICAgIFNraXBXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBpZiAodGhpcy5za2lwcGluZykge1xuXHQgICAgICAgICAgICB0aGlzLnRyeUNhbGxQcmVkaWNhdGUodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIXRoaXMuc2tpcHBpbmcpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFNraXBXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLnRyeUNhbGxQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUodmFsdWUsIHRoaXMuaW5kZXgrKyk7XG5cdCAgICAgICAgICAgIHRoaXMuc2tpcHBpbmcgPSBCb29sZWFuKHJlc3VsdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gU2tpcFdoaWxlU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1za2lwV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHN0YXJ0V2l0aF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NTYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3RhcnRXaXRoID0gc3RhcnRXaXRoXzEuc3RhcnRXaXRoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdGFydFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdHZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MSk7XG5cdHZhciBFbXB0eU9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYyKTtcblx0dmFyIGNvbmNhdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzEpO1xuXHR2YXIgaXNTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiBhIHNwZWNpZmllZCBJdGVyYWJsZSBiZWZvcmUgaXQgYmVnaW5zIHRvIGVtaXQgaXRlbXMgZW1pdHRlZCBieSB0aGVcblx0ICogc291cmNlIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvc3RhcnRXaXRoLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge1ZhbHVlc30gYW4gSXRlcmFibGUgdGhhdCBjb250YWlucyB0aGUgaXRlbXMgeW91IHdhbnQgdGhlIG1vZGlmaWVkIE9ic2VydmFibGUgdG8gZW1pdCBmaXJzdC5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBpbiB0aGUgc3BlY2lmaWVkIEl0ZXJhYmxlIGFuZCB0aGVuIGVtaXRzIHRoZSBpdGVtc1xuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBzdGFydFdpdGhcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN0YXJ0V2l0aCgpIHtcblx0ICAgIHZhciBhcnJheSA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBhcnJheVtfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcblx0ICAgIH1cblx0ICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcblx0ICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcblx0ICAgICAgICBhcnJheS5wb3AoKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHNjaGVkdWxlciA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoO1xuXHQgICAgaWYgKGxlbiA9PT0gMSkge1xuXHQgICAgICAgIHJldHVybiBjb25jYXRfMS5jb25jYXRTdGF0aWMobmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKGxlbiA+IDEpIHtcblx0ICAgICAgICByZXR1cm4gY29uY2F0XzEuY29uY2F0U3RhdGljKG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlciksIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGNvbmNhdF8xLmNvbmNhdFN0YXRpYyhuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlciksIHRoaXMpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMuc3RhcnRXaXRoID0gc3RhcnRXaXRoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zdGFydFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHN1YnNjcmliZU9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1OCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVPbiA9IHN1YnNjcmliZU9uXzEuc3Vic2NyaWJlT247XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZU9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIFN1YnNjcmliZU9uT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NTkpO1xuXHQvKipcblx0ICogQXN5bmNocm9ub3VzbHkgc3Vic2NyaWJlcyBPYnNlcnZlcnMgdG8gdGhpcyBPYnNlcnZhYmxlIG9uIHRoZSBzcGVjaWZpZWQgU2NoZWR1bGVyLlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3N1YnNjcmliZU9uLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBAcGFyYW0ge1NjaGVkdWxlcn0gdGhlIFNjaGVkdWxlciB0byBwZXJmb3JtIHN1YnNjcmlwdGlvbiBhY3Rpb25zIG9uLlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSB0aGUgc291cmNlIE9ic2VydmFibGUgbW9kaWZpZWQgc28gdGhhdCBpdHMgc3Vic2NyaXB0aW9ucyBoYXBwZW4gb24gdGhlIHNwZWNpZmllZCBTY2hlZHVsZXJcblx0IC5cblx0ICogQG1ldGhvZCBzdWJzY3JpYmVPblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gc3Vic2NyaWJlT24oc2NoZWR1bGVyLCBkZWxheSkge1xuXHQgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICByZXR1cm4gbmV3IFN1YnNjcmliZU9uT2JzZXJ2YWJsZV8xLlN1YnNjcmliZU9uT2JzZXJ2YWJsZSh0aGlzLCBkZWxheSwgc2NoZWR1bGVyKTtcblx0fVxuXHRleHBvcnRzLnN1YnNjcmliZU9uID0gc3Vic2NyaWJlT247XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZU9uLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTU5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciBhc2FwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2MCk7XG5cdHZhciBpc051bWVyaWNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAwKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKiBAaGlkZSB0cnVlXG5cdCAqL1xuXHR2YXIgU3Vic2NyaWJlT25PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTdWJzY3JpYmVPbk9ic2VydmFibGUsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTdWJzY3JpYmVPbk9ic2VydmFibGUoc291cmNlLCBkZWxheVRpbWUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIGlmIChkZWxheVRpbWUgPT09IHZvaWQgMCkgeyBkZWxheVRpbWUgPSAwOyB9XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzYXBfMS5hc2FwOyB9XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cdCAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgdGhpcy5kZWxheVRpbWUgPSBkZWxheVRpbWU7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICAgICAgaWYgKCFpc051bWVyaWNfMS5pc051bWVyaWMoZGVsYXlUaW1lKSB8fCBkZWxheVRpbWUgPCAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVsYXlUaW1lID0gMDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFzY2hlZHVsZXIgfHwgdHlwZW9mIHNjaGVkdWxlci5zY2hlZHVsZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IGFzYXBfMS5hc2FwO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc291cmNlLCBkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzYXBfMS5hc2FwOyB9XG5cdCAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVPbk9ic2VydmFibGUoc291cmNlLCBkZWxheSwgc2NoZWR1bGVyKTtcblx0ICAgIH07XG5cdCAgICBTdWJzY3JpYmVPbk9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgdmFyIHNvdXJjZSA9IGFyZy5zb3VyY2UsIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcblx0ICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcblx0ICAgIH07XG5cdCAgICBTdWJzY3JpYmVPbk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuXHQgICAgICAgIHZhciBkZWxheSA9IHRoaXMuZGVsYXlUaW1lO1xuXHQgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG5cdCAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShTdWJzY3JpYmVPbk9ic2VydmFibGUuZGlzcGF0Y2gsIGRlbGF5LCB7XG5cdCAgICAgICAgICAgIHNvdXJjZTogc291cmNlLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyXG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN1YnNjcmliZU9uT2JzZXJ2YWJsZTtcblx0fShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuXHRleHBvcnRzLlN1YnNjcmliZU9uT2JzZXJ2YWJsZSA9IFN1YnNjcmliZU9uT2JzZXJ2YWJsZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaWJlT25PYnNlcnZhYmxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIEFzYXBTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYxKTtcblx0ZXhwb3J0cy5hc2FwID0gbmV3IEFzYXBTY2hlZHVsZXJfMS5Bc2FwU2NoZWR1bGVyKCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzYXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgQXNhcEFjdGlvbl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NjIpO1xuXHR2YXIgUXVldWVTY2hlZHVsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDA0KTtcblx0dmFyIEFzYXBTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKEFzYXBTY2hlZHVsZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBc2FwU2NoZWR1bGVyKCkge1xuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgICAgQXNhcFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVOb3cgPSBmdW5jdGlvbiAod29yaywgc3RhdGUpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEFzYXBBY3Rpb25fMS5Bc2FwQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXNhcFNjaGVkdWxlcjtcblx0fShRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKSk7XG5cdGV4cG9ydHMuQXNhcFNjaGVkdWxlciA9IEFzYXBTY2hlZHVsZXI7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzYXBTY2hlZHVsZXIuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgSW1tZWRpYXRlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2Myk7XG5cdHZhciBGdXR1cmVBY3Rpb25fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAzKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgQXNhcEFjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXNhcEFjdGlvbiwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIEFzYXBBY3Rpb24oKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBBc2FwQWN0aW9uLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG5cdCAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG5cdCAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKHRoaXMpO1xuXHQgICAgICAgIGlmICghc2NoZWR1bGVyLnNjaGVkdWxlZElkKSB7XG5cdCAgICAgICAgICAgIHNjaGVkdWxlci5zY2hlZHVsZWRJZCA9IEltbWVkaWF0ZV8xLkltbWVkaWF0ZS5zZXRJbW1lZGlhdGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlZElkID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHQgICAgQXNhcEFjdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcblx0ICAgICAgICB2YXIgc2NoZWR1bGVkSWQgPSBzY2hlZHVsZXIuc2NoZWR1bGVkSWQsIGFjdGlvbnMgPSBzY2hlZHVsZXIuYWN0aW9ucztcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLl91bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuXHQgICAgICAgIGlmIChhY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgICAgICBzY2hlZHVsZXIuYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIGlmIChzY2hlZHVsZWRJZCAhPSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgSW1tZWRpYXRlXzEuSW1tZWRpYXRlLmNsZWFySW1tZWRpYXRlKHNjaGVkdWxlZElkKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gQXNhcEFjdGlvbjtcblx0fShGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24pKTtcblx0ZXhwb3J0cy5Bc2FwQWN0aW9uID0gQXNhcEFjdGlvbjtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9QXNhcEFjdGlvbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGNsZWFySW1tZWRpYXRlLCBzZXRJbW1lZGlhdGUpIHsvKipcblx0U29tZSBjcmVkaXQgZm9yIHRoaXMgaGVscGVyIGdvZXMgdG8gaHR0cDovL2dpdGh1Yi5jb20vWXV6dUpTL3NldEltbWVkaWF0ZVxuXHQqL1xuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHJvb3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdHZhciBJbW1lZGlhdGVEZWZpbml0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEltbWVkaWF0ZURlZmluaXRpb24ocm9vdCkge1xuXHQgICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XG5cdCAgICAgICAgaWYgKHJvb3Quc2V0SW1tZWRpYXRlICYmIHR5cGVvZiByb290LnNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHJvb3Quc2V0SW1tZWRpYXRlLmJpbmQocm9vdCk7XG5cdCAgICAgICAgICAgIHRoaXMuY2xlYXJJbW1lZGlhdGUgPSByb290LmNsZWFySW1tZWRpYXRlLmJpbmQocm9vdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLm5leHRIYW5kbGUgPSAxO1xuXHQgICAgICAgICAgICB0aGlzLnRhc2tzQnlIYW5kbGUgPSB7fTtcblx0ICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgICAgICAgICBpZiAodGhpcy5jYW5Vc2VQcm9jZXNzTmV4dFRpY2soKSkge1xuXHQgICAgICAgICAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVByb2Nlc3NOZXh0VGlja1NldEltbWVkaWF0ZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVBvc3RNZXNzYWdlU2V0SW1tZWRpYXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jYW5Vc2VNZXNzYWdlQ2hhbm5lbCgpKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jYW5Vc2VSZWFkeVN0YXRlQ2hhbmdlKCkpIHtcblx0ICAgICAgICAgICAgICAgIC8vIEZvciBJRSA24oCTOFxuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVJlYWR5U3RhdGVDaGFuZ2VTZXRJbW1lZGlhdGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZVNldFRpbWVvdXRTZXRJbW1lZGlhdGUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgY2kgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgICAgIGRlbGV0ZSBjbGVhckltbWVkaWF0ZS5pbnN0YW5jZS50YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGNpLmluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICAgICAgdGhpcy5jbGVhckltbWVkaWF0ZSA9IGNpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5yb290Lk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VQcm9jZXNzTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaWRlbnRpZnkodGhpcy5yb290LnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlTWVzc2FnZUNoYW5uZWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsKTtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VSZWFkeVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkb2N1bWVudCA9IHRoaXMucm9vdC5kb2N1bWVudDtcblx0ICAgICAgICByZXR1cm4gQm9vbGVhbihkb2N1bWVudCAmJiAnb25yZWFkeXN0YXRlY2hhbmdlJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSk7XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHJvb3QgPSB0aGlzLnJvb3Q7XG5cdCAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuXHQgICAgICAgIC8vIHdoZXJlIGByb290LnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cblx0ICAgICAgICBpZiAocm9vdC5wb3N0TWVzc2FnZSAmJiAhcm9vdC5pbXBvcnRTY3JpcHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzXzEgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gcm9vdC5vbm1lc3NhZ2U7XG5cdCAgICAgICAgICAgIHJvb3Qub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHJvb3QucG9zdE1lc3NhZ2UoJycsICcqJyk7XG5cdCAgICAgICAgICAgIHJvb3Qub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHQgICAgLy8gVGhpcyBmdW5jdGlvbiBhY2NlcHRzIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBzZXRJbW1lZGlhdGUsIGJ1dFxuXHQgICAgLy8gcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmVxdWlyZXMgbm8gYXJndW1lbnRzLlxuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUucGFydGlhbGx5QXBwbGllZCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiByZXN1bHQoKSB7XG5cdCAgICAgICAgICAgIHZhciBfYSA9IHJlc3VsdCwgaGFuZGxlciA9IF9hLmhhbmRsZXIsIGFyZ3MgPSBfYS5hcmdzO1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIChuZXcgRnVuY3Rpb24oJycgKyBoYW5kbGVyKSkoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaGFuZGxlciA9IGhhbmRsZXI7XG5cdCAgICAgICAgZm4uYXJncyA9IGFyZ3M7XG5cdCAgICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHRoaXMudGFza3NCeUhhbmRsZVt0aGlzLm5leHRIYW5kbGVdID0gdGhpcy5wYXJ0aWFsbHlBcHBsaWVkLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMubmV4dEhhbmRsZSsrO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZVByb2Nlc3NOZXh0VGlja1NldEltbWVkaWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoKSB7XG5cdCAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHNldEltbWVkaWF0ZS5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wcm9jZXNzLm5leHRUaWNrKGluc3RhbmNlLnBhcnRpYWxseUFwcGxpZWQoaW5zdGFuY2UucnVuSWZQcmVzZW50LCBoYW5kbGUpKTtcblx0ICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGZuLmluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICByZXR1cm4gZm47XG5cdCAgICB9O1xuXHQgICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHQgICAgICAgIHZhciByb290ID0gdGhpcy5yb290O1xuXHQgICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gJ3NldEltbWVkaWF0ZSQnICsgcm9vdC5NYXRoLnJhbmRvbSgpICsgJyQnO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbiBnbG9iYWxNZXNzYWdlSGFuZGxlcihldmVudCkge1xuXHQgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBnbG9iYWxNZXNzYWdlSGFuZGxlci5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gcm9vdCAmJlxuXHQgICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnICYmXG5cdCAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIGluc3RhbmNlLnJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBvbkdsb2JhbE1lc3NhZ2UuaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuXHQgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcblx0ICAgICAgICAgICAgdmFyIF9hID0gc2V0SW1tZWRpYXRlLCBtZXNzYWdlUHJlZml4ID0gX2EubWVzc2FnZVByZWZpeCwgaW5zdGFuY2UgPSBfYS5pbnN0YW5jZTtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCAnKicpO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIGZuLm1lc3NhZ2VQcmVmaXggPSBtZXNzYWdlUHJlZml4O1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5ydW5JZlByZXNlbnQgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG5cdCAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogJ1dhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLidcblx0ICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuXHQgICAgICAgIGlmICh0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuXHQgICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuXHQgICAgICAgICAgICAvLyAndG9vIG11Y2ggcmVjdXJzaW9uJyBlcnJvci5cblx0ICAgICAgICAgICAgdGhpcy5yb290LnNldFRpbWVvdXQodGhpcy5wYXJ0aWFsbHlBcHBsaWVkKHRoaXMucnVuSWZQcmVzZW50LCBoYW5kbGUpLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gdGhpcy50YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIGlmICh0YXNrKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRhc2soKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdCAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgdGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIF90aGlzLnJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuXHQgICAgICAgICAgICB2YXIgX2EgPSBzZXRJbW1lZGlhdGUsIGNoYW5uZWwgPSBfYS5jaGFubmVsLCBpbnN0YW5jZSA9IF9hLmluc3RhbmNlO1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG5cdCAgICAgICAgICAgIHJldHVybiBoYW5kbGU7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBmbi5jaGFubmVsID0gY2hhbm5lbDtcblx0ICAgICAgICBmbi5pbnN0YW5jZSA9IHRoaXM7XG5cdCAgICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfTtcblx0ICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZVJlYWR5U3RhdGVDaGFuZ2VTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuXHQgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBzZXRJbW1lZGlhdGUuaW5zdGFuY2U7XG5cdCAgICAgICAgICAgIHZhciByb290ID0gaW5zdGFuY2Uucm9vdDtcblx0ICAgICAgICAgICAgdmFyIGRvYyA9IHJvb3QuZG9jdW1lbnQ7XG5cdCAgICAgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGluc3RhbmNlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG5cdCAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG5cdCAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBpbnN0YW5jZS5ydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVTZXRUaW1lb3V0U2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcblx0ICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gc2V0SW1tZWRpYXRlLmluc3RhbmNlO1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICBpbnN0YW5jZS5yb290LnNldFRpbWVvdXQoaW5zdGFuY2UucGFydGlhbGx5QXBwbGllZChpbnN0YW5jZS5ydW5JZlByZXNlbnQsIGhhbmRsZSksIDApO1xuXHQgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmbjtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gSW1tZWRpYXRlRGVmaW5pdGlvbjtcblx0fSgpKTtcblx0ZXhwb3J0cy5JbW1lZGlhdGVEZWZpbml0aW9uID0gSW1tZWRpYXRlRGVmaW5pdGlvbjtcblx0ZXhwb3J0cy5JbW1lZGlhdGUgPSBuZXcgSW1tZWRpYXRlRGVmaW5pdGlvbihyb290XzEucm9vdCk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUltbWVkaWF0ZS5qcy5tYXBcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNTY0KS5jbGVhckltbWVkaWF0ZSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1NjQpLnNldEltbWVkaWF0ZSkpXG5cbi8qKiovIH0sXG4vKiA1NjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihzZXRJbW1lZGlhdGUsIGNsZWFySW1tZWRpYXRlKSB7dmFyIG5leHRUaWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NjUpLm5leHRUaWNrO1xuXHR2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cdHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblx0dmFyIGltbWVkaWF0ZUlkcyA9IHt9O1xuXHR2YXIgbmV4dEltbWVkaWF0ZUlkID0gMDtcblx0XG5cdC8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cdFxuXHRleHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG5cdH07XG5cdGV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcblx0fTtcblx0ZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuXHRleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7IHRpbWVvdXQuY2xvc2UoKTsgfTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblx0VGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cblx0ZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHRcblx0ICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcblx0ICBpZiAobXNlY3MgPj0gMCkge1xuXHQgICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuXHQgICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuXHQgICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuXHQgICAgfSwgbXNlY3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIFRoYXQncyBub3QgaG93IG5vZGUuanMgaW1wbGVtZW50cyBpdCBidXQgdGhlIGV4cG9zZWQgYXBpIGlzIHRoZSBzYW1lLlxuXHRleHBvcnRzLnNldEltbWVkaWF0ZSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHNldEltbWVkaWF0ZSA6IGZ1bmN0aW9uKGZuKSB7XG5cdCAgdmFyIGlkID0gbmV4dEltbWVkaWF0ZUlkKys7XG5cdCAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGZhbHNlIDogc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRcblx0ICBpbW1lZGlhdGVJZHNbaWRdID0gdHJ1ZTtcblx0XG5cdCAgbmV4dFRpY2soZnVuY3Rpb24gb25OZXh0VGljaygpIHtcblx0ICAgIGlmIChpbW1lZGlhdGVJZHNbaWRdKSB7XG5cdCAgICAgIC8vIGZuLmNhbGwoKSBpcyBmYXN0ZXIgc28gd2Ugb3B0aW1pemUgZm9yIHRoZSBjb21tb24gdXNlLWNhc2Vcblx0ICAgICAgLy8gQHNlZSBodHRwOi8vanNwZXJmLmNvbS9jYWxsLWFwcGx5LXNlZ3Vcblx0ICAgICAgaWYgKGFyZ3MpIHtcblx0ICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmbi5jYWxsKG51bGwpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIFByZXZlbnQgaWRzIGZyb20gbGVha2luZ1xuXHQgICAgICBleHBvcnRzLmNsZWFySW1tZWRpYXRlKGlkKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGlkO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHR5cGVvZiBjbGVhckltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gY2xlYXJJbW1lZGlhdGUgOiBmdW5jdGlvbihpZCkge1xuXHQgIGRlbGV0ZSBpbW1lZGlhdGVJZHNbaWRdO1xuXHR9O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg1NjQpLnNldEltbWVkaWF0ZSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1NjQpLmNsZWFySW1tZWRpYXRlKSlcblxuLyoqKi8gfSxcbi8qIDU2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9ICgpKVxuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0XG5cdFxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDU2NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgc3dpdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2Nyk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2ggPSBzd2l0Y2hfMS5fc3dpdGNoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2guanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogQ29udmVydHMgYSBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZSBpbnRvIGEgZmlyc3Qtb3JkZXIgT2JzZXJ2YWJsZSBieVxuXHQgKiBzdWJzY3JpYmluZyB0byBvbmx5IHRoZSBtb3N0IHJlY2VudGx5IGVtaXR0ZWQgb2YgdGhvc2UgaW5uZXIgT2JzZXJ2YWJsZXMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5GbGF0dGVucyBhbiBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzIGJ5IGRyb3BwaW5nIHRoZVxuXHQgKiBwcmV2aW91cyBpbm5lciBPYnNlcnZhYmxlIG9uY2UgYSBuZXcgb25lIGFwcGVhcnMuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYHN3aXRjaGAgc3Vic2NyaWJlcyB0byBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgT2JzZXJ2YWJsZXMsIGFsc28ga25vd24gYXMgYVxuXHQgKiBoaWdoZXItb3JkZXIgT2JzZXJ2YWJsZS4gRWFjaCB0aW1lIGl0IG9ic2VydmVzIG9uZSBvZiB0aGVzZSBlbWl0dGVkIGlubmVyXG5cdCAqIE9ic2VydmFibGVzLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgc3Vic2NyaWJlcyB0byB0aGUgaW5uZXIgT2JzZXJ2YWJsZSBhbmRcblx0ICogYmVnaW5zIGVtaXR0aW5nIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoYXQuIFNvIGZhciwgaXQgYmVoYXZlc1xuXHQgKiBsaWtlIHtAbGluayBtZXJnZUFsbH0uIEhvd2V2ZXIsIHdoZW4gYSBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBpcyBlbWl0dGVkLFxuXHQgKiBgc3dpdGNoYCB1bnN1YnNjcmliZXMgZnJvbSB0aGUgZWFybGllci1lbWl0dGVkIGlubmVyIE9ic2VydmFibGUgYW5kXG5cdCAqIHN1YnNjcmliZXMgdG8gdGhlIG5ldyBpbm5lciBPYnNlcnZhYmxlIGFuZCBiZWdpbnMgZW1pdHRpbmcgaXRlbXMgZnJvbSBpdC4gSXRcblx0ICogY29udGludWVzIHRvIGJlaGF2ZSBsaWtlIHRoaXMgZm9yIHN1YnNlcXVlbnQgaW5uZXIgT2JzZXJ2YWJsZXMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPlJlcnVuIGFuIGludGVydmFsIE9ic2VydmFibGUgb24gZXZlcnkgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIC8vIEVhY2ggY2xpY2sgZXZlbnQgaXMgbWFwcGVkIHRvIGFuIE9ic2VydmFibGUgdGhhdCB0aWNrcyBldmVyeSBzZWNvbmRcblx0ICogdmFyIGhpZ2hlck9yZGVyID0gY2xpY2tzLm1hcCgoZXYpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuXHQgKiB2YXIgc3dpdGNoZWQgPSBoaWdoZXJPcmRlci5zd2l0Y2goKTtcblx0ICogLy8gVGhlIG91dGNvbWUgaXMgdGhhdCBgc3dpdGNoZWRgIGlzIGVzc2VudGlhbGx5IGEgdGltZXIgdGhhdCByZXN0YXJ0c1xuXHQgKiAvLyBvbiBldmVyeSBjbGljay4gVGhlIGludGVydmFsIE9ic2VydmFibGVzIGZyb20gb2xkZXIgY2xpY2tzIGRvIG5vdCBtZXJnZVxuXHQgKiAvLyB3aXRoIHRoZSBjdXJyZW50IGludGVydmFsIE9ic2VydmFibGUuXG5cdCAqIHN3aXRjaGVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcblx0ICpcblx0ICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cblx0ICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuXHQgKiBAc2VlIHtAbGluayBleGhhdXN0fVxuXHQgKiBAc2VlIHtAbGluayBtZXJnZUFsbH1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgemlwQWxsfVxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlXG5cdCAqIE9ic2VydmFibGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCBzd2l0Y2hcblx0ICogQG5hbWUgc3dpdGNoXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBfc3dpdGNoKCkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU3dpdGNoT3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy5fc3dpdGNoID0gX3N3aXRjaDtcblx0dmFyIFN3aXRjaE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFN3aXRjaE9wZXJhdG9yKCkge1xuXHQgICAgfVxuXHQgICAgU3dpdGNoT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTd2l0Y2hTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFN3aXRjaFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFN3aXRjaFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTd2l0Y2hTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gMDtcblx0ICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSW5uZXIoKTtcblx0ICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHZhbHVlKSk7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZUlubmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuYWN0aXZlID0gdGhpcy5hY3RpdmUgPiAwID8gdGhpcy5hY3RpdmUgLSAxIDogMDtcblx0ICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmVJbm5lcigpO1xuXHQgICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmFjdGl2ZSA9PT0gMCkge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBTd2l0Y2hTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2guanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHN3aXRjaE1hcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NjkpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3dpdGNoTWFwID0gc3dpdGNoTWFwXzEuc3dpdGNoTWFwO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXAuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgaW4gdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlLCBlbWl0dGluZyB2YWx1ZXMgb25seSBmcm9tIHRoZSBtb3N0IHJlY2VudGx5IHByb2plY3RlZCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TWFwcyBlYWNoIHZhbHVlIHRvIGFuIE9ic2VydmFibGUsIHRoZW4gZmxhdHRlbnMgYWxsIG9mXG5cdCAqIHRoZXNlIGlubmVyIE9ic2VydmFibGVzIHVzaW5nIHtAbGluayBzd2l0Y2h9Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy9zd2l0Y2hNYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGJhc2VkIG9uIGFwcGx5aW5nIGEgZnVuY3Rpb24gdGhhdCB5b3Vcblx0ICogc3VwcGx5IHRvIGVhY2ggaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgd2hlcmUgdGhhdCBmdW5jdGlvblxuXHQgKiByZXR1cm5zIGFuIChzby1jYWxsZWQgXCJpbm5lclwiKSBPYnNlcnZhYmxlLiBFYWNoIHRpbWUgaXQgb2JzZXJ2ZXMgb25lIG9mIHRoZXNlXG5cdCAqIGlubmVyIE9ic2VydmFibGVzLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmVnaW5zIGVtaXR0aW5nIHRoZSBpdGVtcyBlbWl0dGVkIGJ5XG5cdCAqIHRoYXQgaW5uZXIgT2JzZXJ2YWJsZS4gV2hlbiBhIG5ldyBpbm5lciBPYnNlcnZhYmxlIGlzIGVtaXR0ZWQsIGBzd2l0Y2hNYXBgXG5cdCAqIHN0b3BzIGVtaXR0aW5nIGl0ZW1zIGZyb20gdGhlIGVhcmxpZXItZW1pdHRlZCBpbm5lciBPYnNlcnZhYmxlIGFuZCBiZWdpbnNcblx0ICogZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgbmV3IG9uZS4gSXQgY29udGludWVzIHRvIGJlaGF2ZSBsaWtlIHRoaXMgZm9yXG5cdCAqIHN1YnNlcXVlbnQgaW5uZXIgT2JzZXJ2YWJsZXMuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPlJlcnVuIGFuIGludGVydmFsIE9ic2VydmFibGUgb24gZXZlcnkgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Muc3dpdGNoTWFwKChldikgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKSk7XG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cblx0ICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cblx0ICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG5cdCAqIEBzZWUge0BsaW5rIHN3aXRjaH1cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsID9pbmRleDogbnVtYmVyKTogT2JzZXJ2YWJsZX0gcHJvamVjdCBBIGZ1bmN0aW9uXG5cdCAqIHRoYXQsIHdoZW4gYXBwbGllZCB0byBhbiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXR1cm5zIGFuXG5cdCAqIE9ic2VydmFibGUuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cblx0ICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuXHQgKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuXHQgKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG5cdCAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuXHQgKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG5cdCAqIHByb2plY3Rpb24gZnVuY3Rpb24gKGFuZCB0aGUgb3B0aW9uYWwgYHJlc3VsdFNlbGVjdG9yYCkgdG8gZWFjaCBpdGVtIGVtaXR0ZWRcblx0ICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCB0YWtpbmcgb25seSB0aGUgdmFsdWVzIGZyb20gdGhlIG1vc3QgcmVjZW50bHlcblx0ICogcHJvamVjdGVkIGlubmVyIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2Qgc3dpdGNoTWFwXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBzd2l0Y2hNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy5zd2l0Y2hNYXAgPSBzd2l0Y2hNYXA7XG5cdHZhciBTd2l0Y2hNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBTd2l0Y2hNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTd2l0Y2hNYXBTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy5yZXN1bHRTZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBTd2l0Y2hNYXBPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU3dpdGNoTWFwU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoU3dpdGNoTWFwU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFN3aXRjaE1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QodmFsdWUsIGluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyb3IpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX2lubmVyU3ViKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwgaW5kZXgpIHtcblx0ICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFkZCh0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCByZXN1bHQsIHZhbHVlLCBpbmRleCkpO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuXHQgICAgICAgIHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBudWxsO1xuXHQgICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuXHQgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJ5Tm90aWZ5TmV4dChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeU5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFN3aXRjaE1hcFN1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgc3dpdGNoTWFwVG9fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTcxKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnN3aXRjaE1hcFRvID0gc3dpdGNoTWFwVG9fMS5zd2l0Y2hNYXBUbztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwVG8uanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIHNhbWUgT2JzZXJ2YWJsZSB3aGljaCBpcyBmbGF0dGVuZWQgbXVsdGlwbGVcblx0ICogdGltZXMgd2l0aCB7QGxpbmsgc3dpdGNofSBpbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIHN3aXRjaE1hcH0sIGJ1dCBtYXBzIGVhY2ggdmFsdWVcblx0ICogYWx3YXlzIHRvIHRoZSBzYW1lIGlubmVyIE9ic2VydmFibGUuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaE1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBNYXBzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBnaXZlbiBPYnNlcnZhYmxlIGBpbm5lck9ic2VydmFibGVgIHJlZ2FyZGxlc3Ncblx0ICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gZmxhdHRlbnMgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGludG8gb25lXG5cdCAqIHNpbmdsZSBPYnNlcnZhYmxlLCB3aGljaCBpcyB0aGUgb3V0cHV0IE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZXNcblx0ICogZW1pdHMgdmFsdWVzIG9ubHkgZnJvbSB0aGUgbW9zdCByZWNlbnRseSBlbWl0dGVkIGluc3RhbmNlIG9mXG5cdCAqIGBpbm5lck9ic2VydmFibGVgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZXJ1biBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIG9uIGV2ZXJ5IGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLnN3aXRjaE1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cblx0ICogQHNlZSB7QGxpbmsgc3dpdGNofVxuXHQgKiBAc2VlIHtAbGluayBzd2l0Y2hNYXB9XG5cdCAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5uZXJPYnNlcnZhYmxlIEFuIE9ic2VydmFibGUgdG8gcmVwbGFjZSBlYWNoIHZhbHVlIGZyb21cblx0ICogdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG5cdCAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcblx0ICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcblx0ICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuXHQgKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcblx0ICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2Vcblx0ICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCBldmVyeSB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuXHQgKiBgaW5uZXJPYnNlcnZhYmxlYCAoYW5kIG9wdGlvbmFsbHkgdHJhbnNmb3JtZWQgdGhyb3VnaCBgcmVzdWx0U2VsZWN0b3JgKSBldmVyeVxuXHQgKiB0aW1lIGEgdmFsdWUgaXMgZW1pdHRlZCBvbiB0aGUgc291cmNlIE9ic2VydmFibGUsIGFuZCB0YWtpbmcgb25seSB0aGUgdmFsdWVzXG5cdCAqIGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIGlubmVyIE9ic2VydmFibGUuXG5cdCAqIEBtZXRob2Qgc3dpdGNoTWFwVG9cblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHN3aXRjaE1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFN3aXRjaE1hcFRvT3BlcmF0b3IoaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvcikpO1xuXHR9XG5cdGV4cG9ydHMuc3dpdGNoTWFwVG8gPSBzd2l0Y2hNYXBUbztcblx0dmFyIFN3aXRjaE1hcFRvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gU3dpdGNoTWFwVG9PcGVyYXRvcihvYnNlcnZhYmxlLCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoTWFwVG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFN3aXRjaE1hcFRvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9ic2VydmFibGUsIHRoaXMucmVzdWx0U2VsZWN0b3IpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoTWFwVG9PcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgU3dpdGNoTWFwVG9TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBUb1N1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBTd2l0Y2hNYXBUb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGlubmVyLCByZXN1bHRTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG5cdCAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgICAgICAgIGlubmVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHRoaXMuaW5uZXIsIHZhbHVlLCB0aGlzLmluZGV4KyspKTtcblx0ICAgIH07XG5cdCAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuXHQgICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcblx0ICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcblx0ICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcblx0ICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcblx0ICAgICAgICBpZiAocmVzdWx0U2VsZWN0b3IpIHtcblx0ICAgICAgICAgICAgdGhpcy50cnlSZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuXHQgICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG5cdCAgICAgICAgdmFyIHJlc3VsdDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gU3dpdGNoTWFwVG9TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXBUby5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgdGFrZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NzMpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZSA9IHRha2VfMS50YWtlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NzQpO1xuXHR2YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Mik7XG5cdC8qKlxuXHQgKiBAdGhyb3dzIHtBcmd1bWVudE91dE9mUmFuZ2VFcnJvcn0gV2hlbiB1c2luZyBgdGFrZShpKWAsIGl0IGRlbGl2ZXJzIGFuXG5cdCAqIEFyZ3VtZW50T3V0T3JSYW5nZUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmAgY2FsbGJhY2sgaWYgYGkgPCAwYC5cblx0ICogQHBhcmFtIHRvdGFsXG5cdCAqIEByZXR1cm4ge2FueX1cblx0ICogQG1ldGhvZCB0YWtlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0YWtlKHRvdGFsKSB7XG5cdCAgICBpZiAodG90YWwgPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZU9wZXJhdG9yKHRvdGFsKSk7XG5cdCAgICB9XG5cdH1cblx0ZXhwb3J0cy50YWtlID0gdGFrZTtcblx0dmFyIFRha2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUYWtlT3BlcmF0b3IodG90YWwpIHtcblx0ICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG5cdCAgICAgICAgaWYgKHRoaXMudG90YWwgPCAwKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIFRha2VPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFRha2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudG90YWwpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUYWtlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoVGFrZVN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUYWtlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgfVxuXHQgICAgVGFrZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHRvdGFsID0gdGhpcy50b3RhbDtcblx0ICAgICAgICBpZiAoKyt0aGlzLmNvdW50IDw9IHRvdGFsKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSB0b3RhbCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBUYWtlU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0LyoqXG5cdCAqIEFuIGVycm9yIHRocm93biB3aGVuIGFuIGVsZW1lbnQgd2FzIHF1ZXJpZWQgYXQgYSBjZXJ0YWluIGluZGV4IG9mIGFuXG5cdCAqIE9ic2VydmFibGUsIGJ1dCBubyBzdWNoIGluZGV4IG9yIHBvc2l0aW9uIGV4aXN0cyBpbiB0aGF0IHNlcXVlbmNlLlxuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBlbGVtZW50QXR9XG5cdCAqIEBzZWUge0BsaW5rIHRha2V9XG5cdCAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuXHQgKlxuXHQgKiBAY2xhc3MgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3Jcblx0ICovXG5cdHZhciBBcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAnYXJndW1lbnQgb3V0IG9mIHJhbmdlJyk7XG5cdCAgICAgICAgdGhpcy5uYW1lID0gJ0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJztcblx0ICAgIH1cblx0ICAgIHJldHVybiBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcblx0fShFcnJvcikpO1xuXHRleHBvcnRzLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yID0gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPUFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciB0YWtlTGFzdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NzYpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZUxhc3QgPSB0YWtlTGFzdF8xLnRha2VMYXN0O1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlTGFzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTc0KTtcblx0dmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjIpO1xuXHQvKipcblx0ICogQHRocm93cyB7QXJndW1lbnRPdXRPZlJhbmdlRXJyb3J9IFdoZW4gdXNpbmcgYHRha2VMYXN0KGkpYCwgaXQgZGVsaXZlcnMgYW5cblx0ICogQXJndW1lbnRPdXRPclJhbmdlRXJyb3IgdG8gdGhlIE9ic2VydmVyJ3MgYGVycm9yYCBjYWxsYmFjayBpZiBgaSA8IDBgLlxuXHQgKiBAcGFyYW0gdG90YWxcblx0ICogQHJldHVybiB7YW55fVxuXHQgKiBAbWV0aG9kIHRha2VMYXN0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0YWtlTGFzdCh0b3RhbCkge1xuXHQgICAgaWYgKHRvdGFsID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRha2VMYXN0T3BlcmF0b3IodG90YWwpKTtcblx0ICAgIH1cblx0fVxuXHRleHBvcnRzLnRha2VMYXN0ID0gdGFrZUxhc3Q7XG5cdHZhciBUYWtlTGFzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRha2VMYXN0T3BlcmF0b3IodG90YWwpIHtcblx0ICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG5cdCAgICAgICAgaWYgKHRoaXMudG90YWwgPCAwKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIFRha2VMYXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlTGFzdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy50b3RhbCkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUYWtlTGFzdE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUYWtlTGFzdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRha2VMYXN0U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFRha2VMYXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuXHQgICAgICAgIHRoaXMucmluZyA9IG5ldyBBcnJheSgpO1xuXHQgICAgICAgIHRoaXMuY291bnQgPSAwO1xuXHQgICAgfVxuXHQgICAgVGFrZUxhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciByaW5nID0gdGhpcy5yaW5nO1xuXHQgICAgICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWw7XG5cdCAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5jb3VudCsrO1xuXHQgICAgICAgIGlmIChyaW5nLmxlbmd0aCA8IHRvdGFsKSB7XG5cdCAgICAgICAgICAgIHJpbmcucHVzaCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgaW5kZXggPSBjb3VudCAlIHRvdGFsO1xuXHQgICAgICAgICAgICByaW5nW2luZGV4XSA9IHZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBUYWtlTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciBjb3VudCA9IHRoaXMuY291bnQ7XG5cdCAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuXHQgICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLmNvdW50ID49IHRoaXMudG90YWwgPyB0aGlzLnRvdGFsIDogdGhpcy5jb3VudDtcblx0ICAgICAgICAgICAgdmFyIHJpbmcgPSB0aGlzLnJpbmc7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWw7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgdmFyIGlkeCA9IChjb3VudCsrKSAlIHRvdGFsO1xuXHQgICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyaW5nW2lkeF0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VMYXN0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlTGFzdC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgdGFrZVVudGlsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3OCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlVW50aWwgPSB0YWtlVW50aWxfMS50YWtlVW50aWw7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VVbnRpbC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY0KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NSk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gbm90aWZpZXJcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgdGFrZVVudGlsXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0YWtlVW50aWwobm90aWZpZXIpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRha2VVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSk7XG5cdH1cblx0ZXhwb3J0cy50YWtlVW50aWwgPSB0YWtlVW50aWw7XG5cdHZhciBUYWtlVW50aWxPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUYWtlVW50aWxPcGVyYXRvcihub3RpZmllcikge1xuXHQgICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcblx0ICAgIH1cblx0ICAgIFRha2VVbnRpbE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGFrZVVudGlsU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5vdGlmaWVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VVbnRpbE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUYWtlVW50aWxTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUYWtlVW50aWxTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVGFrZVVudGlsU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgbm90aWZpZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyO1xuXHQgICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgbm90aWZpZXIpKTtcblx0ICAgIH1cblx0ICAgIFRha2VVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgVGFrZVVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy8gbm9vcFxuXHQgICAgfTtcblx0ICAgIHJldHVybiBUYWtlVW50aWxTdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlVW50aWwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1NzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHRha2VXaGlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODApO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZVdoaWxlID0gdGFrZVdoaWxlXzEudGFrZVdoaWxlO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1ODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0LyoqXG5cdCAqIEBwYXJhbSBwcmVkaWNhdGVcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgdGFrZVdoaWxlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0YWtlV2hpbGUocHJlZGljYXRlKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpKTtcblx0fVxuXHRleHBvcnRzLnRha2VXaGlsZSA9IHRha2VXaGlsZTtcblx0dmFyIFRha2VXaGlsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRha2VXaGlsZU9wZXJhdG9yKHByZWRpY2F0ZSkge1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgfVxuXHQgICAgVGFrZVdoaWxlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlV2hpbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRha2VXaGlsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUYWtlV2hpbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUYWtlV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVGFrZVdoaWxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgfVxuXHQgICAgVGFrZVdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcmVkaWNhdGUodmFsdWUsIHRoaXMuaW5kZXgrKyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm5leHRPckNvbXBsZXRlKHZhbHVlLCByZXN1bHQpO1xuXHQgICAgfTtcblx0ICAgIFRha2VXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHRPckNvbXBsZXRlID0gZnVuY3Rpb24gKHZhbHVlLCBwcmVkaWNhdGVSZXN1bHQpIHtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGlmIChCb29sZWFuKHByZWRpY2F0ZVJlc3VsdCkpIHtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGFrZVdoaWxlU3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1ODEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHRocm90dGxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4Mik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50aHJvdHRsZSA9IHRocm90dGxlXzEudGhyb3R0bGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm90dGxlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTgyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIEBwYXJhbSBkdXJhdGlvblNlbGVjdG9yXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuXHQgKiBAbWV0aG9kIHRocm90dGxlXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aHJvdHRsZShkdXJhdGlvblNlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaHJvdHRsZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcblx0fVxuXHRleHBvcnRzLnRocm90dGxlID0gdGhyb3R0bGU7XG5cdHZhciBUaHJvdHRsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG5cdCAgICB9XG5cdCAgICBUaHJvdHRsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGhyb3R0bGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaHJvdHRsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUaHJvdHRsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRocm90dGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5RHVyYXRpb25TZWxlY3Rvcih2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RHVyYXRpb25TZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBkdXJhdGlvbiA9IG51bGw7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uU2VsZWN0b3IodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmVtaXRBbmRUaHJvdHRsZSh2YWx1ZSwgZHVyYXRpb24pO1xuXHQgICAgfTtcblx0ICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuZW1pdEFuZFRocm90dGxlID0gZnVuY3Rpb24gKHZhbHVlLCBkdXJhdGlvbikge1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkdXJhdGlvbikpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHRocm90dGxlZCA9IHRoaXMudGhyb3R0bGVkO1xuXHQgICAgICAgIGlmICh0aHJvdHRsZWQpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcblx0ICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuXHQgICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRocm90dGxlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1ODMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHRocm90dGxlVGltZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODQpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGhyb3R0bGVUaW1lID0gdGhyb3R0bGVUaW1lXzEudGhyb3R0bGVUaW1lO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZVRpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1ODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGFzeW5jXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwMSk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gZGVsYXlcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCB0aHJvdHRsZVRpbWVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHRocm90dGxlVGltZShkZWxheSwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGhyb3R0bGVUaW1lT3BlcmF0b3IoZGVsYXksIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMudGhyb3R0bGVUaW1lID0gdGhyb3R0bGVUaW1lO1xuXHR2YXIgVGhyb3R0bGVUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVGhyb3R0bGVUaW1lT3BlcmF0b3IoZGVsYXksIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIFRocm90dGxlVGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGhyb3R0bGVUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5LCB0aGlzLnNjaGVkdWxlcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaHJvdHRsZVRpbWVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVGhyb3R0bGVUaW1lU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoVGhyb3R0bGVUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFRocm90dGxlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGRlbGF5LCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgVGhyb3R0bGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMudGhyb3R0bGVkID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmRlbGF5LCB7IHN1YnNjcmliZXI6IHRoaXMgfSkpO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbGVhclRocm90dGxlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB0aHJvdHRsZWQgPSB0aGlzLnRocm90dGxlZDtcblx0ICAgICAgICBpZiAodGhyb3R0bGVkKSB7XG5cdCAgICAgICAgICAgIHRocm90dGxlZC51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZSh0aHJvdHRsZWQpO1xuXHQgICAgICAgICAgICB0aGlzLnRocm90dGxlZCA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGZ1bmN0aW9uIGRpc3BhdGNoTmV4dChhcmcpIHtcblx0ICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG5cdCAgICBzdWJzY3JpYmVyLmNsZWFyVGhyb3R0bGUoKTtcblx0fVxuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZVRpbWUuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1ODUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHRpbWVvdXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTg2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRpbWVvdXQgPSB0aW1lb3V0XzEudGltZW91dDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU4NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBhc3luY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHR2YXIgaXNEYXRlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyNik7XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogQHBhcmFtIGR1ZVxuXHQgKiBAcGFyYW0gZXJyb3JUb1NlbmRcblx0ICogQHBhcmFtIHNjaGVkdWxlclxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cblx0ICogQG1ldGhvZCB0aW1lb3V0XG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aW1lb3V0KGR1ZSwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuXHQgICAgaWYgKGVycm9yVG9TZW5kID09PSB2b2lkIDApIHsgZXJyb3JUb1NlbmQgPSBudWxsOyB9XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgdmFyIGFic29sdXRlVGltZW91dCA9IGlzRGF0ZV8xLmlzRGF0ZShkdWUpO1xuXHQgICAgdmFyIHdhaXRGb3IgPSBhYnNvbHV0ZVRpbWVvdXQgPyAoK2R1ZSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkdWUpO1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGltZW91dE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMudGltZW91dCA9IHRpbWVvdXQ7XG5cdHZhciBUaW1lb3V0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVGltZW91dE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgZXJyb3JUb1NlbmQsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG5cdCAgICAgICAgdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7XG5cdCAgICAgICAgdGhpcy5lcnJvclRvU2VuZCA9IGVycm9yVG9TZW5kO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgfVxuXHQgICAgVGltZW91dE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGltZW91dFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5hYnNvbHV0ZVRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGhpcy5lcnJvclRvU2VuZCwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGltZW91dE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBUaW1lb3V0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoVGltZW91dFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUaW1lb3V0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYWJzb2x1dGVUaW1lb3V0LCB3YWl0Rm9yLCBlcnJvclRvU2VuZCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuXHQgICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0O1xuXHQgICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG5cdCAgICAgICAgdGhpcy5lcnJvclRvU2VuZCA9IGVycm9yVG9TZW5kO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSAwO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICB9XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLCBcInByZXZpb3VzSW5kZXhcIiwge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNJbmRleDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUsIFwiaGFzQ29tcGxldGVkXCIsIHtcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0NvbXBsZXRlZDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIFRpbWVvdXRTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBzdGF0ZS5pbmRleDtcblx0ICAgICAgICBpZiAoIXNvdXJjZS5oYXNDb21wbGV0ZWQgJiYgc291cmNlLnByZXZpb3VzSW5kZXggPT09IGN1cnJlbnRJbmRleCkge1xuXHQgICAgICAgICAgICBzb3VyY2Uubm90aWZ5VGltZW91dCgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUuc2NoZWR1bGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSB0aGlzLmluZGV4O1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVvdXRTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCwgdGhpcy53YWl0Rm9yLCB7IHN1YnNjcmliZXI6IHRoaXMsIGluZGV4OiBjdXJyZW50SW5kZXggfSk7XG5cdCAgICAgICAgdGhpcy5pbmRleCsrO1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSBjdXJyZW50SW5kZXg7XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcblx0ICAgICAgICBpZiAoIXRoaXMuYWJzb2x1dGVUaW1lb3V0KSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmVycm9yKHRoaXMuZXJyb3JUb1NlbmQgfHwgbmV3IEVycm9yKCd0aW1lb3V0JykpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUaW1lb3V0U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciB0aW1lb3V0V2l0aF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1ODgpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGltZW91dFdpdGggPSB0aW1lb3V0V2l0aF8xLnRpbWVvdXRXaXRoO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0V2l0aC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBhc3luY18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MDEpO1xuXHR2YXIgaXNEYXRlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyNik7XG5cdHZhciBPdXRlclN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY0KTtcblx0dmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NSk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gZHVlXG5cdCAqIEBwYXJhbSB3aXRoT2JzZXJ2YWJsZVxuXHQgKiBAcGFyYW0gc2NoZWR1bGVyXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuXHQgKiBAbWV0aG9kIHRpbWVvdXRXaXRoXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB0aW1lb3V0V2l0aChkdWUsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHtcblx0ICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG5cdCAgICB2YXIgYWJzb2x1dGVUaW1lb3V0ID0gaXNEYXRlXzEuaXNEYXRlKGR1ZSk7XG5cdCAgICB2YXIgd2FpdEZvciA9IGFic29sdXRlVGltZW91dCA/ICgrZHVlIC0gc2NoZWR1bGVyLm5vdygpKSA6IE1hdGguYWJzKGR1ZSk7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaW1lb3V0V2l0aE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgd2l0aE9ic2VydmFibGUsIHNjaGVkdWxlcikpO1xuXHR9XG5cdGV4cG9ydHMudGltZW91dFdpdGggPSB0aW1lb3V0V2l0aDtcblx0dmFyIFRpbWVvdXRXaXRoT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gVGltZW91dFdpdGhPcGVyYXRvcih3YWl0Rm9yLCBhYnNvbHV0ZVRpbWVvdXQsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICB0aGlzLndhaXRGb3IgPSB3YWl0Rm9yO1xuXHQgICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0O1xuXHQgICAgICAgIHRoaXMud2l0aE9ic2VydmFibGUgPSB3aXRoT2JzZXJ2YWJsZTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgIH1cblx0ICAgIFRpbWVvdXRXaXRoT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUaW1lb3V0V2l0aFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5hYnNvbHV0ZVRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGhpcy53aXRoT2JzZXJ2YWJsZSwgdGhpcy5zY2hlZHVsZXIpKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gVGltZW91dFdpdGhPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVGltZW91dFdpdGhTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhUaW1lb3V0V2l0aFN1YnNjcmliZXIsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBUaW1lb3V0V2l0aFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGFic29sdXRlVGltZW91dCwgd2FpdEZvciwgd2l0aE9ic2VydmFibGUsIHNjaGVkdWxlcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0ICAgICAgICB0aGlzLmFic29sdXRlVGltZW91dCA9IGFic29sdXRlVGltZW91dDtcblx0ICAgICAgICB0aGlzLndhaXRGb3IgPSB3YWl0Rm9yO1xuXHQgICAgICAgIHRoaXMud2l0aE9ic2VydmFibGUgPSB3aXRoT2JzZXJ2YWJsZTtcblx0ICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcblx0ICAgICAgICB0aGlzLnRpbWVvdXRTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5pbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5fcHJldmlvdXNJbmRleCA9IDA7XG5cdCAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gZmFsc2U7XG5cdCAgICAgICAgZGVzdGluYXRpb24uYWRkKHRoaXMpO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lb3V0KCk7XG5cdCAgICB9XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZSwgXCJwcmV2aW91c0luZGV4XCIsIHtcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzSW5kZXg7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZSwgXCJoYXNDb21wbGV0ZWRcIiwge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5faGFzQ29tcGxldGVkO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuXHQgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBzdGF0ZS5pbmRleDtcblx0ICAgICAgICBpZiAoIXNvdXJjZS5oYXNDb21wbGV0ZWQgJiYgc291cmNlLnByZXZpb3VzSW5kZXggPT09IGN1cnJlbnRJbmRleCkge1xuXHQgICAgICAgICAgICBzb3VyY2UuaGFuZGxlVGltZW91dCgpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gdGhpcy5pbmRleDtcblx0ICAgICAgICB2YXIgdGltZW91dFN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCBpbmRleDogY3VycmVudEluZGV4IH07XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoVGltZW91dFdpdGhTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCwgdGhpcy53YWl0Rm9yLCB0aW1lb3V0U3RhdGUpO1xuXHQgICAgICAgIHRoaXMuaW5kZXgrKztcblx0ICAgICAgICB0aGlzLl9wcmV2aW91c0luZGV4ID0gY3VycmVudEluZGV4O1xuXHQgICAgfTtcblx0ICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuXHQgICAgICAgIGlmICghdGhpcy5hYnNvbHV0ZVRpbWVvdXQpIHtcblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVRpbWVvdXQoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5oYW5kbGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICghdGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgICAgICB2YXIgd2l0aE9ic2VydmFibGUgPSB0aGlzLndpdGhPYnNlcnZhYmxlO1xuXHQgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uYWRkKHRoaXMudGltZW91dFN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgd2l0aE9ic2VydmFibGUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRpbWVvdXRXaXRoU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dFdpdGguanMubWFwXG5cbi8qKiovIH0sXG4vKiA1ODkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgT2JzZXJ2YWJsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0dmFyIHRvQXJyYXlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkwKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRvQXJyYXkgPSB0b0FycmF5XzEudG9BcnJheTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dG9BcnJheS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvKipcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxhbnlbXT58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuXHQgKiBAbWV0aG9kIHRvQXJyYXlcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHRvQXJyYXkoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUb0FycmF5T3BlcmF0b3IoKSk7XG5cdH1cblx0ZXhwb3J0cy50b0FycmF5ID0gdG9BcnJheTtcblx0dmFyIFRvQXJyYXlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUb0FycmF5T3BlcmF0b3IoKSB7XG5cdCAgICB9XG5cdCAgICBUb0FycmF5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUb0FycmF5U3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFRvQXJyYXlPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgVG9BcnJheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFRvQXJyYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVG9BcnJheVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5hcnJheSA9IFtdO1xuXHQgICAgfVxuXHQgICAgVG9BcnJheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICB0aGlzLmFycmF5LnB1c2goeCk7XG5cdCAgICB9O1xuXHQgICAgVG9BcnJheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5hcnJheSk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBUb0FycmF5U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD10b0FycmF5LmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTkxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciB0b1Byb21pc2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkyKTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IHRvUHJvbWlzZV8xLnRvUHJvbWlzZTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9dG9Qcm9taXNlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTkyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHJvb3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdC8qKlxuXHQgKiBAcGFyYW0gUHJvbWlzZUN0b3Jcblx0ICogQHJldHVybiB7UHJvbWlzZTxUPn1cblx0ICogQG1ldGhvZCB0b1Byb21pc2Vcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHRvUHJvbWlzZShQcm9taXNlQ3Rvcikge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0ICAgIGlmICghUHJvbWlzZUN0b3IpIHtcblx0ICAgICAgICBpZiAocm9vdF8xLnJvb3QuUnggJiYgcm9vdF8xLnJvb3QuUnguY29uZmlnICYmIHJvb3RfMS5yb290LlJ4LmNvbmZpZy5Qcm9taXNlKSB7XG5cdCAgICAgICAgICAgIFByb21pc2VDdG9yID0gcm9vdF8xLnJvb3QuUnguY29uZmlnLlByb21pc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2UgaWYgKHJvb3RfMS5yb290LlByb21pc2UpIHtcblx0ICAgICAgICAgICAgUHJvbWlzZUN0b3IgPSByb290XzEucm9vdC5Qcm9taXNlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICghUHJvbWlzZUN0b3IpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgdmFyIHZhbHVlO1xuXHQgICAgICAgIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAoeCkgeyByZXR1cm4gdmFsdWUgPSB4OyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiByZWplY3QoZXJyKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZSh2YWx1ZSk7IH0pO1xuXHQgICAgfSk7XG5cdH1cblx0ZXhwb3J0cy50b1Byb21pc2UgPSB0b1Byb21pc2U7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvUHJvbWlzZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU5MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgd2luZG93XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5NCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3cgPSB3aW5kb3dfMS53aW5kb3c7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvdy5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgd2hlbmV2ZXJcblx0ICogYHdpbmRvd0JvdW5kYXJpZXNgIGVtaXRzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJ9LCBidXQgZW1pdHMgYSBuZXN0ZWQgT2JzZXJ2YWJsZVxuXHQgKiBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3cucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyBjb25uZWN0ZWQsIG5vbi1vdmVybGFwcGluZ1xuXHQgKiB3aW5kb3dzLiBJdCBlbWl0cyB0aGUgY3VycmVudCB3aW5kb3cgYW5kIG9wZW5zIGEgbmV3IG9uZSB3aGVuZXZlciB0aGVcblx0ICogT2JzZXJ2YWJsZSBgd2luZG93Qm91bmRhcmllc2AgZW1pdHMgYW4gaXRlbS4gQmVjYXVzZSBlYWNoIHdpbmRvdyBpcyBhblxuXHQgKiBPYnNlcnZhYmxlLCB0aGUgb3V0cHV0IGlzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUuXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkluIGV2ZXJ5IHdpbmRvdyBvZiAxIHNlY29uZCBlYWNoLCBlbWl0IGF0IG1vc3QgMiBjbGljayBldmVudHM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93KGludGVydmFsKVxuXHQgKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuXHQgKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1doZW59XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cblx0ICpcblx0ICogQHBhcmFtIHtPYnNlcnZhYmxlPGFueT59IHdpbmRvd0JvdW5kYXJpZXMgQW4gT2JzZXJ2YWJsZSB0aGF0IGNvbXBsZXRlcyB0aGVcblx0ICogcHJldmlvdXMgd2luZG93IGFuZCBzdGFydHMgYSBuZXcgd2luZG93LlxuXHQgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBPYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGFyZVxuXHQgKiBPYnNlcnZhYmxlcyBlbWl0dGluZyB2YWx1ZXMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuXHQgKiBAbWV0aG9kIHdpbmRvd1xuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gd2luZG93KHdpbmRvd0JvdW5kYXJpZXMpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd09wZXJhdG9yKHdpbmRvd0JvdW5kYXJpZXMpKTtcblx0fVxuXHRleHBvcnRzLndpbmRvdyA9IHdpbmRvdztcblx0dmFyIFdpbmRvd09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd09wZXJhdG9yKHdpbmRvd0JvdW5kYXJpZXMpIHtcblx0ICAgICAgICB0aGlzLndpbmRvd0JvdW5kYXJpZXMgPSB3aW5kb3dCb3VuZGFyaWVzO1xuXHQgICAgfVxuXHQgICAgV2luZG93T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMud2luZG93Qm91bmRhcmllcykpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgV2luZG93U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoV2luZG93U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd1N1YnNjcmliZXIoZGVzdGluYXRpb24sIHdpbmRvd0JvdW5kYXJpZXMpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHRoaXMud2luZG93Qm91bmRhcmllcyA9IHdpbmRvd0JvdW5kYXJpZXM7XG5cdCAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB3aW5kb3dCb3VuZGFyaWVzKSk7XG5cdCAgICAgICAgdGhpcy5vcGVuV2luZG93KCk7XG5cdCAgICB9XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5vcGVuV2luZG93KCk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fZXJyb3IoZXJyb3IpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5fY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMud2luZG93Lm5leHQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICB0aGlzLndpbmRvdy5lcnJvcihlcnIpO1xuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUub3BlbldpbmRvdyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgcHJldldpbmRvdyA9IHRoaXMud2luZG93O1xuXHQgICAgICAgIGlmIChwcmV2V2luZG93KSB7XG5cdCAgICAgICAgICAgIHByZXZXaW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICB2YXIgbmV3V2luZG93ID0gdGhpcy53aW5kb3cgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5hZGQobmV3V2luZG93KTtcblx0ICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KG5ld1dpbmRvdyk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd1N1YnNjcmliZXI7XG5cdH0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvdy5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU5NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgd2luZG93Q291bnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNTk2KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpbmRvd0NvdW50ID0gd2luZG93Q291bnRfMS53aW5kb3dDb3VudDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93Q291bnQuanMubWFwXG5cbi8qKiovIH0sXG4vKiA1OTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIFN1YmplY3RfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdC8qKlxuXHQgKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSB3aXRoIGVhY2hcblx0ICogbmVzdGVkIE9ic2VydmFibGUgZW1pdHRpbmcgYXQgbW9zdCBgd2luZG93U2l6ZWAgdmFsdWVzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJDb3VudH0sIGJ1dCBlbWl0cyBhIG5lc3RlZFxuXHQgKiBPYnNlcnZhYmxlIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3dpbmRvd0NvdW50LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuXHQgKlxuXHQgKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgd2luZG93cyBldmVyeSBgc3RhcnRXaW5kb3dFdmVyeWBcblx0ICogaXRlbXMsIGVhY2ggY29udGFpbmluZyBubyBtb3JlIHRoYW4gYHdpbmRvd1NpemVgIGl0ZW1zLiBXaGVuIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZSBjb21wbGV0ZXMgb3IgZW5jb3VudGVycyBhbiBlcnJvciwgdGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzXG5cdCAqIHRoZSBjdXJyZW50IHdpbmRvdyBhbmQgcHJvcGFnYXRlcyB0aGUgbm90aWZpY2F0aW9uIGZyb20gdGhlIHNvdXJjZVxuXHQgKiBPYnNlcnZhYmxlLiBJZiBgc3RhcnRXaW5kb3dFdmVyeWAgaXMgbm90IHByb3ZpZGVkLCB0aGVuIG5ldyB3aW5kb3dzIGFyZVxuXHQgKiBzdGFydGVkIGltbWVkaWF0ZWx5IGF0IHRoZSBzdGFydCBvZiB0aGUgc291cmNlIGFuZCB3aGVuIGVhY2ggd2luZG93IGNvbXBsZXRlc1xuXHQgKiB3aXRoIHNpemUgYHdpbmRvd1NpemVgLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZ25vcmUgZXZlcnkgM3JkIGNsaWNrIGV2ZW50LCBzdGFydGluZyBmcm9tIHRoZSBmaXJzdCBvbmU8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93Q291bnQoMylcblx0ICogICAubWFwKHdpbiA9PiB3aW4uc2tpcCgxKSkgLy8gc2tpcCBmaXJzdCBvZiBldmVyeSAzIGNsaWNrc1xuXHQgKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPklnbm9yZSBldmVyeSAzcmQgY2xpY2sgZXZlbnQsIHN0YXJ0aW5nIGZyb20gdGhlIHRoaXJkIG9uZTwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dDb3VudCgyLCAzKVxuXHQgKiAgIC5tZXJnZUFsbCgpOyAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG5cdCAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG5cdCAqXG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd31cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cblx0ICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJDb3VudH1cblx0ICpcblx0ICogQHBhcmFtIHtudW1iZXJ9IHdpbmRvd1NpemUgVGhlIG1heGltdW0gbnVtYmVyIG9mIHZhbHVlcyBlbWl0dGVkIGJ5IGVhY2hcblx0ICogd2luZG93LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0V2luZG93RXZlcnldIEludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IGEgbmV3IHdpbmRvdy5cblx0ICogRm9yIGV4YW1wbGUgaWYgYHN0YXJ0V2luZG93RXZlcnlgIGlzIGAyYCwgdGhlbiBhIG5ldyB3aW5kb3cgd2lsbCBiZSBzdGFydGVkXG5cdCAqIG9uIGV2ZXJ5IG90aGVyIHZhbHVlIGZyb20gdGhlIHNvdXJjZS4gQSBuZXcgd2luZG93IGlzIHN0YXJ0ZWQgYXQgdGhlXG5cdCAqIGJlZ2lubmluZyBvZiB0aGUgc291cmNlIGJ5IGRlZmF1bHQuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8T2JzZXJ2YWJsZTxUPj59IEFuIE9ic2VydmFibGUgb2Ygd2luZG93cywgd2hpY2ggaW4gdHVyblxuXHQgKiBhcmUgT2JzZXJ2YWJsZSBvZiB2YWx1ZXMuXG5cdCAqIEBtZXRob2Qgd2luZG93Q291bnRcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHdpbmRvd0NvdW50KHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHtcblx0ICAgIGlmIChzdGFydFdpbmRvd0V2ZXJ5ID09PSB2b2lkIDApIHsgc3RhcnRXaW5kb3dFdmVyeSA9IDA7IH1cblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd0NvdW50T3BlcmF0b3Iod2luZG93U2l6ZSwgc3RhcnRXaW5kb3dFdmVyeSkpO1xuXHR9XG5cdGV4cG9ydHMud2luZG93Q291bnQgPSB3aW5kb3dDb3VudDtcblx0dmFyIFdpbmRvd0NvdW50T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gV2luZG93Q291bnRPcGVyYXRvcih3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZTtcblx0ICAgICAgICB0aGlzLnN0YXJ0V2luZG93RXZlcnkgPSBzdGFydFdpbmRvd0V2ZXJ5O1xuXHQgICAgfVxuXHQgICAgV2luZG93Q291bnRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFdpbmRvd0NvdW50U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLndpbmRvd1NpemUsIHRoaXMuc3RhcnRXaW5kb3dFdmVyeSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dDb3VudE9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBXaW5kb3dDb3VudFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFdpbmRvd0NvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd0NvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgd2luZG93U2l6ZSwgc3RhcnRXaW5kb3dFdmVyeSkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZTtcblx0ICAgICAgICB0aGlzLnN0YXJ0V2luZG93RXZlcnkgPSBzdGFydFdpbmRvd0V2ZXJ5O1xuXHQgICAgICAgIHRoaXMud2luZG93cyA9IFtuZXcgU3ViamVjdF8xLlN1YmplY3QoKV07XG5cdCAgICAgICAgdGhpcy5jb3VudCA9IDA7XG5cdCAgICAgICAgdmFyIGZpcnN0V2luZG93ID0gdGhpcy53aW5kb3dzWzBdO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmFkZChmaXJzdFdpbmRvdyk7XG5cdCAgICAgICAgZGVzdGluYXRpb24ubmV4dChmaXJzdFdpbmRvdyk7XG5cdCAgICB9XG5cdCAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdmFyIHN0YXJ0V2luZG93RXZlcnkgPSAodGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID4gMCkgPyB0aGlzLnN0YXJ0V2luZG93RXZlcnkgOiB0aGlzLndpbmRvd1NpemU7XG5cdCAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcblx0ICAgICAgICB2YXIgd2luZG93U2l6ZSA9IHRoaXMud2luZG93U2l6ZTtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB2YXIgbGVuID0gd2luZG93cy5sZW5ndGg7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB3aW5kb3dzW2ldLm5leHQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgYyA9IHRoaXMuY291bnQgLSB3aW5kb3dTaXplICsgMTtcblx0ICAgICAgICBpZiAoYyA+PSAwICYmIGMgJSBzdGFydFdpbmRvd0V2ZXJ5ID09PSAwKSB7XG5cdCAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoKyt0aGlzLmNvdW50ICUgc3RhcnRXaW5kb3dFdmVyeSA9PT0gMCkge1xuXHQgICAgICAgICAgICB2YXIgd2luZG93XzEgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcblx0ICAgICAgICAgICAgd2luZG93cy5wdXNoKHdpbmRvd18xKTtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24uYWRkKHdpbmRvd18xKTtcblx0ICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh3aW5kb3dfMSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFdpbmRvd0NvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuXHQgICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgd2luZG93cy5zaGlmdCgpLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5jb21wbGV0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd0NvdW50U3Vic2NyaWJlcjtcblx0fShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dDb3VudC5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgd2luZG93VGltZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OTgpO1xuXHRPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93VGltZSA9IHdpbmRvd1RpbWVfMS53aW5kb3dUaW1lO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dUaW1lLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNTk4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIFN1YnNjcmliZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgYXN5bmNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNDAxKTtcblx0LyoqXG5cdCAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHBlcmlvZGljYWxseVxuXHQgKiBpbiB0aW1lLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJUaW1lfSwgYnV0IGVtaXRzIGEgbmVzdGVkXG5cdCAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG5cdCAqXG5cdCAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93VGltZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgd2luZG93cyBvZiBpdGVtcyBpdCBjb2xsZWN0cyBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIHN0YXJ0cyBhIG5ldyB3aW5kb3cgcGVyaW9kaWNhbGx5LCBhc1xuXHQgKiBkZXRlcm1pbmVkIGJ5IHRoZSBgd2luZG93Q3JlYXRpb25JbnRlcnZhbGAgYXJndW1lbnQuIEl0IGVtaXRzIGVhY2ggd2luZG93XG5cdCAqIGFmdGVyIGEgZml4ZWQgdGltZXNwYW4sIHNwZWNpZmllZCBieSB0aGUgYHdpbmRvd1RpbWVTcGFuYCBhcmd1bWVudC4gV2hlbiB0aGVcblx0ICogc291cmNlIE9ic2VydmFibGUgY29tcGxldGVzIG9yIGVuY291bnRlcnMgYW4gZXJyb3IsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZVxuXHQgKiBlbWl0cyB0aGUgY3VycmVudCB3aW5kb3cgYW5kIHByb3BhZ2F0ZXMgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gSWYgYHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWxgIGlzIG5vdCBwcm92aWRlZCwgdGhlIG91dHB1dFxuXHQgKiBPYnNlcnZhYmxlIHN0YXJ0cyBhIG5ldyB3aW5kb3cgd2hlbiB0aGUgcHJldmlvdXMgd2luZG93IG9mIGR1cmF0aW9uXG5cdCAqIGB3aW5kb3dUaW1lU3BhbmAgY29tcGxldGVzLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5JbiBldmVyeSB3aW5kb3cgb2YgMSBzZWNvbmQgZWFjaCwgZW1pdCBhdCBtb3N0IDIgY2xpY2sgZXZlbnRzPC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd1RpbWUoMTAwMClcblx0ICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FdmVyeSA1IHNlY29uZHMgc3RhcnQgYSB3aW5kb3cgMSBzZWNvbmQgbG9uZywgYW5kIGVtaXQgYXQgbW9zdCAyIGNsaWNrIGV2ZW50cyBwZXIgd2luZG93PC9jYXB0aW9uPlxuXHQgKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuXHQgKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd1RpbWUoMTAwMCwgNTAwMClcblx0ICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3d9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd1doZW59XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB3aW5kb3dUaW1lU3BhbiBUaGUgYW1vdW50IG9mIHRpbWUgdG8gZmlsbCBlYWNoIHdpbmRvdy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3aW5kb3dDcmVhdGlvbkludGVydmFsXSBUaGUgaW50ZXJ2YWwgYXQgd2hpY2ggdG8gc3RhcnQgbmV3XG5cdCAqIHdpbmRvd3MuXG5cdCAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlIHRoZVxuXHQgKiBpbnRlcnZhbHMgdGhhdCBkZXRlcm1pbmUgd2luZG93IGJvdW5kYXJpZXMuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8T2JzZXJ2YWJsZTxUPj59IEFuIG9ic2VydmFibGUgb2Ygd2luZG93cywgd2hpY2ggaW4gdHVyblxuXHQgKiBhcmUgT2JzZXJ2YWJsZXMuXG5cdCAqIEBtZXRob2Qgd2luZG93VGltZVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gd2luZG93VGltZSh3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICBpZiAod2luZG93Q3JlYXRpb25JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSBudWxsOyB9XG5cdCAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgV2luZG93VGltZU9wZXJhdG9yKHdpbmRvd1RpbWVTcGFuLCB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpKTtcblx0fVxuXHRleHBvcnRzLndpbmRvd1RpbWUgPSB3aW5kb3dUaW1lO1xuXHR2YXIgV2luZG93VGltZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd1RpbWVPcGVyYXRvcih3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3dUaW1lU3BhbiA9IHdpbmRvd1RpbWVTcGFuO1xuXHQgICAgICAgIHRoaXMud2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWw7XG5cdCAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG5cdCAgICB9XG5cdCAgICBXaW5kb3dUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLndpbmRvd1RpbWVTcGFuLCB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHRoaXMuc2NoZWR1bGVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd1RpbWVPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgV2luZG93VGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFdpbmRvd1RpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2luZG93VGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHdpbmRvd1RpbWVTcGFuLCB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHRoaXMud2luZG93VGltZVNwYW4gPSB3aW5kb3dUaW1lU3Bhbjtcblx0ICAgICAgICB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSB3aW5kb3dDcmVhdGlvbkludGVydmFsO1xuXHQgICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuXHQgICAgICAgIHRoaXMud2luZG93cyA9IFtdO1xuXHQgICAgICAgIGlmICh3aW5kb3dDcmVhdGlvbkludGVydmFsICE9PSBudWxsICYmIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPj0gMCkge1xuXHQgICAgICAgICAgICB2YXIgd2luZG93XzEgPSB0aGlzLm9wZW5XaW5kb3coKTtcblx0ICAgICAgICAgICAgdmFyIGNsb3NlU3RhdGUgPSB7IHN1YnNjcmliZXI6IHRoaXMsIHdpbmRvdzogd2luZG93XzEsIGNvbnRleHQ6IG51bGwgfTtcblx0ICAgICAgICAgICAgdmFyIGNyZWF0aW9uU3RhdGUgPSB7IHdpbmRvd1RpbWVTcGFuOiB3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbDogd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc3Vic2NyaWJlcjogdGhpcywgc2NoZWR1bGVyOiBzY2hlZHVsZXIgfTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93Q2xvc2UsIHdpbmRvd1RpbWVTcGFuLCBjbG9zZVN0YXRlKSk7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd0NyZWF0aW9uLCB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBjcmVhdGlvblN0YXRlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgd2luZG93XzIgPSB0aGlzLm9wZW5XaW5kb3coKTtcblx0ICAgICAgICAgICAgdmFyIHRpbWVTcGFuT25seVN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCB3aW5kb3c6IHdpbmRvd18yLCB3aW5kb3dUaW1lU3Bhbjogd2luZG93VGltZVNwYW4gfTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93VGltZVNwYW5Pbmx5LCB3aW5kb3dUaW1lU3BhbiwgdGltZVNwYW5Pbmx5U3RhdGUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB2YXIgbGVuID0gd2luZG93cy5sZW5ndGg7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgd2luZG93XzMgPSB3aW5kb3dzW2ldO1xuXHQgICAgICAgICAgICBpZiAoIXdpbmRvd18zLmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICB3aW5kb3dfMy5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuXHQgICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgd2luZG93cy5zaGlmdCgpLmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuXHQgICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIHdpbmRvd180ID0gd2luZG93cy5zaGlmdCgpO1xuXHQgICAgICAgICAgICBpZiAoIXdpbmRvd180LmlzVW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgICB3aW5kb3dfNC5jb21wbGV0ZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbldpbmRvdyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgd2luZG93ID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgdGhpcy53aW5kb3dzLnB1c2god2luZG93KTtcblx0ICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh3aW5kb3cpO1xuXHQgICAgICAgIGRlc3RpbmF0aW9uLm5leHQod2luZG93KTtcblx0ICAgICAgICByZXR1cm4gd2luZG93O1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uICh3aW5kb3cpIHtcblx0ICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcblx0ICAgICAgICB3aW5kb3dzLnNwbGljZSh3aW5kb3dzLmluZGV4T2Yod2luZG93KSwgMSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd1RpbWVTdWJzY3JpYmVyO1xuXHR9KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5cdGZ1bmN0aW9uIGRpc3BhdGNoV2luZG93VGltZVNwYW5Pbmx5KHN0YXRlKSB7XG5cdCAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHdpbmRvd1RpbWVTcGFuID0gc3RhdGUud2luZG93VGltZVNwYW4sIHdpbmRvdyA9IHN0YXRlLndpbmRvdztcblx0ICAgIGlmICh3aW5kb3cpIHtcblx0ICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcblx0ICAgIH1cblx0ICAgIHN0YXRlLndpbmRvdyA9IHN1YnNjcmliZXIub3BlbldpbmRvdygpO1xuXHQgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgd2luZG93VGltZVNwYW4pO1xuXHR9XG5cdGZ1bmN0aW9uIGRpc3BhdGNoV2luZG93Q3JlYXRpb24oc3RhdGUpIHtcblx0ICAgIHZhciB3aW5kb3dUaW1lU3BhbiA9IHN0YXRlLndpbmRvd1RpbWVTcGFuLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgc2NoZWR1bGVyID0gc3RhdGUuc2NoZWR1bGVyLCB3aW5kb3dDcmVhdGlvbkludGVydmFsID0gc3RhdGUud2luZG93Q3JlYXRpb25JbnRlcnZhbDtcblx0ICAgIHZhciB3aW5kb3cgPSBzdWJzY3JpYmVyLm9wZW5XaW5kb3coKTtcblx0ICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuXHQgICAgdmFyIGNvbnRleHQgPSB7IGFjdGlvbjogYWN0aW9uLCBzdWJzY3JpcHRpb246IG51bGwgfTtcblx0ICAgIHZhciB0aW1lU3BhblN0YXRlID0geyBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLCB3aW5kb3c6IHdpbmRvdywgY29udGV4dDogY29udGV4dCB9O1xuXHQgICAgY29udGV4dC5zdWJzY3JpcHRpb24gPSBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hXaW5kb3dDbG9zZSwgd2luZG93VGltZVNwYW4sIHRpbWVTcGFuU3RhdGUpO1xuXHQgICAgYWN0aW9uLmFkZChjb250ZXh0LnN1YnNjcmlwdGlvbik7XG5cdCAgICBhY3Rpb24uc2NoZWR1bGUoc3RhdGUsIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwpO1xuXHR9XG5cdGZ1bmN0aW9uIGRpc3BhdGNoV2luZG93Q2xvc2UoYXJnKSB7XG5cdCAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyLCB3aW5kb3cgPSBhcmcud2luZG93LCBjb250ZXh0ID0gYXJnLmNvbnRleHQ7XG5cdCAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LmFjdGlvbiAmJiBjb250ZXh0LnN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgIGNvbnRleHQuYWN0aW9uLnJlbW92ZShjb250ZXh0LnN1YnNjcmlwdGlvbik7XG5cdCAgICB9XG5cdCAgICBzdWJzY3JpYmVyLmNsb3NlV2luZG93KHdpbmRvdyk7XG5cdH1cblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VGltZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDU5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgd2luZG93VG9nZ2xlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwMCk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dUb2dnbGUgPSB3aW5kb3dUb2dnbGVfMS53aW5kb3dUb2dnbGU7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RvZ2dsZS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDYwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBTdWJqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgU3Vic2NyaXB0aW9uXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHN0YXJ0aW5nIGZyb21cblx0ICogYW4gZW1pc3Npb24gZnJvbSBgb3BlbmluZ3NgIGFuZCBlbmRpbmcgd2hlbiB0aGUgb3V0cHV0IG9mIGBjbG9zaW5nU2VsZWN0b3JgXG5cdCAqIGVtaXRzLlxuXHQgKlxuXHQgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJUb2dnbGV9LCBidXQgZW1pdHMgYSBuZXN0ZWRcblx0ICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dUb2dnbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyB3aW5kb3dzIHRoYXQgY29udGFpbiB0aG9zZSBpdGVtc1xuXHQgKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBiZXR3ZWVuIHRoZSB0aW1lIHdoZW4gdGhlIGBvcGVuaW5nc2Bcblx0ICogT2JzZXJ2YWJsZSBlbWl0cyBhbiBpdGVtIGFuZCB3aGVuIHRoZSBPYnNlcnZhYmxlIHJldHVybmVkIGJ5XG5cdCAqIGBjbG9zaW5nU2VsZWN0b3JgIGVtaXRzIGFuIGl0ZW0uXG5cdCAqXG5cdCAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IG90aGVyIHNlY29uZCwgZW1pdCB0aGUgY2xpY2sgZXZlbnRzIGZyb20gdGhlIG5leHQgNTAwbXM8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciBvcGVuaW5ncyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93VG9nZ2xlKG9wZW5pbmdzLCBpID0+XG5cdCAqICAgaSAlIDIgPyBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkgOiBSeC5PYnNlcnZhYmxlLmVtcHR5KClcblx0ICogKS5tZXJnZUFsbCgpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3d9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuXHQgKiBAc2VlIHtAbGluayBidWZmZXJUb2dnbGV9XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxPPn0gb3BlbmluZ3MgQW4gb2JzZXJ2YWJsZSBvZiBub3RpZmljYXRpb25zIHRvIHN0YXJ0IG5ld1xuXHQgKiB3aW5kb3dzLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBPKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlc1xuXHQgKiB0aGUgdmFsdWUgZW1pdHRlZCBieSB0aGUgYG9wZW5pbmdzYCBvYnNlcnZhYmxlIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUsXG5cdCAqIHdoaWNoLCB3aGVuIGl0IGVtaXRzIChlaXRoZXIgYG5leHRgIG9yIGBjb21wbGV0ZWApLCBzaWduYWxzIHRoYXQgdGhlXG5cdCAqIGFzc29jaWF0ZWQgd2luZG93IHNob3VsZCBjb21wbGV0ZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG5cdCAqIGFyZSBPYnNlcnZhYmxlcy5cblx0ICogQG1ldGhvZCB3aW5kb3dUb2dnbGVcblx0ICogQG93bmVyIE9ic2VydmFibGVcblx0ICovXG5cdGZ1bmN0aW9uIHdpbmRvd1RvZ2dsZShvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSk7XG5cdH1cblx0ZXhwb3J0cy53aW5kb3dUb2dnbGUgPSB3aW5kb3dUb2dnbGU7XG5cdHZhciBXaW5kb3dUb2dnbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG5cdCAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuXHQgICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgfVxuXHQgICAgV2luZG93VG9nZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpbmRvd1RvZ2dsZU9wZXJhdG9yO1xuXHR9KCkpO1xuXHQvKipcblx0ICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cblx0ICogQGlnbm9yZVxuXHQgKiBAZXh0ZW5kcyB7SWdub3JlZH1cblx0ICovXG5cdHZhciBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2luZG93VG9nZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgb3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuXHQgICAgICAgIHRoaXMuYWRkKHRoaXMub3BlblN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgb3BlbmluZ3MsIG9wZW5pbmdzKSk7XG5cdCAgICB9XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgaWYgKGNvbnRleHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHRzW2ldLndpbmRvdy5uZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBpZiAoY29udGV4dHMpIHtcblx0ICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHQud2luZG93LmVycm9yKGVycik7XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcblx0ICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDtcblx0ICAgICAgICBpZiAoY29udGV4dHMpIHtcblx0ICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0ICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgIGNvbnRleHQud2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG5cdCAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG5cdCAgICAgICAgaWYgKGNvbnRleHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdCAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0c1tpbmRleF07XG5cdCAgICAgICAgICAgICAgICBjb250ZXh0LndpbmRvdy51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgaWYgKG91dGVyVmFsdWUgPT09IHRoaXMub3BlbmluZ3MpIHtcblx0ICAgICAgICAgICAgdmFyIGNsb3NpbmdTZWxlY3RvciA9IHRoaXMuY2xvc2luZ1NlbGVjdG9yO1xuXHQgICAgICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjbG9zaW5nU2VsZWN0b3IpKGlubmVyVmFsdWUpO1xuXHQgICAgICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbigpO1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7IHdpbmRvdzogd2luZG93XzEsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uIH07XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRzLnB1c2goY29udGV4dCk7XG5cdCAgICAgICAgICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllciwgY29udGV4dCk7XG5cdCAgICAgICAgICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMubGVuZ3RoIC0gMSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi5jb250ZXh0ID0gY29udGV4dDtcblx0ICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24uYWRkKGlubmVyU3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh3aW5kb3dfMSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuY2xvc2VXaW5kb3codGhpcy5jb250ZXh0cy5pbmRleE9mKG91dGVyVmFsdWUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyKSB7XG5cdCAgICAgICAgaWYgKGlubmVyICE9PSB0aGlzLm9wZW5TdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmluZGV4T2YoaW5uZXIuY29udGV4dCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHQgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuXHQgICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHNbaW5kZXhdO1xuXHQgICAgICAgIHZhciB3aW5kb3cgPSBjb250ZXh0LndpbmRvdywgc3Vic2NyaXB0aW9uID0gY29udGV4dC5zdWJzY3JpcHRpb247XG5cdCAgICAgICAgY29udGV4dHMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2luZG93VG9nZ2xlU3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VG9nZ2xlLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNjAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciB3aW5kb3dXaGVuXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwMik7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dXaGVuID0gd2luZG93V2hlbl8xLndpbmRvd1doZW47XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1doZW4uanMubWFwXG5cbi8qKiovIH0sXG4vKiA2MDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgU3ViamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHRyeUNhdGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGVycm9yT2JqZWN0XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIE91dGVyU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjQpO1xuXHR2YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0LyoqXG5cdCAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHVzaW5nIGFcblx0ICogZmFjdG9yeSBmdW5jdGlvbiBvZiBjbG9zaW5nIE9ic2VydmFibGVzIHRvIGRldGVybWluZSB3aGVuIHRvIHN0YXJ0IGEgbmV3XG5cdCAqIHdpbmRvdy5cblx0ICpcblx0ICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyV2hlbn0sIGJ1dCBlbWl0cyBhIG5lc3RlZFxuXHQgKiBPYnNlcnZhYmxlIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuXHQgKlxuXHQgKiA8aW1nIHNyYz1cIi4vaW1nL3dpbmRvd1doZW4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG5cdCAqXG5cdCAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG5cdCAqIE9ic2VydmFibGUuIFRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cyBjb25uZWN0ZWQsIG5vbi1vdmVybGFwcGluZyB3aW5kb3dzLlxuXHQgKiBJdCBlbWl0cyB0aGUgY3VycmVudCB3aW5kb3cgYW5kIG9wZW5zIGEgbmV3IG9uZSB3aGVuZXZlciB0aGUgT2JzZXJ2YWJsZVxuXHQgKiBwcm9kdWNlZCBieSB0aGUgc3BlY2lmaWVkIGBjbG9zaW5nU2VsZWN0b3JgIGZ1bmN0aW9uIGVtaXRzIGFuIGl0ZW0uIFRoZSBmaXJzdFxuXHQgKiB3aW5kb3cgaXMgb3BlbmVkIGltbWVkaWF0ZWx5IHdoZW4gc3Vic2NyaWJpbmcgdG8gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IG9ubHkgdGhlIGZpcnN0IHR3byBjbGlja3MgZXZlbnRzIGluIGV2ZXJ5IHdpbmRvdyBvZiBbMS01XSByYW5kb20gc2Vjb25kczwvY2FwdGlvbj5cblx0ICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcblx0ICogdmFyIHJlc3VsdCA9IGNsaWNrc1xuXHQgKiAgIC53aW5kb3dXaGVuKCgpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCArIE1hdGgucmFuZG9tKCkgKiA0MDAwKSlcblx0ICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcblx0ICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3d9XG5cdCAqIEBzZWUge0BsaW5rIHdpbmRvd0NvdW50fVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuXHQgKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG5cdCAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG5cdCAqXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuXHQgKiBhcmd1bWVudHMgYW5kIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNpZ25hbHMgKG9uIGVpdGhlciBgbmV4dGAgb3Jcblx0ICogYGNvbXBsZXRlYCkgd2hlbiB0byBjbG9zZSB0aGUgcHJldmlvdXMgd2luZG93IGFuZCBzdGFydCBhIG5ldyBvbmUuXG5cdCAqIEByZXR1cm4ge09ic2VydmFibGU8T2JzZXJ2YWJsZTxUPj59IEFuIG9ic2VydmFibGUgb2Ygd2luZG93cywgd2hpY2ggaW4gdHVyblxuXHQgKiBhcmUgT2JzZXJ2YWJsZXMuXG5cdCAqIEBtZXRob2Qgd2luZG93V2hlblxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gd2luZG93V2hlbihjbG9zaW5nU2VsZWN0b3IpIHtcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd09wZXJhdG9yKGNsb3NpbmdTZWxlY3RvcikpO1xuXHR9XG5cdGV4cG9ydHMud2luZG93V2hlbiA9IHdpbmRvd1doZW47XG5cdHZhciBXaW5kb3dPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBXaW5kb3dPcGVyYXRvcihjbG9zaW5nU2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3Rvcjtcblx0ICAgIH1cblx0ICAgIFdpbmRvd09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuXHQgICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgV2luZG93U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdTZWxlY3RvcikpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBXaW5kb3dPcGVyYXRvcjtcblx0fSgpKTtcblx0LyoqXG5cdCAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG5cdCAqIEBpZ25vcmVcblx0ICogQGV4dGVuZHMge0lnbm9yZWR9XG5cdCAqL1xuXHR2YXIgV2luZG93U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoV2luZG93U3Vic2NyaWJlciwgX3N1cGVyKTtcblx0ICAgIGZ1bmN0aW9uIFdpbmRvd1N1YnNjcmliZXIoZGVzdGluYXRpb24sIGNsb3NpbmdTZWxlY3Rvcikge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG5cdCAgICAgICAgdGhpcy5vcGVuV2luZG93KCk7XG5cdCAgICB9XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy5vcGVuV2luZG93KGlubmVyU3ViKTtcblx0ICAgIH07XG5cdCAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLl9lcnJvcihlcnJvcik7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICB0aGlzLm9wZW5XaW5kb3coaW5uZXJTdWIpO1xuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy53aW5kb3cubmV4dCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIHRoaXMud2luZG93LmVycm9yKGVycik7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uKCk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRoaXMud2luZG93LmNvbXBsZXRlKCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuXHQgICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uKCk7XG5cdCAgICB9O1xuXHQgICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmNsb3NpbmdOb3RpZmljYXRpb24pIHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zaW5nTm90aWZpY2F0aW9uLnVuc3Vic2NyaWJlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICBpZiAoaW5uZXJTdWIgPT09IHZvaWQgMCkgeyBpbm5lclN1YiA9IG51bGw7IH1cblx0ICAgICAgICBpZiAoaW5uZXJTdWIpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuXHQgICAgICAgICAgICBpbm5lclN1Yi51bnN1YnNjcmliZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcHJldldpbmRvdyA9IHRoaXMud2luZG93O1xuXHQgICAgICAgIGlmIChwcmV2V2luZG93KSB7XG5cdCAgICAgICAgICAgIHByZXZXaW5kb3cuY29tcGxldGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHdpbmRvdyA9IHRoaXMud2luZG93ID0gbmV3IFN1YmplY3RfMS5TdWJqZWN0KCk7XG5cdCAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHdpbmRvdyk7XG5cdCAgICAgICAgdmFyIGNsb3NpbmdOb3RpZmllciA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5jbG9zaW5nU2VsZWN0b3IpKCk7XG5cdCAgICAgICAgaWYgKGNsb3NpbmdOb3RpZmllciA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuXHQgICAgICAgICAgICB2YXIgZXJyID0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lO1xuXHQgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG5cdCAgICAgICAgICAgIHRoaXMud2luZG93LmVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmNsb3NpbmdOb3RpZmljYXRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllcikpO1xuXHQgICAgICAgICAgICB0aGlzLmFkZCh3aW5kb3cpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2luZG93U3Vic2NyaWJlcjtcblx0fShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93V2hlbi5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDYwMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgd2l0aExhdGVzdEZyb21fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNjA0KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb21fMS53aXRoTGF0ZXN0RnJvbTtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9d2l0aExhdGVzdEZyb20uanMubWFwXG5cbi8qKiovIH0sXG4vKiA2MDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdHZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjUpO1xuXHQvKipcblx0ICogQ29tYmluZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGVcblx0ICogd2hvc2UgdmFsdWVzIGFyZSBjYWxjdWxhdGVkIGZyb20gdGhlIGxhdGVzdCB2YWx1ZXMgb2YgZWFjaCwgb25seSB3aGVuIHRoZVxuXHQgKiBzb3VyY2UgZW1pdHMuXG5cdCAqXG5cdCAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcblx0ICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoYXQgdmFsdWUgcGx1cyB0aGUgbGF0ZXN0IHZhbHVlcyBmcm9tIG90aGVyIGlucHV0XG5cdCAqIE9ic2VydmFibGVzLCB0aGVuIGVtaXRzIHRoZSBvdXRwdXQgb2YgdGhhdCBmb3JtdWxhLjwvc3Bhbj5cblx0ICpcblx0ICogPGltZyBzcmM9XCIuL2ltZy93aXRoTGF0ZXN0RnJvbS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cblx0ICpcblx0ICogYHdpdGhMYXRlc3RGcm9tYCBjb21iaW5lcyBlYWNoIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlICh0aGVcblx0ICogaW5zdGFuY2UpIHdpdGggdGhlIGxhdGVzdCB2YWx1ZXMgZnJvbSB0aGUgb3RoZXIgaW5wdXQgT2JzZXJ2YWJsZXMgb25seSB3aGVuXG5cdCAqIHRoZSBzb3VyY2UgZW1pdHMgYSB2YWx1ZSwgb3B0aW9uYWxseSB1c2luZyBhIGBwcm9qZWN0YCBmdW5jdGlvbiB0byBkZXRlcm1pbmVcblx0ICogdGhlIHZhbHVlIHRvIGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBBbGwgaW5wdXQgT2JzZXJ2YWJsZXMgbXVzdFxuXHQgKiBlbWl0IGF0IGxlYXN0IG9uZSB2YWx1ZSBiZWZvcmUgdGhlIG91dHB1dCBPYnNlcnZhYmxlIHdpbGwgZW1pdCBhIHZhbHVlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZSA8Y2FwdGlvbj5PbiBldmVyeSBjbGljayBldmVudCwgZW1pdCBhbiBhcnJheSB3aXRoIHRoZSBsYXRlc3QgdGltZXIgZXZlbnQgcGx1cyB0aGUgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG5cdCAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG5cdCAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG5cdCAqIHZhciByZXN1bHQgPSBjbGlja3Mud2l0aExhdGVzdEZyb20odGltZXIpO1xuXHQgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuXHQgKlxuXHQgKiBAc2VlIHtAbGluayBjb21iaW5lTGF0ZXN0fVxuXHQgKlxuXHQgKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZSBzb3VyY2Vcblx0ICogT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9qZWN0XSBQcm9qZWN0aW9uIGZ1bmN0aW9uIGZvciBjb21iaW5pbmcgdmFsdWVzXG5cdCAqIHRvZ2V0aGVyLiBSZWNlaXZlcyBhbGwgdmFsdWVzIGluIG9yZGVyIG9mIHRoZSBPYnNlcnZhYmxlcyBwYXNzZWQsIHdoZXJlIHRoZVxuXHQgKiBmaXJzdCBwYXJhbWV0ZXIgaXMgYSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gKGUuZy5cblx0ICogYGEud2l0aExhdGVzdEZyb20oYiwgYywgKGExLCBiMSwgYzEpID0+IGExICsgYjEgKyBjMSlgKS4gSWYgdGhpcyBpcyBub3Rcblx0ICogcGFzc2VkLCBhcnJheXMgd2lsbCBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBwcm9qZWN0ZWQgdmFsdWVzIGZyb20gdGhlIG1vc3QgcmVjZW50XG5cdCAqIHZhbHVlcyBmcm9tIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZSwgb3IgYW4gYXJyYXkgb2YgdGhlIG1vc3QgcmVjZW50IHZhbHVlcyBmcm9tXG5cdCAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cblx0ICogQG1ldGhvZCB3aXRoTGF0ZXN0RnJvbVxuXHQgKiBAb3duZXIgT2JzZXJ2YWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gd2l0aExhdGVzdEZyb20oKSB7XG5cdCAgICB2YXIgYXJncyA9IFtdO1xuXHQgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb2plY3Q7XG5cdCAgICBpZiAodHlwZW9mIGFyZ3NbYXJncy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb2plY3QgPSBhcmdzLnBvcCgpO1xuXHQgICAgfVxuXHQgICAgdmFyIG9ic2VydmFibGVzID0gYXJncztcblx0ICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpdGhMYXRlc3RGcm9tT3BlcmF0b3Iob2JzZXJ2YWJsZXMsIHByb2plY3QpKTtcblx0fVxuXHRleHBvcnRzLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb207XG5cdC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5cdHZhciBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3Iob2JzZXJ2YWJsZXMsIHByb2plY3QpIHtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgIH1cblx0ICAgIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlcywgdGhpcy5wcm9qZWN0KSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT3BlcmF0b3I7XG5cdH0oKSk7XG5cdC8qKlxuXHQgKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuXHQgKiBAaWdub3JlXG5cdCAqIEBleHRlbmRzIHtJZ25vcmVkfVxuXHQgKi9cblx0dmFyIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvYnNlcnZhYmxlcywgcHJvamVjdCkge1xuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcblx0ICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXM7XG5cdCAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblx0ICAgICAgICB0aGlzLnRvUmVzcG9uZCA9IFtdO1xuXHQgICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG5cdCAgICAgICAgdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHRoaXMudG9SZXNwb25kLnB1c2goaSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBvYnNlcnZhYmxlc1tpXTtcblx0ICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG5cdCAgICAgICAgdGhpcy52YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlO1xuXHQgICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcblx0ICAgICAgICBpZiAodG9SZXNwb25kLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgdmFyIGZvdW5kID0gdG9SZXNwb25kLmluZGV4T2Yob3V0ZXJJbmRleCk7XG5cdCAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgICAgIHRvUmVzcG9uZC5zcGxpY2UoZm91bmQsIDEpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy8gbm9vcFxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICBpZiAodGhpcy50b1Jlc3BvbmQubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHZhciBhcmdzID0gW3ZhbHVlXS5jb25jYXQodGhpcy52YWx1ZXMpO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLl90cnlQcm9qZWN0KGFyZ3MpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAoYXJncykge1xuXHQgICAgICAgIHZhciByZXN1bHQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyO1xuXHR9KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD13aXRoTGF0ZXN0RnJvbS5qcy5tYXBcblxuLyoqKi8gfSxcbi8qIDYwNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBPYnNlcnZhYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgemlwXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyOSk7XG5cdE9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS56aXAgPSB6aXBfMS56aXBQcm90bztcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNjA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIE9ic2VydmFibGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciB6aXBBbGxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcblx0T2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnppcEFsbCA9IHppcEFsbF8xLnppcEFsbDtcblx0Ly8jIHNvdXJjZU1hcHBpbmdVUkw9emlwQWxsLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNjA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHppcF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MjkpO1xuXHQvKipcblx0ICogQHBhcmFtIHByb2plY3Rcblx0ICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG5cdCAqIEBtZXRob2QgemlwQWxsXG5cdCAqIEBvd25lciBPYnNlcnZhYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiB6aXBBbGwocHJvamVjdCkge1xuXHQgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgemlwXzEuWmlwT3BlcmF0b3IocHJvamVjdCkpO1xuXHR9XG5cdGV4cG9ydHMuemlwQWxsID0gemlwQWxsO1xuXHQvLyMgc291cmNlTWFwcGluZ1VSTD16aXBBbGwuanMubWFwXG5cbi8qKiovIH0sXG4vKiA2MDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgU3Vic2NyaWJlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE9wZXJhdG9yKCkge1xuXHQgICAgfVxuXHQgICAgT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE9wZXJhdG9yO1xuXHR9KCkpO1xuXHRleHBvcnRzLk9wZXJhdG9yID0gT3BlcmF0b3I7XG5cdC8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wZXJhdG9yLmpzLm1hcFxuXG4vKioqLyB9LFxuLyogNjA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgey8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcblx0LyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG5cdC8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblx0XG5cdC8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cblx0LyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdFxuXHQvKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdC8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcblx0LyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cdFxuXHQvKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0LyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcblx0LyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG5cdC8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcblx0LyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuXHQvKioqKioqLyBcdFx0fTtcblx0XG5cdC8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0LyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRcblx0LyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0LyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXHRcblx0LyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdC8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG5cdC8qKioqKiovIFx0fVxuXHRcblx0XG5cdC8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcblx0LyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXHRcblx0LyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuXHQvKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cdFxuXHQvKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG5cdC8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblx0XG5cdC8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5cdC8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cdC8qKioqKiovIH0pXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8qKioqKiovIChbXG5cdC8qIDAgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHRcdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcInVzZSBzdHJpY3RcIjtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcdHZhciBldmVudF90YXJnZXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFx0dmFyIGRlZmluZV9wcm9wZXJ0eV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XHR2YXIgcmVnaXN0ZXJfZWxlbWVudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XHR2YXIgcHJvcGVydHlfZGVzY3JpcHRvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XHR2YXIgdGltZXJzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XHR2YXIgc2V0ID0gJ3NldCc7XG5cdFx0dmFyIGNsZWFyID0gJ2NsZWFyJztcblx0XHR2YXIgYmxvY2tpbmdNZXRob2RzID0gWydhbGVydCcsICdwcm9tcHQnLCAnY29uZmlybSddO1xuXHRcdHZhciBfZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHdpbmRvdztcblx0XHR0aW1lcnNfMS5wYXRjaFRpbWVyKF9nbG9iYWwsIHNldCwgY2xlYXIsICdUaW1lb3V0Jyk7XG5cdFx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCBzZXQsIGNsZWFyLCAnSW50ZXJ2YWwnKTtcblx0XHR0aW1lcnNfMS5wYXRjaFRpbWVyKF9nbG9iYWwsIHNldCwgY2xlYXIsICdJbW1lZGlhdGUnKTtcblx0XHR0aW1lcnNfMS5wYXRjaFRpbWVyKF9nbG9iYWwsICdyZXF1ZXN0JywgJ2NhbmNlbCcsICdBbmltYXRpb25GcmFtZScpO1xuXHRcdHRpbWVyc18xLnBhdGNoVGltZXIoX2dsb2JhbCwgJ21velJlcXVlc3QnLCAnbW96Q2FuY2VsJywgJ0FuaW1hdGlvbkZyYW1lJyk7XG5cdFx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCAnd2Via2l0UmVxdWVzdCcsICd3ZWJraXRDYW5jZWwnLCAnQW5pbWF0aW9uRnJhbWUnKTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGJsb2NraW5nTWV0aG9kcy5sZW5ndGg7IGkrKykge1xuXHRcdCAgICB2YXIgbmFtZSA9IGJsb2NraW5nTWV0aG9kc1tpXTtcblx0XHQgICAgdXRpbHNfMS5wYXRjaE1ldGhvZChfZ2xvYmFsLCBuYW1lLCBmdW5jdGlvbiAoZGVsZWdhdGUsIHN5bWJvbCwgbmFtZSkge1xuXHRcdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzLCBhcmdzKSB7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIFpvbmUuY3VycmVudC5ydW4oZGVsZWdhdGUsIF9nbG9iYWwsIGFyZ3MsIG5hbWUpO1xuXHRcdCAgICAgICAgfTtcblx0XHQgICAgfSk7XG5cdFx0fVxuXHRcdGV2ZW50X3RhcmdldF8xLmV2ZW50VGFyZ2V0UGF0Y2goX2dsb2JhbCk7XG5cdFx0cHJvcGVydHlfZGVzY3JpcHRvcl8xLnByb3BlcnR5RGVzY3JpcHRvclBhdGNoKF9nbG9iYWwpO1xuXHRcdHV0aWxzXzEucGF0Y2hDbGFzcygnTXV0YXRpb25PYnNlcnZlcicpO1xuXHRcdHV0aWxzXzEucGF0Y2hDbGFzcygnV2ViS2l0TXV0YXRpb25PYnNlcnZlcicpO1xuXHRcdHV0aWxzXzEucGF0Y2hDbGFzcygnRmlsZVJlYWRlcicpO1xuXHRcdGRlZmluZV9wcm9wZXJ0eV8xLnByb3BlcnR5UGF0Y2goKTtcblx0XHRyZWdpc3Rlcl9lbGVtZW50XzEucmVnaXN0ZXJFbGVtZW50UGF0Y2goX2dsb2JhbCk7XG5cdFx0Ly8gVHJlYXQgWE1MSFRUUFJlcXVlc3QgYXMgYSBtYWNyb3Rhc2suXG5cdFx0cGF0Y2hYSFIoX2dsb2JhbCk7XG5cdFx0dmFyIFhIUl9UQVNLID0gdXRpbHNfMS56b25lU3ltYm9sKCd4aHJUYXNrJyk7XG5cdFx0ZnVuY3Rpb24gcGF0Y2hYSFIod2luZG93KSB7XG5cdFx0ICAgIGZ1bmN0aW9uIGZpbmRQZW5kaW5nVGFzayh0YXJnZXQpIHtcblx0XHQgICAgICAgIHZhciBwZW5kaW5nVGFzayA9IHRhcmdldFtYSFJfVEFTS107XG5cdFx0ICAgICAgICByZXR1cm4gcGVuZGluZ1Rhc2s7XG5cdFx0ICAgIH1cblx0XHQgICAgZnVuY3Rpb24gc2NoZWR1bGVUYXNrKHRhc2spIHtcblx0XHQgICAgICAgIHZhciBkYXRhID0gdGFzay5kYXRhO1xuXHRcdCAgICAgICAgZGF0YS50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICBpZiAoZGF0YS50YXJnZXQucmVhZHlTdGF0ZSA9PT0gZGF0YS50YXJnZXQuRE9ORSkge1xuXHRcdCAgICAgICAgICAgICAgICBpZiAoIWRhdGEuYWJvcnRlZCkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgdGFzay5pbnZva2UoKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0pO1xuXHRcdCAgICAgICAgdmFyIHN0b3JlZFRhc2sgPSBkYXRhLnRhcmdldFtYSFJfVEFTS107XG5cdFx0ICAgICAgICBpZiAoIXN0b3JlZFRhc2spIHtcblx0XHQgICAgICAgICAgICBkYXRhLnRhcmdldFtYSFJfVEFTS10gPSB0YXNrO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgc2V0TmF0aXZlLmFwcGx5KGRhdGEudGFyZ2V0LCBkYXRhLmFyZ3MpO1xuXHRcdCAgICAgICAgcmV0dXJuIHRhc2s7XG5cdFx0ICAgIH1cblx0XHQgICAgZnVuY3Rpb24gcGxhY2Vob2xkZXJDYWxsYmFjaygpIHtcblx0XHQgICAgfVxuXHRcdCAgICBmdW5jdGlvbiBjbGVhclRhc2sodGFzaykge1xuXHRcdCAgICAgICAgdmFyIGRhdGEgPSB0YXNrLmRhdGE7XG5cdFx0ICAgICAgICAvLyBOb3RlIC0gaWRlYWxseSwgd2Ugd291bGQgY2FsbCBkYXRhLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyIGhlcmUsIGJ1dCBpdCdzIHRvbyBsYXRlXG5cdFx0ICAgICAgICAvLyB0byBwcmV2ZW50IGl0IGZyb20gZmlyaW5nLiBTbyBpbnN0ZWFkLCB3ZSBzdG9yZSBpbmZvIGZvciB0aGUgZXZlbnQgbGlzdGVuZXIuXG5cdFx0ICAgICAgICBkYXRhLmFib3J0ZWQgPSB0cnVlO1xuXHRcdCAgICAgICAgcmV0dXJuIGNsZWFyTmF0aXZlLmFwcGx5KGRhdGEudGFyZ2V0LCBkYXRhLmFyZ3MpO1xuXHRcdCAgICB9XG5cdFx0ICAgIHZhciBzZXROYXRpdmUgPSB1dGlsc18xLnBhdGNoTWV0aG9kKHdpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUsICdzZW5kJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcblx0XHQgICAgICAgIHZhciB6b25lID0gWm9uZS5jdXJyZW50O1xuXHRcdCAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdFx0ICAgICAgICAgICAgdGFyZ2V0OiBzZWxmLFxuXHRcdCAgICAgICAgICAgIGlzUGVyaW9kaWM6IGZhbHNlLFxuXHRcdCAgICAgICAgICAgIGRlbGF5OiBudWxsLFxuXHRcdCAgICAgICAgICAgIGFyZ3M6IGFyZ3MsXG5cdFx0ICAgICAgICAgICAgYWJvcnRlZDogZmFsc2Vcblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICByZXR1cm4gem9uZS5zY2hlZHVsZU1hY3JvVGFzaygnWE1MSHR0cFJlcXVlc3Quc2VuZCcsIHBsYWNlaG9sZGVyQ2FsbGJhY2ssIG9wdGlvbnMsIHNjaGVkdWxlVGFzaywgY2xlYXJUYXNrKTtcblx0XHQgICAgfTsgfSk7XG5cdFx0ICAgIHZhciBjbGVhck5hdGl2ZSA9IHV0aWxzXzEucGF0Y2hNZXRob2Qod2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSwgJ2Fib3J0JywgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuXHRcdCAgICAgICAgdmFyIHRhc2sgPSBmaW5kUGVuZGluZ1Rhc2soc2VsZik7XG5cdFx0ICAgICAgICBpZiAodGFzayAmJiB0eXBlb2YgdGFzay50eXBlID09ICdzdHJpbmcnKSB7XG5cdFx0ICAgICAgICAgICAgLy8gSWYgdGhlIFhIUiBoYXMgYWxyZWFkeSBjb21wbGV0ZWQsIGRvIG5vdGhpbmcuXG5cdFx0ICAgICAgICAgICAgaWYgKHRhc2suY2FuY2VsRm4gPT0gbnVsbCkge1xuXHRcdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIHRhc2suem9uZS5jYW5jZWxUYXNrKHRhc2spO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBhcmUgdHJ5aW5nIHRvIGFib3J0IGFuIFhIUiB3aGljaCBoYXMgbm90IHlldCBiZWVuIHNlbnQsIHNvIHRoZXJlIGlzIG5vIHRhc2sgdG8gY2FuY2VsLiBEbyBub3RoaW5nLlxuXHRcdCAgICB9OyB9KTtcblx0XHR9XG5cdFx0Ly8vIEdFT19MT0NBVElPTlxuXHRcdGlmIChfZ2xvYmFsWyduYXZpZ2F0b3InXSAmJiBfZ2xvYmFsWyduYXZpZ2F0b3InXS5nZW9sb2NhdGlvbikge1xuXHRcdCAgICB1dGlsc18xLnBhdGNoUHJvdG90eXBlKF9nbG9iYWxbJ25hdmlnYXRvciddLmdlb2xvY2F0aW9uLCBbXG5cdFx0ICAgICAgICAnZ2V0Q3VycmVudFBvc2l0aW9uJyxcblx0XHQgICAgICAgICd3YXRjaFBvc2l0aW9uJ1xuXHRcdCAgICBdKTtcblx0XHR9XG5cdFxuXHRcdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblx0XG5cdC8qKiovIH0sXG5cdC8qIDEgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cdFxuXHRcdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHs7XG5cdFx0O1xuXHRcdHZhciBab25lID0gKGZ1bmN0aW9uIChnbG9iYWwpIHtcblx0XHQgICAgaWYgKGdsb2JhbC5ab25lKSB7XG5cdFx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1pvbmUgYWxyZWFkeSBsb2FkZWQuJyk7XG5cdFx0ICAgIH1cblx0XHQgICAgdmFyIFpvbmUgPSAoZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgZnVuY3Rpb24gWm9uZShwYXJlbnQsIHpvbmVTcGVjKSB7XG5cdFx0ICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9IG51bGw7XG5cdFx0ICAgICAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuXHRcdCAgICAgICAgICAgIHRoaXMuX25hbWUgPSB6b25lU3BlYyA/IHpvbmVTcGVjLm5hbWUgfHwgJ3VubmFtZWQnIDogJzxyb290Pic7XG5cdFx0ICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9IHpvbmVTcGVjICYmIHpvbmVTcGVjLnByb3BlcnRpZXMgfHwge307XG5cdFx0ICAgICAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlID0gbmV3IFpvbmVEZWxlZ2F0ZSh0aGlzLCB0aGlzLl9wYXJlbnQgJiYgdGhpcy5fcGFyZW50Ll96b25lRGVsZWdhdGUsIHpvbmVTcGVjKTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShab25lLCBcImN1cnJlbnRcIiwge1xuXHRcdCAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX2N1cnJlbnRab25lOyB9LFxuXHRcdCAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdFx0ICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdFx0ICAgICAgICB9KTtcblx0XHQgICAgICAgIDtcblx0XHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShab25lLCBcImN1cnJlbnRUYXNrXCIsIHtcblx0XHQgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9jdXJyZW50VGFzazsgfSxcblx0XHQgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdCAgICAgICAgfSk7XG5cdFx0ICAgICAgICA7XG5cdFx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZS5wcm90b3R5cGUsIFwicGFyZW50XCIsIHtcblx0XHQgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX3BhcmVudDsgfSxcblx0XHQgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdCAgICAgICAgfSk7XG5cdFx0ICAgICAgICA7XG5cdFx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZS5wcm90b3R5cGUsIFwibmFtZVwiLCB7XG5cdFx0ICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9uYW1lOyB9LFxuXHRcdCAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdFx0ICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdFx0ICAgICAgICB9KTtcblx0XHQgICAgICAgIDtcblx0XHQgICAgICAgIFpvbmUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0XHQgICAgICAgICAgICB2YXIgem9uZSA9IHRoaXMuZ2V0Wm9uZVdpdGgoa2V5KTtcblx0XHQgICAgICAgICAgICBpZiAoem9uZSlcblx0XHQgICAgICAgICAgICAgICAgcmV0dXJuIHpvbmUuX3Byb3BlcnRpZXNba2V5XTtcblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lLnByb3RvdHlwZS5nZXRab25lV2l0aCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0XHQgICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXM7XG5cdFx0ICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcblx0XHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuX3Byb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuX3BhcmVudDtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZS5wcm90b3R5cGUuZm9yayA9IGZ1bmN0aW9uICh6b25lU3BlYykge1xuXHRcdCAgICAgICAgICAgIGlmICghem9uZVNwZWMpXG5cdFx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9uZVNwZWMgcmVxdWlyZWQhJyk7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5mb3JrKHRoaXMsIHpvbmVTcGVjKTtcblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBzb3VyY2UpIHtcblx0XHQgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0aW5nIGZ1bmN0aW9uIGdvdDogJyArIGNhbGxiYWNrKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgdmFyIF9jYWxsYmFjayA9IHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnRlcmNlcHQodGhpcywgY2FsbGJhY2ssIHNvdXJjZSk7XG5cdFx0ICAgICAgICAgICAgdmFyIHpvbmUgPSB0aGlzO1xuXHRcdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHJldHVybiB6b25lLnJ1bkd1YXJkZWQoX2NhbGxiYWNrLCB0aGlzLCBhcmd1bWVudHMsIHNvdXJjZSk7XG5cdFx0ICAgICAgICAgICAgfTtcblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpIHtcblx0XHQgICAgICAgICAgICBpZiAoYXBwbHlUaGlzID09PSB2b2lkIDApIHsgYXBwbHlUaGlzID0gbnVsbDsgfVxuXHRcdCAgICAgICAgICAgIGlmIChhcHBseUFyZ3MgPT09IHZvaWQgMCkgeyBhcHBseUFyZ3MgPSBudWxsOyB9XG5cdFx0ICAgICAgICAgICAgaWYgKHNvdXJjZSA9PT0gdm9pZCAwKSB7IHNvdXJjZSA9IG51bGw7IH1cblx0XHQgICAgICAgICAgICB2YXIgb2xkWm9uZSA9IF9jdXJyZW50Wm9uZTtcblx0XHQgICAgICAgICAgICBfY3VycmVudFpvbmUgPSB0aGlzO1xuXHRcdCAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuaW52b2tlKHRoaXMsIGNhbGxiYWNrLCBhcHBseVRoaXMsIGFwcGx5QXJncywgc291cmNlKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgZmluYWxseSB7XG5cdFx0ICAgICAgICAgICAgICAgIF9jdXJyZW50Wm9uZSA9IG9sZFpvbmU7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgfTtcblx0XHQgICAgICAgIFpvbmUucHJvdG90eXBlLnJ1bkd1YXJkZWQgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpIHtcblx0XHQgICAgICAgICAgICBpZiAoYXBwbHlUaGlzID09PSB2b2lkIDApIHsgYXBwbHlUaGlzID0gbnVsbDsgfVxuXHRcdCAgICAgICAgICAgIGlmIChhcHBseUFyZ3MgPT09IHZvaWQgMCkgeyBhcHBseUFyZ3MgPSBudWxsOyB9XG5cdFx0ICAgICAgICAgICAgaWYgKHNvdXJjZSA9PT0gdm9pZCAwKSB7IHNvdXJjZSA9IG51bGw7IH1cblx0XHQgICAgICAgICAgICB2YXIgb2xkWm9uZSA9IF9jdXJyZW50Wm9uZTtcblx0XHQgICAgICAgICAgICBfY3VycmVudFpvbmUgPSB0aGlzO1xuXHRcdCAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZSh0aGlzLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSk7XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycm9yKSkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIGZpbmFsbHkge1xuXHRcdCAgICAgICAgICAgICAgICBfY3VycmVudFpvbmUgPSBvbGRab25lO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lLnByb3RvdHlwZS5ydW5UYXNrID0gZnVuY3Rpb24gKHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSB7XG5cdFx0ICAgICAgICAgICAgdGFzay5ydW5Db3VudCsrO1xuXHRcdCAgICAgICAgICAgIGlmICh0YXNrLnpvbmUgIT0gdGhpcylcblx0XHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIHRhc2sgY2FuIG9ubHkgYmUgcnVuIGluIHRoZSB6b25lIHdoaWNoIGNyZWF0ZWQgaXQhIChDcmVhdGlvbjogJyArXG5cdFx0ICAgICAgICAgICAgICAgICAgICB0YXNrLnpvbmUubmFtZSArICc7IEV4ZWN1dGlvbjogJyArIHRoaXMubmFtZSArICcpJyk7XG5cdFx0ICAgICAgICAgICAgdmFyIHByZXZpb3VzVGFzayA9IF9jdXJyZW50VGFzaztcblx0XHQgICAgICAgICAgICBfY3VycmVudFRhc2sgPSB0YXNrO1xuXHRcdCAgICAgICAgICAgIHZhciBvbGRab25lID0gX2N1cnJlbnRab25lO1xuXHRcdCAgICAgICAgICAgIF9jdXJyZW50Wm9uZSA9IHRoaXM7XG5cdFx0ICAgICAgICAgICAgdHJ5IHtcblx0XHQgICAgICAgICAgICAgICAgaWYgKHRhc2sudHlwZSA9PSAnbWFjcm9UYXNrJyAmJiB0YXNrLmRhdGEgJiYgIXRhc2suZGF0YS5pc1BlcmlvZGljKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB0YXNrLmNhbmNlbEZuID0gbnVsbDtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICB0cnkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnZva2VUYXNrKHRoaXMsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl96b25lRGVsZWdhdGUuaGFuZGxlRXJyb3IodGhpcywgZXJyb3IpKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgZmluYWxseSB7XG5cdFx0ICAgICAgICAgICAgICAgIF9jdXJyZW50Wm9uZSA9IG9sZFpvbmU7XG5cdFx0ICAgICAgICAgICAgICAgIF9jdXJyZW50VGFzayA9IHByZXZpb3VzVGFzaztcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZS5wcm90b3R5cGUuc2NoZWR1bGVNaWNyb1Rhc2sgPSBmdW5jdGlvbiAoc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLnNjaGVkdWxlVGFzayh0aGlzLCBuZXcgWm9uZVRhc2soJ21pY3JvVGFzaycsIHRoaXMsIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBudWxsKSk7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZS5wcm90b3R5cGUuc2NoZWR1bGVNYWNyb1Rhc2sgPSBmdW5jdGlvbiAoc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIGN1c3RvbUNhbmNlbCkge1xuXHRcdCAgICAgICAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuc2NoZWR1bGVUYXNrKHRoaXMsIG5ldyBab25lVGFzaygnbWFjcm9UYXNrJywgdGhpcywgc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIGN1c3RvbUNhbmNlbCkpO1xuXHRcdCAgICAgICAgfTtcblx0XHQgICAgICAgIFpvbmUucHJvdG90eXBlLnNjaGVkdWxlRXZlbnRUYXNrID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLnNjaGVkdWxlVGFzayh0aGlzLCBuZXcgWm9uZVRhc2soJ2V2ZW50VGFzaycsIHRoaXMsIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpKTtcblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lLnByb3RvdHlwZS5jYW5jZWxUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcblx0XHQgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl96b25lRGVsZWdhdGUuY2FuY2VsVGFzayh0aGlzLCB0YXNrKTtcblx0XHQgICAgICAgICAgICB0YXNrLnJ1bkNvdW50ID0gLTE7XG5cdFx0ICAgICAgICAgICAgdGFzay5jYW5jZWxGbiA9IG51bGw7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHRcdCAgICAgICAgfTtcblx0XHQgICAgICAgIFpvbmUuX19zeW1ib2xfXyA9IF9fc3ltYm9sX187XG5cdFx0ICAgICAgICByZXR1cm4gWm9uZTtcblx0XHQgICAgfSgpKTtcblx0XHQgICAgO1xuXHRcdCAgICB2YXIgWm9uZURlbGVnYXRlID0gKGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgIGZ1bmN0aW9uIFpvbmVEZWxlZ2F0ZSh6b25lLCBwYXJlbnREZWxlZ2F0ZSwgem9uZVNwZWMpIHtcblx0XHQgICAgICAgICAgICB0aGlzLl90YXNrQ291bnRzID0geyBtaWNyb1Rhc2s6IDAsIG1hY3JvVGFzazogMCwgZXZlbnRUYXNrOiAwIH07XG5cdFx0ICAgICAgICAgICAgdGhpcy56b25lID0gem9uZTtcblx0XHQgICAgICAgICAgICB0aGlzLl9wYXJlbnREZWxlZ2F0ZSA9IHBhcmVudERlbGVnYXRlO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX2ZvcmtaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYyAmJiB6b25lU3BlYy5vbkZvcmsgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9mb3JrWlMpO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX2ZvcmtEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uRm9yayA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2ZvcmtEbGd0KTtcblx0XHQgICAgICAgICAgICB0aGlzLl9pbnRlcmNlcHRaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludGVyY2VwdCA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX2ludGVyY2VwdFpTKTtcblx0XHQgICAgICAgICAgICB0aGlzLl9pbnRlcmNlcHREbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW50ZXJjZXB0ID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faW50ZXJjZXB0RGxndCk7XG5cdFx0ICAgICAgICAgICAgdGhpcy5faW52b2tlWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2UgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9pbnZva2VaUyk7XG5cdFx0ICAgICAgICAgICAgdGhpcy5faW52b2tlRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZSA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2ludm9rZURsZ3QpO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYW5kbGVFcnJvciA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX2hhbmRsZUVycm9yWlMpO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkhhbmRsZUVycm9yID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faGFuZGxlRXJyb3JEbGd0KTtcblx0XHQgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZVRhc2taUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vblNjaGVkdWxlVGFzayA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX3NjaGVkdWxlVGFza1pTKTtcblx0XHQgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZVRhc2tEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5fc2NoZWR1bGVUYXNrRGxndCk7XG5cdFx0ICAgICAgICAgICAgdGhpcy5faW52b2tlVGFza1pTID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlVGFzayA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX2ludm9rZVRhc2taUyk7XG5cdFx0ICAgICAgICAgICAgdGhpcy5faW52b2tlVGFza0RsZ3QgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2VUYXNrID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faW52b2tlVGFza0RsZ3QpO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX2NhbmNlbFRhc2taUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkNhbmNlbFRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9jYW5jZWxUYXNrWlMpO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX2NhbmNlbFRhc2tEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uQ2FuY2VsVGFzayA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2NhbmNlbFRhc2tEbGd0KTtcblx0XHQgICAgICAgICAgICB0aGlzLl9oYXNUYXNrWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYXNUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5faGFzVGFza1pTKTtcblx0XHQgICAgICAgICAgICB0aGlzLl9oYXNUYXNrRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkhhc1Rhc2sgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlLl9oYXNUYXNrRGxndCk7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmZvcmsgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgem9uZVNwZWMpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ya1pTXG5cdFx0ICAgICAgICAgICAgICAgID8gdGhpcy5fZm9ya1pTLm9uRm9yayh0aGlzLl9mb3JrRGxndCwgdGhpcy56b25lLCB0YXJnZXRab25lLCB6b25lU3BlYylcblx0XHQgICAgICAgICAgICAgICAgOiBuZXcgWm9uZSh0YXJnZXRab25lLCB6b25lU3BlYyk7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZURlbGVnYXRlLnByb3RvdHlwZS5pbnRlcmNlcHQgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgY2FsbGJhY2ssIHNvdXJjZSkge1xuXHRcdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnRlcmNlcHRaU1xuXHRcdCAgICAgICAgICAgICAgICA/IHRoaXMuX2ludGVyY2VwdFpTLm9uSW50ZXJjZXB0KHRoaXMuX2ludGVyY2VwdERsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgY2FsbGJhY2ssIHNvdXJjZSlcblx0XHQgICAgICAgICAgICAgICAgOiBjYWxsYmFjaztcblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSkge1xuXHRcdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnZva2VaU1xuXHRcdCAgICAgICAgICAgICAgICA/IHRoaXMuX2ludm9rZVpTLm9uSW52b2tlKHRoaXMuX2ludm9rZURsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpXG5cdFx0ICAgICAgICAgICAgICAgIDogY2FsbGJhY2suYXBwbHkoYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuXHRcdCAgICAgICAgfTtcblx0XHQgICAgICAgIFpvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgZXJyb3IpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlRXJyb3JaU1xuXHRcdCAgICAgICAgICAgICAgICA/IHRoaXMuX2hhbmRsZUVycm9yWlMub25IYW5kbGVFcnJvcih0aGlzLl9oYW5kbGVFcnJvckRsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgZXJyb3IpXG5cdFx0ICAgICAgICAgICAgICAgIDogdHJ1ZTtcblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLnNjaGVkdWxlVGFzayA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCB0YXNrKSB7XG5cdFx0ICAgICAgICAgICAgdHJ5IHtcblx0XHQgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVkdWxlVGFza1pTKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVUYXNrWlMub25TY2hlZHVsZVRhc2sodGhpcy5fc2NoZWR1bGVUYXNrRGxndCwgdGhpcy56b25lLCB0YXJnZXRab25lLCB0YXNrKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXNrLnNjaGVkdWxlRm4pIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHRhc2suc2NoZWR1bGVGbih0YXNrKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXNrLnR5cGUgPT0gJ21pY3JvVGFzaycpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlTWljcm9UYXNrKHRhc2spO1xuXHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIGVsc2Uge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYXNrIGlzIG1pc3Npbmcgc2NoZWR1bGVGbi4nKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICByZXR1cm4gdGFzaztcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgZmluYWxseSB7XG5cdFx0ICAgICAgICAgICAgICAgIGlmICh0YXJnZXRab25lID09IHRoaXMuem9uZSkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVGFza0NvdW50KHRhc2sudHlwZSwgMSk7XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZURlbGVnYXRlLnByb3RvdHlwZS5pbnZva2VUYXNrID0gZnVuY3Rpb24gKHRhcmdldFpvbmUsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSB7XG5cdFx0ICAgICAgICAgICAgdHJ5IHtcblx0XHQgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZVRhc2taU1xuXHRcdCAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9pbnZva2VUYXNrWlMub25JbnZva2VUYXNrKHRoaXMuX2ludm9rZVRhc2tEbGd0LCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKVxuXHRcdCAgICAgICAgICAgICAgICAgICAgOiB0YXNrLmNhbGxiYWNrLmFwcGx5KGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgZmluYWxseSB7XG5cdFx0ICAgICAgICAgICAgICAgIGlmICh0YXJnZXRab25lID09IHRoaXMuem9uZSAmJiAodGFzay50eXBlICE9ICdldmVudFRhc2snKSAmJiAhKHRhc2suZGF0YSAmJiB0YXNrLmRhdGEuaXNQZXJpb2RpYykpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRhc2tDb3VudCh0YXNrLnR5cGUsIC0xKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmNhbmNlbFRhc2sgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgdGFzaykge1xuXHRcdCAgICAgICAgICAgIHZhciB2YWx1ZTtcblx0XHQgICAgICAgICAgICBpZiAodGhpcy5fY2FuY2VsVGFza1pTKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fY2FuY2VsVGFza1pTLm9uQ2FuY2VsVGFzayh0aGlzLl9jYW5jZWxUYXNrRGxndCwgdGhpcy56b25lLCB0YXJnZXRab25lLCB0YXNrKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgZWxzZSBpZiAoIXRhc2suY2FuY2VsRm4pIHtcblx0XHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYXNrIGRvZXMgbm90IHN1cHBvcnQgY2FuY2VsbGF0aW9uLCBvciBpcyBhbHJlYWR5IGNhbmNlbGVkLicpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICBlbHNlIHtcblx0XHQgICAgICAgICAgICAgICAgdmFsdWUgPSB0YXNrLmNhbmNlbEZuKHRhc2spO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICBpZiAodGFyZ2V0Wm9uZSA9PSB0aGlzLnpvbmUpIHtcblx0XHQgICAgICAgICAgICAgICAgLy8gdGhpcyBzaG91bGQgbm90IGJlIGluIHRoZSBmaW5hbGx5IGJsb2NrLCBiZWNhdXNlIGV4Y2VwdGlvbnMgYXNzdW1lIG5vdCBjYW5jZWxlZC5cblx0XHQgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVGFza0NvdW50KHRhc2sudHlwZSwgLTEpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZURlbGVnYXRlLnByb3RvdHlwZS5oYXNUYXNrID0gZnVuY3Rpb24gKHRhcmdldFpvbmUsIGlzRW1wdHkpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gdGhpcy5faGFzVGFza1pTICYmIHRoaXMuX2hhc1Rhc2taUy5vbkhhc1Rhc2sodGhpcy5faGFzVGFza0RsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgaXNFbXB0eSk7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZURlbGVnYXRlLnByb3RvdHlwZS5fdXBkYXRlVGFza0NvdW50ID0gZnVuY3Rpb24gKHR5cGUsIGNvdW50KSB7XG5cdFx0ICAgICAgICAgICAgdmFyIGNvdW50cyA9IHRoaXMuX3Rhc2tDb3VudHM7XG5cdFx0ICAgICAgICAgICAgdmFyIHByZXYgPSBjb3VudHNbdHlwZV07XG5cdFx0ICAgICAgICAgICAgdmFyIG5leHQgPSBjb3VudHNbdHlwZV0gPSBwcmV2ICsgY291bnQ7XG5cdFx0ICAgICAgICAgICAgaWYgKG5leHQgPCAwKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTW9yZSB0YXNrcyBleGVjdXRlZCB0aGVuIHdlcmUgc2NoZWR1bGVkLicpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICBpZiAocHJldiA9PSAwIHx8IG5leHQgPT0gMCkge1xuXHRcdCAgICAgICAgICAgICAgICB2YXIgaXNFbXB0eSA9IHtcblx0XHQgICAgICAgICAgICAgICAgICAgIG1pY3JvVGFzazogY291bnRzLm1pY3JvVGFzayA+IDAsXG5cdFx0ICAgICAgICAgICAgICAgICAgICBtYWNyb1Rhc2s6IGNvdW50cy5tYWNyb1Rhc2sgPiAwLFxuXHRcdCAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXNrOiBjb3VudHMuZXZlbnRUYXNrID4gMCxcblx0XHQgICAgICAgICAgICAgICAgICAgIGNoYW5nZTogdHlwZVxuXHRcdCAgICAgICAgICAgICAgICB9O1xuXHRcdCAgICAgICAgICAgICAgICB0cnkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNUYXNrKHRoaXMuem9uZSwgaXNFbXB0eSk7XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgZmluYWxseSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50RGVsZWdhdGUpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnREZWxlZ2F0ZS5fdXBkYXRlVGFza0NvdW50KHR5cGUsIGNvdW50KTtcblx0XHQgICAgICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICByZXR1cm4gWm9uZURlbGVnYXRlO1xuXHRcdCAgICB9KCkpO1xuXHRcdCAgICB2YXIgWm9uZVRhc2sgPSAoZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgZnVuY3Rpb24gWm9uZVRhc2sodHlwZSwgem9uZSwgc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucywgc2NoZWR1bGVGbiwgY2FuY2VsRm4pIHtcblx0XHQgICAgICAgICAgICB0aGlzLnJ1bkNvdW50ID0gMDtcblx0XHQgICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdCAgICAgICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG5cdFx0ICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdFx0ICAgICAgICAgICAgdGhpcy5kYXRhID0gb3B0aW9ucztcblx0XHQgICAgICAgICAgICB0aGlzLnNjaGVkdWxlRm4gPSBzY2hlZHVsZUZuO1xuXHRcdCAgICAgICAgICAgIHRoaXMuY2FuY2VsRm4gPSBjYW5jZWxGbjtcblx0XHQgICAgICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdFx0ICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHRcdCAgICAgICAgICAgIHRoaXMuaW52b2tlID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICAgICAgICBfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzKys7XG5cdFx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gem9uZS5ydW5UYXNrKHNlbGYsIHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgZmluYWxseSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBpZiAoX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcyA9PSAxKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgZHJhaW5NaWNyb1Rhc2tRdWV1ZSgpO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICAgICAgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcy0tO1xuXHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgfTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICAgIFpvbmVUYXNrLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICBpZiAodGhpcy5kYXRhICYmIHR5cGVvZiB0aGlzLmRhdGEuaGFuZGxlSWQgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuaGFuZGxlSWQ7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIGVsc2Uge1xuXHRcdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICByZXR1cm4gWm9uZVRhc2s7XG5cdFx0ICAgIH0oKSk7XG5cdFx0ICAgIGZ1bmN0aW9uIF9fc3ltYm9sX18obmFtZSkgeyByZXR1cm4gJ19fem9uZV9zeW1ib2xfXycgKyBuYW1lOyB9XG5cdFx0ICAgIDtcblx0XHQgICAgdmFyIHN5bWJvbFNldFRpbWVvdXQgPSBfX3N5bWJvbF9fKCdzZXRUaW1lb3V0Jyk7XG5cdFx0ICAgIHZhciBzeW1ib2xQcm9taXNlID0gX19zeW1ib2xfXygnUHJvbWlzZScpO1xuXHRcdCAgICB2YXIgc3ltYm9sVGhlbiA9IF9fc3ltYm9sX18oJ3RoZW4nKTtcblx0XHQgICAgdmFyIF9jdXJyZW50Wm9uZSA9IG5ldyBab25lKG51bGwsIG51bGwpO1xuXHRcdCAgICB2YXIgX2N1cnJlbnRUYXNrID0gbnVsbDtcblx0XHQgICAgdmFyIF9taWNyb1Rhc2tRdWV1ZSA9IFtdO1xuXHRcdCAgICB2YXIgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSA9IGZhbHNlO1xuXHRcdCAgICB2YXIgX3VuY2F1Z2h0UHJvbWlzZUVycm9ycyA9IFtdO1xuXHRcdCAgICB2YXIgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcyA9IDA7XG5cdFx0ICAgIGZ1bmN0aW9uIHNjaGVkdWxlUXVldWVEcmFpbigpIHtcblx0XHQgICAgICAgIC8vIGlmIHdlIGFyZSBub3QgcnVubmluZyBpbiBhbnkgdGFzaywgYW5kIHRoZXJlIGhhcyBub3QgYmVlbiBhbnl0aGluZyBzY2hlZHVsZWRcblx0XHQgICAgICAgIC8vIHdlIG11c3QgYm9vdHN0cmFwIHRoZSBpbml0aWFsIHRhc2sgY3JlYXRpb24gYnkgbWFudWFsbHkgc2NoZWR1bGluZyB0aGUgZHJhaW5cblx0XHQgICAgICAgIGlmIChfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzID09IDAgJiYgX21pY3JvVGFza1F1ZXVlLmxlbmd0aCA9PSAwKSB7XG5cdFx0ICAgICAgICAgICAgLy8gV2UgYXJlIG5vdCBydW5uaW5nIGluIFRhc2ssIHNvIHdlIG5lZWQgdG8ga2lja3N0YXJ0IHRoZSBtaWNyb3Rhc2sgcXVldWUuXG5cdFx0ICAgICAgICAgICAgaWYgKGdsb2JhbFtzeW1ib2xQcm9taXNlXSkge1xuXHRcdCAgICAgICAgICAgICAgICBnbG9iYWxbc3ltYm9sUHJvbWlzZV0ucmVzb2x2ZSgwKVtzeW1ib2xUaGVuXShkcmFpbk1pY3JvVGFza1F1ZXVlKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICAgIGdsb2JhbFtzeW1ib2xTZXRUaW1lb3V0XShkcmFpbk1pY3JvVGFza1F1ZXVlLCAwKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgIH1cblx0XHQgICAgZnVuY3Rpb24gc2NoZWR1bGVNaWNyb1Rhc2sodGFzaykge1xuXHRcdCAgICAgICAgc2NoZWR1bGVRdWV1ZURyYWluKCk7XG5cdFx0ICAgICAgICBfbWljcm9UYXNrUXVldWUucHVzaCh0YXNrKTtcblx0XHQgICAgfVxuXHRcdCAgICBmdW5jdGlvbiBjb25zb2xlRXJyb3IoZSkge1xuXHRcdCAgICAgICAgdmFyIHJlamVjdGlvbiA9IGUgJiYgZS5yZWplY3Rpb247XG5cdFx0ICAgICAgICBpZiAocmVqZWN0aW9uKSB7XG5cdFx0ICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIFByb21pc2UgcmVqZWN0aW9uOicsIHJlamVjdGlvbiBpbnN0YW5jZW9mIEVycm9yID8gcmVqZWN0aW9uLm1lc3NhZ2UgOiByZWplY3Rpb24sICc7IFpvbmU6JywgZS56b25lLm5hbWUsICc7IFRhc2s6JywgZS50YXNrICYmIGUudGFzay5zb3VyY2UsICc7IFZhbHVlOicsIHJlamVjdGlvbiwgcmVqZWN0aW9uIGluc3RhbmNlb2YgRXJyb3IgPyByZWplY3Rpb24uc3RhY2sgOiB1bmRlZmluZWQpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgY29uc29sZS5lcnJvcihlKTtcblx0XHQgICAgfVxuXHRcdCAgICBmdW5jdGlvbiBkcmFpbk1pY3JvVGFza1F1ZXVlKCkge1xuXHRcdCAgICAgICAgaWYgKCFfaXNEcmFpbmluZ01pY3JvdGFza1F1ZXVlKSB7XG5cdFx0ICAgICAgICAgICAgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSA9IHRydWU7XG5cdFx0ICAgICAgICAgICAgd2hpbGUgKF9taWNyb1Rhc2tRdWV1ZS5sZW5ndGgpIHtcblx0XHQgICAgICAgICAgICAgICAgdmFyIHF1ZXVlID0gX21pY3JvVGFza1F1ZXVlO1xuXHRcdCAgICAgICAgICAgICAgICBfbWljcm9UYXNrUXVldWUgPSBbXTtcblx0XHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgdmFyIHRhc2sgPSBxdWV1ZVtpXTtcblx0XHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgdGFzay56b25lLnJ1blRhc2sodGFzaywgbnVsbCwgbnVsbCk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGVFcnJvcihlKTtcblx0XHQgICAgICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICB3aGlsZSAoX3VuY2F1Z2h0UHJvbWlzZUVycm9ycy5sZW5ndGgpIHtcblx0XHQgICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbigpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHZhciB1bmNhdWdodFByb21pc2VFcnJvciA9IF91bmNhdWdodFByb21pc2VFcnJvcnMuc2hpZnQoKTtcblx0XHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgdW5jYXVnaHRQcm9taXNlRXJyb3Iuem9uZS5ydW5HdWFyZGVkKGZ1bmN0aW9uICgpIHsgdGhyb3cgdW5jYXVnaHRQcm9taXNlRXJyb3I7IH0pO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlRXJyb3IoZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIH07XG5cdFx0ICAgICAgICAgICAgICAgIHdoaWxlIChfdW5jYXVnaHRQcm9taXNlRXJyb3JzLmxlbmd0aCkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgX2xvb3BfMSgpO1xuXHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIF9pc0RyYWluaW5nTWljcm90YXNrUXVldWUgPSBmYWxzZTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgfVxuXHRcdCAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKHZhbHVlKSB7XG5cdFx0ICAgICAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUudGhlbjtcblx0XHQgICAgfVxuXHRcdCAgICBmdW5jdGlvbiBmb3J3YXJkUmVzb2x1dGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH1cblx0XHQgICAgZnVuY3Rpb24gZm9yd2FyZFJlamVjdGlvbihyZWplY3Rpb24pIHsgcmV0dXJuIFpvbmVBd2FyZVByb21pc2UucmVqZWN0KHJlamVjdGlvbik7IH1cblx0XHQgICAgdmFyIHN5bWJvbFN0YXRlID0gX19zeW1ib2xfXygnc3RhdGUnKTtcblx0XHQgICAgdmFyIHN5bWJvbFZhbHVlID0gX19zeW1ib2xfXygndmFsdWUnKTtcblx0XHQgICAgdmFyIHNvdXJjZSA9ICdQcm9taXNlLnRoZW4nO1xuXHRcdCAgICB2YXIgVU5SRVNPTFZFRCA9IG51bGw7XG5cdFx0ICAgIHZhciBSRVNPTFZFRCA9IHRydWU7XG5cdFx0ICAgIHZhciBSRUpFQ1RFRCA9IGZhbHNlO1xuXHRcdCAgICB2YXIgUkVKRUNURURfTk9fQ0FUQ0ggPSAwO1xuXHRcdCAgICBmdW5jdGlvbiBtYWtlUmVzb2x2ZXIocHJvbWlzZSwgc3RhdGUpIHtcblx0XHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAodikge1xuXHRcdCAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHN0YXRlLCB2KTtcblx0XHQgICAgICAgICAgICAvLyBEbyBub3QgcmV0dXJuIHZhbHVlIG9yIHlvdSB3aWxsIGJyZWFrIHRoZSBQcm9taXNlIHNwZWMuXG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICB9XG5cdFx0ICAgIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHN0YXRlLCB2YWx1ZSkge1xuXHRcdCAgICAgICAgaWYgKHByb21pc2Vbc3ltYm9sU3RhdGVdID09PSBVTlJFU09MVkVEKSB7XG5cdFx0ICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgWm9uZUF3YXJlUHJvbWlzZSAmJiB2YWx1ZVtzeW1ib2xTdGF0ZV0gIT09IFVOUkVTT0xWRUQpIHtcblx0XHQgICAgICAgICAgICAgICAgY2xlYXJSZWplY3RlZE5vQ2F0Y2godmFsdWUpO1xuXHRcdCAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZShwcm9taXNlLCB2YWx1ZVtzeW1ib2xTdGF0ZV0sIHZhbHVlW3N5bWJvbFZhbHVlXSk7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIGVsc2UgaWYgKGlzVGhlbmFibGUodmFsdWUpKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4obWFrZVJlc29sdmVyKHByb21pc2UsIHN0YXRlKSwgbWFrZVJlc29sdmVyKHByb21pc2UsIGZhbHNlKSk7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIGVsc2Uge1xuXHRcdCAgICAgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFN0YXRlXSA9IHN0YXRlO1xuXHRcdCAgICAgICAgICAgICAgICB2YXIgcXVldWUgPSBwcm9taXNlW3N5bWJvbFZhbHVlXTtcblx0XHQgICAgICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xWYWx1ZV0gPSB2YWx1ZTtcblx0XHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7KSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZVJlc29sdmVPclJlamVjdChwcm9taXNlLCBxdWV1ZVtpKytdLCBxdWV1ZVtpKytdLCBxdWV1ZVtpKytdLCBxdWV1ZVtpKytdKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBpZiAocXVldWUubGVuZ3RoID09IDAgJiYgc3RhdGUgPT0gUkVKRUNURUQpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHByb21pc2Vbc3ltYm9sU3RhdGVdID0gUkVKRUNURURfTk9fQ0FUQ0g7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuY2F1Z2h0IChpbiBwcm9taXNlKTogXCIgKyB2YWx1ZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IGU7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IucmVqZWN0aW9uID0gdmFsdWU7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IucHJvbWlzZSA9IHByb21pc2U7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3Iuem9uZSA9IFpvbmUuY3VycmVudDtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci50YXNrID0gWm9uZS5jdXJyZW50VGFzaztcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICBfdW5jYXVnaHRQcm9taXNlRXJyb3JzLnB1c2goZXJyb3IpO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlUXVldWVEcmFpbigpO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgLy8gUmVzb2x2aW5nIGFuIGFscmVhZHkgcmVzb2x2ZWQgcHJvbWlzZSBpcyBhIG5vb3AuXG5cdFx0ICAgICAgICByZXR1cm4gcHJvbWlzZTtcblx0XHQgICAgfVxuXHRcdCAgICBmdW5jdGlvbiBjbGVhclJlamVjdGVkTm9DYXRjaChwcm9taXNlKSB7XG5cdFx0ICAgICAgICBpZiAocHJvbWlzZVtzeW1ib2xTdGF0ZV0gPT09IFJFSkVDVEVEX05PX0NBVENIKSB7XG5cdFx0ICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xTdGF0ZV0gPSBSRUpFQ1RFRDtcblx0XHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF91bmNhdWdodFByb21pc2VFcnJvcnMubGVuZ3RoOyBpKyspIHtcblx0XHQgICAgICAgICAgICAgICAgaWYgKHByb21pc2UgPT09IF91bmNhdWdodFByb21pc2VFcnJvcnNbaV0ucHJvbWlzZSkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgX3VuY2F1Z2h0UHJvbWlzZUVycm9ycy5zcGxpY2UoaSwgMSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH1cblx0XHQgICAgfVxuXHRcdCAgICBmdW5jdGlvbiBzY2hlZHVsZVJlc29sdmVPclJlamVjdChwcm9taXNlLCB6b25lLCBjaGFpblByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG5cdFx0ICAgICAgICBjbGVhclJlamVjdGVkTm9DYXRjaChwcm9taXNlKTtcblx0XHQgICAgICAgIHZhciBkZWxlZ2F0ZSA9IHByb21pc2Vbc3ltYm9sU3RhdGVdID8gb25GdWxmaWxsZWQgfHwgZm9yd2FyZFJlc29sdXRpb24gOiBvblJlamVjdGVkIHx8IGZvcndhcmRSZWplY3Rpb247XG5cdFx0ICAgICAgICB6b25lLnNjaGVkdWxlTWljcm9UYXNrKHNvdXJjZSwgZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICAgIHRyeSB7XG5cdFx0ICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKGNoYWluUHJvbWlzZSwgdHJ1ZSwgem9uZS5ydW4oZGVsZWdhdGUsIG51bGwsIFtwcm9taXNlW3N5bWJvbFZhbHVlXV0pKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKGNoYWluUHJvbWlzZSwgZmFsc2UsIGVycm9yKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICB9KTtcblx0XHQgICAgfVxuXHRcdCAgICB2YXIgWm9uZUF3YXJlUHJvbWlzZSA9IChmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICBmdW5jdGlvbiBab25lQXdhcmVQcm9taXNlKGV4ZWN1dG9yKSB7XG5cdFx0ICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzO1xuXHRcdCAgICAgICAgICAgIGlmICghKHByb21pc2UgaW5zdGFuY2VvZiBab25lQXdhcmVQcm9taXNlKSkge1xuXHRcdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3QgYmUgYW4gaW5zdGFuY2VvZiBQcm9taXNlLicpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFN0YXRlXSA9IFVOUkVTT0xWRUQ7XG5cdFx0ICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xWYWx1ZV0gPSBbXTsgLy8gcXVldWU7XG5cdFx0ICAgICAgICAgICAgdHJ5IHtcblx0XHQgICAgICAgICAgICAgICAgZXhlY3V0b3IgJiYgZXhlY3V0b3IobWFrZVJlc29sdmVyKHByb21pc2UsIFJFU09MVkVEKSwgbWFrZVJlc29sdmVyKHByb21pc2UsIFJFSkVDVEVEKSk7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIGNhdGNoIChlKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIGZhbHNlLCBlKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBab25lQXdhcmVQcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVByb21pc2UobmV3IHRoaXMobnVsbCksIFJFU09MVkVELCB2YWx1ZSk7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVByb21pc2UobmV3IHRoaXMobnVsbCksIFJFSkVDVEVELCBlcnJvcik7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuXHRcdCAgICAgICAgICAgIHZhciByZXNvbHZlO1xuXHRcdCAgICAgICAgICAgIHZhciByZWplY3Q7XG5cdFx0ICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhmdW5jdGlvbiAocmVzLCByZWopIHsgcmVzb2x2ZSA9IHJlczsgcmVqZWN0ID0gcmVqOyB9KTtcblx0XHQgICAgICAgICAgICBmdW5jdGlvbiBvblJlc29sdmUodmFsdWUpIHsgcHJvbWlzZSAmJiAocHJvbWlzZSA9IG51bGwgfHwgcmVzb2x2ZSh2YWx1ZSkpOyB9XG5cdFx0ICAgICAgICAgICAgZnVuY3Rpb24gb25SZWplY3QoZXJyb3IpIHsgcHJvbWlzZSAmJiAocHJvbWlzZSA9IG51bGwgfHwgcmVqZWN0KGVycm9yKSk7IH1cblx0XHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlc18xID0gdmFsdWVzOyBfaSA8IHZhbHVlc18xLmxlbmd0aDsgX2krKykge1xuXHRcdCAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNfMVtfaV07XG5cdFx0ICAgICAgICAgICAgICAgIGlmICghaXNUaGVuYWJsZSh2YWx1ZSkpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5yZXNvbHZlKHZhbHVlKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICB2YWx1ZS50aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcblx0XHQgICAgICAgIH07XG5cdFx0ICAgICAgICBab25lQXdhcmVQcm9taXNlLmFsbCA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcblx0XHQgICAgICAgICAgICB2YXIgcmVzb2x2ZTtcblx0XHQgICAgICAgICAgICB2YXIgcmVqZWN0O1xuXHRcdCAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IHRoaXMoZnVuY3Rpb24gKHJlcywgcmVqKSB7IHJlc29sdmUgPSByZXM7IHJlamVjdCA9IHJlajsgfSk7XG5cdFx0ICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcblx0XHQgICAgICAgICAgICB2YXIgcmVzb2x2ZWRWYWx1ZXMgPSBbXTtcblx0XHQgICAgICAgICAgICBmdW5jdGlvbiBvblJlamVjdChlcnJvcikgeyBwcm9taXNlICYmIHJlamVjdChlcnJvcik7IHByb21pc2UgPSBudWxsOyB9XG5cdFx0ICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2YWx1ZXNfMiA9IHZhbHVlczsgX2kgPCB2YWx1ZXNfMi5sZW5ndGg7IF9pKyspIHtcblx0XHQgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzXzJbX2ldO1xuXHRcdCAgICAgICAgICAgICAgICBpZiAoIWlzVGhlbmFibGUodmFsdWUpKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucmVzb2x2ZSh2YWx1ZSk7XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgdmFsdWUudGhlbigoZnVuY3Rpb24gKGluZGV4KSB7IHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkVmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgY291bnQtLTtcblx0XHQgICAgICAgICAgICAgICAgICAgIGlmIChwcm9taXNlICYmICFjb3VudCkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzb2x2ZWRWYWx1ZXMpO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9PSBudWxsO1xuXHRcdCAgICAgICAgICAgICAgICB9OyB9KShjb3VudCksIG9uUmVqZWN0KTtcblx0XHQgICAgICAgICAgICAgICAgY291bnQrKztcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgaWYgKCFjb3VudClcblx0XHQgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNvbHZlZFZhbHVlcyk7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuXHRcdCAgICAgICAgICAgIHZhciBjaGFpblByb21pc2UgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihudWxsKTtcblx0XHQgICAgICAgICAgICB2YXIgem9uZSA9IFpvbmUuY3VycmVudDtcblx0XHQgICAgICAgICAgICBpZiAodGhpc1tzeW1ib2xTdGF0ZV0gPT0gVU5SRVNPTFZFRCkge1xuXHRcdCAgICAgICAgICAgICAgICB0aGlzW3N5bWJvbFZhbHVlXS5wdXNoKHpvbmUsIGNoYWluUHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICBlbHNlIHtcblx0XHQgICAgICAgICAgICAgICAgc2NoZWR1bGVSZXNvbHZlT3JSZWplY3QodGhpcywgem9uZSwgY2hhaW5Qcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCk7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIHJldHVybiBjaGFpblByb21pc2U7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbiAob25SZWplY3RlZCkge1xuXHRcdCAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICAgICAgcmV0dXJuIFpvbmVBd2FyZVByb21pc2U7XG5cdFx0ICAgIH0oKSk7XG5cdFx0ICAgIHZhciBOYXRpdmVQcm9taXNlID0gZ2xvYmFsW19fc3ltYm9sX18oJ1Byb21pc2UnKV0gPSBnbG9iYWwuUHJvbWlzZTtcblx0XHQgICAgZ2xvYmFsLlByb21pc2UgPSBab25lQXdhcmVQcm9taXNlO1xuXHRcdCAgICBpZiAoTmF0aXZlUHJvbWlzZSkge1xuXHRcdCAgICAgICAgdmFyIE5hdGl2ZVByb21pc2VQcm90b3RvdHlwZSA9IE5hdGl2ZVByb21pc2UucHJvdG90eXBlO1xuXHRcdCAgICAgICAgdmFyIE5hdGl2ZVByb21pc2VUaGVuXzEgPSBOYXRpdmVQcm9taXNlUHJvdG90b3R5cGVbX19zeW1ib2xfXygndGhlbicpXVxuXHRcdCAgICAgICAgICAgID0gTmF0aXZlUHJvbWlzZVByb3RvdG90eXBlLnRoZW47XG5cdFx0ICAgICAgICBOYXRpdmVQcm9taXNlUHJvdG90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvblJlc29sdmUsIG9uUmVqZWN0KSB7XG5cdFx0ICAgICAgICAgICAgdmFyIG5hdGl2ZVByb21pc2UgPSB0aGlzO1xuXHRcdCAgICAgICAgICAgIHJldHVybiBuZXcgWm9uZUF3YXJlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0ICAgICAgICAgICAgICAgIE5hdGl2ZVByb21pc2VUaGVuXzEuY2FsbChuYXRpdmVQcm9taXNlLCByZXNvbHZlLCByZWplY3QpO1xuXHRcdCAgICAgICAgICAgIH0pLnRoZW4ob25SZXNvbHZlLCBvblJlamVjdCk7XG5cdFx0ICAgICAgICB9O1xuXHRcdCAgICB9XG5cdFx0ICAgIC8vIFRoaXMgaXMgbm90IHBhcnQgb2YgcHVibGljIEFQSSwgYnV0IGl0IGlzIHVzZWZ1bGwgZm9yIHRlc3RzLCBzbyB3ZSBleHBvc2UgaXQuXG5cdFx0ICAgIFByb21pc2VbWm9uZS5fX3N5bWJvbF9fKCd1bmNhdWdodFByb21pc2VFcnJvcnMnKV0gPSBfdW5jYXVnaHRQcm9taXNlRXJyb3JzO1xuXHRcdCAgICByZXR1cm4gZ2xvYmFsLlpvbmUgPSBab25lO1xuXHRcdH0pKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93KTtcblx0XG5cdFx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXHRcblx0LyoqKi8gfSxcblx0LyogMiAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblx0XG5cdFx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcdHZhciBXVEZfSVNTVUVfNTU1ID0gJ0FuY2hvcixBcmVhLEF1ZGlvLEJSLEJhc2UsQmFzZUZvbnQsQm9keSxCdXR0b24sQ2FudmFzLENvbnRlbnQsRExpc3QsRGlyZWN0b3J5LERpdixFbWJlZCxGaWVsZFNldCxGb250LEZvcm0sRnJhbWUsRnJhbWVTZXQsSFIsSGVhZCxIZWFkaW5nLEh0bWwsSUZyYW1lLEltYWdlLElucHV0LEtleWdlbixMSSxMYWJlbCxMZWdlbmQsTGluayxNYXAsTWFycXVlZSxNZWRpYSxNZW51LE1ldGEsTWV0ZXIsTW9kLE9MaXN0LE9iamVjdCxPcHRHcm91cCxPcHRpb24sT3V0cHV0LFBhcmFncmFwaCxQcmUsUHJvZ3Jlc3MsUXVvdGUsU2NyaXB0LFNlbGVjdCxTb3VyY2UsU3BhbixTdHlsZSxUYWJsZUNhcHRpb24sVGFibGVDZWxsLFRhYmxlQ29sLFRhYmxlLFRhYmxlUm93LFRhYmxlU2VjdGlvbixUZXh0QXJlYSxUaXRsZSxUcmFjayxVTGlzdCxVbmtub3duLFZpZGVvJztcblx0XHR2YXIgTk9fRVZFTlRfVEFSR0VUID0gJ0FwcGxpY2F0aW9uQ2FjaGUsRXZlbnRTb3VyY2UsRmlsZVJlYWRlcixJbnB1dE1ldGhvZENvbnRleHQsTWVkaWFDb250cm9sbGVyLE1lc3NhZ2VQb3J0LE5vZGUsUGVyZm9ybWFuY2UsU1ZHRWxlbWVudEluc3RhbmNlLFNoYXJlZFdvcmtlcixUZXh0VHJhY2ssVGV4dFRyYWNrQ3VlLFRleHRUcmFja0xpc3QsV2ViS2l0TmFtZWRGbG93LFdpbmRvdyxXb3JrZXIsV29ya2VyR2xvYmFsU2NvcGUsWE1MSHR0cFJlcXVlc3QsWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldCxYTUxIdHRwUmVxdWVzdFVwbG9hZCxJREJSZXF1ZXN0LElEQk9wZW5EQlJlcXVlc3QsSURCRGF0YWJhc2UsSURCVHJhbnNhY3Rpb24sSURCQ3Vyc29yLERCSW5kZXgnLnNwbGl0KCcsJyk7XG5cdFx0dmFyIEVWRU5UX1RBUkdFVCA9ICdFdmVudFRhcmdldCc7XG5cdFx0ZnVuY3Rpb24gZXZlbnRUYXJnZXRQYXRjaChfZ2xvYmFsKSB7XG5cdFx0ICAgIHZhciBhcGlzID0gW107XG5cdFx0ICAgIHZhciBpc1d0ZiA9IF9nbG9iYWxbJ3d0ZiddO1xuXHRcdCAgICBpZiAoaXNXdGYpIHtcblx0XHQgICAgICAgIC8vIFdvcmthcm91bmQgZm9yOiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3RyYWNpbmctZnJhbWV3b3JrL2lzc3Vlcy81NTVcblx0XHQgICAgICAgIGFwaXMgPSBXVEZfSVNTVUVfNTU1LnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiAnSFRNTCcgKyB2ICsgJ0VsZW1lbnQnOyB9KS5jb25jYXQoTk9fRVZFTlRfVEFSR0VUKTtcblx0XHQgICAgfVxuXHRcdCAgICBlbHNlIGlmIChfZ2xvYmFsW0VWRU5UX1RBUkdFVF0pIHtcblx0XHQgICAgICAgIGFwaXMucHVzaChFVkVOVF9UQVJHRVQpO1xuXHRcdCAgICB9XG5cdFx0ICAgIGVsc2Uge1xuXHRcdCAgICAgICAgLy8gTm90ZTogRXZlbnRUYXJnZXQgaXMgbm90IGF2YWlsYWJsZSBpbiBhbGwgYnJvd3NlcnMsXG5cdFx0ICAgICAgICAvLyBpZiBpdCdzIG5vdCBhdmFpbGFibGUsIHdlIGluc3RlYWQgcGF0Y2ggdGhlIEFQSXMgaW4gdGhlIElETCB0aGF0IGluaGVyaXQgZnJvbSBFdmVudFRhcmdldFxuXHRcdCAgICAgICAgYXBpcyA9IE5PX0VWRU5UX1RBUkdFVDtcblx0XHQgICAgfVxuXHRcdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFwaXMubGVuZ3RoOyBpKyspIHtcblx0XHQgICAgICAgIHZhciB0eXBlID0gX2dsb2JhbFthcGlzW2ldXTtcblx0XHQgICAgICAgIHV0aWxzXzEucGF0Y2hFdmVudFRhcmdldE1ldGhvZHModHlwZSAmJiB0eXBlLnByb3RvdHlwZSk7XG5cdFx0ICAgIH1cblx0XHR9XG5cdFx0ZXhwb3J0cy5ldmVudFRhcmdldFBhdGNoID0gZXZlbnRUYXJnZXRQYXRjaDtcblx0XG5cdFxuXHQvKioqLyB9LFxuXHQvKiAzICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXHRcblx0XHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7LyoqXG5cdFx0ICogU3VwcHJlc3MgY2xvc3VyZSBjb21waWxlciBlcnJvcnMgYWJvdXQgdW5rbm93biAncHJvY2VzcycgdmFyaWFibGVcblx0XHQgKiBAZmlsZW92ZXJ2aWV3XG5cdFx0ICogQHN1cHByZXNzIHt1bmRlZmluZWRWYXJzfVxuXHRcdCAqL1xuXHRcdFwidXNlIHN0cmljdFwiO1xuXHRcdGV4cG9ydHMuem9uZVN5bWJvbCA9IFpvbmVbJ19fc3ltYm9sX18nXTtcblx0XHR2YXIgX2dsb2JhbCA9IHR5cGVvZiB3aW5kb3cgPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3c7XG5cdFx0ZnVuY3Rpb24gYmluZEFyZ3VtZW50cyhhcmdzLCBzb3VyY2UpIHtcblx0XHQgICAgZm9yICh2YXIgaSA9IGFyZ3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHQgICAgICAgIGlmICh0eXBlb2YgYXJnc1tpXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdCAgICAgICAgICAgIGFyZ3NbaV0gPSBab25lLmN1cnJlbnQud3JhcChhcmdzW2ldLCBzb3VyY2UgKyAnXycgKyBpKTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgfVxuXHRcdCAgICByZXR1cm4gYXJncztcblx0XHR9XG5cdFx0ZXhwb3J0cy5iaW5kQXJndW1lbnRzID0gYmluZEFyZ3VtZW50cztcblx0XHQ7XG5cdFx0ZnVuY3Rpb24gcGF0Y2hQcm90b3R5cGUocHJvdG90eXBlLCBmbk5hbWVzKSB7XG5cdFx0ICAgIHZhciBzb3VyY2UgPSBwcm90b3R5cGUuY29uc3RydWN0b3JbJ25hbWUnXTtcblx0XHQgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbihpKSB7XG5cdFx0ICAgICAgICB2YXIgbmFtZV8xID0gZm5OYW1lc1tpXTtcblx0XHQgICAgICAgIHZhciBkZWxlZ2F0ZSA9IHByb3RvdHlwZVtuYW1lXzFdO1xuXHRcdCAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG5cdFx0ICAgICAgICAgICAgcHJvdG90eXBlW25hbWVfMV0gPSAoZnVuY3Rpb24gKGRlbGVnYXRlKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsZWdhdGUuYXBwbHkodGhpcywgYmluZEFyZ3VtZW50cyhhcmd1bWVudHMsIHNvdXJjZSArICcuJyArIG5hbWVfMSkpO1xuXHRcdCAgICAgICAgICAgICAgICB9O1xuXHRcdCAgICAgICAgICAgIH0pKGRlbGVnYXRlKTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgfTtcblx0XHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0ICAgICAgICBfbG9vcF8xKGkpO1xuXHRcdCAgICB9XG5cdFx0fVxuXHRcdGV4cG9ydHMucGF0Y2hQcm90b3R5cGUgPSBwYXRjaFByb3RvdHlwZTtcblx0XHQ7XG5cdFx0ZXhwb3J0cy5pc1dlYldvcmtlciA9ICh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSk7XG5cdFx0ZXhwb3J0cy5pc05vZGUgPSAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XG5cdFx0ZXhwb3J0cy5pc0Jyb3dzZXIgPSAhZXhwb3J0cy5pc05vZGUgJiYgIWV4cG9ydHMuaXNXZWJXb3JrZXIgJiYgISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93WydIVE1MRWxlbWVudCddKTtcblx0XHRmdW5jdGlvbiBwYXRjaFByb3BlcnR5KG9iaiwgcHJvcCkge1xuXHRcdCAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKSB8fCB7XG5cdFx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdFx0ICAgIH07XG5cdFx0ICAgIC8vIEEgcHJvcGVydHkgZGVzY3JpcHRvciBjYW5ub3QgaGF2ZSBnZXR0ZXIvc2V0dGVyIGFuZCBiZSB3cml0YWJsZVxuXHRcdCAgICAvLyBkZWxldGluZyB0aGUgd3JpdGFibGUgYW5kIHZhbHVlIHByb3BlcnRpZXMgYXZvaWRzIHRoaXMgZXJyb3I6XG5cdFx0ICAgIC8vXG5cdFx0ICAgIC8vIFR5cGVFcnJvcjogcHJvcGVydHkgZGVzY3JpcHRvcnMgbXVzdCBub3Qgc3BlY2lmeSBhIHZhbHVlIG9yIGJlIHdyaXRhYmxlIHdoZW4gYVxuXHRcdCAgICAvLyBnZXR0ZXIgb3Igc2V0dGVyIGhhcyBiZWVuIHNwZWNpZmllZFxuXHRcdCAgICBkZWxldGUgZGVzYy53cml0YWJsZTtcblx0XHQgICAgZGVsZXRlIGRlc2MudmFsdWU7XG5cdFx0ICAgIC8vIHN1YnN0cigyKSBjdXogJ29uY2xpY2snIC0+ICdjbGljaycsIGV0Y1xuXHRcdCAgICB2YXIgZXZlbnROYW1lID0gcHJvcC5zdWJzdHIoMik7XG5cdFx0ICAgIHZhciBfcHJvcCA9ICdfJyArIHByb3A7XG5cdFx0ICAgIGRlc2Muc2V0ID0gZnVuY3Rpb24gKGZuKSB7XG5cdFx0ICAgICAgICBpZiAodGhpc1tfcHJvcF0pIHtcblx0XHQgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB0aGlzW19wcm9wXSk7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0ICAgICAgICAgICAgdmFyIHdyYXBGbiA9IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdCAgICAgICAgICAgICAgICB2YXIgcmVzdWx0O1xuXHRcdCAgICAgICAgICAgICAgICByZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdCAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IHVuZGVmaW5lZCAmJiAhcmVzdWx0KVxuXHRcdCAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHQgICAgICAgICAgICB9O1xuXHRcdCAgICAgICAgICAgIHRoaXNbX3Byb3BdID0gd3JhcEZuO1xuXHRcdCAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHdyYXBGbiwgZmFsc2UpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgdGhpc1tfcHJvcF0gPSBudWxsO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9O1xuXHRcdCAgICAvLyBUaGUgZ2V0dGVyIHdvdWxkIHJldHVybiB1bmRlZmluZWQgZm9yIHVuYXNzaWduZWQgcHJvcGVydGllcyBidXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYW4gdW5hc3NpZ25lZCBwcm9wZXJ0eSBpcyBudWxsXG5cdFx0ICAgIGRlc2MuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgcmV0dXJuIHRoaXNbX3Byb3BdIHx8IG51bGw7XG5cdFx0ICAgIH07XG5cdFx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MpO1xuXHRcdH1cblx0XHRleHBvcnRzLnBhdGNoUHJvcGVydHkgPSBwYXRjaFByb3BlcnR5O1xuXHRcdDtcblx0XHRmdW5jdGlvbiBwYXRjaE9uUHJvcGVydGllcyhvYmosIHByb3BlcnRpZXMpIHtcblx0XHQgICAgdmFyIG9uUHJvcGVydGllcyA9IFtdO1xuXHRcdCAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuXHRcdCAgICAgICAgaWYgKHByb3Auc3Vic3RyKDAsIDIpID09ICdvbicpIHtcblx0XHQgICAgICAgICAgICBvblByb3BlcnRpZXMucHVzaChwcm9wKTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgfVxuXHRcdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9uUHJvcGVydGllcy5sZW5ndGg7IGorKykge1xuXHRcdCAgICAgICAgcGF0Y2hQcm9wZXJ0eShvYmosIG9uUHJvcGVydGllc1tqXSk7XG5cdFx0ICAgIH1cblx0XHQgICAgaWYgKHByb3BlcnRpZXMpIHtcblx0XHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuXHRcdCAgICAgICAgICAgIHBhdGNoUHJvcGVydHkob2JqLCAnb24nICsgcHJvcGVydGllc1tpXSk7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgIH1cblx0XHR9XG5cdFx0ZXhwb3J0cy5wYXRjaE9uUHJvcGVydGllcyA9IHBhdGNoT25Qcm9wZXJ0aWVzO1xuXHRcdDtcblx0XHR2YXIgRVZFTlRfVEFTS1MgPSBleHBvcnRzLnpvbmVTeW1ib2woJ2V2ZW50VGFza3MnKTtcblx0XHR2YXIgQUREX0VWRU5UX0xJU1RFTkVSID0gJ2FkZEV2ZW50TGlzdGVuZXInO1xuXHRcdHZhciBSRU1PVkVfRVZFTlRfTElTVEVORVIgPSAncmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG5cdFx0dmFyIFNZTUJPTF9BRERfRVZFTlRfTElTVEVORVIgPSBleHBvcnRzLnpvbmVTeW1ib2woQUREX0VWRU5UX0xJU1RFTkVSKTtcblx0XHR2YXIgU1lNQk9MX1JFTU9WRV9FVkVOVF9MSVNURU5FUiA9IGV4cG9ydHMuem9uZVN5bWJvbChSRU1PVkVfRVZFTlRfTElTVEVORVIpO1xuXHRcdGZ1bmN0aW9uIGZpbmRFeGlzdGluZ1JlZ2lzdGVyZWRUYXNrKHRhcmdldCwgaGFuZGxlciwgbmFtZSwgY2FwdHVyZSwgcmVtb3ZlKSB7XG5cdFx0ICAgIHZhciBldmVudFRhc2tzID0gdGFyZ2V0W0VWRU5UX1RBU0tTXTtcblx0XHQgICAgaWYgKGV2ZW50VGFza3MpIHtcblx0XHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRUYXNrcy5sZW5ndGg7IGkrKykge1xuXHRcdCAgICAgICAgICAgIHZhciBldmVudFRhc2sgPSBldmVudFRhc2tzW2ldO1xuXHRcdCAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRUYXNrLmRhdGE7XG5cdFx0ICAgICAgICAgICAgaWYgKGRhdGEuaGFuZGxlciA9PT0gaGFuZGxlclxuXHRcdCAgICAgICAgICAgICAgICAmJiBkYXRhLnVzZUNhcHR1cmluZyA9PT0gY2FwdHVyZVxuXHRcdCAgICAgICAgICAgICAgICAmJiBkYXRhLmV2ZW50TmFtZSA9PT0gbmFtZSkge1xuXHRcdCAgICAgICAgICAgICAgICBpZiAocmVtb3ZlKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBldmVudFRhc2tzLnNwbGljZShpLCAxKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRUYXNrO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH1cblx0XHQgICAgfVxuXHRcdCAgICByZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gYXR0YWNoUmVnaXN0ZXJlZEV2ZW50KHRhcmdldCwgZXZlbnRUYXNrKSB7XG5cdFx0ICAgIHZhciBldmVudFRhc2tzID0gdGFyZ2V0W0VWRU5UX1RBU0tTXTtcblx0XHQgICAgaWYgKCFldmVudFRhc2tzKSB7XG5cdFx0ICAgICAgICBldmVudFRhc2tzID0gdGFyZ2V0W0VWRU5UX1RBU0tTXSA9IFtdO1xuXHRcdCAgICB9XG5cdFx0ICAgIGV2ZW50VGFza3MucHVzaChldmVudFRhc2spO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBzY2hlZHVsZUV2ZW50TGlzdGVuZXIoZXZlbnRUYXNrKSB7XG5cdFx0ICAgIHZhciBtZXRhID0gZXZlbnRUYXNrLmRhdGE7XG5cdFx0ICAgIGF0dGFjaFJlZ2lzdGVyZWRFdmVudChtZXRhLnRhcmdldCwgZXZlbnRUYXNrKTtcblx0XHQgICAgcmV0dXJuIG1ldGEudGFyZ2V0W1NZTUJPTF9BRERfRVZFTlRfTElTVEVORVJdKG1ldGEuZXZlbnROYW1lLCBldmVudFRhc2suaW52b2tlLCBtZXRhLnVzZUNhcHR1cmluZyk7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGNhbmNlbEV2ZW50TGlzdGVuZXIoZXZlbnRUYXNrKSB7XG5cdFx0ICAgIHZhciBtZXRhID0gZXZlbnRUYXNrLmRhdGE7XG5cdFx0ICAgIGZpbmRFeGlzdGluZ1JlZ2lzdGVyZWRUYXNrKG1ldGEudGFyZ2V0LCBldmVudFRhc2suaW52b2tlLCBtZXRhLmV2ZW50TmFtZSwgbWV0YS51c2VDYXB0dXJpbmcsIHRydWUpO1xuXHRcdCAgICBtZXRhLnRhcmdldFtTWU1CT0xfUkVNT1ZFX0VWRU5UX0xJU1RFTkVSXShtZXRhLmV2ZW50TmFtZSwgZXZlbnRUYXNrLmludm9rZSwgbWV0YS51c2VDYXB0dXJpbmcpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiB6b25lQXdhcmVBZGRFdmVudExpc3RlbmVyKHNlbGYsIGFyZ3MpIHtcblx0XHQgICAgdmFyIGV2ZW50TmFtZSA9IGFyZ3NbMF07XG5cdFx0ICAgIHZhciBoYW5kbGVyID0gYXJnc1sxXTtcblx0XHQgICAgdmFyIHVzZUNhcHR1cmluZyA9IGFyZ3NbMl0gfHwgZmFsc2U7XG5cdFx0ICAgIC8vIC0gSW5zaWRlIGEgV2ViIFdvcmtlciwgYHRoaXNgIGlzIHVuZGVmaW5lZCwgdGhlIGNvbnRleHQgaXMgYGdsb2JhbGBcblx0XHQgICAgLy8gLSBXaGVuIGBhZGRFdmVudExpc3RlbmVyYCBpcyBjYWxsZWQgb24gdGhlIGdsb2JhbCBjb250ZXh0IGluIHN0cmljdCBtb2RlLCBgdGhpc2AgaXMgdW5kZWZpbmVkXG5cdFx0ICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci96b25lLmpzL2lzc3Vlcy8xOTBcblx0XHQgICAgdmFyIHRhcmdldCA9IHNlbGYgfHwgX2dsb2JhbDtcblx0XHQgICAgdmFyIGRlbGVnYXRlID0gbnVsbDtcblx0XHQgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09ICdmdW5jdGlvbicpIHtcblx0XHQgICAgICAgIGRlbGVnYXRlID0gaGFuZGxlcjtcblx0XHQgICAgfVxuXHRcdCAgICBlbHNlIGlmIChoYW5kbGVyICYmIGhhbmRsZXIuaGFuZGxlRXZlbnQpIHtcblx0XHQgICAgICAgIGRlbGVnYXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBoYW5kbGVyLmhhbmRsZUV2ZW50KGV2ZW50KTsgfTtcblx0XHQgICAgfVxuXHRcdCAgICB2YXIgdmFsaWRab25lSGFuZGxlciA9IGZhbHNlO1xuXHRcdCAgICB0cnkge1xuXHRcdCAgICAgICAgLy8gSW4gY3Jvc3Mgc2l0ZSBjb250ZXh0cyAoc3VjaCBhcyBXZWJEcml2ZXIgZnJhbWV3b3JrcyBsaWtlIFNlbGVuaXVtKSxcblx0XHQgICAgICAgIC8vIGFjY2Vzc2luZyB0aGUgaGFuZGxlciBvYmplY3QgaGVyZSB3aWxsIGNhdXNlIGFuIGV4Y2VwdGlvbiB0byBiZSB0aHJvd24gd2hpY2hcblx0XHQgICAgICAgIC8vIHdpbGwgZmFpbCB0ZXN0cyBwcmVtYXR1cmVseS5cblx0XHQgICAgICAgIHZhbGlkWm9uZUhhbmRsZXIgPSBoYW5kbGVyICYmIGhhbmRsZXIudG9TdHJpbmcoKSA9PT0gXCJbb2JqZWN0IEZ1bmN0aW9uV3JhcHBlcl1cIjtcblx0XHQgICAgfVxuXHRcdCAgICBjYXRjaCAoZSkge1xuXHRcdCAgICAgICAgLy8gUmV0dXJuaW5nIG5vdGhpbmcgaGVyZSBpcyBmaW5lLCBiZWNhdXNlIG9iamVjdHMgaW4gYSBjcm9zcy1zaXRlIGNvbnRleHQgYXJlIHVudXNhYmxlXG5cdFx0ICAgICAgICByZXR1cm47XG5cdFx0ICAgIH1cblx0XHQgICAgLy8gSWdub3JlIHNwZWNpYWwgbGlzdGVuZXJzIG9mIElFMTEgJiBFZGdlIGRldiB0b29scywgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3pvbmUuanMvaXNzdWVzLzE1MFxuXHRcdCAgICBpZiAoIWRlbGVnYXRlIHx8IHZhbGlkWm9uZUhhbmRsZXIpIHtcblx0XHQgICAgICAgIHJldHVybiB0YXJnZXRbU1lNQk9MX0FERF9FVkVOVF9MSVNURU5FUl0oZXZlbnROYW1lLCBoYW5kbGVyLCB1c2VDYXB0dXJpbmcpO1xuXHRcdCAgICB9XG5cdFx0ICAgIHZhciBldmVudFRhc2sgPSBmaW5kRXhpc3RpbmdSZWdpc3RlcmVkVGFzayh0YXJnZXQsIGhhbmRsZXIsIGV2ZW50TmFtZSwgdXNlQ2FwdHVyaW5nLCBmYWxzZSk7XG5cdFx0ICAgIGlmIChldmVudFRhc2spIHtcblx0XHQgICAgICAgIC8vIHdlIGFscmVhZHkgcmVnaXN0ZXJlZCwgc28gdGhpcyB3aWxsIGhhdmUgbm9vcC5cblx0XHQgICAgICAgIHJldHVybiB0YXJnZXRbU1lNQk9MX0FERF9FVkVOVF9MSVNURU5FUl0oZXZlbnROYW1lLCBldmVudFRhc2suaW52b2tlLCB1c2VDYXB0dXJpbmcpO1xuXHRcdCAgICB9XG5cdFx0ICAgIHZhciB6b25lID0gWm9uZS5jdXJyZW50O1xuXHRcdCAgICB2YXIgc291cmNlID0gdGFyZ2V0LmNvbnN0cnVjdG9yWyduYW1lJ10gKyAnLmFkZEV2ZW50TGlzdGVuZXI6JyArIGV2ZW50TmFtZTtcblx0XHQgICAgdmFyIGRhdGEgPSB7XG5cdFx0ICAgICAgICB0YXJnZXQ6IHRhcmdldCxcblx0XHQgICAgICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLFxuXHRcdCAgICAgICAgbmFtZTogZXZlbnROYW1lLFxuXHRcdCAgICAgICAgdXNlQ2FwdHVyaW5nOiB1c2VDYXB0dXJpbmcsXG5cdFx0ICAgICAgICBoYW5kbGVyOiBoYW5kbGVyXG5cdFx0ICAgIH07XG5cdFx0ICAgIHpvbmUuc2NoZWR1bGVFdmVudFRhc2soc291cmNlLCBkZWxlZ2F0ZSwgZGF0YSwgc2NoZWR1bGVFdmVudExpc3RlbmVyLCBjYW5jZWxFdmVudExpc3RlbmVyKTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gem9uZUF3YXJlUmVtb3ZlRXZlbnRMaXN0ZW5lcihzZWxmLCBhcmdzKSB7XG5cdFx0ICAgIHZhciBldmVudE5hbWUgPSBhcmdzWzBdO1xuXHRcdCAgICB2YXIgaGFuZGxlciA9IGFyZ3NbMV07XG5cdFx0ICAgIHZhciB1c2VDYXB0dXJpbmcgPSBhcmdzWzJdIHx8IGZhbHNlO1xuXHRcdCAgICAvLyAtIEluc2lkZSBhIFdlYiBXb3JrZXIsIGB0aGlzYCBpcyB1bmRlZmluZWQsIHRoZSBjb250ZXh0IGlzIGBnbG9iYWxgXG5cdFx0ICAgIC8vIC0gV2hlbiBgYWRkRXZlbnRMaXN0ZW5lcmAgaXMgY2FsbGVkIG9uIHRoZSBnbG9iYWwgY29udGV4dCBpbiBzdHJpY3QgbW9kZSwgYHRoaXNgIGlzIHVuZGVmaW5lZFxuXHRcdCAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvem9uZS5qcy9pc3N1ZXMvMTkwXG5cdFx0ICAgIHZhciB0YXJnZXQgPSBzZWxmIHx8IF9nbG9iYWw7XG5cdFx0ICAgIHZhciBldmVudFRhc2sgPSBmaW5kRXhpc3RpbmdSZWdpc3RlcmVkVGFzayh0YXJnZXQsIGhhbmRsZXIsIGV2ZW50TmFtZSwgdXNlQ2FwdHVyaW5nLCB0cnVlKTtcblx0XHQgICAgaWYgKGV2ZW50VGFzaykge1xuXHRcdCAgICAgICAgZXZlbnRUYXNrLnpvbmUuY2FuY2VsVGFzayhldmVudFRhc2spO1xuXHRcdCAgICB9XG5cdFx0ICAgIGVsc2Uge1xuXHRcdCAgICAgICAgdGFyZ2V0W1NZTUJPTF9SRU1PVkVfRVZFTlRfTElTVEVORVJdKGV2ZW50TmFtZSwgaGFuZGxlciwgdXNlQ2FwdHVyaW5nKTtcblx0XHQgICAgfVxuXHRcdH1cblx0XHRmdW5jdGlvbiBwYXRjaEV2ZW50VGFyZ2V0TWV0aG9kcyhvYmopIHtcblx0XHQgICAgaWYgKG9iaiAmJiBvYmouYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdCAgICAgICAgcGF0Y2hNZXRob2Qob2JqLCBBRERfRVZFTlRfTElTVEVORVIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHpvbmVBd2FyZUFkZEV2ZW50TGlzdGVuZXI7IH0pO1xuXHRcdCAgICAgICAgcGF0Y2hNZXRob2Qob2JqLCBSRU1PVkVfRVZFTlRfTElTVEVORVIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHpvbmVBd2FyZVJlbW92ZUV2ZW50TGlzdGVuZXI7IH0pO1xuXHRcdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdFx0ICAgIH1cblx0XHQgICAgZWxzZSB7XG5cdFx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICAgIH1cblx0XHR9XG5cdFx0ZXhwb3J0cy5wYXRjaEV2ZW50VGFyZ2V0TWV0aG9kcyA9IHBhdGNoRXZlbnRUYXJnZXRNZXRob2RzO1xuXHRcdDtcblx0XHR2YXIgb3JpZ2luYWxJbnN0YW5jZUtleSA9IGV4cG9ydHMuem9uZVN5bWJvbCgnb3JpZ2luYWxJbnN0YW5jZScpO1xuXHRcdC8vIHdyYXAgc29tZSBuYXRpdmUgQVBJIG9uIGB3aW5kb3dgXG5cdFx0ZnVuY3Rpb24gcGF0Y2hDbGFzcyhjbGFzc05hbWUpIHtcblx0XHQgICAgdmFyIE9yaWdpbmFsQ2xhc3MgPSBfZ2xvYmFsW2NsYXNzTmFtZV07XG5cdFx0ICAgIGlmICghT3JpZ2luYWxDbGFzcylcblx0XHQgICAgICAgIHJldHVybjtcblx0XHQgICAgX2dsb2JhbFtjbGFzc05hbWVdID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgdmFyIGEgPSBiaW5kQXJndW1lbnRzKGFyZ3VtZW50cywgY2xhc3NOYW1lKTtcblx0XHQgICAgICAgIHN3aXRjaCAoYS5sZW5ndGgpIHtcblx0XHQgICAgICAgICAgICBjYXNlIDA6XG5cdFx0ICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcygpO1xuXHRcdCAgICAgICAgICAgICAgICBicmVhaztcblx0XHQgICAgICAgICAgICBjYXNlIDE6XG5cdFx0ICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcyhhWzBdKTtcblx0XHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdFx0ICAgICAgICAgICAgY2FzZSAyOlxuXHRcdCAgICAgICAgICAgICAgICB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldID0gbmV3IE9yaWdpbmFsQ2xhc3MoYVswXSwgYVsxXSk7XG5cdFx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcdCAgICAgICAgICAgIGNhc2UgMzpcblx0XHQgICAgICAgICAgICAgICAgdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XSA9IG5ldyBPcmlnaW5hbENsYXNzKGFbMF0sIGFbMV0sIGFbMl0pO1xuXHRcdCAgICAgICAgICAgICAgICBicmVhaztcblx0XHQgICAgICAgICAgICBjYXNlIDQ6XG5cdFx0ICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcyhhWzBdLCBhWzFdLCBhWzJdLCBhWzNdKTtcblx0XHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdFx0ICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCdBcmcgbGlzdCB0b28gbG9uZy4nKTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgfTtcblx0XHQgICAgdmFyIGluc3RhbmNlID0gbmV3IE9yaWdpbmFsQ2xhc3MoZnVuY3Rpb24gKCkgeyB9KTtcblx0XHQgICAgdmFyIHByb3A7XG5cdFx0ICAgIGZvciAocHJvcCBpbiBpbnN0YW5jZSkge1xuXHRcdCAgICAgICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTQ0NzIxXG5cdFx0ICAgICAgICBpZiAoY2xhc3NOYW1lID09PSAnWE1MSHR0cFJlcXVlc3QnICYmIHByb3AgPT09ICdyZXNwb25zZUJsb2InKVxuXHRcdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHRcdCAgICAgICAgKGZ1bmN0aW9uIChwcm9wKSB7XG5cdFx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnN0YW5jZVtwcm9wXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdCAgICAgICAgICAgICAgICBfZ2xvYmFsW2NsYXNzTmFtZV0ucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV1bcHJvcF0uYXBwbHkodGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XSwgYXJndW1lbnRzKTtcblx0XHQgICAgICAgICAgICAgICAgfTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZ2xvYmFsW2NsYXNzTmFtZV0ucHJvdG90eXBlLCBwcm9wLCB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChmbikge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XVtwcm9wXSA9IFpvbmUuY3VycmVudC53cmFwKGZuLCBjbGFzc05hbWUgKyAnLicgKyBwcm9wKTtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV1bcHJvcF0gPSBmbjtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHRcdCAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV1bcHJvcF07XG5cdFx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0ocHJvcCkpO1xuXHRcdCAgICB9XG5cdFx0ICAgIGZvciAocHJvcCBpbiBPcmlnaW5hbENsYXNzKSB7XG5cdFx0ICAgICAgICBpZiAocHJvcCAhPT0gJ3Byb3RvdHlwZScgJiYgT3JpZ2luYWxDbGFzcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuXHRcdCAgICAgICAgICAgIF9nbG9iYWxbY2xhc3NOYW1lXVtwcm9wXSA9IE9yaWdpbmFsQ2xhc3NbcHJvcF07XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgIH1cblx0XHR9XG5cdFx0ZXhwb3J0cy5wYXRjaENsYXNzID0gcGF0Y2hDbGFzcztcblx0XHQ7XG5cdFx0ZnVuY3Rpb24gY3JlYXRlTmFtZWRGbihuYW1lLCBkZWxlZ2F0ZSkge1xuXHRcdCAgICB0cnkge1xuXHRcdCAgICAgICAgcmV0dXJuIChGdW5jdGlvbignZicsIFwicmV0dXJuIGZ1bmN0aW9uIFwiICsgbmFtZSArIFwiKCl7cmV0dXJuIGYodGhpcywgYXJndW1lbnRzKX1cIikpKGRlbGVnYXRlKTtcblx0XHQgICAgfVxuXHRcdCAgICBjYXRjaCAoZSkge1xuXHRcdCAgICAgICAgLy8gaWYgd2UgZmFpbCwgd2UgbXVzdCBiZSBDU1AsIGp1c3QgcmV0dXJuIGRlbGVnYXRlLlxuXHRcdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gZGVsZWdhdGUodGhpcywgYXJndW1lbnRzKTtcblx0XHQgICAgICAgIH07XG5cdFx0ICAgIH1cblx0XHR9XG5cdFx0ZXhwb3J0cy5jcmVhdGVOYW1lZEZuID0gY3JlYXRlTmFtZWRGbjtcblx0XHRmdW5jdGlvbiBwYXRjaE1ldGhvZCh0YXJnZXQsIG5hbWUsIHBhdGNoRm4pIHtcblx0XHQgICAgdmFyIHByb3RvID0gdGFyZ2V0O1xuXHRcdCAgICB3aGlsZSAocHJvdG8gJiYgIXByb3RvLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdFx0ICAgICAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG5cdFx0ICAgIH1cblx0XHQgICAgaWYgKCFwcm90byAmJiB0YXJnZXRbbmFtZV0pIHtcblx0XHQgICAgICAgIC8vIHNvbWVob3cgd2UgZGlkIG5vdCBmaW5kIGl0LCBidXQgd2UgY2FuIHNlZSBpdC4gVGhpcyBoYXBwZW5zIG9uIElFIGZvciBXaW5kb3cgcHJvcGVydGllcy5cblx0XHQgICAgICAgIHByb3RvID0gdGFyZ2V0O1xuXHRcdCAgICB9XG5cdFx0ICAgIHZhciBkZWxlZ2F0ZU5hbWUgPSBleHBvcnRzLnpvbmVTeW1ib2wobmFtZSk7XG5cdFx0ICAgIHZhciBkZWxlZ2F0ZTtcblx0XHQgICAgaWYgKHByb3RvICYmICEoZGVsZWdhdGUgPSBwcm90b1tkZWxlZ2F0ZU5hbWVdKSkge1xuXHRcdCAgICAgICAgZGVsZWdhdGUgPSBwcm90b1tkZWxlZ2F0ZU5hbWVdID0gcHJvdG9bbmFtZV07XG5cdFx0ICAgICAgICBwcm90b1tuYW1lXSA9IGNyZWF0ZU5hbWVkRm4obmFtZSwgcGF0Y2hGbihkZWxlZ2F0ZSwgZGVsZWdhdGVOYW1lLCBuYW1lKSk7XG5cdFx0ICAgIH1cblx0XHQgICAgcmV0dXJuIGRlbGVnYXRlO1xuXHRcdH1cblx0XHRleHBvcnRzLnBhdGNoTWV0aG9kID0gcGF0Y2hNZXRob2Q7XG5cdFxuXHRcdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblx0XG5cdC8qKiovIH0sXG5cdC8qIDQgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHRcdFwidXNlIHN0cmljdFwiO1xuXHRcdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XHQvKlxuXHRcdCAqIFRoaXMgaXMgbmVjZXNzYXJ5IGZvciBDaHJvbWUgYW5kIENocm9tZSBtb2JpbGUsIHRvIGVuYWJsZVxuXHRcdCAqIHRoaW5ncyBsaWtlIHJlZGVmaW5pbmcgYGNyZWF0ZWRDYWxsYmFja2Agb24gYW4gZWxlbWVudC5cblx0XHQgKi9cblx0XHR2YXIgX2RlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXHRcdHZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblx0XHR2YXIgX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG5cdFx0dmFyIHVuY29uZmlndXJhYmxlc0tleSA9IHV0aWxzXzEuem9uZVN5bWJvbCgndW5jb25maWd1cmFibGVzJyk7XG5cdFx0ZnVuY3Rpb24gcHJvcGVydHlQYXRjaCgpIHtcblx0XHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgZGVzYykge1xuXHRcdCAgICAgICAgaWYgKGlzVW5jb25maWd1cmFibGUob2JqLCBwcm9wKSkge1xuXHRcdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBhc3NpZ24gdG8gcmVhZCBvbmx5IHByb3BlcnR5IFxcJycgKyBwcm9wICsgJ1xcJyBvZiAnICsgb2JqKTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICAgIHZhciBvcmlnaW5hbENvbmZpZ3VyYWJsZUZsYWcgPSBkZXNjLmNvbmZpZ3VyYWJsZTtcblx0XHQgICAgICAgIGlmIChwcm9wICE9PSAncHJvdG90eXBlJykge1xuXHRcdCAgICAgICAgICAgIGRlc2MgPSByZXdyaXRlRGVzY3JpcHRvcihvYmosIHByb3AsIGRlc2MpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgcmV0dXJuIF90cnlEZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MsIG9yaWdpbmFsQ29uZmlndXJhYmxlRmxhZyk7XG5cdFx0ICAgIH07XG5cdFx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKG9iaiwgcHJvcHMpIHtcblx0XHQgICAgICAgIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG5cdFx0ICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgcHJvcHNbcHJvcF0pO1xuXHRcdCAgICAgICAgfSk7XG5cdFx0ICAgICAgICByZXR1cm4gb2JqO1xuXHRcdCAgICB9O1xuXHRcdCAgICBPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG9iaiwgcHJvdG8pIHtcblx0XHQgICAgICAgIGlmICh0eXBlb2YgcHJvdG8gPT09ICdvYmplY3QnICYmICFPYmplY3QuaXNGcm96ZW4ocHJvdG8pKSB7XG5cdFx0ICAgICAgICAgICAgT2JqZWN0LmtleXMocHJvdG8pLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcblx0XHQgICAgICAgICAgICAgICAgcHJvdG9bcHJvcF0gPSByZXdyaXRlRGVzY3JpcHRvcihvYmosIHByb3AsIHByb3RvW3Byb3BdKTtcblx0XHQgICAgICAgICAgICB9KTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICAgIHJldHVybiBfY3JlYXRlKG9iaiwgcHJvdG8pO1xuXHRcdCAgICB9O1xuXHRcdCAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gKG9iaiwgcHJvcCkge1xuXHRcdCAgICAgICAgdmFyIGRlc2MgPSBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCk7XG5cdFx0ICAgICAgICBpZiAoaXNVbmNvbmZpZ3VyYWJsZShvYmosIHByb3ApKSB7XG5cdFx0ICAgICAgICAgICAgZGVzYy5jb25maWd1cmFibGUgPSBmYWxzZTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICAgIHJldHVybiBkZXNjO1xuXHRcdCAgICB9O1xuXHRcdH1cblx0XHRleHBvcnRzLnByb3BlcnR5UGF0Y2ggPSBwcm9wZXJ0eVBhdGNoO1xuXHRcdDtcblx0XHRmdW5jdGlvbiBfcmVkZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MpIHtcblx0XHQgICAgdmFyIG9yaWdpbmFsQ29uZmlndXJhYmxlRmxhZyA9IGRlc2MuY29uZmlndXJhYmxlO1xuXHRcdCAgICBkZXNjID0gcmV3cml0ZURlc2NyaXB0b3Iob2JqLCBwcm9wLCBkZXNjKTtcblx0XHQgICAgcmV0dXJuIF90cnlEZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MsIG9yaWdpbmFsQ29uZmlndXJhYmxlRmxhZyk7XG5cdFx0fVxuXHRcdGV4cG9ydHMuX3JlZGVmaW5lUHJvcGVydHkgPSBfcmVkZWZpbmVQcm9wZXJ0eTtcblx0XHQ7XG5cdFx0ZnVuY3Rpb24gaXNVbmNvbmZpZ3VyYWJsZShvYmosIHByb3ApIHtcblx0XHQgICAgcmV0dXJuIG9iaiAmJiBvYmpbdW5jb25maWd1cmFibGVzS2V5XSAmJiBvYmpbdW5jb25maWd1cmFibGVzS2V5XVtwcm9wXTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gcmV3cml0ZURlc2NyaXB0b3Iob2JqLCBwcm9wLCBkZXNjKSB7XG5cdFx0ICAgIGRlc2MuY29uZmlndXJhYmxlID0gdHJ1ZTtcblx0XHQgICAgaWYgKCFkZXNjLmNvbmZpZ3VyYWJsZSkge1xuXHRcdCAgICAgICAgaWYgKCFvYmpbdW5jb25maWd1cmFibGVzS2V5XSkge1xuXHRcdCAgICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eShvYmosIHVuY29uZmlndXJhYmxlc0tleSwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHt9IH0pO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgb2JqW3VuY29uZmlndXJhYmxlc0tleV1bcHJvcF0gPSB0cnVlO1xuXHRcdCAgICB9XG5cdFx0ICAgIHJldHVybiBkZXNjO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBfdHJ5RGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjLCBvcmlnaW5hbENvbmZpZ3VyYWJsZUZsYWcpIHtcblx0XHQgICAgdHJ5IHtcblx0XHQgICAgICAgIHJldHVybiBfZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjKTtcblx0XHQgICAgfVxuXHRcdCAgICBjYXRjaCAoZSkge1xuXHRcdCAgICAgICAgaWYgKGRlc2MuY29uZmlndXJhYmxlKSB7XG5cdFx0ICAgICAgICAgICAgLy8gSW4gY2FzZSBvZiBlcnJvcnMsIHdoZW4gdGhlIGNvbmZpZ3VyYWJsZSBmbGFnIHdhcyBsaWtlbHkgc2V0IGJ5IHJld3JpdGVEZXNjcmlwdG9yKCksIGxldCdzIHJldHJ5IHdpdGggdGhlIG9yaWdpbmFsIGZsYWcgdmFsdWVcblx0XHQgICAgICAgICAgICBpZiAodHlwZW9mIG9yaWdpbmFsQ29uZmlndXJhYmxlRmxhZyA9PSAndW5kZWZpbmVkJykge1xuXHRcdCAgICAgICAgICAgICAgICBkZWxldGUgZGVzYy5jb25maWd1cmFibGU7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIGVsc2Uge1xuXHRcdCAgICAgICAgICAgICAgICBkZXNjLmNvbmZpZ3VyYWJsZSA9IG9yaWdpbmFsQ29uZmlndXJhYmxlRmxhZztcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgdGhyb3cgZTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgfVxuXHRcdH1cblx0XG5cdFxuXHQvKioqLyB9LFxuXHQvKiA1ICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0XHRcInVzZSBzdHJpY3RcIjtcblx0XHR2YXIgZGVmaW5lX3Byb3BlcnR5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XHRmdW5jdGlvbiByZWdpc3RlckVsZW1lbnRQYXRjaChfZ2xvYmFsKSB7XG5cdFx0ICAgIGlmICghdXRpbHNfMS5pc0Jyb3dzZXIgfHwgISgncmVnaXN0ZXJFbGVtZW50JyBpbiBfZ2xvYmFsLmRvY3VtZW50KSkge1xuXHRcdCAgICAgICAgcmV0dXJuO1xuXHRcdCAgICB9XG5cdFx0ICAgIHZhciBfcmVnaXN0ZXJFbGVtZW50ID0gZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50O1xuXHRcdCAgICB2YXIgY2FsbGJhY2tzID0gW1xuXHRcdCAgICAgICAgJ2NyZWF0ZWRDYWxsYmFjaycsXG5cdFx0ICAgICAgICAnYXR0YWNoZWRDYWxsYmFjaycsXG5cdFx0ICAgICAgICAnZGV0YWNoZWRDYWxsYmFjaycsXG5cdFx0ICAgICAgICAnYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrJ1xuXHRcdCAgICBdO1xuXHRcdCAgICBkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQgPSBmdW5jdGlvbiAobmFtZSwgb3B0cykge1xuXHRcdCAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5wcm90b3R5cGUpIHtcblx0XHQgICAgICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0XHQgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9ICdEb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ6OicgKyBjYWxsYmFjaztcblx0XHQgICAgICAgICAgICAgICAgaWYgKG9wdHMucHJvdG90eXBlLmhhc093blByb3BlcnR5KGNhbGxiYWNrKSkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9wdHMucHJvdG90eXBlLCBjYWxsYmFjayk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBpZiAoZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLnZhbHVlKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IFpvbmUuY3VycmVudC53cmFwKGRlc2NyaXB0b3IudmFsdWUsIHNvdXJjZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lX3Byb3BlcnR5XzEuX3JlZGVmaW5lUHJvcGVydHkob3B0cy5wcm90b3R5cGUsIGNhbGxiYWNrLCBkZXNjcmlwdG9yKTtcblx0XHQgICAgICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMucHJvdG90eXBlW2NhbGxiYWNrXSA9IFpvbmUuY3VycmVudC53cmFwKG9wdHMucHJvdG90eXBlW2NhbGxiYWNrXSwgc291cmNlKTtcblx0XHQgICAgICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRzLnByb3RvdHlwZVtjYWxsYmFja10pIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIG9wdHMucHJvdG90eXBlW2NhbGxiYWNrXSA9IFpvbmUuY3VycmVudC53cmFwKG9wdHMucHJvdG90eXBlW2NhbGxiYWNrXSwgc291cmNlKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH0pO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgcmV0dXJuIF9yZWdpc3RlckVsZW1lbnQuYXBwbHkoZG9jdW1lbnQsIFtuYW1lLCBvcHRzXSk7XG5cdFx0ICAgIH07XG5cdFx0fVxuXHRcdGV4cG9ydHMucmVnaXN0ZXJFbGVtZW50UGF0Y2ggPSByZWdpc3RlckVsZW1lbnRQYXRjaDtcblx0XG5cdFxuXHQvKioqLyB9LFxuXHQvKiA2ICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0XHRcInVzZSBzdHJpY3RcIjtcblx0XHR2YXIgd2ViU29ja2V0UGF0Y2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XHR2YXIgZXZlbnROYW1lcyA9ICdjb3B5IGN1dCBwYXN0ZSBhYm9ydCBibHVyIGZvY3VzIGNhbnBsYXkgY2FucGxheXRocm91Z2ggY2hhbmdlIGNsaWNrIGNvbnRleHRtZW51IGRibGNsaWNrIGRyYWcgZHJhZ2VuZCBkcmFnZW50ZXIgZHJhZ2xlYXZlIGRyYWdvdmVyIGRyYWdzdGFydCBkcm9wIGR1cmF0aW9uY2hhbmdlIGVtcHRpZWQgZW5kZWQgaW5wdXQgaW52YWxpZCBrZXlkb3duIGtleXByZXNzIGtleXVwIGxvYWQgbG9hZGVkZGF0YSBsb2FkZWRtZXRhZGF0YSBsb2Fkc3RhcnQgbWVzc2FnZSBtb3VzZWRvd24gbW91c2VlbnRlciBtb3VzZWxlYXZlIG1vdXNlbW92ZSBtb3VzZW91dCBtb3VzZW92ZXIgbW91c2V1cCBwYXVzZSBwbGF5IHBsYXlpbmcgcHJvZ3Jlc3MgcmF0ZWNoYW5nZSByZXNldCBzY3JvbGwgc2Vla2VkIHNlZWtpbmcgc2VsZWN0IHNob3cgc3RhbGxlZCBzdWJtaXQgc3VzcGVuZCB0aW1ldXBkYXRlIHZvbHVtZWNoYW5nZSB3YWl0aW5nIG1vemZ1bGxzY3JlZW5jaGFuZ2UgbW96ZnVsbHNjcmVlbmVycm9yIG1venBvaW50ZXJsb2NrY2hhbmdlIG1venBvaW50ZXJsb2NrZXJyb3IgZXJyb3Igd2ViZ2xjb250ZXh0cmVzdG9yZWQgd2ViZ2xjb250ZXh0bG9zdCB3ZWJnbGNvbnRleHRjcmVhdGlvbmVycm9yJy5zcGxpdCgnICcpO1xuXHRcdGZ1bmN0aW9uIHByb3BlcnR5RGVzY3JpcHRvclBhdGNoKF9nbG9iYWwpIHtcblx0XHQgICAgaWYgKHV0aWxzXzEuaXNOb2RlKSB7XG5cdFx0ICAgICAgICByZXR1cm47XG5cdFx0ICAgIH1cblx0XHQgICAgdmFyIHN1cHBvcnRzV2ViU29ja2V0ID0gdHlwZW9mIFdlYlNvY2tldCAhPT0gJ3VuZGVmaW5lZCc7XG5cdFx0ICAgIGlmIChjYW5QYXRjaFZpYVByb3BlcnR5RGVzY3JpcHRvcigpKSB7XG5cdFx0ICAgICAgICAvLyBmb3IgYnJvd3NlcnMgdGhhdCB3ZSBjYW4gcGF0Y2ggdGhlIGRlc2NyaXB0b3I6ICBDaHJvbWUgJiBGaXJlZm94XG5cdFx0ICAgICAgICBpZiAodXRpbHNfMS5pc0Jyb3dzZXIpIHtcblx0XHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgZXZlbnROYW1lcyk7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSwgbnVsbCk7XG5cdFx0ICAgICAgICBpZiAodHlwZW9mIElEQkluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuXHRcdCAgICAgICAgICAgIHV0aWxzXzEucGF0Y2hPblByb3BlcnRpZXMoSURCSW5kZXgucHJvdG90eXBlLCBudWxsKTtcblx0XHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQlJlcXVlc3QucHJvdG90eXBlLCBudWxsKTtcblx0XHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQk9wZW5EQlJlcXVlc3QucHJvdG90eXBlLCBudWxsKTtcblx0XHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQkRhdGFiYXNlLnByb3RvdHlwZSwgbnVsbCk7XG5cdFx0ICAgICAgICAgICAgdXRpbHNfMS5wYXRjaE9uUHJvcGVydGllcyhJREJUcmFuc2FjdGlvbi5wcm90b3R5cGUsIG51bGwpO1xuXHRcdCAgICAgICAgICAgIHV0aWxzXzEucGF0Y2hPblByb3BlcnRpZXMoSURCQ3Vyc29yLnByb3RvdHlwZSwgbnVsbCk7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBpZiAoc3VwcG9ydHNXZWJTb2NrZXQpIHtcblx0XHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKFdlYlNvY2tldC5wcm90b3R5cGUsIG51bGwpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9XG5cdFx0ICAgIGVsc2Uge1xuXHRcdCAgICAgICAgLy8gU2FmYXJpLCBBbmRyb2lkIGJyb3dzZXJzIChKZWxseSBCZWFuKVxuXHRcdCAgICAgICAgcGF0Y2hWaWFDYXB0dXJpbmdBbGxUaGVFdmVudHMoKTtcblx0XHQgICAgICAgIHV0aWxzXzEucGF0Y2hDbGFzcygnWE1MSHR0cFJlcXVlc3QnKTtcblx0XHQgICAgICAgIGlmIChzdXBwb3J0c1dlYlNvY2tldCkge1xuXHRcdCAgICAgICAgICAgIHdlYlNvY2tldFBhdGNoLmFwcGx5KF9nbG9iYWwpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9XG5cdFx0fVxuXHRcdGV4cG9ydHMucHJvcGVydHlEZXNjcmlwdG9yUGF0Y2ggPSBwcm9wZXJ0eURlc2NyaXB0b3JQYXRjaDtcblx0XHRmdW5jdGlvbiBjYW5QYXRjaFZpYVByb3BlcnR5RGVzY3JpcHRvcigpIHtcblx0XHQgICAgaWYgKHV0aWxzXzEuaXNCcm93c2VyICYmICFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ29uY2xpY2snKVxuXHRcdCAgICAgICAgJiYgdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0ICAgICAgICAvLyBXZWJLaXQgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNDM2NFxuXHRcdCAgICAgICAgLy8gSURMIGludGVyZmFjZSBhdHRyaWJ1dGVzIGFyZSBub3QgY29uZmlndXJhYmxlXG5cdFx0ICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsICdvbmNsaWNrJyk7XG5cdFx0ICAgICAgICBpZiAoZGVzYyAmJiAhZGVzYy5jb25maWd1cmFibGUpXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgICB9XG5cdFx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUsICdvbnJlYWR5c3RhdGVjaGFuZ2UnLCB7XG5cdFx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgfSk7XG5cdFx0ICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHQgICAgdmFyIHJlc3VsdCA9ICEhcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZTtcblx0XHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSwgJ29ucmVhZHlzdGF0ZWNoYW5nZScsIHt9KTtcblx0XHQgICAgcmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdFx0O1xuXHRcdHZhciB1bmJvdW5kS2V5ID0gdXRpbHNfMS56b25lU3ltYm9sKCd1bmJvdW5kJyk7XG5cdFx0Ly8gV2hlbmV2ZXIgYW55IGV2ZW50TGlzdGVuZXIgZmlyZXMsIHdlIGNoZWNrIHRoZSBldmVudExpc3RlbmVyIHRhcmdldCBhbmQgYWxsIHBhcmVudHNcblx0XHQvLyBmb3IgYG9ud2hhdGV2ZXJgIHByb3BlcnRpZXMgYW5kIHJlcGxhY2UgdGhlbSB3aXRoIHpvbmUtYm91bmQgZnVuY3Rpb25zXG5cdFx0Ly8gLSBDaHJvbWUgKGZvciBub3cpXG5cdFx0ZnVuY3Rpb24gcGF0Y2hWaWFDYXB0dXJpbmdBbGxUaGVFdmVudHMoKSB7XG5cdFx0ICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24oaSkge1xuXHRcdCAgICAgICAgdmFyIHByb3BlcnR5ID0gZXZlbnROYW1lc1tpXTtcblx0XHQgICAgICAgIHZhciBvbnByb3BlcnR5ID0gJ29uJyArIHByb3BlcnR5O1xuXHRcdCAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihwcm9wZXJ0eSwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0ICAgICAgICAgICAgdmFyIGVsdCA9IGV2ZW50LnRhcmdldCwgYm91bmQsIHNvdXJjZTtcblx0XHQgICAgICAgICAgICBpZiAoZWx0KSB7XG5cdFx0ICAgICAgICAgICAgICAgIHNvdXJjZSA9IGVsdC5jb25zdHJ1Y3RvclsnbmFtZSddICsgJy4nICsgb25wcm9wZXJ0eTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICAgIHNvdXJjZSA9ICd1bmtub3duLicgKyBvbnByb3BlcnR5O1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICB3aGlsZSAoZWx0KSB7XG5cdFx0ICAgICAgICAgICAgICAgIGlmIChlbHRbb25wcm9wZXJ0eV0gJiYgIWVsdFtvbnByb3BlcnR5XVt1bmJvdW5kS2V5XSkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgYm91bmQgPSBab25lLmN1cnJlbnQud3JhcChlbHRbb25wcm9wZXJ0eV0sIHNvdXJjZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBib3VuZFt1bmJvdW5kS2V5XSA9IGVsdFtvbnByb3BlcnR5XTtcblx0XHQgICAgICAgICAgICAgICAgICAgIGVsdFtvbnByb3BlcnR5XSA9IGJvdW5kO1xuXHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIGVsdCA9IGVsdC5wYXJlbnRFbGVtZW50O1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0sIHRydWUpO1xuXHRcdCAgICB9O1xuXHRcdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50TmFtZXMubGVuZ3RoOyBpKyspIHtcblx0XHQgICAgICAgIF9sb29wXzEoaSk7XG5cdFx0ICAgIH1cblx0XHQgICAgO1xuXHRcdH1cblx0XHQ7XG5cdFxuXHRcblx0LyoqKi8gfSxcblx0LyogNyAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblx0XG5cdFx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcdC8vIHdlIGhhdmUgdG8gcGF0Y2ggdGhlIGluc3RhbmNlIHNpbmNlIHRoZSBwcm90byBpcyBub24tY29uZmlndXJhYmxlXG5cdFx0ZnVuY3Rpb24gYXBwbHkoX2dsb2JhbCkge1xuXHRcdCAgICB2YXIgV1MgPSBfZ2xvYmFsLldlYlNvY2tldDtcblx0XHQgICAgLy8gT24gU2FmYXJpIHdpbmRvdy5FdmVudFRhcmdldCBkb2Vzbid0IGV4aXN0IHNvIG5lZWQgdG8gcGF0Y2ggV1MgYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXJcblx0XHQgICAgLy8gT24gb2xkZXIgQ2hyb21lLCBubyBuZWVkIHNpbmNlIEV2ZW50VGFyZ2V0IHdhcyBhbHJlYWR5IHBhdGNoZWRcblx0XHQgICAgaWYgKCFfZ2xvYmFsLkV2ZW50VGFyZ2V0KSB7XG5cdFx0ICAgICAgICB1dGlsc18xLnBhdGNoRXZlbnRUYXJnZXRNZXRob2RzKFdTLnByb3RvdHlwZSk7XG5cdFx0ICAgIH1cblx0XHQgICAgX2dsb2JhbC5XZWJTb2NrZXQgPSBmdW5jdGlvbiAoYSwgYikge1xuXHRcdCAgICAgICAgdmFyIHNvY2tldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gbmV3IFdTKGEsIGIpIDogbmV3IFdTKGEpO1xuXHRcdCAgICAgICAgdmFyIHByb3h5U29ja2V0O1xuXHRcdCAgICAgICAgLy8gU2FmYXJpIDcuMCBoYXMgbm9uLWNvbmZpZ3VyYWJsZSBvd24gJ29ubWVzc2FnZScgYW5kIGZyaWVuZHMgcHJvcGVydGllcyBvbiB0aGUgc29ja2V0IGluc3RhbmNlXG5cdFx0ICAgICAgICB2YXIgb25tZXNzYWdlRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc29ja2V0LCAnb25tZXNzYWdlJyk7XG5cdFx0ICAgICAgICBpZiAob25tZXNzYWdlRGVzYyAmJiBvbm1lc3NhZ2VEZXNjLmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHtcblx0XHQgICAgICAgICAgICBwcm94eVNvY2tldCA9IE9iamVjdC5jcmVhdGUoc29ja2V0KTtcblx0XHQgICAgICAgICAgICBbJ2FkZEV2ZW50TGlzdGVuZXInLCAncmVtb3ZlRXZlbnRMaXN0ZW5lcicsICdzZW5kJywgJ2Nsb3NlJ10uZm9yRWFjaChmdW5jdGlvbiAocHJvcE5hbWUpIHtcblx0XHQgICAgICAgICAgICAgICAgcHJveHlTb2NrZXRbcHJvcE5hbWVdID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvY2tldFtwcm9wTmFtZV0uYXBwbHkoc29ja2V0LCBhcmd1bWVudHMpO1xuXHRcdCAgICAgICAgICAgICAgICB9O1xuXHRcdCAgICAgICAgICAgIH0pO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgLy8gd2UgY2FuIHBhdGNoIHRoZSByZWFsIHNvY2tldFxuXHRcdCAgICAgICAgICAgIHByb3h5U29ja2V0ID0gc29ja2V0O1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgdXRpbHNfMS5wYXRjaE9uUHJvcGVydGllcyhwcm94eVNvY2tldCwgWydjbG9zZScsICdlcnJvcicsICdtZXNzYWdlJywgJ29wZW4nXSk7XG5cdFx0ICAgICAgICByZXR1cm4gcHJveHlTb2NrZXQ7XG5cdFx0ICAgIH07XG5cdFx0ICAgIGZvciAodmFyIHByb3AgaW4gV1MpIHtcblx0XHQgICAgICAgIF9nbG9iYWwuV2ViU29ja2V0W3Byb3BdID0gV1NbcHJvcF07XG5cdFx0ICAgIH1cblx0XHR9XG5cdFx0ZXhwb3J0cy5hcHBseSA9IGFwcGx5O1xuXHRcblx0XG5cdC8qKiovIH0sXG5cdC8qIDggKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHRcdFwidXNlIHN0cmljdFwiO1xuXHRcdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XHRmdW5jdGlvbiBwYXRjaFRpbWVyKHdpbmRvdywgc2V0TmFtZSwgY2FuY2VsTmFtZSwgbmFtZVN1ZmZpeCkge1xuXHRcdCAgICB2YXIgc2V0TmF0aXZlID0gbnVsbDtcblx0XHQgICAgdmFyIGNsZWFyTmF0aXZlID0gbnVsbDtcblx0XHQgICAgc2V0TmFtZSArPSBuYW1lU3VmZml4O1xuXHRcdCAgICBjYW5jZWxOYW1lICs9IG5hbWVTdWZmaXg7XG5cdFx0ICAgIGZ1bmN0aW9uIHNjaGVkdWxlVGFzayh0YXNrKSB7XG5cdFx0ICAgICAgICB2YXIgZGF0YSA9IHRhc2suZGF0YTtcblx0XHQgICAgICAgIGRhdGEuYXJnc1swXSA9IHRhc2suaW52b2tlO1xuXHRcdCAgICAgICAgZGF0YS5oYW5kbGVJZCA9IHNldE5hdGl2ZS5hcHBseSh3aW5kb3csIGRhdGEuYXJncyk7XG5cdFx0ICAgICAgICByZXR1cm4gdGFzaztcblx0XHQgICAgfVxuXHRcdCAgICBmdW5jdGlvbiBjbGVhclRhc2sodGFzaykge1xuXHRcdCAgICAgICAgcmV0dXJuIGNsZWFyTmF0aXZlKHRhc2suZGF0YS5oYW5kbGVJZCk7XG5cdFx0ICAgIH1cblx0XHQgICAgc2V0TmF0aXZlID0gdXRpbHNfMS5wYXRjaE1ldGhvZCh3aW5kb3csIHNldE5hbWUsIGZ1bmN0aW9uIChkZWxlZ2F0ZSkgeyByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcblx0XHQgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdCAgICAgICAgICAgIHZhciB6b25lID0gWm9uZS5jdXJyZW50O1xuXHRcdCAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuXHRcdCAgICAgICAgICAgICAgICBoYW5kbGVJZDogbnVsbCxcblx0XHQgICAgICAgICAgICAgICAgaXNQZXJpb2RpYzogbmFtZVN1ZmZpeCA9PT0gJ0ludGVydmFsJyxcblx0XHQgICAgICAgICAgICAgICAgZGVsYXk6IChuYW1lU3VmZml4ID09PSAnVGltZW91dCcgfHwgbmFtZVN1ZmZpeCA9PT0gJ0ludGVydmFsJykgPyBhcmdzWzFdIHx8IDAgOiBudWxsLFxuXHRcdCAgICAgICAgICAgICAgICBhcmdzOiBhcmdzXG5cdFx0ICAgICAgICAgICAgfTtcblx0XHQgICAgICAgICAgICB2YXIgdGFzayA9IHpvbmUuc2NoZWR1bGVNYWNyb1Rhc2soc2V0TmFtZSwgYXJnc1swXSwgb3B0aW9ucywgc2NoZWR1bGVUYXNrLCBjbGVhclRhc2spO1xuXHRcdCAgICAgICAgICAgIGlmICghdGFzaykge1xuXHRcdCAgICAgICAgICAgICAgICByZXR1cm4gdGFzaztcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgLy8gTm9kZS5qcyBtdXN0IGFkZGl0aW9uYWxseSBzdXBwb3J0IHRoZSByZWYgYW5kIHVucmVmIGZ1bmN0aW9ucy5cblx0XHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gdGFzay5kYXRhLmhhbmRsZUlkO1xuXHRcdCAgICAgICAgICAgIGlmIChoYW5kbGUucmVmICYmIGhhbmRsZS51bnJlZikge1xuXHRcdCAgICAgICAgICAgICAgICB0YXNrLnJlZiA9IGhhbmRsZS5yZWYuYmluZChoYW5kbGUpO1xuXHRcdCAgICAgICAgICAgICAgICB0YXNrLnVucmVmID0gaGFuZGxlLnVucmVmLmJpbmQoaGFuZGxlKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBlbHNlIHtcblx0XHQgICAgICAgICAgICAvLyBjYXVzZSBhbiBlcnJvciBieSBjYWxsaW5nIGl0IGRpcmVjdGx5LlxuXHRcdCAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZS5hcHBseSh3aW5kb3csIGFyZ3MpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9OyB9KTtcblx0XHQgICAgY2xlYXJOYXRpdmUgPSB1dGlsc18xLnBhdGNoTWV0aG9kKHdpbmRvdywgY2FuY2VsTmFtZSwgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuXHRcdCAgICAgICAgdmFyIHRhc2sgPSBhcmdzWzBdO1xuXHRcdCAgICAgICAgaWYgKHRhc2sgJiYgdHlwZW9mIHRhc2sudHlwZSA9PT0gJ3N0cmluZycpIHtcblx0XHQgICAgICAgICAgICBpZiAodGFzay5jYW5jZWxGbiAmJiB0YXNrLmRhdGEuaXNQZXJpb2RpYyB8fCB0YXNrLnJ1bkNvdW50ID09PSAwKSB7XG5cdFx0ICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjYW5jZWwgYWxyZWFkeSBjYW5jZWxlZCBmdW5jdGlvbnNcblx0XHQgICAgICAgICAgICAgICAgdGFzay56b25lLmNhbmNlbFRhc2sodGFzayk7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgfVxuXHRcdCAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgLy8gY2F1c2UgYW4gZXJyb3IgYnkgY2FsbGluZyBpdCBkaXJlY3RseS5cblx0XHQgICAgICAgICAgICBkZWxlZ2F0ZS5hcHBseSh3aW5kb3csIGFyZ3MpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9OyB9KTtcblx0XHR9XG5cdFx0ZXhwb3J0cy5wYXRjaFRpbWVyID0gcGF0Y2hUaW1lcjtcblx0XG5cdFxuXHQvKioqLyB9XG5cdC8qKioqKiovIF0pO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg1NjUpKSlcblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogYnVuZGxlLmRpc3QuanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGViN2EyNTMzN2IxNWIzZDVlY2Q4XG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL09ic2VydmFibGUnKTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4vU3Vic2NyaXB0aW9uJyk7XG52YXIgU3ViamVjdFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi9TdWJqZWN0U3Vic2NyaXB0aW9uJyk7XG52YXIgcnhTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL3N5bWJvbC9yeFN1YnNjcmliZXInKTtcbnZhciB0aHJvd0Vycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvdGhyb3dFcnJvcicpO1xudmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InKTtcbi8qKlxuICogQGNsYXNzIFN1YmplY3Q8VD5cbiAqL1xudmFyIFN1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0Vycm9yZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgU3ViamVjdC5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikge1xuICAgICAgICB2YXIgc3ViamVjdCA9IG5ldyBTdWJqZWN0KHRoaXMuZGVzdGluYXRpb24gfHwgdGhpcywgdGhpcyk7XG4gICAgICAgIHN1YmplY3Qub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHJldHVybiBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24ucHJvdG90eXBlLmFkZC5jYWxsKHRoaXMsIHN1YnNjcmlwdGlvbik7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcywgc3Vic2NyaXB0aW9uKTtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhhc0Vycm9yZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlci5lcnJvcih0aGlzLmVycm9yVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50aHJvd0lmVW5zdWJzY3JpYmVkKCk7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YmplY3RTdWJzY3JpcHRpb25fMS5TdWJqZWN0U3Vic2NyaXB0aW9uKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZlVuc3Vic2NyaWJlZCgpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbmV4dCh2YWx1ZSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3JlZCkge1xuICAgICAgICAgICAgdGhpcy5fZXJyb3IodGhpcy5lcnJvclZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5fY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZlVuc3Vic2NyaWJlZCgpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaGFzRXJyb3JlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgaWYgKHRoaXMuZGlzcGF0Y2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZlVuc3Vic2NyaWJlZCgpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuZGlzcGF0Y2hpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuYXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBTdWJqZWN0T2JzZXJ2YWJsZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2ZpbmFsTmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl9maW5hbE5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycy5zbGljZSgwKTtcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBvYnNlcnZlcnNbaW5kZXhdLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9maW5hbEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl9maW5hbEVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICAvLyBvcHRpbWl6YXRpb24gdG8gYmxvY2sgb3VyIFN1YmplY3RTdWJzY3JpcHRpb25zIGZyb21cbiAgICAgICAgLy8gc3BsaWNpbmcgdGhlbXNlbHZlcyBvdXQgb2YgdGhlIG9ic2VydmVycyBsaXN0IG9uZSBieSBvbmUuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIGlmIChvYnNlcnZlcnMpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlcnNbaW5kZXhdLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9maW5hbENvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl9maW5hbENvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICAvLyBvcHRpbWl6YXRpb24gdG8gYmxvY2sgb3VyIFN1YmplY3RTdWJzY3JpcHRpb25zIGZyb21cbiAgICAgICAgLy8gc3BsaWNpbmcgdGhlbXNlbHZlcyBvdXQgb2YgdGhlIG9ic2VydmVycyBsaXN0IG9uZSBieSBvbmUuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIGlmIChvYnNlcnZlcnMpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlcnNbaW5kZXhdLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS50aHJvd0lmVW5zdWJzY3JpYmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcl8xLnRocm93RXJyb3IobmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlW3J4U3Vic2NyaWJlcl8xLiQkcnhTdWJzY3JpYmVyXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcih0aGlzKTtcbiAgICB9O1xuICAgIFN1YmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJqZWN0KGRlc3RpbmF0aW9uLCBzb3VyY2UpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YmplY3Q7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLlN1YmplY3QgPSBTdWJqZWN0O1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTdWJqZWN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1YmplY3RPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIHJldHVybiBTdWJqZWN0T2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YmplY3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9TdWJqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuL3V0aWwvcm9vdCcpO1xudmFyIG9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vc3ltYm9sL29ic2VydmFibGUnKTtcbnZhciB0b1N1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4vdXRpbC90b1N1YnNjcmliZXInKTtcbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhbnkgc2V0IG9mIHZhbHVlcyBvdmVyIGFueSBhbW91bnQgb2YgdGltZS4gVGhpcyB0aGUgbW9zdCBiYXNpYyBidWlsZGluZyBibG9ja1xuICogb2YgUnhKUy5cbiAqXG4gKiBAY2xhc3MgT2JzZXJ2YWJsZTxUPlxuICovXG52YXIgT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3Vic2NyaWJlIHRoZSBmdW5jdGlvbiB0aGF0IGlzICBjYWxsZWQgd2hlbiB0aGUgT2JzZXJ2YWJsZSBpc1xuICAgICAqIGluaXRpYWxseSBzdWJzY3JpYmVkIHRvLiBUaGlzIGZ1bmN0aW9uIGlzIGdpdmVuIGEgU3Vic2NyaWJlciwgdG8gd2hpY2ggbmV3IHZhbHVlc1xuICAgICAqIGNhbiBiZSBgbmV4dGBlZCwgb3IgYW4gYGVycm9yYCBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByYWlzZSBhbiBlcnJvciwgb3JcbiAgICAgKiBgY29tcGxldGVgIGNhbiBiZSBjYWxsZWQgdG8gbm90aWZ5IG9mIGEgc3VjY2Vzc2Z1bCBjb21wbGV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMuX2lzU2NhbGFyID0gZmFsc2U7XG4gICAgICAgIGlmIChzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE9ic2VydmFibGUsIHdpdGggdGhpcyBPYnNlcnZhYmxlIGFzIHRoZSBzb3VyY2UsIGFuZCB0aGUgcGFzc2VkXG4gICAgICogb3BlcmF0b3IgZGVmaW5lZCBhcyB0aGUgbmV3IG9ic2VydmFibGUncyBvcGVyYXRvci5cbiAgICAgKiBAbWV0aG9kIGxpZnRcbiAgICAgKiBAcGFyYW0ge09wZXJhdG9yfSBvcGVyYXRvciB0aGUgb3BlcmF0b3IgZGVmaW5pbmcgdGhlIG9wZXJhdGlvbiB0byB0YWtlIG9uIHRoZSBvYnNlcnZhYmxlXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYSBuZXcgb2JzZXJ2YWJsZSB3aXRoIHRoZSBPcGVyYXRvciBhcHBsaWVkXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIG9ic2VydmFibGUuc291cmNlID0gdGhpcztcbiAgICAgICAgb2JzZXJ2YWJsZS5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBoYW5kbGVycyBmb3IgaGFuZGxpbmcgZW1pdHRlZCB2YWx1ZXMsIGVycm9yIGFuZCBjb21wbGV0aW9ucyBmcm9tIHRoZSBvYnNlcnZhYmxlLCBhbmRcbiAgICAgKiAgZXhlY3V0ZXMgdGhlIG9ic2VydmFibGUncyBzdWJzY3JpYmVyIGZ1bmN0aW9uLCB3aGljaCB3aWxsIHRha2UgYWN0aW9uIHRvIHNldCB1cCB0aGUgdW5kZXJseWluZyBkYXRhIHN0cmVhbVxuICAgICAqIEBtZXRob2Qgc3Vic2NyaWJlXG4gICAgICogQHBhcmFtIHtQYXJ0aWFsT2JzZXJ2ZXJ8RnVuY3Rpb259IG9ic2VydmVyT3JOZXh0IChvcHRpb25hbCkgZWl0aGVyIGFuIG9ic2VydmVyIGRlZmluaW5nIGFsbCBmdW5jdGlvbnMgdG8gYmUgY2FsbGVkLFxuICAgICAqICBvciB0aGUgZmlyc3Qgb2YgdGhyZWUgcG9zc2libGUgaGFuZGxlcnMsIHdoaWNoIGlzIHRoZSBoYW5kbGVyIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWQgZnJvbSB0aGUgb2JzZXJ2YWJsZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcnJvciAob3B0aW9uYWwpIGEgaGFuZGxlciBmb3IgYSB0ZXJtaW5hbCBldmVudCByZXN1bHRpbmcgZnJvbSBhbiBlcnJvci4gSWYgbm8gZXJyb3IgaGFuZGxlciBpcyBwcm92aWRlZCxcbiAgICAgKiAgdGhlIGVycm9yIHdpbGwgYmUgdGhyb3duIGFzIHVuaGFuZGxlZFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBsZXRlIChvcHRpb25hbCkgYSBoYW5kbGVyIGZvciBhIHRlcm1pbmFsIGV2ZW50IHJlc3VsdGluZyBmcm9tIHN1Y2Nlc3NmdWwgY29tcGxldGlvbi5cbiAgICAgKiBAcmV0dXJuIHtJU3Vic2NyaXB0aW9ufSBhIHN1YnNjcmlwdGlvbiByZWZlcmVuY2UgdG8gdGhlIHJlZ2lzdGVyZWQgaGFuZGxlcnNcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgb3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yO1xuICAgICAgICB2YXIgc2luayA9IHRvU3Vic2NyaWJlcl8xLnRvU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgc2luay5hZGQob3BlcmF0b3IgPyBvcGVyYXRvci5jYWxsKHNpbmssIHRoaXMpIDogdGhpcy5fc3Vic2NyaWJlKHNpbmspKTtcbiAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2luaztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZm9yRWFjaFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHQgYSBoYW5kbGVyIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIG9ic2VydmFibGVcbiAgICAgKiBAcGFyYW0ge1Byb21pc2VDb25zdHJ1Y3Rvcn0gW1Byb21pc2VDdG9yXSBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHVzZWQgdG8gaW5zdGFudGlhdGUgdGhlIFByb21pc2VcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCBlaXRoZXIgcmVzb2x2ZXMgb24gb2JzZXJ2YWJsZSBjb21wbGV0aW9uIG9yXG4gICAgICogIHJlamVjdHMgd2l0aCB0aGUgaGFuZGxlZCBlcnJvclxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAobmV4dCwgUHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCFQcm9taXNlQ3Rvcikge1xuICAgICAgICAgICAgaWYgKHJvb3RfMS5yb290LlJ4ICYmIHJvb3RfMS5yb290LlJ4LmNvbmZpZyAmJiByb290XzEucm9vdC5SeC5jb25maWcuUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIFByb21pc2VDdG9yID0gcm9vdF8xLnJvb3QuUnguY29uZmlnLlByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyb290XzEucm9vdC5Qcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgUHJvbWlzZUN0b3IgPSByb290XzEucm9vdC5Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghUHJvbWlzZUN0b3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gUHJvbWlzZSBpbXBsIGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBzdWJzY3JpcHRpb24sIHRoZW4gd2UgY2FuIHN1cm1pc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG5leHQgaGFuZGxpbmcgaXMgYXN5bmNocm9ub3VzLiBBbnkgZXJyb3JzIHRocm93blxuICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIGJlIHJlamVjdGVkIGV4cGxpY2l0bHkgYW5kIHVuc3Vic2NyaWJlIG11c3QgYmVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIG1hbnVhbGx5XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBOTyBzdWJzY3JpcHRpb24sIHRoZW4gd2UncmUgZ2V0dGluZyBhIG5leHRlZFxuICAgICAgICAgICAgICAgICAgICAvLyB2YWx1ZSBzeW5jaHJvbm91c2x5IGR1cmluZyBzdWJzY3JpcHRpb24uIFdlIGNhbiBqdXN0IGNhbGwgaXQuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGl0IGVycm9ycywgT2JzZXJ2YWJsZSdzIGBzdWJzY3JpYmVgIGltcGxlIHdpbGwgZW5zdXJlIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyB1bnN1YnNjcmlwdGlvbiBsb2dpYyBpcyBjYWxsZWQsIHRoZW4gc3luY2hyb25vdXNseSByZXRocm93IHRoZSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWZ0ZXIgdGhhdCwgUHJvbWlzZSB3aWxsIHRyYXAgdGhlIGVycm9yIGFuZCBzZW5kIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvd24gdGhlIHJlamVjdGlvbiBwYXRoLlxuICAgICAgICAgICAgICAgICAgICBuZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QsIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQW4gaW50ZXJvcCBwb2ludCBkZWZpbmVkIGJ5IHRoZSBlczctb2JzZXJ2YWJsZSBzcGVjIGh0dHBzOi8vZ2l0aHViLmNvbS96ZW5wYXJzaW5nL2VzLW9ic2VydmFibGVcbiAgICAgKiBAbWV0aG9kIFN5bWJvbC5vYnNlcnZhYmxlXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gdGhpcyBpbnN0YW5jZSBvZiB0aGUgb2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlW29ic2VydmFibGVfMS4kJG9ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8vIEhBQ0s6IFNpbmNlIFR5cGVTY3JpcHQgaW5oZXJpdHMgc3RhdGljIHByb3BlcnRpZXMgdG9vLCB3ZSBoYXZlIHRvXG4gICAgLy8gZmlnaHQgYWdhaW5zdCBUeXBlU2NyaXB0IGhlcmUgc28gU3ViamVjdCBjYW4gaGF2ZSBhIGRpZmZlcmVudCBzdGF0aWMgY3JlYXRlIHNpZ25hdHVyZVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgY29sZCBPYnNlcnZhYmxlIGJ5IGNhbGxpbmcgdGhlIE9ic2VydmFibGUgY29uc3RydWN0b3JcbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqIEBtZXRob2QgY3JlYXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3Vic2NyaWJlPyB0aGUgc3Vic2NyaWJlciBmdW5jdGlvbiB0byBiZSBwYXNzZWQgdG8gdGhlIE9ic2VydmFibGUgY29uc3RydWN0b3JcbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhIG5ldyBjb2xkIG9ic2VydmFibGVcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHN1YnNjcmliZSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKSk7XG5leHBvcnRzLk9ic2VydmFibGUgPSBPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL09ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG9iamVjdFR5cGVzID0ge1xuICAgICdib29sZWFuJzogZmFsc2UsXG4gICAgJ2Z1bmN0aW9uJzogdHJ1ZSxcbiAgICAnb2JqZWN0JzogdHJ1ZSxcbiAgICAnbnVtYmVyJzogZmFsc2UsXG4gICAgJ3N0cmluZyc6IGZhbHNlLFxuICAgICd1bmRlZmluZWQnOiBmYWxzZVxufTtcbmV4cG9ydHMucm9vdCA9IChvYmplY3RUeXBlc1t0eXBlb2Ygc2VsZl0gJiYgc2VsZikgfHwgKG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyk7XG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cbnZhciBmcmVlRXhwb3J0cyA9IG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG52YXIgZnJlZU1vZHVsZSA9IG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcbnZhciBmcmVlR2xvYmFsID0gb2JqZWN0VHlwZXNbdHlwZW9mIGdsb2JhbF0gJiYgZ2xvYmFsO1xuaWYgKGZyZWVHbG9iYWwgJiYgKGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsKSkge1xuICAgIGV4cG9ydHMucm9vdCA9IGZyZWVHbG9iYWw7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb290LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9yb290LmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuLi91dGlsL3Jvb3QnKTtcbnZhciBTeW1ib2wgPSByb290XzEucm9vdC5TeW1ib2w7XG5pZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmIChTeW1ib2wub2JzZXJ2YWJsZSkge1xuICAgICAgICBleHBvcnRzLiQkb2JzZXJ2YWJsZSA9IFN5bWJvbC5vYnNlcnZhYmxlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBleHBvcnRzLiQkb2JzZXJ2YWJsZSA9IFN5bWJvbC5mb3IoJ29ic2VydmFibGUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4cG9ydHMuJCRvYnNlcnZhYmxlID0gU3ltYm9sKCdvYnNlcnZhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgU3ltYm9sLm9ic2VydmFibGUgPSBleHBvcnRzLiQkb2JzZXJ2YWJsZTtcbiAgICB9XG59XG5lbHNlIHtcbiAgICBleHBvcnRzLiQkb2JzZXJ2YWJsZSA9ICdAQG9ic2VydmFibGUnO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3N5bWJvbC9vYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgcnhTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9zeW1ib2wvcnhTdWJzY3JpYmVyJyk7XG5mdW5jdGlvbiB0b1N1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgIGlmIChuZXh0T3JPYnNlcnZlciAmJiB0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciBpbnN0YW5jZW9mIFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlcl8xLiQkcnhTdWJzY3JpYmVyXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlcl8xLiQkcnhTdWJzY3JpYmVyXSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG59XG5leHBvcnRzLnRvU3Vic2NyaWJlciA9IHRvU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvU3Vic2NyaWJlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvdG9TdWJzY3JpYmVyLmpzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIGlzRnVuY3Rpb25fMSA9IHJlcXVpcmUoJy4vdXRpbC9pc0Z1bmN0aW9uJyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuL1N1YnNjcmlwdGlvbicpO1xudmFyIHJ4U3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi9zeW1ib2wvcnhTdWJzY3JpYmVyJyk7XG52YXIgT2JzZXJ2ZXJfMSA9IHJlcXVpcmUoJy4vT2JzZXJ2ZXInKTtcbi8qKlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIE9ic2VydmVyfSBpbnRlcmZhY2UgYW5kIGV4dGVuZHMgdGhlXG4gKiB7QGxpbmsgU3Vic2NyaXB0aW9ufSBjbGFzcy4gV2hpbGUgdGhlIHtAbGluayBPYnNlcnZlcn0gaXMgdGhlIHB1YmxpYyBBUEkgZm9yXG4gKiBjb25zdW1pbmcgdGhlIHZhbHVlcyBvZiBhbiB7QGxpbmsgT2JzZXJ2YWJsZX0sIGFsbCBPYnNlcnZlcnMgZ2V0IGNvbnZlcnRlZCB0b1xuICogYSBTdWJzY3JpYmVyLCBpbiBvcmRlciB0byBwcm92aWRlIFN1YnNjcmlwdGlvbi1saWtlIGNhcGFiaWxpdGllcyBzdWNoIGFzXG4gKiBgdW5zdWJzY3JpYmVgLiBTdWJzY3JpYmVyIGlzIGEgY29tbW9uIHR5cGUgaW4gUnhKUywgYW5kIGNydWNpYWwgZm9yXG4gKiBpbXBsZW1lbnRpbmcgb3BlcmF0b3JzLCBidXQgaXQgaXMgcmFyZWx5IHVzZWQgYXMgYSBwdWJsaWMgQVBJLlxuICpcbiAqIEBjbGFzcyBTdWJzY3JpYmVyPFQ+XG4gKi9cbnZhciBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gW2Rlc3RpbmF0aW9uT3JOZXh0XSBBIHBhcnRpYWxseVxuICAgICAqIGRlZmluZWQgT2JzZXJ2ZXIgb3IgYSBgbmV4dGAgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihlOiA/YW55KTogdm9pZH0gW2Vycm9yXSBUaGUgYGVycm9yYCBjYWxsYmFjayBvZiBhblxuICAgICAqIE9ic2VydmVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gW2NvbXBsZXRlXSBUaGUgYGNvbXBsZXRlYCBjYWxsYmFjayBvZiBhblxuICAgICAqIE9ic2VydmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZXIoZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zeW5jRXJyb3JWYWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3luY0Vycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBPYnNlcnZlcl8xLmVtcHR5O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICghZGVzdGluYXRpb25Pck5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IE9ic2VydmVyXzEuZW1wdHk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlc3RpbmF0aW9uT3JOZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdGluYXRpb25Pck5leHQgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb25Pck5leHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmFkZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIodGhpcywgZGVzdGluYXRpb25Pck5leHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIodGhpcywgZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdGF0aWMgZmFjdG9yeSBmb3IgYSBTdWJzY3JpYmVyLCBnaXZlbiBhIChwb3RlbnRpYWxseSBwYXJ0aWFsKSBkZWZpbml0aW9uXG4gICAgICogb2YgYW4gT2JzZXJ2ZXIuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih4OiA/VCk6IHZvaWR9IFtuZXh0XSBUaGUgYG5leHRgIGNhbGxiYWNrIG9mIGFuIE9ic2VydmVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZTogP2FueSk6IHZvaWR9IFtlcnJvcl0gVGhlIGBlcnJvcmAgY2FsbGJhY2sgb2YgYW5cbiAgICAgKiBPYnNlcnZlci5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gVGhlIGBjb21wbGV0ZWAgY2FsbGJhY2sgb2YgYW5cbiAgICAgKiBPYnNlcnZlci5cbiAgICAgKiBAcmV0dXJuIHtTdWJzY3JpYmVyPFQ+fSBBIFN1YnNjcmliZXIgd3JhcHBpbmcgdGhlIChwYXJ0aWFsbHkgZGVmaW5lZClcbiAgICAgKiBPYnNlcnZlciByZXByZXNlbnRlZCBieSB0aGUgZ2l2ZW4gYXJndW1lbnRzLlxuICAgICAqL1xuICAgIFN1YnNjcmliZXIuY3JlYXRlID0gZnVuY3Rpb24gKG5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIHN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBPYnNlcnZlcn0gY2FsbGJhY2sgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zIG9mIHR5cGUgYG5leHRgIGZyb21cbiAgICAgKiB0aGUgT2JzZXJ2YWJsZSwgd2l0aCBhIHZhbHVlLiBUaGUgT2JzZXJ2YWJsZSBtYXkgY2FsbCB0aGlzIG1ldGhvZCAwIG9yIG1vcmVcbiAgICAgKiB0aW1lcy5cbiAgICAgKiBAcGFyYW0ge1R9IFt2YWx1ZV0gVGhlIGBuZXh0YCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBvZiB0eXBlIGBlcnJvcmAgZnJvbVxuICAgICAqIHRoZSBPYnNlcnZhYmxlLCB3aXRoIGFuIGF0dGFjaGVkIHtAbGluayBFcnJvcn0uIE5vdGlmaWVzIHRoZSBPYnNlcnZlciB0aGF0XG4gICAgICogdGhlIE9ic2VydmFibGUgaGFzIGV4cGVyaWVuY2VkIGFuIGVycm9yIGNvbmRpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2FueX0gW2Vycl0gVGhlIGBlcnJvcmAgZXhjZXB0aW9uLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrIHRvIHJlY2VpdmUgYSB2YWx1ZWxlc3Mgbm90aWZpY2F0aW9uIG9mIHR5cGVcbiAgICAgKiBgY29tcGxldGVgIGZyb20gdGhlIE9ic2VydmFibGUuIE5vdGlmaWVzIHRoZSBPYnNlcnZlciB0aGF0IHRoZSBPYnNlcnZhYmxlXG4gICAgICogaGFzIGZpbmlzaGVkIHNlbmRpbmcgcHVzaC1iYXNlZCBub3RpZmljYXRpb25zLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGVbcnhTdWJzY3JpYmVyXzEuJCRyeFN1YnNjcmliZXJdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpYmVyO1xufShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcbmV4cG9ydHMuU3Vic2NyaWJlciA9IFN1YnNjcmliZXI7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNhZmVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2FmZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIoX3BhcmVudCwgb2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgaWYgKGlzRnVuY3Rpb25fMS5pc0Z1bmN0aW9uKG9ic2VydmVyT3JOZXh0KSkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gb2JzZXJ2ZXJPck5leHQ7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQubmV4dDtcbiAgICAgICAgICAgIGVycm9yID0gb2JzZXJ2ZXJPck5leHQuZXJyb3I7XG4gICAgICAgICAgICBjb21wbGV0ZSA9IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb25fMS5pc0Z1bmN0aW9uKGNvbnRleHQudW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoY29udGV4dC51bnN1YnNjcmliZS5iaW5kKGNvbnRleHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQudW5zdWJzY3JpYmUgPSB0aGlzLnVuc3Vic2NyaWJlLmJpbmQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX25leHQgPSBuZXh0O1xuICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLl9jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICAgIH1cbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkICYmIHRoaXMuX25leHQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50ID0gdGhpcy5fcGFyZW50O1xuICAgICAgICAgICAgaWYgKCFfcGFyZW50LnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHRoaXMuX25leHQsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnQsIHRoaXMuX25leHQsIHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudCA9IHRoaXMuX3BhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghX3BhcmVudC5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnQsIHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnQuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF9wYXJlbnQuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgX3BhcmVudC5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudCA9IHRoaXMuX3BhcmVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIGlmICghX3BhcmVudC5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fY29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50LCB0aGlzLl9jb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yVW5zdWIgPSBmdW5jdGlvbiAoZm4sIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yU2V0RXJyb3IgPSBmdW5jdGlvbiAocGFyZW50LCBmbiwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9wYXJlbnQgPSB0aGlzLl9wYXJlbnQ7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICBfcGFyZW50LnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmliZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9TdWJzY3JpYmVyLmpzXG4gKiogbW9kdWxlIGlkID0gOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0Z1bmN0aW9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9pc0Z1bmN0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgaXNBcnJheV8xID0gcmVxdWlyZSgnLi91dGlsL2lzQXJyYXknKTtcbnZhciBpc09iamVjdF8xID0gcmVxdWlyZSgnLi91dGlsL2lzT2JqZWN0Jyk7XG52YXIgaXNGdW5jdGlvbl8xID0gcmVxdWlyZSgnLi91dGlsL2lzRnVuY3Rpb24nKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4vdXRpbC9lcnJvck9iamVjdCcpO1xudmFyIFVuc3Vic2NyaXB0aW9uRXJyb3JfMSA9IHJlcXVpcmUoJy4vdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yJyk7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBkaXNwb3NhYmxlIHJlc291cmNlLCBzdWNoIGFzIHRoZSBleGVjdXRpb24gb2YgYW4gT2JzZXJ2YWJsZS4gQVxuICogU3Vic2NyaXB0aW9uIGhhcyBvbmUgaW1wb3J0YW50IG1ldGhvZCwgYHVuc3Vic2NyaWJlYCwgdGhhdCB0YWtlcyBubyBhcmd1bWVudFxuICogYW5kIGp1c3QgZGlzcG9zZXMgdGhlIHJlc291cmNlIGhlbGQgYnkgdGhlIHN1YnNjcmlwdGlvbi5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHN1YnNjcmlwdGlvbnMgbWF5IGJlIGdyb3VwZWQgdG9nZXRoZXIgdGhyb3VnaCB0aGUgYGFkZCgpYFxuICogbWV0aG9kLCB3aGljaCB3aWxsIGF0dGFjaCBhIGNoaWxkIFN1YnNjcmlwdGlvbiB0byB0aGUgY3VycmVudCBTdWJzY3JpcHRpb24uXG4gKiBXaGVuIGEgU3Vic2NyaXB0aW9uIGlzIHVuc3Vic2NyaWJlZCwgYWxsIGl0cyBjaGlsZHJlbiAoYW5kIGl0cyBncmFuZGNoaWxkcmVuKVxuICogd2lsbCBiZSB1bnN1YnNjcmliZWQgYXMgd2VsbC5cbiAqXG4gKiBAY2xhc3MgU3Vic2NyaXB0aW9uXG4gKi9cbnZhciBTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gW3Vuc3Vic2NyaWJlXSBBIGZ1bmN0aW9uIGRlc2NyaWJpbmcgaG93IHRvXG4gICAgICogcGVyZm9ybSB0aGUgZGlzcG9zYWwgb2YgcmVzb3VyY2VzIHdoZW4gdGhlIGB1bnN1YnNjcmliZWAgbWV0aG9kIGlzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoaXMgU3Vic2NyaXB0aW9uIGhhcyBhbHJlYWR5IGJlZW4gdW5zdWJzY3JpYmVkLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IHVuc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIHRoZSByZXNvdXJjZXMgaGVsZCBieSB0aGUgc3Vic2NyaXB0aW9uLiBNYXksIGZvciBpbnN0YW5jZSwgY2FuY2VsXG4gICAgICogYW4gb25nb2luZyBPYnNlcnZhYmxlIGV4ZWN1dGlvbiBvciBjYW5jZWwgYW55IG90aGVyIHR5cGUgb2Ygd29yayB0aGF0XG4gICAgICogc3RhcnRlZCB3aGVuIHRoZSBTdWJzY3JpcHRpb24gd2FzIGNyZWF0ZWQuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaGFzRXJyb3JzID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvcnM7XG4gICAgICAgIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF91bnN1YnNjcmliZSA9IF9hLl91bnN1YnNjcmliZSwgX3N1YnNjcmlwdGlvbnMgPSBfYS5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihfdW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICB2YXIgdHJpYWwgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKF91bnN1YnNjcmliZSkuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0cmlhbCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgKGVycm9ycyA9IGVycm9ycyB8fCBbXSkucHVzaChlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5XzEuaXNBcnJheShfc3Vic2NyaXB0aW9ucykpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgdmFyIGxlbiA9IF9zdWJzY3JpcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YiA9IF9zdWJzY3JpcHRpb25zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3RfMS5pc09iamVjdChzdWIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmlhbCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc3ViLnVuc3Vic2NyaWJlKS5jYWxsKHN1Yik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmlhbCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcl8xLlVuc3Vic2NyaXB0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KGVyci5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXJyb3JzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdWJzY3JpcHRpb25FcnJvcl8xLlVuc3Vic2NyaXB0aW9uRXJyb3IoZXJyb3JzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHRlYXIgZG93biB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZSB1bnN1YnNjcmliZSgpIG9mIHRoaXNcbiAgICAgKiBTdWJzY3JpcHRpb24uXG4gICAgICpcbiAgICAgKiBJZiB0aGUgdGVhciBkb3duIGJlaW5nIGFkZGVkIGlzIGEgc3Vic2NyaXB0aW9uIHRoYXQgaXMgYWxyZWFkeVxuICAgICAqIHVuc3Vic2NyaWJlZCwgaXMgdGhlIHNhbWUgcmVmZXJlbmNlIGBhZGRgIGlzIGJlaW5nIGNhbGxlZCBvbiwgb3IgaXNcbiAgICAgKiBgU3Vic2NyaXB0aW9uLkVNUFRZYCwgaXQgd2lsbCBub3QgYmUgYWRkZWQuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIHN1YnNjcmlwdGlvbiBpcyBhbHJlYWR5IGluIGFuIGBpc1Vuc3Vic2NyaWJlZGAgc3RhdGUsIHRoZSBwYXNzZWRcbiAgICAgKiB0ZWFyIGRvd24gbG9naWMgd2lsbCBiZSBleGVjdXRlZCBpbW1lZGlhdGVseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGVhcmRvd25Mb2dpY30gdGVhcmRvd24gVGhlIGFkZGl0aW9uYWwgbG9naWMgdG8gZXhlY3V0ZSBvblxuICAgICAqIHRlYXJkb3duLlxuICAgICAqIEByZXR1cm4ge1N1YnNjcmlwdGlvbn0gUmV0dXJucyB0aGUgU3Vic2NyaXB0aW9uIHVzZWQgb3IgY3JlYXRlZCB0byBiZVxuICAgICAqIGFkZGVkIHRvIHRoZSBpbm5lciBzdWJzY3JpcHRpb25zIGxpc3QuIFRoaXMgU3Vic2NyaXB0aW9uIGNhbiBiZSB1c2VkIHdpdGhcbiAgICAgKiBgcmVtb3ZlKClgIHRvIHJlbW92ZSB0aGUgcGFzc2VkIHRlYXJkb3duIGxvZ2ljIGZyb20gdGhlIGlubmVyIHN1YnNjcmlwdGlvbnNcbiAgICAgKiBsaXN0LlxuICAgICAqL1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRlYXJkb3duKSB7XG4gICAgICAgIGlmICghdGVhcmRvd24gfHwgKHRlYXJkb3duID09PSB0aGlzKSB8fCAodGVhcmRvd24gPT09IFN1YnNjcmlwdGlvbi5FTVBUWSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3ViID0gdGVhcmRvd247XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHRlYXJkb3duKSB7XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgc3ViID0gbmV3IFN1YnNjcmlwdGlvbih0ZWFyZG93bik7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIGlmIChzdWIuaXNVbnN1YnNjcmliZWQgfHwgdHlwZW9mIHN1Yi51bnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICh0aGlzLl9zdWJzY3JpcHRpb25zIHx8ICh0aGlzLl9zdWJzY3JpcHRpb25zID0gW10pKS5wdXNoKHN1Yik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCB0ZWFyZG93biAnICsgdGVhcmRvd24gKyAnIGFkZGVkIHRvIFN1YnNjcmlwdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3ViO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIFN1YnNjcmlwdGlvbiBmcm9tIHRoZSBpbnRlcm5hbCBsaXN0IG9mIHN1YnNjcmlwdGlvbnMgdGhhdCB3aWxsXG4gICAgICogdW5zdWJzY3JpYmUgZHVyaW5nIHRoZSB1bnN1YnNjcmliZSBwcm9jZXNzIG9mIHRoaXMgU3Vic2NyaXB0aW9uLlxuICAgICAqIEBwYXJhbSB7U3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb24gVGhlIHN1YnNjcmlwdGlvbiB0byByZW1vdmUuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgLy8gSEFDSzogVGhpcyBtaWdodCBiZSByZWR1bmRhbnQgYmVjYXVzZSBvZiB0aGUgbG9naWMgaW4gYGFkZCgpYFxuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uID09IG51bGwgfHwgKHN1YnNjcmlwdGlvbiA9PT0gdGhpcykgfHwgKHN1YnNjcmlwdGlvbiA9PT0gU3Vic2NyaXB0aW9uLkVNUFRZKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gdGhpcy5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25JbmRleCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKHN1YnNjcmlwdGlvbkluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLkVNUFRZID0gKGZ1bmN0aW9uIChlbXB0eSkge1xuICAgICAgICBlbXB0eS5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBlbXB0eTtcbiAgICB9KG5ldyBTdWJzY3JpcHRpb24oKSkpO1xuICAgIHJldHVybiBTdWJzY3JpcHRpb247XG59KCkpO1xuZXhwb3J0cy5TdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpcHRpb24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9TdWJzY3JpcHRpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydHMuaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcic7IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNBcnJheS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvaXNBcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNPYmplY3QoeCkge1xuICAgIHJldHVybiB4ICE9IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNPYmplY3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL2lzT2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4vZXJyb3JPYmplY3QnKTtcbnZhciB0cnlDYXRjaFRhcmdldDtcbmZ1bmN0aW9uIHRyeUNhdGNoZXIoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRyeUNhdGNoVGFyZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyeUNhdGNoKGZuKSB7XG4gICAgdHJ5Q2F0Y2hUYXJnZXQgPSBmbjtcbiAgICByZXR1cm4gdHJ5Q2F0Y2hlcjtcbn1cbmV4cG9ydHMudHJ5Q2F0Y2ggPSB0cnlDYXRjaDtcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyeUNhdGNoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC90cnlDYXRjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuLy8gdHlwZW9mIGFueSBzbyB0aGF0IGl0IHdlIGRvbid0IGhhdmUgdG8gY2FzdCB3aGVuIGNvbXBhcmluZyBhIHJlc3VsdCB0byB0aGUgZXJyb3Igb2JqZWN0XG5leHBvcnRzLmVycm9yT2JqZWN0ID0geyBlOiB7fSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JPYmplY3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL2Vycm9yT2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gb25lIG9yIG1vcmUgZXJyb3JzIGhhdmUgb2NjdXJyZWQgZHVyaW5nIHRoZVxuICogYHVuc3Vic2NyaWJlYCBvZiBhIHtAbGluayBTdWJzY3JpcHRpb259LlxuICovXG52YXIgVW5zdWJzY3JpcHRpb25FcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFVuc3Vic2NyaXB0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVW5zdWJzY3JpcHRpb25FcnJvcihlcnJvcnMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgICAgICB0aGlzLm5hbWUgPSAnVW5zdWJzY3JpcHRpb25FcnJvcic7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9ycyA/IGVycm9ycy5sZW5ndGggKyBcIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxcblwiICsgZXJyb3JzLm1hcChmdW5jdGlvbiAoZXJyLCBpKSB7IHJldHVybiAoKGkgKyAxKSArIFwiKSBcIiArIGVyci50b1N0cmluZygpKTsgfSkuam9pbignXFxuJykgOiAnJztcbiAgICB9XG4gICAgcmV0dXJuIFVuc3Vic2NyaXB0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLlVuc3Vic2NyaXB0aW9uRXJyb3IgPSBVbnN1YnNjcmlwdGlvbkVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5zdWJzY3JpcHRpb25FcnJvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvci5qc1xuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIFN5bWJvbCA9IHJvb3RfMS5yb290LlN5bWJvbDtcbmV4cG9ydHMuJCRyeFN1YnNjcmliZXIgPSAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgU3ltYm9sLmZvciA9PT0gJ2Z1bmN0aW9uJykgP1xuICAgIFN5bWJvbC5mb3IoJ3J4U3Vic2NyaWJlcicpIDogJ0BAcnhTdWJzY3JpYmVyJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ4U3Vic2NyaWJlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3N5bWJvbC9yeFN1YnNjcmliZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydHMuZW1wdHkgPSB7XG4gICAgaXNVbnN1YnNjcmliZWQ6IHRydWUsXG4gICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7IH0sXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHsgdGhyb3cgZXJyOyB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL09ic2VydmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4vU3Vic2NyaXB0aW9uJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFN1YmplY3RTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdWJqZWN0U3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpcHRpb24oc3ViamVjdCwgb2JzZXJ2ZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IHN1YmplY3Q7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBTdWJqZWN0U3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSBzdWJqZWN0Lm9ic2VydmVycztcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFvYnNlcnZlcnMgfHwgb2JzZXJ2ZXJzLmxlbmd0aCA9PT0gMCB8fCBzdWJqZWN0LmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1YnNjcmliZXJJbmRleCA9IG9ic2VydmVycy5pbmRleE9mKHRoaXMub2JzZXJ2ZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShzdWJzY3JpYmVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3ViamVjdFN1YnNjcmlwdGlvbjtcbn0oU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKSk7XG5leHBvcnRzLlN1YmplY3RTdWJzY3JpcHRpb24gPSBTdWJqZWN0U3Vic2NyaXB0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdFN1YnNjcmlwdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL1N1YmplY3RTdWJzY3JpcHRpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIHRocm93RXJyb3IoZSkgeyB0aHJvdyBlOyB9XG5leHBvcnRzLnRocm93RXJyb3IgPSB0aHJvd0Vycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3dFcnJvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvdGhyb3dFcnJvci5qc1xuICoqIG1vZHVsZSBpZCA9IDIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIGFuIGFjdGlvbiBpcyBpbnZhbGlkIGJlY2F1c2UgdGhlIG9iamVjdCBoYXMgYmVlblxuICogdW5zdWJzY3JpYmVkLlxuICpcbiAqIEBzZWUge0BsaW5rIFN1YmplY3R9XG4gKiBAc2VlIHtAbGluayBCZWhhdmlvclN1YmplY3R9XG4gKlxuICogQGNsYXNzIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXG4gKi9cbnZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9iamVjdFVuc3Vic2NyaWJlZEVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAnb2JqZWN0IHVuc3Vic2NyaWJlZCcpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLk9iamVjdFVuc3Vic2NyaWJlZEVycm9yID0gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYmplY3RVbnN1YnNjcmliZWRFcnJvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanNcbiAqKiBtb2R1bGUgaWQgPSAyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChDKSBNaWNyb3NvZnQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG52YXIgUmVmbGVjdDtcclxuKGZ1bmN0aW9uIChSZWZsZWN0KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xyXG4gICAgLy8gZmVhdHVyZSB0ZXN0IGZvciBPYmplY3QuY3JlYXRlIHN1cHBvcnRcclxuICAgIHZhciBzdXBwb3J0c0NyZWF0ZSA9IHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSBcImZ1bmN0aW9uXCI7XHJcbiAgICAvLyBmZWF0dXJlIHRlc3QgZm9yIF9fcHJvdG9fXyBzdXBwb3J0XHJcbiAgICB2YXIgc3VwcG9ydHNQcm90byA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbnRpbmVsID0ge307XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IH1cclxuICAgICAgICBfXy5wcm90b3R5cGUgPSBzZW50aW5lbDtcclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgX18oKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UuX19wcm90b19fID09PSBzZW50aW5lbDtcclxuICAgIH0pKCk7XHJcbiAgICAvLyBjcmVhdGUgYW4gb2JqZWN0IGluIGRpY3Rpb25hcnkgbW9kZSAoYS5rLmEuIFwic2xvd1wiIG1vZGUgaW4gdjgpXHJcbiAgICB2YXIgY3JlYXRlRGljdGlvbmFyeSA9IHN1cHBvcnRzQ3JlYXRlID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gTWFrZURpY3Rpb25hcnkoT2JqZWN0LmNyZWF0ZShudWxsKSk7IH0gOlxyXG4gICAgICAgIHN1cHBvcnRzUHJvdG8gPyBmdW5jdGlvbiAoKSB7IHJldHVybiBNYWtlRGljdGlvbmFyeSh7IF9fcHJvdG9fXzogbnVsbCB9KTsgfSA6XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIE1ha2VEaWN0aW9uYXJ5KHt9KTsgfTtcclxuICAgIHZhciBIYXNoTWFwO1xyXG4gICAgKGZ1bmN0aW9uIChIYXNoTWFwKSB7XHJcbiAgICAgICAgdmFyIGRvd25MZXZlbCA9ICFzdXBwb3J0c0NyZWF0ZSAmJiAhc3VwcG9ydHNQcm90bztcclxuICAgICAgICBIYXNoTWFwLmhhcyA9IGRvd25MZXZlbFxyXG4gICAgICAgICAgICA/IGZ1bmN0aW9uIChtYXAsIGtleSkgeyByZXR1cm4gaGFzT3duLmNhbGwobWFwLCBrZXkpOyB9XHJcbiAgICAgICAgICAgIDogZnVuY3Rpb24gKG1hcCwga2V5KSB7IHJldHVybiBrZXkgaW4gbWFwOyB9O1xyXG4gICAgICAgIEhhc2hNYXAuZ2V0ID0gZG93bkxldmVsXHJcbiAgICAgICAgICAgID8gZnVuY3Rpb24gKG1hcCwga2V5KSB7IHJldHVybiBoYXNPd24uY2FsbChtYXAsIGtleSkgPyBtYXBba2V5XSA6IHVuZGVmaW5lZDsgfVxyXG4gICAgICAgICAgICA6IGZ1bmN0aW9uIChtYXAsIGtleSkgeyByZXR1cm4gbWFwW2tleV07IH07XHJcbiAgICB9KShIYXNoTWFwIHx8IChIYXNoTWFwID0ge30pKTtcclxuICAgIC8vIExvYWQgZ2xvYmFsIG9yIHNoaW0gdmVyc2lvbnMgb2YgTWFwLCBTZXQsIGFuZCBXZWFrTWFwXHJcbiAgICB2YXIgZnVuY3Rpb25Qcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRnVuY3Rpb24pO1xyXG4gICAgdmFyIF9NYXAgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBNYXAgOiBDcmVhdGVNYXBQb2x5ZmlsbCgpO1xyXG4gICAgdmFyIF9TZXQgPSB0eXBlb2YgU2V0ID09PSBcImZ1bmN0aW9uXCIgPyBTZXQgOiBDcmVhdGVTZXRQb2x5ZmlsbCgpO1xyXG4gICAgdmFyIF9XZWFrTWFwID0gdHlwZW9mIFdlYWtNYXAgPT09IFwiZnVuY3Rpb25cIiA/IFdlYWtNYXAgOiBDcmVhdGVXZWFrTWFwUG9seWZpbGwoKTtcclxuICAgIC8vIFtbTWV0YWRhdGFdXSBpbnRlcm5hbCBzbG90XHJcbiAgICB2YXIgTWV0YWRhdGEgPSBuZXcgX1dlYWtNYXAoKTtcclxuICAgIC8qKlxyXG4gICAgICAqIEFwcGxpZXMgYSBzZXQgb2YgZGVjb3JhdG9ycyB0byBhIHByb3BlcnR5IG9mIGEgdGFyZ2V0IG9iamVjdC5cclxuICAgICAgKiBAcGFyYW0gZGVjb3JhdG9ycyBBbiBhcnJheSBvZiBkZWNvcmF0b3JzLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3QuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgdG8gZGVjb3JhdGUuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldERlc2NyaXB0b3IgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgdGhlIHRhcmdldCBrZXlcclxuICAgICAgKiBAcmVtYXJrcyBEZWNvcmF0b3JzIGFyZSBhcHBsaWVkIGluIHJldmVyc2Ugb3JkZXIuXHJcbiAgICAgICogQGV4YW1wbGVcclxuICAgICAgKlxyXG4gICAgICAqICAgICBjbGFzcyBFeGFtcGxlIHtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNNZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG4gICAgICAqICAgICBFeGFtcGxlID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEV4YW1wbGUpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEV4YW1wbGUsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEV4YW1wbGUucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiLFxyXG4gICAgICAqICAgICAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIsXHJcbiAgICAgICogICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKSkpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG4gICAgICAqICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIsXHJcbiAgICAgICogICAgICAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnNBcnJheSwgRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIsXHJcbiAgICAgICogICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIikpKTtcclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCB0YXJnZXRLZXksIHRhcmdldERlc2NyaXB0b3IpIHtcclxuICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldERlc2NyaXB0b3IpKSB7XHJcbiAgICAgICAgICAgIGlmICghSXNBcnJheShkZWNvcmF0b3JzKSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICBpZiAoSXNVbmRlZmluZWQodGFyZ2V0S2V5KSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXREZXNjcmlwdG9yKSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGVQcm9wZXJ0eVdpdGhEZXNjcmlwdG9yKGRlY29yYXRvcnMsIHRhcmdldCwgdGFyZ2V0S2V5LCB0YXJnZXREZXNjcmlwdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpIHtcclxuICAgICAgICAgICAgaWYgKCFJc0FycmF5KGRlY29yYXRvcnMpKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIERlY29yYXRlUHJvcGVydHlXaXRob3V0RGVzY3JpcHRvcihkZWNvcmF0b3JzLCB0YXJnZXQsIHRhcmdldEtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIUlzQXJyYXkoZGVjb3JhdG9ycykpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgICAgIGlmICghSXNDb25zdHJ1Y3Rvcih0YXJnZXQpKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGVDb25zdHJ1Y3RvcihkZWNvcmF0b3JzLCB0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJlZmxlY3QuZGVjb3JhdGUgPSBkZWNvcmF0ZTtcclxuICAgIC8qKlxyXG4gICAgICAqIEEgZGVmYXVsdCBtZXRhZGF0YSBkZWNvcmF0b3IgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIG9uIGEgY2xhc3MsIGNsYXNzIG1lbWJlciwgb3IgcGFyYW1ldGVyLlxyXG4gICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBUaGUga2V5IGZvciB0aGUgbWV0YWRhdGEgZW50cnkuXHJcbiAgICAgICogQHBhcmFtIG1ldGFkYXRhVmFsdWUgVGhlIHZhbHVlIGZvciB0aGUgbWV0YWRhdGEgZW50cnkuXHJcbiAgICAgICogQHJldHVybnMgQSBkZWNvcmF0b3IgZnVuY3Rpb24uXHJcbiAgICAgICogQHJlbWFya3NcclxuICAgICAgKiBJZiBgbWV0YWRhdGFLZXlgIGlzIGFscmVhZHkgZGVmaW5lZCBmb3IgdGhlIHRhcmdldCBhbmQgdGFyZ2V0IGtleSwgdGhlXHJcbiAgICAgICogbWV0YWRhdGFWYWx1ZSBmb3IgdGhhdCBrZXkgd2lsbCBiZSBvdmVyd3JpdHRlbi5cclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICogICAgIEBSZWZsZWN0Lm1ldGFkYXRhKGtleSwgdmFsdWUpXHJcbiAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG4gICAgICAqICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yLCBUeXBlU2NyaXB0IG9ubHkpXHJcbiAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG4gICAgICAqICAgICAgICAgQFJlZmxlY3QubWV0YWRhdGEoa2V5LCB2YWx1ZSlcclxuICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUsIFR5cGVTY3JpcHQgb25seSlcclxuICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcbiAgICAgICogICAgICAgICBAUmVmbGVjdC5tZXRhZGF0YShrZXksIHZhbHVlKVxyXG4gICAgICAqICAgICAgICAgcHJvcGVydHk7XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICBjbGFzcyBFeGFtcGxlIHtcclxuICAgICAgKiAgICAgICAgIEBSZWZsZWN0Lm1ldGFkYXRhKGtleSwgdmFsdWUpXHJcbiAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcbiAgICAgICogICAgICAgICBAUmVmbGVjdC5tZXRhZGF0YShrZXksIHZhbHVlKVxyXG4gICAgICAqICAgICAgICAgbWV0aG9kKCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgICAgICBmdW5jdGlvbiBkZWNvcmF0b3IodGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgICAgICAgICAgT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFJc0NvbnN0cnVjdG9yKHRhcmdldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCAvKnRhcmdldEtleSovIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRlY29yYXRvcjtcclxuICAgIH1cclxuICAgIFJlZmxlY3QubWV0YWRhdGEgPSBtZXRhZGF0YTtcclxuICAgIC8qKlxyXG4gICAgICAqIERlZmluZSBhIHVuaXF1ZSBtZXRhZGF0YSBlbnRyeSBvbiB0aGUgdGFyZ2V0LlxyXG4gICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cclxuICAgICAgKiBAcGFyYW0gbWV0YWRhdGFWYWx1ZSBBIHZhbHVlIHRoYXQgY29udGFpbnMgYXR0YWNoZWQgbWV0YWRhdGEuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0byBkZWZpbmUgbWV0YWRhdGEuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXHJcbiAgICAgICogQGV4YW1wbGVcclxuICAgICAgKlxyXG4gICAgICAqICAgICBjbGFzcyBFeGFtcGxlIHtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNNZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG4gICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZSk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxyXG4gICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZS5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIG9wdGlvbnMsIEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG4gICAgICAqICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgb3B0aW9ucywgRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGRlY29yYXRvciBmYWN0b3J5IGFzIG1ldGFkYXRhLXByb2R1Y2luZyBhbm5vdGF0aW9uLlxyXG4gICAgICAqICAgICBmdW5jdGlvbiBNeUFubm90YXRpb24ob3B0aW9ucyk6IERlY29yYXRvciB7XHJcbiAgICAgICogICAgICAgICByZXR1cm4gKHRhcmdldCwga2V5PykgPT4gUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIG9wdGlvbnMsIHRhcmdldCwga2V5KTtcclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICovXHJcbiAgICBmdW5jdGlvbiBkZWZpbmVNZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpXHJcbiAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuICAgICAgICByZXR1cm4gT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG4gICAgfVxyXG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YSA9IGRlZmluZU1ldGFkYXRhO1xyXG4gICAgLyoqXHJcbiAgICAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgdGFyZ2V0IG9iamVjdCBvciBpdHMgcHJvdG90eXBlIGNoYWluIGhhcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEga2V5IGRlZmluZWQuXHJcbiAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXHJcbiAgICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBtZXRhZGF0YSBrZXkgd2FzIGRlZmluZWQgb24gdGhlIHRhcmdldCBvYmplY3Qgb3IgaXRzIHByb3RvdHlwZSBjaGFpbjsgb3RoZXJ3aXNlLCBgZmFsc2VgLlxyXG4gICAgICAqIEBleGFtcGxlXHJcbiAgICAgICpcclxuICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcbiAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XHJcbiAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gaGFzTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcbiAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKVxyXG4gICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcbiAgICAgICAgcmV0dXJuIE9yZGluYXJ5SGFzTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KTtcclxuICAgIH1cclxuICAgIFJlZmxlY3QuaGFzTWV0YWRhdGEgPSBoYXNNZXRhZGF0YTtcclxuICAgIC8qKlxyXG4gICAgICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHRhcmdldCBvYmplY3QgaGFzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSBrZXkgZGVmaW5lZC5cclxuICAgICAgKiBAcGFyYW0gbWV0YWRhdGFLZXkgQSBrZXkgdXNlZCB0byBzdG9yZSBhbmQgcmV0cmlldmUgbWV0YWRhdGEuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cclxuICAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG1ldGFkYXRhIGtleSB3YXMgZGVmaW5lZCBvbiB0aGUgdGFyZ2V0IG9iamVjdDsgb3RoZXJ3aXNlLCBgZmFsc2VgLlxyXG4gICAgICAqIEBleGFtcGxlXHJcbiAgICAgICpcclxuICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcbiAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XHJcbiAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzT3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gaGFzT3duTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcbiAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKVxyXG4gICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcbiAgICAgICAgcmV0dXJuIE9yZGluYXJ5SGFzT3duTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KTtcclxuICAgIH1cclxuICAgIFJlZmxlY3QuaGFzT3duTWV0YWRhdGEgPSBoYXNPd25NZXRhZGF0YTtcclxuICAgIC8qKlxyXG4gICAgICAqIEdldHMgdGhlIG1ldGFkYXRhIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgbWV0YWRhdGEga2V5IG9uIHRoZSB0YXJnZXQgb2JqZWN0IG9yIGl0cyBwcm90b3R5cGUgY2hhaW4uXHJcbiAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXHJcbiAgICAgICogQHJldHVybnMgVGhlIG1ldGFkYXRhIHZhbHVlIGZvciB0aGUgbWV0YWRhdGEga2V5IGlmIGZvdW5kOyBvdGhlcndpc2UsIGB1bmRlZmluZWRgLlxyXG4gICAgICAqIEBleGFtcGxlXHJcbiAgICAgICpcclxuICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcbiAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XHJcbiAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEV4YW1wbGUucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcbiAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKVxyXG4gICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcbiAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KTtcclxuICAgIH1cclxuICAgIFJlZmxlY3QuZ2V0TWV0YWRhdGEgPSBnZXRNZXRhZGF0YTtcclxuICAgIC8qKlxyXG4gICAgICAqIEdldHMgdGhlIG1ldGFkYXRhIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgbWV0YWRhdGEga2V5IG9uIHRoZSB0YXJnZXQgb2JqZWN0LlxyXG4gICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXRLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxyXG4gICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSB2YWx1ZSBmb3IgdGhlIG1ldGFkYXRhIGtleSBpZiBmb3VuZDsgb3RoZXJ3aXNlLCBgdW5kZWZpbmVkYC5cclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxyXG4gICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldE93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG4gICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgIGlmICghSXNVbmRlZmluZWQodGFyZ2V0S2V5KSlcclxuICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgIHJldHVybiBPcmRpbmFyeUdldE93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSk7XHJcbiAgICB9XHJcbiAgICBSZWZsZWN0LmdldE93bk1ldGFkYXRhID0gZ2V0T3duTWV0YWRhdGE7XHJcbiAgICAvKipcclxuICAgICAgKiBHZXRzIHRoZSBtZXRhZGF0YSBrZXlzIGRlZmluZWQgb24gdGhlIHRhcmdldCBvYmplY3Qgb3IgaXRzIHByb3RvdHlwZSBjaGFpbi5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXRLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxyXG4gICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHVuaXF1ZSBtZXRhZGF0YSBrZXlzLlxyXG4gICAgICAqIEBleGFtcGxlXHJcbiAgICAgICpcclxuICAgICAgKiAgICAgY2xhc3MgRXhhbXBsZSB7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcbiAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XHJcbiAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMoRXhhbXBsZSk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyhFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKEV4YW1wbGUucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKEV4YW1wbGUsIFwic3RhdGljTWV0aG9kXCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyhFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldE1ldGFkYXRhS2V5cyh0YXJnZXQsIHRhcmdldEtleSkge1xyXG4gICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgIGlmICghSXNVbmRlZmluZWQodGFyZ2V0S2V5KSlcclxuICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgIHJldHVybiBPcmRpbmFyeU1ldGFkYXRhS2V5cyh0YXJnZXQsIHRhcmdldEtleSk7XHJcbiAgICB9XHJcbiAgICBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyA9IGdldE1ldGFkYXRhS2V5cztcclxuICAgIC8qKlxyXG4gICAgICAqIEdldHMgdGhlIHVuaXF1ZSBtZXRhZGF0YSBrZXlzIGRlZmluZWQgb24gdGhlIHRhcmdldCBvYmplY3QuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cclxuICAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB1bmlxdWUgbWV0YWRhdGEga2V5cy5cclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxyXG4gICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGFLZXlzKEV4YW1wbGUpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMoRXhhbXBsZSwgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhS2V5cyhFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhS2V5cyhFeGFtcGxlLCBcInN0YXRpY01ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMoRXhhbXBsZS5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xyXG4gICAgICAqXHJcbiAgICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRPd25NZXRhZGF0YUtleXModGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpXHJcbiAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuICAgICAgICByZXR1cm4gT3JkaW5hcnlPd25NZXRhZGF0YUtleXModGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG4gICAgfVxyXG4gICAgUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMgPSBnZXRPd25NZXRhZGF0YUtleXM7XHJcbiAgICAvKipcclxuICAgICAgKiBEZWxldGVzIHRoZSBtZXRhZGF0YSBlbnRyeSBmcm9tIHRoZSB0YXJnZXQgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGtleS5cclxuICAgICAgKiBAcGFyYW0gbWV0YWRhdGFLZXkgQSBrZXkgdXNlZCB0byBzdG9yZSBhbmQgcmV0cmlldmUgbWV0YWRhdGEuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cclxuICAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG1ldGFkYXRhIGVudHJ5IHdhcyBmb3VuZCBhbmQgZGVsZXRlZDsgb3RoZXJ3aXNlLCBmYWxzZS5cclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIGNsYXNzIEV4YW1wbGUge1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxyXG4gICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmRlbGV0ZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgRXhhbXBsZSwgXCJzdGF0aWNNZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBFeGFtcGxlLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGRlbGV0ZU1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yYnVja3Rvbi9SZWZsZWN0RGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjL21ldGFkYXRhLm1kI2RlbGV0ZW1ldGFkYXRhLW1ldGFkYXRha2V5LXAtXHJcbiAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKVxyXG4gICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcbiAgICAgICAgdmFyIG1ldGFkYXRhTWFwID0gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0YXJnZXQsIHRhcmdldEtleSwgLypjcmVhdGUqLyBmYWxzZSk7XHJcbiAgICAgICAgaWYgKElzVW5kZWZpbmVkKG1ldGFkYXRhTWFwKSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICghbWV0YWRhdGFNYXAuZGVsZXRlKG1ldGFkYXRhS2V5KSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmIChtZXRhZGF0YU1hcC5zaXplID4gMClcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgdmFyIHRhcmdldE1ldGFkYXRhID0gTWV0YWRhdGEuZ2V0KHRhcmdldCk7XHJcbiAgICAgICAgdGFyZ2V0TWV0YWRhdGEuZGVsZXRlKHRhcmdldEtleSk7XHJcbiAgICAgICAgaWYgKHRhcmdldE1ldGFkYXRhLnNpemUgPiAwKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBNZXRhZGF0YS5kZWxldGUodGFyZ2V0KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEgPSBkZWxldGVNZXRhZGF0YTtcclxuICAgIGZ1bmN0aW9uIERlY29yYXRlQ29uc3RydWN0b3IoZGVjb3JhdG9ycywgdGFyZ2V0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcclxuICAgICAgICAgICAgdmFyIGRlY29yYXRvciA9IGRlY29yYXRvcnNbaV07XHJcbiAgICAgICAgICAgIHZhciBkZWNvcmF0ZWQgPSBkZWNvcmF0b3IodGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZChkZWNvcmF0ZWQpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzQ29uc3RydWN0b3IoZGVjb3JhdGVkKSlcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBkZWNvcmF0ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIERlY29yYXRlUHJvcGVydHlXaXRoRGVzY3JpcHRvcihkZWNvcmF0b3JzLCB0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcclxuICAgICAgICAgICAgdmFyIGRlY29yYXRvciA9IGRlY29yYXRvcnNbaV07XHJcbiAgICAgICAgICAgIHZhciBkZWNvcmF0ZWQgPSBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcik7XHJcbiAgICAgICAgICAgIGlmICghSXNVbmRlZmluZWQoZGVjb3JhdGVkKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFJc09iamVjdChkZWNvcmF0ZWQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IgPSBkZWNvcmF0ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBEZWNvcmF0ZVByb3BlcnR5V2l0aG91dERlc2NyaXB0b3IoZGVjb3JhdG9ycywgdGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWNvcmF0b3IgPSBkZWNvcmF0b3JzW2ldO1xyXG4gICAgICAgICAgICBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JidWNrdG9uL1JlZmxlY3REZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWMvbWV0YWRhdGEubWQjZ2V0b3JjcmVhdGVtZXRhZGF0YW1hcC0tby1wLWNyZWF0ZS1cclxuICAgIGZ1bmN0aW9uIEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAodGFyZ2V0LCB0YXJnZXRLZXksIGNyZWF0ZSkge1xyXG4gICAgICAgIHZhciB0YXJnZXRNZXRhZGF0YSA9IE1ldGFkYXRhLmdldCh0YXJnZXQpO1xyXG4gICAgICAgIGlmICghdGFyZ2V0TWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCFjcmVhdGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0YXJnZXRNZXRhZGF0YSA9IG5ldyBfTWFwKCk7XHJcbiAgICAgICAgICAgIE1ldGFkYXRhLnNldCh0YXJnZXQsIHRhcmdldE1ldGFkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGtleU1ldGFkYXRhID0gdGFyZ2V0TWV0YWRhdGEuZ2V0KHRhcmdldEtleSk7XHJcbiAgICAgICAgaWYgKCFrZXlNZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIWNyZWF0ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGtleU1ldGFkYXRhID0gbmV3IF9NYXAoKTtcclxuICAgICAgICAgICAgdGFyZ2V0TWV0YWRhdGEuc2V0KHRhcmdldEtleSwga2V5TWV0YWRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5TWV0YWRhdGE7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmJ1Y2t0b24vUmVmbGVjdERlY29yYXRvcnMvYmxvYi9tYXN0ZXIvc3BlYy9tZXRhZGF0YS5tZCNvcmRpbmFyeWhhc21ldGFkYXRhLS1tZXRhZGF0YWtleS1vLXAtXHJcbiAgICBmdW5jdGlvbiBPcmRpbmFyeUhhc01ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XHJcbiAgICAgICAgdmFyIGhhc093biA9IE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xyXG4gICAgICAgIGlmIChoYXNPd24pXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSBHZXRQcm90b3R5cGVPZihPKTtcclxuICAgICAgICByZXR1cm4gcGFyZW50ICE9PSBudWxsID8gT3JkaW5hcnlIYXNNZXRhZGF0YShNZXRhZGF0YUtleSwgcGFyZW50LCBQKSA6IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JidWNrdG9uL1JlZmxlY3REZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWMvbWV0YWRhdGEubWQjb3JkaW5hcnloYXNvd25tZXRhZGF0YS0tbWV0YWRhdGFrZXktby1wLVxyXG4gICAgZnVuY3Rpb24gT3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkge1xyXG4gICAgICAgIHZhciBtZXRhZGF0YU1hcCA9IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgLypjcmVhdGUqLyBmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhTWFwICE9PSB1bmRlZmluZWQgJiYgQm9vbGVhbihtZXRhZGF0YU1hcC5oYXMoTWV0YWRhdGFLZXkpKTtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yYnVja3Rvbi9SZWZsZWN0RGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjL21ldGFkYXRhLm1kI29yZGluYXJ5Z2V0bWV0YWRhdGEtLW1ldGFkYXRha2V5LW8tcC1cclxuICAgIGZ1bmN0aW9uIE9yZGluYXJ5R2V0TWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApIHtcclxuICAgICAgICB2YXIgaGFzT3duID0gT3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCk7XHJcbiAgICAgICAgaWYgKGhhc093bilcclxuICAgICAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0T3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSBHZXRQcm90b3R5cGVPZihPKTtcclxuICAgICAgICByZXR1cm4gcGFyZW50ICE9PSBudWxsID8gT3JkaW5hcnlHZXRNZXRhZGF0YShNZXRhZGF0YUtleSwgcGFyZW50LCBQKSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yYnVja3Rvbi9SZWZsZWN0RGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjL21ldGFkYXRhLm1kI29yZGluYXJ5Z2V0b3dubWV0YWRhdGEtLW1ldGFkYXRha2V5LW8tcC1cclxuICAgIGZ1bmN0aW9uIE9yZGluYXJ5R2V0T3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApIHtcclxuICAgICAgICB2YXIgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiBtZXRhZGF0YU1hcCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbWV0YWRhdGFNYXAuZ2V0KE1ldGFkYXRhS2V5KTtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yYnVja3Rvbi9SZWZsZWN0RGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjL21ldGFkYXRhLm1kI29yZGluYXJ5ZGVmaW5lb3dubWV0YWRhdGEtLW1ldGFkYXRha2V5LW1ldGFkYXRhdmFsdWUtby1wLVxyXG4gICAgZnVuY3Rpb24gT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTWV0YWRhdGFWYWx1ZSwgTywgUCkge1xyXG4gICAgICAgIHZhciBtZXRhZGF0YU1hcCA9IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgLypjcmVhdGUqLyB0cnVlKTtcclxuICAgICAgICBtZXRhZGF0YU1hcC5zZXQoTWV0YWRhdGFLZXksIE1ldGFkYXRhVmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JidWNrdG9uL1JlZmxlY3REZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWMvbWV0YWRhdGEubWQjb3JkaW5hcnltZXRhZGF0YWtleXMtLW8tcC1cclxuICAgIGZ1bmN0aW9uIE9yZGluYXJ5TWV0YWRhdGFLZXlzKE8sIFApIHtcclxuICAgICAgICB2YXIgb3duS2V5cyA9IE9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKE8sIFApO1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSBHZXRQcm90b3R5cGVPZihPKTtcclxuICAgICAgICBpZiAocGFyZW50ID09PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gb3duS2V5cztcclxuICAgICAgICB2YXIgcGFyZW50S2V5cyA9IE9yZGluYXJ5TWV0YWRhdGFLZXlzKHBhcmVudCwgUCk7XHJcbiAgICAgICAgaWYgKHBhcmVudEtleXMubGVuZ3RoIDw9IDApXHJcbiAgICAgICAgICAgIHJldHVybiBvd25LZXlzO1xyXG4gICAgICAgIGlmIChvd25LZXlzLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50S2V5cztcclxuICAgICAgICB2YXIga2V5cyA9IG5ldyBfU2V0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG93bktleXMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBvd25LZXlzW19pXTtcclxuICAgICAgICAgICAga2V5cy5hZGQoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgX2EgPSAwOyBfYSA8IHBhcmVudEtleXMubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBwYXJlbnRLZXlzW19hXTtcclxuICAgICAgICAgICAga2V5cy5hZGQoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdldEtleXMoa2V5cyk7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmJ1Y2t0b24vUmVmbGVjdERlY29yYXRvcnMvYmxvYi9tYXN0ZXIvc3BlYy9tZXRhZGF0YS5tZCNvcmRpbmFyeW93bm1ldGFkYXRha2V5cy0tby1wLVxyXG4gICAgZnVuY3Rpb24gT3JkaW5hcnlPd25NZXRhZGF0YUtleXModGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuICAgICAgICB2YXIgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKHRhcmdldCwgdGFyZ2V0S2V5LCAvKmNyZWF0ZSovIGZhbHNlKTtcclxuICAgICAgICB2YXIga2V5cyA9IFtdO1xyXG4gICAgICAgIGlmIChtZXRhZGF0YU1hcClcclxuICAgICAgICAgICAgZm9yRWFjaChtZXRhZGF0YU1hcCwgZnVuY3Rpb24gKF8sIGtleSkgeyByZXR1cm4ga2V5cy5wdXNoKGtleSk7IH0pO1xyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMtdW5kZWZpbmVkLXR5cGVcclxuICAgIGZ1bmN0aW9uIElzVW5kZWZpbmVkKHgpIHtcclxuICAgICAgICByZXR1cm4geCA9PT0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWlzYXJyYXlcclxuICAgIGZ1bmN0aW9uIElzQXJyYXkoeCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5ID8gQXJyYXkuaXNBcnJheSh4KSA6IHggaW5zdGFuY2VvZiBBcnJheSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QtdHlwZVxyXG4gICAgZnVuY3Rpb24gSXNPYmplY3QoeCkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiA/IHggIT09IG51bGwgOiB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiO1xyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWlzY29uc3RydWN0b3JcclxuICAgIGZ1bmN0aW9uIElzQ29uc3RydWN0b3IoeCkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gXCJmdW5jdGlvblwiO1xyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMtc3ltYm9sLXR5cGVcclxuICAgIGZ1bmN0aW9uIElzU3ltYm9sKHgpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCI7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9wcm9wZXJ0eWtleVxyXG4gICAgZnVuY3Rpb24gVG9Qcm9wZXJ0eUtleSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBJc1N5bWJvbCh2YWx1ZSkgPyB2YWx1ZSA6IFN0cmluZyh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBHZXRQcm90b3R5cGVPZihPKSB7XHJcbiAgICAgICAgdmFyIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pO1xyXG4gICAgICAgIGlmICh0eXBlb2YgTyAhPT0gXCJmdW5jdGlvblwiIHx8IE8gPT09IGZ1bmN0aW9uUHJvdG90eXBlKVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XHJcbiAgICAgICAgLy8gVHlwZVNjcmlwdCBkb2Vzbid0IHNldCBfX3Byb3RvX18gaW4gRVM1LCBhcyBpdCdzIG5vbi1zdGFuZGFyZC5cclxuICAgICAgICAvLyBUcnkgdG8gZGV0ZXJtaW5lIHRoZSBzdXBlcmNsYXNzIEV4YW1wbGVvbnN0cnVjdG9yLiBDb21wYXRpYmxlIGltcGxlbWVudGF0aW9uc1xyXG4gICAgICAgIC8vIG11c3QgZWl0aGVyIHNldCBfX3Byb3RvX18gb24gYSBzdWJjbGFzcyBFeGFtcGxlb25zdHJ1Y3RvciB0byB0aGUgc3VwZXJjbGFzcyBFeGFtcGxlb25zdHJ1Y3RvcixcclxuICAgICAgICAvLyBvciBlbnN1cmUgZWFjaCBjbGFzcyBoYXMgYSB2YWxpZCBgY29uc3RydWN0b3JgIHByb3BlcnR5IG9uIGl0cyBwcm90b3R5cGUgdGhhdFxyXG4gICAgICAgIC8vIHBvaW50cyBiYWNrIHRvIHRoZSBjb25zdHJ1Y3Rvci5cclxuICAgICAgICAvLyBJZiB0aGlzIGlzIG5vdCB0aGUgc2FtZSBhcyBGdW5jdGlvbi5bW1Byb3RvdHlwZV1dLCB0aGVuIHRoaXMgaXMgZGVmaW5hdGVseSBpbmhlcml0ZWQuXHJcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgY2FzZSB3aGVuIGluIEVTNiBvciB3aGVuIHVzaW5nIF9fcHJvdG9fXyBpbiBhIGNvbXBhdGlibGUgYnJvd3Nlci5cclxuICAgICAgICBpZiAocHJvdG8gIT09IGZ1bmN0aW9uUHJvdG90eXBlKVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XHJcbiAgICAgICAgLy8gSWYgdGhlIHN1cGVyIHByb3RvdHlwZSBpcyBPYmplY3QucHJvdG90eXBlLCBudWxsLCBvciB1bmRlZmluZWQsIHRoZW4gd2UgY2Fubm90IGRldGVybWluZSB0aGUgaGVyaXRhZ2UuXHJcbiAgICAgICAgdmFyIHByb3RvdHlwZSA9IE8ucHJvdG90eXBlO1xyXG4gICAgICAgIHZhciBwcm90b3R5cGVQcm90byA9IHByb3RvdHlwZSAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG90eXBlKTtcclxuICAgICAgICBpZiAocHJvdG90eXBlUHJvdG8gPT0gbnVsbCB8fCBwcm90b3R5cGVQcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSlcclxuICAgICAgICAgICAgcmV0dXJuIHByb3RvO1xyXG4gICAgICAgIC8vIElmIHRoZSBjb25zdHJ1Y3RvciB3YXMgbm90IGEgZnVuY3Rpb24sIHRoZW4gd2UgY2Fubm90IGRldGVybWluZSB0aGUgaGVyaXRhZ2UuXHJcbiAgICAgICAgdmFyIGNvbnN0cnVjdG9yID0gcHJvdG90eXBlUHJvdG8uY29uc3RydWN0b3I7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zdHJ1Y3RvciAhPT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XHJcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBzb21lIGtpbmQgb2Ygc2VsZi1yZWZlcmVuY2UsIHRoZW4gd2UgY2Fubm90IGRldGVybWluZSB0aGUgaGVyaXRhZ2UuXHJcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9yID09PSBPKVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XHJcbiAgICAgICAgLy8gd2UgaGF2ZSBhIHByZXR0eSBnb29kIGd1ZXNzIGF0IHRoZSBoZXJpdGFnZS5cclxuICAgICAgICByZXR1cm4gY29uc3RydWN0b3I7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBJdGVyYXRvclN0ZXAoaXRlcmF0b3IpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IpIHtcclxuICAgICAgICB2YXIgZiA9IGl0ZXJhdG9yW1wicmV0dXJuXCJdO1xyXG4gICAgICAgIGlmIChmKVxyXG4gICAgICAgICAgICBmLmNhbGwoaXRlcmF0b3IpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZm9yRWFjaChzb3VyY2UsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgdmFyIGVudHJpZXMgPSBzb3VyY2UuZW50cmllcztcclxuICAgICAgICBpZiAodHlwZW9mIGVudHJpZXMgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBlbnRyaWVzLmNhbGwoc291cmNlKTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChyZXN1bHQgPSBJdGVyYXRvclN0ZXAoaXRlcmF0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hID0gcmVzdWx0LnZhbHVlLCBrZXkgPSBfYVswXSwgdmFsdWUgPSBfYVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHZhbHVlLCBrZXksIHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZm9yRWFjaF8xID0gc291cmNlLmZvckVhY2g7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZm9yRWFjaF8xID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIGZvckVhY2hfMS5jYWxsKHNvdXJjZSwgY2FsbGJhY2ssIHRoaXNBcmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZ2V0S2V5cyhzb3VyY2UpIHtcclxuICAgICAgICB2YXIga2V5cyA9IFtdO1xyXG4gICAgICAgIGZvckVhY2goc291cmNlLCBmdW5jdGlvbiAoXywga2V5KSB7IGtleXMucHVzaChrZXkpOyB9KTtcclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH1cclxuICAgIC8vIG5haXZlIE1hcEl0ZXJhdG9yIHNoaW1cclxuICAgIGZ1bmN0aW9uIENyZWF0ZU1hcEl0ZXJhdG9yKGtleXMsIHZhbHVlcywga2luZCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChrZXlzIHx8IHZhbHVlcykgJiYgaW5kZXggPCAoa2V5cyB8fCB2YWx1ZXMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImtleVwiOiByZXR1cm4geyB2YWx1ZToga2V5c1tjdXJyZW50XSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZhbHVlXCI6IHJldHVybiB7IHZhbHVlOiB2YWx1ZXNbY3VycmVudF0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJrZXkrdmFsdWVcIjogcmV0dXJuIHsgdmFsdWU6IFtrZXlzW2N1cnJlbnRdLCB2YWx1ZXNbY3VycmVudF1dLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGtleXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwidGhyb3dcIjogZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5cyB8fCB2YWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXlzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInJldHVyblwiOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXlzIHx8IHZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHZhbHVlLCBkb25lOiB0cnVlIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8gbmFpdmUgTWFwIHNoaW1cclxuICAgIGZ1bmN0aW9uIENyZWF0ZU1hcFBvbHlmaWxsKCkge1xyXG4gICAgICAgIHZhciBjYWNoZVNlbnRpbmVsID0ge307XHJcbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIE1hcCgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVLZXkgPSBjYWNoZVNlbnRpbmVsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVJbmRleCA9IC0yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXAucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9rZXlzLmxlbmd0aDsgfSxcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gdGhpcy5fZmluZChrZXksIC8qaW5zZXJ0Ki8gZmFsc2UpID49IDA7IH07XHJcbiAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fZmluZChrZXksIC8qaW5zZXJ0Ki8gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID49IDAgPyB0aGlzLl92YWx1ZXNbaW5kZXhdIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9maW5kKGtleSwgLyppbnNlcnQqLyB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNYXAucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmQoa2V5LCAvKmluc2VydCovIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLl9rZXlzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gaW5kZXggKyAxOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleXNbaSAtIDFdID0gdGhpcy5fa2V5c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzW2kgLSAxXSA9IHRoaXMuX3ZhbHVlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5cy5sZW5ndGgtLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZXMubGVuZ3RoLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVLZXkgPSBjYWNoZVNlbnRpbmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlSW5kZXggPSAtMjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVLZXkgPSBjYWNoZVNlbnRpbmVsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVJbmRleCA9IC0yO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNYXAucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBDcmVhdGVNYXBJdGVyYXRvcih0aGlzLl9rZXlzLCAvKnZhbHVlcyovIHVuZGVmaW5lZCwgXCJrZXlcIik7IH07XHJcbiAgICAgICAgICAgIE1hcC5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gQ3JlYXRlTWFwSXRlcmF0b3IoLyprZXlzKi8gdW5kZWZpbmVkLCB0aGlzLl92YWx1ZXMsIFwidmFsdWVcIik7IH07XHJcbiAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIENyZWF0ZU1hcEl0ZXJhdG9yKHRoaXMuX2tleXMsIHRoaXMuX3ZhbHVlcywgXCJrZXkrdmFsdWVcIik7IH07XHJcbiAgICAgICAgICAgIE1hcC5wcm90b3R5cGUuX2ZpbmQgPSBmdW5jdGlvbiAoa2V5LCBpbnNlcnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jYWNoZUtleSA9PT0ga2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCAwICYmIGluc2VydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fa2V5cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsdWVzLnB1c2godW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZUtleSA9IGtleSwgdGhpcy5fY2FjaGVJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gTWFwO1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcbiAgICAvLyBuYWl2ZSBTZXQgc2hpbVxyXG4gICAgZnVuY3Rpb24gQ3JlYXRlU2V0UG9seWZpbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIFNldCgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcCA9IG5ldyBfTWFwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX21hcC5zaXplOyB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHRoaXMuX21hcC5oYXModmFsdWUpOyB9O1xyXG4gICAgICAgICAgICBTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdGhpcy5fbWFwLnNldCh2YWx1ZSwgdmFsdWUpLCB0aGlzOyB9O1xyXG4gICAgICAgICAgICBTZXQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdGhpcy5fbWFwLmRlbGV0ZSh2YWx1ZSk7IH07XHJcbiAgICAgICAgICAgIFNldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX21hcC5jbGVhcigpOyB9O1xyXG4gICAgICAgICAgICBTZXQucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9tYXAua2V5cygpOyB9O1xyXG4gICAgICAgICAgICBTZXQucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX21hcC52YWx1ZXMoKTsgfTtcclxuICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fbWFwLmVudHJpZXMoKTsgfTtcclxuICAgICAgICAgICAgcmV0dXJuIFNldDtcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG4gICAgLy8gbmFpdmUgV2Vha01hcCBzaGltXHJcbiAgICBmdW5jdGlvbiBDcmVhdGVXZWFrTWFwUG9seWZpbGwoKSB7XHJcbiAgICAgICAgdmFyIFVVSURfU0laRSA9IDE2O1xyXG4gICAgICAgIHZhciBrZXlzID0gY3JlYXRlRGljdGlvbmFyeSgpO1xyXG4gICAgICAgIHZhciByb290S2V5ID0gQ3JlYXRlVW5pcXVlS2V5KCk7XHJcbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIFdlYWtNYXAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXkgPSBDcmVhdGVVbmlxdWVLZXkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBXZWFrTWFwLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlICE9PSB1bmRlZmluZWQgPyBIYXNoTWFwLmhhcyh0YWJsZSwgdGhpcy5fa2V5KSA6IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXZWFrTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlICE9PSB1bmRlZmluZWQgPyBIYXNoTWFwLmdldCh0YWJsZSwgdGhpcy5fa2V5KSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgV2Vha01hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHRhcmdldCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IEdldE9yQ3JlYXRlV2Vha01hcFRhYmxlKHRhcmdldCwgLypjcmVhdGUqLyB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRhYmxlW3RoaXMuX2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXZWFrTWFwLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlICE9PSB1bmRlZmluZWQgPyBkZWxldGUgdGFibGVbdGhpcy5fa2V5XSA6IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXZWFrTWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IG5vdCBhIHJlYWwgY2xlYXIsIGp1c3QgbWFrZXMgdGhlIHByZXZpb3VzIGRhdGEgdW5yZWFjaGFibGVcclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleSA9IENyZWF0ZVVuaXF1ZUtleSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gV2Vha01hcDtcclxuICAgICAgICB9KSgpO1xyXG4gICAgICAgIGZ1bmN0aW9uIEZpbGxSYW5kb21CeXRlcyhidWZmZXIsIHNpemUpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpXHJcbiAgICAgICAgICAgICAgICBidWZmZXJbaV0gPSBNYXRoLnJhbmRvbSgpICogMHhmZiB8IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBidWZmZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIEdlblJhbmRvbUJ5dGVzKHNpemUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBVaW50OEFycmF5ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3J5cHRvICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHNpemUpKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbXNDcnlwdG8gIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheShzaXplKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmlsbFJhbmRvbUJ5dGVzKG5ldyBVaW50OEFycmF5KHNpemUpLCBzaXplKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gRmlsbFJhbmRvbUJ5dGVzKG5ldyBBcnJheShzaXplKSwgc2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIENyZWF0ZVVVSUQoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gR2VuUmFuZG9tQnl0ZXMoVVVJRF9TSVpFKTtcclxuICAgICAgICAgICAgLy8gbWFyayBhcyByYW5kb20gLSBSRkMgNDEyMiDCpyA0LjRcclxuICAgICAgICAgICAgZGF0YVs2XSA9IGRhdGFbNl0gJiAweDRmIHwgMHg0MDtcclxuICAgICAgICAgICAgZGF0YVs4XSA9IGRhdGFbOF0gJiAweGJmIHwgMHg4MDtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG9mZnNldCA9IDA7IG9mZnNldCA8IFVVSURfU0laRTsgKytvZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBieXRlID0gZGF0YVtvZmZzZXRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldCA9PT0gNCB8fCBvZmZzZXQgPT09IDYgfHwgb2Zmc2V0ID09PSA4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIi1cIjtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlIDwgMTYpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGJ5dGUudG9TdHJpbmcoMTYpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gQ3JlYXRlVW5pcXVlS2V5KCkge1xyXG4gICAgICAgICAgICB2YXIga2V5O1xyXG4gICAgICAgICAgICBkb1xyXG4gICAgICAgICAgICAgICAga2V5ID0gXCJAQFdlYWtNYXBAQFwiICsgQ3JlYXRlVVVJRCgpO1xyXG4gICAgICAgICAgICB3aGlsZSAoSGFzaE1hcC5oYXMoa2V5cywga2V5KSk7XHJcbiAgICAgICAgICAgIGtleXNba2V5XSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIEdldE9yQ3JlYXRlV2Vha01hcFRhYmxlKHRhcmdldCwgY3JlYXRlKSB7XHJcbiAgICAgICAgICAgIGlmICghaGFzT3duLmNhbGwodGFyZ2V0LCByb290S2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjcmVhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHJvb3RLZXksIHsgdmFsdWU6IGNyZWF0ZURpY3Rpb25hcnkoKSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Jvb3RLZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHVzZXMgYSBoZXVyaXN0aWMgdXNlZCBieSB2OCBhbmQgY2hha3JhIHRvIGZvcmNlIGFuIG9iamVjdCBpbnRvIGRpY3Rpb25hcnkgbW9kZS5cclxuICAgIGZ1bmN0aW9uIE1ha2VEaWN0aW9uYXJ5KG9iaikge1xyXG4gICAgICAgIG9iai5fX0RJQ1RJT05BUllfTU9ERV9fID0gMTtcclxuICAgICAgICBkZWxldGUgb2JqLl9fX19ESUNUSU9OQVJZX01PREVfXztcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgLy8gcGF0Y2ggZ2xvYmFsIFJlZmxlY3RcclxuICAgIChmdW5jdGlvbiAoX19nbG9iYWwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIF9fZ2xvYmFsLlJlZmxlY3QgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgaWYgKF9fZ2xvYmFsLlJlZmxlY3QgIT09IFJlZmxlY3QpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHAgaW4gUmVmbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChSZWZsZWN0LCBwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2dsb2JhbC5SZWZsZWN0W3BdID0gUmVmbGVjdFtwXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9fZ2xvYmFsLlJlZmxlY3QgPSBSZWZsZWN0O1xyXG4gICAgICAgIH1cclxuICAgIH0pKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOlxyXG4gICAgICAgIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOlxyXG4gICAgICAgICAgICB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDpcclxuICAgICAgICAgICAgICAgIEZ1bmN0aW9uKFwicmV0dXJuIHRoaXM7XCIpKCkpO1xyXG59KShSZWZsZWN0IHx8IChSZWZsZWN0ID0ge30pKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVmbGVjdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yZWZsZWN0LW1ldGFkYXRhL1JlZmxlY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9zaGltJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvY29yZS5kaWN0Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvY29yZS5nZXQtaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9jb3JlLmlzLWl0ZXJhYmxlJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvY29yZS5kZWxheScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2NvcmUuZnVuY3Rpb24ucGFydCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2NvcmUub2JqZWN0LmlzLW9iamVjdCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2NvcmUub2JqZWN0LmNsYXNzb2YnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9jb3JlLm9iamVjdC5kZWZpbmUnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9jb3JlLm9iamVjdC5tYWtlJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvY29yZS5udW1iZXIuaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9jb3JlLnJlZ2V4cC5lc2NhcGUnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9jb3JlLnN0cmluZy5lc2NhcGUtaHRtbCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2NvcmUuc3RyaW5nLnVuZXNjYXBlLWh0bWwnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9tb2R1bGVzL19jb3JlJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN5bWJvbCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QuY3JlYXRlJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHknKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmRlZmluZS1wcm9wZXJ0aWVzJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3InKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktbmFtZXMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmZyZWV6ZScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3Quc2VhbCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QucHJldmVudC1leHRlbnNpb25zJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm9iamVjdC5pcy1mcm96ZW4nKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmlzLXNlYWxlZCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QuaXMtZXh0ZW5zaWJsZScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm9iamVjdC5pcycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmZ1bmN0aW9uLmJpbmQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuZnVuY3Rpb24ubmFtZScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5mdW5jdGlvbi5oYXMtaW5zdGFuY2UnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucGFyc2UtaW50Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnBhcnNlLWZsb2F0Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci5jb25zdHJ1Y3RvcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIudG8tZml4ZWQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubnVtYmVyLnRvLXByZWNpc2lvbicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIuZXBzaWxvbicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIuaXMtZmluaXRlJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci5pcy1pbnRlZ2VyJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci5pcy1uYW4nKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubnVtYmVyLmlzLXNhZmUtaW50ZWdlcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIubWF4LXNhZmUtaW50ZWdlcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIubWluLXNhZmUtaW50ZWdlcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIucGFyc2UtZmxvYXQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubnVtYmVyLnBhcnNlLWludCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmFjb3NoJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGguYXNpbmgnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5hdGFuaCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmNicnQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5jbHozMicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmNvc2gnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5leHBtMScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmZyb3VuZCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmh5cG90Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGguaW11bCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmxvZzEwJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGgubG9nMXAnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5sb2cyJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGguc2lnbicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLnNpbmgnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC50YW5oJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGgudHJ1bmMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3RyaW5nLmZyb20tY29kZS1wb2ludCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcucmF3Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy50cmltJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuY29kZS1wb2ludC1hdCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuZW5kcy13aXRoJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5pbmNsdWRlcycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcucmVwZWF0Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5zdGFydHMtd2l0aCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuYW5jaG9yJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5iaWcnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3RyaW5nLmJsaW5rJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5ib2xkJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5maXhlZCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuZm9udGNvbG9yJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5mb250c2l6ZScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRhbGljcycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcubGluaycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuc21hbGwnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3RyaW5nLnN0cmlrZScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuc3ViJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5zdXAnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuZGF0ZS5ub3cnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuZGF0ZS50by1qc29uJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmRhdGUudG8taXNvLXN0cmluZycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5kYXRlLnRvLXN0cmluZycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5kYXRlLnRvLXByaW1pdGl2ZScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5pcy1hcnJheScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5mcm9tJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5Lm9mJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5LmpvaW4nKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuc2xpY2UnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuc29ydCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5mb3ItZWFjaCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5tYXAnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuZmlsdGVyJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5LnNvbWUnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuZXZlcnknKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkucmVkdWNlJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5LnJlZHVjZS1yaWdodCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5pbmRleC1vZicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5sYXN0LWluZGV4LW9mJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5LmNvcHktd2l0aGluJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5LmZpbGwnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuZmluZCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5maW5kLWluZGV4Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5LnNwZWNpZXMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVnZXhwLmNvbnN0cnVjdG9yJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZ2V4cC50by1zdHJpbmcnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVnZXhwLmZsYWdzJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZ2V4cC5tYXRjaCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWdleHAucmVwbGFjZScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWdleHAuc2VhcmNoJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZ2V4cC5zcGxpdCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5wcm9taXNlJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hcCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zZXQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYud2Vhay1tYXAnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYud2Vhay1zZXQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYudHlwZWQuYXJyYXktYnVmZmVyJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLmRhdGEtdmlldycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi50eXBlZC5pbnQ4LWFycmF5Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLnVpbnQ4LWFycmF5Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLnVpbnQ4LWNsYW1wZWQtYXJyYXknKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYudHlwZWQuaW50MTYtYXJyYXknKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYudHlwZWQudWludDE2LWFycmF5Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLmludDMyLWFycmF5Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLnVpbnQzMi1hcnJheScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi50eXBlZC5mbG9hdDMyLWFycmF5Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLmZsb2F0NjQtYXJyYXknKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5hcHBseScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmNvbnN0cnVjdCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmRlZmluZS1wcm9wZXJ0eScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmRlbGV0ZS1wcm9wZXJ0eScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmVudW1lcmF0ZScpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmdldCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmdldC1wcm90b3R5cGUtb2YnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5oYXMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5pcy1leHRlbnNpYmxlJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZmxlY3Qub3duLWtleXMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5wcmV2ZW50LWV4dGVuc2lvbnMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5zZXQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5zZXQtcHJvdG90eXBlLW9mJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM3LnN0cmluZy5hdCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5zdHJpbmcucGFkLXN0YXJ0Jyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM3LnN0cmluZy5wYWQtZW5kJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM3LnN0cmluZy50cmltLWxlZnQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuc3RyaW5nLnRyaW0tcmlnaHQnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuc3RyaW5nLm1hdGNoLWFsbCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuc3ltYm9sLm9ic2VydmFibGUnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcub2JqZWN0LnZhbHVlcycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYmplY3QuZW50cmllcycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYmplY3QuZGVmaW5lLWdldHRlcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYmplY3QuZGVmaW5lLXNldHRlcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYmplY3QubG9va3VwLWdldHRlcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYmplY3QubG9va3VwLXNldHRlcicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5tYXAudG8tanNvbicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5zZXQudG8tanNvbicpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5zeXN0ZW0uZ2xvYmFsJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM3LmVycm9yLmlzLWVycm9yJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM3Lm1hdGguaWFkZGgnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcubWF0aC5pc3ViaCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5tYXRoLmltdWxoJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM3Lm1hdGgudW11bGgnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5kZWZpbmUtbWV0YWRhdGEnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5kZWxldGUtbWV0YWRhdGEnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtbWV0YWRhdGEnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtbWV0YWRhdGEta2V5cycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5yZWZsZWN0LmdldC1vd24tbWV0YWRhdGEnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtb3duLW1ldGFkYXRhLWtleXMnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5oYXMtbWV0YWRhdGEnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5oYXMtb3duLW1ldGFkYXRhJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvZXM3LnJlZmxlY3QubWV0YWRhdGEnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuYXNhcCcpO1xucmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYnNlcnZhYmxlJyk7XG5yZXF1aXJlKCcuL21vZHVsZXMvd2ViLnRpbWVycycpO1xucmVxdWlyZSgnLi9tb2R1bGVzL3dlYi5pbW1lZGlhdGUnKTtcbnJlcXVpcmUoJy4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbW9kdWxlcy9fY29yZScpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvc2hpbS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltXG52YXIgZ2xvYmFsICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCBERVNDUklQVE9SUyAgICA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgcmVkZWZpbmUgICAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpXG4gICwgTUVUQSAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhJykuS0VZXG4gICwgJGZhaWxzICAgICAgICAgPSByZXF1aXJlKCcuL19mYWlscycpXG4gICwgc2hhcmVkICAgICAgICAgPSByZXF1aXJlKCcuL19zaGFyZWQnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIHVpZCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdWlkJylcbiAgLCB3a3MgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcycpXG4gICwgd2tzRXh0ICAgICAgICAgPSByZXF1aXJlKCcuL193a3MtZXh0JylcbiAgLCB3a3NEZWZpbmUgICAgICA9IHJlcXVpcmUoJy4vX3drcy1kZWZpbmUnKVxuICAsIGtleU9mICAgICAgICAgID0gcmVxdWlyZSgnLi9fa2V5b2YnKVxuICAsIGVudW1LZXlzICAgICAgID0gcmVxdWlyZSgnLi9fZW51bS1rZXlzJylcbiAgLCBpc0FycmF5ICAgICAgICA9IHJlcXVpcmUoJy4vX2lzLWFycmF5JylcbiAgLCBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgdG9JT2JqZWN0ICAgICAgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCB0b1ByaW1pdGl2ZSAgICA9IHJlcXVpcmUoJy4vX3RvLXByaW1pdGl2ZScpXG4gICwgY3JlYXRlRGVzYyAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCBfY3JlYXRlICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKVxuICAsIGdPUE5FeHQgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4tZXh0JylcbiAgLCAkR09QRCAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJylcbiAgLCAkRFAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwgJGtleXMgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpXG4gICwgZ09QRCAgICAgICAgICAgPSAkR09QRC5mXG4gICwgZFAgICAgICAgICAgICAgPSAkRFAuZlxuICAsIGdPUE4gICAgICAgICAgID0gZ09QTkV4dC5mXG4gICwgJFN5bWJvbCAgICAgICAgPSBnbG9iYWwuU3ltYm9sXG4gICwgJEpTT04gICAgICAgICAgPSBnbG9iYWwuSlNPTlxuICAsIF9zdHJpbmdpZnkgICAgID0gJEpTT04gJiYgJEpTT04uc3RyaW5naWZ5XG4gICwgUFJPVE9UWVBFICAgICAgPSAncHJvdG90eXBlJ1xuICAsIEhJRERFTiAgICAgICAgID0gd2tzKCdfaGlkZGVuJylcbiAgLCBUT19QUklNSVRJVkUgICA9IHdrcygndG9QcmltaXRpdmUnKVxuICAsIGlzRW51bSAgICAgICAgID0ge30ucHJvcGVydHlJc0VudW1lcmFibGVcbiAgLCBTeW1ib2xSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXJlZ2lzdHJ5JylcbiAgLCBBbGxTeW1ib2xzICAgICA9IHNoYXJlZCgnc3ltYm9scycpXG4gICwgT1BTeW1ib2xzICAgICAgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKVxuICAsIE9iamVjdFByb3RvICAgID0gT2JqZWN0W1BST1RPVFlQRV1cbiAgLCBVU0VfTkFUSVZFICAgICA9IHR5cGVvZiAkU3ltYm9sID09ICdmdW5jdGlvbidcbiAgLCBRT2JqZWN0ICAgICAgICA9IGdsb2JhbC5RT2JqZWN0O1xuLy8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczXG52YXIgc2V0dGVyID0gIVFPYmplY3QgfHwgIVFPYmplY3RbUFJPVE9UWVBFXSB8fCAhUU9iamVjdFtQUk9UT1RZUEVdLmZpbmRDaGlsZDtcblxuLy8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3XG52YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbigpe1xuICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7dmFsdWU6IDd9KS5hOyB9XG4gIH0pKS5hICE9IDc7XG59KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpe1xuICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTtcbiAgaWYocHJvdG9EZXNjKWRlbGV0ZSBPYmplY3RQcm90b1trZXldO1xuICBkUChpdCwga2V5LCBEKTtcbiAgaWYocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bylkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpO1xufSA6IGRQO1xuXG52YXIgd3JhcCA9IGZ1bmN0aW9uKHRhZyl7XG4gIHZhciBzeW0gPSBBbGxTeW1ib2xzW3RhZ10gPSBfY3JlYXRlKCRTeW1ib2xbUFJPVE9UWVBFXSk7XG4gIHN5bS5fayA9IHRhZztcbiAgcmV0dXJuIHN5bTtcbn07XG5cbnZhciBpc1N5bWJvbCA9IFVTRV9OQVRJVkUgJiYgdHlwZW9mICRTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCcgPyBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7XG59IDogZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXQgaW5zdGFuY2VvZiAkU3ltYm9sO1xufTtcblxudmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpe1xuICBpZihpdCA9PT0gT2JqZWN0UHJvdG8pJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTtcbiAgYW5PYmplY3QoaXQpO1xuICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpO1xuICBhbk9iamVjdChEKTtcbiAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpe1xuICAgIGlmKCFELmVudW1lcmFibGUpe1xuICAgICAgaWYoIWhhcyhpdCwgSElEREVOKSlkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7XG4gICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZihoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKWl0W0hJRERFTl1ba2V5XSA9IGZhbHNlO1xuICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7XG4gICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTtcbiAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7XG59O1xudmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCl7XG4gIGFuT2JqZWN0KGl0KTtcbiAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKVxuICAgICwgaSAgICA9IDBcbiAgICAsIGwgPSBrZXlzLmxlbmd0aFxuICAgICwga2V5O1xuICB3aGlsZShsID4gaSkkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTtcbiAgcmV0dXJuIGl0O1xufTtcbnZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKXtcbiAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApO1xufTtcbnZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpe1xuICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpO1xuICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7XG4gIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTtcbn07XG52YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXtcbiAgaXQgID0gdG9JT2JqZWN0KGl0KTtcbiAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTtcbiAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjtcbiAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpO1xuICBpZihEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpRC5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgcmV0dXJuIEQ7XG59O1xudmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7XG4gIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpXG4gICAgLCByZXN1bHQgPSBbXVxuICAgICwgaSAgICAgID0gMFxuICAgICwga2V5O1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXtcbiAgICBpZighaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpcmVzdWx0LnB1c2goa2V5KTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcbnZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KXtcbiAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90b1xuICAgICwgbmFtZXMgID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpXG4gICAgLCByZXN1bHQgPSBbXVxuICAgICwgaSAgICAgID0gMFxuICAgICwga2V5O1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXtcbiAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pXG5pZighVVNFX05BVElWRSl7XG4gICRTeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woKXtcbiAgICBpZih0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCl0aHJvdyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEnKTtcbiAgICB2YXIgdGFnID0gdWlkKGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTtcbiAgICB2YXIgJHNldCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIGlmKHRoaXMgPT09IE9iamVjdFByb3RvKSRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTtcbiAgICAgIGlmKGhhcyh0aGlzLCBISURERU4pICYmIGhhcyh0aGlzW0hJRERFTl0sIHRhZykpdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTtcbiAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7XG4gICAgfTtcbiAgICBpZihERVNDUklQVE9SUyAmJiBzZXR0ZXIpc2V0U3ltYm9sRGVzYyhPYmplY3RQcm90bywgdGFnLCB7Y29uZmlndXJhYmxlOiB0cnVlLCBzZXQ6ICRzZXR9KTtcbiAgICByZXR1cm4gd3JhcCh0YWcpO1xuICB9O1xuICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG4gICAgcmV0dXJuIHRoaXMuX2s7XG4gIH0pO1xuXG4gICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAkRFAuZiAgID0gJGRlZmluZVByb3BlcnR5O1xuICByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpLmYgPSBnT1BORXh0LmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lcztcbiAgcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpLmYgID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlO1xuICByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuXG4gIGlmKERFU0NSSVBUT1JTICYmICFyZXF1aXJlKCcuL19saWJyYXJ5Jykpe1xuICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpO1xuICB9XG5cbiAgd2tzRXh0LmYgPSBmdW5jdGlvbihuYW1lKXtcbiAgICByZXR1cm4gd3JhcCh3a3MobmFtZSkpO1xuICB9XG59XG5cbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtTeW1ib2w6ICRTeW1ib2x9KTtcblxuZm9yKHZhciBzeW1ib2xzID0gKFxuICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNFxuICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnXG4pLnNwbGl0KCcsJyksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3Moc3ltYm9sc1tpKytdKTtcblxuZm9yKHZhciBzeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrc0RlZmluZShzeW1ib2xzW2krK10pO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywge1xuICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSlcbiAgJ2Zvcic6IGZ1bmN0aW9uKGtleSl7XG4gICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKVxuICAgICAgPyBTeW1ib2xSZWdpc3RyeVtrZXldXG4gICAgICA6IFN5bWJvbFJlZ2lzdHJ5W2tleV0gPSAkU3ltYm9sKGtleSk7XG4gIH0sXG4gIC8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKVxuICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihrZXkpe1xuICAgIGlmKGlzU3ltYm9sKGtleSkpcmV0dXJuIGtleU9mKFN5bWJvbFJlZ2lzdHJ5LCBrZXkpO1xuICAgIHRocm93IFR5cGVFcnJvcihrZXkgKyAnIGlzIG5vdCBhIHN5bWJvbCEnKTtcbiAgfSxcbiAgdXNlU2V0dGVyOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSB0cnVlOyB9LFxuICB1c2VTaW1wbGU6IGZ1bmN0aW9uKCl7IHNldHRlciA9IGZhbHNlOyB9XG59KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHtcbiAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxuICBjcmVhdGU6ICRjcmVhdGUsXG4gIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKVxuICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LFxuICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKVxuICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcyxcbiAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKVxuICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG4gIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLFxuICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pXG4gIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9sc1xufSk7XG5cbi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKVxuJEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uKCl7XG4gIHZhciBTID0gJFN5bWJvbCgpO1xuICAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fVxuICAvLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGxcbiAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHNcbiAgcmV0dXJuIF9zdHJpbmdpZnkoW1NdKSAhPSAnW251bGxdJyB8fCBfc3RyaW5naWZ5KHthOiBTfSkgIT0gJ3t9JyB8fCBfc3RyaW5naWZ5KE9iamVjdChTKSkgIT0gJ3t9Jztcbn0pKSwgJ0pTT04nLCB7XG4gIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXtcbiAgICBpZihpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSlyZXR1cm47IC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWRcbiAgICB2YXIgYXJncyA9IFtpdF1cbiAgICAgICwgaSAgICA9IDFcbiAgICAgICwgcmVwbGFjZXIsICRyZXBsYWNlcjtcbiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO1xuICAgIHJlcGxhY2VyID0gYXJnc1sxXTtcbiAgICBpZih0eXBlb2YgcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykkcmVwbGFjZXIgPSByZXBsYWNlcjtcbiAgICBpZigkcmVwbGFjZXIgfHwgIWlzQXJyYXkocmVwbGFjZXIpKXJlcGxhY2VyID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgICBpZigkcmVwbGFjZXIpdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgICAgIGlmKCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgYXJnc1sxXSA9IHJlcGxhY2VyO1xuICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTtcbiAgfVxufSk7XG5cbi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludClcbiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IHJlcXVpcmUoJy4vX2hpZGUnKSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpO1xuLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXVxuc2V0VG9TdHJpbmdUYWcoJFN5bWJvbCwgJ1N5bWJvbCcpO1xuLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXVxuc2V0VG9TdHJpbmdUYWcoTWF0aCwgJ01hdGgnLCB0cnVlKTtcbi8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddXG5zZXRUb1N0cmluZ1RhZyhnbG9iYWwuSlNPTiwgJ0pTT04nLCB0cnVlKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN5bWJvbC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxudmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoXG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19nbG9iYWwuanNcbiAqKiBtb2R1bGUgaWQgPSA0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBrZXkpe1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19oYXMuanNcbiAqKiBtb2R1bGUgaWQgPSA0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eVxubW9kdWxlLmV4cG9ydHMgPSAhcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpe1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19kZXNjcmlwdG9ycy5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2ZhaWxzLmpzXG4gKiogbW9kdWxlIGlkID0gNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGNvcmUgICAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKVxuICAsIGhpZGUgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKVxuICAsIHJlZGVmaW5lICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lJylcbiAgLCBjdHggICAgICAgPSByZXF1aXJlKCcuL19jdHgnKVxuICAsIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xuXG52YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7XG4gIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GXG4gICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HXG4gICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TXG4gICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QXG4gICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CXG4gICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gfHwgKGdsb2JhbFtuYW1lXSA9IHt9KSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV1cbiAgICAsIGV4cG9ydHMgICA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pXG4gICAgLCBleHBQcm90byAgPSBleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KVxuICAgICwga2V5LCBvd24sIG91dCwgZXhwO1xuICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTtcbiAgZm9yKGtleSBpbiBzb3VyY2Upe1xuICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZVxuICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7XG4gICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWRcbiAgICBvdXQgPSAob3duID8gdGFyZ2V0IDogc291cmNlKVtrZXldO1xuICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0XG4gICAgZXhwID0gSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG4gICAgLy8gZXh0ZW5kIGdsb2JhbFxuICAgIGlmKHRhcmdldClyZWRlZmluZSh0YXJnZXQsIGtleSwgb3V0LCB0eXBlICYgJGV4cG9ydC5VKTtcbiAgICAvLyBleHBvcnRcbiAgICBpZihleHBvcnRzW2tleV0gIT0gb3V0KWhpZGUoZXhwb3J0cywga2V5LCBleHApO1xuICAgIGlmKElTX1BST1RPICYmIGV4cFByb3RvW2tleV0gIT0gb3V0KWV4cFByb3RvW2tleV0gPSBvdXQ7XG4gIH1cbn07XG5nbG9iYWwuY29yZSA9IGNvcmU7XG4vLyB0eXBlIGJpdG1hcFxuJGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWRcbiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsXG4kZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpY1xuJGV4cG9ydC5QID0gODsgICAvLyBwcm90b1xuJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kXG4kZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXBcbiRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZVxuJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIFxubW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fZXhwb3J0LmpzXG4gKiogbW9kdWxlIGlkID0gNTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzIuNC4wJ307XG5pZih0eXBlb2YgX19lID09ICdudW1iZXInKV9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2NvcmUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGRQICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKVxuICAsIGNyZWF0ZURlc2MgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpe1xuICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpO1xufSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG4gIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIHJldHVybiBvYmplY3Q7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9faGlkZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgYW5PYmplY3QgICAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIElFOF9ET01fREVGSU5FID0gcmVxdWlyZSgnLi9faWU4LWRvbS1kZWZpbmUnKVxuICAsIHRvUHJpbWl0aXZlICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJylcbiAgLCBkUCAgICAgICAgICAgICA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuZXhwb3J0cy5mID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpe1xuICBhbk9iamVjdChPKTtcbiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuICBhbk9iamVjdChBdHRyaWJ1dGVzKTtcbiAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHtcbiAgICByZXR1cm4gZFAoTywgUCwgQXR0cmlidXRlcyk7XG4gIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH1cbiAgaWYoJ2dldCcgaW4gQXR0cmlidXRlcyB8fCAnc2V0JyBpbiBBdHRyaWJ1dGVzKXRocm93IFR5cGVFcnJvcignQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhJyk7XG4gIGlmKCd2YWx1ZScgaW4gQXR0cmlidXRlcylPW1BdID0gQXR0cmlidXRlcy52YWx1ZTtcbiAgcmV0dXJuIE87XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWRwLmpzXG4gKiogbW9kdWxlIGlkID0gNTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKCFpc09iamVjdChpdCkpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpO1xuICByZXR1cm4gaXQ7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fYW4tb2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gNTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2lzLW9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDU1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9ICFyZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpICYmICFyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVxdWlyZSgnLi9fZG9tLWNyZWF0ZScpKCdkaXYnKSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNztcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9faWU4LWRvbS1kZWZpbmUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JylcbiAgLCBkb2N1bWVudCA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLmRvY3VtZW50XG4gIC8vIGluIG9sZCBJRSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0J1xuICAsIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBpcyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fZG9tLWNyZWF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSlcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xuLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2Vcbi8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBTKXtcbiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gaXQ7XG4gIHZhciBmbiwgdmFsO1xuICBpZihTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7XG4gIGlmKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcbiAgaWYoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtcbiAgdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3RvLXByaW1pdGl2ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGJpdG1hcCwgdmFsdWUpe1xuICByZXR1cm4ge1xuICAgIGVudW1lcmFibGUgIDogIShiaXRtYXAgJiAxKSxcbiAgICBjb25maWd1cmFibGU6ICEoYml0bWFwICYgMiksXG4gICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLFxuICAgIHZhbHVlICAgICAgIDogdmFsdWVcbiAgfTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19wcm9wZXJ0eS1kZXNjLmpzXG4gKiogbW9kdWxlIGlkID0gNTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGhpZGUgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKVxuICAsIGhhcyAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgU1JDICAgICAgID0gcmVxdWlyZSgnLi9fdWlkJykoJ3NyYycpXG4gICwgVE9fU1RSSU5HID0gJ3RvU3RyaW5nJ1xuICAsICR0b1N0cmluZyA9IEZ1bmN0aW9uW1RPX1NUUklOR11cbiAgLCBUUEwgICAgICAgPSAoJycgKyAkdG9TdHJpbmcpLnNwbGl0KFRPX1NUUklORyk7XG5cbnJlcXVpcmUoJy4vX2NvcmUnKS5pbnNwZWN0U291cmNlID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gJHRvU3RyaW5nLmNhbGwoaXQpO1xufTtcblxuKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTywga2V5LCB2YWwsIHNhZmUpe1xuICB2YXIgaXNGdW5jdGlvbiA9IHR5cGVvZiB2YWwgPT0gJ2Z1bmN0aW9uJztcbiAgaWYoaXNGdW5jdGlvbiloYXModmFsLCAnbmFtZScpIHx8IGhpZGUodmFsLCAnbmFtZScsIGtleSk7XG4gIGlmKE9ba2V5XSA9PT0gdmFsKXJldHVybjtcbiAgaWYoaXNGdW5jdGlvbiloYXModmFsLCBTUkMpIHx8IGhpZGUodmFsLCBTUkMsIE9ba2V5XSA/ICcnICsgT1trZXldIDogVFBMLmpvaW4oU3RyaW5nKGtleSkpKTtcbiAgaWYoTyA9PT0gZ2xvYmFsKXtcbiAgICBPW2tleV0gPSB2YWw7XG4gIH0gZWxzZSB7XG4gICAgaWYoIXNhZmUpe1xuICAgICAgZGVsZXRlIE9ba2V5XTtcbiAgICAgIGhpZGUoTywga2V5LCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZihPW2tleV0pT1trZXldID0gdmFsO1xuICAgICAgZWxzZSBoaWRlKE8sIGtleSwgdmFsKTtcbiAgICB9XG4gIH1cbi8vIGFkZCBmYWtlIEZ1bmN0aW9uI3RvU3RyaW5nIGZvciBjb3JyZWN0IHdvcmsgd3JhcHBlZCBtZXRob2RzIC8gY29uc3RydWN0b3JzIHdpdGggbWV0aG9kcyBsaWtlIExvRGFzaCBpc05hdGl2ZVxufSkoRnVuY3Rpb24ucHJvdG90eXBlLCBUT19TVFJJTkcsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG4gIHJldHVybiB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nICYmIHRoaXNbU1JDXSB8fCAkdG9TdHJpbmcuY2FsbCh0aGlzKTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fcmVkZWZpbmUuanNcbiAqKiBtb2R1bGUgaWQgPSA2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGlkID0gMFxuICAsIHB4ID0gTWF0aC5yYW5kb20oKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcbiAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL191aWQuanNcbiAqKiBtb2R1bGUgaWQgPSA2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG52YXIgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKXtcbiAgYUZ1bmN0aW9uKGZuKTtcbiAgaWYodGhhdCA9PT0gdW5kZWZpbmVkKXJldHVybiBmbjtcbiAgc3dpdGNoKGxlbmd0aCl7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTtcbiAgICB9O1xuICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKC8qIC4uLmFyZ3MgKi8pe1xuICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICB9O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2N0eC5qc1xuICoqIG1vZHVsZSBpZCA9IDYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTtcbiAgcmV0dXJuIGl0O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2EtZnVuY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSA2M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIE1FVEEgICAgID0gcmVxdWlyZSgnLi9fdWlkJykoJ21ldGEnKVxuICAsIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JylcbiAgLCBoYXMgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgc2V0RGVzYyAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mXG4gICwgaWQgICAgICAgPSAwO1xudmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGUgfHwgZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRydWU7XG59O1xudmFyIEZSRUVaRSA9ICFyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBpc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSk7XG59KTtcbnZhciBzZXRNZXRhID0gZnVuY3Rpb24oaXQpe1xuICBzZXREZXNjKGl0LCBNRVRBLCB7dmFsdWU6IHtcbiAgICBpOiAnTycgKyArK2lkLCAvLyBvYmplY3QgSURcbiAgICB3OiB7fSAgICAgICAgICAvLyB3ZWFrIGNvbGxlY3Rpb25zIElEc1xuICB9fSk7XG59O1xudmFyIGZhc3RLZXkgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXtcbiAgLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeFxuICBpZighaXNPYmplY3QoaXQpKXJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCcgPyBpdCA6ICh0eXBlb2YgaXQgPT0gJ3N0cmluZycgPyAnUycgOiAnUCcpICsgaXQ7XG4gIGlmKCFoYXMoaXQsIE1FVEEpKXtcbiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdFxuICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiAnRic7XG4gICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGFcbiAgICBpZighY3JlYXRlKXJldHVybiAnRSc7XG4gICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcbiAgICBzZXRNZXRhKGl0KTtcbiAgLy8gcmV0dXJuIG9iamVjdCBJRFxuICB9IHJldHVybiBpdFtNRVRBXS5pO1xufTtcbnZhciBnZXRXZWFrID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7XG4gIGlmKCFoYXMoaXQsIE1FVEEpKXtcbiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdFxuICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiB0cnVlO1xuICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhXG4gICAgaWYoIWNyZWF0ZSlyZXR1cm4gZmFsc2U7XG4gICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcbiAgICBzZXRNZXRhKGl0KTtcbiAgLy8gcmV0dXJuIGhhc2ggd2VhayBjb2xsZWN0aW9ucyBJRHNcbiAgfSByZXR1cm4gaXRbTUVUQV0udztcbn07XG4vLyBhZGQgbWV0YWRhdGEgb24gZnJlZXplLWZhbWlseSBtZXRob2RzIGNhbGxpbmdcbnZhciBvbkZyZWV6ZSA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYoRlJFRVpFICYmIG1ldGEuTkVFRCAmJiBpc0V4dGVuc2libGUoaXQpICYmICFoYXMoaXQsIE1FVEEpKXNldE1ldGEoaXQpO1xuICByZXR1cm4gaXQ7XG59O1xudmFyIG1ldGEgPSBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgS0VZOiAgICAgIE1FVEEsXG4gIE5FRUQ6ICAgICBmYWxzZSxcbiAgZmFzdEtleTogIGZhc3RLZXksXG4gIGdldFdlYWs6ICBnZXRXZWFrLFxuICBvbkZyZWV6ZTogb25GcmVlemVcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19tZXRhLmpzXG4gKiogbW9kdWxlIGlkID0gNjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBnbG9iYWwgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nXG4gICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpe1xuICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHt9KTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19zaGFyZWQuanNcbiAqKiBtb2R1bGUgaWQgPSA2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGRlZiA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmZcbiAgLCBoYXMgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIFRBRyA9IHJlcXVpcmUoJy4vX3drcycpKCd0b1N0cmluZ1RhZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpe1xuICBpZihpdCAmJiAhaGFzKGl0ID0gc3RhdCA/IGl0IDogaXQucHJvdG90eXBlLCBUQUcpKWRlZihpdCwgVEFHLCB7Y29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogdGFnfSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fc2V0LXRvLXN0cmluZy10YWcuanNcbiAqKiBtb2R1bGUgaWQgPSA2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIHN0b3JlICAgICAgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgnd2tzJylcbiAgLCB1aWQgICAgICAgID0gcmVxdWlyZSgnLi9fdWlkJylcbiAgLCBTeW1ib2wgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuU3ltYm9sXG4gICwgVVNFX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT0gJ2Z1bmN0aW9uJztcblxudmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcbiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9XG4gICAgVVNFX1NZTUJPTCAmJiBTeW1ib2xbbmFtZV0gfHwgKFVTRV9TWU1CT0wgPyBTeW1ib2wgOiB1aWQpKCdTeW1ib2wuJyArIG5hbWUpKTtcbn07XG5cbiRleHBvcnRzLnN0b3JlID0gc3RvcmU7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL193a3MuanNcbiAqKiBtb2R1bGUgaWQgPSA2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiZXhwb3J0cy5mID0gcmVxdWlyZSgnLi9fd2tzJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL193a3MtZXh0LmpzXG4gKiogbW9kdWxlIGlkID0gNjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBnbG9iYWwgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgY29yZSAgICAgICAgICAgPSByZXF1aXJlKCcuL19jb3JlJylcbiAgLCBMSUJSQVJZICAgICAgICA9IHJlcXVpcmUoJy4vX2xpYnJhcnknKVxuICAsIHdrc0V4dCAgICAgICAgID0gcmVxdWlyZSgnLi9fd2tzLWV4dCcpXG4gICwgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcbiAgdmFyICRTeW1ib2wgPSBjb3JlLlN5bWJvbCB8fCAoY29yZS5TeW1ib2wgPSBMSUJSQVJZID8ge30gOiBnbG9iYWwuU3ltYm9sIHx8IHt9KTtcbiAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fd2tzLWRlZmluZS5qc1xuICoqIG1vZHVsZSBpZCA9IDY5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZhbHNlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fbGlicmFyeS5qc1xuICoqIG1vZHVsZSBpZCA9IDcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgZ2V0S2V5cyAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKVxuICAsIHRvSU9iamVjdCA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBlbCl7XG4gIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KVxuICAgICwga2V5cyAgID0gZ2V0S2V5cyhPKVxuICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGhcbiAgICAsIGluZGV4ICA9IDBcbiAgICAsIGtleTtcbiAgd2hpbGUobGVuZ3RoID4gaW5kZXgpaWYoT1trZXkgPSBrZXlzW2luZGV4KytdXSA9PT0gZWwpcmV0dXJuIGtleTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19rZXlvZi5qc1xuICoqIG1vZHVsZSBpZCA9IDcxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTylcbnZhciAka2V5cyAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzLWludGVybmFsJylcbiAgLCBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4vX2VudW0tYnVnLWtleXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pe1xuICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gNzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBoYXMgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIHRvSU9iamVjdCAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKVxuICAsIGFycmF5SW5kZXhPZiA9IHJlcXVpcmUoJy4vX2FycmF5LWluY2x1ZGVzJykoZmFsc2UpXG4gICwgSUVfUFJPVE8gICAgID0gcmVxdWlyZSgnLi9fc2hhcmVkLWtleScpKCdJRV9QUk9UTycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgbmFtZXMpe1xuICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdClcbiAgICAsIGkgICAgICA9IDBcbiAgICAsIHJlc3VsdCA9IFtdXG4gICAgLCBrZXk7XG4gIGZvcihrZXkgaW4gTylpZihrZXkgIT0gSUVfUFJPVE8paGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTtcbiAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5c1xuICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKWlmKGhhcyhPLCBrZXkgPSBuYW1lc1tpKytdKSl7XG4gICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1rZXlzLWludGVybmFsLmpzXG4gKiogbW9kdWxlIGlkID0gNzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5nc1xudmFyIElPYmplY3QgPSByZXF1aXJlKCcuL19pb2JqZWN0JylcbiAgLCBkZWZpbmVkID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBJT2JqZWN0KGRlZmluZWQoaXQpKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL190by1pb2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gNzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXG52YXIgY29mID0gcmVxdWlyZSgnLi9fY29mJyk7XG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9faW9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fY29mLmpzXG4gKiogbW9kdWxlIGlkID0gNzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYoaXQgPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2RlZmluZWQuanNcbiAqKiBtb2R1bGUgaWQgPSA3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZlxuLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXNcbnZhciB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCB0b0xlbmd0aCAgPSByZXF1aXJlKCcuL190by1sZW5ndGgnKVxuICAsIHRvSW5kZXggICA9IHJlcXVpcmUoJy4vX3RvLWluZGV4Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKElTX0lOQ0xVREVTKXtcbiAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBlbCwgZnJvbUluZGV4KXtcbiAgICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KCR0aGlzKVxuICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aClcbiAgICAgICwgaW5kZXggID0gdG9JbmRleChmcm9tSW5kZXgsIGxlbmd0aClcbiAgICAgICwgdmFsdWU7XG4gICAgLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobVxuICAgIGlmKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKXdoaWxlKGxlbmd0aCA+IGluZGV4KXtcbiAgICAgIHZhbHVlID0gT1tpbmRleCsrXTtcbiAgICAgIGlmKHZhbHVlICE9IHZhbHVlKXJldHVybiB0cnVlO1xuICAgIC8vIEFycmF5I3RvSW5kZXggaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3RcbiAgICB9IGVsc2UgZm9yKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKylpZihJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKXtcbiAgICAgIGlmKE9baW5kZXhdID09PSBlbClyZXR1cm4gSVNfSU5DTFVERVMgfHwgaW5kZXggfHwgMDtcbiAgICB9IHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fYXJyYXktaW5jbHVkZXMuanNcbiAqKiBtb2R1bGUgaWQgPSA3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gNy4xLjE1IFRvTGVuZ3RoXG52YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi9fdG8taW50ZWdlcicpXG4gICwgbWluICAgICAgID0gTWF0aC5taW47XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGl0ID4gMCA/IG1pbih0b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTFcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL190by1sZW5ndGguanNcbiAqKiBtb2R1bGUgaWQgPSA3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gNy4xLjQgVG9JbnRlZ2VyXG52YXIgY2VpbCAgPSBNYXRoLmNlaWxcbiAgLCBmbG9vciA9IE1hdGguZmxvb3I7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGlzTmFOKGl0ID0gK2l0KSA/IDAgOiAoaXQgPiAwID8gZmxvb3IgOiBjZWlsKShpdCk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fdG8taW50ZWdlci5qc1xuICoqIG1vZHVsZSBpZCA9IDgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi9fdG8taW50ZWdlcicpXG4gICwgbWF4ICAgICAgID0gTWF0aC5tYXhcbiAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW5kZXgsIGxlbmd0aCl7XG4gIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTtcbiAgcmV0dXJuIGluZGV4IDwgMCA/IG1heChpbmRleCArIGxlbmd0aCwgMCkgOiBtaW4oaW5kZXgsIGxlbmd0aCk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fdG8taW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA4MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIHNoYXJlZCA9IHJlcXVpcmUoJy4vX3NoYXJlZCcpKCdrZXlzJylcbiAgLCB1aWQgICAgPSByZXF1aXJlKCcuL191aWQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcbiAgcmV0dXJuIHNoYXJlZFtrZXldIHx8IChzaGFyZWRba2V5XSA9IHVpZChrZXkpKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19zaGFyZWQta2V5LmpzXG4gKiogbW9kdWxlIGlkID0gODJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXNcbm1vZHVsZS5leHBvcnRzID0gKFxuICAnY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mJ1xuKS5zcGxpdCgnLCcpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fZW51bS1idWcta2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDgzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9sc1xudmFyIGdldEtleXMgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpXG4gICwgZ09QUyAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BzJylcbiAgLCBwSUUgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHZhciByZXN1bHQgICAgID0gZ2V0S2V5cyhpdClcbiAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmY7XG4gIGlmKGdldFN5bWJvbHMpe1xuICAgIHZhciBzeW1ib2xzID0gZ2V0U3ltYm9scyhpdClcbiAgICAgICwgaXNFbnVtICA9IHBJRS5mXG4gICAgICAsIGkgICAgICAgPSAwXG4gICAgICAsIGtleTtcbiAgICB3aGlsZShzeW1ib2xzLmxlbmd0aCA+IGkpaWYoaXNFbnVtLmNhbGwoaXQsIGtleSA9IHN5bWJvbHNbaSsrXSkpcmVzdWx0LnB1c2goa2V5KTtcbiAgfSByZXR1cm4gcmVzdWx0O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2VudW0ta2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWdvcHMuanNcbiAqKiBtb2R1bGUgaWQgPSA4NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiZXhwb3J0cy5mID0ge30ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19vYmplY3QtcGllLmpzXG4gKiogbW9kdWxlIGlkID0gODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpXG52YXIgY29mID0gcmVxdWlyZSgnLi9fY29mJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gaXNBcnJheShhcmcpe1xuICByZXR1cm4gY29mKGFyZykgPT0gJ0FycmF5Jztcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19pcy1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSlcbnZhciBhbk9iamVjdCAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgZFBzICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHBzJylcbiAgLCBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4vX2VudW0tYnVnLWtleXMnKVxuICAsIElFX1BST1RPICAgID0gcmVxdWlyZSgnLi9fc2hhcmVkLWtleScpKCdJRV9QUk9UTycpXG4gICwgRW1wdHkgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9XG4gICwgUFJPVE9UWVBFICAgPSAncHJvdG90eXBlJztcblxuLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZVxudmFyIGNyZWF0ZURpY3QgPSBmdW5jdGlvbigpe1xuICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Z1xuICB2YXIgaWZyYW1lID0gcmVxdWlyZSgnLi9fZG9tLWNyZWF0ZScpKCdpZnJhbWUnKVxuICAgICwgaSAgICAgID0gZW51bUJ1Z0tleXMubGVuZ3RoXG4gICAgLCBsdCAgICAgPSAnPCdcbiAgICAsIGd0ICAgICA9ICc+J1xuICAgICwgaWZyYW1lRG9jdW1lbnQ7XG4gIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICByZXF1aXJlKCcuL19odG1sJykuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybFxuICAvLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0O1xuICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gIGlmcmFtZURvY3VtZW50Lm9wZW4oKTtcbiAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpO1xuICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpO1xuICBjcmVhdGVEaWN0ID0gaWZyYW1lRG9jdW1lbnQuRjtcbiAgd2hpbGUoaS0tKWRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dO1xuICByZXR1cm4gY3JlYXRlRGljdCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKXtcbiAgdmFyIHJlc3VsdDtcbiAgaWYoTyAhPT0gbnVsbCl7XG4gICAgRW1wdHlbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pO1xuICAgIHJlc3VsdCA9IG5ldyBFbXB0eTtcbiAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDtcbiAgICAvLyBhZGQgXCJfX3Byb3RvX19cIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsXG4gICAgcmVzdWx0W0lFX1BST1RPXSA9IE87XG4gIH0gZWxzZSByZXN1bHQgPSBjcmVhdGVEaWN0KCk7XG4gIHJldHVybiBQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiBkUHMocmVzdWx0LCBQcm9wZXJ0aWVzKTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1jcmVhdGUuanNcbiAqKiBtb2R1bGUgaWQgPSA4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGRQICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJylcbiAgLCBhbk9iamVjdCA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgZ2V0S2V5cyAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcyl7XG4gIGFuT2JqZWN0KE8pO1xuICB2YXIga2V5cyAgID0gZ2V0S2V5cyhQcm9wZXJ0aWVzKVxuICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGhcbiAgICAsIGkgPSAwXG4gICAgLCBQO1xuICB3aGlsZShsZW5ndGggPiBpKWRQLmYoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7XG4gIHJldHVybiBPO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1kcHMuanNcbiAqKiBtb2R1bGUgaWQgPSA4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5kb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19odG1sLmpzXG4gKiogbW9kdWxlIGlkID0gOTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIGZhbGxiYWNrIGZvciBJRTExIGJ1Z2d5IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHdpdGggaWZyYW1lIGFuZCB3aW5kb3dcbnZhciB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCBnT1BOICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpLmZcbiAgLCB0b1N0cmluZyAgPSB7fS50b1N0cmluZztcblxudmFyIHdpbmRvd05hbWVzID0gdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyAmJiB3aW5kb3cgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXNcbiAgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpIDogW107XG5cbnZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uKGl0KXtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZ09QTihpdCk7XG4gIH0gY2F0Y2goZSl7XG4gICAgcmV0dXJuIHdpbmRvd05hbWVzLnNsaWNlKCk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXtcbiAgcmV0dXJuIHdpbmRvd05hbWVzICYmIHRvU3RyaW5nLmNhbGwoaXQpID09ICdbb2JqZWN0IFdpbmRvd10nID8gZ2V0V2luZG93TmFtZXMoaXQpIDogZ09QTih0b0lPYmplY3QoaXQpKTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1nb3BuLWV4dC5qc1xuICoqIG1vZHVsZSBpZCA9IDkxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pXG52YXIgJGtleXMgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzLWludGVybmFsJylcbiAgLCBoaWRkZW5LZXlzID0gcmVxdWlyZSgnLi9fZW51bS1idWcta2V5cycpLmNvbmNhdCgnbGVuZ3RoJywgJ3Byb3RvdHlwZScpO1xuXG5leHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pe1xuICByZXR1cm4gJGtleXMoTywgaGlkZGVuS2V5cyk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWdvcG4uanNcbiAqKiBtb2R1bGUgaWQgPSA5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIHBJRSAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpXG4gICwgY3JlYXRlRGVzYyAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCB0b0lPYmplY3QgICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKVxuICAsIHRvUHJpbWl0aXZlICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJylcbiAgLCBoYXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuL19pZTgtZG9tLWRlZmluZScpXG4gICwgZ09QRCAgICAgICAgICAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXG5leHBvcnRzLmYgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gZ09QRCA6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKXtcbiAgTyA9IHRvSU9iamVjdChPKTtcbiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpO1xuICBpZihJRThfRE9NX0RFRklORSl0cnkge1xuICAgIHJldHVybiBnT1BEKE8sIFApO1xuICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG4gIGlmKGhhcyhPLCBQKSlyZXR1cm4gY3JlYXRlRGVzYyghcElFLmYuY2FsbChPLCBQKSwgT1tQXSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWdvcGQuanNcbiAqKiBtb2R1bGUgaWQgPSA5M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtjcmVhdGU6IHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmNyZWF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcylcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJyksICdPYmplY3QnLCB7ZGVmaW5lUHJvcGVydHk6IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmZ9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSA5NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcbi8vIDE5LjEuMi4zIC8gMTUuMi4zLjcgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcylcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJyksICdPYmplY3QnLCB7ZGVmaW5lUHJvcGVydGllczogcmVxdWlyZSgnLi9fb2JqZWN0LWRwcycpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMuanNcbiAqKiBtb2R1bGUgaWQgPSA5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKVxudmFyIHRvSU9iamVjdCAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKS5mO1xuXG5yZXF1aXJlKCcuL19vYmplY3Qtc2FwJykoJ2dldE93blByb3BlcnR5RGVzY3JpcHRvcicsIGZ1bmN0aW9uKCl7XG4gIHJldHVybiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7XG4gICAgcmV0dXJuICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodG9JT2JqZWN0KGl0KSwga2V5KTtcbiAgfTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qc1xuICoqIG1vZHVsZSBpZCA9IDk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXNcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBjb3JlICAgID0gcmVxdWlyZSgnLi9fY29yZScpXG4gICwgZmFpbHMgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSwgZXhlYyl7XG4gIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV1cbiAgICAsIGV4cCA9IHt9O1xuICBleHBbS0VZXSA9IGV4ZWMoZm4pO1xuICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LXNhcC5qc1xuICoqIG1vZHVsZSBpZCA9IDk4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTylcbnZhciB0b09iamVjdCAgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsICRnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKTtcblxucmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdnZXRQcm90b3R5cGVPZicsIGZ1bmN0aW9uKCl7XG4gIHJldHVybiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihpdCl7XG4gICAgcmV0dXJuICRnZXRQcm90b3R5cGVPZih0b09iamVjdChpdCkpO1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZi5qc1xuICoqIG1vZHVsZSBpZCA9IDk5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpXG52YXIgZGVmaW5lZCA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL190by1vYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pXG52YXIgaGFzICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIHRvT2JqZWN0ICAgID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JylcbiAgLCBJRV9QUk9UTyAgICA9IHJlcXVpcmUoJy4vX3NoYXJlZC1rZXknKSgnSUVfUFJPVE8nKVxuICAsIE9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24oTyl7XG4gIE8gPSB0b09iamVjdChPKTtcbiAgaWYoaGFzKE8sIElFX1BST1RPKSlyZXR1cm4gT1tJRV9QUk9UT107XG4gIGlmKHR5cGVvZiBPLmNvbnN0cnVjdG9yID09ICdmdW5jdGlvbicgJiYgTyBpbnN0YW5jZW9mIE8uY29uc3RydWN0b3Ipe1xuICAgIHJldHVybiBPLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcbiAgfSByZXR1cm4gTyBpbnN0YW5jZW9mIE9iamVjdCA/IE9iamVjdFByb3RvIDogbnVsbDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19vYmplY3QtZ3BvLmpzXG4gKiogbW9kdWxlIGlkID0gMTAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTylcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgJGtleXMgICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpO1xuXG5yZXF1aXJlKCcuL19vYmplY3Qtc2FwJykoJ2tleXMnLCBmdW5jdGlvbigpe1xuICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7XG4gICAgcmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSk7XG4gIH07XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMTAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKVxucmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdnZXRPd25Qcm9wZXJ0eU5hbWVzJywgZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHJlcXVpcmUoJy4vX29iamVjdC1nb3BuLWV4dCcpLmY7XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LW5hbWVzLmpzXG4gKiogbW9kdWxlIGlkID0gMTAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuNSBPYmplY3QuZnJlZXplKE8pXG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIG1ldGEgICAgID0gcmVxdWlyZSgnLi9fbWV0YScpLm9uRnJlZXplO1xuXG5yZXF1aXJlKCcuL19vYmplY3Qtc2FwJykoJ2ZyZWV6ZScsIGZ1bmN0aW9uKCRmcmVlemUpe1xuICByZXR1cm4gZnVuY3Rpb24gZnJlZXplKGl0KXtcbiAgICByZXR1cm4gJGZyZWV6ZSAmJiBpc09iamVjdChpdCkgPyAkZnJlZXplKG1ldGEoaXQpKSA6IGl0O1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuZnJlZXplLmpzXG4gKiogbW9kdWxlIGlkID0gMTA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuMTcgT2JqZWN0LnNlYWwoTylcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgbWV0YSAgICAgPSByZXF1aXJlKCcuL19tZXRhJykub25GcmVlemU7XG5cbnJlcXVpcmUoJy4vX29iamVjdC1zYXAnKSgnc2VhbCcsIGZ1bmN0aW9uKCRzZWFsKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIHNlYWwoaXQpe1xuICAgIHJldHVybiAkc2VhbCAmJiBpc09iamVjdChpdCkgPyAkc2VhbChtZXRhKGl0KSkgOiBpdDtcbiAgfTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LnNlYWwuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDE5LjEuMi4xNSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoTylcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgbWV0YSAgICAgPSByZXF1aXJlKCcuL19tZXRhJykub25GcmVlemU7XG5cbnJlcXVpcmUoJy4vX29iamVjdC1zYXAnKSgncHJldmVudEV4dGVuc2lvbnMnLCBmdW5jdGlvbigkcHJldmVudEV4dGVuc2lvbnMpe1xuICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEV4dGVuc2lvbnMoaXQpe1xuICAgIHJldHVybiAkcHJldmVudEV4dGVuc2lvbnMgJiYgaXNPYmplY3QoaXQpID8gJHByZXZlbnRFeHRlbnNpb25zKG1ldGEoaXQpKSA6IGl0O1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QucHJldmVudC1leHRlbnNpb25zLmpzXG4gKiogbW9kdWxlIGlkID0gMTA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAxOS4xLjIuMTIgT2JqZWN0LmlzRnJvemVuKE8pXG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTtcblxucmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdpc0Zyb3plbicsIGZ1bmN0aW9uKCRpc0Zyb3plbil7XG4gIHJldHVybiBmdW5jdGlvbiBpc0Zyb3plbihpdCl7XG4gICAgcmV0dXJuIGlzT2JqZWN0KGl0KSA/ICRpc0Zyb3plbiA/ICRpc0Zyb3plbihpdCkgOiBmYWxzZSA6IHRydWU7XG4gIH07XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5pcy1mcm96ZW4uanNcbiAqKiBtb2R1bGUgaWQgPSAxMDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDE5LjEuMi4xMyBPYmplY3QuaXNTZWFsZWQoTylcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xuXG5yZXF1aXJlKCcuL19vYmplY3Qtc2FwJykoJ2lzU2VhbGVkJywgZnVuY3Rpb24oJGlzU2VhbGVkKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGlzU2VhbGVkKGl0KXtcbiAgICByZXR1cm4gaXNPYmplY3QoaXQpID8gJGlzU2VhbGVkID8gJGlzU2VhbGVkKGl0KSA6IGZhbHNlIDogdHJ1ZTtcbiAgfTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmlzLXNlYWxlZC5qc1xuICoqIG1vZHVsZSBpZCA9IDEwOFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMTkuMS4yLjExIE9iamVjdC5pc0V4dGVuc2libGUoTylcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpO1xuXG5yZXF1aXJlKCcuL19vYmplY3Qtc2FwJykoJ2lzRXh0ZW5zaWJsZScsIGZ1bmN0aW9uKCRpc0V4dGVuc2libGUpe1xuICByZXR1cm4gZnVuY3Rpb24gaXNFeHRlbnNpYmxlKGl0KXtcbiAgICByZXR1cm4gaXNPYmplY3QoaXQpID8gJGlzRXh0ZW5zaWJsZSA/ICRpc0V4dGVuc2libGUoaXQpIDogdHJ1ZSA6IGZhbHNlO1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuaXMtZXh0ZW5zaWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEwOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMTkuMS4zLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSlcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GLCAnT2JqZWN0Jywge2Fzc2lnbjogcmVxdWlyZSgnLi9fb2JqZWN0LWFzc2lnbicpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduLmpzXG4gKiogbW9kdWxlIGlkID0gMTEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pXG52YXIgZ2V0S2V5cyAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpXG4gICwgZ09QUyAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpXG4gICwgcElFICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtcGllJylcbiAgLCB0b09iamVjdCA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgSU9iamVjdCAgPSByZXF1aXJlKCcuL19pb2JqZWN0JylcbiAgLCAkYXNzaWduICA9IE9iamVjdC5hc3NpZ247XG5cbi8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKVxubW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHZhciBBID0ge31cbiAgICAsIEIgPSB7fVxuICAgICwgUyA9IFN5bWJvbCgpXG4gICAgLCBLID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JztcbiAgQVtTXSA9IDc7XG4gIEsuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24oayl7IEJba10gPSBrOyB9KTtcbiAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7XG59KSA/IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZSl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgdmFyIFQgICAgID0gdG9PYmplY3QodGFyZ2V0KVxuICAgICwgYUxlbiAgPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgLCBpbmRleCA9IDFcbiAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmZcbiAgICAsIGlzRW51bSAgICAgPSBwSUUuZjtcbiAgd2hpbGUoYUxlbiA+IGluZGV4KXtcbiAgICB2YXIgUyAgICAgID0gSU9iamVjdChhcmd1bWVudHNbaW5kZXgrK10pXG4gICAgICAsIGtleXMgICA9IGdldFN5bWJvbHMgPyBnZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKSA6IGdldEtleXMoUylcbiAgICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGhcbiAgICAgICwgaiAgICAgID0gMFxuICAgICAgLCBrZXk7XG4gICAgd2hpbGUobGVuZ3RoID4gailpZihpc0VudW0uY2FsbChTLCBrZXkgPSBrZXlzW2orK10pKVRba2V5XSA9IFNba2V5XTtcbiAgfSByZXR1cm4gVDtcbn0gOiAkYXNzaWduO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWFzc2lnbi5qc1xuICoqIG1vZHVsZSBpZCA9IDExMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMTkuMS4zLjEwIE9iamVjdC5pcyh2YWx1ZTEsIHZhbHVlMilcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtpczogcmVxdWlyZSgnLi9fc2FtZS12YWx1ZScpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuaXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDcuMi45IFNhbWVWYWx1ZSh4LCB5KVxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuaXMgfHwgZnVuY3Rpb24gaXMoeCwgeSl7XG4gIHJldHVybiB4ID09PSB5ID8geCAhPT0gMCB8fCAxIC8geCA9PT0gMSAvIHkgOiB4ICE9IHggJiYgeSAhPSB5O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3NhbWUtdmFsdWUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDE5LjEuMy4xOSBPYmplY3Quc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7c2V0UHJvdG90eXBlT2Y6IHJlcXVpcmUoJy4vX3NldC1wcm90bycpLnNldH0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLlxuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTtcbnZhciBjaGVjayA9IGZ1bmN0aW9uKE8sIHByb3RvKXtcbiAgYW5PYmplY3QoTyk7XG4gIGlmKCFpc09iamVjdChwcm90bykgJiYgcHJvdG8gIT09IG51bGwpdGhyb3cgVHlwZUVycm9yKHByb3RvICsgXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpO1xufTtcbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoJ19fcHJvdG9fXycgaW4ge30gPyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgZnVuY3Rpb24odGVzdCwgYnVnZ3ksIHNldCl7XG4gICAgICB0cnkge1xuICAgICAgICBzZXQgPSByZXF1aXJlKCcuL19jdHgnKShGdW5jdGlvbi5jYWxsLCByZXF1aXJlKCcuL19vYmplY3QtZ29wZCcpLmYoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCwgMik7XG4gICAgICAgIHNldCh0ZXN0LCBbXSk7XG4gICAgICAgIGJ1Z2d5ID0gISh0ZXN0IGluc3RhbmNlb2YgQXJyYXkpO1xuICAgICAgfSBjYXRjaChlKXsgYnVnZ3kgPSB0cnVlOyB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pe1xuICAgICAgICBjaGVjayhPLCBwcm90byk7XG4gICAgICAgIGlmKGJ1Z2d5KU8uX19wcm90b19fID0gcHJvdG87XG4gICAgICAgIGVsc2Ugc2V0KE8sIHByb3RvKTtcbiAgICAgICAgcmV0dXJuIE87XG4gICAgICB9O1xuICAgIH0oe30sIGZhbHNlKSA6IHVuZGVmaW5lZCksXG4gIGNoZWNrOiBjaGVja1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3NldC1wcm90by5qc1xuICoqIG1vZHVsZSBpZCA9IDExNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpXG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4vX2NsYXNzb2YnKVxuICAsIHRlc3QgICAgPSB7fTtcbnRlc3RbcmVxdWlyZSgnLi9fd2tzJykoJ3RvU3RyaW5nVGFnJyldID0gJ3onO1xuaWYodGVzdCArICcnICE9ICdbb2JqZWN0IHpdJyl7XG4gIHJlcXVpcmUoJy4vX3JlZGVmaW5lJykoT2JqZWN0LnByb3RvdHlwZSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKXtcbiAgICByZXR1cm4gJ1tvYmplY3QgJyArIGNsYXNzb2YodGhpcykgKyAnXSc7XG4gIH0sIHRydWUpO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDExNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKClcbnZhciBjb2YgPSByZXF1aXJlKCcuL19jb2YnKVxuICAsIFRBRyA9IHJlcXVpcmUoJy4vX3drcycpKCd0b1N0cmluZ1RhZycpXG4gIC8vIEVTMyB3cm9uZyBoZXJlXG4gICwgQVJHID0gY29mKGZ1bmN0aW9uKCl7IHJldHVybiBhcmd1bWVudHM7IH0oKSkgPT0gJ0FyZ3VtZW50cyc7XG5cbi8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yXG52YXIgdHJ5R2V0ID0gZnVuY3Rpb24oaXQsIGtleSl7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGl0W2tleV07XG4gIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICB2YXIgTywgVCwgQjtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnXG4gICAgLy8gQEB0b1N0cmluZ1RhZyBjYXNlXG4gICAgOiB0eXBlb2YgKFQgPSB0cnlHZXQoTyA9IE9iamVjdChpdCksIFRBRykpID09ICdzdHJpbmcnID8gVFxuICAgIC8vIGJ1aWx0aW5UYWcgY2FzZVxuICAgIDogQVJHID8gY29mKE8pXG4gICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFja1xuICAgIDogKEIgPSBjb2YoTykpID09ICdPYmplY3QnICYmIHR5cGVvZiBPLmNhbGxlZSA9PSAnZnVuY3Rpb24nID8gJ0FyZ3VtZW50cycgOiBCO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2NsYXNzb2YuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDE5LjIuMy4yIC8gMTUuMy40LjUgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQodGhpc0FyZywgYXJncy4uLilcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnRnVuY3Rpb24nLCB7YmluZDogcmVxdWlyZSgnLi9fYmluZCcpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5mdW5jdGlvbi5iaW5kLmpzXG4gKiogbW9kdWxlIGlkID0gMTE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgYUZ1bmN0aW9uICA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKVxuICAsIGlzT2JqZWN0ICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGludm9rZSAgICAgPSByZXF1aXJlKCcuL19pbnZva2UnKVxuICAsIGFycmF5U2xpY2UgPSBbXS5zbGljZVxuICAsIGZhY3RvcmllcyAgPSB7fTtcblxudmFyIGNvbnN0cnVjdCA9IGZ1bmN0aW9uKEYsIGxlbiwgYXJncyl7XG4gIGlmKCEobGVuIGluIGZhY3Rvcmllcykpe1xuICAgIGZvcih2YXIgbiA9IFtdLCBpID0gMDsgaSA8IGxlbjsgaSsrKW5baV0gPSAnYVsnICsgaSArICddJztcbiAgICBmYWN0b3JpZXNbbGVuXSA9IEZ1bmN0aW9uKCdGLGEnLCAncmV0dXJuIG5ldyBGKCcgKyBuLmpvaW4oJywnKSArICcpJyk7XG4gIH0gcmV0dXJuIGZhY3Rvcmllc1tsZW5dKEYsIGFyZ3MpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBGdW5jdGlvbi5iaW5kIHx8IGZ1bmN0aW9uIGJpbmQodGhhdCAvKiwgYXJncy4uLiAqLyl7XG4gIHZhciBmbiAgICAgICA9IGFGdW5jdGlvbih0aGlzKVxuICAgICwgcGFydEFyZ3MgPSBhcnJheVNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgdmFyIGJvdW5kID0gZnVuY3Rpb24oLyogYXJncy4uLiAqLyl7XG4gICAgdmFyIGFyZ3MgPSBwYXJ0QXJncy5jb25jYXQoYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgYm91bmQgPyBjb25zdHJ1Y3QoZm4sIGFyZ3MubGVuZ3RoLCBhcmdzKSA6IGludm9rZShmbiwgYXJncywgdGhhdCk7XG4gIH07XG4gIGlmKGlzT2JqZWN0KGZuLnByb3RvdHlwZSkpYm91bmQucHJvdG90eXBlID0gZm4ucHJvdG90eXBlO1xuICByZXR1cm4gYm91bmQ7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fYmluZC5qc1xuICoqIG1vZHVsZSBpZCA9IDExOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCBhcmdzLCB0aGF0KXtcbiAgdmFyIHVuID0gdGhhdCA9PT0gdW5kZWZpbmVkO1xuICBzd2l0Y2goYXJncy5sZW5ndGgpe1xuICAgIGNhc2UgMDogcmV0dXJuIHVuID8gZm4oKVxuICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0KTtcbiAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pO1xuICAgIGNhc2UgMjogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgY2FzZSAzOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKVxuICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pO1xuICB9IHJldHVybiAgICAgICAgICAgICAgZm4uYXBwbHkodGhhdCwgYXJncyk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9faW52b2tlLmpzXG4gKiogbW9kdWxlIGlkID0gMTIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgZFAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmZcbiAgLCBjcmVhdGVEZXNjID0gcmVxdWlyZSgnLi9fcHJvcGVydHktZGVzYycpXG4gICwgaGFzICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgRlByb3RvICAgICA9IEZ1bmN0aW9uLnByb3RvdHlwZVxuICAsIG5hbWVSRSAgICAgPSAvXlxccypmdW5jdGlvbiAoW14gKF0qKS9cbiAgLCBOQU1FICAgICAgID0gJ25hbWUnO1xuXG52YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbigpe1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8vIDE5LjIuNC4yIG5hbWVcbk5BTUUgaW4gRlByb3RvIHx8IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgZFAoRlByb3RvLCBOQU1FLCB7XG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpe1xuICAgIHRyeSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXNcbiAgICAgICAgLCBuYW1lID0gKCcnICsgdGhhdCkubWF0Y2gobmFtZVJFKVsxXTtcbiAgICAgIGhhcyh0aGF0LCBOQU1FKSB8fCAhaXNFeHRlbnNpYmxlKHRoYXQpIHx8IGRQKHRoYXQsIE5BTUUsIGNyZWF0ZURlc2MoNSwgbmFtZSkpO1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuZnVuY3Rpb24ubmFtZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGlzT2JqZWN0ICAgICAgID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JylcbiAgLCBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKVxuICAsIEhBU19JTlNUQU5DRSAgID0gcmVxdWlyZSgnLi9fd2tzJykoJ2hhc0luc3RhbmNlJylcbiAgLCBGdW5jdGlvblByb3RvICA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbi8vIDE5LjIuMy42IEZ1bmN0aW9uLnByb3RvdHlwZVtAQGhhc0luc3RhbmNlXShWKVxuaWYoIShIQVNfSU5TVEFOQ0UgaW4gRnVuY3Rpb25Qcm90bykpcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZihGdW5jdGlvblByb3RvLCBIQVNfSU5TVEFOQ0UsIHt2YWx1ZTogZnVuY3Rpb24oTyl7XG4gIGlmKHR5cGVvZiB0aGlzICE9ICdmdW5jdGlvbicgfHwgIWlzT2JqZWN0KE8pKXJldHVybiBmYWxzZTtcbiAgaWYoIWlzT2JqZWN0KHRoaXMucHJvdG90eXBlKSlyZXR1cm4gTyBpbnN0YW5jZW9mIHRoaXM7XG4gIC8vIGZvciBlbnZpcm9ubWVudCB3L28gbmF0aXZlIGBAQGhhc0luc3RhbmNlYCBsb2dpYyBlbm91Z2ggYGluc3RhbmNlb2ZgLCBidXQgYWRkIHRoaXM6XG4gIHdoaWxlKE8gPSBnZXRQcm90b3R5cGVPZihPKSlpZih0aGlzLnByb3RvdHlwZSA9PT0gTylyZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuZnVuY3Rpb24uaGFzLWluc3RhbmNlLmpzXG4gKiogbW9kdWxlIGlkID0gMTIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkcGFyc2VJbnQgPSByZXF1aXJlKCcuL19wYXJzZS1pbnQnKTtcbi8vIDE4LjIuNSBwYXJzZUludChzdHJpbmcsIHJhZGl4KVxuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkYgKiAocGFyc2VJbnQgIT0gJHBhcnNlSW50KSwge3BhcnNlSW50OiAkcGFyc2VJbnR9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnBhcnNlLWludC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRwYXJzZUludCA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLnBhcnNlSW50XG4gICwgJHRyaW0gICAgID0gcmVxdWlyZSgnLi9fc3RyaW5nLXRyaW0nKS50cmltXG4gICwgd3MgICAgICAgID0gcmVxdWlyZSgnLi9fc3RyaW5nLXdzJylcbiAgLCBoZXggICAgICAgPSAvXltcXC0rXT8wW3hYXS87XG5cbm1vZHVsZS5leHBvcnRzID0gJHBhcnNlSW50KHdzICsgJzA4JykgIT09IDggfHwgJHBhcnNlSW50KHdzICsgJzB4MTYnKSAhPT0gMjIgPyBmdW5jdGlvbiBwYXJzZUludChzdHIsIHJhZGl4KXtcbiAgdmFyIHN0cmluZyA9ICR0cmltKFN0cmluZyhzdHIpLCAzKTtcbiAgcmV0dXJuICRwYXJzZUludChzdHJpbmcsIChyYWRpeCA+Pj4gMCkgfHwgKGhleC50ZXN0KHN0cmluZykgPyAxNiA6IDEwKSk7XG59IDogJHBhcnNlSW50O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fcGFyc2UtaW50LmpzXG4gKiogbW9kdWxlIGlkID0gMTI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgZGVmaW5lZCA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKVxuICAsIGZhaWxzICAgPSByZXF1aXJlKCcuL19mYWlscycpXG4gICwgc3BhY2VzICA9IHJlcXVpcmUoJy4vX3N0cmluZy13cycpXG4gICwgc3BhY2UgICA9ICdbJyArIHNwYWNlcyArICddJ1xuICAsIG5vbiAgICAgPSAnXFx1MjAwYlxcdTAwODUnXG4gICwgbHRyaW0gICA9IFJlZ0V4cCgnXicgKyBzcGFjZSArIHNwYWNlICsgJyonKVxuICAsIHJ0cmltICAgPSBSZWdFeHAoc3BhY2UgKyBzcGFjZSArICcqJCcpO1xuXG52YXIgZXhwb3J0ZXIgPSBmdW5jdGlvbihLRVksIGV4ZWMsIEFMSUFTKXtcbiAgdmFyIGV4cCAgID0ge307XG4gIHZhciBGT1JDRSA9IGZhaWxzKGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuICEhc3BhY2VzW0tFWV0oKSB8fCBub25bS0VZXSgpICE9IG5vbjtcbiAgfSk7XG4gIHZhciBmbiA9IGV4cFtLRVldID0gRk9SQ0UgPyBleGVjKHRyaW0pIDogc3BhY2VzW0tFWV07XG4gIGlmKEFMSUFTKWV4cFtBTElBU10gPSBmbjtcbiAgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBGT1JDRSwgJ1N0cmluZycsIGV4cCk7XG59O1xuXG4vLyAxIC0+IFN0cmluZyN0cmltTGVmdFxuLy8gMiAtPiBTdHJpbmcjdHJpbVJpZ2h0XG4vLyAzIC0+IFN0cmluZyN0cmltXG52YXIgdHJpbSA9IGV4cG9ydGVyLnRyaW0gPSBmdW5jdGlvbihzdHJpbmcsIFRZUEUpe1xuICBzdHJpbmcgPSBTdHJpbmcoZGVmaW5lZChzdHJpbmcpKTtcbiAgaWYoVFlQRSAmIDEpc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UobHRyaW0sICcnKTtcbiAgaWYoVFlQRSAmIDIpc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UocnRyaW0sICcnKTtcbiAgcmV0dXJuIHN0cmluZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0ZXI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19zdHJpbmctdHJpbS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSAnXFx4MDlcXHgwQVxceDBCXFx4MENcXHgwRFxceDIwXFx4QTBcXHUxNjgwXFx1MTgwRVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDMnICtcbiAgJ1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMEFcXHUyMDJGXFx1MjA1RlxcdTMwMDBcXHUyMDI4XFx1MjAyOVxcdUZFRkYnO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fc3RyaW5nLXdzLmpzXG4gKiogbW9kdWxlIGlkID0gMTI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgJGV4cG9ydCAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRwYXJzZUZsb2F0ID0gcmVxdWlyZSgnLi9fcGFyc2UtZmxvYXQnKTtcbi8vIDE4LjIuNCBwYXJzZUZsb2F0KHN0cmluZylcbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5GICogKHBhcnNlRmxvYXQgIT0gJHBhcnNlRmxvYXQpLCB7cGFyc2VGbG9hdDogJHBhcnNlRmxvYXR9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnBhcnNlLWZsb2F0LmpzXG4gKiogbW9kdWxlIGlkID0gMTI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgJHBhcnNlRmxvYXQgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5wYXJzZUZsb2F0XG4gICwgJHRyaW0gICAgICAgPSByZXF1aXJlKCcuL19zdHJpbmctdHJpbScpLnRyaW07XG5cbm1vZHVsZS5leHBvcnRzID0gMSAvICRwYXJzZUZsb2F0KHJlcXVpcmUoJy4vX3N0cmluZy13cycpICsgJy0wJykgIT09IC1JbmZpbml0eSA/IGZ1bmN0aW9uIHBhcnNlRmxvYXQoc3RyKXtcbiAgdmFyIHN0cmluZyA9ICR0cmltKFN0cmluZyhzdHIpLCAzKVxuICAgICwgcmVzdWx0ID0gJHBhcnNlRmxvYXQoc3RyaW5nKTtcbiAgcmV0dXJuIHJlc3VsdCA9PT0gMCAmJiBzdHJpbmcuY2hhckF0KDApID09ICctJyA/IC0wIDogcmVzdWx0O1xufSA6ICRwYXJzZUZsb2F0O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fcGFyc2UtZmxvYXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgaGFzICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIGNvZiAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fY29mJylcbiAgLCBpbmhlcml0SWZSZXF1aXJlZCA9IHJlcXVpcmUoJy4vX2luaGVyaXQtaWYtcmVxdWlyZWQnKVxuICAsIHRvUHJpbWl0aXZlICAgICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJylcbiAgLCBmYWlscyAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJylcbiAgLCBnT1BOICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BuJykuZlxuICAsIGdPUEQgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKS5mXG4gICwgZFAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mXG4gICwgJHRyaW0gICAgICAgICAgICAgPSByZXF1aXJlKCcuL19zdHJpbmctdHJpbScpLnRyaW1cbiAgLCBOVU1CRVIgICAgICAgICAgICA9ICdOdW1iZXInXG4gICwgJE51bWJlciAgICAgICAgICAgPSBnbG9iYWxbTlVNQkVSXVxuICAsIEJhc2UgICAgICAgICAgICAgID0gJE51bWJlclxuICAsIHByb3RvICAgICAgICAgICAgID0gJE51bWJlci5wcm90b3R5cGVcbiAgLy8gT3BlcmEgfjEyIGhhcyBicm9rZW4gT2JqZWN0I3RvU3RyaW5nXG4gICwgQlJPS0VOX0NPRiAgICAgICAgPSBjb2YocmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpKHByb3RvKSkgPT0gTlVNQkVSXG4gICwgVFJJTSAgICAgICAgICAgICAgPSAndHJpbScgaW4gU3RyaW5nLnByb3RvdHlwZTtcblxuLy8gNy4xLjMgVG9OdW1iZXIoYXJndW1lbnQpXG52YXIgdG9OdW1iZXIgPSBmdW5jdGlvbihhcmd1bWVudCl7XG4gIHZhciBpdCA9IHRvUHJpbWl0aXZlKGFyZ3VtZW50LCBmYWxzZSk7XG4gIGlmKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyAmJiBpdC5sZW5ndGggPiAyKXtcbiAgICBpdCA9IFRSSU0gPyBpdC50cmltKCkgOiAkdHJpbShpdCwgMyk7XG4gICAgdmFyIGZpcnN0ID0gaXQuY2hhckNvZGVBdCgwKVxuICAgICAgLCB0aGlyZCwgcmFkaXgsIG1heENvZGU7XG4gICAgaWYoZmlyc3QgPT09IDQzIHx8IGZpcnN0ID09PSA0NSl7XG4gICAgICB0aGlyZCA9IGl0LmNoYXJDb2RlQXQoMik7XG4gICAgICBpZih0aGlyZCA9PT0gODggfHwgdGhpcmQgPT09IDEyMClyZXR1cm4gTmFOOyAvLyBOdW1iZXIoJysweDEnKSBzaG91bGQgYmUgTmFOLCBvbGQgVjggZml4XG4gICAgfSBlbHNlIGlmKGZpcnN0ID09PSA0OCl7XG4gICAgICBzd2l0Y2goaXQuY2hhckNvZGVBdCgxKSl7XG4gICAgICAgIGNhc2UgNjYgOiBjYXNlIDk4ICA6IHJhZGl4ID0gMjsgbWF4Q29kZSA9IDQ5OyBicmVhazsgLy8gZmFzdCBlcXVhbCAvXjBiWzAxXSskL2lcbiAgICAgICAgY2FzZSA3OSA6IGNhc2UgMTExIDogcmFkaXggPSA4OyBtYXhDb2RlID0gNTU7IGJyZWFrOyAvLyBmYXN0IGVxdWFsIC9eMG9bMC03XSskL2lcbiAgICAgICAgZGVmYXVsdCA6IHJldHVybiAraXQ7XG4gICAgICB9XG4gICAgICBmb3IodmFyIGRpZ2l0cyA9IGl0LnNsaWNlKDIpLCBpID0gMCwgbCA9IGRpZ2l0cy5sZW5ndGgsIGNvZGU7IGkgPCBsOyBpKyspe1xuICAgICAgICBjb2RlID0gZGlnaXRzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIC8vIHBhcnNlSW50IHBhcnNlcyBhIHN0cmluZyB0byBhIGZpcnN0IHVuYXZhaWxhYmxlIHN5bWJvbFxuICAgICAgICAvLyBidXQgVG9OdW1iZXIgc2hvdWxkIHJldHVybiBOYU4gaWYgYSBzdHJpbmcgY29udGFpbnMgdW5hdmFpbGFibGUgc3ltYm9sc1xuICAgICAgICBpZihjb2RlIDwgNDggfHwgY29kZSA+IG1heENvZGUpcmV0dXJuIE5hTjtcbiAgICAgIH0gcmV0dXJuIHBhcnNlSW50KGRpZ2l0cywgcmFkaXgpO1xuICAgIH1cbiAgfSByZXR1cm4gK2l0O1xufTtcblxuaWYoISROdW1iZXIoJyAwbzEnKSB8fCAhJE51bWJlcignMGIxJykgfHwgJE51bWJlcignKzB4MScpKXtcbiAgJE51bWJlciA9IGZ1bmN0aW9uIE51bWJlcih2YWx1ZSl7XG4gICAgdmFyIGl0ID0gYXJndW1lbnRzLmxlbmd0aCA8IDEgPyAwIDogdmFsdWVcbiAgICAgICwgdGhhdCA9IHRoaXM7XG4gICAgcmV0dXJuIHRoYXQgaW5zdGFuY2VvZiAkTnVtYmVyXG4gICAgICAvLyBjaGVjayBvbiAxLi5jb25zdHJ1Y3Rvcihmb28pIGNhc2VcbiAgICAgICYmIChCUk9LRU5fQ09GID8gZmFpbHMoZnVuY3Rpb24oKXsgcHJvdG8udmFsdWVPZi5jYWxsKHRoYXQpOyB9KSA6IGNvZih0aGF0KSAhPSBOVU1CRVIpXG4gICAgICAgID8gaW5oZXJpdElmUmVxdWlyZWQobmV3IEJhc2UodG9OdW1iZXIoaXQpKSwgdGhhdCwgJE51bWJlcikgOiB0b051bWJlcihpdCk7XG4gIH07XG4gIGZvcih2YXIga2V5cyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgPyBnT1BOKEJhc2UpIDogKFxuICAgIC8vIEVTMzpcbiAgICAnTUFYX1ZBTFVFLE1JTl9WQUxVRSxOYU4sTkVHQVRJVkVfSU5GSU5JVFksUE9TSVRJVkVfSU5GSU5JVFksJyArXG4gICAgLy8gRVM2IChpbiBjYXNlLCBpZiBtb2R1bGVzIHdpdGggRVM2IE51bWJlciBzdGF0aWNzIHJlcXVpcmVkIGJlZm9yZSk6XG4gICAgJ0VQU0lMT04saXNGaW5pdGUsaXNJbnRlZ2VyLGlzTmFOLGlzU2FmZUludGVnZXIsTUFYX1NBRkVfSU5URUdFUiwnICtcbiAgICAnTUlOX1NBRkVfSU5URUdFUixwYXJzZUZsb2F0LHBhcnNlSW50LGlzSW50ZWdlcidcbiAgKS5zcGxpdCgnLCcpLCBqID0gMCwga2V5OyBrZXlzLmxlbmd0aCA+IGo7IGorKyl7XG4gICAgaWYoaGFzKEJhc2UsIGtleSA9IGtleXNbal0pICYmICFoYXMoJE51bWJlciwga2V5KSl7XG4gICAgICBkUCgkTnVtYmVyLCBrZXksIGdPUEQoQmFzZSwga2V5KSk7XG4gICAgfVxuICB9XG4gICROdW1iZXIucHJvdG90eXBlID0gcHJvdG87XG4gIHByb3RvLmNvbnN0cnVjdG9yID0gJE51bWJlcjtcbiAgcmVxdWlyZSgnLi9fcmVkZWZpbmUnKShnbG9iYWwsIE5VTUJFUiwgJE51bWJlcik7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5udW1iZXIuY29uc3RydWN0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBpc09iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuL19zZXQtcHJvdG8nKS5zZXQ7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRoYXQsIHRhcmdldCwgQyl7XG4gIHZhciBQLCBTID0gdGFyZ2V0LmNvbnN0cnVjdG9yO1xuICBpZihTICE9PSBDICYmIHR5cGVvZiBTID09ICdmdW5jdGlvbicgJiYgKFAgPSBTLnByb3RvdHlwZSkgIT09IEMucHJvdG90eXBlICYmIGlzT2JqZWN0KFApICYmIHNldFByb3RvdHlwZU9mKXtcbiAgICBzZXRQcm90b3R5cGVPZih0aGF0LCBQKTtcbiAgfSByZXR1cm4gdGhhdDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19pbmhlcml0LWlmLXJlcXVpcmVkLmpzXG4gKiogbW9kdWxlIGlkID0gMTMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCB0b0ludGVnZXIgICAgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCBhTnVtYmVyVmFsdWUgPSByZXF1aXJlKCcuL19hLW51bWJlci12YWx1ZScpXG4gICwgcmVwZWF0ICAgICAgID0gcmVxdWlyZSgnLi9fc3RyaW5nLXJlcGVhdCcpXG4gICwgJHRvRml4ZWQgICAgID0gMS4udG9GaXhlZFxuICAsIGZsb29yICAgICAgICA9IE1hdGguZmxvb3JcbiAgLCBkYXRhICAgICAgICAgPSBbMCwgMCwgMCwgMCwgMCwgMF1cbiAgLCBFUlJPUiAgICAgICAgPSAnTnVtYmVyLnRvRml4ZWQ6IGluY29ycmVjdCBpbnZvY2F0aW9uISdcbiAgLCBaRVJPICAgICAgICAgPSAnMCc7XG5cbnZhciBtdWx0aXBseSA9IGZ1bmN0aW9uKG4sIGMpe1xuICB2YXIgaSAgPSAtMVxuICAgICwgYzIgPSBjO1xuICB3aGlsZSgrK2kgPCA2KXtcbiAgICBjMiArPSBuICogZGF0YVtpXTtcbiAgICBkYXRhW2ldID0gYzIgJSAxZTc7XG4gICAgYzIgPSBmbG9vcihjMiAvIDFlNyk7XG4gIH1cbn07XG52YXIgZGl2aWRlID0gZnVuY3Rpb24obil7XG4gIHZhciBpID0gNlxuICAgICwgYyA9IDA7XG4gIHdoaWxlKC0taSA+PSAwKXtcbiAgICBjICs9IGRhdGFbaV07XG4gICAgZGF0YVtpXSA9IGZsb29yKGMgLyBuKTtcbiAgICBjID0gKGMgJSBuKSAqIDFlNztcbiAgfVxufTtcbnZhciBudW1Ub1N0cmluZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBpID0gNlxuICAgICwgcyA9ICcnO1xuICB3aGlsZSgtLWkgPj0gMCl7XG4gICAgaWYocyAhPT0gJycgfHwgaSA9PT0gMCB8fCBkYXRhW2ldICE9PSAwKXtcbiAgICAgIHZhciB0ID0gU3RyaW5nKGRhdGFbaV0pO1xuICAgICAgcyA9IHMgPT09ICcnID8gdCA6IHMgKyByZXBlYXQuY2FsbChaRVJPLCA3IC0gdC5sZW5ndGgpICsgdDtcbiAgICB9XG4gIH0gcmV0dXJuIHM7XG59O1xudmFyIHBvdyA9IGZ1bmN0aW9uKHgsIG4sIGFjYyl7XG4gIHJldHVybiBuID09PSAwID8gYWNjIDogbiAlIDIgPT09IDEgPyBwb3coeCwgbiAtIDEsIGFjYyAqIHgpIDogcG93KHggKiB4LCBuIC8gMiwgYWNjKTtcbn07XG52YXIgbG9nID0gZnVuY3Rpb24oeCl7XG4gIHZhciBuICA9IDBcbiAgICAsIHgyID0geDtcbiAgd2hpbGUoeDIgPj0gNDA5Nil7XG4gICAgbiArPSAxMjtcbiAgICB4MiAvPSA0MDk2O1xuICB9XG4gIHdoaWxlKHgyID49IDIpe1xuICAgIG4gICs9IDE7XG4gICAgeDIgLz0gMjtcbiAgfSByZXR1cm4gbjtcbn07XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKCEhJHRvRml4ZWQgJiYgKFxuICAwLjAwMDA4LnRvRml4ZWQoMykgIT09ICcwLjAwMCcgfHxcbiAgMC45LnRvRml4ZWQoMCkgIT09ICcxJyB8fFxuICAxLjI1NS50b0ZpeGVkKDIpICE9PSAnMS4yNScgfHxcbiAgMTAwMDAwMDAwMDAwMDAwMDEyOC4udG9GaXhlZCgwKSAhPT0gJzEwMDAwMDAwMDAwMDAwMDAxMjgnXG4pIHx8ICFyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIC8vIFY4IH4gQW5kcm9pZCA0LjMtXG4gICR0b0ZpeGVkLmNhbGwoe30pO1xufSkpLCAnTnVtYmVyJywge1xuICB0b0ZpeGVkOiBmdW5jdGlvbiB0b0ZpeGVkKGZyYWN0aW9uRGlnaXRzKXtcbiAgICB2YXIgeCA9IGFOdW1iZXJWYWx1ZSh0aGlzLCBFUlJPUilcbiAgICAgICwgZiA9IHRvSW50ZWdlcihmcmFjdGlvbkRpZ2l0cylcbiAgICAgICwgcyA9ICcnXG4gICAgICAsIG0gPSBaRVJPXG4gICAgICAsIGUsIHosIGosIGs7XG4gICAgaWYoZiA8IDAgfHwgZiA+IDIwKXRocm93IFJhbmdlRXJyb3IoRVJST1IpO1xuICAgIGlmKHggIT0geClyZXR1cm4gJ05hTic7XG4gICAgaWYoeCA8PSAtMWUyMSB8fCB4ID49IDFlMjEpcmV0dXJuIFN0cmluZyh4KTtcbiAgICBpZih4IDwgMCl7XG4gICAgICBzID0gJy0nO1xuICAgICAgeCA9IC14O1xuICAgIH1cbiAgICBpZih4ID4gMWUtMjEpe1xuICAgICAgZSA9IGxvZyh4ICogcG93KDIsIDY5LCAxKSkgLSA2OTtcbiAgICAgIHogPSBlIDwgMCA/IHggKiBwb3coMiwgLWUsIDEpIDogeCAvIHBvdygyLCBlLCAxKTtcbiAgICAgIHogKj0gMHgxMDAwMDAwMDAwMDAwMDtcbiAgICAgIGUgPSA1MiAtIGU7XG4gICAgICBpZihlID4gMCl7XG4gICAgICAgIG11bHRpcGx5KDAsIHopO1xuICAgICAgICBqID0gZjtcbiAgICAgICAgd2hpbGUoaiA+PSA3KXtcbiAgICAgICAgICBtdWx0aXBseSgxZTcsIDApO1xuICAgICAgICAgIGogLT0gNztcbiAgICAgICAgfVxuICAgICAgICBtdWx0aXBseShwb3coMTAsIGosIDEpLCAwKTtcbiAgICAgICAgaiA9IGUgLSAxO1xuICAgICAgICB3aGlsZShqID49IDIzKXtcbiAgICAgICAgICBkaXZpZGUoMSA8PCAyMyk7XG4gICAgICAgICAgaiAtPSAyMztcbiAgICAgICAgfVxuICAgICAgICBkaXZpZGUoMSA8PCBqKTtcbiAgICAgICAgbXVsdGlwbHkoMSwgMSk7XG4gICAgICAgIGRpdmlkZSgyKTtcbiAgICAgICAgbSA9IG51bVRvU3RyaW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtdWx0aXBseSgwLCB6KTtcbiAgICAgICAgbXVsdGlwbHkoMSA8PCAtZSwgMCk7XG4gICAgICAgIG0gPSBudW1Ub1N0cmluZygpICsgcmVwZWF0LmNhbGwoWkVSTywgZik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmKGYgPiAwKXtcbiAgICAgIGsgPSBtLmxlbmd0aDtcbiAgICAgIG0gPSBzICsgKGsgPD0gZiA/ICcwLicgKyByZXBlYXQuY2FsbChaRVJPLCBmIC0gaykgKyBtIDogbS5zbGljZSgwLCBrIC0gZikgKyAnLicgKyBtLnNsaWNlKGsgLSBmKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSBzICsgbTtcbiAgICB9IHJldHVybiBtO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci50by1maXhlZC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgbXNnKXtcbiAgaWYodHlwZW9mIGl0ICE9ICdudW1iZXInICYmIGNvZihpdCkgIT0gJ051bWJlcicpdGhyb3cgVHlwZUVycm9yKG1zZyk7XG4gIHJldHVybiAraXQ7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fYS1udW1iZXItdmFsdWUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCBkZWZpbmVkICAgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVwZWF0KGNvdW50KXtcbiAgdmFyIHN0ciA9IFN0cmluZyhkZWZpbmVkKHRoaXMpKVxuICAgICwgcmVzID0gJydcbiAgICAsIG4gICA9IHRvSW50ZWdlcihjb3VudCk7XG4gIGlmKG4gPCAwIHx8IG4gPT0gSW5maW5pdHkpdGhyb3cgUmFuZ2VFcnJvcihcIkNvdW50IGNhbid0IGJlIG5lZ2F0aXZlXCIpO1xuICBmb3IoO24gPiAwOyAobiA+Pj49IDEpICYmIChzdHIgKz0gc3RyKSlpZihuICYgMSlyZXMgKz0gc3RyO1xuICByZXR1cm4gcmVzO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3N0cmluZy1yZXBlYXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRmYWlscyAgICAgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJylcbiAgLCBhTnVtYmVyVmFsdWUgPSByZXF1aXJlKCcuL19hLW51bWJlci12YWx1ZScpXG4gICwgJHRvUHJlY2lzaW9uID0gMS4udG9QcmVjaXNpb247XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKCRmYWlscyhmdW5jdGlvbigpe1xuICAvLyBJRTctXG4gIHJldHVybiAkdG9QcmVjaXNpb24uY2FsbCgxLCB1bmRlZmluZWQpICE9PSAnMSc7XG59KSB8fCAhJGZhaWxzKGZ1bmN0aW9uKCl7XG4gIC8vIFY4IH4gQW5kcm9pZCA0LjMtXG4gICR0b1ByZWNpc2lvbi5jYWxsKHt9KTtcbn0pKSwgJ051bWJlcicsIHtcbiAgdG9QcmVjaXNpb246IGZ1bmN0aW9uIHRvUHJlY2lzaW9uKHByZWNpc2lvbil7XG4gICAgdmFyIHRoYXQgPSBhTnVtYmVyVmFsdWUodGhpcywgJ051bWJlciN0b1ByZWNpc2lvbjogaW5jb3JyZWN0IGludm9jYXRpb24hJyk7XG4gICAgcmV0dXJuIHByZWNpc2lvbiA9PT0gdW5kZWZpbmVkID8gJHRvUHJlY2lzaW9uLmNhbGwodGhhdCkgOiAkdG9QcmVjaXNpb24uY2FsbCh0aGF0LCBwcmVjaXNpb24pOyBcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5udW1iZXIudG8tcHJlY2lzaW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMTM0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4xLjIuMSBOdW1iZXIuRVBTSUxPTlxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7RVBTSUxPTjogTWF0aC5wb3coMiwgLTUyKX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLmVwc2lsb24uanNcbiAqKiBtb2R1bGUgaWQgPSAxMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjEuMi4yIE51bWJlci5pc0Zpbml0ZShudW1iZXIpXG52YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBfaXNGaW5pdGUgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5pc0Zpbml0ZTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7XG4gIGlzRmluaXRlOiBmdW5jdGlvbiBpc0Zpbml0ZShpdCl7XG4gICAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnbnVtYmVyJyAmJiBfaXNGaW5pdGUoaXQpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5pcy1maW5pdGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjEuMi4zIE51bWJlci5pc0ludGVnZXIobnVtYmVyKVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7aXNJbnRlZ2VyOiByZXF1aXJlKCcuL19pcy1pbnRlZ2VyJyl9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5pcy1pbnRlZ2VyLmpzXG4gKiogbW9kdWxlIGlkID0gMTM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4xLjIuMyBOdW1iZXIuaXNJbnRlZ2VyKG51bWJlcilcbnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgZmxvb3IgICAgPSBNYXRoLmZsb29yO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0ludGVnZXIoaXQpe1xuICByZXR1cm4gIWlzT2JqZWN0KGl0KSAmJiBpc0Zpbml0ZShpdCkgJiYgZmxvb3IoaXQpID09PSBpdDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19pcy1pbnRlZ2VyLmpzXG4gKiogbW9kdWxlIGlkID0gMTM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4xLjIuNCBOdW1iZXIuaXNOYU4obnVtYmVyKVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7XG4gIGlzTmFOOiBmdW5jdGlvbiBpc05hTihudW1iZXIpe1xuICAgIHJldHVybiBudW1iZXIgIT0gbnVtYmVyO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5pcy1uYW4uanNcbiAqKiBtb2R1bGUgaWQgPSAxMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjEuMi41IE51bWJlci5pc1NhZmVJbnRlZ2VyKG51bWJlcilcbnZhciAkZXhwb3J0ICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGlzSW50ZWdlciA9IHJlcXVpcmUoJy4vX2lzLWludGVnZXInKVxuICAsIGFicyAgICAgICA9IE1hdGguYWJzO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHtcbiAgaXNTYWZlSW50ZWdlcjogZnVuY3Rpb24gaXNTYWZlSW50ZWdlcihudW1iZXIpe1xuICAgIHJldHVybiBpc0ludGVnZXIobnVtYmVyKSAmJiBhYnMobnVtYmVyKSA8PSAweDFmZmZmZmZmZmZmZmZmO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5pcy1zYWZlLWludGVnZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjEuMi42IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHtNQVhfU0FGRV9JTlRFR0VSOiAweDFmZmZmZmZmZmZmZmZmfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5udW1iZXIubWF4LXNhZmUtaW50ZWdlci5qc1xuICoqIG1vZHVsZSBpZCA9IDE0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMS4yLjEwIE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHtNSU5fU0FGRV9JTlRFR0VSOiAtMHgxZmZmZmZmZmZmZmZmZn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLm1pbi1zYWZlLWludGVnZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciAkZXhwb3J0ICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgJHBhcnNlRmxvYXQgPSByZXF1aXJlKCcuL19wYXJzZS1mbG9hdCcpO1xuLy8gMjAuMS4yLjEyIE51bWJlci5wYXJzZUZsb2F0KHN0cmluZylcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKE51bWJlci5wYXJzZUZsb2F0ICE9ICRwYXJzZUZsb2F0KSwgJ051bWJlcicsIHtwYXJzZUZsb2F0OiAkcGFyc2VGbG9hdH0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubnVtYmVyLnBhcnNlLWZsb2F0LmpzXG4gKiogbW9kdWxlIGlkID0gMTQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkcGFyc2VJbnQgPSByZXF1aXJlKCcuL19wYXJzZS1pbnQnKTtcbi8vIDIwLjEuMi4xMyBOdW1iZXIucGFyc2VJbnQoc3RyaW5nLCByYWRpeClcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKE51bWJlci5wYXJzZUludCAhPSAkcGFyc2VJbnQpLCAnTnVtYmVyJywge3BhcnNlSW50OiAkcGFyc2VJbnR9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm51bWJlci5wYXJzZS1pbnQuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjIuMi4zIE1hdGguYWNvc2goeClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBsb2cxcCAgID0gcmVxdWlyZSgnLi9fbWF0aC1sb2cxcCcpXG4gICwgc3FydCAgICA9IE1hdGguc3FydFxuICAsICRhY29zaCAgPSBNYXRoLmFjb3NoO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoJGFjb3NoXG4gIC8vIFY4IGJ1ZzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTM1MDlcbiAgJiYgTWF0aC5mbG9vcigkYWNvc2goTnVtYmVyLk1BWF9WQUxVRSkpID09IDcxMFxuICAvLyBUb3IgQnJvd3NlciBidWc6IE1hdGguYWNvc2goSW5maW5pdHkpIC0+IE5hTiBcbiAgJiYgJGFjb3NoKEluZmluaXR5KSA9PSBJbmZpbml0eVxuKSwgJ01hdGgnLCB7XG4gIGFjb3NoOiBmdW5jdGlvbiBhY29zaCh4KXtcbiAgICByZXR1cm4gKHggPSAreCkgPCAxID8gTmFOIDogeCA+IDk0OTA2MjY1LjYyNDI1MTU2XG4gICAgICA/IE1hdGgubG9nKHgpICsgTWF0aC5MTjJcbiAgICAgIDogbG9nMXAoeCAtIDEgKyBzcXJ0KHggLSAxKSAqIHNxcnQoeCArIDEpKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLmFjb3NoLmpzXG4gKiogbW9kdWxlIGlkID0gMTQ1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4yLjIuMjAgTWF0aC5sb2cxcCh4KVxubW9kdWxlLmV4cG9ydHMgPSBNYXRoLmxvZzFwIHx8IGZ1bmN0aW9uIGxvZzFwKHgpe1xuICByZXR1cm4gKHggPSAreCkgPiAtMWUtOCAmJiB4IDwgMWUtOCA/IHggLSB4ICogeCAvIDIgOiBNYXRoLmxvZygxICsgeCk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fbWF0aC1sb2cxcC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMi4yLjUgTWF0aC5hc2luaCh4KVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRhc2luaCAgPSBNYXRoLmFzaW5oO1xuXG5mdW5jdGlvbiBhc2luaCh4KXtcbiAgcmV0dXJuICFpc0Zpbml0ZSh4ID0gK3gpIHx8IHggPT0gMCA/IHggOiB4IDwgMCA/IC1hc2luaCgteCkgOiBNYXRoLmxvZyh4ICsgTWF0aC5zcXJ0KHggKiB4ICsgMSkpO1xufVxuXG4vLyBUb3IgQnJvd3NlciBidWc6IE1hdGguYXNpbmgoMCkgLT4gLTAgXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoJGFzaW5oICYmIDEgLyAkYXNpbmgoMCkgPiAwKSwgJ01hdGgnLCB7YXNpbmg6IGFzaW5ofSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLmFzaW5oLmpzXG4gKiogbW9kdWxlIGlkID0gMTQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4yLjIuNyBNYXRoLmF0YW5oKHgpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgJGF0YW5oICA9IE1hdGguYXRhbmg7XG5cbi8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hdGFuaCgtMCkgLT4gMCBcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogISgkYXRhbmggJiYgMSAvICRhdGFuaCgtMCkgPCAwKSwgJ01hdGgnLCB7XG4gIGF0YW5oOiBmdW5jdGlvbiBhdGFuaCh4KXtcbiAgICByZXR1cm4gKHggPSAreCkgPT0gMCA/IHggOiBNYXRoLmxvZygoMSArIHgpIC8gKDEgLSB4KSkgLyAyO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguYXRhbmguanNcbiAqKiBtb2R1bGUgaWQgPSAxNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjIuMi45IE1hdGguY2JydCh4KVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIHNpZ24gICAgPSByZXF1aXJlKCcuL19tYXRoLXNpZ24nKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywge1xuICBjYnJ0OiBmdW5jdGlvbiBjYnJ0KHgpe1xuICAgIHJldHVybiBzaWduKHggPSAreCkgKiBNYXRoLnBvdyhNYXRoLmFicyh4KSwgMSAvIDMpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguY2JydC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMi4yLjI4IE1hdGguc2lnbih4KVxubW9kdWxlLmV4cG9ydHMgPSBNYXRoLnNpZ24gfHwgZnVuY3Rpb24gc2lnbih4KXtcbiAgcmV0dXJuICh4ID0gK3gpID09IDAgfHwgeCAhPSB4ID8geCA6IHggPCAwID8gLTEgOiAxO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX21hdGgtc2lnbi5qc1xuICoqIG1vZHVsZSBpZCA9IDE1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMi4yLjExIE1hdGguY2x6MzIoeClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgY2x6MzI6IGZ1bmN0aW9uIGNsejMyKHgpe1xuICAgIHJldHVybiAoeCA+Pj49IDApID8gMzEgLSBNYXRoLmZsb29yKE1hdGgubG9nKHggKyAwLjUpICogTWF0aC5MT0cyRSkgOiAzMjtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLmNsejMyLmpzXG4gKiogbW9kdWxlIGlkID0gMTUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4yLjIuMTIgTWF0aC5jb3NoKHgpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgZXhwICAgICA9IE1hdGguZXhwO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIGNvc2g6IGZ1bmN0aW9uIGNvc2goeCl7XG4gICAgcmV0dXJuIChleHAoeCA9ICt4KSArIGV4cCgteCkpIC8gMjtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLmNvc2guanNcbiAqKiBtb2R1bGUgaWQgPSAxNTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjIuMi4xNCBNYXRoLmV4cG0xKHgpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgJGV4cG0xICA9IHJlcXVpcmUoJy4vX21hdGgtZXhwbTEnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoJGV4cG0xICE9IE1hdGguZXhwbTEpLCAnTWF0aCcsIHtleHBtMTogJGV4cG0xfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLmV4cG0xLmpzXG4gKiogbW9kdWxlIGlkID0gMTUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4yLjIuMTQgTWF0aC5leHBtMSh4KVxudmFyICRleHBtMSA9IE1hdGguZXhwbTE7XG5tb2R1bGUuZXhwb3J0cyA9ICghJGV4cG0xXG4gIC8vIE9sZCBGRiBidWdcbiAgfHwgJGV4cG0xKDEwKSA+IDIyMDI1LjQ2NTc5NDgwNjcxOSB8fCAkZXhwbTEoMTApIDwgMjIwMjUuNDY1Nzk0ODA2NzE2NTE2OFxuICAvLyBUb3IgQnJvd3NlciBidWdcbiAgfHwgJGV4cG0xKC0yZS0xNykgIT0gLTJlLTE3XG4pID8gZnVuY3Rpb24gZXhwbTEoeCl7XG4gIHJldHVybiAoeCA9ICt4KSA9PSAwID8geCA6IHggPiAtMWUtNiAmJiB4IDwgMWUtNiA/IHggKyB4ICogeCAvIDIgOiBNYXRoLmV4cCh4KSAtIDE7XG59IDogJGV4cG0xO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fbWF0aC1leHBtMS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMi4yLjE2IE1hdGguZnJvdW5kKHgpXG52YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBzaWduICAgICAgPSByZXF1aXJlKCcuL19tYXRoLXNpZ24nKVxuICAsIHBvdyAgICAgICA9IE1hdGgucG93XG4gICwgRVBTSUxPTiAgID0gcG93KDIsIC01MilcbiAgLCBFUFNJTE9OMzIgPSBwb3coMiwgLTIzKVxuICAsIE1BWDMyICAgICA9IHBvdygyLCAxMjcpICogKDIgLSBFUFNJTE9OMzIpXG4gICwgTUlOMzIgICAgID0gcG93KDIsIC0xMjYpO1xuXG52YXIgcm91bmRUaWVzVG9FdmVuID0gZnVuY3Rpb24obil7XG4gIHJldHVybiBuICsgMSAvIEVQU0lMT04gLSAxIC8gRVBTSUxPTjtcbn07XG5cblxuJGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywge1xuICBmcm91bmQ6IGZ1bmN0aW9uIGZyb3VuZCh4KXtcbiAgICB2YXIgJGFicyAgPSBNYXRoLmFicyh4KVxuICAgICAgLCAkc2lnbiA9IHNpZ24oeClcbiAgICAgICwgYSwgcmVzdWx0O1xuICAgIGlmKCRhYnMgPCBNSU4zMilyZXR1cm4gJHNpZ24gKiByb3VuZFRpZXNUb0V2ZW4oJGFicyAvIE1JTjMyIC8gRVBTSUxPTjMyKSAqIE1JTjMyICogRVBTSUxPTjMyO1xuICAgIGEgPSAoMSArIEVQU0lMT04zMiAvIEVQU0lMT04pICogJGFicztcbiAgICByZXN1bHQgPSBhIC0gKGEgLSAkYWJzKTtcbiAgICBpZihyZXN1bHQgPiBNQVgzMiB8fCByZXN1bHQgIT0gcmVzdWx0KXJldHVybiAkc2lnbiAqIEluZmluaXR5O1xuICAgIHJldHVybiAkc2lnbiAqIHJlc3VsdDtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLmZyb3VuZC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMi4yLjE3IE1hdGguaHlwb3QoW3ZhbHVlMVssIHZhbHVlMlssIOKApiBdXV0pXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgYWJzICAgICA9IE1hdGguYWJzO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIGh5cG90OiBmdW5jdGlvbiBoeXBvdCh2YWx1ZTEsIHZhbHVlMil7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICB2YXIgc3VtICA9IDBcbiAgICAgICwgaSAgICA9IDBcbiAgICAgICwgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICwgbGFyZyA9IDBcbiAgICAgICwgYXJnLCBkaXY7XG4gICAgd2hpbGUoaSA8IGFMZW4pe1xuICAgICAgYXJnID0gYWJzKGFyZ3VtZW50c1tpKytdKTtcbiAgICAgIGlmKGxhcmcgPCBhcmcpe1xuICAgICAgICBkaXYgID0gbGFyZyAvIGFyZztcbiAgICAgICAgc3VtICA9IHN1bSAqIGRpdiAqIGRpdiArIDE7XG4gICAgICAgIGxhcmcgPSBhcmc7XG4gICAgICB9IGVsc2UgaWYoYXJnID4gMCl7XG4gICAgICAgIGRpdiAgPSBhcmcgLyBsYXJnO1xuICAgICAgICBzdW0gKz0gZGl2ICogZGl2O1xuICAgICAgfSBlbHNlIHN1bSArPSBhcmc7XG4gICAgfVxuICAgIHJldHVybiBsYXJnID09PSBJbmZpbml0eSA/IEluZmluaXR5IDogbGFyZyAqIE1hdGguc3FydChzdW0pO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguaHlwb3QuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjIuMi4xOCBNYXRoLmltdWwoeCwgeSlcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkaW11bCAgID0gTWF0aC5pbXVsO1xuXG4vLyBzb21lIFdlYktpdCB2ZXJzaW9ucyBmYWlscyB3aXRoIGJpZyBudW1iZXJzLCBzb21lIGhhcyB3cm9uZyBhcml0eVxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJldHVybiAkaW11bCgweGZmZmZmZmZmLCA1KSAhPSAtNSB8fCAkaW11bC5sZW5ndGggIT0gMjtcbn0pLCAnTWF0aCcsIHtcbiAgaW11bDogZnVuY3Rpb24gaW11bCh4LCB5KXtcbiAgICB2YXIgVUlOVDE2ID0gMHhmZmZmXG4gICAgICAsIHhuID0gK3hcbiAgICAgICwgeW4gPSAreVxuICAgICAgLCB4bCA9IFVJTlQxNiAmIHhuXG4gICAgICAsIHlsID0gVUlOVDE2ICYgeW47XG4gICAgcmV0dXJuIDAgfCB4bCAqIHlsICsgKChVSU5UMTYgJiB4biA+Pj4gMTYpICogeWwgKyB4bCAqIChVSU5UMTYgJiB5biA+Pj4gMTYpIDw8IDE2ID4+PiAwKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLmltdWwuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjIuMi4yMSBNYXRoLmxvZzEwKHgpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIGxvZzEwOiBmdW5jdGlvbiBsb2cxMCh4KXtcbiAgICByZXR1cm4gTWF0aC5sb2coeCkgLyBNYXRoLkxOMTA7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5sb2cxMC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMi4yLjIwIE1hdGgubG9nMXAoeClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtsb2cxcDogcmVxdWlyZSgnLi9fbWF0aC1sb2cxcCcpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLmxvZzFwLmpzXG4gKiogbW9kdWxlIGlkID0gMTU5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4yLjIuMjIgTWF0aC5sb2cyKHgpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIGxvZzI6IGZ1bmN0aW9uIGxvZzIoeCl7XG4gICAgcmV0dXJuIE1hdGgubG9nKHgpIC8gTWF0aC5MTjI7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC5sb2cyLmpzXG4gKiogbW9kdWxlIGlkID0gMTYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMC4yLjIuMjggTWF0aC5zaWduKHgpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7c2lnbjogcmVxdWlyZSgnLi9fbWF0aC1zaWduJyl9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hdGguc2lnbi5qc1xuICoqIG1vZHVsZSBpZCA9IDE2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMi4yLjMwIE1hdGguc2luaCh4KVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGV4cG0xICAgPSByZXF1aXJlKCcuL19tYXRoLWV4cG0xJylcbiAgLCBleHAgICAgID0gTWF0aC5leHA7XG5cbi8vIFY4IG5lYXIgQ2hyb21pdW0gMzggaGFzIGEgcHJvYmxlbSB3aXRoIHZlcnkgc21hbGwgbnVtYmVyc1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJldHVybiAhTWF0aC5zaW5oKC0yZS0xNykgIT0gLTJlLTE3O1xufSksICdNYXRoJywge1xuICBzaW5oOiBmdW5jdGlvbiBzaW5oKHgpe1xuICAgIHJldHVybiBNYXRoLmFicyh4ID0gK3gpIDwgMVxuICAgICAgPyAoZXhwbTEoeCkgLSBleHBtMSgteCkpIC8gMlxuICAgICAgOiAoZXhwKHggLSAxKSAtIGV4cCgteCAtIDEpKSAqIChNYXRoLkUgLyAyKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLnNpbmguanNcbiAqKiBtb2R1bGUgaWQgPSAxNjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjIuMi4zMyBNYXRoLnRhbmgoeClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBleHBtMSAgID0gcmVxdWlyZSgnLi9fbWF0aC1leHBtMScpXG4gICwgZXhwICAgICA9IE1hdGguZXhwO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIHRhbmg6IGZ1bmN0aW9uIHRhbmgoeCl7XG4gICAgdmFyIGEgPSBleHBtMSh4ID0gK3gpXG4gICAgICAsIGIgPSBleHBtMSgteCk7XG4gICAgcmV0dXJuIGEgPT0gSW5maW5pdHkgPyAxIDogYiA9PSBJbmZpbml0eSA/IC0xIDogKGEgLSBiKSAvIChleHAoeCkgKyBleHAoLXgpKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5tYXRoLnRhbmguanNcbiAqKiBtb2R1bGUgaWQgPSAxNjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIwLjIuMi4zNCBNYXRoLnRydW5jKHgpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7XG4gIHRydW5jOiBmdW5jdGlvbiB0cnVuYyhpdCl7XG4gICAgcmV0dXJuIChpdCA+IDAgPyBNYXRoLmZsb29yIDogTWF0aC5jZWlsKShpdCk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYubWF0aC50cnVuYy5qc1xuICoqIG1vZHVsZSBpZCA9IDE2NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRleHBvcnQgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCB0b0luZGV4ICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWluZGV4JylcbiAgLCBmcm9tQ2hhckNvZGUgICA9IFN0cmluZy5mcm9tQ2hhckNvZGVcbiAgLCAkZnJvbUNvZGVQb2ludCA9IFN0cmluZy5mcm9tQ29kZVBvaW50O1xuXG4vLyBsZW5ndGggc2hvdWxkIGJlIDEsIG9sZCBGRiBwcm9ibGVtXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICghISRmcm9tQ29kZVBvaW50ICYmICRmcm9tQ29kZVBvaW50Lmxlbmd0aCAhPSAxKSwgJ1N0cmluZycsIHtcbiAgLy8gMjEuMS4yLjIgU3RyaW5nLmZyb21Db2RlUG9pbnQoLi4uY29kZVBvaW50cylcbiAgZnJvbUNvZGVQb2ludDogZnVuY3Rpb24gZnJvbUNvZGVQb2ludCh4KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIHZhciByZXMgID0gW11cbiAgICAgICwgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICwgaSAgICA9IDBcbiAgICAgICwgY29kZTtcbiAgICB3aGlsZShhTGVuID4gaSl7XG4gICAgICBjb2RlID0gK2FyZ3VtZW50c1tpKytdO1xuICAgICAgaWYodG9JbmRleChjb2RlLCAweDEwZmZmZikgIT09IGNvZGUpdGhyb3cgUmFuZ2VFcnJvcihjb2RlICsgJyBpcyBub3QgYSB2YWxpZCBjb2RlIHBvaW50Jyk7XG4gICAgICByZXMucHVzaChjb2RlIDwgMHgxMDAwMFxuICAgICAgICA/IGZyb21DaGFyQ29kZShjb2RlKVxuICAgICAgICA6IGZyb21DaGFyQ29kZSgoKGNvZGUgLT0gMHgxMDAwMCkgPj4gMTApICsgMHhkODAwLCBjb2RlICUgMHg0MDAgKyAweGRjMDApXG4gICAgICApO1xuICAgIH0gcmV0dXJuIHJlcy5qb2luKCcnKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuZnJvbS1jb2RlLXBvaW50LmpzXG4gKiogbW9kdWxlIGlkID0gMTY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCB0b0xlbmd0aCAgPSByZXF1aXJlKCcuL190by1sZW5ndGgnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdTdHJpbmcnLCB7XG4gIC8vIDIxLjEuMi40IFN0cmluZy5yYXcoY2FsbFNpdGUsIC4uLnN1YnN0aXR1dGlvbnMpXG4gIHJhdzogZnVuY3Rpb24gcmF3KGNhbGxTaXRlKXtcbiAgICB2YXIgdHBsICA9IHRvSU9iamVjdChjYWxsU2l0ZS5yYXcpXG4gICAgICAsIGxlbiAgPSB0b0xlbmd0aCh0cGwubGVuZ3RoKVxuICAgICAgLCBhTGVuID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgLCByZXMgID0gW11cbiAgICAgICwgaSAgICA9IDA7XG4gICAgd2hpbGUobGVuID4gaSl7XG4gICAgICByZXMucHVzaChTdHJpbmcodHBsW2krK10pKTtcbiAgICAgIGlmKGkgPCBhTGVuKXJlcy5wdXNoKFN0cmluZyhhcmd1bWVudHNbaV0pKTtcbiAgICB9IHJldHVybiByZXMuam9pbignJyk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnJhdy5qc1xuICoqIG1vZHVsZSBpZCA9IDE2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gMjEuMS4zLjI1IFN0cmluZy5wcm90b3R5cGUudHJpbSgpXG5yZXF1aXJlKCcuL19zdHJpbmctdHJpbScpKCd0cmltJywgZnVuY3Rpb24oJHRyaW0pe1xuICByZXR1cm4gZnVuY3Rpb24gdHJpbSgpe1xuICAgIHJldHVybiAkdHJpbSh0aGlzLCAzKTtcbiAgfTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnRyaW0uanNcbiAqKiBtb2R1bGUgaWQgPSAxNjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkYXQgID0gcmVxdWlyZSgnLi9fc3RyaW5nLWF0JykodHJ1ZSk7XG5cbi8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKClcbnJlcXVpcmUoJy4vX2l0ZXItZGVmaW5lJykoU3RyaW5nLCAnU3RyaW5nJywgZnVuY3Rpb24oaXRlcmF0ZWQpe1xuICB0aGlzLl90ID0gU3RyaW5nKGl0ZXJhdGVkKTsgLy8gdGFyZ2V0XG4gIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4XG4vLyAyMS4xLjUuMi4xICVTdHJpbmdJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpXG59LCBmdW5jdGlvbigpe1xuICB2YXIgTyAgICAgPSB0aGlzLl90XG4gICAgLCBpbmRleCA9IHRoaXMuX2lcbiAgICAsIHBvaW50O1xuICBpZihpbmRleCA+PSBPLmxlbmd0aClyZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9O1xuICBwb2ludCA9ICRhdChPLCBpbmRleCk7XG4gIHRoaXMuX2kgKz0gcG9pbnQubGVuZ3RoO1xuICByZXR1cm4ge3ZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2V9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSAxNjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCBkZWZpbmVkICAgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG4vLyB0cnVlICAtPiBTdHJpbmcjYXRcbi8vIGZhbHNlIC0+IFN0cmluZyNjb2RlUG9pbnRBdFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihUT19TVFJJTkcpe1xuICByZXR1cm4gZnVuY3Rpb24odGhhdCwgcG9zKXtcbiAgICB2YXIgcyA9IFN0cmluZyhkZWZpbmVkKHRoYXQpKVxuICAgICAgLCBpID0gdG9JbnRlZ2VyKHBvcylcbiAgICAgICwgbCA9IHMubGVuZ3RoXG4gICAgICAsIGEsIGI7XG4gICAgaWYoaSA8IDAgfHwgaSA+PSBsKXJldHVybiBUT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDtcbiAgICBhID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgIHJldHVybiBhIDwgMHhkODAwIHx8IGEgPiAweGRiZmYgfHwgaSArIDEgPT09IGwgfHwgKGIgPSBzLmNoYXJDb2RlQXQoaSArIDEpKSA8IDB4ZGMwMCB8fCBiID4gMHhkZmZmXG4gICAgICA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYVxuICAgICAgOiBUT19TVFJJTkcgPyBzLnNsaWNlKGksIGkgKyAyKSA6IChhIC0gMHhkODAwIDw8IDEwKSArIChiIC0gMHhkYzAwKSArIDB4MTAwMDA7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fc3RyaW5nLWF0LmpzXG4gKiogbW9kdWxlIGlkID0gMTY5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgTElCUkFSWSAgICAgICAgPSByZXF1aXJlKCcuL19saWJyYXJ5JylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgcmVkZWZpbmUgICAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpXG4gICwgaGlkZSAgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCBoYXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpXG4gICwgSXRlcmF0b3JzICAgICAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKVxuICAsICRpdGVyQ3JlYXRlICAgID0gcmVxdWlyZSgnLi9faXRlci1jcmVhdGUnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIGdldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpXG4gICwgSVRFUkFUT1IgICAgICAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKVxuICAsIEJVR0dZICAgICAgICAgID0gIShbXS5rZXlzICYmICduZXh0JyBpbiBbXS5rZXlzKCkpIC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGBcbiAgLCBGRl9JVEVSQVRPUiAgICA9ICdAQGl0ZXJhdG9yJ1xuICAsIEtFWVMgICAgICAgICAgID0gJ2tleXMnXG4gICwgVkFMVUVTICAgICAgICAgPSAndmFsdWVzJztcblxudmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihCYXNlLCBOQU1FLCBDb25zdHJ1Y3RvciwgbmV4dCwgREVGQVVMVCwgSVNfU0VULCBGT1JDRUQpe1xuICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7XG4gIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihraW5kKXtcbiAgICBpZighQlVHR1kgJiYga2luZCBpbiBwcm90bylyZXR1cm4gcHJvdG9ba2luZF07XG4gICAgc3dpdGNoKGtpbmQpe1xuICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9O1xuICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcbiAgICB9IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG4gIH07XG4gIHZhciBUQUcgICAgICAgID0gTkFNRSArICcgSXRlcmF0b3InXG4gICAgLCBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVNcbiAgICAsIFZBTFVFU19CVUcgPSBmYWxzZVxuICAgICwgcHJvdG8gICAgICA9IEJhc2UucHJvdG90eXBlXG4gICAgLCAkbmF0aXZlICAgID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdXG4gICAgLCAkZGVmYXVsdCAgID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVClcbiAgICAsICRlbnRyaWVzICAgPSBERUZBVUxUID8gIURFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZCgnZW50cmllcycpIDogdW5kZWZpbmVkXG4gICAgLCAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZVxuICAgICwgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTtcbiAgLy8gRml4IG5hdGl2ZVxuICBpZigkYW55TmF0aXZlKXtcbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSkpO1xuICAgIGlmKEl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlKXtcbiAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnNcbiAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpO1xuICAgICAgLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzXG4gICAgICBpZighTElCUkFSWSAmJiAhaGFzKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUikpaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpO1xuICAgIH1cbiAgfVxuICAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGXG4gIGlmKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUyl7XG4gICAgVkFMVUVTX0JVRyA9IHRydWU7XG4gICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuICRuYXRpdmUuY2FsbCh0aGlzKTsgfTtcbiAgfVxuICAvLyBEZWZpbmUgaXRlcmF0b3JcbiAgaWYoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpe1xuICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7XG4gIH1cbiAgLy8gUGx1ZyBmb3IgbGlicmFyeVxuICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDtcbiAgSXRlcmF0b3JzW1RBR10gID0gcmV0dXJuVGhpcztcbiAgaWYoREVGQVVMVCl7XG4gICAgbWV0aG9kcyA9IHtcbiAgICAgIHZhbHVlczogIERFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChWQUxVRVMpLFxuICAgICAga2V5czogICAgSVNfU0VUICAgICA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLFxuICAgICAgZW50cmllczogJGVudHJpZXNcbiAgICB9O1xuICAgIGlmKEZPUkNFRClmb3Ioa2V5IGluIG1ldGhvZHMpe1xuICAgICAgaWYoIShrZXkgaW4gcHJvdG8pKXJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7XG4gICAgfSBlbHNlICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKEJVR0dZIHx8IFZBTFVFU19CVUcpLCBOQU1FLCBtZXRob2RzKTtcbiAgfVxuICByZXR1cm4gbWV0aG9kcztcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19pdGVyLWRlZmluZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE3MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2l0ZXJhdG9ycy5qc1xuICoqIG1vZHVsZSBpZCA9IDE3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNyZWF0ZSAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpXG4gICwgZGVzY3JpcHRvciAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4vX3NldC10by1zdHJpbmctdGFnJylcbiAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuXG4vLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi9faGlkZScpKEl0ZXJhdG9yUHJvdG90eXBlLCByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KXtcbiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7bmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KX0pO1xuICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19pdGVyLWNyZWF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRhdCAgICAgPSByZXF1aXJlKCcuL19zdHJpbmctYXQnKShmYWxzZSk7XG4kZXhwb3J0KCRleHBvcnQuUCwgJ1N0cmluZycsIHtcbiAgLy8gMjEuMS4zLjMgU3RyaW5nLnByb3RvdHlwZS5jb2RlUG9pbnRBdChwb3MpXG4gIGNvZGVQb2ludEF0OiBmdW5jdGlvbiBjb2RlUG9pbnRBdChwb3Mpe1xuICAgIHJldHVybiAkYXQodGhpcywgcG9zKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuY29kZS1wb2ludC1hdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjEuMS4zLjYgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aChzZWFyY2hTdHJpbmcgWywgZW5kUG9zaXRpb25dKVxuJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgdG9MZW5ndGggID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJylcbiAgLCBjb250ZXh0ICAgPSByZXF1aXJlKCcuL19zdHJpbmctY29udGV4dCcpXG4gICwgRU5EU19XSVRIID0gJ2VuZHNXaXRoJ1xuICAsICRlbmRzV2l0aCA9ICcnW0VORFNfV0lUSF07XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMtaXMtcmVnZXhwJykoRU5EU19XSVRIKSwgJ1N0cmluZycsIHtcbiAgZW5kc1dpdGg6IGZ1bmN0aW9uIGVuZHNXaXRoKHNlYXJjaFN0cmluZyAvKiwgZW5kUG9zaXRpb24gPSBAbGVuZ3RoICovKXtcbiAgICB2YXIgdGhhdCA9IGNvbnRleHQodGhpcywgc2VhcmNoU3RyaW5nLCBFTkRTX1dJVEgpXG4gICAgICAsIGVuZFBvc2l0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWRcbiAgICAgICwgbGVuICAgID0gdG9MZW5ndGgodGhhdC5sZW5ndGgpXG4gICAgICAsIGVuZCAgICA9IGVuZFBvc2l0aW9uID09PSB1bmRlZmluZWQgPyBsZW4gOiBNYXRoLm1pbih0b0xlbmd0aChlbmRQb3NpdGlvbiksIGxlbilcbiAgICAgICwgc2VhcmNoID0gU3RyaW5nKHNlYXJjaFN0cmluZyk7XG4gICAgcmV0dXJuICRlbmRzV2l0aFxuICAgICAgPyAkZW5kc1dpdGguY2FsbCh0aGF0LCBzZWFyY2gsIGVuZClcbiAgICAgIDogdGhhdC5zbGljZShlbmQgLSBzZWFyY2gubGVuZ3RoLCBlbmQpID09PSBzZWFyY2g7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmVuZHMtd2l0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDE3NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gaGVscGVyIGZvciBTdHJpbmcje3N0YXJ0c1dpdGgsIGVuZHNXaXRoLCBpbmNsdWRlc31cbnZhciBpc1JlZ0V4cCA9IHJlcXVpcmUoJy4vX2lzLXJlZ2V4cCcpXG4gICwgZGVmaW5lZCAgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGhhdCwgc2VhcmNoU3RyaW5nLCBOQU1FKXtcbiAgaWYoaXNSZWdFeHAoc2VhcmNoU3RyaW5nKSl0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZyMnICsgTkFNRSArIFwiIGRvZXNuJ3QgYWNjZXB0IHJlZ2V4IVwiKTtcbiAgcmV0dXJuIFN0cmluZyhkZWZpbmVkKHRoYXQpKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19zdHJpbmctY29udGV4dC5qc1xuICoqIG1vZHVsZSBpZCA9IDE3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gNy4yLjggSXNSZWdFeHAoYXJndW1lbnQpXG52YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGNvZiAgICAgID0gcmVxdWlyZSgnLi9fY29mJylcbiAgLCBNQVRDSCAgICA9IHJlcXVpcmUoJy4vX3drcycpKCdtYXRjaCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHZhciBpc1JlZ0V4cDtcbiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiAoKGlzUmVnRXhwID0gaXRbTUFUQ0hdKSAhPT0gdW5kZWZpbmVkID8gISFpc1JlZ0V4cCA6IGNvZihpdCkgPT0gJ1JlZ0V4cCcpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2lzLXJlZ2V4cC5qc1xuICoqIG1vZHVsZSBpZCA9IDE3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIE1BVENIID0gcmVxdWlyZSgnLi9fd2tzJykoJ21hdGNoJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSl7XG4gIHZhciByZSA9IC8uLztcbiAgdHJ5IHtcbiAgICAnLy4vJ1tLRVldKHJlKTtcbiAgfSBjYXRjaChlKXtcbiAgICB0cnkge1xuICAgICAgcmVbTUFUQ0hdID0gZmFsc2U7XG4gICAgICByZXR1cm4gIScvLi8nW0tFWV0ocmUpO1xuICAgIH0gY2F0Y2goZil7IC8qIGVtcHR5ICovIH1cbiAgfSByZXR1cm4gdHJ1ZTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19mYWlscy1pcy1yZWdleHAuanNcbiAqKiBtb2R1bGUgaWQgPSAxNzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIxLjEuMy43IFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbiA9IDApXG4ndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGNvbnRleHQgID0gcmVxdWlyZSgnLi9fc3RyaW5nLWNvbnRleHQnKVxuICAsIElOQ0xVREVTID0gJ2luY2x1ZGVzJztcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiByZXF1aXJlKCcuL19mYWlscy1pcy1yZWdleHAnKShJTkNMVURFUyksICdTdHJpbmcnLCB7XG4gIGluY2x1ZGVzOiBmdW5jdGlvbiBpbmNsdWRlcyhzZWFyY2hTdHJpbmcgLyosIHBvc2l0aW9uID0gMCAqLyl7XG4gICAgcmV0dXJuICEhfmNvbnRleHQodGhpcywgc2VhcmNoU3RyaW5nLCBJTkNMVURFUylcbiAgICAgIC5pbmRleE9mKHNlYXJjaFN0cmluZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5pbmNsdWRlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDE3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAsICdTdHJpbmcnLCB7XG4gIC8vIDIxLjEuMy4xMyBTdHJpbmcucHJvdG90eXBlLnJlcGVhdChjb3VudClcbiAgcmVwZWF0OiByZXF1aXJlKCcuL19zdHJpbmctcmVwZWF0Jylcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnJlcGVhdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjEuMS4zLjE4IFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aChzZWFyY2hTdHJpbmcgWywgcG9zaXRpb24gXSlcbid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgdG9MZW5ndGggICAgPSByZXF1aXJlKCcuL190by1sZW5ndGgnKVxuICAsIGNvbnRleHQgICAgID0gcmVxdWlyZSgnLi9fc3RyaW5nLWNvbnRleHQnKVxuICAsIFNUQVJUU19XSVRIID0gJ3N0YXJ0c1dpdGgnXG4gICwgJHN0YXJ0c1dpdGggPSAnJ1tTVEFSVFNfV0lUSF07XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMtaXMtcmVnZXhwJykoU1RBUlRTX1dJVEgpLCAnU3RyaW5nJywge1xuICBzdGFydHNXaXRoOiBmdW5jdGlvbiBzdGFydHNXaXRoKHNlYXJjaFN0cmluZyAvKiwgcG9zaXRpb24gPSAwICovKXtcbiAgICB2YXIgdGhhdCAgID0gY29udGV4dCh0aGlzLCBzZWFyY2hTdHJpbmcsIFNUQVJUU19XSVRIKVxuICAgICAgLCBpbmRleCAgPSB0b0xlbmd0aChNYXRoLm1pbihhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCwgdGhhdC5sZW5ndGgpKVxuICAgICAgLCBzZWFyY2ggPSBTdHJpbmcoc2VhcmNoU3RyaW5nKTtcbiAgICByZXR1cm4gJHN0YXJ0c1dpdGhcbiAgICAgID8gJHN0YXJ0c1dpdGguY2FsbCh0aGF0LCBzZWFyY2gsIGluZGV4KVxuICAgICAgOiB0aGF0LnNsaWNlKGluZGV4LCBpbmRleCArIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2g7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnN0YXJ0cy13aXRoLmpzXG4gKiogbW9kdWxlIGlkID0gMTgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBCLjIuMy4yIFN0cmluZy5wcm90b3R5cGUuYW5jaG9yKG5hbWUpXG5yZXF1aXJlKCcuL19zdHJpbmctaHRtbCcpKCdhbmNob3InLCBmdW5jdGlvbihjcmVhdGVIVE1MKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGFuY2hvcihuYW1lKXtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYScsICduYW1lJywgbmFtZSk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmFuY2hvci5qc1xuICoqIG1vZHVsZSBpZCA9IDE4MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGZhaWxzICAgPSByZXF1aXJlKCcuL19mYWlscycpXG4gICwgZGVmaW5lZCA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKVxuICAsIHF1b3QgICAgPSAvXCIvZztcbi8vIEIuMi4zLjIuMSBDcmVhdGVIVE1MKHN0cmluZywgdGFnLCBhdHRyaWJ1dGUsIHZhbHVlKVxudmFyIGNyZWF0ZUhUTUwgPSBmdW5jdGlvbihzdHJpbmcsIHRhZywgYXR0cmlidXRlLCB2YWx1ZSkge1xuICB2YXIgUyAgPSBTdHJpbmcoZGVmaW5lZChzdHJpbmcpKVxuICAgICwgcDEgPSAnPCcgKyB0YWc7XG4gIGlmKGF0dHJpYnV0ZSAhPT0gJycpcDEgKz0gJyAnICsgYXR0cmlidXRlICsgJz1cIicgKyBTdHJpbmcodmFsdWUpLnJlcGxhY2UocXVvdCwgJyZxdW90OycpICsgJ1wiJztcbiAgcmV0dXJuIHAxICsgJz4nICsgUyArICc8LycgKyB0YWcgKyAnPic7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihOQU1FLCBleGVjKXtcbiAgdmFyIE8gPSB7fTtcbiAgT1tOQU1FXSA9IGV4ZWMoY3JlYXRlSFRNTCk7XG4gICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24oKXtcbiAgICB2YXIgdGVzdCA9ICcnW05BTUVdKCdcIicpO1xuICAgIHJldHVybiB0ZXN0ICE9PSB0ZXN0LnRvTG93ZXJDYXNlKCkgfHwgdGVzdC5zcGxpdCgnXCInKS5sZW5ndGggPiAzO1xuICB9KSwgJ1N0cmluZycsIE8pO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3N0cmluZy1odG1sLmpzXG4gKiogbW9kdWxlIGlkID0gMTgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBCLjIuMy4zIFN0cmluZy5wcm90b3R5cGUuYmlnKClcbnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2JpZycsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuICByZXR1cm4gZnVuY3Rpb24gYmlnKCl7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2JpZycsICcnLCAnJyk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmJpZy5qc1xuICoqIG1vZHVsZSBpZCA9IDE4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuNCBTdHJpbmcucHJvdG90eXBlLmJsaW5rKClcbnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2JsaW5rJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7XG4gIHJldHVybiBmdW5jdGlvbiBibGluaygpe1xuICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdibGluaycsICcnLCAnJyk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmJsaW5rLmpzXG4gKiogbW9kdWxlIGlkID0gMTg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBCLjIuMy41IFN0cmluZy5wcm90b3R5cGUuYm9sZCgpXG5yZXF1aXJlKCcuL19zdHJpbmctaHRtbCcpKCdib2xkJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7XG4gIHJldHVybiBmdW5jdGlvbiBib2xkKCl7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2InLCAnJywgJycpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5ib2xkLmpzXG4gKiogbW9kdWxlIGlkID0gMTg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBCLjIuMy42IFN0cmluZy5wcm90b3R5cGUuZml4ZWQoKVxucmVxdWlyZSgnLi9fc3RyaW5nLWh0bWwnKSgnZml4ZWQnLCBmdW5jdGlvbihjcmVhdGVIVE1MKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZpeGVkKCl7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ3R0JywgJycsICcnKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuZml4ZWQuanNcbiAqKiBtb2R1bGUgaWQgPSAxODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0Jztcbi8vIEIuMi4zLjcgU3RyaW5nLnByb3RvdHlwZS5mb250Y29sb3IoY29sb3IpXG5yZXF1aXJlKCcuL19zdHJpbmctaHRtbCcpKCdmb250Y29sb3InLCBmdW5jdGlvbihjcmVhdGVIVE1MKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZvbnRjb2xvcihjb2xvcil7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2ZvbnQnLCAnY29sb3InLCBjb2xvcik7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmZvbnRjb2xvci5qc1xuICoqIG1vZHVsZSBpZCA9IDE4N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuOCBTdHJpbmcucHJvdG90eXBlLmZvbnRzaXplKHNpemUpXG5yZXF1aXJlKCcuL19zdHJpbmctaHRtbCcpKCdmb250c2l6ZScsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuICByZXR1cm4gZnVuY3Rpb24gZm9udHNpemUoc2l6ZSl7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2ZvbnQnLCAnc2l6ZScsIHNpemUpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5mb250c2l6ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuOSBTdHJpbmcucHJvdG90eXBlLml0YWxpY3MoKVxucmVxdWlyZSgnLi9fc3RyaW5nLWh0bWwnKSgnaXRhbGljcycsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuICByZXR1cm4gZnVuY3Rpb24gaXRhbGljcygpe1xuICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdpJywgJycsICcnKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaXRhbGljcy5qc1xuICoqIG1vZHVsZSBpZCA9IDE4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuMTAgU3RyaW5nLnByb3RvdHlwZS5saW5rKHVybClcbnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2xpbmsnLCBmdW5jdGlvbihjcmVhdGVIVE1MKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGxpbmsodXJsKXtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYScsICdocmVmJywgdXJsKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcubGluay5qc1xuICoqIG1vZHVsZSBpZCA9IDE5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuMTEgU3RyaW5nLnByb3RvdHlwZS5zbWFsbCgpXG5yZXF1aXJlKCcuL19zdHJpbmctaHRtbCcpKCdzbWFsbCcsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuICByZXR1cm4gZnVuY3Rpb24gc21hbGwoKXtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnc21hbGwnLCAnJywgJycpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5zbWFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDE5MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gQi4yLjMuMTIgU3RyaW5nLnByb3RvdHlwZS5zdHJpa2UoKVxucmVxdWlyZSgnLi9fc3RyaW5nLWh0bWwnKSgnc3RyaWtlJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7XG4gIHJldHVybiBmdW5jdGlvbiBzdHJpa2UoKXtcbiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnc3RyaWtlJywgJycsICcnKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuc3RyaWtlLmpzXG4gKiogbW9kdWxlIGlkID0gMTkyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBCLjIuMy4xMyBTdHJpbmcucHJvdG90eXBlLnN1YigpXG5yZXF1aXJlKCcuL19zdHJpbmctaHRtbCcpKCdzdWInLCBmdW5jdGlvbihjcmVhdGVIVE1MKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIHN1Yigpe1xuICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdzdWInLCAnJywgJycpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5zdWIuanNcbiAqKiBtb2R1bGUgaWQgPSAxOTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0Jztcbi8vIEIuMi4zLjE0IFN0cmluZy5wcm90b3R5cGUuc3VwKClcbnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ3N1cCcsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe1xuICByZXR1cm4gZnVuY3Rpb24gc3VwKCl7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ3N1cCcsICcnLCAnJyk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnN1cC5qc1xuICoqIG1vZHVsZSBpZCA9IDE5NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjAuMy4zLjEgLyAxNS45LjQuNCBEYXRlLm5vdygpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ0RhdGUnLCB7bm93OiBmdW5jdGlvbigpeyByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7IH19KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmRhdGUubm93LmpzXG4gKiogbW9kdWxlIGlkID0gMTk1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIHRvT2JqZWN0ICAgID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JylcbiAgLCB0b1ByaW1pdGl2ZSA9IHJlcXVpcmUoJy4vX3RvLXByaW1pdGl2ZScpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIHJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIG5ldyBEYXRlKE5hTikudG9KU09OKCkgIT09IG51bGwgfHwgRGF0ZS5wcm90b3R5cGUudG9KU09OLmNhbGwoe3RvSVNPU3RyaW5nOiBmdW5jdGlvbigpeyByZXR1cm4gMTsgfX0pICE9PSAxO1xufSksICdEYXRlJywge1xuICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihrZXkpe1xuICAgIHZhciBPICA9IHRvT2JqZWN0KHRoaXMpXG4gICAgICAsIHB2ID0gdG9QcmltaXRpdmUoTyk7XG4gICAgcmV0dXJuIHR5cGVvZiBwdiA9PSAnbnVtYmVyJyAmJiAhaXNGaW5pdGUocHYpID8gbnVsbCA6IE8udG9JU09TdHJpbmcoKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5kYXRlLnRvLWpzb24uanNcbiAqKiBtb2R1bGUgaWQgPSAxOTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0Jztcbi8vIDIwLjMuNC4zNiAvIDE1LjkuNS40MyBEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZygpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgZmFpbHMgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJylcbiAgLCBnZXRUaW1lID0gRGF0ZS5wcm90b3R5cGUuZ2V0VGltZTtcblxudmFyIGx6ID0gZnVuY3Rpb24obnVtKXtcbiAgcmV0dXJuIG51bSA+IDkgPyBudW0gOiAnMCcgKyBudW07XG59O1xuXG4vLyBQaGFudG9tSlMgLyBvbGQgV2ViS2l0IGhhcyBhIGJyb2tlbiBpbXBsZW1lbnRhdGlvbnNcbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKGZhaWxzKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBuZXcgRGF0ZSgtNWUxMyAtIDEpLnRvSVNPU3RyaW5nKCkgIT0gJzAzODUtMDctMjVUMDc6MDY6MzkuOTk5Wic7XG59KSB8fCAhZmFpbHMoZnVuY3Rpb24oKXtcbiAgbmV3IERhdGUoTmFOKS50b0lTT1N0cmluZygpO1xufSkpLCAnRGF0ZScsIHtcbiAgdG9JU09TdHJpbmc6IGZ1bmN0aW9uIHRvSVNPU3RyaW5nKCl7XG4gICAgaWYoIWlzRmluaXRlKGdldFRpbWUuY2FsbCh0aGlzKSkpdGhyb3cgUmFuZ2VFcnJvcignSW52YWxpZCB0aW1lIHZhbHVlJyk7XG4gICAgdmFyIGQgPSB0aGlzXG4gICAgICAsIHkgPSBkLmdldFVUQ0Z1bGxZZWFyKClcbiAgICAgICwgbSA9IGQuZ2V0VVRDTWlsbGlzZWNvbmRzKClcbiAgICAgICwgcyA9IHkgPCAwID8gJy0nIDogeSA+IDk5OTkgPyAnKycgOiAnJztcbiAgICByZXR1cm4gcyArICgnMDAwMDAnICsgTWF0aC5hYnMoeSkpLnNsaWNlKHMgPyAtNiA6IC00KSArXG4gICAgICAnLScgKyBseihkLmdldFVUQ01vbnRoKCkgKyAxKSArICctJyArIGx6KGQuZ2V0VVRDRGF0ZSgpKSArXG4gICAgICAnVCcgKyBseihkLmdldFVUQ0hvdXJzKCkpICsgJzonICsgbHooZC5nZXRVVENNaW51dGVzKCkpICtcbiAgICAgICc6JyArIGx6KGQuZ2V0VVRDU2Vjb25kcygpKSArICcuJyArIChtID4gOTkgPyBtIDogJzAnICsgbHoobSkpICsgJ1onO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmRhdGUudG8taXNvLXN0cmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDE5N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIERhdGVQcm90byAgICA9IERhdGUucHJvdG90eXBlXG4gICwgSU5WQUxJRF9EQVRFID0gJ0ludmFsaWQgRGF0ZSdcbiAgLCBUT19TVFJJTkcgICAgPSAndG9TdHJpbmcnXG4gICwgJHRvU3RyaW5nICAgID0gRGF0ZVByb3RvW1RPX1NUUklOR11cbiAgLCBnZXRUaW1lICAgICAgPSBEYXRlUHJvdG8uZ2V0VGltZTtcbmlmKG5ldyBEYXRlKE5hTikgKyAnJyAhPSBJTlZBTElEX0RBVEUpe1xuICByZXF1aXJlKCcuL19yZWRlZmluZScpKERhdGVQcm90bywgVE9fU1RSSU5HLCBmdW5jdGlvbiB0b1N0cmluZygpe1xuICAgIHZhciB2YWx1ZSA9IGdldFRpbWUuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gJHRvU3RyaW5nLmNhbGwodGhpcykgOiBJTlZBTElEX0RBVEU7XG4gIH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuZGF0ZS50by1zdHJpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAxOThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBUT19QUklNSVRJVkUgPSByZXF1aXJlKCcuL193a3MnKSgndG9QcmltaXRpdmUnKVxuICAsIHByb3RvICAgICAgICA9IERhdGUucHJvdG90eXBlO1xuXG5pZighKFRPX1BSSU1JVElWRSBpbiBwcm90bykpcmVxdWlyZSgnLi9faGlkZScpKHByb3RvLCBUT19QUklNSVRJVkUsIHJlcXVpcmUoJy4vX2RhdGUtdG8tcHJpbWl0aXZlJykpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuZGF0ZS50by1wcmltaXRpdmUuanNcbiAqKiBtb2R1bGUgaWQgPSAxOTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBhbk9iamVjdCAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgdG9QcmltaXRpdmUgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKVxuICAsIE5VTUJFUiAgICAgID0gJ251bWJlcic7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaGludCl7XG4gIGlmKGhpbnQgIT09ICdzdHJpbmcnICYmIGhpbnQgIT09IE5VTUJFUiAmJiBoaW50ICE9PSAnZGVmYXVsdCcpdGhyb3cgVHlwZUVycm9yKCdJbmNvcnJlY3QgaGludCcpO1xuICByZXR1cm4gdG9QcmltaXRpdmUoYW5PYmplY3QodGhpcyksIGhpbnQgIT0gTlVNQkVSKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19kYXRlLXRvLXByaW1pdGl2ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjIuMS4yLjIgLyAxNS40LjMuMiBBcnJheS5pc0FycmF5KGFyZylcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnQXJyYXknLCB7aXNBcnJheTogcmVxdWlyZSgnLi9faXMtYXJyYXknKX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuaXMtYXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSAyMDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBjdHggICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2N0eCcpXG4gICwgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIHRvT2JqZWN0ICAgICAgID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JylcbiAgLCBjYWxsICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXItY2FsbCcpXG4gICwgaXNBcnJheUl0ZXIgICAgPSByZXF1aXJlKCcuL19pcy1hcnJheS1pdGVyJylcbiAgLCB0b0xlbmd0aCAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpXG4gICwgY3JlYXRlUHJvcGVydHkgPSByZXF1aXJlKCcuL19jcmVhdGUtcHJvcGVydHknKVxuICAsIGdldEl0ZXJGbiAgICAgID0gcmVxdWlyZSgnLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9faXRlci1kZXRlY3QnKShmdW5jdGlvbihpdGVyKXsgQXJyYXkuZnJvbShpdGVyKTsgfSksICdBcnJheScsIHtcbiAgLy8gMjIuMS4yLjEgQXJyYXkuZnJvbShhcnJheUxpa2UsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKVxuICBmcm9tOiBmdW5jdGlvbiBmcm9tKGFycmF5TGlrZS8qLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZCovKXtcbiAgICB2YXIgTyAgICAgICA9IHRvT2JqZWN0KGFycmF5TGlrZSlcbiAgICAgICwgQyAgICAgICA9IHR5cGVvZiB0aGlzID09ICdmdW5jdGlvbicgPyB0aGlzIDogQXJyYXlcbiAgICAgICwgYUxlbiAgICA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICwgbWFwZm4gICA9IGFMZW4gPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkXG4gICAgICAsIG1hcHBpbmcgPSBtYXBmbiAhPT0gdW5kZWZpbmVkXG4gICAgICAsIGluZGV4ICAgPSAwXG4gICAgICAsIGl0ZXJGbiAgPSBnZXRJdGVyRm4oTylcbiAgICAgICwgbGVuZ3RoLCByZXN1bHQsIHN0ZXAsIGl0ZXJhdG9yO1xuICAgIGlmKG1hcHBpbmcpbWFwZm4gPSBjdHgobWFwZm4sIGFMZW4gPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkLCAyKTtcbiAgICAvLyBpZiBvYmplY3QgaXNuJ3QgaXRlcmFibGUgb3IgaXQncyBhcnJheSB3aXRoIGRlZmF1bHQgaXRlcmF0b3IgLSB1c2Ugc2ltcGxlIGNhc2VcbiAgICBpZihpdGVyRm4gIT0gdW5kZWZpbmVkICYmICEoQyA9PSBBcnJheSAmJiBpc0FycmF5SXRlcihpdGVyRm4pKSl7XG4gICAgICBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChPKSwgcmVzdWx0ID0gbmV3IEM7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgaW5kZXgrKyl7XG4gICAgICAgIGNyZWF0ZVByb3BlcnR5KHJlc3VsdCwgaW5kZXgsIG1hcHBpbmcgPyBjYWxsKGl0ZXJhdG9yLCBtYXBmbiwgW3N0ZXAudmFsdWUsIGluZGV4XSwgdHJ1ZSkgOiBzdGVwLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpO1xuICAgICAgZm9yKHJlc3VsdCA9IG5ldyBDKGxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKXtcbiAgICAgICAgY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgbWFwcGluZyA/IG1hcGZuKE9baW5kZXhdLCBpbmRleCkgOiBPW2luZGV4XSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC5sZW5ndGggPSBpbmRleDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59KTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuZnJvbS5qc1xuICoqIG1vZHVsZSBpZCA9IDIwMlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvclxudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpe1xuICB0cnkge1xuICAgIHJldHVybiBlbnRyaWVzID8gZm4oYW5PYmplY3QodmFsdWUpWzBdLCB2YWx1ZVsxXSkgOiBmbih2YWx1ZSk7XG4gIC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pXG4gIH0gY2F0Y2goZSl7XG4gICAgdmFyIHJldCA9IGl0ZXJhdG9yWydyZXR1cm4nXTtcbiAgICBpZihyZXQgIT09IHVuZGVmaW5lZClhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpO1xuICAgIHRocm93IGU7XG4gIH1cbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19pdGVyLWNhbGwuanNcbiAqKiBtb2R1bGUgaWQgPSAyMDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3JcbnZhciBJdGVyYXRvcnMgID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJylcbiAgLCBJVEVSQVRPUiAgID0gcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJylcbiAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19pcy1hcnJheS1pdGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMjA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgJGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJylcbiAgLCBjcmVhdGVEZXNjICAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBpbmRleCwgdmFsdWUpe1xuICBpZihpbmRleCBpbiBvYmplY3QpJGRlZmluZVByb3BlcnR5LmYob2JqZWN0LCBpbmRleCwgY3JlYXRlRGVzYygwLCB2YWx1ZSkpO1xuICBlbHNlIG9iamVjdFtpbmRleF0gPSB2YWx1ZTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19jcmVhdGUtcHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSAyMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBjbGFzc29mICAgPSByZXF1aXJlKCcuL19jbGFzc29mJylcbiAgLCBJVEVSQVRPUiAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKVxuICAsIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19jb3JlJykuZ2V0SXRlcmF0b3JNZXRob2QgPSBmdW5jdGlvbihpdCl7XG4gIGlmKGl0ICE9IHVuZGVmaW5lZClyZXR1cm4gaXRbSVRFUkFUT1JdXG4gICAgfHwgaXRbJ0BAaXRlcmF0b3InXVxuICAgIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QuanNcbiAqKiBtb2R1bGUgaWQgPSAyMDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBJVEVSQVRPUiAgICAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKVxuICAsIFNBRkVfQ0xPU0lORyA9IGZhbHNlO1xuXG50cnkge1xuICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7XG4gIHJpdGVyWydyZXR1cm4nXSA9IGZ1bmN0aW9uKCl7IFNBRkVfQ0xPU0lORyA9IHRydWU7IH07XG4gIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pO1xufSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMsIHNraXBDbG9zaW5nKXtcbiAgaWYoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpcmV0dXJuIGZhbHNlO1xuICB2YXIgc2FmZSA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciBhcnIgID0gWzddXG4gICAgICAsIGl0ZXIgPSBhcnJbSVRFUkFUT1JdKCk7XG4gICAgaXRlci5uZXh0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHtkb25lOiBzYWZlID0gdHJ1ZX07IH07XG4gICAgYXJyW0lURVJBVE9SXSA9IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyOyB9O1xuICAgIGV4ZWMoYXJyKTtcbiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuICByZXR1cm4gc2FmZTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19pdGVyLWRldGVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDIwN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBjcmVhdGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX2NyZWF0ZS1wcm9wZXJ0eScpO1xuXG4vLyBXZWJLaXQgQXJyYXkub2YgaXNuJ3QgZ2VuZXJpY1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIGZ1bmN0aW9uIEYoKXt9XG4gIHJldHVybiAhKEFycmF5Lm9mLmNhbGwoRikgaW5zdGFuY2VvZiBGKTtcbn0pLCAnQXJyYXknLCB7XG4gIC8vIDIyLjEuMi4zIEFycmF5Lm9mKCAuLi5pdGVtcylcbiAgb2Y6IGZ1bmN0aW9uIG9mKC8qIC4uLmFyZ3MgKi8pe1xuICAgIHZhciBpbmRleCAgPSAwXG4gICAgICAsIGFMZW4gICA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICwgcmVzdWx0ID0gbmV3ICh0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nID8gdGhpcyA6IEFycmF5KShhTGVuKTtcbiAgICB3aGlsZShhTGVuID4gaW5kZXgpY3JlYXRlUHJvcGVydHkocmVzdWx0LCBpbmRleCwgYXJndW1lbnRzW2luZGV4KytdKTtcbiAgICByZXN1bHQubGVuZ3RoID0gYUxlbjtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5Lm9mLmpzXG4gKiogbW9kdWxlIGlkID0gMjA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmpvaW4oc2VwYXJhdG9yKVxudmFyICRleHBvcnQgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgYXJyYXlKb2luID0gW10uam9pbjtcblxuLy8gZmFsbGJhY2sgZm9yIG5vdCBhcnJheS1saWtlIHN0cmluZ3NcbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKHJlcXVpcmUoJy4vX2lvYmplY3QnKSAhPSBPYmplY3QgfHwgIXJlcXVpcmUoJy4vX3N0cmljdC1tZXRob2QnKShhcnJheUpvaW4pKSwgJ0FycmF5Jywge1xuICBqb2luOiBmdW5jdGlvbiBqb2luKHNlcGFyYXRvcil7XG4gICAgcmV0dXJuIGFycmF5Sm9pbi5jYWxsKHRvSU9iamVjdCh0aGlzKSwgc2VwYXJhdG9yID09PSB1bmRlZmluZWQgPyAnLCcgOiBzZXBhcmF0b3IpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmpvaW4uanNcbiAqKiBtb2R1bGUgaWQgPSAyMDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBmYWlscyA9IHJlcXVpcmUoJy4vX2ZhaWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obWV0aG9kLCBhcmcpe1xuICByZXR1cm4gISFtZXRob2QgJiYgZmFpbHMoZnVuY3Rpb24oKXtcbiAgICBhcmcgPyBtZXRob2QuY2FsbChudWxsLCBmdW5jdGlvbigpe30sIDEpIDogbWV0aG9kLmNhbGwobnVsbCk7XG4gIH0pO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3N0cmljdC1tZXRob2QuanNcbiAqKiBtb2R1bGUgaWQgPSAyMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBodG1sICAgICAgID0gcmVxdWlyZSgnLi9faHRtbCcpXG4gICwgY29mICAgICAgICA9IHJlcXVpcmUoJy4vX2NvZicpXG4gICwgdG9JbmRleCAgICA9IHJlcXVpcmUoJy4vX3RvLWluZGV4JylcbiAgLCB0b0xlbmd0aCAgID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJylcbiAgLCBhcnJheVNsaWNlID0gW10uc2xpY2U7XG5cbi8vIGZhbGxiYWNrIGZvciBub3QgYXJyYXktbGlrZSBFUzMgc3RyaW5ncyBhbmQgRE9NIG9iamVjdHNcbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpe1xuICBpZihodG1sKWFycmF5U2xpY2UuY2FsbChodG1sKTtcbn0pLCAnQXJyYXknLCB7XG4gIHNsaWNlOiBmdW5jdGlvbiBzbGljZShiZWdpbiwgZW5kKXtcbiAgICB2YXIgbGVuICAgPSB0b0xlbmd0aCh0aGlzLmxlbmd0aClcbiAgICAgICwga2xhc3MgPSBjb2YodGhpcyk7XG4gICAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiBlbmQ7XG4gICAgaWYoa2xhc3MgPT0gJ0FycmF5JylyZXR1cm4gYXJyYXlTbGljZS5jYWxsKHRoaXMsIGJlZ2luLCBlbmQpO1xuICAgIHZhciBzdGFydCAgPSB0b0luZGV4KGJlZ2luLCBsZW4pXG4gICAgICAsIHVwVG8gICA9IHRvSW5kZXgoZW5kLCBsZW4pXG4gICAgICAsIHNpemUgICA9IHRvTGVuZ3RoKHVwVG8gLSBzdGFydClcbiAgICAgICwgY2xvbmVkID0gQXJyYXkoc2l6ZSlcbiAgICAgICwgaSAgICAgID0gMDtcbiAgICBmb3IoOyBpIDwgc2l6ZTsgaSsrKWNsb25lZFtpXSA9IGtsYXNzID09ICdTdHJpbmcnXG4gICAgICA/IHRoaXMuY2hhckF0KHN0YXJ0ICsgaSlcbiAgICAgIDogdGhpc1tzdGFydCArIGldO1xuICAgIHJldHVybiBjbG9uZWQ7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuc2xpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAyMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKVxuICAsIHRvT2JqZWN0ICA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgZmFpbHMgICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKVxuICAsICRzb3J0ICAgICA9IFtdLnNvcnRcbiAgLCB0ZXN0ICAgICAgPSBbMSwgMiwgM107XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKGZhaWxzKGZ1bmN0aW9uKCl7XG4gIC8vIElFOC1cbiAgdGVzdC5zb3J0KHVuZGVmaW5lZCk7XG59KSB8fCAhZmFpbHMoZnVuY3Rpb24oKXtcbiAgLy8gVjggYnVnXG4gIHRlc3Quc29ydChudWxsKTtcbiAgLy8gT2xkIFdlYktpdFxufSkgfHwgIXJlcXVpcmUoJy4vX3N0cmljdC1tZXRob2QnKSgkc29ydCkpLCAnQXJyYXknLCB7XG4gIC8vIDIyLjEuMy4yNSBBcnJheS5wcm90b3R5cGUuc29ydChjb21wYXJlZm4pXG4gIHNvcnQ6IGZ1bmN0aW9uIHNvcnQoY29tcGFyZWZuKXtcbiAgICByZXR1cm4gY29tcGFyZWZuID09PSB1bmRlZmluZWRcbiAgICAgID8gJHNvcnQuY2FsbCh0b09iamVjdCh0aGlzKSlcbiAgICAgIDogJHNvcnQuY2FsbCh0b09iamVjdCh0aGlzKSwgYUZ1bmN0aW9uKGNvbXBhcmVmbikpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LnNvcnQuanNcbiAqKiBtb2R1bGUgaWQgPSAyMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgJGZvckVhY2ggPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoMClcbiAgLCBTVFJJQ1QgICA9IHJlcXVpcmUoJy4vX3N0cmljdC1tZXRob2QnKShbXS5mb3JFYWNoLCB0cnVlKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAhU1RSSUNULCAnQXJyYXknLCB7XG4gIC8vIDIyLjEuMy4xMCAvIDE1LjQuNC4xOCBBcnJheS5wcm90b3R5cGUuZm9yRWFjaChjYWxsYmFja2ZuIFssIHRoaXNBcmddKVxuICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKXtcbiAgICByZXR1cm4gJGZvckVhY2godGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5mb3ItZWFjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDIxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMCAtPiBBcnJheSNmb3JFYWNoXG4vLyAxIC0+IEFycmF5I21hcFxuLy8gMiAtPiBBcnJheSNmaWx0ZXJcbi8vIDMgLT4gQXJyYXkjc29tZVxuLy8gNCAtPiBBcnJheSNldmVyeVxuLy8gNSAtPiBBcnJheSNmaW5kXG4vLyA2IC0+IEFycmF5I2ZpbmRJbmRleFxudmFyIGN0eCAgICAgID0gcmVxdWlyZSgnLi9fY3R4JylcbiAgLCBJT2JqZWN0ICA9IHJlcXVpcmUoJy4vX2lvYmplY3QnKVxuICAsIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JylcbiAgLCB0b0xlbmd0aCA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpXG4gICwgYXNjICAgICAgPSByZXF1aXJlKCcuL19hcnJheS1zcGVjaWVzLWNyZWF0ZScpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihUWVBFLCAkY3JlYXRlKXtcbiAgdmFyIElTX01BUCAgICAgICAgPSBUWVBFID09IDFcbiAgICAsIElTX0ZJTFRFUiAgICAgPSBUWVBFID09IDJcbiAgICAsIElTX1NPTUUgICAgICAgPSBUWVBFID09IDNcbiAgICAsIElTX0VWRVJZICAgICAgPSBUWVBFID09IDRcbiAgICAsIElTX0ZJTkRfSU5ERVggPSBUWVBFID09IDZcbiAgICAsIE5PX0hPTEVTICAgICAgPSBUWVBFID09IDUgfHwgSVNfRklORF9JTkRFWFxuICAgICwgY3JlYXRlICAgICAgICA9ICRjcmVhdGUgfHwgYXNjO1xuICByZXR1cm4gZnVuY3Rpb24oJHRoaXMsIGNhbGxiYWNrZm4sIHRoYXQpe1xuICAgIHZhciBPICAgICAgPSB0b09iamVjdCgkdGhpcylcbiAgICAgICwgc2VsZiAgID0gSU9iamVjdChPKVxuICAgICAgLCBmICAgICAgPSBjdHgoY2FsbGJhY2tmbiwgdGhhdCwgMylcbiAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoc2VsZi5sZW5ndGgpXG4gICAgICAsIGluZGV4ICA9IDBcbiAgICAgICwgcmVzdWx0ID0gSVNfTUFQID8gY3JlYXRlKCR0aGlzLCBsZW5ndGgpIDogSVNfRklMVEVSID8gY3JlYXRlKCR0aGlzLCAwKSA6IHVuZGVmaW5lZFxuICAgICAgLCB2YWwsIHJlcztcbiAgICBmb3IoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKWlmKE5PX0hPTEVTIHx8IGluZGV4IGluIHNlbGYpe1xuICAgICAgdmFsID0gc2VsZltpbmRleF07XG4gICAgICByZXMgPSBmKHZhbCwgaW5kZXgsIE8pO1xuICAgICAgaWYoVFlQRSl7XG4gICAgICAgIGlmKElTX01BUClyZXN1bHRbaW5kZXhdID0gcmVzOyAgICAgICAgICAgIC8vIG1hcFxuICAgICAgICBlbHNlIGlmKHJlcylzd2l0Y2goVFlQRSl7XG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgICAgICAgIC8vIHNvbWVcbiAgICAgICAgICBjYXNlIDU6IHJldHVybiB2YWw7ICAgICAgICAgICAgICAgICAgICAgLy8gZmluZFxuICAgICAgICAgIGNhc2UgNjogcmV0dXJuIGluZGV4OyAgICAgICAgICAgICAgICAgICAvLyBmaW5kSW5kZXhcbiAgICAgICAgICBjYXNlIDI6IHJlc3VsdC5wdXNoKHZhbCk7ICAgICAgICAgICAgICAgLy8gZmlsdGVyXG4gICAgICAgIH0gZWxzZSBpZihJU19FVkVSWSlyZXR1cm4gZmFsc2U7ICAgICAgICAgIC8vIGV2ZXJ5XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBJU19GSU5EX0lOREVYID8gLTEgOiBJU19TT01FIHx8IElTX0VWRVJZID8gSVNfRVZFUlkgOiByZXN1bHQ7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fYXJyYXktbWV0aG9kcy5qc1xuICoqIG1vZHVsZSBpZCA9IDIxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gOS40LjIuMyBBcnJheVNwZWNpZXNDcmVhdGUob3JpZ2luYWxBcnJheSwgbGVuZ3RoKVxudmFyIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4vX2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3InKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcmlnaW5hbCwgbGVuZ3RoKXtcbiAgcmV0dXJuIG5ldyAoc3BlY2llc0NvbnN0cnVjdG9yKG9yaWdpbmFsKSkobGVuZ3RoKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19hcnJheS1zcGVjaWVzLWNyZWF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JylcbiAgLCBpc0FycmF5ICA9IHJlcXVpcmUoJy4vX2lzLWFycmF5JylcbiAgLCBTUEVDSUVTICA9IHJlcXVpcmUoJy4vX3drcycpKCdzcGVjaWVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3JpZ2luYWwpe1xuICB2YXIgQztcbiAgaWYoaXNBcnJheShvcmlnaW5hbCkpe1xuICAgIEMgPSBvcmlnaW5hbC5jb25zdHJ1Y3RvcjtcbiAgICAvLyBjcm9zcy1yZWFsbSBmYWxsYmFja1xuICAgIGlmKHR5cGVvZiBDID09ICdmdW5jdGlvbicgJiYgKEMgPT09IEFycmF5IHx8IGlzQXJyYXkoQy5wcm90b3R5cGUpKSlDID0gdW5kZWZpbmVkO1xuICAgIGlmKGlzT2JqZWN0KEMpKXtcbiAgICAgIEMgPSBDW1NQRUNJRVNdO1xuICAgICAgaWYoQyA9PT0gbnVsbClDID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSByZXR1cm4gQyA9PT0gdW5kZWZpbmVkID8gQXJyYXkgOiBDO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2FycmF5LXNwZWNpZXMtY29uc3RydWN0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSAyMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkbWFwICAgID0gcmVxdWlyZSgnLi9fYXJyYXktbWV0aG9kcycpKDEpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoW10ubWFwLCB0cnVlKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuMTUgLyAxNS40LjQuMTkgQXJyYXkucHJvdG90eXBlLm1hcChjYWxsYmFja2ZuIFssIHRoaXNBcmddKVxuICBtYXA6IGZ1bmN0aW9uIG1hcChjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLyl7XG4gICAgcmV0dXJuICRtYXAodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5tYXAuanNcbiAqKiBtb2R1bGUgaWQgPSAyMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkZmlsdGVyID0gcmVxdWlyZSgnLi9fYXJyYXktbWV0aG9kcycpKDIpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoW10uZmlsdGVyLCB0cnVlKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuNyAvIDE1LjQuNC4yMCBBcnJheS5wcm90b3R5cGUuZmlsdGVyKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pXG4gIGZpbHRlcjogZnVuY3Rpb24gZmlsdGVyKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKXtcbiAgICByZXR1cm4gJGZpbHRlcih0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHNbMV0pO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmZpbHRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDIxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRzb21lICAgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoMyk7XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIXJlcXVpcmUoJy4vX3N0cmljdC1tZXRob2QnKShbXS5zb21lLCB0cnVlKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuMjMgLyAxNS40LjQuMTcgQXJyYXkucHJvdG90eXBlLnNvbWUoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSlcbiAgc29tZTogZnVuY3Rpb24gc29tZShjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLyl7XG4gICAgcmV0dXJuICRzb21lKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50c1sxXSk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuc29tZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRldmVyeSAgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoNCk7XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIXJlcXVpcmUoJy4vX3N0cmljdC1tZXRob2QnKShbXS5ldmVyeSwgdHJ1ZSksICdBcnJheScsIHtcbiAgLy8gMjIuMS4zLjUgLyAxNS40LjQuMTYgQXJyYXkucHJvdG90eXBlLmV2ZXJ5KGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pXG4gIGV2ZXJ5OiBmdW5jdGlvbiBldmVyeShjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLyl7XG4gICAgcmV0dXJuICRldmVyeSh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHNbMV0pO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmV2ZXJ5LmpzXG4gKiogbW9kdWxlIGlkID0gMjIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgJHJlZHVjZSA9IHJlcXVpcmUoJy4vX2FycmF5LXJlZHVjZScpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoW10ucmVkdWNlLCB0cnVlKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuMTggLyAxNS40LjQuMjEgQXJyYXkucHJvdG90eXBlLnJlZHVjZShjYWxsYmFja2ZuIFssIGluaXRpYWxWYWx1ZV0pXG4gIHJlZHVjZTogZnVuY3Rpb24gcmVkdWNlKGNhbGxiYWNrZm4gLyogLCBpbml0aWFsVmFsdWUgKi8pe1xuICAgIHJldHVybiAkcmVkdWNlKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50c1sxXSwgZmFsc2UpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LnJlZHVjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKVxuICAsIHRvT2JqZWN0ICA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgSU9iamVjdCAgID0gcmVxdWlyZSgnLi9faW9iamVjdCcpXG4gICwgdG9MZW5ndGggID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGhhdCwgY2FsbGJhY2tmbiwgYUxlbiwgbWVtbywgaXNSaWdodCl7XG4gIGFGdW5jdGlvbihjYWxsYmFja2ZuKTtcbiAgdmFyIE8gICAgICA9IHRvT2JqZWN0KHRoYXQpXG4gICAgLCBzZWxmICAgPSBJT2JqZWN0KE8pXG4gICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aClcbiAgICAsIGluZGV4ICA9IGlzUmlnaHQgPyBsZW5ndGggLSAxIDogMFxuICAgICwgaSAgICAgID0gaXNSaWdodCA/IC0xIDogMTtcbiAgaWYoYUxlbiA8IDIpZm9yKDs7KXtcbiAgICBpZihpbmRleCBpbiBzZWxmKXtcbiAgICAgIG1lbW8gPSBzZWxmW2luZGV4XTtcbiAgICAgIGluZGV4ICs9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgaW5kZXggKz0gaTtcbiAgICBpZihpc1JpZ2h0ID8gaW5kZXggPCAwIDogbGVuZ3RoIDw9IGluZGV4KXtcbiAgICAgIHRocm93IFR5cGVFcnJvcignUmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZScpO1xuICAgIH1cbiAgfVxuICBmb3IoO2lzUmlnaHQgPyBpbmRleCA+PSAwIDogbGVuZ3RoID4gaW5kZXg7IGluZGV4ICs9IGkpaWYoaW5kZXggaW4gc2VsZil7XG4gICAgbWVtbyA9IGNhbGxiYWNrZm4obWVtbywgc2VsZltpbmRleF0sIGluZGV4LCBPKTtcbiAgfVxuICByZXR1cm4gbWVtbztcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19hcnJheS1yZWR1Y2UuanNcbiAqKiBtb2R1bGUgaWQgPSAyMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkcmVkdWNlID0gcmVxdWlyZSgnLi9fYXJyYXktcmVkdWNlJyk7XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIXJlcXVpcmUoJy4vX3N0cmljdC1tZXRob2QnKShbXS5yZWR1Y2VSaWdodCwgdHJ1ZSksICdBcnJheScsIHtcbiAgLy8gMjIuMS4zLjE5IC8gMTUuNC40LjIyIEFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodChjYWxsYmFja2ZuIFssIGluaXRpYWxWYWx1ZV0pXG4gIHJlZHVjZVJpZ2h0OiBmdW5jdGlvbiByZWR1Y2VSaWdodChjYWxsYmFja2ZuIC8qICwgaW5pdGlhbFZhbHVlICovKXtcbiAgICByZXR1cm4gJHJlZHVjZSh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoLCBhcmd1bWVudHNbMV0sIHRydWUpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LnJlZHVjZS1yaWdodC5qc1xuICoqIG1vZHVsZSBpZCA9IDIyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRpbmRleE9mICAgICAgPSByZXF1aXJlKCcuL19hcnJheS1pbmNsdWRlcycpKGZhbHNlKVxuICAsICRuYXRpdmUgICAgICAgPSBbXS5pbmRleE9mXG4gICwgTkVHQVRJVkVfWkVSTyA9ICEhJG5hdGl2ZSAmJiAxIC8gWzFdLmluZGV4T2YoMSwgLTApIDwgMDtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoTkVHQVRJVkVfWkVSTyB8fCAhcmVxdWlyZSgnLi9fc3RyaWN0LW1ldGhvZCcpKCRuYXRpdmUpKSwgJ0FycmF5Jywge1xuICAvLyAyMi4xLjMuMTEgLyAxNS40LjQuMTQgQXJyYXkucHJvdG90eXBlLmluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKVxuICBpbmRleE9mOiBmdW5jdGlvbiBpbmRleE9mKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCA9IDAgKi8pe1xuICAgIHJldHVybiBORUdBVElWRV9aRVJPXG4gICAgICAvLyBjb252ZXJ0IC0wIHRvICswXG4gICAgICA/ICRuYXRpdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCAwXG4gICAgICA6ICRpbmRleE9mKHRoaXMsIHNlYXJjaEVsZW1lbnQsIGFyZ3VtZW50c1sxXSk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuaW5kZXgtb2YuanNcbiAqKiBtb2R1bGUgaWQgPSAyMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCB0b0lPYmplY3QgICAgID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgdG9JbnRlZ2VyICAgICA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKVxuICAsIHRvTGVuZ3RoICAgICAgPSByZXF1aXJlKCcuL190by1sZW5ndGgnKVxuICAsICRuYXRpdmUgICAgICAgPSBbXS5sYXN0SW5kZXhPZlxuICAsIE5FR0FUSVZFX1pFUk8gPSAhISRuYXRpdmUgJiYgMSAvIFsxXS5sYXN0SW5kZXhPZigxLCAtMCkgPCAwO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChORUdBVElWRV9aRVJPIHx8ICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoJG5hdGl2ZSkpLCAnQXJyYXknLCB7XG4gIC8vIDIyLjEuMy4xNCAvIDE1LjQuNC4xNSBBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKVxuICBsYXN0SW5kZXhPZjogZnVuY3Rpb24gbGFzdEluZGV4T2Yoc2VhcmNoRWxlbWVudCAvKiwgZnJvbUluZGV4ID0gQFsqLTFdICovKXtcbiAgICAvLyBjb252ZXJ0IC0wIHRvICswXG4gICAgaWYoTkVHQVRJVkVfWkVSTylyZXR1cm4gJG5hdGl2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IDA7XG4gICAgdmFyIE8gICAgICA9IHRvSU9iamVjdCh0aGlzKVxuICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aClcbiAgICAgICwgaW5kZXggID0gbGVuZ3RoIC0gMTtcbiAgICBpZihhcmd1bWVudHMubGVuZ3RoID4gMSlpbmRleCA9IE1hdGgubWluKGluZGV4LCB0b0ludGVnZXIoYXJndW1lbnRzWzFdKSk7XG4gICAgaWYoaW5kZXggPCAwKWluZGV4ID0gbGVuZ3RoICsgaW5kZXg7XG4gICAgZm9yKDtpbmRleCA+PSAwOyBpbmRleC0tKWlmKGluZGV4IGluIE8paWYoT1tpbmRleF0gPT09IHNlYXJjaEVsZW1lbnQpcmV0dXJuIGluZGV4IHx8IDA7XG4gICAgcmV0dXJuIC0xO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5Lmxhc3QtaW5kZXgtb2YuanNcbiAqKiBtb2R1bGUgaWQgPSAyMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIyLjEuMy4zIEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluKHRhcmdldCwgc3RhcnQsIGVuZCA9IHRoaXMubGVuZ3RoKVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAsICdBcnJheScsIHtjb3B5V2l0aGluOiByZXF1aXJlKCcuL19hcnJheS1jb3B5LXdpdGhpbicpfSk7XG5cbnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKCdjb3B5V2l0aGluJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5jb3B5LXdpdGhpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDIyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjIuMS4zLjMgQXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4odGFyZ2V0LCBzdGFydCwgZW5kID0gdGhpcy5sZW5ndGgpXG4ndXNlIHN0cmljdCc7XG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsIHRvSW5kZXggID0gcmVxdWlyZSgnLi9fdG8taW5kZXgnKVxuICAsIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gW10uY29weVdpdGhpbiB8fCBmdW5jdGlvbiBjb3B5V2l0aGluKHRhcmdldC8qPSAwKi8sIHN0YXJ0Lyo9IDAsIGVuZCA9IEBsZW5ndGgqLyl7XG4gIHZhciBPICAgICA9IHRvT2JqZWN0KHRoaXMpXG4gICAgLCBsZW4gICA9IHRvTGVuZ3RoKE8ubGVuZ3RoKVxuICAgICwgdG8gICAgPSB0b0luZGV4KHRhcmdldCwgbGVuKVxuICAgICwgZnJvbSAgPSB0b0luZGV4KHN0YXJ0LCBsZW4pXG4gICAgLCBlbmQgICA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkXG4gICAgLCBjb3VudCA9IE1hdGgubWluKChlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IHRvSW5kZXgoZW5kLCBsZW4pKSAtIGZyb20sIGxlbiAtIHRvKVxuICAgICwgaW5jICAgPSAxO1xuICBpZihmcm9tIDwgdG8gJiYgdG8gPCBmcm9tICsgY291bnQpe1xuICAgIGluYyAgPSAtMTtcbiAgICBmcm9tICs9IGNvdW50IC0gMTtcbiAgICB0byAgICs9IGNvdW50IC0gMTtcbiAgfVxuICB3aGlsZShjb3VudC0tID4gMCl7XG4gICAgaWYoZnJvbSBpbiBPKU9bdG9dID0gT1tmcm9tXTtcbiAgICBlbHNlIGRlbGV0ZSBPW3RvXTtcbiAgICB0byAgICs9IGluYztcbiAgICBmcm9tICs9IGluYztcbiAgfSByZXR1cm4gTztcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19hcnJheS1jb3B5LXdpdGhpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDIyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjIuMS4zLjMxIEFycmF5LnByb3RvdHlwZVtAQHVuc2NvcGFibGVzXVxudmFyIFVOU0NPUEFCTEVTID0gcmVxdWlyZSgnLi9fd2tzJykoJ3Vuc2NvcGFibGVzJylcbiAgLCBBcnJheVByb3RvICA9IEFycmF5LnByb3RvdHlwZTtcbmlmKEFycmF5UHJvdG9bVU5TQ09QQUJMRVNdID09IHVuZGVmaW5lZClyZXF1aXJlKCcuL19oaWRlJykoQXJyYXlQcm90bywgVU5TQ09QQUJMRVMsIHt9KTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcbiAgQXJyYXlQcm90b1tVTlNDT1BBQkxFU11ba2V5XSA9IHRydWU7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fYWRkLXRvLXVuc2NvcGFibGVzLmpzXG4gKiogbW9kdWxlIGlkID0gMjI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMi4xLjMuNiBBcnJheS5wcm90b3R5cGUuZmlsbCh2YWx1ZSwgc3RhcnQgPSAwLCBlbmQgPSB0aGlzLmxlbmd0aClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnQXJyYXknLCB7ZmlsbDogcmVxdWlyZSgnLi9fYXJyYXktZmlsbCcpfSk7XG5cbnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKCdmaWxsJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5maWxsLmpzXG4gKiogbW9kdWxlIGlkID0gMjI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyMi4xLjMuNiBBcnJheS5wcm90b3R5cGUuZmlsbCh2YWx1ZSwgc3RhcnQgPSAwLCBlbmQgPSB0aGlzLmxlbmd0aClcbid1c2Ugc3RyaWN0JztcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgdG9JbmRleCAgPSByZXF1aXJlKCcuL190by1pbmRleCcpXG4gICwgdG9MZW5ndGggPSByZXF1aXJlKCcuL190by1sZW5ndGgnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZmlsbCh2YWx1ZSAvKiwgc3RhcnQgPSAwLCBlbmQgPSBAbGVuZ3RoICovKXtcbiAgdmFyIE8gICAgICA9IHRvT2JqZWN0KHRoaXMpXG4gICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aClcbiAgICAsIGFMZW4gICA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAsIGluZGV4ICA9IHRvSW5kZXgoYUxlbiA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIGxlbmd0aClcbiAgICAsIGVuZCAgICA9IGFMZW4gPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkXG4gICAgLCBlbmRQb3MgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbmd0aCA6IHRvSW5kZXgoZW5kLCBsZW5ndGgpO1xuICB3aGlsZShlbmRQb3MgPiBpbmRleClPW2luZGV4KytdID0gdmFsdWU7XG4gIHJldHVybiBPO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2FycmF5LWZpbGwuanNcbiAqKiBtb2R1bGUgaWQgPSAyMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0Jztcbi8vIDIyLjEuMy44IEFycmF5LnByb3RvdHlwZS5maW5kKHByZWRpY2F0ZSwgdGhpc0FyZyA9IHVuZGVmaW5lZClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkZmluZCAgID0gcmVxdWlyZSgnLi9fYXJyYXktbWV0aG9kcycpKDUpXG4gICwgS0VZICAgICA9ICdmaW5kJ1xuICAsIGZvcmNlZCAgPSB0cnVlO1xuLy8gU2hvdWxkbid0IHNraXAgaG9sZXNcbmlmKEtFWSBpbiBbXSlBcnJheSgxKVtLRVldKGZ1bmN0aW9uKCl7IGZvcmNlZCA9IGZhbHNlOyB9KTtcbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogZm9yY2VkLCAnQXJyYXknLCB7XG4gIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoY2FsbGJhY2tmbi8qLCB0aGF0ID0gdW5kZWZpbmVkICovKXtcbiAgICByZXR1cm4gJGZpbmQodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcbnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKEtFWSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5maW5kLmpzXG4gKiogbW9kdWxlIGlkID0gMjMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyAyMi4xLjMuOSBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4KHByZWRpY2F0ZSwgdGhpc0FyZyA9IHVuZGVmaW5lZClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkZmluZCAgID0gcmVxdWlyZSgnLi9fYXJyYXktbWV0aG9kcycpKDYpXG4gICwgS0VZICAgICA9ICdmaW5kSW5kZXgnXG4gICwgZm9yY2VkICA9IHRydWU7XG4vLyBTaG91bGRuJ3Qgc2tpcCBob2xlc1xuaWYoS0VZIGluIFtdKUFycmF5KDEpW0tFWV0oZnVuY3Rpb24oKXsgZm9yY2VkID0gZmFsc2U7IH0pO1xuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBmb3JjZWQsICdBcnJheScsIHtcbiAgZmluZEluZGV4OiBmdW5jdGlvbiBmaW5kSW5kZXgoY2FsbGJhY2tmbi8qLCB0aGF0ID0gdW5kZWZpbmVkICovKXtcbiAgICByZXR1cm4gJGZpbmQodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcbnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKEtFWSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5maW5kLWluZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMjMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJyZXF1aXJlKCcuL19zZXQtc3BlY2llcycpKCdBcnJheScpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuc3BlY2llcy5qc1xuICoqIG1vZHVsZSBpZCA9IDIzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGdsb2JhbCAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBkUCAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpXG4gICwgU1BFQ0lFUyAgICAgPSByZXF1aXJlKCcuL193a3MnKSgnc3BlY2llcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSl7XG4gIHZhciBDID0gZ2xvYmFsW0tFWV07XG4gIGlmKERFU0NSSVBUT1JTICYmIEMgJiYgIUNbU1BFQ0lFU10pZFAuZihDLCBTUEVDSUVTLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH1cbiAgfSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fc2V0LXNwZWNpZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAyMzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBhZGRUb1Vuc2NvcGFibGVzID0gcmVxdWlyZSgnLi9fYWRkLXRvLXVuc2NvcGFibGVzJylcbiAgLCBzdGVwICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faXRlci1zdGVwJylcbiAgLCBJdGVyYXRvcnMgICAgICAgID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJylcbiAgLCB0b0lPYmplY3QgICAgICAgID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpO1xuXG4vLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpXG4vLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKVxuLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKVxuLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2l0ZXItZGVmaW5lJykoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXtcbiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldFxuICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZFxuLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpXG59LCBmdW5jdGlvbigpe1xuICB2YXIgTyAgICAgPSB0aGlzLl90XG4gICAgLCBraW5kICA9IHRoaXMuX2tcbiAgICAsIGluZGV4ID0gdGhpcy5faSsrO1xuICBpZighTyB8fCBpbmRleCA+PSBPLmxlbmd0aCl7XG4gICAgdGhpcy5fdCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gc3RlcCgxKTtcbiAgfVxuICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGluZGV4KTtcbiAgaWYoa2luZCA9PSAndmFsdWVzJylyZXR1cm4gc3RlcCgwLCBPW2luZGV4XSk7XG4gIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTtcbn0sICd2YWx1ZXMnKTtcblxuLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KVxuSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTtcblxuYWRkVG9VbnNjb3BhYmxlcygna2V5cycpO1xuYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7XG5hZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5hcnJheS5pdGVyYXRvci5qc1xuICoqIG1vZHVsZSBpZCA9IDIzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkb25lLCB2YWx1ZSl7XG4gIHJldHVybiB7dmFsdWU6IHZhbHVlLCBkb25lOiAhIWRvbmV9O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2l0ZXItc3RlcC5qc1xuICoqIG1vZHVsZSBpZCA9IDIzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGdsb2JhbCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBpbmhlcml0SWZSZXF1aXJlZCA9IHJlcXVpcmUoJy4vX2luaGVyaXQtaWYtcmVxdWlyZWQnKVxuICAsIGRQICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZlxuICAsIGdPUE4gICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4nKS5mXG4gICwgaXNSZWdFeHAgICAgICAgICAgPSByZXF1aXJlKCcuL19pcy1yZWdleHAnKVxuICAsICRmbGFncyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZmxhZ3MnKVxuICAsICRSZWdFeHAgICAgICAgICAgID0gZ2xvYmFsLlJlZ0V4cFxuICAsIEJhc2UgICAgICAgICAgICAgID0gJFJlZ0V4cFxuICAsIHByb3RvICAgICAgICAgICAgID0gJFJlZ0V4cC5wcm90b3R5cGVcbiAgLCByZTEgICAgICAgICAgICAgICA9IC9hL2dcbiAgLCByZTIgICAgICAgICAgICAgICA9IC9hL2dcbiAgLy8gXCJuZXdcIiBjcmVhdGVzIGEgbmV3IG9iamVjdCwgb2xkIHdlYmtpdCBidWdneSBoZXJlXG4gICwgQ09SUkVDVF9ORVcgICAgICAgPSBuZXcgJFJlZ0V4cChyZTEpICE9PSByZTE7XG5cbmlmKHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgKCFDT1JSRUNUX05FVyB8fCByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJlMltyZXF1aXJlKCcuL193a3MnKSgnbWF0Y2gnKV0gPSBmYWxzZTtcbiAgLy8gUmVnRXhwIGNvbnN0cnVjdG9yIGNhbiBhbHRlciBmbGFncyBhbmQgSXNSZWdFeHAgd29ya3MgY29ycmVjdCB3aXRoIEBAbWF0Y2hcbiAgcmV0dXJuICRSZWdFeHAocmUxKSAhPSByZTEgfHwgJFJlZ0V4cChyZTIpID09IHJlMiB8fCAkUmVnRXhwKHJlMSwgJ2knKSAhPSAnL2EvaSc7XG59KSkpe1xuICAkUmVnRXhwID0gZnVuY3Rpb24gUmVnRXhwKHAsIGYpe1xuICAgIHZhciB0aVJFID0gdGhpcyBpbnN0YW5jZW9mICRSZWdFeHBcbiAgICAgICwgcGlSRSA9IGlzUmVnRXhwKHApXG4gICAgICAsIGZpVSAgPSBmID09PSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuICF0aVJFICYmIHBpUkUgJiYgcC5jb25zdHJ1Y3RvciA9PT0gJFJlZ0V4cCAmJiBmaVUgPyBwXG4gICAgICA6IGluaGVyaXRJZlJlcXVpcmVkKENPUlJFQ1RfTkVXXG4gICAgICAgID8gbmV3IEJhc2UocGlSRSAmJiAhZmlVID8gcC5zb3VyY2UgOiBwLCBmKVxuICAgICAgICA6IEJhc2UoKHBpUkUgPSBwIGluc3RhbmNlb2YgJFJlZ0V4cCkgPyBwLnNvdXJjZSA6IHAsIHBpUkUgJiYgZmlVID8gJGZsYWdzLmNhbGwocCkgOiBmKVxuICAgICAgLCB0aVJFID8gdGhpcyA6IHByb3RvLCAkUmVnRXhwKTtcbiAgfTtcbiAgdmFyIHByb3h5ID0gZnVuY3Rpb24oa2V5KXtcbiAgICBrZXkgaW4gJFJlZ0V4cCB8fCBkUCgkUmVnRXhwLCBrZXksIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIEJhc2Vba2V5XTsgfSxcbiAgICAgIHNldDogZnVuY3Rpb24oaXQpeyBCYXNlW2tleV0gPSBpdDsgfVxuICAgIH0pO1xuICB9O1xuICBmb3IodmFyIGtleXMgPSBnT1BOKEJhc2UpLCBpID0gMDsga2V5cy5sZW5ndGggPiBpOyApcHJveHkoa2V5c1tpKytdKTtcbiAgcHJvdG8uY29uc3RydWN0b3IgPSAkUmVnRXhwO1xuICAkUmVnRXhwLnByb3RvdHlwZSA9IHByb3RvO1xuICByZXF1aXJlKCcuL19yZWRlZmluZScpKGdsb2JhbCwgJ1JlZ0V4cCcsICRSZWdFeHApO1xufVxuXG5yZXF1aXJlKCcuL19zZXQtc3BlY2llcycpKCdSZWdFeHAnKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5jb25zdHJ1Y3Rvci5qc1xuICoqIG1vZHVsZSBpZCA9IDIzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gMjEuMi41LjMgZ2V0IFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3NcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpe1xuICB2YXIgdGhhdCAgID0gYW5PYmplY3QodGhpcylcbiAgICAsIHJlc3VsdCA9ICcnO1xuICBpZih0aGF0Lmdsb2JhbCkgICAgIHJlc3VsdCArPSAnZyc7XG4gIGlmKHRoYXQuaWdub3JlQ2FzZSkgcmVzdWx0ICs9ICdpJztcbiAgaWYodGhhdC5tdWx0aWxpbmUpICByZXN1bHQgKz0gJ20nO1xuICBpZih0aGF0LnVuaWNvZGUpICAgIHJlc3VsdCArPSAndSc7XG4gIGlmKHRoYXQuc3RpY2t5KSAgICAgcmVzdWx0ICs9ICd5JztcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19mbGFncy5qc1xuICoqIG1vZHVsZSBpZCA9IDIzOFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xucmVxdWlyZSgnLi9lczYucmVnZXhwLmZsYWdzJyk7XG52YXIgYW5PYmplY3QgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsICRmbGFncyAgICAgID0gcmVxdWlyZSgnLi9fZmxhZ3MnKVxuICAsIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKVxuICAsIFRPX1NUUklORyAgID0gJ3RvU3RyaW5nJ1xuICAsICR0b1N0cmluZyAgID0gLy4vW1RPX1NUUklOR107XG5cbnZhciBkZWZpbmUgPSBmdW5jdGlvbihmbil7XG4gIHJlcXVpcmUoJy4vX3JlZGVmaW5lJykoUmVnRXhwLnByb3RvdHlwZSwgVE9fU1RSSU5HLCBmbiwgdHJ1ZSk7XG59O1xuXG4vLyAyMS4yLjUuMTQgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZygpXG5pZihyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7IHJldHVybiAkdG9TdHJpbmcuY2FsbCh7c291cmNlOiAnYScsIGZsYWdzOiAnYid9KSAhPSAnL2EvYic7IH0pKXtcbiAgZGVmaW5lKGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG4gICAgdmFyIFIgPSBhbk9iamVjdCh0aGlzKTtcbiAgICByZXR1cm4gJy8nLmNvbmNhdChSLnNvdXJjZSwgJy8nLFxuICAgICAgJ2ZsYWdzJyBpbiBSID8gUi5mbGFncyA6ICFERVNDUklQVE9SUyAmJiBSIGluc3RhbmNlb2YgUmVnRXhwID8gJGZsYWdzLmNhbGwoUikgOiB1bmRlZmluZWQpO1xuICB9KTtcbi8vIEZGNDQtIFJlZ0V4cCN0b1N0cmluZyBoYXMgYSB3cm9uZyBuYW1lXG59IGVsc2UgaWYoJHRvU3RyaW5nLm5hbWUgIT0gVE9fU1RSSU5HKXtcbiAgZGVmaW5lKGZ1bmN0aW9uIHRvU3RyaW5nKCl7XG4gICAgcmV0dXJuICR0b1N0cmluZy5jYWxsKHRoaXMpO1xuICB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC50by1zdHJpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAyMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDIxLjIuNS4zIGdldCBSZWdFeHAucHJvdG90eXBlLmZsYWdzKClcbmlmKHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgLy4vZy5mbGFncyAhPSAnZycpcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZihSZWdFeHAucHJvdG90eXBlLCAnZmxhZ3MnLCB7XG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgZ2V0OiByZXF1aXJlKCcuL19mbGFncycpXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5mbGFncy5qc1xuICoqIG1vZHVsZSBpZCA9IDI0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gQEBtYXRjaCBsb2dpY1xucmVxdWlyZSgnLi9fZml4LXJlLXdrcycpKCdtYXRjaCcsIDEsIGZ1bmN0aW9uKGRlZmluZWQsIE1BVENILCAkbWF0Y2gpe1xuICAvLyAyMS4xLjMuMTEgU3RyaW5nLnByb3RvdHlwZS5tYXRjaChyZWdleHApXG4gIHJldHVybiBbZnVuY3Rpb24gbWF0Y2gocmVnZXhwKXtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE8gID0gZGVmaW5lZCh0aGlzKVxuICAgICAgLCBmbiA9IHJlZ2V4cCA9PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiByZWdleHBbTUFUQ0hdO1xuICAgIHJldHVybiBmbiAhPT0gdW5kZWZpbmVkID8gZm4uY2FsbChyZWdleHAsIE8pIDogbmV3IFJlZ0V4cChyZWdleHApW01BVENIXShTdHJpbmcoTykpO1xuICB9LCAkbWF0Y2hdO1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAubWF0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSAyNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBoaWRlICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKVxuICAsIHJlZGVmaW5lID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUnKVxuICAsIGZhaWxzICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKVxuICAsIGRlZmluZWQgID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpXG4gICwgd2tzICAgICAgPSByZXF1aXJlKCcuL193a3MnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGxlbmd0aCwgZXhlYyl7XG4gIHZhciBTWU1CT0wgICA9IHdrcyhLRVkpXG4gICAgLCBmbnMgICAgICA9IGV4ZWMoZGVmaW5lZCwgU1lNQk9MLCAnJ1tLRVldKVxuICAgICwgc3RyZm4gICAgPSBmbnNbMF1cbiAgICAsIHJ4Zm4gICAgID0gZm5zWzFdO1xuICBpZihmYWlscyhmdW5jdGlvbigpe1xuICAgIHZhciBPID0ge307XG4gICAgT1tTWU1CT0xdID0gZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH07XG4gICAgcmV0dXJuICcnW0tFWV0oTykgIT0gNztcbiAgfSkpe1xuICAgIHJlZGVmaW5lKFN0cmluZy5wcm90b3R5cGUsIEtFWSwgc3RyZm4pO1xuICAgIGhpZGUoUmVnRXhwLnByb3RvdHlwZSwgU1lNQk9MLCBsZW5ndGggPT0gMlxuICAgICAgLy8gMjEuMi41LjggUmVnRXhwLnByb3RvdHlwZVtAQHJlcGxhY2VdKHN0cmluZywgcmVwbGFjZVZhbHVlKVxuICAgICAgLy8gMjEuMi41LjExIFJlZ0V4cC5wcm90b3R5cGVbQEBzcGxpdF0oc3RyaW5nLCBsaW1pdClcbiAgICAgID8gZnVuY3Rpb24oc3RyaW5nLCBhcmcpeyByZXR1cm4gcnhmbi5jYWxsKHN0cmluZywgdGhpcywgYXJnKTsgfVxuICAgICAgLy8gMjEuMi41LjYgUmVnRXhwLnByb3RvdHlwZVtAQG1hdGNoXShzdHJpbmcpXG4gICAgICAvLyAyMS4yLjUuOSBSZWdFeHAucHJvdG90eXBlW0BAc2VhcmNoXShzdHJpbmcpXG4gICAgICA6IGZ1bmN0aW9uKHN0cmluZyl7IHJldHVybiByeGZuLmNhbGwoc3RyaW5nLCB0aGlzKTsgfVxuICAgICk7XG4gIH1cbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19maXgtcmUtd2tzLmpzXG4gKiogbW9kdWxlIGlkID0gMjQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBAQHJlcGxhY2UgbG9naWNcbnJlcXVpcmUoJy4vX2ZpeC1yZS13a3MnKSgncmVwbGFjZScsIDIsIGZ1bmN0aW9uKGRlZmluZWQsIFJFUExBQ0UsICRyZXBsYWNlKXtcbiAgLy8gMjEuMS4zLjE0IFN0cmluZy5wcm90b3R5cGUucmVwbGFjZShzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKVxuICByZXR1cm4gW2Z1bmN0aW9uIHJlcGxhY2Uoc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBPICA9IGRlZmluZWQodGhpcylcbiAgICAgICwgZm4gPSBzZWFyY2hWYWx1ZSA9PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBzZWFyY2hWYWx1ZVtSRVBMQUNFXTtcbiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZFxuICAgICAgPyBmbi5jYWxsKHNlYXJjaFZhbHVlLCBPLCByZXBsYWNlVmFsdWUpXG4gICAgICA6ICRyZXBsYWNlLmNhbGwoU3RyaW5nKE8pLCBzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKTtcbiAgfSwgJHJlcGxhY2VdO1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAucmVwbGFjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDI0M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gQEBzZWFyY2ggbG9naWNcbnJlcXVpcmUoJy4vX2ZpeC1yZS13a3MnKSgnc2VhcmNoJywgMSwgZnVuY3Rpb24oZGVmaW5lZCwgU0VBUkNILCAkc2VhcmNoKXtcbiAgLy8gMjEuMS4zLjE1IFN0cmluZy5wcm90b3R5cGUuc2VhcmNoKHJlZ2V4cClcbiAgcmV0dXJuIFtmdW5jdGlvbiBzZWFyY2gocmVnZXhwKXtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE8gID0gZGVmaW5lZCh0aGlzKVxuICAgICAgLCBmbiA9IHJlZ2V4cCA9PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiByZWdleHBbU0VBUkNIXTtcbiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZCA/IGZuLmNhbGwocmVnZXhwLCBPKSA6IG5ldyBSZWdFeHAocmVnZXhwKVtTRUFSQ0hdKFN0cmluZyhPKSk7XG4gIH0sICRzZWFyY2hdO1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAuc2VhcmNoLmpzXG4gKiogbW9kdWxlIGlkID0gMjQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBAQHNwbGl0IGxvZ2ljXG5yZXF1aXJlKCcuL19maXgtcmUtd2tzJykoJ3NwbGl0JywgMiwgZnVuY3Rpb24oZGVmaW5lZCwgU1BMSVQsICRzcGxpdCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyIGlzUmVnRXhwICAgPSByZXF1aXJlKCcuL19pcy1yZWdleHAnKVxuICAgICwgX3NwbGl0ICAgICA9ICRzcGxpdFxuICAgICwgJHB1c2ggICAgICA9IFtdLnB1c2hcbiAgICAsICRTUExJVCAgICAgPSAnc3BsaXQnXG4gICAgLCBMRU5HVEggICAgID0gJ2xlbmd0aCdcbiAgICAsIExBU1RfSU5ERVggPSAnbGFzdEluZGV4JztcbiAgaWYoXG4gICAgJ2FiYmMnWyRTUExJVF0oLyhiKSovKVsxXSA9PSAnYycgfHxcbiAgICAndGVzdCdbJFNQTElUXSgvKD86KS8sIC0xKVtMRU5HVEhdICE9IDQgfHxcbiAgICAnYWInWyRTUExJVF0oLyg/OmFiKSovKVtMRU5HVEhdICE9IDIgfHxcbiAgICAnLidbJFNQTElUXSgvKC4/KSguPykvKVtMRU5HVEhdICE9IDQgfHxcbiAgICAnLidbJFNQTElUXSgvKCkoKS8pW0xFTkdUSF0gPiAxIHx8XG4gICAgJydbJFNQTElUXSgvLj8vKVtMRU5HVEhdXG4gICl7XG4gICAgdmFyIE5QQ0cgPSAvKCk/Py8uZXhlYygnJylbMV0gPT09IHVuZGVmaW5lZDsgLy8gbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXBcbiAgICAvLyBiYXNlZCBvbiBlczUtc2hpbSBpbXBsZW1lbnRhdGlvbiwgbmVlZCB0byByZXdvcmsgaXRcbiAgICAkc3BsaXQgPSBmdW5jdGlvbihzZXBhcmF0b3IsIGxpbWl0KXtcbiAgICAgIHZhciBzdHJpbmcgPSBTdHJpbmcodGhpcyk7XG4gICAgICBpZihzZXBhcmF0b3IgPT09IHVuZGVmaW5lZCAmJiBsaW1pdCA9PT0gMClyZXR1cm4gW107XG4gICAgICAvLyBJZiBgc2VwYXJhdG9yYCBpcyBub3QgYSByZWdleCwgdXNlIG5hdGl2ZSBzcGxpdFxuICAgICAgaWYoIWlzUmVnRXhwKHNlcGFyYXRvcikpcmV0dXJuIF9zcGxpdC5jYWxsKHN0cmluZywgc2VwYXJhdG9yLCBsaW1pdCk7XG4gICAgICB2YXIgb3V0cHV0ID0gW107XG4gICAgICB2YXIgZmxhZ3MgPSAoc2VwYXJhdG9yLmlnbm9yZUNhc2UgPyAnaScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5tdWx0aWxpbmUgPyAnbScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci51bmljb2RlID8gJ3UnIDogJycpICtcbiAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3Iuc3RpY2t5ID8gJ3knIDogJycpO1xuICAgICAgdmFyIGxhc3RMYXN0SW5kZXggPSAwO1xuICAgICAgdmFyIHNwbGl0TGltaXQgPSBsaW1pdCA9PT0gdW5kZWZpbmVkID8gNDI5NDk2NzI5NSA6IGxpbWl0ID4+PiAwO1xuICAgICAgLy8gTWFrZSBgZ2xvYmFsYCBhbmQgYXZvaWQgYGxhc3RJbmRleGAgaXNzdWVzIGJ5IHdvcmtpbmcgd2l0aCBhIGNvcHlcbiAgICAgIHZhciBzZXBhcmF0b3JDb3B5ID0gbmV3IFJlZ0V4cChzZXBhcmF0b3Iuc291cmNlLCBmbGFncyArICdnJyk7XG4gICAgICB2YXIgc2VwYXJhdG9yMiwgbWF0Y2gsIGxhc3RJbmRleCwgbGFzdExlbmd0aCwgaTtcbiAgICAgIC8vIERvZXNuJ3QgbmVlZCBmbGFncyBneSwgYnV0IHRoZXkgZG9uJ3QgaHVydFxuICAgICAgaWYoIU5QQ0cpc2VwYXJhdG9yMiA9IG5ldyBSZWdFeHAoJ14nICsgc2VwYXJhdG9yQ29weS5zb3VyY2UgKyAnJCg/IVxcXFxzKScsIGZsYWdzKTtcbiAgICAgIHdoaWxlKG1hdGNoID0gc2VwYXJhdG9yQ29weS5leGVjKHN0cmluZykpe1xuICAgICAgICAvLyBgc2VwYXJhdG9yQ29weS5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyXG4gICAgICAgIGxhc3RJbmRleCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF1bTEVOR1RIXTtcbiAgICAgICAgaWYobGFzdEluZGV4ID4gbGFzdExhc3RJbmRleCl7XG4gICAgICAgICAgb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7XG4gICAgICAgICAgLy8gRml4IGJyb3dzZXJzIHdob3NlIGBleGVjYCBtZXRob2RzIGRvbid0IGNvbnNpc3RlbnRseSByZXR1cm4gYHVuZGVmaW5lZGAgZm9yIE5QQ0dcbiAgICAgICAgICBpZighTlBDRyAmJiBtYXRjaFtMRU5HVEhdID4gMSltYXRjaFswXS5yZXBsYWNlKHNlcGFyYXRvcjIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBmb3IoaSA9IDE7IGkgPCBhcmd1bWVudHNbTEVOR1RIXSAtIDI7IGkrKylpZihhcmd1bWVudHNbaV0gPT09IHVuZGVmaW5lZCltYXRjaFtpXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZihtYXRjaFtMRU5HVEhdID4gMSAmJiBtYXRjaC5pbmRleCA8IHN0cmluZ1tMRU5HVEhdKSRwdXNoLmFwcGx5KG91dHB1dCwgbWF0Y2guc2xpY2UoMSkpO1xuICAgICAgICAgIGxhc3RMZW5ndGggPSBtYXRjaFswXVtMRU5HVEhdO1xuICAgICAgICAgIGxhc3RMYXN0SW5kZXggPSBsYXN0SW5kZXg7XG4gICAgICAgICAgaWYob3V0cHV0W0xFTkdUSF0gPj0gc3BsaXRMaW1pdClicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZihzZXBhcmF0b3JDb3B5W0xBU1RfSU5ERVhdID09PSBtYXRjaC5pbmRleClzZXBhcmF0b3JDb3B5W0xBU1RfSU5ERVhdKys7IC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgIH1cbiAgICAgIGlmKGxhc3RMYXN0SW5kZXggPT09IHN0cmluZ1tMRU5HVEhdKXtcbiAgICAgICAgaWYobGFzdExlbmd0aCB8fCAhc2VwYXJhdG9yQ29weS50ZXN0KCcnKSlvdXRwdXQucHVzaCgnJyk7XG4gICAgICB9IGVsc2Ugb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgpKTtcbiAgICAgIHJldHVybiBvdXRwdXRbTEVOR1RIXSA+IHNwbGl0TGltaXQgPyBvdXRwdXQuc2xpY2UoMCwgc3BsaXRMaW1pdCkgOiBvdXRwdXQ7XG4gICAgfTtcbiAgLy8gQ2hha3JhLCBWOFxuICB9IGVsc2UgaWYoJzAnWyRTUExJVF0odW5kZWZpbmVkLCAwKVtMRU5HVEhdKXtcbiAgICAkc3BsaXQgPSBmdW5jdGlvbihzZXBhcmF0b3IsIGxpbWl0KXtcbiAgICAgIHJldHVybiBzZXBhcmF0b3IgPT09IHVuZGVmaW5lZCAmJiBsaW1pdCA9PT0gMCA/IFtdIDogX3NwbGl0LmNhbGwodGhpcywgc2VwYXJhdG9yLCBsaW1pdCk7XG4gICAgfTtcbiAgfVxuICAvLyAyMS4xLjMuMTcgU3RyaW5nLnByb3RvdHlwZS5zcGxpdChzZXBhcmF0b3IsIGxpbWl0KVxuICByZXR1cm4gW2Z1bmN0aW9uIHNwbGl0KHNlcGFyYXRvciwgbGltaXQpe1xuICAgIHZhciBPICA9IGRlZmluZWQodGhpcylcbiAgICAgICwgZm4gPSBzZXBhcmF0b3IgPT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogc2VwYXJhdG9yW1NQTElUXTtcbiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZCA/IGZuLmNhbGwoc2VwYXJhdG9yLCBPLCBsaW1pdCkgOiAkc3BsaXQuY2FsbChTdHJpbmcoTyksIHNlcGFyYXRvciwgbGltaXQpO1xuICB9LCAkc3BsaXRdO1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAuc3BsaXQuanNcbiAqKiBtb2R1bGUgaWQgPSAyNDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBMSUJSQVJZICAgICAgICAgICAgPSByZXF1aXJlKCcuL19saWJyYXJ5JylcbiAgLCBnbG9iYWwgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGN0eCAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2N0eCcpXG4gICwgY2xhc3NvZiAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fY2xhc3NvZicpXG4gICwgJGV4cG9ydCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBpc09iamVjdCAgICAgICAgICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGFGdW5jdGlvbiAgICAgICAgICA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKVxuICAsIGFuSW5zdGFuY2UgICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLWluc3RhbmNlJylcbiAgLCBmb3JPZiAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19mb3Itb2YnKVxuICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4vX3NwZWNpZXMtY29uc3RydWN0b3InKVxuICAsIHRhc2sgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3Rhc2snKS5zZXRcbiAgLCBtaWNyb3Rhc2sgICAgICAgICAgPSByZXF1aXJlKCcuL19taWNyb3Rhc2snKSgpXG4gICwgUFJPTUlTRSAgICAgICAgICAgID0gJ1Byb21pc2UnXG4gICwgVHlwZUVycm9yICAgICAgICAgID0gZ2xvYmFsLlR5cGVFcnJvclxuICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzXG4gICwgJFByb21pc2UgICAgICAgICAgID0gZ2xvYmFsW1BST01JU0VdXG4gICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3NcbiAgLCBpc05vZGUgICAgICAgICAgICAgPSBjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJ1xuICAsIGVtcHR5ICAgICAgICAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH1cbiAgLCBJbnRlcm5hbCwgR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5LCBXcmFwcGVyO1xuXG52YXIgVVNFX05BVElWRSA9ICEhZnVuY3Rpb24oKXtcbiAgdHJ5IHtcbiAgICAvLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnRcbiAgICB2YXIgcHJvbWlzZSAgICAgPSAkUHJvbWlzZS5yZXNvbHZlKDEpXG4gICAgICAsIEZha2VQcm9taXNlID0gKHByb21pc2UuY29uc3RydWN0b3IgPSB7fSlbcmVxdWlyZSgnLi9fd2tzJykoJ3NwZWNpZXMnKV0gPSBmdW5jdGlvbihleGVjKXsgZXhlYyhlbXB0eSwgZW1wdHkpOyB9O1xuICAgIC8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3RcbiAgICByZXR1cm4gKGlzTm9kZSB8fCB0eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50ID09ICdmdW5jdGlvbicpICYmIHByb21pc2UudGhlbihlbXB0eSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZTtcbiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxufSgpO1xuXG4vLyBoZWxwZXJzXG52YXIgc2FtZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24oYSwgYil7XG4gIC8vIHdpdGggbGlicmFyeSB3cmFwcGVyIHNwZWNpYWwgY2FzZVxuICByZXR1cm4gYSA9PT0gYiB8fCBhID09PSAkUHJvbWlzZSAmJiBiID09PSBXcmFwcGVyO1xufTtcbnZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24oaXQpe1xuICB2YXIgdGhlbjtcbiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiB0eXBlb2YgKHRoZW4gPSBpdC50aGVuKSA9PSAnZnVuY3Rpb24nID8gdGhlbiA6IGZhbHNlO1xufTtcbnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpe1xuICByZXR1cm4gc2FtZUNvbnN0cnVjdG9yKCRQcm9taXNlLCBDKVxuICAgID8gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpXG4gICAgOiBuZXcgR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5KEMpO1xufTtcbnZhciBQcm9taXNlQ2FwYWJpbGl0eSA9IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpe1xuICB2YXIgcmVzb2x2ZSwgcmVqZWN0O1xuICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbigkJHJlc29sdmUsICQkcmVqZWN0KXtcbiAgICBpZihyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKCdCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuICAgIHJlc29sdmUgPSAkJHJlc29sdmU7XG4gICAgcmVqZWN0ICA9ICQkcmVqZWN0O1xuICB9KTtcbiAgdGhpcy5yZXNvbHZlID0gYUZ1bmN0aW9uKHJlc29sdmUpO1xuICB0aGlzLnJlamVjdCAgPSBhRnVuY3Rpb24ocmVqZWN0KTtcbn07XG52YXIgcGVyZm9ybSA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIGV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4ge2Vycm9yOiBlfTtcbiAgfVxufTtcbnZhciBub3RpZnkgPSBmdW5jdGlvbihwcm9taXNlLCBpc1JlamVjdCl7XG4gIGlmKHByb21pc2UuX24pcmV0dXJuO1xuICBwcm9taXNlLl9uID0gdHJ1ZTtcbiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYztcbiAgbWljcm90YXNrKGZ1bmN0aW9uKCl7XG4gICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdlxuICAgICAgLCBvayAgICA9IHByb21pc2UuX3MgPT0gMVxuICAgICAgLCBpICAgICA9IDA7XG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uKHJlYWN0aW9uKXtcbiAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWxcbiAgICAgICAgLCByZXNvbHZlID0gcmVhY3Rpb24ucmVzb2x2ZVxuICAgICAgICAsIHJlamVjdCAgPSByZWFjdGlvbi5yZWplY3RcbiAgICAgICAgLCBkb21haW4gID0gcmVhY3Rpb24uZG9tYWluXG4gICAgICAgICwgcmVzdWx0LCB0aGVuO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYoaGFuZGxlcil7XG4gICAgICAgICAgaWYoIW9rKXtcbiAgICAgICAgICAgIGlmKHByb21pc2UuX2ggPT0gMilvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKTtcbiAgICAgICAgICAgIHByb21pc2UuX2ggPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihoYW5kbGVyID09PSB0cnVlKXJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5lbnRlcigpO1xuICAgICAgICAgICAgcmVzdWx0ID0gaGFuZGxlcih2YWx1ZSk7XG4gICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmV4aXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYocmVzdWx0ID09PSByZWFjdGlvbi5wcm9taXNlKXtcbiAgICAgICAgICAgIHJlamVjdChUeXBlRXJyb3IoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7XG4gICAgICAgICAgfSBlbHNlIGlmKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpe1xuICAgICAgICAgICAgdGhlbi5jYWxsKHJlc3VsdCwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9IGVsc2UgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9IGVsc2UgcmVqZWN0KHZhbHVlKTtcbiAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpcnVuKGNoYWluW2krK10pOyAvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaFxuICAgIHByb21pc2UuX2MgPSBbXTtcbiAgICBwcm9taXNlLl9uID0gZmFsc2U7XG4gICAgaWYoaXNSZWplY3QgJiYgIXByb21pc2UuX2gpb25VbmhhbmRsZWQocHJvbWlzZSk7XG4gIH0pO1xufTtcbnZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upe1xuICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpe1xuICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3ZcbiAgICAgICwgYWJydXB0LCBoYW5kbGVyLCBjb25zb2xlO1xuICAgIGlmKGlzVW5oYW5kbGVkKHByb21pc2UpKXtcbiAgICAgIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXtcbiAgICAgICAgaWYoaXNOb2RlKXtcbiAgICAgICAgICBwcm9jZXNzLmVtaXQoJ3VuaGFuZGxlZFJlamVjdGlvbicsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24pe1xuICAgICAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogdmFsdWV9KTtcbiAgICAgICAgfSBlbHNlIGlmKChjb25zb2xlID0gZ2xvYmFsLmNvbnNvbGUpICYmIGNvbnNvbGUuZXJyb3Ipe1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbicsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZFxuICAgICAgcHJvbWlzZS5faCA9IGlzTm9kZSB8fCBpc1VuaGFuZGxlZChwcm9taXNlKSA/IDIgOiAxO1xuICAgIH0gcHJvbWlzZS5fYSA9IHVuZGVmaW5lZDtcbiAgICBpZihhYnJ1cHQpdGhyb3cgYWJydXB0LmVycm9yO1xuICB9KTtcbn07XG52YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXtcbiAgaWYocHJvbWlzZS5faCA9PSAxKXJldHVybiBmYWxzZTtcbiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYSB8fCBwcm9taXNlLl9jXG4gICAgLCBpICAgICA9IDBcbiAgICAsIHJlYWN0aW9uO1xuICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXtcbiAgICByZWFjdGlvbiA9IGNoYWluW2krK107XG4gICAgaWYocmVhY3Rpb24uZmFpbCB8fCAhaXNVbmhhbmRsZWQocmVhY3Rpb24ucHJvbWlzZSkpcmV0dXJuIGZhbHNlO1xuICB9IHJldHVybiB0cnVlO1xufTtcbnZhciBvbkhhbmRsZVVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upe1xuICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpe1xuICAgIHZhciBoYW5kbGVyO1xuICAgIGlmKGlzTm9kZSl7XG4gICAgICBwcm9jZXNzLmVtaXQoJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlKTtcbiAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnJlamVjdGlvbmhhbmRsZWQpe1xuICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiBwcm9taXNlLl92fSk7XG4gICAgfVxuICB9KTtcbn07XG52YXIgJHJlamVjdCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgdmFyIHByb21pc2UgPSB0aGlzO1xuICBpZihwcm9taXNlLl9kKXJldHVybjtcbiAgcHJvbWlzZS5fZCA9IHRydWU7XG4gIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcFxuICBwcm9taXNlLl92ID0gdmFsdWU7XG4gIHByb21pc2UuX3MgPSAyO1xuICBpZighcHJvbWlzZS5fYSlwcm9taXNlLl9hID0gcHJvbWlzZS5fYy5zbGljZSgpO1xuICBub3RpZnkocHJvbWlzZSwgdHJ1ZSk7XG59O1xudmFyICRyZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpe1xuICB2YXIgcHJvbWlzZSA9IHRoaXNcbiAgICAsIHRoZW47XG4gIGlmKHByb21pc2UuX2QpcmV0dXJuO1xuICBwcm9taXNlLl9kID0gdHJ1ZTtcbiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwXG4gIHRyeSB7XG4gICAgaWYocHJvbWlzZSA9PT0gdmFsdWUpdGhyb3cgVHlwZUVycm9yKFwiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGZcIik7XG4gICAgaWYodGhlbiA9IGlzVGhlbmFibGUodmFsdWUpKXtcbiAgICAgIG1pY3JvdGFzayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIgd3JhcHBlciA9IHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfTsgLy8gd3JhcFxuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgY3R4KCRyZXNvbHZlLCB3cmFwcGVyLCAxKSwgY3R4KCRyZWplY3QsIHdyYXBwZXIsIDEpKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAkcmVqZWN0LmNhbGwod3JhcHBlciwgZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9taXNlLl92ID0gdmFsdWU7XG4gICAgICBwcm9taXNlLl9zID0gMTtcbiAgICAgIG5vdGlmeShwcm9taXNlLCBmYWxzZSk7XG4gICAgfVxuICB9IGNhdGNoKGUpe1xuICAgICRyZWplY3QuY2FsbCh7X3c6IHByb21pc2UsIF9kOiBmYWxzZX0sIGUpOyAvLyB3cmFwXG4gIH1cbn07XG5cbi8vIGNvbnN0cnVjdG9yIHBvbHlmaWxsXG5pZighVVNFX05BVElWRSl7XG4gIC8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpXG4gICRQcm9taXNlID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7XG4gICAgYW5JbnN0YW5jZSh0aGlzLCAkUHJvbWlzZSwgUFJPTUlTRSwgJ19oJyk7XG4gICAgYUZ1bmN0aW9uKGV4ZWN1dG9yKTtcbiAgICBJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIHRyeSB7XG4gICAgICBleGVjdXRvcihjdHgoJHJlc29sdmUsIHRoaXMsIDEpLCBjdHgoJHJlamVjdCwgdGhpcywgMSkpO1xuICAgIH0gY2F0Y2goZXJyKXtcbiAgICAgICRyZWplY3QuY2FsbCh0aGlzLCBlcnIpO1xuICAgIH1cbiAgfTtcbiAgSW50ZXJuYWwgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXtcbiAgICB0aGlzLl9jID0gW107ICAgICAgICAgICAgIC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9uc1xuICAgIHRoaXMuX2EgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnNcbiAgICB0aGlzLl9zID0gMDsgICAgICAgICAgICAgIC8vIDwtIHN0YXRlXG4gICAgdGhpcy5fZCA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBkb25lXG4gICAgdGhpcy5fdiA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSB2YWx1ZVxuICAgIHRoaXMuX2ggPSAwOyAgICAgICAgICAgICAgLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWRcbiAgICB0aGlzLl9uID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIG5vdGlmeVxuICB9O1xuICBJbnRlcm5hbC5wcm90b3R5cGUgPSByZXF1aXJlKCcuL19yZWRlZmluZS1hbGwnKSgkUHJvbWlzZS5wcm90b3R5cGUsIHtcbiAgICAvLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKVxuICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpe1xuICAgICAgdmFyIHJlYWN0aW9uICAgID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsICRQcm9taXNlKSk7XG4gICAgICByZWFjdGlvbi5vayAgICAgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdHJ1ZTtcbiAgICAgIHJlYWN0aW9uLmZhaWwgICA9IHR5cGVvZiBvblJlamVjdGVkID09ICdmdW5jdGlvbicgJiYgb25SZWplY3RlZDtcbiAgICAgIHJlYWN0aW9uLmRvbWFpbiA9IGlzTm9kZSA/IHByb2Nlc3MuZG9tYWluIDogdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fYy5wdXNoKHJlYWN0aW9uKTtcbiAgICAgIGlmKHRoaXMuX2EpdGhpcy5fYS5wdXNoKHJlYWN0aW9uKTtcbiAgICAgIGlmKHRoaXMuX3Mpbm90aWZ5KHRoaXMsIGZhbHNlKTtcbiAgICAgIHJldHVybiByZWFjdGlvbi5wcm9taXNlO1xuICAgIH0sXG4gICAgLy8gMjUuNC41LjEgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2gob25SZWplY3RlZClcbiAgICAnY2F0Y2gnOiBmdW5jdGlvbihvblJlamVjdGVkKXtcbiAgICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBvblJlamVjdGVkKTtcbiAgICB9XG4gIH0pO1xuICBQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHByb21pc2UgID0gbmV3IEludGVybmFsO1xuICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgdGhpcy5yZXNvbHZlID0gY3R4KCRyZXNvbHZlLCBwcm9taXNlLCAxKTtcbiAgICB0aGlzLnJlamVjdCAgPSBjdHgoJHJlamVjdCwgcHJvbWlzZSwgMSk7XG4gIH07XG59XG5cbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtQcm9taXNlOiAkUHJvbWlzZX0pO1xucmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKSgkUHJvbWlzZSwgUFJPTUlTRSk7XG5yZXF1aXJlKCcuL19zZXQtc3BlY2llcycpKFBST01JU0UpO1xuV3JhcHBlciA9IHJlcXVpcmUoJy4vX2NvcmUnKVtQUk9NSVNFXTtcblxuLy8gc3RhdGljc1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgUFJPTUlTRSwge1xuICAvLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKVxuICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyKXtcbiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpXG4gICAgICAsICQkcmVqZWN0ICAgPSBjYXBhYmlsaXR5LnJlamVjdDtcbiAgICAkJHJlamVjdChyKTtcbiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlO1xuICB9XG59KTtcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKExJQlJBUlkgfHwgIVVTRV9OQVRJVkUpLCBQUk9NSVNFLCB7XG4gIC8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KVxuICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpe1xuICAgIC8vIGluc3RhbmNlb2YgaW5zdGVhZCBvZiBpbnRlcm5hbCBzbG90IGNoZWNrIGJlY2F1c2Ugd2Ugc2hvdWxkIGZpeCBpdCB3aXRob3V0IHJlcGxhY2VtZW50IG5hdGl2ZSBQcm9taXNlIGNvcmVcbiAgICBpZih4IGluc3RhbmNlb2YgJFByb21pc2UgJiYgc2FtZUNvbnN0cnVjdG9yKHguY29uc3RydWN0b3IsIHRoaXMpKXJldHVybiB4O1xuICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcylcbiAgICAgICwgJCRyZXNvbHZlICA9IGNhcGFiaWxpdHkucmVzb2x2ZTtcbiAgICAkJHJlc29sdmUoeCk7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoVVNFX05BVElWRSAmJiByZXF1aXJlKCcuL19pdGVyLWRldGVjdCcpKGZ1bmN0aW9uKGl0ZXIpe1xuICAkUHJvbWlzZS5hbGwoaXRlcilbJ2NhdGNoJ10oZW1wdHkpO1xufSkpLCBQUk9NSVNFLCB7XG4gIC8vIDI1LjQuNC4xIFByb21pc2UuYWxsKGl0ZXJhYmxlKVxuICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSl7XG4gICAgdmFyIEMgICAgICAgICAgPSB0aGlzXG4gICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKVxuICAgICAgLCByZXNvbHZlICAgID0gY2FwYWJpbGl0eS5yZXNvbHZlXG4gICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDtcbiAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpe1xuICAgICAgdmFyIHZhbHVlcyAgICA9IFtdXG4gICAgICAgICwgaW5kZXggICAgID0gMFxuICAgICAgICAsIHJlbWFpbmluZyA9IDE7XG4gICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2Upe1xuICAgICAgICB2YXIgJGluZGV4ICAgICAgICA9IGluZGV4KytcbiAgICAgICAgICAsIGFscmVhZHlDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgcmVtYWluaW5nKys7XG4gICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICBpZihhbHJlYWR5Q2FsbGVkKXJldHVybjtcbiAgICAgICAgICBhbHJlYWR5Q2FsbGVkICA9IHRydWU7XG4gICAgICAgICAgdmFsdWVzWyRpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTtcbiAgICB9KTtcbiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfSxcbiAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKVxuICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKXtcbiAgICB2YXIgQyAgICAgICAgICA9IHRoaXNcbiAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpXG4gICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDtcbiAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpe1xuICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbihwcm9taXNlKXtcbiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpO1xuICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucHJvbWlzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDI0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgQ29uc3RydWN0b3IsIG5hbWUsIGZvcmJpZGRlbkZpZWxkKXtcbiAgaWYoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSB8fCAoZm9yYmlkZGVuRmllbGQgIT09IHVuZGVmaW5lZCAmJiBmb3JiaWRkZW5GaWVsZCBpbiBpdCkpe1xuICAgIHRocm93IFR5cGVFcnJvcihuYW1lICsgJzogaW5jb3JyZWN0IGludm9jYXRpb24hJyk7XG4gIH0gcmV0dXJuIGl0O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2FuLWluc3RhbmNlLmpzXG4gKiogbW9kdWxlIGlkID0gMjQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgY3R4ICAgICAgICAgPSByZXF1aXJlKCcuL19jdHgnKVxuICAsIGNhbGwgICAgICAgID0gcmVxdWlyZSgnLi9faXRlci1jYWxsJylcbiAgLCBpc0FycmF5SXRlciA9IHJlcXVpcmUoJy4vX2lzLWFycmF5LWl0ZXInKVxuICAsIGFuT2JqZWN0ICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCB0b0xlbmd0aCAgICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpXG4gICwgZ2V0SXRlckZuICAgPSByZXF1aXJlKCcuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCcpXG4gICwgQlJFQUsgICAgICAgPSB7fVxuICAsIFJFVFVSTiAgICAgID0ge307XG52YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmFibGUsIGVudHJpZXMsIGZuLCB0aGF0LCBJVEVSQVRPUil7XG4gIHZhciBpdGVyRm4gPSBJVEVSQVRPUiA/IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyYWJsZTsgfSA6IGdldEl0ZXJGbihpdGVyYWJsZSlcbiAgICAsIGYgICAgICA9IGN0eChmbiwgdGhhdCwgZW50cmllcyA/IDIgOiAxKVxuICAgICwgaW5kZXggID0gMFxuICAgICwgbGVuZ3RoLCBzdGVwLCBpdGVyYXRvciwgcmVzdWx0O1xuICBpZih0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ZXJhYmxlICsgJyBpcyBub3QgaXRlcmFibGUhJyk7XG4gIC8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvclxuICBpZihpc0FycmF5SXRlcihpdGVyRm4pKWZvcihsZW5ndGggPSB0b0xlbmd0aChpdGVyYWJsZS5sZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKyl7XG4gICAgcmVzdWx0ID0gZW50cmllcyA/IGYoYW5PYmplY3Qoc3RlcCA9IGl0ZXJhYmxlW2luZGV4XSlbMF0sIHN0ZXBbMV0pIDogZihpdGVyYWJsZVtpbmRleF0pO1xuICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDtcbiAgfSBlbHNlIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKGl0ZXJhYmxlKTsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyApe1xuICAgIHJlc3VsdCA9IGNhbGwoaXRlcmF0b3IsIGYsIHN0ZXAudmFsdWUsIGVudHJpZXMpO1xuICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDtcbiAgfVxufTtcbmV4cG9ydHMuQlJFQUsgID0gQlJFQUs7XG5leHBvcnRzLlJFVFVSTiA9IFJFVFVSTjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2Zvci1vZi5qc1xuICoqIG1vZHVsZSBpZCA9IDI0OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpXG52YXIgYW5PYmplY3QgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCBhRnVuY3Rpb24gPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJylcbiAgLCBTUEVDSUVTICAgPSByZXF1aXJlKCcuL193a3MnKSgnc3BlY2llcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihPLCBEKXtcbiAgdmFyIEMgPSBhbk9iamVjdChPKS5jb25zdHJ1Y3RvciwgUztcbiAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3NwZWNpZXMtY29uc3RydWN0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSAyNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBjdHggICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jdHgnKVxuICAsIGludm9rZSAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2ludm9rZScpXG4gICwgaHRtbCAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faHRtbCcpXG4gICwgY2VsICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZG9tLWNyZWF0ZScpXG4gICwgZ2xvYmFsICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzc1xuICAsIHNldFRhc2sgICAgICAgICAgICA9IGdsb2JhbC5zZXRJbW1lZGlhdGVcbiAgLCBjbGVhclRhc2sgICAgICAgICAgPSBnbG9iYWwuY2xlYXJJbW1lZGlhdGVcbiAgLCBNZXNzYWdlQ2hhbm5lbCAgICAgPSBnbG9iYWwuTWVzc2FnZUNoYW5uZWxcbiAgLCBjb3VudGVyICAgICAgICAgICAgPSAwXG4gICwgcXVldWUgICAgICAgICAgICAgID0ge31cbiAgLCBPTlJFQURZU1RBVEVDSEFOR0UgPSAnb25yZWFkeXN0YXRlY2hhbmdlJ1xuICAsIGRlZmVyLCBjaGFubmVsLCBwb3J0O1xudmFyIHJ1biA9IGZ1bmN0aW9uKCl7XG4gIHZhciBpZCA9ICt0aGlzO1xuICBpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpe1xuICAgIHZhciBmbiA9IHF1ZXVlW2lkXTtcbiAgICBkZWxldGUgcXVldWVbaWRdO1xuICAgIGZuKCk7XG4gIH1cbn07XG52YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCl7XG4gIHJ1bi5jYWxsKGV2ZW50LmRhdGEpO1xufTtcbi8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZTpcbmlmKCFzZXRUYXNrIHx8ICFjbGVhclRhc2spe1xuICBzZXRUYXNrID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGZuKXtcbiAgICB2YXIgYXJncyA9IFtdLCBpID0gMTtcbiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO1xuICAgIHF1ZXVlWysrY291bnRlcl0gPSBmdW5jdGlvbigpe1xuICAgICAgaW52b2tlKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4gOiBGdW5jdGlvbihmbiksIGFyZ3MpO1xuICAgIH07XG4gICAgZGVmZXIoY291bnRlcik7XG4gICAgcmV0dXJuIGNvdW50ZXI7XG4gIH07XG4gIGNsZWFyVGFzayA9IGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGlkKXtcbiAgICBkZWxldGUgcXVldWVbaWRdO1xuICB9O1xuICAvLyBOb2RlLmpzIDAuOC1cbiAgaWYocmVxdWlyZSgnLi9fY29mJykocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKXtcbiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soY3R4KHJ1biwgaWQsIDEpKTtcbiAgICB9O1xuICAvLyBCcm93c2VycyB3aXRoIE1lc3NhZ2VDaGFubmVsLCBpbmNsdWRlcyBXZWJXb3JrZXJzXG4gIH0gZWxzZSBpZihNZXNzYWdlQ2hhbm5lbCl7XG4gICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbDtcbiAgICBwb3J0ICAgID0gY2hhbm5lbC5wb3J0MjtcbiAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpc3RlbmVyO1xuICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpO1xuICAvLyBCcm93c2VycyB3aXRoIHBvc3RNZXNzYWdlLCBza2lwIFdlYldvcmtlcnNcbiAgLy8gSUU4IGhhcyBwb3N0TWVzc2FnZSwgYnV0IGl0J3Mgc3luYyAmIHR5cGVvZiBpdHMgcG9zdE1lc3NhZ2UgaXMgJ29iamVjdCdcbiAgfSBlbHNlIGlmKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cyl7XG4gICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7XG4gICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoaWQgKyAnJywgJyonKTtcbiAgICB9O1xuICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbGlzdGVuZXIsIGZhbHNlKTtcbiAgLy8gSUU4LVxuICB9IGVsc2UgaWYoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0Jykpe1xuICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuICAgICAgaHRtbC5hcHBlbmRDaGlsZChjZWwoJ3NjcmlwdCcpKVtPTlJFQURZU1RBVEVDSEFOR0VdID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgICAgcnVuLmNhbGwoaWQpO1xuICAgICAgfTtcbiAgICB9O1xuICAvLyBSZXN0IG9sZCBicm93c2Vyc1xuICB9IGVsc2Uge1xuICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuICAgICAgc2V0VGltZW91dChjdHgocnVuLCBpZCwgMSksIDApO1xuICAgIH07XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6ICAgc2V0VGFzayxcbiAgY2xlYXI6IGNsZWFyVGFza1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3Rhc2suanNcbiAqKiBtb2R1bGUgaWQgPSAyNTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIG1hY3JvdGFzayA9IHJlcXVpcmUoJy4vX3Rhc2snKS5zZXRcbiAgLCBPYnNlcnZlciAgPSBnbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlclxuICAsIHByb2Nlc3MgICA9IGdsb2JhbC5wcm9jZXNzXG4gICwgUHJvbWlzZSAgID0gZ2xvYmFsLlByb21pc2VcbiAgLCBpc05vZGUgICAgPSByZXF1aXJlKCcuL19jb2YnKShwcm9jZXNzKSA9PSAncHJvY2Vzcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtcbiAgdmFyIGhlYWQsIGxhc3QsIG5vdGlmeTtcblxuICB2YXIgZmx1c2ggPSBmdW5jdGlvbigpe1xuICAgIHZhciBwYXJlbnQsIGZuO1xuICAgIGlmKGlzTm9kZSAmJiAocGFyZW50ID0gcHJvY2Vzcy5kb21haW4pKXBhcmVudC5leGl0KCk7XG4gICAgd2hpbGUoaGVhZCl7XG4gICAgICBmbiAgID0gaGVhZC5mbjtcbiAgICAgIGhlYWQgPSBoZWFkLm5leHQ7XG4gICAgICB0cnkge1xuICAgICAgICBmbigpO1xuICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgaWYoaGVhZClub3RpZnkoKTtcbiAgICAgICAgZWxzZSBsYXN0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0gbGFzdCA9IHVuZGVmaW5lZDtcbiAgICBpZihwYXJlbnQpcGFyZW50LmVudGVyKCk7XG4gIH07XG5cbiAgLy8gTm9kZS5qc1xuICBpZihpc05vZGUpe1xuICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgICB9O1xuICAvLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXJcbiAgfSBlbHNlIGlmKE9ic2VydmVyKXtcbiAgICB2YXIgdG9nZ2xlID0gdHJ1ZVxuICAgICAgLCBub2RlICAgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgbmV3IE9ic2VydmVyKGZsdXNoKS5vYnNlcnZlKG5vZGUsIHtjaGFyYWN0ZXJEYXRhOiB0cnVlfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gICAgbm90aWZ5ID0gZnVuY3Rpb24oKXtcbiAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZSA9ICF0b2dnbGU7XG4gICAgfTtcbiAgLy8gZW52aXJvbm1lbnRzIHdpdGggbWF5YmUgbm9uLWNvbXBsZXRlbHkgY29ycmVjdCwgYnV0IGV4aXN0ZW50IFByb21pc2VcbiAgfSBlbHNlIGlmKFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKXtcbiAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7XG4gICAgICBwcm9taXNlLnRoZW4oZmx1c2gpO1xuICAgIH07XG4gIC8vIGZvciBvdGhlciBlbnZpcm9ubWVudHMgLSBtYWNyb3Rhc2sgYmFzZWQgb246XG4gIC8vIC0gc2V0SW1tZWRpYXRlXG4gIC8vIC0gTWVzc2FnZUNoYW5uZWxcbiAgLy8gLSB3aW5kb3cucG9zdE1lc3NhZ1xuICAvLyAtIG9ucmVhZHlzdGF0ZWNoYW5nZVxuICAvLyAtIHNldFRpbWVvdXRcbiAgfSBlbHNlIHtcbiAgICBub3RpZnkgPSBmdW5jdGlvbigpe1xuICAgICAgLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKVxuICAgICAgbWFjcm90YXNrLmNhbGwoZ2xvYmFsLCBmbHVzaCk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbihmbil7XG4gICAgdmFyIHRhc2sgPSB7Zm46IGZuLCBuZXh0OiB1bmRlZmluZWR9O1xuICAgIGlmKGxhc3QpbGFzdC5uZXh0ID0gdGFzaztcbiAgICBpZighaGVhZCl7XG4gICAgICBoZWFkID0gdGFzaztcbiAgICAgIG5vdGlmeSgpO1xuICAgIH0gbGFzdCA9IHRhc2s7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fbWljcm90YXNrLmpzXG4gKiogbW9kdWxlIGlkID0gMjUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuL19yZWRlZmluZScpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0YXJnZXQsIHNyYywgc2FmZSl7XG4gIGZvcih2YXIga2V5IGluIHNyYylyZWRlZmluZSh0YXJnZXQsIGtleSwgc3JjW2tleV0sIHNhZmUpO1xuICByZXR1cm4gdGFyZ2V0O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3JlZGVmaW5lLWFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDI1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHN0cm9uZyA9IHJlcXVpcmUoJy4vX2NvbGxlY3Rpb24tc3Ryb25nJyk7XG5cbi8vIDIzLjEgTWFwIE9iamVjdHNcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fY29sbGVjdGlvbicpKCdNYXAnLCBmdW5jdGlvbihnZXQpe1xuICByZXR1cm4gZnVuY3Rpb24gTWFwKCl7IHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOyB9O1xufSwge1xuICAvLyAyMy4xLjMuNiBNYXAucHJvdG90eXBlLmdldChrZXkpXG4gIGdldDogZnVuY3Rpb24gZ2V0KGtleSl7XG4gICAgdmFyIGVudHJ5ID0gc3Ryb25nLmdldEVudHJ5KHRoaXMsIGtleSk7XG4gICAgcmV0dXJuIGVudHJ5ICYmIGVudHJ5LnY7XG4gIH0sXG4gIC8vIDIzLjEuMy45IE1hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpXG4gIHNldDogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpe1xuICAgIHJldHVybiBzdHJvbmcuZGVmKHRoaXMsIGtleSA9PT0gMCA/IDAgOiBrZXksIHZhbHVlKTtcbiAgfVxufSwgc3Ryb25nLCB0cnVlKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2Lm1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDI1M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGRQICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZlxuICAsIGNyZWF0ZSAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpXG4gICwgcmVkZWZpbmVBbGwgPSByZXF1aXJlKCcuL19yZWRlZmluZS1hbGwnKVxuICAsIGN0eCAgICAgICAgID0gcmVxdWlyZSgnLi9fY3R4JylcbiAgLCBhbkluc3RhbmNlICA9IHJlcXVpcmUoJy4vX2FuLWluc3RhbmNlJylcbiAgLCBkZWZpbmVkICAgICA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKVxuICAsIGZvck9mICAgICAgID0gcmVxdWlyZSgnLi9fZm9yLW9mJylcbiAgLCAkaXRlckRlZmluZSA9IHJlcXVpcmUoJy4vX2l0ZXItZGVmaW5lJylcbiAgLCBzdGVwICAgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXItc3RlcCcpXG4gICwgc2V0U3BlY2llcyAgPSByZXF1aXJlKCcuL19zZXQtc3BlY2llcycpXG4gICwgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpXG4gICwgZmFzdEtleSAgICAgPSByZXF1aXJlKCcuL19tZXRhJykuZmFzdEtleVxuICAsIFNJWkUgICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX3MnIDogJ3NpemUnO1xuXG52YXIgZ2V0RW50cnkgPSBmdW5jdGlvbih0aGF0LCBrZXkpe1xuICAvLyBmYXN0IGNhc2VcbiAgdmFyIGluZGV4ID0gZmFzdEtleShrZXkpLCBlbnRyeTtcbiAgaWYoaW5kZXggIT09ICdGJylyZXR1cm4gdGhhdC5faVtpbmRleF07XG4gIC8vIGZyb3plbiBvYmplY3QgY2FzZVxuICBmb3IoZW50cnkgPSB0aGF0Ll9mOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5uKXtcbiAgICBpZihlbnRyeS5rID09IGtleSlyZXR1cm4gZW50cnk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRDb25zdHJ1Y3RvcjogZnVuY3Rpb24od3JhcHBlciwgTkFNRSwgSVNfTUFQLCBBRERFUil7XG4gICAgdmFyIEMgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGl0ZXJhYmxlKXtcbiAgICAgIGFuSW5zdGFuY2UodGhhdCwgQywgTkFNRSwgJ19pJyk7XG4gICAgICB0aGF0Ll9pID0gY3JlYXRlKG51bGwpOyAvLyBpbmRleFxuICAgICAgdGhhdC5fZiA9IHVuZGVmaW5lZDsgICAgLy8gZmlyc3QgZW50cnlcbiAgICAgIHRoYXQuX2wgPSB1bmRlZmluZWQ7ICAgIC8vIGxhc3QgZW50cnlcbiAgICAgIHRoYXRbU0laRV0gPSAwOyAgICAgICAgIC8vIHNpemVcbiAgICAgIGlmKGl0ZXJhYmxlICE9IHVuZGVmaW5lZClmb3JPZihpdGVyYWJsZSwgSVNfTUFQLCB0aGF0W0FEREVSXSwgdGhhdCk7XG4gICAgfSk7XG4gICAgcmVkZWZpbmVBbGwoQy5wcm90b3R5cGUsIHtcbiAgICAgIC8vIDIzLjEuMy4xIE1hcC5wcm90b3R5cGUuY2xlYXIoKVxuICAgICAgLy8gMjMuMi4zLjIgU2V0LnByb3RvdHlwZS5jbGVhcigpXG4gICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKXtcbiAgICAgICAgZm9yKHZhciB0aGF0ID0gdGhpcywgZGF0YSA9IHRoYXQuX2ksIGVudHJ5ID0gdGhhdC5fZjsgZW50cnk7IGVudHJ5ID0gZW50cnkubil7XG4gICAgICAgICAgZW50cnkuciA9IHRydWU7XG4gICAgICAgICAgaWYoZW50cnkucCllbnRyeS5wID0gZW50cnkucC5uID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGRlbGV0ZSBkYXRhW2VudHJ5LmldO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuX2YgPSB0aGF0Ll9sID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGF0W1NJWkVdID0gMDtcbiAgICAgIH0sXG4gICAgICAvLyAyMy4xLjMuMyBNYXAucHJvdG90eXBlLmRlbGV0ZShrZXkpXG4gICAgICAvLyAyMy4yLjMuNCBTZXQucHJvdG90eXBlLmRlbGV0ZSh2YWx1ZSlcbiAgICAgICdkZWxldGUnOiBmdW5jdGlvbihrZXkpe1xuICAgICAgICB2YXIgdGhhdCAgPSB0aGlzXG4gICAgICAgICAgLCBlbnRyeSA9IGdldEVudHJ5KHRoYXQsIGtleSk7XG4gICAgICAgIGlmKGVudHJ5KXtcbiAgICAgICAgICB2YXIgbmV4dCA9IGVudHJ5Lm5cbiAgICAgICAgICAgICwgcHJldiA9IGVudHJ5LnA7XG4gICAgICAgICAgZGVsZXRlIHRoYXQuX2lbZW50cnkuaV07XG4gICAgICAgICAgZW50cnkuciA9IHRydWU7XG4gICAgICAgICAgaWYocHJldilwcmV2Lm4gPSBuZXh0O1xuICAgICAgICAgIGlmKG5leHQpbmV4dC5wID0gcHJldjtcbiAgICAgICAgICBpZih0aGF0Ll9mID09IGVudHJ5KXRoYXQuX2YgPSBuZXh0O1xuICAgICAgICAgIGlmKHRoYXQuX2wgPT0gZW50cnkpdGhhdC5fbCA9IHByZXY7XG4gICAgICAgICAgdGhhdFtTSVpFXS0tO1xuICAgICAgICB9IHJldHVybiAhIWVudHJ5O1xuICAgICAgfSxcbiAgICAgIC8vIDIzLjIuMy42IFNldC5wcm90b3R5cGUuZm9yRWFjaChjYWxsYmFja2ZuLCB0aGlzQXJnID0gdW5kZWZpbmVkKVxuICAgICAgLy8gMjMuMS4zLjUgTWFwLnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4sIHRoaXNBcmcgPSB1bmRlZmluZWQpXG4gICAgICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrZm4gLyosIHRoYXQgPSB1bmRlZmluZWQgKi8pe1xuICAgICAgICBhbkluc3RhbmNlKHRoaXMsIEMsICdmb3JFYWNoJyk7XG4gICAgICAgIHZhciBmID0gY3R4KGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCAzKVxuICAgICAgICAgICwgZW50cnk7XG4gICAgICAgIHdoaWxlKGVudHJ5ID0gZW50cnkgPyBlbnRyeS5uIDogdGhpcy5fZil7XG4gICAgICAgICAgZihlbnRyeS52LCBlbnRyeS5rLCB0aGlzKTtcbiAgICAgICAgICAvLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnlcbiAgICAgICAgICB3aGlsZShlbnRyeSAmJiBlbnRyeS5yKWVudHJ5ID0gZW50cnkucDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIDIzLjEuMy43IE1hcC5wcm90b3R5cGUuaGFzKGtleSlcbiAgICAgIC8vIDIzLjIuMy43IFNldC5wcm90b3R5cGUuaGFzKHZhbHVlKVxuICAgICAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KXtcbiAgICAgICAgcmV0dXJuICEhZ2V0RW50cnkodGhpcywga2V5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZihERVNDUklQVE9SUylkUChDLnByb3RvdHlwZSwgJ3NpemUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiBkZWZpbmVkKHRoaXNbU0laRV0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBDO1xuICB9LFxuICBkZWY6IGZ1bmN0aW9uKHRoYXQsIGtleSwgdmFsdWUpe1xuICAgIHZhciBlbnRyeSA9IGdldEVudHJ5KHRoYXQsIGtleSlcbiAgICAgICwgcHJldiwgaW5kZXg7XG4gICAgLy8gY2hhbmdlIGV4aXN0aW5nIGVudHJ5XG4gICAgaWYoZW50cnkpe1xuICAgICAgZW50cnkudiA9IHZhbHVlO1xuICAgIC8vIGNyZWF0ZSBuZXcgZW50cnlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhhdC5fbCA9IGVudHJ5ID0ge1xuICAgICAgICBpOiBpbmRleCA9IGZhc3RLZXkoa2V5LCB0cnVlKSwgLy8gPC0gaW5kZXhcbiAgICAgICAgazoga2V5LCAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIGtleVxuICAgICAgICB2OiB2YWx1ZSwgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gdmFsdWVcbiAgICAgICAgcDogcHJldiA9IHRoYXQuX2wsICAgICAgICAgICAgIC8vIDwtIHByZXZpb3VzIGVudHJ5XG4gICAgICAgIG46IHVuZGVmaW5lZCwgICAgICAgICAgICAgICAgICAvLyA8LSBuZXh0IGVudHJ5XG4gICAgICAgIHI6IGZhbHNlICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSByZW1vdmVkXG4gICAgICB9O1xuICAgICAgaWYoIXRoYXQuX2YpdGhhdC5fZiA9IGVudHJ5O1xuICAgICAgaWYocHJldilwcmV2Lm4gPSBlbnRyeTtcbiAgICAgIHRoYXRbU0laRV0rKztcbiAgICAgIC8vIGFkZCB0byBpbmRleFxuICAgICAgaWYoaW5kZXggIT09ICdGJyl0aGF0Ll9pW2luZGV4XSA9IGVudHJ5O1xuICAgIH0gcmV0dXJuIHRoYXQ7XG4gIH0sXG4gIGdldEVudHJ5OiBnZXRFbnRyeSxcbiAgc2V0U3Ryb25nOiBmdW5jdGlvbihDLCBOQU1FLCBJU19NQVApe1xuICAgIC8vIGFkZCAua2V5cywgLnZhbHVlcywgLmVudHJpZXMsIFtAQGl0ZXJhdG9yXVxuICAgIC8vIDIzLjEuMy40LCAyMy4xLjMuOCwgMjMuMS4zLjExLCAyMy4xLjMuMTIsIDIzLjIuMy41LCAyMy4yLjMuOCwgMjMuMi4zLjEwLCAyMy4yLjMuMTFcbiAgICAkaXRlckRlZmluZShDLCBOQU1FLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7XG4gICAgICB0aGlzLl90ID0gaXRlcmF0ZWQ7ICAvLyB0YXJnZXRcbiAgICAgIHRoaXMuX2sgPSBraW5kOyAgICAgIC8vIGtpbmRcbiAgICAgIHRoaXMuX2wgPSB1bmRlZmluZWQ7IC8vIHByZXZpb3VzXG4gICAgfSwgZnVuY3Rpb24oKXtcbiAgICAgIHZhciB0aGF0ICA9IHRoaXNcbiAgICAgICAgLCBraW5kICA9IHRoYXQuX2tcbiAgICAgICAgLCBlbnRyeSA9IHRoYXQuX2w7XG4gICAgICAvLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnlcbiAgICAgIHdoaWxlKGVudHJ5ICYmIGVudHJ5LnIpZW50cnkgPSBlbnRyeS5wO1xuICAgICAgLy8gZ2V0IG5leHQgZW50cnlcbiAgICAgIGlmKCF0aGF0Ll90IHx8ICEodGhhdC5fbCA9IGVudHJ5ID0gZW50cnkgPyBlbnRyeS5uIDogdGhhdC5fdC5fZikpe1xuICAgICAgICAvLyBvciBmaW5pc2ggdGhlIGl0ZXJhdGlvblxuICAgICAgICB0aGF0Ll90ID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gc3RlcCgxKTtcbiAgICAgIH1cbiAgICAgIC8vIHJldHVybiBzdGVwIGJ5IGtpbmRcbiAgICAgIGlmKGtpbmQgPT0gJ2tleXMnICApcmV0dXJuIHN0ZXAoMCwgZW50cnkuayk7XG4gICAgICBpZihraW5kID09ICd2YWx1ZXMnKXJldHVybiBzdGVwKDAsIGVudHJ5LnYpO1xuICAgICAgcmV0dXJuIHN0ZXAoMCwgW2VudHJ5LmssIGVudHJ5LnZdKTtcbiAgICB9LCBJU19NQVAgPyAnZW50cmllcycgOiAndmFsdWVzJyAsICFJU19NQVAsIHRydWUpO1xuXG4gICAgLy8gYWRkIFtAQHNwZWNpZXNdLCAyMy4xLjIuMiwgMjMuMi4yLjJcbiAgICBzZXRTcGVjaWVzKE5BTUUpO1xuICB9XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fY29sbGVjdGlvbi1zdHJvbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAyNTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBnbG9iYWwgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgJGV4cG9ydCAgICAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIHJlZGVmaW5lICAgICAgICAgID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUnKVxuICAsIHJlZGVmaW5lQWxsICAgICAgID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUtYWxsJylcbiAgLCBtZXRhICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGEnKVxuICAsIGZvck9mICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZm9yLW9mJylcbiAgLCBhbkluc3RhbmNlICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLWluc3RhbmNlJylcbiAgLCBpc09iamVjdCAgICAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgZmFpbHMgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19mYWlscycpXG4gICwgJGl0ZXJEZXRlY3QgICAgICAgPSByZXF1aXJlKCcuL19pdGVyLWRldGVjdCcpXG4gICwgc2V0VG9TdHJpbmdUYWcgICAgPSByZXF1aXJlKCcuL19zZXQtdG8tc3RyaW5nLXRhZycpXG4gICwgaW5oZXJpdElmUmVxdWlyZWQgPSByZXF1aXJlKCcuL19pbmhlcml0LWlmLXJlcXVpcmVkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTkFNRSwgd3JhcHBlciwgbWV0aG9kcywgY29tbW9uLCBJU19NQVAsIElTX1dFQUspe1xuICB2YXIgQmFzZSAgPSBnbG9iYWxbTkFNRV1cbiAgICAsIEMgICAgID0gQmFzZVxuICAgICwgQURERVIgPSBJU19NQVAgPyAnc2V0JyA6ICdhZGQnXG4gICAgLCBwcm90byA9IEMgJiYgQy5wcm90b3R5cGVcbiAgICAsIE8gICAgID0ge307XG4gIHZhciBmaXhNZXRob2QgPSBmdW5jdGlvbihLRVkpe1xuICAgIHZhciBmbiA9IHByb3RvW0tFWV07XG4gICAgcmVkZWZpbmUocHJvdG8sIEtFWSxcbiAgICAgIEtFWSA9PSAnZGVsZXRlJyA/IGZ1bmN0aW9uKGEpe1xuICAgICAgICByZXR1cm4gSVNfV0VBSyAmJiAhaXNPYmplY3QoYSkgPyBmYWxzZSA6IGZuLmNhbGwodGhpcywgYSA9PT0gMCA/IDAgOiBhKTtcbiAgICAgIH0gOiBLRVkgPT0gJ2hhcycgPyBmdW5jdGlvbiBoYXMoYSl7XG4gICAgICAgIHJldHVybiBJU19XRUFLICYmICFpc09iamVjdChhKSA/IGZhbHNlIDogZm4uY2FsbCh0aGlzLCBhID09PSAwID8gMCA6IGEpO1xuICAgICAgfSA6IEtFWSA9PSAnZ2V0JyA/IGZ1bmN0aW9uIGdldChhKXtcbiAgICAgICAgcmV0dXJuIElTX1dFQUsgJiYgIWlzT2JqZWN0KGEpID8gdW5kZWZpbmVkIDogZm4uY2FsbCh0aGlzLCBhID09PSAwID8gMCA6IGEpO1xuICAgICAgfSA6IEtFWSA9PSAnYWRkJyA/IGZ1bmN0aW9uIGFkZChhKXsgZm4uY2FsbCh0aGlzLCBhID09PSAwID8gMCA6IGEpOyByZXR1cm4gdGhpczsgfVxuICAgICAgICA6IGZ1bmN0aW9uIHNldChhLCBiKXsgZm4uY2FsbCh0aGlzLCBhID09PSAwID8gMCA6IGEsIGIpOyByZXR1cm4gdGhpczsgfVxuICAgICk7XG4gIH07XG4gIGlmKHR5cGVvZiBDICE9ICdmdW5jdGlvbicgfHwgIShJU19XRUFLIHx8IHByb3RvLmZvckVhY2ggJiYgIWZhaWxzKGZ1bmN0aW9uKCl7XG4gICAgbmV3IEMoKS5lbnRyaWVzKCkubmV4dCgpO1xuICB9KSkpe1xuICAgIC8vIGNyZWF0ZSBjb2xsZWN0aW9uIGNvbnN0cnVjdG9yXG4gICAgQyA9IGNvbW1vbi5nZXRDb25zdHJ1Y3Rvcih3cmFwcGVyLCBOQU1FLCBJU19NQVAsIEFEREVSKTtcbiAgICByZWRlZmluZUFsbChDLnByb3RvdHlwZSwgbWV0aG9kcyk7XG4gICAgbWV0YS5ORUVEID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgaW5zdGFuY2UgICAgICAgICAgICAgPSBuZXcgQ1xuICAgICAgLy8gZWFybHkgaW1wbGVtZW50YXRpb25zIG5vdCBzdXBwb3J0cyBjaGFpbmluZ1xuICAgICAgLCBIQVNOVF9DSEFJTklORyAgICAgICA9IGluc3RhbmNlW0FEREVSXShJU19XRUFLID8ge30gOiAtMCwgMSkgIT0gaW5zdGFuY2VcbiAgICAgIC8vIFY4IH4gIENocm9taXVtIDQwLSB3ZWFrLWNvbGxlY3Rpb25zIHRocm93cyBvbiBwcmltaXRpdmVzLCBidXQgc2hvdWxkIHJldHVybiBmYWxzZVxuICAgICAgLCBUSFJPV1NfT05fUFJJTUlUSVZFUyA9IGZhaWxzKGZ1bmN0aW9uKCl7IGluc3RhbmNlLmhhcygxKTsgfSlcbiAgICAgIC8vIG1vc3QgZWFybHkgaW1wbGVtZW50YXRpb25zIGRvZXNuJ3Qgc3VwcG9ydHMgaXRlcmFibGVzLCBtb3N0IG1vZGVybiAtIG5vdCBjbG9zZSBpdCBjb3JyZWN0bHlcbiAgICAgICwgQUNDRVBUX0lURVJBQkxFUyAgICAgPSAkaXRlckRldGVjdChmdW5jdGlvbihpdGVyKXsgbmV3IEMoaXRlcik7IH0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gICAgICAvLyBmb3IgZWFybHkgaW1wbGVtZW50YXRpb25zIC0wIGFuZCArMCBub3QgdGhlIHNhbWVcbiAgICAgICwgQlVHR1lfWkVSTyA9ICFJU19XRUFLICYmIGZhaWxzKGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vIFY4IH4gQ2hyb21pdW0gNDItIGZhaWxzIG9ubHkgd2l0aCA1KyBlbGVtZW50c1xuICAgICAgICB2YXIgJGluc3RhbmNlID0gbmV3IEMoKVxuICAgICAgICAgICwgaW5kZXggICAgID0gNTtcbiAgICAgICAgd2hpbGUoaW5kZXgtLSkkaW5zdGFuY2VbQURERVJdKGluZGV4LCBpbmRleCk7XG4gICAgICAgIHJldHVybiAhJGluc3RhbmNlLmhhcygtMCk7XG4gICAgICB9KTtcbiAgICBpZighQUNDRVBUX0lURVJBQkxFUyl7IFxuICAgICAgQyA9IHdyYXBwZXIoZnVuY3Rpb24odGFyZ2V0LCBpdGVyYWJsZSl7XG4gICAgICAgIGFuSW5zdGFuY2UodGFyZ2V0LCBDLCBOQU1FKTtcbiAgICAgICAgdmFyIHRoYXQgPSBpbmhlcml0SWZSZXF1aXJlZChuZXcgQmFzZSwgdGFyZ2V0LCBDKTtcbiAgICAgICAgaWYoaXRlcmFibGUgIT0gdW5kZWZpbmVkKWZvck9mKGl0ZXJhYmxlLCBJU19NQVAsIHRoYXRbQURERVJdLCB0aGF0KTtcbiAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICB9KTtcbiAgICAgIEMucHJvdG90eXBlID0gcHJvdG87XG4gICAgICBwcm90by5jb25zdHJ1Y3RvciA9IEM7XG4gICAgfVxuICAgIGlmKFRIUk9XU19PTl9QUklNSVRJVkVTIHx8IEJVR0dZX1pFUk8pe1xuICAgICAgZml4TWV0aG9kKCdkZWxldGUnKTtcbiAgICAgIGZpeE1ldGhvZCgnaGFzJyk7XG4gICAgICBJU19NQVAgJiYgZml4TWV0aG9kKCdnZXQnKTtcbiAgICB9XG4gICAgaWYoQlVHR1lfWkVSTyB8fCBIQVNOVF9DSEFJTklORylmaXhNZXRob2QoQURERVIpO1xuICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgc2hvdWxkIG5vdCBjb250YWlucyAuY2xlYXIgbWV0aG9kXG4gICAgaWYoSVNfV0VBSyAmJiBwcm90by5jbGVhcilkZWxldGUgcHJvdG8uY2xlYXI7XG4gIH1cblxuICBzZXRUb1N0cmluZ1RhZyhDLCBOQU1FKTtcblxuICBPW05BTUVdID0gQztcbiAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAoQyAhPSBCYXNlKSwgTyk7XG5cbiAgaWYoIUlTX1dFQUspY29tbW9uLnNldFN0cm9uZyhDLCBOQU1FLCBJU19NQVApO1xuXG4gIHJldHVybiBDO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2NvbGxlY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAyNTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBzdHJvbmcgPSByZXF1aXJlKCcuL19jb2xsZWN0aW9uLXN0cm9uZycpO1xuXG4vLyAyMy4yIFNldCBPYmplY3RzXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2NvbGxlY3Rpb24nKSgnU2V0JywgZnVuY3Rpb24oZ2V0KXtcbiAgcmV0dXJuIGZ1bmN0aW9uIFNldCgpeyByZXR1cm4gZ2V0KHRoaXMsIGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTsgfTtcbn0sIHtcbiAgLy8gMjMuMi4zLjEgU2V0LnByb3RvdHlwZS5hZGQodmFsdWUpXG4gIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKXtcbiAgICByZXR1cm4gc3Ryb25nLmRlZih0aGlzLCB2YWx1ZSA9IHZhbHVlID09PSAwID8gMCA6IHZhbHVlLCB2YWx1ZSk7XG4gIH1cbn0sIHN0cm9uZyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5zZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAyNTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBlYWNoICAgICAgICAgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoMClcbiAgLCByZWRlZmluZSAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpXG4gICwgbWV0YSAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YScpXG4gICwgYXNzaWduICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWFzc2lnbicpXG4gICwgd2VhayAgICAgICAgID0gcmVxdWlyZSgnLi9fY29sbGVjdGlvbi13ZWFrJylcbiAgLCBpc09iamVjdCAgICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGdldFdlYWsgICAgICA9IG1ldGEuZ2V0V2Vha1xuICAsIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGVcbiAgLCB1bmNhdWdodEZyb3plblN0b3JlID0gd2Vhay51ZnN0b3JlXG4gICwgdG1wICAgICAgICAgID0ge31cbiAgLCBJbnRlcm5hbE1hcDtcblxudmFyIHdyYXBwZXIgPSBmdW5jdGlvbihnZXQpe1xuICByZXR1cm4gZnVuY3Rpb24gV2Vha01hcCgpe1xuICAgIHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpO1xuICB9O1xufTtcblxudmFyIG1ldGhvZHMgPSB7XG4gIC8vIDIzLjMuMy4zIFdlYWtNYXAucHJvdG90eXBlLmdldChrZXkpXG4gIGdldDogZnVuY3Rpb24gZ2V0KGtleSl7XG4gICAgaWYoaXNPYmplY3Qoa2V5KSl7XG4gICAgICB2YXIgZGF0YSA9IGdldFdlYWsoa2V5KTtcbiAgICAgIGlmKGRhdGEgPT09IHRydWUpcmV0dXJuIHVuY2F1Z2h0RnJvemVuU3RvcmUodGhpcykuZ2V0KGtleSk7XG4gICAgICByZXR1cm4gZGF0YSA/IGRhdGFbdGhpcy5faV0gOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9LFxuICAvLyAyMy4zLjMuNSBXZWFrTWFwLnByb3RvdHlwZS5zZXQoa2V5LCB2YWx1ZSlcbiAgc2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSl7XG4gICAgcmV0dXJuIHdlYWsuZGVmKHRoaXMsIGtleSwgdmFsdWUpO1xuICB9XG59O1xuXG4vLyAyMy4zIFdlYWtNYXAgT2JqZWN0c1xudmFyICRXZWFrTWFwID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19jb2xsZWN0aW9uJykoJ1dlYWtNYXAnLCB3cmFwcGVyLCBtZXRob2RzLCB3ZWFrLCB0cnVlLCB0cnVlKTtcblxuLy8gSUUxMSBXZWFrTWFwIGZyb3plbiBrZXlzIGZpeFxuaWYobmV3ICRXZWFrTWFwKCkuc2V0KChPYmplY3QuZnJlZXplIHx8IE9iamVjdCkodG1wKSwgNykuZ2V0KHRtcCkgIT0gNyl7XG4gIEludGVybmFsTWFwID0gd2Vhay5nZXRDb25zdHJ1Y3Rvcih3cmFwcGVyKTtcbiAgYXNzaWduKEludGVybmFsTWFwLnByb3RvdHlwZSwgbWV0aG9kcyk7XG4gIG1ldGEuTkVFRCA9IHRydWU7XG4gIGVhY2goWydkZWxldGUnLCAnaGFzJywgJ2dldCcsICdzZXQnXSwgZnVuY3Rpb24oa2V5KXtcbiAgICB2YXIgcHJvdG8gID0gJFdlYWtNYXAucHJvdG90eXBlXG4gICAgICAsIG1ldGhvZCA9IHByb3RvW2tleV07XG4gICAgcmVkZWZpbmUocHJvdG8sIGtleSwgZnVuY3Rpb24oYSwgYil7XG4gICAgICAvLyBzdG9yZSBmcm96ZW4gb2JqZWN0cyBvbiBpbnRlcm5hbCB3ZWFrbWFwIHNoaW1cbiAgICAgIGlmKGlzT2JqZWN0KGEpICYmICFpc0V4dGVuc2libGUoYSkpe1xuICAgICAgICBpZighdGhpcy5fZil0aGlzLl9mID0gbmV3IEludGVybmFsTWFwO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fZltrZXldKGEsIGIpO1xuICAgICAgICByZXR1cm4ga2V5ID09ICdzZXQnID8gdGhpcyA6IHJlc3VsdDtcbiAgICAgIC8vIHN0b3JlIGFsbCB0aGUgcmVzdCBvbiBuYXRpdmUgd2Vha21hcFxuICAgICAgfSByZXR1cm4gbWV0aG9kLmNhbGwodGhpcywgYSwgYik7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYud2Vhay1tYXAuanNcbiAqKiBtb2R1bGUgaWQgPSAyNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciByZWRlZmluZUFsbCAgICAgICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lLWFsbCcpXG4gICwgZ2V0V2VhayAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhJykuZ2V0V2Vha1xuICAsIGFuT2JqZWN0ICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCBpc09iamVjdCAgICAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgYW5JbnN0YW5jZSAgICAgICAgPSByZXF1aXJlKCcuL19hbi1pbnN0YW5jZScpXG4gICwgZm9yT2YgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19mb3Itb2YnKVxuICAsIGNyZWF0ZUFycmF5TWV0aG9kID0gcmVxdWlyZSgnLi9fYXJyYXktbWV0aG9kcycpXG4gICwgJGhhcyAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKVxuICAsIGFycmF5RmluZCAgICAgICAgID0gY3JlYXRlQXJyYXlNZXRob2QoNSlcbiAgLCBhcnJheUZpbmRJbmRleCAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDYpXG4gICwgaWQgICAgICAgICAgICAgICAgPSAwO1xuXG4vLyBmYWxsYmFjayBmb3IgdW5jYXVnaHQgZnJvemVuIGtleXNcbnZhciB1bmNhdWdodEZyb3plblN0b3JlID0gZnVuY3Rpb24odGhhdCl7XG4gIHJldHVybiB0aGF0Ll9sIHx8ICh0aGF0Ll9sID0gbmV3IFVuY2F1Z2h0RnJvemVuU3RvcmUpO1xufTtcbnZhciBVbmNhdWdodEZyb3plblN0b3JlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5hID0gW107XG59O1xudmFyIGZpbmRVbmNhdWdodEZyb3plbiA9IGZ1bmN0aW9uKHN0b3JlLCBrZXkpe1xuICByZXR1cm4gYXJyYXlGaW5kKHN0b3JlLmEsIGZ1bmN0aW9uKGl0KXtcbiAgICByZXR1cm4gaXRbMF0gPT09IGtleTtcbiAgfSk7XG59O1xuVW5jYXVnaHRGcm96ZW5TdG9yZS5wcm90b3R5cGUgPSB7XG4gIGdldDogZnVuY3Rpb24oa2V5KXtcbiAgICB2YXIgZW50cnkgPSBmaW5kVW5jYXVnaHRGcm96ZW4odGhpcywga2V5KTtcbiAgICBpZihlbnRyeSlyZXR1cm4gZW50cnlbMV07XG4gIH0sXG4gIGhhczogZnVuY3Rpb24oa2V5KXtcbiAgICByZXR1cm4gISFmaW5kVW5jYXVnaHRGcm96ZW4odGhpcywga2V5KTtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICB2YXIgZW50cnkgPSBmaW5kVW5jYXVnaHRGcm96ZW4odGhpcywga2V5KTtcbiAgICBpZihlbnRyeSllbnRyeVsxXSA9IHZhbHVlO1xuICAgIGVsc2UgdGhpcy5hLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgfSxcbiAgJ2RlbGV0ZSc6IGZ1bmN0aW9uKGtleSl7XG4gICAgdmFyIGluZGV4ID0gYXJyYXlGaW5kSW5kZXgodGhpcy5hLCBmdW5jdGlvbihpdCl7XG4gICAgICByZXR1cm4gaXRbMF0gPT09IGtleTtcbiAgICB9KTtcbiAgICBpZih+aW5kZXgpdGhpcy5hLnNwbGljZShpbmRleCwgMSk7XG4gICAgcmV0dXJuICEhfmluZGV4O1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0Q29uc3RydWN0b3I6IGZ1bmN0aW9uKHdyYXBwZXIsIE5BTUUsIElTX01BUCwgQURERVIpe1xuICAgIHZhciBDID0gd3JhcHBlcihmdW5jdGlvbih0aGF0LCBpdGVyYWJsZSl7XG4gICAgICBhbkluc3RhbmNlKHRoYXQsIEMsIE5BTUUsICdfaScpO1xuICAgICAgdGhhdC5faSA9IGlkKys7ICAgICAgLy8gY29sbGVjdGlvbiBpZFxuICAgICAgdGhhdC5fbCA9IHVuZGVmaW5lZDsgLy8gbGVhayBzdG9yZSBmb3IgdW5jYXVnaHQgZnJvemVuIG9iamVjdHNcbiAgICAgIGlmKGl0ZXJhYmxlICE9IHVuZGVmaW5lZClmb3JPZihpdGVyYWJsZSwgSVNfTUFQLCB0aGF0W0FEREVSXSwgdGhhdCk7XG4gICAgfSk7XG4gICAgcmVkZWZpbmVBbGwoQy5wcm90b3R5cGUsIHtcbiAgICAgIC8vIDIzLjMuMy4yIFdlYWtNYXAucHJvdG90eXBlLmRlbGV0ZShrZXkpXG4gICAgICAvLyAyMy40LjMuMyBXZWFrU2V0LnByb3RvdHlwZS5kZWxldGUodmFsdWUpXG4gICAgICAnZGVsZXRlJzogZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgaWYoIWlzT2JqZWN0KGtleSkpcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgZGF0YSA9IGdldFdlYWsoa2V5KTtcbiAgICAgICAgaWYoZGF0YSA9PT0gdHJ1ZSlyZXR1cm4gdW5jYXVnaHRGcm96ZW5TdG9yZSh0aGlzKVsnZGVsZXRlJ10oa2V5KTtcbiAgICAgICAgcmV0dXJuIGRhdGEgJiYgJGhhcyhkYXRhLCB0aGlzLl9pKSAmJiBkZWxldGUgZGF0YVt0aGlzLl9pXTtcbiAgICAgIH0sXG4gICAgICAvLyAyMy4zLjMuNCBXZWFrTWFwLnByb3RvdHlwZS5oYXMoa2V5KVxuICAgICAgLy8gMjMuNC4zLjQgV2Vha1NldC5wcm90b3R5cGUuaGFzKHZhbHVlKVxuICAgICAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KXtcbiAgICAgICAgaWYoIWlzT2JqZWN0KGtleSkpcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgZGF0YSA9IGdldFdlYWsoa2V5KTtcbiAgICAgICAgaWYoZGF0YSA9PT0gdHJ1ZSlyZXR1cm4gdW5jYXVnaHRGcm96ZW5TdG9yZSh0aGlzKS5oYXMoa2V5KTtcbiAgICAgICAgcmV0dXJuIGRhdGEgJiYgJGhhcyhkYXRhLCB0aGlzLl9pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQztcbiAgfSxcbiAgZGVmOiBmdW5jdGlvbih0aGF0LCBrZXksIHZhbHVlKXtcbiAgICB2YXIgZGF0YSA9IGdldFdlYWsoYW5PYmplY3Qoa2V5KSwgdHJ1ZSk7XG4gICAgaWYoZGF0YSA9PT0gdHJ1ZSl1bmNhdWdodEZyb3plblN0b3JlKHRoYXQpLnNldChrZXksIHZhbHVlKTtcbiAgICBlbHNlIGRhdGFbdGhhdC5faV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhhdDtcbiAgfSxcbiAgdWZzdG9yZTogdW5jYXVnaHRGcm96ZW5TdG9yZVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2NvbGxlY3Rpb24td2Vhay5qc1xuICoqIG1vZHVsZSBpZCA9IDI1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHdlYWsgPSByZXF1aXJlKCcuL19jb2xsZWN0aW9uLXdlYWsnKTtcblxuLy8gMjMuNCBXZWFrU2V0IE9iamVjdHNcbnJlcXVpcmUoJy4vX2NvbGxlY3Rpb24nKSgnV2Vha1NldCcsIGZ1bmN0aW9uKGdldCl7XG4gIHJldHVybiBmdW5jdGlvbiBXZWFrU2V0KCl7IHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOyB9O1xufSwge1xuICAvLyAyMy40LjMuMSBXZWFrU2V0LnByb3RvdHlwZS5hZGQodmFsdWUpXG4gIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKXtcbiAgICByZXR1cm4gd2Vhay5kZWYodGhpcywgdmFsdWUsIHRydWUpO1xuICB9XG59LCB3ZWFrLCBmYWxzZSwgdHJ1ZSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi53ZWFrLXNldC5qc1xuICoqIG1vZHVsZSBpZCA9IDI1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgJHR5cGVkICAgICAgID0gcmVxdWlyZSgnLi9fdHlwZWQnKVxuICAsIGJ1ZmZlciAgICAgICA9IHJlcXVpcmUoJy4vX3R5cGVkLWJ1ZmZlcicpXG4gICwgYW5PYmplY3QgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCB0b0luZGV4ICAgICAgPSByZXF1aXJlKCcuL190by1pbmRleCcpXG4gICwgdG9MZW5ndGggICAgID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJylcbiAgLCBpc09iamVjdCAgICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIEFycmF5QnVmZmVyICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLkFycmF5QnVmZmVyXG4gICwgc3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi9fc3BlY2llcy1jb25zdHJ1Y3RvcicpXG4gICwgJEFycmF5QnVmZmVyID0gYnVmZmVyLkFycmF5QnVmZmVyXG4gICwgJERhdGFWaWV3ICAgID0gYnVmZmVyLkRhdGFWaWV3XG4gICwgJGlzVmlldyAgICAgID0gJHR5cGVkLkFCViAmJiBBcnJheUJ1ZmZlci5pc1ZpZXdcbiAgLCAkc2xpY2UgICAgICAgPSAkQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlXG4gICwgVklFVyAgICAgICAgID0gJHR5cGVkLlZJRVdcbiAgLCBBUlJBWV9CVUZGRVIgPSAnQXJyYXlCdWZmZXInO1xuXG4kZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqIChBcnJheUJ1ZmZlciAhPT0gJEFycmF5QnVmZmVyKSwge0FycmF5QnVmZmVyOiAkQXJyYXlCdWZmZXJ9KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhJHR5cGVkLkNPTlNUUiwgQVJSQVlfQlVGRkVSLCB7XG4gIC8vIDI0LjEuMy4xIEFycmF5QnVmZmVyLmlzVmlldyhhcmcpXG4gIGlzVmlldzogZnVuY3Rpb24gaXNWaWV3KGl0KXtcbiAgICByZXR1cm4gJGlzVmlldyAmJiAkaXNWaWV3KGl0KSB8fCBpc09iamVjdChpdCkgJiYgVklFVyBpbiBpdDtcbiAgfVxufSk7XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5VICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpe1xuICByZXR1cm4gIW5ldyAkQXJyYXlCdWZmZXIoMikuc2xpY2UoMSwgdW5kZWZpbmVkKS5ieXRlTGVuZ3RoO1xufSksIEFSUkFZX0JVRkZFUiwge1xuICAvLyAyNC4xLjQuMyBBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2Uoc3RhcnQsIGVuZClcbiAgc2xpY2U6IGZ1bmN0aW9uIHNsaWNlKHN0YXJ0LCBlbmQpe1xuICAgIGlmKCRzbGljZSAhPT0gdW5kZWZpbmVkICYmIGVuZCA9PT0gdW5kZWZpbmVkKXJldHVybiAkc2xpY2UuY2FsbChhbk9iamVjdCh0aGlzKSwgc3RhcnQpOyAvLyBGRiBmaXhcbiAgICB2YXIgbGVuICAgID0gYW5PYmplY3QodGhpcykuYnl0ZUxlbmd0aFxuICAgICAgLCBmaXJzdCAgPSB0b0luZGV4KHN0YXJ0LCBsZW4pXG4gICAgICAsIGZpbmFsICA9IHRvSW5kZXgoZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiBlbmQsIGxlbilcbiAgICAgICwgcmVzdWx0ID0gbmV3IChzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgJEFycmF5QnVmZmVyKSkodG9MZW5ndGgoZmluYWwgLSBmaXJzdCkpXG4gICAgICAsIHZpZXdTICA9IG5ldyAkRGF0YVZpZXcodGhpcylcbiAgICAgICwgdmlld1QgID0gbmV3ICREYXRhVmlldyhyZXN1bHQpXG4gICAgICAsIGluZGV4ICA9IDA7XG4gICAgd2hpbGUoZmlyc3QgPCBmaW5hbCl7XG4gICAgICB2aWV3VC5zZXRVaW50OChpbmRleCsrLCB2aWV3Uy5nZXRVaW50OChmaXJzdCsrKSk7XG4gICAgfSByZXR1cm4gcmVzdWx0O1xuICB9XG59KTtcblxucmVxdWlyZSgnLi9fc2V0LXNwZWNpZXMnKShBUlJBWV9CVUZGRVIpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYudHlwZWQuYXJyYXktYnVmZmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMjYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBoaWRlICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCB1aWQgICAgPSByZXF1aXJlKCcuL191aWQnKVxuICAsIFRZUEVEICA9IHVpZCgndHlwZWRfYXJyYXknKVxuICAsIFZJRVcgICA9IHVpZCgndmlldycpXG4gICwgQUJWICAgID0gISEoZ2xvYmFsLkFycmF5QnVmZmVyICYmIGdsb2JhbC5EYXRhVmlldylcbiAgLCBDT05TVFIgPSBBQlZcbiAgLCBpID0gMCwgbCA9IDksIFR5cGVkO1xuXG52YXIgVHlwZWRBcnJheUNvbnN0cnVjdG9ycyA9IChcbiAgJ0ludDhBcnJheSxVaW50OEFycmF5LFVpbnQ4Q2xhbXBlZEFycmF5LEludDE2QXJyYXksVWludDE2QXJyYXksSW50MzJBcnJheSxVaW50MzJBcnJheSxGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5J1xuKS5zcGxpdCgnLCcpO1xuXG53aGlsZShpIDwgbCl7XG4gIGlmKFR5cGVkID0gZ2xvYmFsW1R5cGVkQXJyYXlDb25zdHJ1Y3RvcnNbaSsrXV0pe1xuICAgIGhpZGUoVHlwZWQucHJvdG90eXBlLCBUWVBFRCwgdHJ1ZSk7XG4gICAgaGlkZShUeXBlZC5wcm90b3R5cGUsIFZJRVcsIHRydWUpO1xuICB9IGVsc2UgQ09OU1RSID0gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBBQlY6ICAgIEFCVixcbiAgQ09OU1RSOiBDT05TVFIsXG4gIFRZUEVEOiAgVFlQRUQsXG4gIFZJRVc6ICAgVklFV1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3R5cGVkLmpzXG4gKiogbW9kdWxlIGlkID0gMjYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgZ2xvYmFsICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIERFU0NSSVBUT1JTICAgID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKVxuICAsIExJQlJBUlkgICAgICAgID0gcmVxdWlyZSgnLi9fbGlicmFyeScpXG4gICwgJHR5cGVkICAgICAgICAgPSByZXF1aXJlKCcuL190eXBlZCcpXG4gICwgaGlkZSAgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgLCByZWRlZmluZUFsbCAgICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lLWFsbCcpXG4gICwgZmFpbHMgICAgICAgICAgPSByZXF1aXJlKCcuL19mYWlscycpXG4gICwgYW5JbnN0YW5jZSAgICAgPSByZXF1aXJlKCcuL19hbi1pbnN0YW5jZScpXG4gICwgdG9JbnRlZ2VyICAgICAgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJylcbiAgLCB0b0xlbmd0aCAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpXG4gICwgZ09QTiAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpLmZcbiAgLCBkUCAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmZcbiAgLCBhcnJheUZpbGwgICAgICA9IHJlcXVpcmUoJy4vX2FycmF5LWZpbGwnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIEFSUkFZX0JVRkZFUiAgID0gJ0FycmF5QnVmZmVyJ1xuICAsIERBVEFfVklFVyAgICAgID0gJ0RhdGFWaWV3J1xuICAsIFBST1RPVFlQRSAgICAgID0gJ3Byb3RvdHlwZSdcbiAgLCBXUk9OR19MRU5HVEggICA9ICdXcm9uZyBsZW5ndGghJ1xuICAsIFdST05HX0lOREVYICAgID0gJ1dyb25nIGluZGV4ISdcbiAgLCAkQXJyYXlCdWZmZXIgICA9IGdsb2JhbFtBUlJBWV9CVUZGRVJdXG4gICwgJERhdGFWaWV3ICAgICAgPSBnbG9iYWxbREFUQV9WSUVXXVxuICAsIE1hdGggICAgICAgICAgID0gZ2xvYmFsLk1hdGhcbiAgLCBSYW5nZUVycm9yICAgICA9IGdsb2JhbC5SYW5nZUVycm9yXG4gICwgSW5maW5pdHkgICAgICAgPSBnbG9iYWwuSW5maW5pdHlcbiAgLCBCYXNlQnVmZmVyICAgICA9ICRBcnJheUJ1ZmZlclxuICAsIGFicyAgICAgICAgICAgID0gTWF0aC5hYnNcbiAgLCBwb3cgICAgICAgICAgICA9IE1hdGgucG93XG4gICwgZmxvb3IgICAgICAgICAgPSBNYXRoLmZsb29yXG4gICwgbG9nICAgICAgICAgICAgPSBNYXRoLmxvZ1xuICAsIExOMiAgICAgICAgICAgID0gTWF0aC5MTjJcbiAgLCBCVUZGRVIgICAgICAgICA9ICdidWZmZXInXG4gICwgQllURV9MRU5HVEggICAgPSAnYnl0ZUxlbmd0aCdcbiAgLCBCWVRFX09GRlNFVCAgICA9ICdieXRlT2Zmc2V0J1xuICAsICRCVUZGRVIgICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX2InIDogQlVGRkVSXG4gICwgJExFTkdUSCAgICAgICAgPSBERVNDUklQVE9SUyA/ICdfbCcgOiBCWVRFX0xFTkdUSFxuICAsICRPRkZTRVQgICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX28nIDogQllURV9PRkZTRVQ7XG5cbi8vIElFRUU3NTQgY29udmVyc2lvbnMgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9pZWVlNzU0XG52YXIgcGFja0lFRUU3NTQgPSBmdW5jdGlvbih2YWx1ZSwgbUxlbiwgbkJ5dGVzKXtcbiAgdmFyIGJ1ZmZlciA9IEFycmF5KG5CeXRlcylcbiAgICAsIGVMZW4gICA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICAgICwgZU1heCAgID0gKDEgPDwgZUxlbikgLSAxXG4gICAgLCBlQmlhcyAgPSBlTWF4ID4+IDFcbiAgICAsIHJ0ICAgICA9IG1MZW4gPT09IDIzID8gcG93KDIsIC0yNCkgLSBwb3coMiwgLTc3KSA6IDBcbiAgICAsIGkgICAgICA9IDBcbiAgICAsIHMgICAgICA9IHZhbHVlIDwgMCB8fCB2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwID8gMSA6IDBcbiAgICAsIGUsIG0sIGM7XG4gIHZhbHVlID0gYWJzKHZhbHVlKVxuICBpZih2YWx1ZSAhPSB2YWx1ZSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpe1xuICAgIG0gPSB2YWx1ZSAhPSB2YWx1ZSA/IDEgOiAwO1xuICAgIGUgPSBlTWF4O1xuICB9IGVsc2Uge1xuICAgIGUgPSBmbG9vcihsb2codmFsdWUpIC8gTE4yKTtcbiAgICBpZih2YWx1ZSAqIChjID0gcG93KDIsIC1lKSkgPCAxKXtcbiAgICAgIGUtLTtcbiAgICAgIGMgKj0gMjtcbiAgICB9XG4gICAgaWYoZSArIGVCaWFzID49IDEpe1xuICAgICAgdmFsdWUgKz0gcnQgLyBjO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIHBvdygyLCAxIC0gZUJpYXMpO1xuICAgIH1cbiAgICBpZih2YWx1ZSAqIGMgPj0gMil7XG4gICAgICBlKys7XG4gICAgICBjIC89IDI7XG4gICAgfVxuICAgIGlmKGUgKyBlQmlhcyA+PSBlTWF4KXtcbiAgICAgIG0gPSAwO1xuICAgICAgZSA9IGVNYXg7XG4gICAgfSBlbHNlIGlmKGUgKyBlQmlhcyA+PSAxKXtcbiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBwb3coMiwgbUxlbik7XG4gICAgICBlID0gZSArIGVCaWFzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBwb3coMiwgZUJpYXMgLSAxKSAqIHBvdygyLCBtTGVuKTtcbiAgICAgIGUgPSAwO1xuICAgIH1cbiAgfVxuICBmb3IoOyBtTGVuID49IDg7IGJ1ZmZlcltpKytdID0gbSAmIDI1NSwgbSAvPSAyNTYsIG1MZW4gLT0gOCk7XG4gIGUgPSBlIDw8IG1MZW4gfCBtO1xuICBlTGVuICs9IG1MZW47XG4gIGZvcig7IGVMZW4gPiAwOyBidWZmZXJbaSsrXSA9IGUgJiAyNTUsIGUgLz0gMjU2LCBlTGVuIC09IDgpO1xuICBidWZmZXJbLS1pXSB8PSBzICogMTI4O1xuICByZXR1cm4gYnVmZmVyO1xufTtcbnZhciB1bnBhY2tJRUVFNzU0ID0gZnVuY3Rpb24oYnVmZmVyLCBtTGVuLCBuQnl0ZXMpe1xuICB2YXIgZUxlbiAgPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgICAsIGVNYXggID0gKDEgPDwgZUxlbikgLSAxXG4gICAgLCBlQmlhcyA9IGVNYXggPj4gMVxuICAgICwgbkJpdHMgPSBlTGVuIC0gN1xuICAgICwgaSAgICAgPSBuQnl0ZXMgLSAxXG4gICAgLCBzICAgICA9IGJ1ZmZlcltpLS1dXG4gICAgLCBlICAgICA9IHMgJiAxMjdcbiAgICAsIG07XG4gIHMgPj49IDc7XG4gIGZvcig7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbaV0sIGktLSwgbkJpdHMgLT0gOCk7XG4gIG0gPSBlICYgKDEgPDwgLW5CaXRzKSAtIDE7XG4gIGUgPj49IC1uQml0cztcbiAgbkJpdHMgKz0gbUxlbjtcbiAgZm9yKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltpXSwgaS0tLCBuQml0cyAtPSA4KTtcbiAgaWYoZSA9PT0gMCl7XG4gICAgZSA9IDEgLSBlQmlhcztcbiAgfSBlbHNlIGlmKGUgPT09IGVNYXgpe1xuICAgIHJldHVybiBtID8gTmFOIDogcyA/IC1JbmZpbml0eSA6IEluZmluaXR5O1xuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgcG93KDIsIG1MZW4pO1xuICAgIGUgPSBlIC0gZUJpYXM7XG4gIH0gcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBwb3coMiwgZSAtIG1MZW4pO1xufTtcblxudmFyIHVucGFja0kzMiA9IGZ1bmN0aW9uKGJ5dGVzKXtcbiAgcmV0dXJuIGJ5dGVzWzNdIDw8IDI0IHwgYnl0ZXNbMl0gPDwgMTYgfCBieXRlc1sxXSA8PCA4IHwgYnl0ZXNbMF07XG59O1xudmFyIHBhY2tJOCA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIFtpdCAmIDB4ZmZdO1xufTtcbnZhciBwYWNrSTE2ID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gW2l0ICYgMHhmZiwgaXQgPj4gOCAmIDB4ZmZdO1xufTtcbnZhciBwYWNrSTMyID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gW2l0ICYgMHhmZiwgaXQgPj4gOCAmIDB4ZmYsIGl0ID4+IDE2ICYgMHhmZiwgaXQgPj4gMjQgJiAweGZmXTtcbn07XG52YXIgcGFja0Y2NCA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHBhY2tJRUVFNzU0KGl0LCA1MiwgOCk7XG59O1xudmFyIHBhY2tGMzIgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBwYWNrSUVFRTc1NChpdCwgMjMsIDQpO1xufTtcblxudmFyIGFkZEdldHRlciA9IGZ1bmN0aW9uKEMsIGtleSwgaW50ZXJuYWwpe1xuICBkUChDW1BST1RPVFlQRV0sIGtleSwge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXNbaW50ZXJuYWxdOyB9fSk7XG59O1xuXG52YXIgZ2V0ID0gZnVuY3Rpb24odmlldywgYnl0ZXMsIGluZGV4LCBpc0xpdHRsZUVuZGlhbil7XG4gIHZhciBudW1JbmRleCA9ICtpbmRleFxuICAgICwgaW50SW5kZXggPSB0b0ludGVnZXIobnVtSW5kZXgpO1xuICBpZihudW1JbmRleCAhPSBpbnRJbmRleCB8fCBpbnRJbmRleCA8IDAgfHwgaW50SW5kZXggKyBieXRlcyA+IHZpZXdbJExFTkdUSF0pdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19JTkRFWCk7XG4gIHZhciBzdG9yZSA9IHZpZXdbJEJVRkZFUl0uX2JcbiAgICAsIHN0YXJ0ID0gaW50SW5kZXggKyB2aWV3WyRPRkZTRVRdXG4gICAgLCBwYWNrICA9IHN0b3JlLnNsaWNlKHN0YXJ0LCBzdGFydCArIGJ5dGVzKTtcbiAgcmV0dXJuIGlzTGl0dGxlRW5kaWFuID8gcGFjayA6IHBhY2sucmV2ZXJzZSgpO1xufTtcbnZhciBzZXQgPSBmdW5jdGlvbih2aWV3LCBieXRlcywgaW5kZXgsIGNvbnZlcnNpb24sIHZhbHVlLCBpc0xpdHRsZUVuZGlhbil7XG4gIHZhciBudW1JbmRleCA9ICtpbmRleFxuICAgICwgaW50SW5kZXggPSB0b0ludGVnZXIobnVtSW5kZXgpO1xuICBpZihudW1JbmRleCAhPSBpbnRJbmRleCB8fCBpbnRJbmRleCA8IDAgfHwgaW50SW5kZXggKyBieXRlcyA+IHZpZXdbJExFTkdUSF0pdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19JTkRFWCk7XG4gIHZhciBzdG9yZSA9IHZpZXdbJEJVRkZFUl0uX2JcbiAgICAsIHN0YXJ0ID0gaW50SW5kZXggKyB2aWV3WyRPRkZTRVRdXG4gICAgLCBwYWNrICA9IGNvbnZlcnNpb24oK3ZhbHVlKTtcbiAgZm9yKHZhciBpID0gMDsgaSA8IGJ5dGVzOyBpKyspc3RvcmVbc3RhcnQgKyBpXSA9IHBhY2tbaXNMaXR0bGVFbmRpYW4gPyBpIDogYnl0ZXMgLSBpIC0gMV07XG59O1xuXG52YXIgdmFsaWRhdGVBcnJheUJ1ZmZlckFyZ3VtZW50cyA9IGZ1bmN0aW9uKHRoYXQsIGxlbmd0aCl7XG4gIGFuSW5zdGFuY2UodGhhdCwgJEFycmF5QnVmZmVyLCBBUlJBWV9CVUZGRVIpO1xuICB2YXIgbnVtYmVyTGVuZ3RoID0gK2xlbmd0aFxuICAgICwgYnl0ZUxlbmd0aCAgID0gdG9MZW5ndGgobnVtYmVyTGVuZ3RoKTtcbiAgaWYobnVtYmVyTGVuZ3RoICE9IGJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICByZXR1cm4gYnl0ZUxlbmd0aDtcbn07XG5cbmlmKCEkdHlwZWQuQUJWKXtcbiAgJEFycmF5QnVmZmVyID0gZnVuY3Rpb24gQXJyYXlCdWZmZXIobGVuZ3RoKXtcbiAgICB2YXIgYnl0ZUxlbmd0aCA9IHZhbGlkYXRlQXJyYXlCdWZmZXJBcmd1bWVudHModGhpcywgbGVuZ3RoKTtcbiAgICB0aGlzLl9iICAgICAgID0gYXJyYXlGaWxsLmNhbGwoQXJyYXkoYnl0ZUxlbmd0aCksIDApO1xuICAgIHRoaXNbJExFTkdUSF0gPSBieXRlTGVuZ3RoO1xuICB9O1xuXG4gICREYXRhVmlldyA9IGZ1bmN0aW9uIERhdGFWaWV3KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCl7XG4gICAgYW5JbnN0YW5jZSh0aGlzLCAkRGF0YVZpZXcsIERBVEFfVklFVyk7XG4gICAgYW5JbnN0YW5jZShidWZmZXIsICRBcnJheUJ1ZmZlciwgREFUQV9WSUVXKTtcbiAgICB2YXIgYnVmZmVyTGVuZ3RoID0gYnVmZmVyWyRMRU5HVEhdXG4gICAgICAsIG9mZnNldCAgICAgICA9IHRvSW50ZWdlcihieXRlT2Zmc2V0KTtcbiAgICBpZihvZmZzZXQgPCAwIHx8IG9mZnNldCA+IGJ1ZmZlckxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKCdXcm9uZyBvZmZzZXQhJyk7XG4gICAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPT09IHVuZGVmaW5lZCA/IGJ1ZmZlckxlbmd0aCAtIG9mZnNldCA6IHRvTGVuZ3RoKGJ5dGVMZW5ndGgpO1xuICAgIGlmKG9mZnNldCArIGJ5dGVMZW5ndGggPiBidWZmZXJMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICAgIHRoaXNbJEJVRkZFUl0gPSBidWZmZXI7XG4gICAgdGhpc1skT0ZGU0VUXSA9IG9mZnNldDtcbiAgICB0aGlzWyRMRU5HVEhdID0gYnl0ZUxlbmd0aDtcbiAgfTtcblxuICBpZihERVNDUklQVE9SUyl7XG4gICAgYWRkR2V0dGVyKCRBcnJheUJ1ZmZlciwgQllURV9MRU5HVEgsICdfbCcpO1xuICAgIGFkZEdldHRlcigkRGF0YVZpZXcsIEJVRkZFUiwgJ19iJyk7XG4gICAgYWRkR2V0dGVyKCREYXRhVmlldywgQllURV9MRU5HVEgsICdfbCcpO1xuICAgIGFkZEdldHRlcigkRGF0YVZpZXcsIEJZVEVfT0ZGU0VULCAnX28nKTtcbiAgfVxuXG4gIHJlZGVmaW5lQWxsKCREYXRhVmlld1tQUk9UT1RZUEVdLCB7XG4gICAgZ2V0SW50ODogZnVuY3Rpb24gZ2V0SW50OChieXRlT2Zmc2V0KXtcbiAgICAgIHJldHVybiBnZXQodGhpcywgMSwgYnl0ZU9mZnNldClbMF0gPDwgMjQgPj4gMjQ7XG4gICAgfSxcbiAgICBnZXRVaW50ODogZnVuY3Rpb24gZ2V0VWludDgoYnl0ZU9mZnNldCl7XG4gICAgICByZXR1cm4gZ2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQpWzBdO1xuICAgIH0sXG4gICAgZ2V0SW50MTY6IGZ1bmN0aW9uIGdldEludDE2KGJ5dGVPZmZzZXQgLyosIGxpdHRsZUVuZGlhbiAqLyl7XG4gICAgICB2YXIgYnl0ZXMgPSBnZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgYXJndW1lbnRzWzFdKTtcbiAgICAgIHJldHVybiAoYnl0ZXNbMV0gPDwgOCB8IGJ5dGVzWzBdKSA8PCAxNiA+PiAxNjtcbiAgICB9LFxuICAgIGdldFVpbnQxNjogZnVuY3Rpb24gZ2V0VWludDE2KGJ5dGVPZmZzZXQgLyosIGxpdHRsZUVuZGlhbiAqLyl7XG4gICAgICB2YXIgYnl0ZXMgPSBnZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgYXJndW1lbnRzWzFdKTtcbiAgICAgIHJldHVybiBieXRlc1sxXSA8PCA4IHwgYnl0ZXNbMF07XG4gICAgfSxcbiAgICBnZXRJbnQzMjogZnVuY3Rpb24gZ2V0SW50MzIoYnl0ZU9mZnNldCAvKiwgbGl0dGxlRW5kaWFuICovKXtcbiAgICAgIHJldHVybiB1bnBhY2tJMzIoZ2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50c1sxXSkpO1xuICAgIH0sXG4gICAgZ2V0VWludDMyOiBmdW5jdGlvbiBnZXRVaW50MzIoYnl0ZU9mZnNldCAvKiwgbGl0dGxlRW5kaWFuICovKXtcbiAgICAgIHJldHVybiB1bnBhY2tJMzIoZ2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50c1sxXSkpID4+PiAwO1xuICAgIH0sXG4gICAgZ2V0RmxvYXQzMjogZnVuY3Rpb24gZ2V0RmxvYXQzMihieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuICAgICAgcmV0dXJuIHVucGFja0lFRUU3NTQoZ2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIGFyZ3VtZW50c1sxXSksIDIzLCA0KTtcbiAgICB9LFxuICAgIGdldEZsb2F0NjQ6IGZ1bmN0aW9uIGdldEZsb2F0NjQoYnl0ZU9mZnNldCAvKiwgbGl0dGxlRW5kaWFuICovKXtcbiAgICAgIHJldHVybiB1bnBhY2tJRUVFNzU0KGdldCh0aGlzLCA4LCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pLCA1MiwgOCk7XG4gICAgfSxcbiAgICBzZXRJbnQ4OiBmdW5jdGlvbiBzZXRJbnQ4KGJ5dGVPZmZzZXQsIHZhbHVlKXtcbiAgICAgIHNldCh0aGlzLCAxLCBieXRlT2Zmc2V0LCBwYWNrSTgsIHZhbHVlKTtcbiAgICB9LFxuICAgIHNldFVpbnQ4OiBmdW5jdGlvbiBzZXRVaW50OChieXRlT2Zmc2V0LCB2YWx1ZSl7XG4gICAgICBzZXQodGhpcywgMSwgYnl0ZU9mZnNldCwgcGFja0k4LCB2YWx1ZSk7XG4gICAgfSxcbiAgICBzZXRJbnQxNjogZnVuY3Rpb24gc2V0SW50MTYoYnl0ZU9mZnNldCwgdmFsdWUgLyosIGxpdHRsZUVuZGlhbiAqLyl7XG4gICAgICBzZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgcGFja0kxNiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7XG4gICAgfSxcbiAgICBzZXRVaW50MTY6IGZ1bmN0aW9uIHNldFVpbnQxNihieXRlT2Zmc2V0LCB2YWx1ZSAvKiwgbGl0dGxlRW5kaWFuICovKXtcbiAgICAgIHNldCh0aGlzLCAyLCBieXRlT2Zmc2V0LCBwYWNrSTE2LCB2YWx1ZSwgYXJndW1lbnRzWzJdKTtcbiAgICB9LFxuICAgIHNldEludDMyOiBmdW5jdGlvbiBzZXRJbnQzMihieXRlT2Zmc2V0LCB2YWx1ZSAvKiwgbGl0dGxlRW5kaWFuICovKXtcbiAgICAgIHNldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBwYWNrSTMyLCB2YWx1ZSwgYXJndW1lbnRzWzJdKTtcbiAgICB9LFxuICAgIHNldFVpbnQzMjogZnVuY3Rpb24gc2V0VWludDMyKGJ5dGVPZmZzZXQsIHZhbHVlIC8qLCBsaXR0bGVFbmRpYW4gKi8pe1xuICAgICAgc2V0KHRoaXMsIDQsIGJ5dGVPZmZzZXQsIHBhY2tJMzIsIHZhbHVlLCBhcmd1bWVudHNbMl0pO1xuICAgIH0sXG4gICAgc2V0RmxvYXQzMjogZnVuY3Rpb24gc2V0RmxvYXQzMihieXRlT2Zmc2V0LCB2YWx1ZSAvKiwgbGl0dGxlRW5kaWFuICovKXtcbiAgICAgIHNldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBwYWNrRjMyLCB2YWx1ZSwgYXJndW1lbnRzWzJdKTtcbiAgICB9LFxuICAgIHNldEZsb2F0NjQ6IGZ1bmN0aW9uIHNldEZsb2F0NjQoYnl0ZU9mZnNldCwgdmFsdWUgLyosIGxpdHRsZUVuZGlhbiAqLyl7XG4gICAgICBzZXQodGhpcywgOCwgYnl0ZU9mZnNldCwgcGFja0Y2NCwgdmFsdWUsIGFyZ3VtZW50c1syXSk7XG4gICAgfVxuICB9KTtcbn0gZWxzZSB7XG4gIGlmKCFmYWlscyhmdW5jdGlvbigpe1xuICAgIG5ldyAkQXJyYXlCdWZmZXI7ICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICB9KSB8fCAhZmFpbHMoZnVuY3Rpb24oKXtcbiAgICBuZXcgJEFycmF5QnVmZmVyKC41KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcbiAgfSkpe1xuICAgICRBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIEFycmF5QnVmZmVyKGxlbmd0aCl7XG4gICAgICByZXR1cm4gbmV3IEJhc2VCdWZmZXIodmFsaWRhdGVBcnJheUJ1ZmZlckFyZ3VtZW50cyh0aGlzLCBsZW5ndGgpKTtcbiAgICB9O1xuICAgIHZhciBBcnJheUJ1ZmZlclByb3RvID0gJEFycmF5QnVmZmVyW1BST1RPVFlQRV0gPSBCYXNlQnVmZmVyW1BST1RPVFlQRV07XG4gICAgZm9yKHZhciBrZXlzID0gZ09QTihCYXNlQnVmZmVyKSwgaiA9IDAsIGtleTsga2V5cy5sZW5ndGggPiBqOyApe1xuICAgICAgaWYoISgoa2V5ID0ga2V5c1tqKytdKSBpbiAkQXJyYXlCdWZmZXIpKWhpZGUoJEFycmF5QnVmZmVyLCBrZXksIEJhc2VCdWZmZXJba2V5XSk7XG4gICAgfTtcbiAgICBpZighTElCUkFSWSlBcnJheUJ1ZmZlclByb3RvLmNvbnN0cnVjdG9yID0gJEFycmF5QnVmZmVyO1xuICB9XG4gIC8vIGlPUyBTYWZhcmkgNy54IGJ1Z1xuICB2YXIgdmlldyA9IG5ldyAkRGF0YVZpZXcobmV3ICRBcnJheUJ1ZmZlcigyKSlcbiAgICAsICRzZXRJbnQ4ID0gJERhdGFWaWV3W1BST1RPVFlQRV0uc2V0SW50ODtcbiAgdmlldy5zZXRJbnQ4KDAsIDIxNDc0ODM2NDgpO1xuICB2aWV3LnNldEludDgoMSwgMjE0NzQ4MzY0OSk7XG4gIGlmKHZpZXcuZ2V0SW50OCgwKSB8fCAhdmlldy5nZXRJbnQ4KDEpKXJlZGVmaW5lQWxsKCREYXRhVmlld1tQUk9UT1RZUEVdLCB7XG4gICAgc2V0SW50ODogZnVuY3Rpb24gc2V0SW50OChieXRlT2Zmc2V0LCB2YWx1ZSl7XG4gICAgICAkc2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTtcbiAgICB9LFxuICAgIHNldFVpbnQ4OiBmdW5jdGlvbiBzZXRVaW50OChieXRlT2Zmc2V0LCB2YWx1ZSl7XG4gICAgICAkc2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTtcbiAgICB9XG4gIH0sIHRydWUpO1xufVxuc2V0VG9TdHJpbmdUYWcoJEFycmF5QnVmZmVyLCBBUlJBWV9CVUZGRVIpO1xuc2V0VG9TdHJpbmdUYWcoJERhdGFWaWV3LCBEQVRBX1ZJRVcpO1xuaGlkZSgkRGF0YVZpZXdbUFJPVE9UWVBFXSwgJHR5cGVkLlZJRVcsIHRydWUpO1xuZXhwb3J0c1tBUlJBWV9CVUZGRVJdID0gJEFycmF5QnVmZmVyO1xuZXhwb3J0c1tEQVRBX1ZJRVddID0gJERhdGFWaWV3O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fdHlwZWQtYnVmZmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMjYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9fdHlwZWQnKS5BQlYsIHtcbiAgRGF0YVZpZXc6IHJlcXVpcmUoJy4vX3R5cGVkLWJ1ZmZlcicpLkRhdGFWaWV3XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnR5cGVkLmRhdGEtdmlldy5qc1xuICoqIG1vZHVsZSBpZCA9IDI2M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnSW50OCcsIDEsIGZ1bmN0aW9uKGluaXQpe1xuICByZXR1cm4gZnVuY3Rpb24gSW50OEFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCl7XG4gICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTtcbiAgfTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYudHlwZWQuaW50OC1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI2NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuaWYocmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSl7XG4gIHZhciBMSUJSQVJZICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbGlicmFyeScpXG4gICAgLCBnbG9iYWwgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgICAsIGZhaWxzICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19mYWlscycpXG4gICAgLCAkZXhwb3J0ICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgICAsICR0eXBlZCAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL190eXBlZCcpXG4gICAgLCAkYnVmZmVyICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdHlwZWQtYnVmZmVyJylcbiAgICAsIGN0eCAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jdHgnKVxuICAgICwgYW5JbnN0YW5jZSAgICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLWluc3RhbmNlJylcbiAgICAsIHByb3BlcnR5RGVzYyAgICAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgICAsIGhpZGUgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJylcbiAgICAsIHJlZGVmaW5lQWxsICAgICAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZS1hbGwnKVxuICAgICwgdG9JbnRlZ2VyICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKVxuICAgICwgdG9MZW5ndGggICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpXG4gICAgLCB0b0luZGV4ICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdG8taW5kZXgnKVxuICAgICwgdG9QcmltaXRpdmUgICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLXByaW1pdGl2ZScpXG4gICAgLCBoYXMgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgICAsIHNhbWUgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19zYW1lLXZhbHVlJylcbiAgICAsIGNsYXNzb2YgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jbGFzc29mJylcbiAgICAsIGlzT2JqZWN0ICAgICAgICAgICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAgICwgdG9PYmplY3QgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICAgLCBpc0FycmF5SXRlciAgICAgICAgID0gcmVxdWlyZSgnLi9faXMtYXJyYXktaXRlcicpXG4gICAgLCBjcmVhdGUgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpXG4gICAgLCBnZXRQcm90b3R5cGVPZiAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpXG4gICAgLCBnT1BOICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4nKS5mXG4gICAgLCBnZXRJdGVyRm4gICAgICAgICAgID0gcmVxdWlyZSgnLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QnKVxuICAgICwgdWlkICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3VpZCcpXG4gICAgLCB3a3MgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fd2tzJylcbiAgICAsIGNyZWF0ZUFycmF5TWV0aG9kICAgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJylcbiAgICAsIGNyZWF0ZUFycmF5SW5jbHVkZXMgPSByZXF1aXJlKCcuL19hcnJheS1pbmNsdWRlcycpXG4gICAgLCBzcGVjaWVzQ29uc3RydWN0b3IgID0gcmVxdWlyZSgnLi9fc3BlY2llcy1jb25zdHJ1Y3RvcicpXG4gICAgLCBBcnJheUl0ZXJhdG9ycyAgICAgID0gcmVxdWlyZSgnLi9lczYuYXJyYXkuaXRlcmF0b3InKVxuICAgICwgSXRlcmF0b3JzICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpXG4gICAgLCAkaXRlckRldGVjdCAgICAgICAgID0gcmVxdWlyZSgnLi9faXRlci1kZXRlY3QnKVxuICAgICwgc2V0U3BlY2llcyAgICAgICAgICA9IHJlcXVpcmUoJy4vX3NldC1zcGVjaWVzJylcbiAgICAsIGFycmF5RmlsbCAgICAgICAgICAgPSByZXF1aXJlKCcuL19hcnJheS1maWxsJylcbiAgICAsIGFycmF5Q29weVdpdGhpbiAgICAgPSByZXF1aXJlKCcuL19hcnJheS1jb3B5LXdpdGhpbicpXG4gICAgLCAkRFAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJylcbiAgICAsICRHT1BEICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wZCcpXG4gICAgLCBkUCAgICAgICAgICAgICAgICAgID0gJERQLmZcbiAgICAsIGdPUEQgICAgICAgICAgICAgICAgPSAkR09QRC5mXG4gICAgLCBSYW5nZUVycm9yICAgICAgICAgID0gZ2xvYmFsLlJhbmdlRXJyb3JcbiAgICAsIFR5cGVFcnJvciAgICAgICAgICAgPSBnbG9iYWwuVHlwZUVycm9yXG4gICAgLCBVaW50OEFycmF5ICAgICAgICAgID0gZ2xvYmFsLlVpbnQ4QXJyYXlcbiAgICAsIEFSUkFZX0JVRkZFUiAgICAgICAgPSAnQXJyYXlCdWZmZXInXG4gICAgLCBTSEFSRURfQlVGRkVSICAgICAgID0gJ1NoYXJlZCcgKyBBUlJBWV9CVUZGRVJcbiAgICAsIEJZVEVTX1BFUl9FTEVNRU5UICAgPSAnQllURVNfUEVSX0VMRU1FTlQnXG4gICAgLCBQUk9UT1RZUEUgICAgICAgICAgID0gJ3Byb3RvdHlwZSdcbiAgICAsIEFycmF5UHJvdG8gICAgICAgICAgPSBBcnJheVtQUk9UT1RZUEVdXG4gICAgLCAkQXJyYXlCdWZmZXIgICAgICAgID0gJGJ1ZmZlci5BcnJheUJ1ZmZlclxuICAgICwgJERhdGFWaWV3ICAgICAgICAgICA9ICRidWZmZXIuRGF0YVZpZXdcbiAgICAsIGFycmF5Rm9yRWFjaCAgICAgICAgPSBjcmVhdGVBcnJheU1ldGhvZCgwKVxuICAgICwgYXJyYXlGaWx0ZXIgICAgICAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDIpXG4gICAgLCBhcnJheVNvbWUgICAgICAgICAgID0gY3JlYXRlQXJyYXlNZXRob2QoMylcbiAgICAsIGFycmF5RXZlcnkgICAgICAgICAgPSBjcmVhdGVBcnJheU1ldGhvZCg0KVxuICAgICwgYXJyYXlGaW5kICAgICAgICAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDUpXG4gICAgLCBhcnJheUZpbmRJbmRleCAgICAgID0gY3JlYXRlQXJyYXlNZXRob2QoNilcbiAgICAsIGFycmF5SW5jbHVkZXMgICAgICAgPSBjcmVhdGVBcnJheUluY2x1ZGVzKHRydWUpXG4gICAgLCBhcnJheUluZGV4T2YgICAgICAgID0gY3JlYXRlQXJyYXlJbmNsdWRlcyhmYWxzZSlcbiAgICAsIGFycmF5VmFsdWVzICAgICAgICAgPSBBcnJheUl0ZXJhdG9ycy52YWx1ZXNcbiAgICAsIGFycmF5S2V5cyAgICAgICAgICAgPSBBcnJheUl0ZXJhdG9ycy5rZXlzXG4gICAgLCBhcnJheUVudHJpZXMgICAgICAgID0gQXJyYXlJdGVyYXRvcnMuZW50cmllc1xuICAgICwgYXJyYXlMYXN0SW5kZXhPZiAgICA9IEFycmF5UHJvdG8ubGFzdEluZGV4T2ZcbiAgICAsIGFycmF5UmVkdWNlICAgICAgICAgPSBBcnJheVByb3RvLnJlZHVjZVxuICAgICwgYXJyYXlSZWR1Y2VSaWdodCAgICA9IEFycmF5UHJvdG8ucmVkdWNlUmlnaHRcbiAgICAsIGFycmF5Sm9pbiAgICAgICAgICAgPSBBcnJheVByb3RvLmpvaW5cbiAgICAsIGFycmF5U29ydCAgICAgICAgICAgPSBBcnJheVByb3RvLnNvcnRcbiAgICAsIGFycmF5U2xpY2UgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlXG4gICAgLCBhcnJheVRvU3RyaW5nICAgICAgID0gQXJyYXlQcm90by50b1N0cmluZ1xuICAgICwgYXJyYXlUb0xvY2FsZVN0cmluZyA9IEFycmF5UHJvdG8udG9Mb2NhbGVTdHJpbmdcbiAgICAsIElURVJBVE9SICAgICAgICAgICAgPSB3a3MoJ2l0ZXJhdG9yJylcbiAgICAsIFRBRyAgICAgICAgICAgICAgICAgPSB3a3MoJ3RvU3RyaW5nVGFnJylcbiAgICAsIFRZUEVEX0NPTlNUUlVDVE9SICAgPSB1aWQoJ3R5cGVkX2NvbnN0cnVjdG9yJylcbiAgICAsIERFRl9DT05TVFJVQ1RPUiAgICAgPSB1aWQoJ2RlZl9jb25zdHJ1Y3RvcicpXG4gICAgLCBBTExfQ09OU1RSVUNUT1JTICAgID0gJHR5cGVkLkNPTlNUUlxuICAgICwgVFlQRURfQVJSQVkgICAgICAgICA9ICR0eXBlZC5UWVBFRFxuICAgICwgVklFVyAgICAgICAgICAgICAgICA9ICR0eXBlZC5WSUVXXG4gICAgLCBXUk9OR19MRU5HVEggICAgICAgID0gJ1dyb25nIGxlbmd0aCEnO1xuXG4gIHZhciAkbWFwID0gY3JlYXRlQXJyYXlNZXRob2QoMSwgZnVuY3Rpb24oTywgbGVuZ3RoKXtcbiAgICByZXR1cm4gYWxsb2NhdGUoc3BlY2llc0NvbnN0cnVjdG9yKE8sIE9bREVGX0NPTlNUUlVDVE9SXSksIGxlbmd0aCk7XG4gIH0pO1xuXG4gIHZhciBMSVRUTEVfRU5ESUFOID0gZmFpbHMoZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkobmV3IFVpbnQxNkFycmF5KFsxXSkuYnVmZmVyKVswXSA9PT0gMTtcbiAgfSk7XG5cbiAgdmFyIEZPUkNFRF9TRVQgPSAhIVVpbnQ4QXJyYXkgJiYgISFVaW50OEFycmF5W1BST1RPVFlQRV0uc2V0ICYmIGZhaWxzKGZ1bmN0aW9uKCl7XG4gICAgbmV3IFVpbnQ4QXJyYXkoMSkuc2V0KHt9KTtcbiAgfSk7XG5cbiAgdmFyIHN0cmljdFRvTGVuZ3RoID0gZnVuY3Rpb24oaXQsIFNBTUUpe1xuICAgIGlmKGl0ID09PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKFdST05HX0xFTkdUSCk7XG4gICAgdmFyIG51bWJlciA9ICtpdFxuICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChpdCk7XG4gICAgaWYoU0FNRSAmJiAhc2FtZShudW1iZXIsIGxlbmd0aCkpdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICAgIHJldHVybiBsZW5ndGg7XG4gIH07XG5cbiAgdmFyIHRvT2Zmc2V0ID0gZnVuY3Rpb24oaXQsIEJZVEVTKXtcbiAgICB2YXIgb2Zmc2V0ID0gdG9JbnRlZ2VyKGl0KTtcbiAgICBpZihvZmZzZXQgPCAwIHx8IG9mZnNldCAlIEJZVEVTKXRocm93IFJhbmdlRXJyb3IoJ1dyb25nIG9mZnNldCEnKTtcbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9O1xuXG4gIHZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uKGl0KXtcbiAgICBpZihpc09iamVjdChpdCkgJiYgVFlQRURfQVJSQVkgaW4gaXQpcmV0dXJuIGl0O1xuICAgIHRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgdHlwZWQgYXJyYXkhJyk7XG4gIH07XG5cbiAgdmFyIGFsbG9jYXRlID0gZnVuY3Rpb24oQywgbGVuZ3RoKXtcbiAgICBpZighKGlzT2JqZWN0KEMpICYmIFRZUEVEX0NPTlNUUlVDVE9SIGluIEMpKXtcbiAgICAgIHRocm93IFR5cGVFcnJvcignSXQgaXMgbm90IGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IhJyk7XG4gICAgfSByZXR1cm4gbmV3IEMobGVuZ3RoKTtcbiAgfTtcblxuICB2YXIgc3BlY2llc0Zyb21MaXN0ID0gZnVuY3Rpb24oTywgbGlzdCl7XG4gICAgcmV0dXJuIGZyb21MaXN0KHNwZWNpZXNDb25zdHJ1Y3RvcihPLCBPW0RFRl9DT05TVFJVQ1RPUl0pLCBsaXN0KTtcbiAgfTtcblxuICB2YXIgZnJvbUxpc3QgPSBmdW5jdGlvbihDLCBsaXN0KXtcbiAgICB2YXIgaW5kZXggID0gMFxuICAgICAgLCBsZW5ndGggPSBsaXN0Lmxlbmd0aFxuICAgICAgLCByZXN1bHQgPSBhbGxvY2F0ZShDLCBsZW5ndGgpO1xuICAgIHdoaWxlKGxlbmd0aCA+IGluZGV4KXJlc3VsdFtpbmRleF0gPSBsaXN0W2luZGV4KytdO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIGFkZEdldHRlciA9IGZ1bmN0aW9uKGl0LCBrZXksIGludGVybmFsKXtcbiAgICBkUChpdCwga2V5LCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5fZFtpbnRlcm5hbF07IH19KTtcbiAgfTtcblxuICB2YXIgJGZyb20gPSBmdW5jdGlvbiBmcm9tKHNvdXJjZSAvKiwgbWFwZm4sIHRoaXNBcmcgKi8pe1xuICAgIHZhciBPICAgICAgID0gdG9PYmplY3Qoc291cmNlKVxuICAgICAgLCBhTGVuICAgID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgLCBtYXBmbiAgID0gYUxlbiA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWRcbiAgICAgICwgbWFwcGluZyA9IG1hcGZuICE9PSB1bmRlZmluZWRcbiAgICAgICwgaXRlckZuICA9IGdldEl0ZXJGbihPKVxuICAgICAgLCBpLCBsZW5ndGgsIHZhbHVlcywgcmVzdWx0LCBzdGVwLCBpdGVyYXRvcjtcbiAgICBpZihpdGVyRm4gIT0gdW5kZWZpbmVkICYmICFpc0FycmF5SXRlcihpdGVyRm4pKXtcbiAgICAgIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKE8pLCB2YWx1ZXMgPSBbXSwgaSA9IDA7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgaSsrKXtcbiAgICAgICAgdmFsdWVzLnB1c2goc3RlcC52YWx1ZSk7XG4gICAgICB9IE8gPSB2YWx1ZXM7XG4gICAgfVxuICAgIGlmKG1hcHBpbmcgJiYgYUxlbiA+IDIpbWFwZm4gPSBjdHgobWFwZm4sIGFyZ3VtZW50c1syXSwgMik7XG4gICAgZm9yKGkgPSAwLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCksIHJlc3VsdCA9IGFsbG9jYXRlKHRoaXMsIGxlbmd0aCk7IGxlbmd0aCA+IGk7IGkrKyl7XG4gICAgICByZXN1bHRbaV0gPSBtYXBwaW5nID8gbWFwZm4oT1tpXSwgaSkgOiBPW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciAkb2YgPSBmdW5jdGlvbiBvZigvKi4uLml0ZW1zKi8pe1xuICAgIHZhciBpbmRleCAgPSAwXG4gICAgICAsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICwgcmVzdWx0ID0gYWxsb2NhdGUodGhpcywgbGVuZ3RoKTtcbiAgICB3aGlsZShsZW5ndGggPiBpbmRleClyZXN1bHRbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4KytdO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gaU9TIFNhZmFyaSA2LnggZmFpbHMgaGVyZVxuICB2YXIgVE9fTE9DQUxFX0JVRyA9ICEhVWludDhBcnJheSAmJiBmYWlscyhmdW5jdGlvbigpeyBhcnJheVRvTG9jYWxlU3RyaW5nLmNhbGwobmV3IFVpbnQ4QXJyYXkoMSkpOyB9KTtcblxuICB2YXIgJHRvTG9jYWxlU3RyaW5nID0gZnVuY3Rpb24gdG9Mb2NhbGVTdHJpbmcoKXtcbiAgICByZXR1cm4gYXJyYXlUb0xvY2FsZVN0cmluZy5hcHBseShUT19MT0NBTEVfQlVHID8gYXJyYXlTbGljZS5jYWxsKHZhbGlkYXRlKHRoaXMpKSA6IHZhbGlkYXRlKHRoaXMpLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIHZhciBwcm90byA9IHtcbiAgICBjb3B5V2l0aGluOiBmdW5jdGlvbiBjb3B5V2l0aGluKHRhcmdldCwgc3RhcnQgLyosIGVuZCAqLyl7XG4gICAgICByZXR1cm4gYXJyYXlDb3B5V2l0aGluLmNhbGwodmFsaWRhdGUodGhpcyksIHRhcmdldCwgc3RhcnQsIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIGV2ZXJ5OiBmdW5jdGlvbiBldmVyeShjYWxsYmFja2ZuIC8qLCB0aGlzQXJnICovKXtcbiAgICAgIHJldHVybiBhcnJheUV2ZXJ5KHZhbGlkYXRlKHRoaXMpLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBmaWxsOiBmdW5jdGlvbiBmaWxsKHZhbHVlIC8qLCBzdGFydCwgZW5kICovKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgcmV0dXJuIGFycmF5RmlsbC5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGZpbHRlcjogZnVuY3Rpb24gZmlsdGVyKGNhbGxiYWNrZm4gLyosIHRoaXNBcmcgKi8pe1xuICAgICAgcmV0dXJuIHNwZWNpZXNGcm9tTGlzdCh0aGlzLCBhcnJheUZpbHRlcih2YWxpZGF0ZSh0aGlzKSwgY2FsbGJhY2tmbixcbiAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpKTtcbiAgICB9LFxuICAgIGZpbmQ6IGZ1bmN0aW9uIGZpbmQocHJlZGljYXRlIC8qLCB0aGlzQXJnICovKXtcbiAgICAgIHJldHVybiBhcnJheUZpbmQodmFsaWRhdGUodGhpcyksIHByZWRpY2F0ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgZmluZEluZGV4OiBmdW5jdGlvbiBmaW5kSW5kZXgocHJlZGljYXRlIC8qLCB0aGlzQXJnICovKXtcbiAgICAgIHJldHVybiBhcnJheUZpbmRJbmRleCh2YWxpZGF0ZSh0aGlzKSwgcHJlZGljYXRlLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrZm4gLyosIHRoaXNBcmcgKi8pe1xuICAgICAgYXJyYXlGb3JFYWNoKHZhbGlkYXRlKHRoaXMpLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBpbmRleE9mOiBmdW5jdGlvbiBpbmRleE9mKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCAqLyl7XG4gICAgICByZXR1cm4gYXJyYXlJbmRleE9mKHZhbGlkYXRlKHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBpbmNsdWRlczogZnVuY3Rpb24gaW5jbHVkZXMoc2VhcmNoRWxlbWVudCAvKiwgZnJvbUluZGV4ICovKXtcbiAgICAgIHJldHVybiBhcnJheUluY2x1ZGVzKHZhbGlkYXRlKHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBqb2luOiBmdW5jdGlvbiBqb2luKHNlcGFyYXRvcil7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAgIHJldHVybiBhcnJheUpvaW4uYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBsYXN0SW5kZXhPZjogZnVuY3Rpb24gbGFzdEluZGV4T2Yoc2VhcmNoRWxlbWVudCAvKiwgZnJvbUluZGV4ICovKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgcmV0dXJuIGFycmF5TGFzdEluZGV4T2YuYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBtYXA6IGZ1bmN0aW9uIG1hcChtYXBmbiAvKiwgdGhpc0FyZyAqLyl7XG4gICAgICByZXR1cm4gJG1hcCh2YWxpZGF0ZSh0aGlzKSwgbWFwZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIHJlZHVjZTogZnVuY3Rpb24gcmVkdWNlKGNhbGxiYWNrZm4gLyosIGluaXRpYWxWYWx1ZSAqLyl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAgIHJldHVybiBhcnJheVJlZHVjZS5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIHJlZHVjZVJpZ2h0OiBmdW5jdGlvbiByZWR1Y2VSaWdodChjYWxsYmFja2ZuIC8qLCBpbml0aWFsVmFsdWUgKi8peyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICByZXR1cm4gYXJyYXlSZWR1Y2VSaWdodC5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIHJldmVyc2U6IGZ1bmN0aW9uIHJldmVyc2UoKXtcbiAgICAgIHZhciB0aGF0ICAgPSB0aGlzXG4gICAgICAgICwgbGVuZ3RoID0gdmFsaWRhdGUodGhhdCkubGVuZ3RoXG4gICAgICAgICwgbWlkZGxlID0gTWF0aC5mbG9vcihsZW5ndGggLyAyKVxuICAgICAgICAsIGluZGV4ICA9IDBcbiAgICAgICAgLCB2YWx1ZTtcbiAgICAgIHdoaWxlKGluZGV4IDwgbWlkZGxlKXtcbiAgICAgICAgdmFsdWUgICAgICAgICA9IHRoYXRbaW5kZXhdO1xuICAgICAgICB0aGF0W2luZGV4KytdID0gdGhhdFstLWxlbmd0aF07XG4gICAgICAgIHRoYXRbbGVuZ3RoXSAgPSB2YWx1ZTtcbiAgICAgIH0gcmV0dXJuIHRoYXQ7XG4gICAgfSxcbiAgICBzb21lOiBmdW5jdGlvbiBzb21lKGNhbGxiYWNrZm4gLyosIHRoaXNBcmcgKi8pe1xuICAgICAgcmV0dXJuIGFycmF5U29tZSh2YWxpZGF0ZSh0aGlzKSwgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgc29ydDogZnVuY3Rpb24gc29ydChjb21wYXJlZm4pe1xuICAgICAgcmV0dXJuIGFycmF5U29ydC5jYWxsKHZhbGlkYXRlKHRoaXMpLCBjb21wYXJlZm4pO1xuICAgIH0sXG4gICAgc3ViYXJyYXk6IGZ1bmN0aW9uIHN1YmFycmF5KGJlZ2luLCBlbmQpe1xuICAgICAgdmFyIE8gICAgICA9IHZhbGlkYXRlKHRoaXMpXG4gICAgICAgICwgbGVuZ3RoID0gTy5sZW5ndGhcbiAgICAgICAgLCAkYmVnaW4gPSB0b0luZGV4KGJlZ2luLCBsZW5ndGgpO1xuICAgICAgcmV0dXJuIG5ldyAoc3BlY2llc0NvbnN0cnVjdG9yKE8sIE9bREVGX0NPTlNUUlVDVE9SXSkpKFxuICAgICAgICBPLmJ1ZmZlcixcbiAgICAgICAgTy5ieXRlT2Zmc2V0ICsgJGJlZ2luICogTy5CWVRFU19QRVJfRUxFTUVOVCxcbiAgICAgICAgdG9MZW5ndGgoKGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogdG9JbmRleChlbmQsIGxlbmd0aCkpIC0gJGJlZ2luKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyICRzbGljZSA9IGZ1bmN0aW9uIHNsaWNlKHN0YXJ0LCBlbmQpe1xuICAgIHJldHVybiBzcGVjaWVzRnJvbUxpc3QodGhpcywgYXJyYXlTbGljZS5jYWxsKHZhbGlkYXRlKHRoaXMpLCBzdGFydCwgZW5kKSk7XG4gIH07XG5cbiAgdmFyICRzZXQgPSBmdW5jdGlvbiBzZXQoYXJyYXlMaWtlIC8qLCBvZmZzZXQgKi8pe1xuICAgIHZhbGlkYXRlKHRoaXMpO1xuICAgIHZhciBvZmZzZXQgPSB0b09mZnNldChhcmd1bWVudHNbMV0sIDEpXG4gICAgICAsIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgICAsIHNyYyAgICA9IHRvT2JqZWN0KGFycmF5TGlrZSlcbiAgICAgICwgbGVuICAgID0gdG9MZW5ndGgoc3JjLmxlbmd0aClcbiAgICAgICwgaW5kZXggID0gMDtcbiAgICBpZihsZW4gKyBvZmZzZXQgPiBsZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICAgIHdoaWxlKGluZGV4IDwgbGVuKXRoaXNbb2Zmc2V0ICsgaW5kZXhdID0gc3JjW2luZGV4KytdO1xuICB9O1xuXG4gIHZhciAkaXRlcmF0b3JzID0ge1xuICAgIGVudHJpZXM6IGZ1bmN0aW9uIGVudHJpZXMoKXtcbiAgICAgIHJldHVybiBhcnJheUVudHJpZXMuY2FsbCh2YWxpZGF0ZSh0aGlzKSk7XG4gICAgfSxcbiAgICBrZXlzOiBmdW5jdGlvbiBrZXlzKCl7XG4gICAgICByZXR1cm4gYXJyYXlLZXlzLmNhbGwodmFsaWRhdGUodGhpcykpO1xuICAgIH0sXG4gICAgdmFsdWVzOiBmdW5jdGlvbiB2YWx1ZXMoKXtcbiAgICAgIHJldHVybiBhcnJheVZhbHVlcy5jYWxsKHZhbGlkYXRlKHRoaXMpKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGlzVEFJbmRleCA9IGZ1bmN0aW9uKHRhcmdldCwga2V5KXtcbiAgICByZXR1cm4gaXNPYmplY3QodGFyZ2V0KVxuICAgICAgJiYgdGFyZ2V0W1RZUEVEX0FSUkFZXVxuICAgICAgJiYgdHlwZW9mIGtleSAhPSAnc3ltYm9sJ1xuICAgICAgJiYga2V5IGluIHRhcmdldFxuICAgICAgJiYgU3RyaW5nKCtrZXkpID09IFN0cmluZyhrZXkpO1xuICB9O1xuICB2YXIgJGdldERlc2MgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpe1xuICAgIHJldHVybiBpc1RBSW5kZXgodGFyZ2V0LCBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpKVxuICAgICAgPyBwcm9wZXJ0eURlc2MoMiwgdGFyZ2V0W2tleV0pXG4gICAgICA6IGdPUEQodGFyZ2V0LCBrZXkpO1xuICB9O1xuICB2YXIgJHNldERlc2MgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZGVzYyl7XG4gICAgaWYoaXNUQUluZGV4KHRhcmdldCwga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSlcbiAgICAgICYmIGlzT2JqZWN0KGRlc2MpXG4gICAgICAmJiBoYXMoZGVzYywgJ3ZhbHVlJylcbiAgICAgICYmICFoYXMoZGVzYywgJ2dldCcpXG4gICAgICAmJiAhaGFzKGRlc2MsICdzZXQnKVxuICAgICAgLy8gVE9ETzogYWRkIHZhbGlkYXRpb24gZGVzY3JpcHRvciB3L28gY2FsbGluZyBhY2Nlc3NvcnNcbiAgICAgICYmICFkZXNjLmNvbmZpZ3VyYWJsZVxuICAgICAgJiYgKCFoYXMoZGVzYywgJ3dyaXRhYmxlJykgfHwgZGVzYy53cml0YWJsZSlcbiAgICAgICYmICghaGFzKGRlc2MsICdlbnVtZXJhYmxlJykgfHwgZGVzYy5lbnVtZXJhYmxlKVxuICAgICl7XG4gICAgICB0YXJnZXRba2V5XSA9IGRlc2MudmFsdWU7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH0gZWxzZSByZXR1cm4gZFAodGFyZ2V0LCBrZXksIGRlc2MpO1xuICB9O1xuXG4gIGlmKCFBTExfQ09OU1RSVUNUT1JTKXtcbiAgICAkR09QRC5mID0gJGdldERlc2M7XG4gICAgJERQLmYgICA9ICRzZXREZXNjO1xuICB9XG5cbiAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhQUxMX0NPTlNUUlVDVE9SUywgJ09iamVjdCcsIHtcbiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXREZXNjLFxuICAgIGRlZmluZVByb3BlcnR5OiAgICAgICAgICAgJHNldERlc2NcbiAgfSk7XG5cbiAgaWYoZmFpbHMoZnVuY3Rpb24oKXsgYXJyYXlUb1N0cmluZy5jYWxsKHt9KTsgfSkpe1xuICAgIGFycmF5VG9TdHJpbmcgPSBhcnJheVRvTG9jYWxlU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKXtcbiAgICAgIHJldHVybiBhcnJheUpvaW4uY2FsbCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICB2YXIgJFR5cGVkQXJyYXlQcm90b3R5cGUkID0gcmVkZWZpbmVBbGwoe30sIHByb3RvKTtcbiAgcmVkZWZpbmVBbGwoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCAkaXRlcmF0b3JzKTtcbiAgaGlkZSgkVHlwZWRBcnJheVByb3RvdHlwZSQsIElURVJBVE9SLCAkaXRlcmF0b3JzLnZhbHVlcyk7XG4gIHJlZGVmaW5lQWxsKCRUeXBlZEFycmF5UHJvdG90eXBlJCwge1xuICAgIHNsaWNlOiAgICAgICAgICAkc2xpY2UsXG4gICAgc2V0OiAgICAgICAgICAgICRzZXQsXG4gICAgY29uc3RydWN0b3I6ICAgIGZ1bmN0aW9uKCl7IC8qIG5vb3AgKi8gfSxcbiAgICB0b1N0cmluZzogICAgICAgYXJyYXlUb1N0cmluZyxcbiAgICB0b0xvY2FsZVN0cmluZzogJHRvTG9jYWxlU3RyaW5nXG4gIH0pO1xuICBhZGRHZXR0ZXIoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCAnYnVmZmVyJywgJ2InKTtcbiAgYWRkR2V0dGVyKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJ2J5dGVPZmZzZXQnLCAnbycpO1xuICBhZGRHZXR0ZXIoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCAnYnl0ZUxlbmd0aCcsICdsJyk7XG4gIGFkZEdldHRlcigkVHlwZWRBcnJheVByb3RvdHlwZSQsICdsZW5ndGgnLCAnZScpO1xuICBkUCgkVHlwZWRBcnJheVByb3RvdHlwZSQsIFRBRywge1xuICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXNbVFlQRURfQVJSQVldOyB9XG4gIH0pO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBCWVRFUywgd3JhcHBlciwgQ0xBTVBFRCl7XG4gICAgQ0xBTVBFRCA9ICEhQ0xBTVBFRDtcbiAgICB2YXIgTkFNRSAgICAgICA9IEtFWSArIChDTEFNUEVEID8gJ0NsYW1wZWQnIDogJycpICsgJ0FycmF5J1xuICAgICAgLCBJU05UX1VJTlQ4ID0gTkFNRSAhPSAnVWludDhBcnJheSdcbiAgICAgICwgR0VUVEVSICAgICA9ICdnZXQnICsgS0VZXG4gICAgICAsIFNFVFRFUiAgICAgPSAnc2V0JyArIEtFWVxuICAgICAgLCBUeXBlZEFycmF5ID0gZ2xvYmFsW05BTUVdXG4gICAgICAsIEJhc2UgICAgICAgPSBUeXBlZEFycmF5IHx8IHt9XG4gICAgICAsIFRBQyAgICAgICAgPSBUeXBlZEFycmF5ICYmIGdldFByb3RvdHlwZU9mKFR5cGVkQXJyYXkpXG4gICAgICAsIEZPUkNFRCAgICAgPSAhVHlwZWRBcnJheSB8fCAhJHR5cGVkLkFCVlxuICAgICAgLCBPICAgICAgICAgID0ge31cbiAgICAgICwgVHlwZWRBcnJheVByb3RvdHlwZSA9IFR5cGVkQXJyYXkgJiYgVHlwZWRBcnJheVtQUk9UT1RZUEVdO1xuICAgIHZhciBnZXR0ZXIgPSBmdW5jdGlvbih0aGF0LCBpbmRleCl7XG4gICAgICB2YXIgZGF0YSA9IHRoYXQuX2Q7XG4gICAgICByZXR1cm4gZGF0YS52W0dFVFRFUl0oaW5kZXggKiBCWVRFUyArIGRhdGEubywgTElUVExFX0VORElBTik7XG4gICAgfTtcbiAgICB2YXIgc2V0dGVyID0gZnVuY3Rpb24odGhhdCwgaW5kZXgsIHZhbHVlKXtcbiAgICAgIHZhciBkYXRhID0gdGhhdC5fZDtcbiAgICAgIGlmKENMQU1QRUQpdmFsdWUgPSAodmFsdWUgPSBNYXRoLnJvdW5kKHZhbHVlKSkgPCAwID8gMCA6IHZhbHVlID4gMHhmZiA/IDB4ZmYgOiB2YWx1ZSAmIDB4ZmY7XG4gICAgICBkYXRhLnZbU0VUVEVSXShpbmRleCAqIEJZVEVTICsgZGF0YS5vLCB2YWx1ZSwgTElUVExFX0VORElBTik7XG4gICAgfTtcbiAgICB2YXIgYWRkRWxlbWVudCA9IGZ1bmN0aW9uKHRoYXQsIGluZGV4KXtcbiAgICAgIGRQKHRoYXQsIGluZGV4LCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKXtcbiAgICAgICAgICByZXR1cm4gZ2V0dGVyKHRoaXMsIGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgcmV0dXJuIHNldHRlcih0aGlzLCBpbmRleCwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGlmKEZPUkNFRCl7XG4gICAgICBUeXBlZEFycmF5ID0gd3JhcHBlcihmdW5jdGlvbih0aGF0LCBkYXRhLCAkb2Zmc2V0LCAkbGVuZ3RoKXtcbiAgICAgICAgYW5JbnN0YW5jZSh0aGF0LCBUeXBlZEFycmF5LCBOQU1FLCAnX2QnKTtcbiAgICAgICAgdmFyIGluZGV4ICA9IDBcbiAgICAgICAgICAsIG9mZnNldCA9IDBcbiAgICAgICAgICAsIGJ1ZmZlciwgYnl0ZUxlbmd0aCwgbGVuZ3RoLCBrbGFzcztcbiAgICAgICAgaWYoIWlzT2JqZWN0KGRhdGEpKXtcbiAgICAgICAgICBsZW5ndGggICAgID0gc3RyaWN0VG9MZW5ndGgoZGF0YSwgdHJ1ZSlcbiAgICAgICAgICBieXRlTGVuZ3RoID0gbGVuZ3RoICogQllURVM7XG4gICAgICAgICAgYnVmZmVyICAgICA9IG5ldyAkQXJyYXlCdWZmZXIoYnl0ZUxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSBpZihkYXRhIGluc3RhbmNlb2YgJEFycmF5QnVmZmVyIHx8IChrbGFzcyA9IGNsYXNzb2YoZGF0YSkpID09IEFSUkFZX0JVRkZFUiB8fCBrbGFzcyA9PSBTSEFSRURfQlVGRkVSKXtcbiAgICAgICAgICBidWZmZXIgPSBkYXRhO1xuICAgICAgICAgIG9mZnNldCA9IHRvT2Zmc2V0KCRvZmZzZXQsIEJZVEVTKTtcbiAgICAgICAgICB2YXIgJGxlbiA9IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgICBpZigkbGVuZ3RoID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgaWYoJGxlbiAlIEJZVEVTKXRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTtcbiAgICAgICAgICAgIGJ5dGVMZW5ndGggPSAkbGVuIC0gb2Zmc2V0O1xuICAgICAgICAgICAgaWYoYnl0ZUxlbmd0aCA8IDApdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBieXRlTGVuZ3RoID0gdG9MZW5ndGgoJGxlbmd0aCkgKiBCWVRFUztcbiAgICAgICAgICAgIGlmKGJ5dGVMZW5ndGggKyBvZmZzZXQgPiAkbGVuKXRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGVuZ3RoID0gYnl0ZUxlbmd0aCAvIEJZVEVTO1xuICAgICAgICB9IGVsc2UgaWYoVFlQRURfQVJSQVkgaW4gZGF0YSl7XG4gICAgICAgICAgcmV0dXJuIGZyb21MaXN0KFR5cGVkQXJyYXksIGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAkZnJvbS5jYWxsKFR5cGVkQXJyYXksIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGhpZGUodGhhdCwgJ19kJywge1xuICAgICAgICAgIGI6IGJ1ZmZlcixcbiAgICAgICAgICBvOiBvZmZzZXQsXG4gICAgICAgICAgbDogYnl0ZUxlbmd0aCxcbiAgICAgICAgICBlOiBsZW5ndGgsXG4gICAgICAgICAgdjogbmV3ICREYXRhVmlldyhidWZmZXIpXG4gICAgICAgIH0pO1xuICAgICAgICB3aGlsZShpbmRleCA8IGxlbmd0aClhZGRFbGVtZW50KHRoYXQsIGluZGV4KyspO1xuICAgICAgfSk7XG4gICAgICBUeXBlZEFycmF5UHJvdG90eXBlID0gVHlwZWRBcnJheVtQUk9UT1RZUEVdID0gY3JlYXRlKCRUeXBlZEFycmF5UHJvdG90eXBlJCk7XG4gICAgICBoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsICdjb25zdHJ1Y3RvcicsIFR5cGVkQXJyYXkpO1xuICAgIH0gZWxzZSBpZighJGl0ZXJEZXRlY3QoZnVuY3Rpb24oaXRlcil7XG4gICAgICAvLyBWOCB3b3JrcyB3aXRoIGl0ZXJhdG9ycywgYnV0IGZhaWxzIGluIG1hbnkgb3RoZXIgY2FzZXNcbiAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD00NTUyXG4gICAgICBuZXcgVHlwZWRBcnJheShudWxsKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcbiAgICAgIG5ldyBUeXBlZEFycmF5KGl0ZXIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICAgIH0sIHRydWUpKXtcbiAgICAgIFR5cGVkQXJyYXkgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGRhdGEsICRvZmZzZXQsICRsZW5ndGgpe1xuICAgICAgICBhbkluc3RhbmNlKHRoYXQsIFR5cGVkQXJyYXksIE5BTUUpO1xuICAgICAgICB2YXIga2xhc3M7XG4gICAgICAgIC8vIGB3c2AgbW9kdWxlIGJ1ZywgdGVtcG9yYXJpbHkgcmVtb3ZlIHZhbGlkYXRpb24gbGVuZ3RoIGZvciBVaW50OEFycmF5XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJzb2NrZXRzL3dzL3B1bGwvNjQ1XG4gICAgICAgIGlmKCFpc09iamVjdChkYXRhKSlyZXR1cm4gbmV3IEJhc2Uoc3RyaWN0VG9MZW5ndGgoZGF0YSwgSVNOVF9VSU5UOCkpO1xuICAgICAgICBpZihkYXRhIGluc3RhbmNlb2YgJEFycmF5QnVmZmVyIHx8IChrbGFzcyA9IGNsYXNzb2YoZGF0YSkpID09IEFSUkFZX0JVRkZFUiB8fCBrbGFzcyA9PSBTSEFSRURfQlVGRkVSKXtcbiAgICAgICAgICByZXR1cm4gJGxlbmd0aCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG5ldyBCYXNlKGRhdGEsIHRvT2Zmc2V0KCRvZmZzZXQsIEJZVEVTKSwgJGxlbmd0aClcbiAgICAgICAgICAgIDogJG9mZnNldCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgID8gbmV3IEJhc2UoZGF0YSwgdG9PZmZzZXQoJG9mZnNldCwgQllURVMpKVxuICAgICAgICAgICAgICA6IG5ldyBCYXNlKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmKFRZUEVEX0FSUkFZIGluIGRhdGEpcmV0dXJuIGZyb21MaXN0KFR5cGVkQXJyYXksIGRhdGEpO1xuICAgICAgICByZXR1cm4gJGZyb20uY2FsbChUeXBlZEFycmF5LCBkYXRhKTtcbiAgICAgIH0pO1xuICAgICAgYXJyYXlGb3JFYWNoKFRBQyAhPT0gRnVuY3Rpb24ucHJvdG90eXBlID8gZ09QTihCYXNlKS5jb25jYXQoZ09QTihUQUMpKSA6IGdPUE4oQmFzZSksIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgIGlmKCEoa2V5IGluIFR5cGVkQXJyYXkpKWhpZGUoVHlwZWRBcnJheSwga2V5LCBCYXNlW2tleV0pO1xuICAgICAgfSk7XG4gICAgICBUeXBlZEFycmF5W1BST1RPVFlQRV0gPSBUeXBlZEFycmF5UHJvdG90eXBlO1xuICAgICAgaWYoIUxJQlJBUlkpVHlwZWRBcnJheVByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFR5cGVkQXJyYXk7XG4gICAgfVxuICAgIHZhciAkbmF0aXZlSXRlcmF0b3IgICA9IFR5cGVkQXJyYXlQcm90b3R5cGVbSVRFUkFUT1JdXG4gICAgICAsIENPUlJFQ1RfSVRFUl9OQU1FID0gISEkbmF0aXZlSXRlcmF0b3IgJiYgKCRuYXRpdmVJdGVyYXRvci5uYW1lID09ICd2YWx1ZXMnIHx8ICRuYXRpdmVJdGVyYXRvci5uYW1lID09IHVuZGVmaW5lZClcbiAgICAgICwgJGl0ZXJhdG9yICAgICAgICAgPSAkaXRlcmF0b3JzLnZhbHVlcztcbiAgICBoaWRlKFR5cGVkQXJyYXksIFRZUEVEX0NPTlNUUlVDVE9SLCB0cnVlKTtcbiAgICBoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIFRZUEVEX0FSUkFZLCBOQU1FKTtcbiAgICBoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIFZJRVcsIHRydWUpO1xuICAgIGhpZGUoVHlwZWRBcnJheVByb3RvdHlwZSwgREVGX0NPTlNUUlVDVE9SLCBUeXBlZEFycmF5KTtcblxuICAgIGlmKENMQU1QRUQgPyBuZXcgVHlwZWRBcnJheSgxKVtUQUddICE9IE5BTUUgOiAhKFRBRyBpbiBUeXBlZEFycmF5UHJvdG90eXBlKSl7XG4gICAgICBkUChUeXBlZEFycmF5UHJvdG90eXBlLCBUQUcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gTkFNRTsgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgT1tOQU1FXSA9IFR5cGVkQXJyYXk7XG5cbiAgICAkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqIChUeXBlZEFycmF5ICE9IEJhc2UpLCBPKTtcblxuICAgICRleHBvcnQoJGV4cG9ydC5TLCBOQU1FLCB7XG4gICAgICBCWVRFU19QRVJfRUxFTUVOVDogQllURVMsXG4gICAgICBmcm9tOiAkZnJvbSxcbiAgICAgIG9mOiAkb2ZcbiAgICB9KTtcblxuICAgIGlmKCEoQllURVNfUEVSX0VMRU1FTlQgaW4gVHlwZWRBcnJheVByb3RvdHlwZSkpaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBCWVRFU19QRVJfRUxFTUVOVCwgQllURVMpO1xuXG4gICAgJGV4cG9ydCgkZXhwb3J0LlAsIE5BTUUsIHByb3RvKTtcblxuICAgIHNldFNwZWNpZXMoTkFNRSk7XG5cbiAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIEZPUkNFRF9TRVQsIE5BTUUsIHtzZXQ6ICRzZXR9KTtcblxuICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIUNPUlJFQ1RfSVRFUl9OQU1FLCBOQU1FLCAkaXRlcmF0b3JzKTtcblxuICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKFR5cGVkQXJyYXlQcm90b3R5cGUudG9TdHJpbmcgIT0gYXJyYXlUb1N0cmluZyksIE5BTUUsIHt0b1N0cmluZzogYXJyYXlUb1N0cmluZ30pO1xuXG4gICAgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBmYWlscyhmdW5jdGlvbigpe1xuICAgICAgbmV3IFR5cGVkQXJyYXkoMSkuc2xpY2UoKTtcbiAgICB9KSwgTkFNRSwge3NsaWNlOiAkc2xpY2V9KTtcblxuICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKGZhaWxzKGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gWzEsIDJdLnRvTG9jYWxlU3RyaW5nKCkgIT0gbmV3IFR5cGVkQXJyYXkoWzEsIDJdKS50b0xvY2FsZVN0cmluZygpXG4gICAgfSkgfHwgIWZhaWxzKGZ1bmN0aW9uKCl7XG4gICAgICBUeXBlZEFycmF5UHJvdG90eXBlLnRvTG9jYWxlU3RyaW5nLmNhbGwoWzEsIDJdKTtcbiAgICB9KSksIE5BTUUsIHt0b0xvY2FsZVN0cmluZzogJHRvTG9jYWxlU3RyaW5nfSk7XG5cbiAgICBJdGVyYXRvcnNbTkFNRV0gPSBDT1JSRUNUX0lURVJfTkFNRSA/ICRuYXRpdmVJdGVyYXRvciA6ICRpdGVyYXRvcjtcbiAgICBpZighTElCUkFSWSAmJiAhQ09SUkVDVF9JVEVSX05BTUUpaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBJVEVSQVRPUiwgJGl0ZXJhdG9yKTtcbiAgfTtcbn0gZWxzZSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL190eXBlZC1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnVWludDgnLCAxLCBmdW5jdGlvbihpbml0KXtcbiAgcmV0dXJuIGZ1bmN0aW9uIFVpbnQ4QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcbiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC51aW50OC1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnVWludDgnLCAxLCBmdW5jdGlvbihpbml0KXtcbiAgcmV0dXJuIGZ1bmN0aW9uIFVpbnQ4Q2xhbXBlZEFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCl7XG4gICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTtcbiAgfTtcbn0sIHRydWUpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYudHlwZWQudWludDgtY2xhbXBlZC1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnSW50MTYnLCAyLCBmdW5jdGlvbihpbml0KXtcbiAgcmV0dXJuIGZ1bmN0aW9uIEludDE2QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcbiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC5pbnQxNi1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI2OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnVWludDE2JywgMiwgZnVuY3Rpb24oaW5pdCl7XG4gIHJldHVybiBmdW5jdGlvbiBVaW50MTZBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpe1xuICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG4gIH07XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnR5cGVkLnVpbnQxNi1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnSW50MzInLCA0LCBmdW5jdGlvbihpbml0KXtcbiAgcmV0dXJuIGZ1bmN0aW9uIEludDMyQXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXtcbiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi50eXBlZC5pbnQzMi1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnVWludDMyJywgNCwgZnVuY3Rpb24oaW5pdCl7XG4gIHJldHVybiBmdW5jdGlvbiBVaW50MzJBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpe1xuICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7XG4gIH07XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnR5cGVkLnVpbnQzMi1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnRmxvYXQzMicsIDQsIGZ1bmN0aW9uKGluaXQpe1xuICByZXR1cm4gZnVuY3Rpb24gRmxvYXQzMkFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCl7XG4gICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTtcbiAgfTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYudHlwZWQuZmxvYXQzMi1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnRmxvYXQ2NCcsIDgsIGZ1bmN0aW9uKGluaXQpe1xuICByZXR1cm4gZnVuY3Rpb24gRmxvYXQ2NEFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCl7XG4gICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTtcbiAgfTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYudHlwZWQuZmxvYXQ2NC1hcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjYuMS4xIFJlZmxlY3QuYXBwbHkodGFyZ2V0LCB0aGlzQXJndW1lbnQsIGFyZ3VtZW50c0xpc3QpXG52YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBhRnVuY3Rpb24gPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJylcbiAgLCBhbk9iamVjdCAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIHJBcHBseSAgICA9IChyZXF1aXJlKCcuL19nbG9iYWwnKS5SZWZsZWN0IHx8IHt9KS5hcHBseVxuICAsIGZBcHBseSAgICA9IEZ1bmN0aW9uLmFwcGx5O1xuLy8gTVMgRWRnZSBhcmd1bWVudHNMaXN0IGFyZ3VtZW50IGlzIG9wdGlvbmFsXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJBcHBseShmdW5jdGlvbigpe30pO1xufSksICdSZWZsZWN0Jywge1xuICBhcHBseTogZnVuY3Rpb24gYXBwbHkodGFyZ2V0LCB0aGlzQXJndW1lbnQsIGFyZ3VtZW50c0xpc3Qpe1xuICAgIHZhciBUID0gYUZ1bmN0aW9uKHRhcmdldClcbiAgICAgICwgTCA9IGFuT2JqZWN0KGFyZ3VtZW50c0xpc3QpO1xuICAgIHJldHVybiByQXBwbHkgPyByQXBwbHkoVCwgdGhpc0FyZ3VtZW50LCBMKSA6IGZBcHBseS5jYWxsKFQsIHRoaXNBcmd1bWVudCwgTCk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVmbGVjdC5hcHBseS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjYuMS4yIFJlZmxlY3QuY29uc3RydWN0KHRhcmdldCwgYXJndW1lbnRzTGlzdCBbLCBuZXdUYXJnZXRdKVxudmFyICRleHBvcnQgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGNyZWF0ZSAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtY3JlYXRlJylcbiAgLCBhRnVuY3Rpb24gID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpXG4gICwgYW5PYmplY3QgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgaXNPYmplY3QgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgZmFpbHMgICAgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJylcbiAgLCBiaW5kICAgICAgID0gcmVxdWlyZSgnLi9fYmluZCcpXG4gICwgckNvbnN0cnVjdCA9IChyZXF1aXJlKCcuL19nbG9iYWwnKS5SZWZsZWN0IHx8IHt9KS5jb25zdHJ1Y3Q7XG5cbi8vIE1TIEVkZ2Ugc3VwcG9ydHMgb25seSAyIGFyZ3VtZW50cyBhbmQgYXJndW1lbnRzTGlzdCBhcmd1bWVudCBpcyBvcHRpb25hbFxuLy8gRkYgTmlnaHRseSBzZXRzIHRoaXJkIGFyZ3VtZW50IGFzIGBuZXcudGFyZ2V0YCwgYnV0IGRvZXMgbm90IGNyZWF0ZSBgdGhpc2AgZnJvbSBpdFxudmFyIE5FV19UQVJHRVRfQlVHID0gZmFpbHMoZnVuY3Rpb24oKXtcbiAgZnVuY3Rpb24gRigpe31cbiAgcmV0dXJuICEockNvbnN0cnVjdChmdW5jdGlvbigpe30sIFtdLCBGKSBpbnN0YW5jZW9mIEYpO1xufSk7XG52YXIgQVJHU19CVUcgPSAhZmFpbHMoZnVuY3Rpb24oKXtcbiAgckNvbnN0cnVjdChmdW5jdGlvbigpe30pO1xufSk7XG5cbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKE5FV19UQVJHRVRfQlVHIHx8IEFSR1NfQlVHKSwgJ1JlZmxlY3QnLCB7XG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gY29uc3RydWN0KFRhcmdldCwgYXJncyAvKiwgbmV3VGFyZ2V0Ki8pe1xuICAgIGFGdW5jdGlvbihUYXJnZXQpO1xuICAgIGFuT2JqZWN0KGFyZ3MpO1xuICAgIHZhciBuZXdUYXJnZXQgPSBhcmd1bWVudHMubGVuZ3RoIDwgMyA/IFRhcmdldCA6IGFGdW5jdGlvbihhcmd1bWVudHNbMl0pO1xuICAgIGlmKEFSR1NfQlVHICYmICFORVdfVEFSR0VUX0JVRylyZXR1cm4gckNvbnN0cnVjdChUYXJnZXQsIGFyZ3MsIG5ld1RhcmdldCk7XG4gICAgaWYoVGFyZ2V0ID09IG5ld1RhcmdldCl7XG4gICAgICAvLyB3L28gYWx0ZXJlZCBuZXdUYXJnZXQsIG9wdGltaXphdGlvbiBmb3IgMC00IGFyZ3VtZW50c1xuICAgICAgc3dpdGNoKGFyZ3MubGVuZ3RoKXtcbiAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IFRhcmdldDtcbiAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdKTtcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgY2FzZSAzOiByZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgY2FzZSA0OiByZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKTtcbiAgICAgIH1cbiAgICAgIC8vIHcvbyBhbHRlcmVkIG5ld1RhcmdldCwgbG90IG9mIGFyZ3VtZW50cyBjYXNlXG4gICAgICB2YXIgJGFyZ3MgPSBbbnVsbF07XG4gICAgICAkYXJncy5wdXNoLmFwcGx5KCRhcmdzLCBhcmdzKTtcbiAgICAgIHJldHVybiBuZXcgKGJpbmQuYXBwbHkoVGFyZ2V0LCAkYXJncykpO1xuICAgIH1cbiAgICAvLyB3aXRoIGFsdGVyZWQgbmV3VGFyZ2V0LCBub3Qgc3VwcG9ydCBidWlsdC1pbiBjb25zdHJ1Y3RvcnNcbiAgICB2YXIgcHJvdG8gICAgPSBuZXdUYXJnZXQucHJvdG90eXBlXG4gICAgICAsIGluc3RhbmNlID0gY3JlYXRlKGlzT2JqZWN0KHByb3RvKSA/IHByb3RvIDogT2JqZWN0LnByb3RvdHlwZSlcbiAgICAgICwgcmVzdWx0ICAgPSBGdW5jdGlvbi5hcHBseS5jYWxsKFRhcmdldCwgaW5zdGFuY2UsIGFyZ3MpO1xuICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogaW5zdGFuY2U7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVmbGVjdC5jb25zdHJ1Y3QuanNcbiAqKiBtb2R1bGUgaWQgPSAyNzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDI2LjEuMyBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXMpXG52YXIgZFAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKVxuICAsICRleHBvcnQgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBhbk9iamVjdCAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgdG9QcmltaXRpdmUgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKTtcblxuLy8gTVMgRWRnZSBoYXMgYnJva2VuIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkgLSB0aHJvd2luZyBpbnN0ZWFkIG9mIHJldHVybmluZyBmYWxzZVxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7XG4gIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoZFAuZih7fSwgMSwge3ZhbHVlOiAxfSksIDEsIHt2YWx1ZTogMn0pO1xufSksICdSZWZsZWN0Jywge1xuICBkZWZpbmVQcm9wZXJ0eTogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleSwgYXR0cmlidXRlcyl7XG4gICAgYW5PYmplY3QodGFyZ2V0KTtcbiAgICBwcm9wZXJ0eUtleSA9IHRvUHJpbWl0aXZlKHByb3BlcnR5S2V5LCB0cnVlKTtcbiAgICBhbk9iamVjdChhdHRyaWJ1dGVzKTtcbiAgICB0cnkge1xuICAgICAgZFAuZih0YXJnZXQsIHByb3BlcnR5S2V5LCBhdHRyaWJ1dGVzKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3QuZGVmaW5lLXByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMjc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyNi4xLjQgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5KVxudmFyICRleHBvcnQgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBnT1BEICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJykuZlxuICAsIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtcbiAgZGVsZXRlUHJvcGVydHk6IGZ1bmN0aW9uIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXkpe1xuICAgIHZhciBkZXNjID0gZ09QRChhbk9iamVjdCh0YXJnZXQpLCBwcm9wZXJ0eUtleSk7XG4gICAgcmV0dXJuIGRlc2MgJiYgIWRlc2MuY29uZmlndXJhYmxlID8gZmFsc2UgOiBkZWxldGUgdGFyZ2V0W3Byb3BlcnR5S2V5XTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0LmRlbGV0ZS1wcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gMjYuMS41IFJlZmxlY3QuZW51bWVyYXRlKHRhcmdldClcbnZhciAkZXhwb3J0ICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTtcbnZhciBFbnVtZXJhdGUgPSBmdW5jdGlvbihpdGVyYXRlZCl7XG4gIHRoaXMuX3QgPSBhbk9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldFxuICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4XG4gIHZhciBrZXlzID0gdGhpcy5fayA9IFtdICAgICAgIC8vIGtleXNcbiAgICAsIGtleTtcbiAgZm9yKGtleSBpbiBpdGVyYXRlZClrZXlzLnB1c2goa2V5KTtcbn07XG5yZXF1aXJlKCcuL19pdGVyLWNyZWF0ZScpKEVudW1lcmF0ZSwgJ09iamVjdCcsIGZ1bmN0aW9uKCl7XG4gIHZhciB0aGF0ID0gdGhpc1xuICAgICwga2V5cyA9IHRoYXQuX2tcbiAgICAsIGtleTtcbiAgZG8ge1xuICAgIGlmKHRoYXQuX2kgPj0ga2V5cy5sZW5ndGgpcmV0dXJuIHt2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlfTtcbiAgfSB3aGlsZSghKChrZXkgPSBrZXlzW3RoYXQuX2krK10pIGluIHRoYXQuX3QpKTtcbiAgcmV0dXJuIHt2YWx1ZToga2V5LCBkb25lOiBmYWxzZX07XG59KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge1xuICBlbnVtZXJhdGU6IGZ1bmN0aW9uIGVudW1lcmF0ZSh0YXJnZXQpe1xuICAgIHJldHVybiBuZXcgRW51bWVyYXRlKHRhcmdldCk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVmbGVjdC5lbnVtZXJhdGUuanNcbiAqKiBtb2R1bGUgaWQgPSAyNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDI2LjEuNiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3BlcnR5S2V5IFssIHJlY2VpdmVyXSlcbnZhciBnT1BEICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJylcbiAgLCBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgaXNPYmplY3QgICAgICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKVxuICAsIGFuT2JqZWN0ICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7XG5cbmZ1bmN0aW9uIGdldCh0YXJnZXQsIHByb3BlcnR5S2V5LyosIHJlY2VpdmVyKi8pe1xuICB2YXIgcmVjZWl2ZXIgPSBhcmd1bWVudHMubGVuZ3RoIDwgMyA/IHRhcmdldCA6IGFyZ3VtZW50c1syXVxuICAgICwgZGVzYywgcHJvdG87XG4gIGlmKGFuT2JqZWN0KHRhcmdldCkgPT09IHJlY2VpdmVyKXJldHVybiB0YXJnZXRbcHJvcGVydHlLZXldO1xuICBpZihkZXNjID0gZ09QRC5mKHRhcmdldCwgcHJvcGVydHlLZXkpKXJldHVybiBoYXMoZGVzYywgJ3ZhbHVlJylcbiAgICA/IGRlc2MudmFsdWVcbiAgICA6IGRlc2MuZ2V0ICE9PSB1bmRlZmluZWRcbiAgICAgID8gZGVzYy5nZXQuY2FsbChyZWNlaXZlcilcbiAgICAgIDogdW5kZWZpbmVkO1xuICBpZihpc09iamVjdChwcm90byA9IGdldFByb3RvdHlwZU9mKHRhcmdldCkpKXJldHVybiBnZXQocHJvdG8sIHByb3BlcnR5S2V5LCByZWNlaXZlcik7XG59XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtnZXQ6IGdldH0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVmbGVjdC5nZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAyNzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDI2LjEuNyBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5S2V5KVxudmFyIGdPUEQgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKVxuICAsICRleHBvcnQgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBhbk9iamVjdCA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG4gIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHlLZXkpe1xuICAgIHJldHVybiBnT1BELmYoYW5PYmplY3QodGFyZ2V0KSwgcHJvcGVydHlLZXkpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzXG4gKiogbW9kdWxlIGlkID0gMjgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyNi4xLjggUmVmbGVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpXG52YXIgJGV4cG9ydCAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGdldFByb3RvID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpXG4gICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge1xuICBnZXRQcm90b3R5cGVPZjogZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YodGFyZ2V0KXtcbiAgICByZXR1cm4gZ2V0UHJvdG8oYW5PYmplY3QodGFyZ2V0KSk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczYucmVmbGVjdC5nZXQtcHJvdG90eXBlLW9mLmpzXG4gKiogbW9kdWxlIGlkID0gMjgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyNi4xLjkgUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wZXJ0eUtleSlcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtcbiAgaGFzOiBmdW5jdGlvbiBoYXModGFyZ2V0LCBwcm9wZXJ0eUtleSl7XG4gICAgcmV0dXJuIHByb3BlcnR5S2V5IGluIHRhcmdldDtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0Lmhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDI4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjYuMS4xMCBSZWZsZWN0LmlzRXh0ZW5zaWJsZSh0YXJnZXQpXG52YXIgJGV4cG9ydCAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgYW5PYmplY3QgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgJGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGU7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtcbiAgaXNFeHRlbnNpYmxlOiBmdW5jdGlvbiBpc0V4dGVuc2libGUodGFyZ2V0KXtcbiAgICBhbk9iamVjdCh0YXJnZXQpO1xuICAgIHJldHVybiAkaXNFeHRlbnNpYmxlID8gJGlzRXh0ZW5zaWJsZSh0YXJnZXQpIDogdHJ1ZTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0LmlzLWV4dGVuc2libGUuanNcbiAqKiBtb2R1bGUgaWQgPSAyODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIDI2LjEuMTEgUmVmbGVjdC5vd25LZXlzKHRhcmdldClcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHtvd25LZXlzOiByZXF1aXJlKCcuL19vd24ta2V5cycpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNi5yZWZsZWN0Lm93bi1rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMjg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzXG52YXIgZ09QTiAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpXG4gICwgZ09QUyAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpXG4gICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIFJlZmxlY3QgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuUmVmbGVjdDtcbm1vZHVsZS5leHBvcnRzID0gUmVmbGVjdCAmJiBSZWZsZWN0Lm93bktleXMgfHwgZnVuY3Rpb24gb3duS2V5cyhpdCl7XG4gIHZhciBrZXlzICAgICAgID0gZ09QTi5mKGFuT2JqZWN0KGl0KSlcbiAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmY7XG4gIHJldHVybiBnZXRTeW1ib2xzID8ga2V5cy5jb25jYXQoZ2V0U3ltYm9scyhpdCkpIDoga2V5cztcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19vd24ta2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDI4NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gMjYuMS4xMiBSZWZsZWN0LnByZXZlbnRFeHRlbnNpb25zKHRhcmdldClcbnZhciAkZXhwb3J0ICAgICAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGFuT2JqZWN0ICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgJHByZXZlbnRFeHRlbnNpb25zID0gT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7XG4gIHByZXZlbnRFeHRlbnNpb25zOiBmdW5jdGlvbiBwcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpe1xuICAgIGFuT2JqZWN0KHRhcmdldCk7XG4gICAgdHJ5IHtcbiAgICAgIGlmKCRwcmV2ZW50RXh0ZW5zaW9ucykkcHJldmVudEV4dGVuc2lvbnModGFyZ2V0KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3QucHJldmVudC1leHRlbnNpb25zLmpzXG4gKiogbW9kdWxlIGlkID0gMjg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyNi4xLjEzIFJlZmxlY3Quc2V0KHRhcmdldCwgcHJvcGVydHlLZXksIFYgWywgcmVjZWl2ZXJdKVxudmFyIGRQICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJylcbiAgLCBnT1BEICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJylcbiAgLCBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgY3JlYXRlRGVzYyAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgaXNPYmplY3QgICAgICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTtcblxuZnVuY3Rpb24gc2V0KHRhcmdldCwgcHJvcGVydHlLZXksIFYvKiwgcmVjZWl2ZXIqLyl7XG4gIHZhciByZWNlaXZlciA9IGFyZ3VtZW50cy5sZW5ndGggPCA0ID8gdGFyZ2V0IDogYXJndW1lbnRzWzNdXG4gICAgLCBvd25EZXNjICA9IGdPUEQuZihhbk9iamVjdCh0YXJnZXQpLCBwcm9wZXJ0eUtleSlcbiAgICAsIGV4aXN0aW5nRGVzY3JpcHRvciwgcHJvdG87XG4gIGlmKCFvd25EZXNjKXtcbiAgICBpZihpc09iamVjdChwcm90byA9IGdldFByb3RvdHlwZU9mKHRhcmdldCkpKXtcbiAgICAgIHJldHVybiBzZXQocHJvdG8sIHByb3BlcnR5S2V5LCBWLCByZWNlaXZlcik7XG4gICAgfVxuICAgIG93bkRlc2MgPSBjcmVhdGVEZXNjKDApO1xuICB9XG4gIGlmKGhhcyhvd25EZXNjLCAndmFsdWUnKSl7XG4gICAgaWYob3duRGVzYy53cml0YWJsZSA9PT0gZmFsc2UgfHwgIWlzT2JqZWN0KHJlY2VpdmVyKSlyZXR1cm4gZmFsc2U7XG4gICAgZXhpc3RpbmdEZXNjcmlwdG9yID0gZ09QRC5mKHJlY2VpdmVyLCBwcm9wZXJ0eUtleSkgfHwgY3JlYXRlRGVzYygwKTtcbiAgICBleGlzdGluZ0Rlc2NyaXB0b3IudmFsdWUgPSBWO1xuICAgIGRQLmYocmVjZWl2ZXIsIHByb3BlcnR5S2V5LCBleGlzdGluZ0Rlc2NyaXB0b3IpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBvd25EZXNjLnNldCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiAob3duRGVzYy5zZXQuY2FsbChyZWNlaXZlciwgViksIHRydWUpO1xufVxuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7c2V0OiBzZXR9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3Quc2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMjg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyAyNi4xLjE0IFJlZmxlY3Quc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90bylcbnZhciAkZXhwb3J0ICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgc2V0UHJvdG8gPSByZXF1aXJlKCcuL19zZXQtcHJvdG8nKTtcblxuaWYoc2V0UHJvdG8pJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge1xuICBzZXRQcm90b3R5cGVPZjogZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90byl7XG4gICAgc2V0UHJvdG8uY2hlY2sodGFyZ2V0LCBwcm90byk7XG4gICAgdHJ5IHtcbiAgICAgIHNldFByb3RvLnNldCh0YXJnZXQsIHByb3RvKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM2LnJlZmxlY3Quc2V0LXByb3RvdHlwZS1vZi5qc1xuICoqIG1vZHVsZSBpZCA9IDI4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzXG52YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkaW5jbHVkZXMgPSByZXF1aXJlKCcuL19hcnJheS1pbmNsdWRlcycpKHRydWUpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCwgJ0FycmF5Jywge1xuICBpbmNsdWRlczogZnVuY3Rpb24gaW5jbHVkZXMoZWwgLyosIGZyb21JbmRleCA9IDAgKi8pe1xuICAgIHJldHVybiAkaW5jbHVkZXModGhpcywgZWwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTtcbiAgfVxufSk7XG5cbnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKCdpbmNsdWRlcycpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAyODlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXRoaWFzYnluZW5zL1N0cmluZy5wcm90b3R5cGUuYXRcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkYXQgICAgID0gcmVxdWlyZSgnLi9fc3RyaW5nLWF0JykodHJ1ZSk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywge1xuICBhdDogZnVuY3Rpb24gYXQocG9zKXtcbiAgICByZXR1cm4gJGF0KHRoaXMsIHBvcyk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc3RyaW5nLmF0LmpzXG4gKiogbW9kdWxlIGlkID0gMjkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZFxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRwYWQgICAgPSByZXF1aXJlKCcuL19zdHJpbmctcGFkJyk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywge1xuICBwYWRTdGFydDogZnVuY3Rpb24gcGFkU3RhcnQobWF4TGVuZ3RoIC8qLCBmaWxsU3RyaW5nID0gJyAnICovKXtcbiAgICByZXR1cm4gJHBhZCh0aGlzLCBtYXhMZW5ndGgsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCB0cnVlKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5zdHJpbmcucGFkLXN0YXJ0LmpzXG4gKiogbW9kdWxlIGlkID0gMjkxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZFxudmFyIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJylcbiAgLCByZXBlYXQgICA9IHJlcXVpcmUoJy4vX3N0cmluZy1yZXBlYXQnKVxuICAsIGRlZmluZWQgID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRoYXQsIG1heExlbmd0aCwgZmlsbFN0cmluZywgbGVmdCl7XG4gIHZhciBTICAgICAgICAgICAgPSBTdHJpbmcoZGVmaW5lZCh0aGF0KSlcbiAgICAsIHN0cmluZ0xlbmd0aCA9IFMubGVuZ3RoXG4gICAgLCBmaWxsU3RyICAgICAgPSBmaWxsU3RyaW5nID09PSB1bmRlZmluZWQgPyAnICcgOiBTdHJpbmcoZmlsbFN0cmluZylcbiAgICAsIGludE1heExlbmd0aCA9IHRvTGVuZ3RoKG1heExlbmd0aCk7XG4gIGlmKGludE1heExlbmd0aCA8PSBzdHJpbmdMZW5ndGggfHwgZmlsbFN0ciA9PSAnJylyZXR1cm4gUztcbiAgdmFyIGZpbGxMZW4gPSBpbnRNYXhMZW5ndGggLSBzdHJpbmdMZW5ndGhcbiAgICAsIHN0cmluZ0ZpbGxlciA9IHJlcGVhdC5jYWxsKGZpbGxTdHIsIE1hdGguY2VpbChmaWxsTGVuIC8gZmlsbFN0ci5sZW5ndGgpKTtcbiAgaWYoc3RyaW5nRmlsbGVyLmxlbmd0aCA+IGZpbGxMZW4pc3RyaW5nRmlsbGVyID0gc3RyaW5nRmlsbGVyLnNsaWNlKDAsIGZpbGxMZW4pO1xuICByZXR1cm4gbGVmdCA/IHN0cmluZ0ZpbGxlciArIFMgOiBTICsgc3RyaW5nRmlsbGVyO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fc3RyaW5nLXBhZC5qc1xuICoqIG1vZHVsZSBpZCA9IDI5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmRcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkcGFkICAgID0gcmVxdWlyZSgnLi9fc3RyaW5nLXBhZCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCwgJ1N0cmluZycsIHtcbiAgcGFkRW5kOiBmdW5jdGlvbiBwYWRFbmQobWF4TGVuZ3RoIC8qLCBmaWxsU3RyaW5nID0gJyAnICovKXtcbiAgICByZXR1cm4gJHBhZCh0aGlzLCBtYXhMZW5ndGgsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCBmYWxzZSk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc3RyaW5nLnBhZC1lbmQuanNcbiAqKiBtb2R1bGUgaWQgPSAyOTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zZWJtYXJrYmFnZS9lY21hc2NyaXB0LXN0cmluZy1sZWZ0LXJpZ2h0LXRyaW1cbnJlcXVpcmUoJy4vX3N0cmluZy10cmltJykoJ3RyaW1MZWZ0JywgZnVuY3Rpb24oJHRyaW0pe1xuICByZXR1cm4gZnVuY3Rpb24gdHJpbUxlZnQoKXtcbiAgICByZXR1cm4gJHRyaW0odGhpcywgMSk7XG4gIH07XG59LCAndHJpbVN0YXJ0Jyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5zdHJpbmcudHJpbS1sZWZ0LmpzXG4gKiogbW9kdWxlIGlkID0gMjk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vc2VibWFya2JhZ2UvZWNtYXNjcmlwdC1zdHJpbmctbGVmdC1yaWdodC10cmltXG5yZXF1aXJlKCcuL19zdHJpbmctdHJpbScpKCd0cmltUmlnaHQnLCBmdW5jdGlvbigkdHJpbSl7XG4gIHJldHVybiBmdW5jdGlvbiB0cmltUmlnaHQoKXtcbiAgICByZXR1cm4gJHRyaW0odGhpcywgMik7XG4gIH07XG59LCAndHJpbUVuZCcpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc3RyaW5nLnRyaW0tcmlnaHQuanNcbiAqKiBtb2R1bGUgaWQgPSAyOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0Jztcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vU3RyaW5nLnByb3RvdHlwZS5tYXRjaEFsbC9cbnZhciAkZXhwb3J0ICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgZGVmaW5lZCAgICAgPSByZXF1aXJlKCcuL19kZWZpbmVkJylcbiAgLCB0b0xlbmd0aCAgICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpXG4gICwgaXNSZWdFeHAgICAgPSByZXF1aXJlKCcuL19pcy1yZWdleHAnKVxuICAsIGdldEZsYWdzICAgID0gcmVxdWlyZSgnLi9fZmxhZ3MnKVxuICAsIFJlZ0V4cFByb3RvID0gUmVnRXhwLnByb3RvdHlwZTtcblxudmFyICRSZWdFeHBTdHJpbmdJdGVyYXRvciA9IGZ1bmN0aW9uKHJlZ2V4cCwgc3RyaW5nKXtcbiAgdGhpcy5fciA9IHJlZ2V4cDtcbiAgdGhpcy5fcyA9IHN0cmluZztcbn07XG5cbnJlcXVpcmUoJy4vX2l0ZXItY3JlYXRlJykoJFJlZ0V4cFN0cmluZ0l0ZXJhdG9yLCAnUmVnRXhwIFN0cmluZycsIGZ1bmN0aW9uIG5leHQoKXtcbiAgdmFyIG1hdGNoID0gdGhpcy5fci5leGVjKHRoaXMuX3MpO1xuICByZXR1cm4ge3ZhbHVlOiBtYXRjaCwgZG9uZTogbWF0Y2ggPT09IG51bGx9O1xufSk7XG5cbiRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywge1xuICBtYXRjaEFsbDogZnVuY3Rpb24gbWF0Y2hBbGwocmVnZXhwKXtcbiAgICBkZWZpbmVkKHRoaXMpO1xuICAgIGlmKCFpc1JlZ0V4cChyZWdleHApKXRocm93IFR5cGVFcnJvcihyZWdleHAgKyAnIGlzIG5vdCBhIHJlZ2V4cCEnKTtcbiAgICB2YXIgUyAgICAgPSBTdHJpbmcodGhpcylcbiAgICAgICwgZmxhZ3MgPSAnZmxhZ3MnIGluIFJlZ0V4cFByb3RvID8gU3RyaW5nKHJlZ2V4cC5mbGFncykgOiBnZXRGbGFncy5jYWxsKHJlZ2V4cClcbiAgICAgICwgcnggICAgPSBuZXcgUmVnRXhwKHJlZ2V4cC5zb3VyY2UsIH5mbGFncy5pbmRleE9mKCdnJykgPyBmbGFncyA6ICdnJyArIGZsYWdzKTtcbiAgICByeC5sYXN0SW5kZXggPSB0b0xlbmd0aChyZWdleHAubGFzdEluZGV4KTtcbiAgICByZXR1cm4gbmV3ICRSZWdFeHBTdHJpbmdJdGVyYXRvcihyeCwgUyk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc3RyaW5nLm1hdGNoLWFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDI5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwicmVxdWlyZSgnLi9fd2tzLWRlZmluZScpKCdhc3luY0l0ZXJhdG9yJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSAyOTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInJlcXVpcmUoJy4vX3drcy1kZWZpbmUnKSgnb2JzZXJ2YWJsZScpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc3ltYm9sLm9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAyOThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC1nZXRvd25wcm9wZXJ0eWRlc2NyaXB0b3JzXG52YXIgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIG93bktleXMgICAgICAgID0gcmVxdWlyZSgnLi9fb3duLWtleXMnKVxuICAsIHRvSU9iamVjdCAgICAgID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpXG4gICwgZ09QRCAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wZCcpXG4gICwgY3JlYXRlUHJvcGVydHkgPSByZXF1aXJlKCcuL19jcmVhdGUtcHJvcGVydHknKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7XG4gIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnM6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob2JqZWN0KXtcbiAgICB2YXIgTyAgICAgICA9IHRvSU9iamVjdChvYmplY3QpXG4gICAgICAsIGdldERlc2MgPSBnT1BELmZcbiAgICAgICwga2V5cyAgICA9IG93bktleXMoTylcbiAgICAgICwgcmVzdWx0ICA9IHt9XG4gICAgICAsIGkgICAgICAgPSAwXG4gICAgICAsIGtleTtcbiAgICB3aGlsZShrZXlzLmxlbmd0aCA+IGkpY3JlYXRlUHJvcGVydHkocmVzdWx0LCBrZXkgPSBrZXlzW2krK10sIGdldERlc2MoTywga2V5KSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qc1xuICoqIG1vZHVsZSBpZCA9IDI5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LXZhbHVlcy1lbnRyaWVzXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgJHZhbHVlcyA9IHJlcXVpcmUoJy4vX29iamVjdC10by1hcnJheScpKGZhbHNlKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7XG4gIHZhbHVlczogZnVuY3Rpb24gdmFsdWVzKGl0KXtcbiAgICByZXR1cm4gJHZhbHVlcyhpdCk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0LnZhbHVlcy5qc1xuICoqIG1vZHVsZSBpZCA9IDMwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGdldEtleXMgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzJylcbiAgLCB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCBpc0VudW0gICAgPSByZXF1aXJlKCcuL19vYmplY3QtcGllJykuZjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXNFbnRyaWVzKXtcbiAgcmV0dXJuIGZ1bmN0aW9uKGl0KXtcbiAgICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KGl0KVxuICAgICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pXG4gICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG4gICAgICAsIGkgICAgICA9IDBcbiAgICAgICwgcmVzdWx0ID0gW11cbiAgICAgICwga2V5O1xuICAgIHdoaWxlKGxlbmd0aCA+IGkpaWYoaXNFbnVtLmNhbGwoTywga2V5ID0ga2V5c1tpKytdKSl7XG4gICAgICByZXN1bHQucHVzaChpc0VudHJpZXMgPyBba2V5LCBPW2tleV1dIDogT1trZXldKTtcbiAgICB9IHJldHVybiByZXN1bHQ7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LXRvLWFycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gMzAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtdmFsdWVzLWVudHJpZXNcbnZhciAkZXhwb3J0ICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgJGVudHJpZXMgPSByZXF1aXJlKCcuL19vYmplY3QtdG8tYXJyYXknKSh0cnVlKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7XG4gIGVudHJpZXM6IGZ1bmN0aW9uIGVudHJpZXMoaXQpe1xuICAgIHJldHVybiAkZW50cmllcyhpdCk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0LmVudHJpZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAzMDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ICAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIHRvT2JqZWN0ICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgYUZ1bmN0aW9uICAgICAgID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpXG4gICwgJGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJyk7XG5cbi8vIEIuMi4yLjIgT2JqZWN0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKFAsIGdldHRlcilcbnJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgJGV4cG9ydCgkZXhwb3J0LlAgKyByZXF1aXJlKCcuL19vYmplY3QtZm9yY2VkLXBhbScpLCAnT2JqZWN0Jywge1xuICBfX2RlZmluZUdldHRlcl9fOiBmdW5jdGlvbiBfX2RlZmluZUdldHRlcl9fKFAsIGdldHRlcil7XG4gICAgJGRlZmluZVByb3BlcnR5LmYodG9PYmplY3QodGhpcyksIFAsIHtnZXQ6IGFGdW5jdGlvbihnZXR0ZXIpLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWV9KTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5vYmplY3QuZGVmaW5lLWdldHRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDMwM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gRm9yY2VkIHJlcGxhY2VtZW50IHByb3RvdHlwZSBhY2Nlc3NvcnMgbWV0aG9kc1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19saWJyYXJ5Jyl8fCAhcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpe1xuICB2YXIgSyA9IE1hdGgucmFuZG9tKCk7XG4gIC8vIEluIEZGIHRocm93cyBvbmx5IGRlZmluZSBtZXRob2RzXG4gIF9fZGVmaW5lU2V0dGVyX18uY2FsbChudWxsLCBLLCBmdW5jdGlvbigpeyAvKiBlbXB0eSAqL30pO1xuICBkZWxldGUgcmVxdWlyZSgnLi9fZ2xvYmFsJylbS107XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX29iamVjdC1mb3JjZWQtcGFtLmpzXG4gKiogbW9kdWxlIGlkID0gMzA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCAgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCB0b09iamVjdCAgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKVxuICAsIGFGdW5jdGlvbiAgICAgICA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKVxuICAsICRkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpO1xuXG4vLyBCLjIuMi4zIE9iamVjdC5wcm90b3R5cGUuX19kZWZpbmVTZXR0ZXJfXyhQLCBzZXR0ZXIpXG5yZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpICYmICRleHBvcnQoJGV4cG9ydC5QICsgcmVxdWlyZSgnLi9fb2JqZWN0LWZvcmNlZC1wYW0nKSwgJ09iamVjdCcsIHtcbiAgX19kZWZpbmVTZXR0ZXJfXzogZnVuY3Rpb24gX19kZWZpbmVTZXR0ZXJfXyhQLCBzZXR0ZXIpe1xuICAgICRkZWZpbmVQcm9wZXJ0eS5mKHRvT2JqZWN0KHRoaXMpLCBQLCB7c2V0OiBhRnVuY3Rpb24oc2V0dGVyKSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlfSk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcub2JqZWN0LmRlZmluZS1zZXR0ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIHRvT2JqZWN0ICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpXG4gICwgdG9QcmltaXRpdmUgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJylcbiAgLCBnZXRQcm90b3R5cGVPZiAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ3BvJylcbiAgLCBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wZCcpLmY7XG5cbi8vIEIuMi4yLjQgT2JqZWN0LnByb3RvdHlwZS5fX2xvb2t1cEdldHRlcl9fKFApXG5yZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpICYmICRleHBvcnQoJGV4cG9ydC5QICsgcmVxdWlyZSgnLi9fb2JqZWN0LWZvcmNlZC1wYW0nKSwgJ09iamVjdCcsIHtcbiAgX19sb29rdXBHZXR0ZXJfXzogZnVuY3Rpb24gX19sb29rdXBHZXR0ZXJfXyhQKXtcbiAgICB2YXIgTyA9IHRvT2JqZWN0KHRoaXMpXG4gICAgICAsIEsgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKVxuICAgICAgLCBEO1xuICAgIGRvIHtcbiAgICAgIGlmKEQgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgSykpcmV0dXJuIEQuZ2V0O1xuICAgIH0gd2hpbGUoTyA9IGdldFByb3RvdHlwZU9mKE8pKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5vYmplY3QubG9va3VwLWdldHRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDMwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyICRleHBvcnQgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgdG9PYmplY3QgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JylcbiAgLCB0b1ByaW1pdGl2ZSAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKVxuICAsIGdldFByb3RvdHlwZU9mICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKVxuICAsIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJykuZjtcblxuLy8gQi4yLjIuNSBPYmplY3QucHJvdG90eXBlLl9fbG9va3VwU2V0dGVyX18oUClcbnJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgJGV4cG9ydCgkZXhwb3J0LlAgKyByZXF1aXJlKCcuL19vYmplY3QtZm9yY2VkLXBhbScpLCAnT2JqZWN0Jywge1xuICBfX2xvb2t1cFNldHRlcl9fOiBmdW5jdGlvbiBfX2xvb2t1cFNldHRlcl9fKFApe1xuICAgIHZhciBPID0gdG9PYmplY3QodGhpcylcbiAgICAgICwgSyA9IHRvUHJpbWl0aXZlKFAsIHRydWUpXG4gICAgICAsIEQ7XG4gICAgZG8ge1xuICAgICAgaWYoRCA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBLKSlyZXR1cm4gRC5zZXQ7XG4gICAgfSB3aGlsZShPID0gZ2V0UHJvdG90eXBlT2YoTykpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5sb29rdXAtc2V0dGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OXG52YXIgJGV4cG9ydCAgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LlIsICdNYXAnLCB7dG9KU09OOiByZXF1aXJlKCcuL19jb2xsZWN0aW9uLXRvLWpzb24nKSgnTWFwJyl9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM3Lm1hcC50by1qc29uLmpzXG4gKiogbW9kdWxlIGlkID0gMzA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OXG52YXIgY2xhc3NvZiA9IHJlcXVpcmUoJy4vX2NsYXNzb2YnKVxuICAsIGZyb20gICAgPSByZXF1aXJlKCcuL19hcnJheS1mcm9tLWl0ZXJhYmxlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE5BTUUpe1xuICByZXR1cm4gZnVuY3Rpb24gdG9KU09OKCl7XG4gICAgaWYoY2xhc3NvZih0aGlzKSAhPSBOQU1FKXRocm93IFR5cGVFcnJvcihOQU1FICsgXCIjdG9KU09OIGlzbid0IGdlbmVyaWNcIik7XG4gICAgcmV0dXJuIGZyb20odGhpcyk7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fY29sbGVjdGlvbi10by1qc29uLmpzXG4gKiogbW9kdWxlIGlkID0gMzA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgZm9yT2YgPSByZXF1aXJlKCcuL19mb3Itb2YnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyLCBJVEVSQVRPUil7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgZm9yT2YoaXRlciwgZmFsc2UsIHJlc3VsdC5wdXNoLCByZXN1bHQsIElURVJBVE9SKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX2FycmF5LWZyb20taXRlcmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EYXZpZEJydWFudC9NYXAtU2V0LnByb3RvdHlwZS50b0pTT05cbnZhciAkZXhwb3J0ICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuUiwgJ1NldCcsIHt0b0pTT046IHJlcXVpcmUoJy4vX2NvbGxlY3Rpb24tdG8tanNvbicpKCdTZXQnKX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcuc2V0LnRvLWpzb24uanNcbiAqKiBtb2R1bGUgaWQgPSAzMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9samhhcmIvcHJvcG9zYWwtZ2xvYmFsXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1N5c3RlbScsIHtnbG9iYWw6IHJlcXVpcmUoJy4vX2dsb2JhbCcpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5zeXN0ZW0uZ2xvYmFsLmpzXG4gKiogbW9kdWxlIGlkID0gMzEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL3Byb3Bvc2FsLWlzLWVycm9yXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgY29mICAgICA9IHJlcXVpcmUoJy4vX2NvZicpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ0Vycm9yJywge1xuICBpc0Vycm9yOiBmdW5jdGlvbiBpc0Vycm9yKGl0KXtcbiAgICByZXR1cm4gY29mKGl0KSA9PT0gJ0Vycm9yJztcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5lcnJvci5pcy1lcnJvci5qc1xuICoqIG1vZHVsZSBpZCA9IDMxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDNcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgaWFkZGg6IGZ1bmN0aW9uIGlhZGRoKHgwLCB4MSwgeTAsIHkxKXtcbiAgICB2YXIgJHgwID0geDAgPj4+IDBcbiAgICAgICwgJHgxID0geDEgPj4+IDBcbiAgICAgICwgJHkwID0geTAgPj4+IDA7XG4gICAgcmV0dXJuICR4MSArICh5MSA+Pj4gMCkgKyAoKCR4MCAmICR5MCB8ICgkeDAgfCAkeTApICYgfigkeDAgKyAkeTAgPj4+IDApKSA+Pj4gMzEpIHwgMDtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5tYXRoLmlhZGRoLmpzXG4gKiogbW9kdWxlIGlkID0gMzE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwM1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywge1xuICBpc3ViaDogZnVuY3Rpb24gaXN1YmgoeDAsIHgxLCB5MCwgeTEpe1xuICAgIHZhciAkeDAgPSB4MCA+Pj4gMFxuICAgICAgLCAkeDEgPSB4MSA+Pj4gMFxuICAgICAgLCAkeTAgPSB5MCA+Pj4gMDtcbiAgICByZXR1cm4gJHgxIC0gKHkxID4+PiAwKSAtICgofiR4MCAmICR5MCB8IH4oJHgwIF4gJHkwKSAmICR4MCAtICR5MCA+Pj4gMCkgPj4+IDMxKSB8IDA7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcubWF0aC5pc3ViaC5qc1xuICoqIG1vZHVsZSBpZCA9IDMxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDNcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgaW11bGg6IGZ1bmN0aW9uIGltdWxoKHUsIHYpe1xuICAgIHZhciBVSU5UMTYgPSAweGZmZmZcbiAgICAgICwgJHUgPSArdVxuICAgICAgLCAkdiA9ICt2XG4gICAgICAsIHUwID0gJHUgJiBVSU5UMTZcbiAgICAgICwgdjAgPSAkdiAmIFVJTlQxNlxuICAgICAgLCB1MSA9ICR1ID4+IDE2XG4gICAgICAsIHYxID0gJHYgPj4gMTZcbiAgICAgICwgdCAgPSAodTEgKiB2MCA+Pj4gMCkgKyAodTAgKiB2MCA+Pj4gMTYpO1xuICAgIHJldHVybiB1MSAqIHYxICsgKHQgPj4gMTYpICsgKCh1MCAqIHYxID4+PiAwKSArICh0ICYgVUlOVDE2KSA+PiAxNik7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcubWF0aC5pbXVsaC5qc1xuICoqIG1vZHVsZSBpZCA9IDMxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDNcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtcbiAgdW11bGg6IGZ1bmN0aW9uIHVtdWxoKHUsIHYpe1xuICAgIHZhciBVSU5UMTYgPSAweGZmZmZcbiAgICAgICwgJHUgPSArdVxuICAgICAgLCAkdiA9ICt2XG4gICAgICAsIHUwID0gJHUgJiBVSU5UMTZcbiAgICAgICwgdjAgPSAkdiAmIFVJTlQxNlxuICAgICAgLCB1MSA9ICR1ID4+PiAxNlxuICAgICAgLCB2MSA9ICR2ID4+PiAxNlxuICAgICAgLCB0ICA9ICh1MSAqIHYwID4+PiAwKSArICh1MCAqIHYwID4+PiAxNik7XG4gICAgcmV0dXJuIHUxICogdjEgKyAodCA+Pj4gMTYpICsgKCh1MCAqIHYxID4+PiAwKSArICh0ICYgVUlOVDE2KSA+Pj4gMTYpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM3Lm1hdGgudW11bGguanNcbiAqKiBtb2R1bGUgaWQgPSAzMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBtZXRhZGF0YSAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YWRhdGEnKVxuICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXlcbiAgLCBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhID0gbWV0YWRhdGEuc2V0O1xuXG5tZXRhZGF0YS5leHAoe2RlZmluZU1ldGFkYXRhOiBmdW5jdGlvbiBkZWZpbmVNZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCB0YXJnZXRLZXkpe1xuICBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCBhbk9iamVjdCh0YXJnZXQpLCB0b01ldGFLZXkodGFyZ2V0S2V5KSk7XG59fSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5yZWZsZWN0LmRlZmluZS1tZXRhZGF0YS5qc1xuICoqIG1vZHVsZSBpZCA9IDMxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIE1hcCAgICAgPSByZXF1aXJlKCcuL2VzNi5tYXAnKVxuICAsICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIHNoYXJlZCAgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgnbWV0YWRhdGEnKVxuICAsIHN0b3JlICAgPSBzaGFyZWQuc3RvcmUgfHwgKHNoYXJlZC5zdG9yZSA9IG5ldyAocmVxdWlyZSgnLi9lczYud2Vhay1tYXAnKSkpO1xuXG52YXIgZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcCA9IGZ1bmN0aW9uKHRhcmdldCwgdGFyZ2V0S2V5LCBjcmVhdGUpe1xuICB2YXIgdGFyZ2V0TWV0YWRhdGEgPSBzdG9yZS5nZXQodGFyZ2V0KTtcbiAgaWYoIXRhcmdldE1ldGFkYXRhKXtcbiAgICBpZighY3JlYXRlKXJldHVybiB1bmRlZmluZWQ7XG4gICAgc3RvcmUuc2V0KHRhcmdldCwgdGFyZ2V0TWV0YWRhdGEgPSBuZXcgTWFwKTtcbiAgfVxuICB2YXIga2V5TWV0YWRhdGEgPSB0YXJnZXRNZXRhZGF0YS5nZXQodGFyZ2V0S2V5KTtcbiAgaWYoIWtleU1ldGFkYXRhKXtcbiAgICBpZighY3JlYXRlKXJldHVybiB1bmRlZmluZWQ7XG4gICAgdGFyZ2V0TWV0YWRhdGEuc2V0KHRhcmdldEtleSwga2V5TWV0YWRhdGEgPSBuZXcgTWFwKTtcbiAgfSByZXR1cm4ga2V5TWV0YWRhdGE7XG59O1xudmFyIG9yZGluYXJ5SGFzT3duTWV0YWRhdGEgPSBmdW5jdGlvbihNZXRhZGF0YUtleSwgTywgUCl7XG4gIHZhciBtZXRhZGF0YU1hcCA9IGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgZmFsc2UpO1xuICByZXR1cm4gbWV0YWRhdGFNYXAgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogbWV0YWRhdGFNYXAuaGFzKE1ldGFkYXRhS2V5KTtcbn07XG52YXIgb3JkaW5hcnlHZXRPd25NZXRhZGF0YSA9IGZ1bmN0aW9uKE1ldGFkYXRhS2V5LCBPLCBQKXtcbiAgdmFyIG1ldGFkYXRhTWFwID0gZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCBmYWxzZSk7XG4gIHJldHVybiBtZXRhZGF0YU1hcCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbWV0YWRhdGFNYXAuZ2V0KE1ldGFkYXRhS2V5KTtcbn07XG52YXIgb3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSA9IGZ1bmN0aW9uKE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlLCBPLCBQKXtcbiAgZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCB0cnVlKS5zZXQoTWV0YWRhdGFLZXksIE1ldGFkYXRhVmFsdWUpO1xufTtcbnZhciBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyA9IGZ1bmN0aW9uKHRhcmdldCwgdGFyZ2V0S2V5KXtcbiAgdmFyIG1ldGFkYXRhTWFwID0gZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0YXJnZXQsIHRhcmdldEtleSwgZmFsc2UpXG4gICAgLCBrZXlzICAgICAgICA9IFtdO1xuICBpZihtZXRhZGF0YU1hcCltZXRhZGF0YU1hcC5mb3JFYWNoKGZ1bmN0aW9uKF8sIGtleSl7IGtleXMucHVzaChrZXkpOyB9KTtcbiAgcmV0dXJuIGtleXM7XG59O1xudmFyIHRvTWV0YUtleSA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIGl0ID09ICdzeW1ib2wnID8gaXQgOiBTdHJpbmcoaXQpO1xufTtcbnZhciBleHAgPSBmdW5jdGlvbihPKXtcbiAgJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0JywgTyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc3RvcmU6IHN0b3JlLFxuICBtYXA6IGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAsXG4gIGhhczogb3JkaW5hcnlIYXNPd25NZXRhZGF0YSxcbiAgZ2V0OiBvcmRpbmFyeUdldE93bk1ldGFkYXRhLFxuICBzZXQ6IG9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEsXG4gIGtleXM6IG9yZGluYXJ5T3duTWV0YWRhdGFLZXlzLFxuICBrZXk6IHRvTWV0YUtleSxcbiAgZXhwOiBleHBcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL19tZXRhZGF0YS5qc1xuICoqIG1vZHVsZSBpZCA9IDMxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIG1ldGFkYXRhICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhZGF0YScpXG4gICwgYW5PYmplY3QgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgdG9NZXRhS2V5ICAgICAgICAgICAgICA9IG1ldGFkYXRhLmtleVxuICAsIGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAgPSBtZXRhZGF0YS5tYXBcbiAgLCBzdG9yZSAgICAgICAgICAgICAgICAgID0gbWV0YWRhdGEuc3RvcmU7XG5cbm1ldGFkYXRhLmV4cCh7ZGVsZXRlTWV0YWRhdGE6IGZ1bmN0aW9uIGRlbGV0ZU1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyosIHRhcmdldEtleSAqLyl7XG4gIHZhciB0YXJnZXRLZXkgICA9IGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSlcbiAgICAsIG1ldGFkYXRhTWFwID0gZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcChhbk9iamVjdCh0YXJnZXQpLCB0YXJnZXRLZXksIGZhbHNlKTtcbiAgaWYobWV0YWRhdGFNYXAgPT09IHVuZGVmaW5lZCB8fCAhbWV0YWRhdGFNYXBbJ2RlbGV0ZSddKG1ldGFkYXRhS2V5KSlyZXR1cm4gZmFsc2U7XG4gIGlmKG1ldGFkYXRhTWFwLnNpemUpcmV0dXJuIHRydWU7XG4gIHZhciB0YXJnZXRNZXRhZGF0YSA9IHN0b3JlLmdldCh0YXJnZXQpO1xuICB0YXJnZXRNZXRhZGF0YVsnZGVsZXRlJ10odGFyZ2V0S2V5KTtcbiAgcmV0dXJuICEhdGFyZ2V0TWV0YWRhdGEuc2l6ZSB8fCBzdG9yZVsnZGVsZXRlJ10odGFyZ2V0KTtcbn19KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnJlZmxlY3QuZGVsZXRlLW1ldGFkYXRhLmpzXG4gKiogbW9kdWxlIGlkID0gMzIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgbWV0YWRhdGEgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGFkYXRhJylcbiAgLCBhbk9iamVjdCAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCBnZXRQcm90b3R5cGVPZiAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpXG4gICwgb3JkaW5hcnlIYXNPd25NZXRhZGF0YSA9IG1ldGFkYXRhLmhhc1xuICAsIG9yZGluYXJ5R2V0T3duTWV0YWRhdGEgPSBtZXRhZGF0YS5nZXRcbiAgLCB0b01ldGFLZXkgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5O1xuXG52YXIgb3JkaW5hcnlHZXRNZXRhZGF0YSA9IGZ1bmN0aW9uKE1ldGFkYXRhS2V5LCBPLCBQKXtcbiAgdmFyIGhhc093biA9IG9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xuICBpZihoYXNPd24pcmV0dXJuIG9yZGluYXJ5R2V0T3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xuICB2YXIgcGFyZW50ID0gZ2V0UHJvdG90eXBlT2YoTyk7XG4gIHJldHVybiBwYXJlbnQgIT09IG51bGwgPyBvcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LCBwYXJlbnQsIFApIDogdW5kZWZpbmVkO1xufTtcblxubWV0YWRhdGEuZXhwKHtnZXRNZXRhZGF0YTogZnVuY3Rpb24gZ2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCAvKiwgdGFyZ2V0S2V5ICovKXtcbiAgcmV0dXJuIG9yZGluYXJ5R2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpO1xufX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtbWV0YWRhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAzMjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBTZXQgICAgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vZXM2LnNldCcpXG4gICwgZnJvbSAgICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19hcnJheS1mcm9tLWl0ZXJhYmxlJylcbiAgLCBtZXRhZGF0YSAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGFkYXRhJylcbiAgLCBhbk9iamVjdCAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgZ2V0UHJvdG90eXBlT2YgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ3BvJylcbiAgLCBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyA9IG1ldGFkYXRhLmtleXNcbiAgLCB0b01ldGFLZXkgICAgICAgICAgICAgICA9IG1ldGFkYXRhLmtleTtcblxudmFyIG9yZGluYXJ5TWV0YWRhdGFLZXlzID0gZnVuY3Rpb24oTywgUCl7XG4gIHZhciBvS2V5cyAgPSBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyhPLCBQKVxuICAgICwgcGFyZW50ID0gZ2V0UHJvdG90eXBlT2YoTyk7XG4gIGlmKHBhcmVudCA9PT0gbnVsbClyZXR1cm4gb0tleXM7XG4gIHZhciBwS2V5cyAgPSBvcmRpbmFyeU1ldGFkYXRhS2V5cyhwYXJlbnQsIFApO1xuICByZXR1cm4gcEtleXMubGVuZ3RoID8gb0tleXMubGVuZ3RoID8gZnJvbShuZXcgU2V0KG9LZXlzLmNvbmNhdChwS2V5cykpKSA6IHBLZXlzIDogb0tleXM7XG59O1xuXG5tZXRhZGF0YS5leHAoe2dldE1ldGFkYXRhS2V5czogZnVuY3Rpb24gZ2V0TWV0YWRhdGFLZXlzKHRhcmdldCAvKiwgdGFyZ2V0S2V5ICovKXtcbiAgcmV0dXJuIG9yZGluYXJ5TWV0YWRhdGFLZXlzKGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1sxXSkpO1xufX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtbWV0YWRhdGEta2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDMyMlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIG1ldGFkYXRhICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhZGF0YScpXG4gICwgYW5PYmplY3QgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpXG4gICwgb3JkaW5hcnlHZXRPd25NZXRhZGF0YSA9IG1ldGFkYXRhLmdldFxuICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXk7XG5cbm1ldGFkYXRhLmV4cCh7Z2V0T3duTWV0YWRhdGE6IGZ1bmN0aW9uIGdldE93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyosIHRhcmdldEtleSAqLyl7XG4gIHJldHVybiBvcmRpbmFyeUdldE93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBhbk9iamVjdCh0YXJnZXQpXG4gICAgLCBhcmd1bWVudHMubGVuZ3RoIDwgMyA/IHVuZGVmaW5lZCA6IHRvTWV0YUtleShhcmd1bWVudHNbMl0pKTtcbn19KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnJlZmxlY3QuZ2V0LW93bi1tZXRhZGF0YS5qc1xuICoqIG1vZHVsZSBpZCA9IDMyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIG1ldGFkYXRhICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YWRhdGEnKVxuICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyA9IG1ldGFkYXRhLmtleXNcbiAgLCB0b01ldGFLZXkgICAgICAgICAgICAgICA9IG1ldGFkYXRhLmtleTtcblxubWV0YWRhdGEuZXhwKHtnZXRPd25NZXRhZGF0YUtleXM6IGZ1bmN0aW9uIGdldE93bk1ldGFkYXRhS2V5cyh0YXJnZXQgLyosIHRhcmdldEtleSAqLyl7XG4gIHJldHVybiBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyhhbk9iamVjdCh0YXJnZXQpLCBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IHVuZGVmaW5lZCA6IHRvTWV0YUtleShhcmd1bWVudHNbMV0pKTtcbn19KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnJlZmxlY3QuZ2V0LW93bi1tZXRhZGF0YS1rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMzI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJ2YXIgbWV0YWRhdGEgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGFkYXRhJylcbiAgLCBhbk9iamVjdCAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCBnZXRQcm90b3R5cGVPZiAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpXG4gICwgb3JkaW5hcnlIYXNPd25NZXRhZGF0YSA9IG1ldGFkYXRhLmhhc1xuICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXk7XG5cbnZhciBvcmRpbmFyeUhhc01ldGFkYXRhID0gZnVuY3Rpb24oTWV0YWRhdGFLZXksIE8sIFApe1xuICB2YXIgaGFzT3duID0gb3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCk7XG4gIGlmKGhhc093bilyZXR1cm4gdHJ1ZTtcbiAgdmFyIHBhcmVudCA9IGdldFByb3RvdHlwZU9mKE8pO1xuICByZXR1cm4gcGFyZW50ICE9PSBudWxsID8gb3JkaW5hcnlIYXNNZXRhZGF0YShNZXRhZGF0YUtleSwgcGFyZW50LCBQKSA6IGZhbHNlO1xufTtcblxubWV0YWRhdGEuZXhwKHtoYXNNZXRhZGF0YTogZnVuY3Rpb24gaGFzTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCAvKiwgdGFyZ2V0S2V5ICovKXtcbiAgcmV0dXJuIG9yZGluYXJ5SGFzTWV0YWRhdGEobWV0YWRhdGFLZXksIGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpO1xufX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9lczcucmVmbGVjdC5oYXMtbWV0YWRhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAzMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBtZXRhZGF0YSAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YWRhdGEnKVxuICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIG9yZGluYXJ5SGFzT3duTWV0YWRhdGEgPSBtZXRhZGF0YS5oYXNcbiAgLCB0b01ldGFLZXkgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5O1xuXG5tZXRhZGF0YS5leHAoe2hhc093bk1ldGFkYXRhOiBmdW5jdGlvbiBoYXNPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0IC8qLCB0YXJnZXRLZXkgKi8pe1xuICByZXR1cm4gb3JkaW5hcnlIYXNPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgYW5PYmplY3QodGFyZ2V0KVxuICAgICwgYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiB0b01ldGFLZXkoYXJndW1lbnRzWzJdKSk7XG59fSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5yZWZsZWN0Lmhhcy1vd24tbWV0YWRhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAzMjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBtZXRhZGF0YSAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YWRhdGEnKVxuICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIGFGdW5jdGlvbiAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJylcbiAgLCB0b01ldGFLZXkgICAgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5XG4gICwgb3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YSA9IG1ldGFkYXRhLnNldDtcblxubWV0YWRhdGEuZXhwKHttZXRhZGF0YTogZnVuY3Rpb24gbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpe1xuICByZXR1cm4gZnVuY3Rpb24gZGVjb3JhdG9yKHRhcmdldCwgdGFyZ2V0S2V5KXtcbiAgICBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKFxuICAgICAgbWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUsXG4gICAgICAodGFyZ2V0S2V5ICE9PSB1bmRlZmluZWQgPyBhbk9iamVjdCA6IGFGdW5jdGlvbikodGFyZ2V0KSxcbiAgICAgIHRvTWV0YUtleSh0YXJnZXRLZXkpXG4gICAgKTtcbiAgfTtcbn19KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvZXM3LnJlZmxlY3QubWV0YWRhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAzMjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yd2FsZHJvbi90YzM5LW5vdGVzL2Jsb2IvbWFzdGVyL2VzNi8yMDE0LTA5L3NlcHQtMjUubWQjNTEwLWdsb2JhbGFzYXAtZm9yLWVucXVldWluZy1hLW1pY3JvdGFza1xudmFyICRleHBvcnQgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgbWljcm90YXNrID0gcmVxdWlyZSgnLi9fbWljcm90YXNrJykoKVxuICAsIHByb2Nlc3MgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLnByb2Nlc3NcbiAgLCBpc05vZGUgICAgPSByZXF1aXJlKCcuL19jb2YnKShwcm9jZXNzKSA9PSAncHJvY2Vzcyc7XG5cbiRleHBvcnQoJGV4cG9ydC5HLCB7XG4gIGFzYXA6IGZ1bmN0aW9uIGFzYXAoZm4pe1xuICAgIHZhciBkb21haW4gPSBpc05vZGUgJiYgcHJvY2Vzcy5kb21haW47XG4gICAgbWljcm90YXNrKGRvbWFpbiA/IGRvbWFpbi5iaW5kKGZuKSA6IGZuKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5hc2FwLmpzXG4gKiogbW9kdWxlIGlkID0gMzI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlXG52YXIgJGV4cG9ydCAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGdsb2JhbCAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBjb3JlICAgICAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKVxuICAsIG1pY3JvdGFzayAgID0gcmVxdWlyZSgnLi9fbWljcm90YXNrJykoKVxuICAsIE9CU0VSVkFCTEUgID0gcmVxdWlyZSgnLi9fd2tzJykoJ29ic2VydmFibGUnKVxuICAsIGFGdW5jdGlvbiAgID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpXG4gICwgYW5PYmplY3QgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKVxuICAsIGFuSW5zdGFuY2UgID0gcmVxdWlyZSgnLi9fYW4taW5zdGFuY2UnKVxuICAsIHJlZGVmaW5lQWxsID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUtYWxsJylcbiAgLCBoaWRlICAgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKVxuICAsIGZvck9mICAgICAgID0gcmVxdWlyZSgnLi9fZm9yLW9mJylcbiAgLCBSRVRVUk4gICAgICA9IGZvck9mLlJFVFVSTjtcblxudmFyIGdldE1ldGhvZCA9IGZ1bmN0aW9uKGZuKXtcbiAgcmV0dXJuIGZuID09IG51bGwgPyB1bmRlZmluZWQgOiBhRnVuY3Rpb24oZm4pO1xufTtcblxudmFyIGNsZWFudXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbihzdWJzY3JpcHRpb24pe1xuICB2YXIgY2xlYW51cCA9IHN1YnNjcmlwdGlvbi5fYztcbiAgaWYoY2xlYW51cCl7XG4gICAgc3Vic2NyaXB0aW9uLl9jID0gdW5kZWZpbmVkO1xuICAgIGNsZWFudXAoKTtcbiAgfVxufTtcblxudmFyIHN1YnNjcmlwdGlvbkNsb3NlZCA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbil7XG4gIHJldHVybiBzdWJzY3JpcHRpb24uX28gPT09IHVuZGVmaW5lZDtcbn07XG5cbnZhciBjbG9zZVN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbil7XG4gIGlmKCFzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uKSl7XG4gICAgc3Vic2NyaXB0aW9uLl9vID0gdW5kZWZpbmVkO1xuICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgfVxufTtcblxudmFyIFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKG9ic2VydmVyLCBzdWJzY3JpYmVyKXtcbiAgYW5PYmplY3Qob2JzZXJ2ZXIpO1xuICB0aGlzLl9jID0gdW5kZWZpbmVkO1xuICB0aGlzLl9vID0gb2JzZXJ2ZXI7XG4gIG9ic2VydmVyID0gbmV3IFN1YnNjcmlwdGlvbk9ic2VydmVyKHRoaXMpO1xuICB0cnkge1xuICAgIHZhciBjbGVhbnVwICAgICAgPSBzdWJzY3JpYmVyKG9ic2VydmVyKVxuICAgICAgLCBzdWJzY3JpcHRpb24gPSBjbGVhbnVwO1xuICAgIGlmKGNsZWFudXAgIT0gbnVsbCl7XG4gICAgICBpZih0eXBlb2YgY2xlYW51cC51bnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJyljbGVhbnVwID0gZnVuY3Rpb24oKXsgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7IH07XG4gICAgICBlbHNlIGFGdW5jdGlvbihjbGVhbnVwKTtcbiAgICAgIHRoaXMuX2MgPSBjbGVhbnVwO1xuICAgIH1cbiAgfSBjYXRjaChlKXtcbiAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICByZXR1cm47XG4gIH0gaWYoc3Vic2NyaXB0aW9uQ2xvc2VkKHRoaXMpKWNsZWFudXBTdWJzY3JpcHRpb24odGhpcyk7XG59O1xuXG5TdWJzY3JpcHRpb24ucHJvdG90eXBlID0gcmVkZWZpbmVBbGwoe30sIHtcbiAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCl7IGNsb3NlU3Vic2NyaXB0aW9uKHRoaXMpOyB9XG59KTtcblxudmFyIFN1YnNjcmlwdGlvbk9ic2VydmVyID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKXtcbiAgdGhpcy5fcyA9IHN1YnNjcmlwdGlvbjtcbn07XG5cblN1YnNjcmlwdGlvbk9ic2VydmVyLnByb3RvdHlwZSA9IHJlZGVmaW5lQWxsKHt9LCB7XG4gIG5leHQ6IGZ1bmN0aW9uIG5leHQodmFsdWUpe1xuICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zO1xuICAgIGlmKCFzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uKSl7XG4gICAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX287XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlci5uZXh0KTtcbiAgICAgICAgaWYobSlyZXR1cm4gbS5jYWxsKG9ic2VydmVyLCB2YWx1ZSk7XG4gICAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKHZhbHVlKXtcbiAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5fcztcbiAgICBpZihzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uKSl0aHJvdyB2YWx1ZTtcbiAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX287XG4gICAgc3Vic2NyaXB0aW9uLl9vID0gdW5kZWZpbmVkO1xuICAgIHRyeSB7XG4gICAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlci5lcnJvcik7XG4gICAgICBpZighbSl0aHJvdyB2YWx1ZTtcbiAgICAgIHZhbHVlID0gbS5jYWxsKG9ic2VydmVyLCB2YWx1ZSk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUodmFsdWUpe1xuICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zO1xuICAgIGlmKCFzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uKSl7XG4gICAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX287XG4gICAgICBzdWJzY3JpcHRpb24uX28gPSB1bmRlZmluZWQ7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlci5jb21wbGV0ZSk7XG4gICAgICAgIHZhbHVlID0gbSA/IG0uY2FsbChvYnNlcnZlciwgdmFsdWUpIDogdW5kZWZpbmVkO1xuICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59KTtcblxudmFyICRPYnNlcnZhYmxlID0gZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmVyKXtcbiAgYW5JbnN0YW5jZSh0aGlzLCAkT2JzZXJ2YWJsZSwgJ09ic2VydmFibGUnLCAnX2YnKS5fZiA9IGFGdW5jdGlvbihzdWJzY3JpYmVyKTtcbn07XG5cbnJlZGVmaW5lQWxsKCRPYnNlcnZhYmxlLnByb3RvdHlwZSwge1xuICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShvYnNlcnZlcil7XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpcHRpb24ob2JzZXJ2ZXIsIHRoaXMuX2YpO1xuICB9LFxuICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGZuKXtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyAoY29yZS5Qcm9taXNlIHx8IGdsb2JhbC5Qcm9taXNlKShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgYUZ1bmN0aW9uKGZuKTtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGF0LnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQgOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBmbih2YWx1ZSk7XG4gICAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgICAgY29tcGxldGU6IHJlc29sdmVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59KTtcblxucmVkZWZpbmVBbGwoJE9ic2VydmFibGUsIHtcbiAgZnJvbTogZnVuY3Rpb24gZnJvbSh4KXtcbiAgICB2YXIgQyA9IHR5cGVvZiB0aGlzID09PSAnZnVuY3Rpb24nID8gdGhpcyA6ICRPYnNlcnZhYmxlO1xuICAgIHZhciBtZXRob2QgPSBnZXRNZXRob2QoYW5PYmplY3QoeClbT0JTRVJWQUJMRV0pO1xuICAgIGlmKG1ldGhvZCl7XG4gICAgICB2YXIgb2JzZXJ2YWJsZSA9IGFuT2JqZWN0KG1ldGhvZC5jYWxsKHgpKTtcbiAgICAgIHJldHVybiBvYnNlcnZhYmxlLmNvbnN0cnVjdG9yID09PSBDID8gb2JzZXJ2YWJsZSA6IG5ldyBDKGZ1bmN0aW9uKG9ic2VydmVyKXtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24ob2JzZXJ2ZXIpe1xuICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICAgIG1pY3JvdGFzayhmdW5jdGlvbigpe1xuICAgICAgICBpZighZG9uZSl7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmKGZvck9mKHgsIGZhbHNlLCBmdW5jdGlvbihpdCl7XG4gICAgICAgICAgICAgIG9ic2VydmVyLm5leHQoaXQpO1xuICAgICAgICAgICAgICBpZihkb25lKXJldHVybiBSRVRVUk47XG4gICAgICAgICAgICB9KSA9PT0gUkVUVVJOKXJldHVybjtcbiAgICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgaWYoZG9uZSl0aHJvdyBlO1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpeyBkb25lID0gdHJ1ZTsgfTtcbiAgICB9KTtcbiAgfSxcbiAgb2Y6IGZ1bmN0aW9uIG9mKCl7XG4gICAgZm9yKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGgsIGl0ZW1zID0gQXJyYXkobCk7IGkgPCBsOylpdGVtc1tpXSA9IGFyZ3VtZW50c1tpKytdO1xuICAgIHJldHVybiBuZXcgKHR5cGVvZiB0aGlzID09PSAnZnVuY3Rpb24nID8gdGhpcyA6ICRPYnNlcnZhYmxlKShmdW5jdGlvbihvYnNlcnZlcil7XG4gICAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKCFkb25lKXtcbiAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChpdGVtc1tpXSk7XG4gICAgICAgICAgICBpZihkb25lKXJldHVybjtcbiAgICAgICAgICB9IG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7IGRvbmUgPSB0cnVlOyB9O1xuICAgIH0pO1xuICB9XG59KTtcblxuaGlkZSgkT2JzZXJ2YWJsZS5wcm90b3R5cGUsIE9CU0VSVkFCTEUsIGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9KTtcblxuJGV4cG9ydCgkZXhwb3J0LkcsIHtPYnNlcnZhYmxlOiAkT2JzZXJ2YWJsZX0pO1xuXG5yZXF1aXJlKCcuL19zZXQtc3BlY2llcycpKCdPYnNlcnZhYmxlJyk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2VzNy5vYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIvLyBpZTktIHNldFRpbWVvdXQgJiBzZXRJbnRlcnZhbCBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgZml4XG52YXIgZ2xvYmFsICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpXG4gICwgJGV4cG9ydCAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgaW52b2tlICAgICA9IHJlcXVpcmUoJy4vX2ludm9rZScpXG4gICwgcGFydGlhbCAgICA9IHJlcXVpcmUoJy4vX3BhcnRpYWwnKVxuICAsIG5hdmlnYXRvciAgPSBnbG9iYWwubmF2aWdhdG9yXG4gICwgTVNJRSAgICAgICA9ICEhbmF2aWdhdG9yICYmIC9NU0lFIC5cXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7IC8vIDwtIGRpcnR5IGllOS0gY2hlY2tcbnZhciB3cmFwID0gZnVuY3Rpb24oc2V0KXtcbiAgcmV0dXJuIE1TSUUgPyBmdW5jdGlvbihmbiwgdGltZSAvKiwgLi4uYXJncyAqLyl7XG4gICAgcmV0dXJuIHNldChpbnZva2UoXG4gICAgICBwYXJ0aWFsLFxuICAgICAgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLFxuICAgICAgdHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKVxuICAgICksIHRpbWUpO1xuICB9IDogc2V0O1xufTtcbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5CICsgJGV4cG9ydC5GICogTVNJRSwge1xuICBzZXRUaW1lb3V0OiAgd3JhcChnbG9iYWwuc2V0VGltZW91dCksXG4gIHNldEludGVydmFsOiB3cmFwKGdsb2JhbC5zZXRJbnRlcnZhbClcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzXG4gKiogbW9kdWxlIGlkID0gMzMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgcGF0aCAgICAgID0gcmVxdWlyZSgnLi9fcGF0aCcpXG4gICwgaW52b2tlICAgID0gcmVxdWlyZSgnLi9faW52b2tlJylcbiAgLCBhRnVuY3Rpb24gPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKC8qIC4uLnBhcmdzICovKXtcbiAgdmFyIGZuICAgICA9IGFGdW5jdGlvbih0aGlzKVxuICAgICwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICwgcGFyZ3MgID0gQXJyYXkobGVuZ3RoKVxuICAgICwgaSAgICAgID0gMFxuICAgICwgXyAgICAgID0gcGF0aC5fXG4gICAgLCBob2xkZXIgPSBmYWxzZTtcbiAgd2hpbGUobGVuZ3RoID4gaSlpZigocGFyZ3NbaV0gPSBhcmd1bWVudHNbaSsrXSkgPT09IF8paG9sZGVyID0gdHJ1ZTtcbiAgcmV0dXJuIGZ1bmN0aW9uKC8qIC4uLmFyZ3MgKi8pe1xuICAgIHZhciB0aGF0ID0gdGhpc1xuICAgICAgLCBhTGVuID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgLCBqID0gMCwgayA9IDAsIGFyZ3M7XG4gICAgaWYoIWhvbGRlciAmJiAhYUxlbilyZXR1cm4gaW52b2tlKGZuLCBwYXJncywgdGhhdCk7XG4gICAgYXJncyA9IHBhcmdzLnNsaWNlKCk7XG4gICAgaWYoaG9sZGVyKWZvcig7bGVuZ3RoID4gajsgaisrKWlmKGFyZ3Nbal0gPT09IF8pYXJnc1tqXSA9IGFyZ3VtZW50c1trKytdO1xuICAgIHdoaWxlKGFMZW4gPiBrKWFyZ3MucHVzaChhcmd1bWVudHNbaysrXSk7XG4gICAgcmV0dXJuIGludm9rZShmbiwgYXJncywgdGhhdCk7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fcGFydGlhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDMzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19nbG9iYWwnKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3BhdGguanNcbiAqKiBtb2R1bGUgaWQgPSAzMzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCAkdGFzayAgID0gcmVxdWlyZSgnLi9fdGFzaycpO1xuJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkIsIHtcbiAgc2V0SW1tZWRpYXRlOiAgICR0YXNrLnNldCxcbiAgY2xlYXJJbW1lZGlhdGU6ICR0YXNrLmNsZWFyXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvd2ViLmltbWVkaWF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRpdGVyYXRvcnMgICAgPSByZXF1aXJlKCcuL2VzNi5hcnJheS5pdGVyYXRvcicpXG4gICwgcmVkZWZpbmUgICAgICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lJylcbiAgLCBnbG9iYWwgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJylcbiAgLCBoaWRlICAgICAgICAgID0gcmVxdWlyZSgnLi9faGlkZScpXG4gICwgSXRlcmF0b3JzICAgICA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpXG4gICwgd2tzICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcycpXG4gICwgSVRFUkFUT1IgICAgICA9IHdrcygnaXRlcmF0b3InKVxuICAsIFRPX1NUUklOR19UQUcgPSB3a3MoJ3RvU3RyaW5nVGFnJylcbiAgLCBBcnJheVZhbHVlcyAgID0gSXRlcmF0b3JzLkFycmF5O1xuXG5mb3IodmFyIGNvbGxlY3Rpb25zID0gWydOb2RlTGlzdCcsICdET01Ub2tlbkxpc3QnLCAnTWVkaWFMaXN0JywgJ1N0eWxlU2hlZXRMaXN0JywgJ0NTU1J1bGVMaXN0J10sIGkgPSAwOyBpIDwgNTsgaSsrKXtcbiAgdmFyIE5BTUUgICAgICAgPSBjb2xsZWN0aW9uc1tpXVxuICAgICwgQ29sbGVjdGlvbiA9IGdsb2JhbFtOQU1FXVxuICAgICwgcHJvdG8gICAgICA9IENvbGxlY3Rpb24gJiYgQ29sbGVjdGlvbi5wcm90b3R5cGVcbiAgICAsIGtleTtcbiAgaWYocHJvdG8pe1xuICAgIGlmKCFwcm90b1tJVEVSQVRPUl0paGlkZShwcm90bywgSVRFUkFUT1IsIEFycmF5VmFsdWVzKTtcbiAgICBpZighcHJvdG9bVE9fU1RSSU5HX1RBR10paGlkZShwcm90bywgVE9fU1RSSU5HX1RBRywgTkFNRSk7XG4gICAgSXRlcmF0b3JzW05BTUVdID0gQXJyYXlWYWx1ZXM7XG4gICAgZm9yKGtleSBpbiAkaXRlcmF0b3JzKWlmKCFwcm90b1trZXldKXJlZGVmaW5lKHByb3RvLCBrZXksICRpdGVyYXRvcnNba2V5XSwgdHJ1ZSk7XG4gIH1cbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGN0eCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fY3R4JylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpXG4gICwgY3JlYXRlRGVzYyAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJylcbiAgLCBhc3NpZ24gICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1hc3NpZ24nKVxuICAsIGNyZWF0ZSAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpXG4gICwgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuL19vYmplY3QtZ3BvJylcbiAgLCBnZXRLZXlzICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzJylcbiAgLCBkUCAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpXG4gICwga2V5T2YgICAgICAgICAgPSByZXF1aXJlKCcuL19rZXlvZicpXG4gICwgYUZ1bmN0aW9uICAgICAgPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJylcbiAgLCBmb3JPZiAgICAgICAgICA9IHJlcXVpcmUoJy4vX2Zvci1vZicpXG4gICwgaXNJdGVyYWJsZSAgICAgPSByZXF1aXJlKCcuL2NvcmUuaXMtaXRlcmFibGUnKVxuICAsICRpdGVyQ3JlYXRlICAgID0gcmVxdWlyZSgnLi9faXRlci1jcmVhdGUnKVxuICAsIHN0ZXAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faXRlci1zdGVwJylcbiAgLCBpc09iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpXG4gICwgdG9JT2JqZWN0ICAgICAgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JylcbiAgLCBERVNDUklQVE9SUyAgICA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJylcbiAgLCBoYXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpO1xuXG4vLyAwIC0+IERpY3QuZm9yRWFjaFxuLy8gMSAtPiBEaWN0Lm1hcFxuLy8gMiAtPiBEaWN0LmZpbHRlclxuLy8gMyAtPiBEaWN0LnNvbWVcbi8vIDQgLT4gRGljdC5ldmVyeVxuLy8gNSAtPiBEaWN0LmZpbmRcbi8vIDYgLT4gRGljdC5maW5kS2V5XG4vLyA3IC0+IERpY3QubWFwUGFpcnNcbnZhciBjcmVhdGVEaWN0TWV0aG9kID0gZnVuY3Rpb24oVFlQRSl7XG4gIHZhciBJU19NQVAgICA9IFRZUEUgPT0gMVxuICAgICwgSVNfRVZFUlkgPSBUWVBFID09IDQ7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGNhbGxiYWNrZm4sIHRoYXQgLyogPSB1bmRlZmluZWQgKi8pe1xuICAgIHZhciBmICAgICAgPSBjdHgoY2FsbGJhY2tmbiwgdGhhdCwgMylcbiAgICAgICwgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdClcbiAgICAgICwgcmVzdWx0ID0gSVNfTUFQIHx8IFRZUEUgPT0gNyB8fCBUWVBFID09IDJcbiAgICAgICAgICA/IG5ldyAodHlwZW9mIHRoaXMgPT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiBEaWN0KSA6IHVuZGVmaW5lZFxuICAgICAgLCBrZXksIHZhbCwgcmVzO1xuICAgIGZvcihrZXkgaW4gTylpZihoYXMoTywga2V5KSl7XG4gICAgICB2YWwgPSBPW2tleV07XG4gICAgICByZXMgPSBmKHZhbCwga2V5LCBvYmplY3QpO1xuICAgICAgaWYoVFlQRSl7XG4gICAgICAgIGlmKElTX01BUClyZXN1bHRba2V5XSA9IHJlczsgICAgICAgICAgICAvLyBtYXBcbiAgICAgICAgZWxzZSBpZihyZXMpc3dpdGNoKFRZUEUpe1xuICAgICAgICAgIGNhc2UgMjogcmVzdWx0W2tleV0gPSB2YWw7IGJyZWFrOyAgICAgLy8gZmlsdGVyXG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgICAgICAvLyBzb21lXG4gICAgICAgICAgY2FzZSA1OiByZXR1cm4gdmFsOyAgICAgICAgICAgICAgICAgICAvLyBmaW5kXG4gICAgICAgICAgY2FzZSA2OiByZXR1cm4ga2V5OyAgICAgICAgICAgICAgICAgICAvLyBmaW5kS2V5XG4gICAgICAgICAgY2FzZSA3OiByZXN1bHRbcmVzWzBdXSA9IHJlc1sxXTsgICAgICAvLyBtYXBQYWlyc1xuICAgICAgICB9IGVsc2UgaWYoSVNfRVZFUlkpcmV0dXJuIGZhbHNlOyAgICAgICAgLy8gZXZlcnlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFRZUEUgPT0gMyB8fCBJU19FVkVSWSA/IElTX0VWRVJZIDogcmVzdWx0O1xuICB9O1xufTtcbnZhciBmaW5kS2V5ID0gY3JlYXRlRGljdE1ldGhvZCg2KTtcblxudmFyIGNyZWF0ZURpY3RJdGVyID0gZnVuY3Rpb24oa2luZCl7XG4gIHJldHVybiBmdW5jdGlvbihpdCl7XG4gICAgcmV0dXJuIG5ldyBEaWN0SXRlcmF0b3IoaXQsIGtpbmQpO1xuICB9O1xufTtcbnZhciBEaWN0SXRlcmF0b3IgPSBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7XG4gIHRoaXMuX3QgPSB0b0lPYmplY3QoaXRlcmF0ZWQpOyAvLyB0YXJnZXRcbiAgdGhpcy5fYSA9IGdldEtleXMoaXRlcmF0ZWQpOyAgIC8vIGtleXNcbiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcbiAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgIC8vIGtpbmRcbn07XG4kaXRlckNyZWF0ZShEaWN0SXRlcmF0b3IsICdEaWN0JywgZnVuY3Rpb24oKXtcbiAgdmFyIHRoYXQgPSB0aGlzXG4gICAgLCBPICAgID0gdGhhdC5fdFxuICAgICwga2V5cyA9IHRoYXQuX2FcbiAgICAsIGtpbmQgPSB0aGF0Ll9rXG4gICAgLCBrZXk7XG4gIGRvIHtcbiAgICBpZih0aGF0Ll9pID49IGtleXMubGVuZ3RoKXtcbiAgICAgIHRoYXQuX3QgPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gc3RlcCgxKTtcbiAgICB9XG4gIH0gd2hpbGUoIWhhcyhPLCBrZXkgPSBrZXlzW3RoYXQuX2krK10pKTtcbiAgaWYoa2luZCA9PSAna2V5cycgIClyZXR1cm4gc3RlcCgwLCBrZXkpO1xuICBpZihraW5kID09ICd2YWx1ZXMnKXJldHVybiBzdGVwKDAsIE9ba2V5XSk7XG4gIHJldHVybiBzdGVwKDAsIFtrZXksIE9ba2V5XV0pO1xufSk7XG5cbmZ1bmN0aW9uIERpY3QoaXRlcmFibGUpe1xuICB2YXIgZGljdCA9IGNyZWF0ZShudWxsKTtcbiAgaWYoaXRlcmFibGUgIT0gdW5kZWZpbmVkKXtcbiAgICBpZihpc0l0ZXJhYmxlKGl0ZXJhYmxlKSl7XG4gICAgICBmb3JPZihpdGVyYWJsZSwgdHJ1ZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgICAgIGRpY3Rba2V5XSA9IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGFzc2lnbihkaWN0LCBpdGVyYWJsZSk7XG4gIH1cbiAgcmV0dXJuIGRpY3Q7XG59XG5EaWN0LnByb3RvdHlwZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHJlZHVjZShvYmplY3QsIG1hcGZuLCBpbml0KXtcbiAgYUZ1bmN0aW9uKG1hcGZuKTtcbiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpXG4gICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pXG4gICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aFxuICAgICwgaSAgICAgID0gMFxuICAgICwgbWVtbywga2V5O1xuICBpZihhcmd1bWVudHMubGVuZ3RoIDwgMyl7XG4gICAgaWYoIWxlbmd0aCl0aHJvdyBUeXBlRXJyb3IoJ1JlZHVjZSBvZiBlbXB0eSBvYmplY3Qgd2l0aCBubyBpbml0aWFsIHZhbHVlJyk7XG4gICAgbWVtbyA9IE9ba2V5c1tpKytdXTtcbiAgfSBlbHNlIG1lbW8gPSBPYmplY3QoaW5pdCk7XG4gIHdoaWxlKGxlbmd0aCA+IGkpaWYoaGFzKE8sIGtleSA9IGtleXNbaSsrXSkpe1xuICAgIG1lbW8gPSBtYXBmbihtZW1vLCBPW2tleV0sIGtleSwgb2JqZWN0KTtcbiAgfVxuICByZXR1cm4gbWVtbztcbn1cblxuZnVuY3Rpb24gaW5jbHVkZXMob2JqZWN0LCBlbCl7XG4gIHJldHVybiAoZWwgPT0gZWwgPyBrZXlPZihvYmplY3QsIGVsKSA6IGZpbmRLZXkob2JqZWN0LCBmdW5jdGlvbihpdCl7XG4gICAgcmV0dXJuIGl0ICE9IGl0O1xuICB9KSkgIT09IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZ2V0KG9iamVjdCwga2V5KXtcbiAgaWYoaGFzKG9iamVjdCwga2V5KSlyZXR1cm4gb2JqZWN0W2tleV07XG59XG5mdW5jdGlvbiBzZXQob2JqZWN0LCBrZXksIHZhbHVlKXtcbiAgaWYoREVTQ1JJUFRPUlMgJiYga2V5IGluIE9iamVjdClkUC5mKG9iamVjdCwga2V5LCBjcmVhdGVEZXNjKDAsIHZhbHVlKSk7XG4gIGVsc2Ugb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gaXNEaWN0KGl0KXtcbiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiBnZXRQcm90b3R5cGVPZihpdCkgPT09IERpY3QucHJvdG90eXBlO1xufVxuXG4kZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuRiwge0RpY3Q6IERpY3R9KTtcblxuJGV4cG9ydCgkZXhwb3J0LlMsICdEaWN0Jywge1xuICBrZXlzOiAgICAgY3JlYXRlRGljdEl0ZXIoJ2tleXMnKSxcbiAgdmFsdWVzOiAgIGNyZWF0ZURpY3RJdGVyKCd2YWx1ZXMnKSxcbiAgZW50cmllczogIGNyZWF0ZURpY3RJdGVyKCdlbnRyaWVzJyksXG4gIGZvckVhY2g6ICBjcmVhdGVEaWN0TWV0aG9kKDApLFxuICBtYXA6ICAgICAgY3JlYXRlRGljdE1ldGhvZCgxKSxcbiAgZmlsdGVyOiAgIGNyZWF0ZURpY3RNZXRob2QoMiksXG4gIHNvbWU6ICAgICBjcmVhdGVEaWN0TWV0aG9kKDMpLFxuICBldmVyeTogICAgY3JlYXRlRGljdE1ldGhvZCg0KSxcbiAgZmluZDogICAgIGNyZWF0ZURpY3RNZXRob2QoNSksXG4gIGZpbmRLZXk6ICBmaW5kS2V5LFxuICBtYXBQYWlyczogY3JlYXRlRGljdE1ldGhvZCg3KSxcbiAgcmVkdWNlOiAgIHJlZHVjZSxcbiAga2V5T2Y6ICAgIGtleU9mLFxuICBpbmNsdWRlczogaW5jbHVkZXMsXG4gIGhhczogICAgICBoYXMsXG4gIGdldDogICAgICBnZXQsXG4gIHNldDogICAgICBzZXQsXG4gIGlzRGljdDogICBpc0RpY3Rcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLmRpY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAzMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBjbGFzc29mICAgPSByZXF1aXJlKCcuL19jbGFzc29mJylcbiAgLCBJVEVSQVRPUiAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKVxuICAsIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19jb3JlJykuaXNJdGVyYWJsZSA9IGZ1bmN0aW9uKGl0KXtcbiAgdmFyIE8gPSBPYmplY3QoaXQpO1xuICByZXR1cm4gT1tJVEVSQVRPUl0gIT09IHVuZGVmaW5lZFxuICAgIHx8ICdAQGl0ZXJhdG9yJyBpbiBPXG4gICAgfHwgSXRlcmF0b3JzLmhhc093blByb3BlcnR5KGNsYXNzb2YoTykpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvY29yZS5pcy1pdGVyYWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JylcbiAgLCBnZXQgICAgICA9IHJlcXVpcmUoJy4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2NvcmUnKS5nZXRJdGVyYXRvciA9IGZ1bmN0aW9uKGl0KXtcbiAgdmFyIGl0ZXJGbiA9IGdldChpdCk7XG4gIGlmKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBpdGVyYWJsZSEnKTtcbiAgcmV0dXJuIGFuT2JqZWN0KGl0ZXJGbi5jYWxsKGl0KSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLmdldC1pdGVyYXRvci5qc1xuICoqIG1vZHVsZSBpZCA9IDMzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIGdsb2JhbCAgPSByZXF1aXJlKCcuL19nbG9iYWwnKVxuICAsIGNvcmUgICAgPSByZXF1aXJlKCcuL19jb3JlJylcbiAgLCAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBwYXJ0aWFsID0gcmVxdWlyZSgnLi9fcGFydGlhbCcpO1xuLy8gaHR0cHM6Ly9lc2Rpc2N1c3Mub3JnL3RvcGljL3Byb21pc2UtcmV0dXJuaW5nLWRlbGF5LWZ1bmN0aW9uXG4kZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuRiwge1xuICBkZWxheTogZnVuY3Rpb24gZGVsYXkodGltZSl7XG4gICAgcmV0dXJuIG5ldyAoY29yZS5Qcm9taXNlIHx8IGdsb2JhbC5Qcm9taXNlKShmdW5jdGlvbihyZXNvbHZlKXtcbiAgICAgIHNldFRpbWVvdXQocGFydGlhbC5jYWxsKHJlc29sdmUsIHRydWUpLCB0aW1lKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2NvcmUuZGVsYXkuanNcbiAqKiBtb2R1bGUgaWQgPSAzMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBwYXRoICAgID0gcmVxdWlyZSgnLi9fcGF0aCcpXG4gICwgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xuXG4vLyBQbGFjZWhvbGRlclxucmVxdWlyZSgnLi9fY29yZScpLl8gPSBwYXRoLl8gPSBwYXRoLl8gfHwge307XG5cbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GLCAnRnVuY3Rpb24nLCB7cGFydDogcmVxdWlyZSgnLi9fcGFydGlhbCcpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2NvcmUuZnVuY3Rpb24ucGFydC5qc1xuICoqIG1vZHVsZSBpZCA9IDMzOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7aXNPYmplY3Q6IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2NvcmUub2JqZWN0LmlzLW9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDM0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7Y2xhc3NvZjogcmVxdWlyZSgnLi9fY2xhc3NvZicpfSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2NvcmUub2JqZWN0LmNsYXNzb2YuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JylcbiAgLCBkZWZpbmUgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRlZmluZScpO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHtkZWZpbmU6IGRlZmluZX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLm9iamVjdC5kZWZpbmUuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsInZhciBkUCAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKVxuICAsIGdPUEQgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJylcbiAgLCBvd25LZXlzICAgPSByZXF1aXJlKCcuL19vd24ta2V5cycpXG4gICwgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZSh0YXJnZXQsIG1peGluKXtcbiAgdmFyIGtleXMgICA9IG93bktleXModG9JT2JqZWN0KG1peGluKSlcbiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG4gICAgLCBpID0gMCwga2V5O1xuICB3aGlsZShsZW5ndGggPiBpKWRQLmYodGFyZ2V0LCBrZXkgPSBrZXlzW2krK10sIGdPUEQuZihtaXhpbiwga2V5KSk7XG4gIHJldHVybiB0YXJnZXQ7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9fb2JqZWN0LWRlZmluZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM0M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsIGRlZmluZSAgPSByZXF1aXJlKCcuL19vYmplY3QtZGVmaW5lJylcbiAgLCBjcmVhdGUgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHtcbiAgbWFrZTogZnVuY3Rpb24ocHJvdG8sIG1peGluKXtcbiAgICByZXR1cm4gZGVmaW5lKGNyZWF0ZShwcm90byksIG1peGluKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9tb2R1bGVzL2NvcmUub2JqZWN0Lm1ha2UuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnJlcXVpcmUoJy4vX2l0ZXItZGVmaW5lJykoTnVtYmVyLCAnTnVtYmVyJywgZnVuY3Rpb24oaXRlcmF0ZWQpe1xuICB0aGlzLl9sID0gK2l0ZXJhdGVkO1xuICB0aGlzLl9pID0gMDtcbn0sIGZ1bmN0aW9uKCl7XG4gIHZhciBpICAgID0gdGhpcy5faSsrXG4gICAgLCBkb25lID0gIShpIDwgdGhpcy5fbCk7XG4gIHJldHVybiB7ZG9uZTogZG9uZSwgdmFsdWU6IGRvbmUgPyB1bmRlZmluZWQgOiBpfTtcbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLm51bWJlci5pdGVyYXRvci5qc1xuICoqIG1vZHVsZSBpZCA9IDM0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbWluZ3IvUmV4RXhwLmVzY2FwZVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKVxuICAsICRyZSAgICAgPSByZXF1aXJlKCcuL19yZXBsYWNlcicpKC9bXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpO1xuXG4kZXhwb3J0KCRleHBvcnQuUywgJ1JlZ0V4cCcsIHtlc2NhcGU6IGZ1bmN0aW9uIGVzY2FwZShpdCl7IHJldHVybiAkcmUoaXQpOyB9fSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvY29yZS5yZWdleHAuZXNjYXBlLmpzXG4gKiogbW9kdWxlIGlkID0gMzQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHJlZ0V4cCwgcmVwbGFjZSl7XG4gIHZhciByZXBsYWNlciA9IHJlcGxhY2UgPT09IE9iamVjdChyZXBsYWNlKSA/IGZ1bmN0aW9uKHBhcnQpe1xuICAgIHJldHVybiByZXBsYWNlW3BhcnRdO1xuICB9IDogcmVwbGFjZTtcbiAgcmV0dXJuIGZ1bmN0aW9uKGl0KXtcbiAgICByZXR1cm4gU3RyaW5nKGl0KS5yZXBsYWNlKHJlZ0V4cCwgcmVwbGFjZXIpO1xuICB9O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvX3JlcGxhY2VyLmpzXG4gKiogbW9kdWxlIGlkID0gMzQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpO1xudmFyICRyZSA9IHJlcXVpcmUoJy4vX3JlcGxhY2VyJykoL1smPD5cIiddL2csIHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyZhcG9zOydcbn0pO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiwgJ1N0cmluZycsIHtlc2NhcGVIVE1MOiBmdW5jdGlvbiBlc2NhcGVIVE1MKCl7IHJldHVybiAkcmUodGhpcyk7IH19KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL21vZHVsZXMvY29yZS5zdHJpbmcuZXNjYXBlLWh0bWwuanNcbiAqKiBtb2R1bGUgaWQgPSAzNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7XG52YXIgJHJlID0gcmVxdWlyZSgnLi9fcmVwbGFjZXInKSgvJig/OmFtcHxsdHxndHxxdW90fGFwb3MpOy9nLCB7XG4gICcmYW1wOyc6ICAnJicsXG4gICcmbHQ7JzogICAnPCcsXG4gICcmZ3Q7JzogICAnPicsXG4gICcmcXVvdDsnOiAnXCInLFxuICAnJmFwb3M7JzogXCInXCJcbn0pO1xuXG4kZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiwgJ1N0cmluZycsIHt1bmVzY2FwZUhUTUw6ICBmdW5jdGlvbiB1bmVzY2FwZUhUTUwoKXsgcmV0dXJuICRyZSh0aGlzKTsgfX0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbW9kdWxlcy9jb3JlLnN0cmluZy51bmVzY2FwZS1odG1sLmpzXG4gKiogbW9kdWxlIGlkID0gMzQ5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuLy8gU3ViamVjdCBpbXBvcnRlZCBiZWZvcmUgT2JzZXJ2YWJsZSB0byBieXBhc3MgY2lyY3VsYXIgZGVwZW5kZW5jeSBpc3N1ZSBzaW5jZVxuLy8gU3ViamVjdCBleHRlbmRzIE9ic2VydmFibGUgYW5kIE9ic2VydmFibGUgcmVmZXJlbmNlcyBTdWJqZWN0IGluIGl0J3Ncbi8vIGRlZmluaXRpb25cbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuL1N1YmplY3QnKTtcbmV4cG9ydHMuU3ViamVjdCA9IFN1YmplY3RfMS5TdWJqZWN0O1xuLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL09ic2VydmFibGUnKTtcbmV4cG9ydHMuT2JzZXJ2YWJsZSA9IE9ic2VydmFibGVfMS5PYnNlcnZhYmxlO1xuLy8gc3RhdGljc1xuLyogdHNsaW50OmRpc2FibGU6bm8tdXNlLWJlZm9yZS1kZWNsYXJlICovXG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2JpbmRDYWxsYmFjaycpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9iaW5kTm9kZUNhbGxiYWNrJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2NvbWJpbmVMYXRlc3QnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvY29uY2F0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2RlZmVyJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2VtcHR5Jyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2ZvcmtKb2luJyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2Zyb20nKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvZnJvbUV2ZW50Jyk7XG5yZXF1aXJlKCcuL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4nKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvZnJvbVByb21pc2UnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvaW50ZXJ2YWwnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvbWVyZ2UnKTtcbnJlcXVpcmUoJy4vYWRkL29ic2VydmFibGUvcmFjZScpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9uZXZlcicpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9vZicpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS9yYW5nZScpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS90aHJvdycpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS90aW1lcicpO1xucmVxdWlyZSgnLi9hZGQvb2JzZXJ2YWJsZS96aXAnKTtcbi8vb3BlcmF0b3JzXG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9idWZmZXInKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2J1ZmZlckNvdW50Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9idWZmZXJUaW1lJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9idWZmZXJUb2dnbGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2J1ZmZlcldoZW4nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NhY2hlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9jYXRjaCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29tYmluZUFsbCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29tYmluZUxhdGVzdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29uY2F0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9jb25jYXRBbGwnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NvbmNhdE1hcCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvY29uY2F0TWFwVG8nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2NvdW50Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9kZW1hdGVyaWFsaXplJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9kZWJvdW5jZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGVib3VuY2VUaW1lJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGVsYXknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2RlbGF5V2hlbicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZGlzdGluY3RVbnRpbENoYW5nZWQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2RvJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9leHBhbmQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2ZpbHRlcicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZmluYWxseScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvZmlyc3QnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2dyb3VwQnknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9hdWRpdCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvYXVkaXRUaW1lJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9sYXN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9sZXQnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL2V2ZXJ5Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9tYXAnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL21hcFRvJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9tYXRlcmlhbGl6ZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbWVyZ2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL21lcmdlQWxsJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9tZXJnZU1hcCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbWVyZ2VNYXBUbycpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvbXVsdGljYXN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9vYnNlcnZlT24nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3BhcnRpdGlvbicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcGx1Y2snKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3B1Ymxpc2gnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvcicpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcHVibGlzaFJlcGxheScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcHVibGlzaExhc3QnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3JhY2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3JlZHVjZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcmVwZWF0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9yZXRyeScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvcmV0cnlXaGVuJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zYW1wbGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NhbXBsZVRpbWUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NjYW4nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NoYXJlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zaW5nbGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NraXAnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3NraXBVbnRpbCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivc2tpcFdoaWxlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zdGFydFdpdGgnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3N1YnNjcmliZU9uJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci9zd2l0Y2gnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3N3aXRjaE1hcCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwVG8nKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rha2UnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rha2VMYXN0Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci90YWtlVW50aWwnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rha2VXaGlsZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvdGhyb3R0bGUnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3Rocm90dGxlVGltZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvdGltZW91dCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvdGltZW91dFdpdGgnKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3RvQXJyYXknKTtcbnJlcXVpcmUoJy4vYWRkL29wZXJhdG9yL3RvUHJvbWlzZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2luZG93Jyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci93aW5kb3dDb3VudCcpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2luZG93VGltZScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3Ivd2luZG93VG9nZ2xlJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci93aXRoTGF0ZXN0RnJvbScpO1xucmVxdWlyZSgnLi9hZGQvb3BlcmF0b3IvemlwJyk7XG5yZXF1aXJlKCcuL2FkZC9vcGVyYXRvci96aXBBbGwnKTtcbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xudmFyIE9wZXJhdG9yXzEgPSByZXF1aXJlKCcuL09wZXJhdG9yJyk7XG5leHBvcnRzLk9wZXJhdG9yID0gT3BlcmF0b3JfMS5PcGVyYXRvcjtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4vU3Vic2NyaXB0aW9uJyk7XG5leHBvcnRzLlN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbjtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbmV4cG9ydHMuU3Vic2NyaWJlciA9IFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyO1xudmFyIEFzeW5jU3ViamVjdF8xID0gcmVxdWlyZSgnLi9Bc3luY1N1YmplY3QnKTtcbmV4cG9ydHMuQXN5bmNTdWJqZWN0ID0gQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0O1xudmFyIFJlcGxheVN1YmplY3RfMSA9IHJlcXVpcmUoJy4vUmVwbGF5U3ViamVjdCcpO1xuZXhwb3J0cy5SZXBsYXlTdWJqZWN0ID0gUmVwbGF5U3ViamVjdF8xLlJlcGxheVN1YmplY3Q7XG52YXIgQmVoYXZpb3JTdWJqZWN0XzEgPSByZXF1aXJlKCcuL0JlaGF2aW9yU3ViamVjdCcpO1xuZXhwb3J0cy5CZWhhdmlvclN1YmplY3QgPSBCZWhhdmlvclN1YmplY3RfMS5CZWhhdmlvclN1YmplY3Q7XG52YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL29ic2VydmFibGUvQ29ubmVjdGFibGVPYnNlcnZhYmxlJyk7XG5leHBvcnRzLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IENvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcbnZhciBOb3RpZmljYXRpb25fMSA9IHJlcXVpcmUoJy4vTm90aWZpY2F0aW9uJyk7XG5leHBvcnRzLk5vdGlmaWNhdGlvbiA9IE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbjtcbnZhciBFbXB0eUVycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvRW1wdHlFcnJvcicpO1xuZXhwb3J0cy5FbXB0eUVycm9yID0gRW1wdHlFcnJvcl8xLkVtcHR5RXJyb3I7XG52YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IHJlcXVpcmUoJy4vdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcicpO1xuZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG52YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfMSA9IHJlcXVpcmUoJy4vdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvcicpO1xuZXhwb3J0cy5PYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yXzEuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3I7XG52YXIgVW5zdWJzY3JpcHRpb25FcnJvcl8xID0gcmVxdWlyZSgnLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3InKTtcbmV4cG9ydHMuVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JfMS5VbnN1YnNjcmlwdGlvbkVycm9yO1xudmFyIGFzYXBfMSA9IHJlcXVpcmUoJy4vc2NoZWR1bGVyL2FzYXAnKTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi9zY2hlZHVsZXIvYXN5bmMnKTtcbnZhciBxdWV1ZV8xID0gcmVxdWlyZSgnLi9zY2hlZHVsZXIvcXVldWUnKTtcbnZhciByeFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4vc3ltYm9sL3J4U3Vic2NyaWJlcicpO1xudmFyIG9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vc3ltYm9sL29ic2VydmFibGUnKTtcbnZhciBpdGVyYXRvcl8xID0gcmVxdWlyZSgnLi9zeW1ib2wvaXRlcmF0b3InKTtcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFJ4LlNjaGVkdWxlclxuICogQHByb3BlcnR5IHtTY2hlZHVsZXJ9IHF1ZXVlIFNjaGVkdWxlcyBvbiBhIHF1ZXVlIGluIHRoZSBjdXJyZW50IGV2ZW50IGZyYW1lXG4gKiAodHJhbXBvbGluZSBzY2hlZHVsZXIpLiBVc2UgdGhpcyBmb3IgaXRlcmF0aW9uIG9wZXJhdGlvbnMuXG4gKiBAcHJvcGVydHkge1NjaGVkdWxlcn0gYXNhcCBTY2hlZHVsZXMgb24gdGhlIG1pY3JvIHRhc2sgcXVldWUsIHdoaWNoIHVzZXMgdGhlXG4gKiBmYXN0ZXN0IHRyYW5zcG9ydCBtZWNoYW5pc20gYXZhaWxhYmxlLCBlaXRoZXIgTm9kZS5qcycgYHByb2Nlc3MubmV4dFRpY2soKWBcbiAqIG9yIFdlYiBXb3JrZXIgTWVzc2FnZUNoYW5uZWwgb3Igc2V0VGltZW91dCBvciBvdGhlcnMuIFVzZSB0aGlzIGZvclxuICogYXN5bmNocm9ub3VzIGNvbnZlcnNpb25zLlxuICogQHByb3BlcnR5IHtTY2hlZHVsZXJ9IGFzeW5jIFNjaGVkdWxlcyB3b3JrIHdpdGggYHNldEludGVydmFsYC4gVXNlIHRoaXMgZm9yXG4gKiB0aW1lLWJhc2VkIG9wZXJhdGlvbnMuXG4gKi9cbnZhciBTY2hlZHVsZXIgPSB7XG4gICAgYXNhcDogYXNhcF8xLmFzYXAsXG4gICAgYXN5bmM6IGFzeW5jXzEuYXN5bmMsXG4gICAgcXVldWU6IHF1ZXVlXzEucXVldWVcbn07XG5leHBvcnRzLlNjaGVkdWxlciA9IFNjaGVkdWxlcjtcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUnguU3ltYm9sXG4gKiBAcHJvcGVydHkge1N5bWJvbHxzdHJpbmd9IHJ4U3Vic2NyaWJlciBBIHN5bWJvbCB0byB1c2UgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvXG4gKiByZXRyaWV2ZSBhbiBcIlJ4IHNhZmVcIiBPYnNlcnZlciBmcm9tIGFuIG9iamVjdC4gXCJSeCBzYWZldHlcIiBjYW4gYmUgZGVmaW5lZCBhc1xuICogYW4gb2JqZWN0IHRoYXQgaGFzIGFsbCBvZiB0aGUgdHJhaXRzIG9mIGFuIFJ4IFN1YnNjcmliZXIsIGluY2x1ZGluZyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc3Vic2NyaXB0aW9uIGNoYWluIGFuZFxuICogZ3VhcmFudGVlcyBpbnZvbHZpbmcgZXZlbnQgdHJpZ2dlcmluZyAoY2FuJ3QgXCJuZXh0XCIgYWZ0ZXIgdW5zdWJzY3JpcHRpb24sXG4gKiBldGMpLlxuICogQHByb3BlcnR5IHtTeW1ib2x8c3RyaW5nfSBvYnNlcnZhYmxlIEEgc3ltYm9sIHRvIHVzZSBhcyBhIHByb3BlcnR5IG5hbWUgdG9cbiAqIHJldHJpZXZlIGFuIE9ic2VydmFibGUgYXMgZGVmaW5lZCBieSB0aGUgW0VDTUFTY3JpcHQgXCJPYnNlcnZhYmxlXCIgc3BlY10oaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZSkuXG4gKiBAcHJvcGVydHkge1N5bWJvbHxzdHJpbmd9IGl0ZXJhdG9yIFRoZSBFUzYgc3ltYm9sIHRvIHVzZSBhcyBhIHByb3BlcnR5IG5hbWVcbiAqIHRvIHJldHJpZXZlIGFuIGl0ZXJhdG9yIGZyb20gYW4gb2JqZWN0LlxuICovXG52YXIgU3ltYm9sID0ge1xuICAgIHJ4U3Vic2NyaWJlcjogcnhTdWJzY3JpYmVyXzEuJCRyeFN1YnNjcmliZXIsXG4gICAgb2JzZXJ2YWJsZTogb2JzZXJ2YWJsZV8xLiQkb2JzZXJ2YWJsZSxcbiAgICBpdGVyYXRvcjogaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXG59O1xuZXhwb3J0cy5TeW1ib2wgPSBTeW1ib2w7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SeC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL1J4LmpzXG4gKiogbW9kdWxlIGlkID0gMzUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgYmluZENhbGxiYWNrXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2JpbmRDYWxsYmFjaycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuYmluZENhbGxiYWNrID0gYmluZENhbGxiYWNrXzEuYmluZENhbGxiYWNrO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZENhbGxiYWNrLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvYmluZENhbGxiYWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMzUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5iaW5kQ2FsbGJhY2sgPSBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZV8xLkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmRDYWxsYmFjay5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvYmluZENhbGxiYWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMzUyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgQXN5bmNTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9Bc3luY1N1YmplY3QnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgQm91bmRDYWxsYmFja09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZShjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jO1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja0Z1bmMgRnVuY3Rpb24gd2l0aCBhIGNhbGxiYWNrIGFzIHRoZSBsYXN0XG4gICAgICogcGFyYW1ldGVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZVxuICAgICAqIGNhbGxiYWNrIHRvIHByb2R1Y2UgYSBzaW5nbGUgaXRlbSB0byB5aWVsZCBvbiBuZXh0LlxuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBUaGUgc2NoZWR1bGVyIG9uIHdoaWNoIHRvIHNjaGVkdWxlXG4gICAgICogdGhlIGNhbGxiYWNrcy5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbiguLi5wYXJhbXM6ICopOiBPYnNlcnZhYmxlPFQ+fSBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlXG4gICAgICogT2JzZXJ2YWJsZSB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBiaW5kQ2FsbGJhY2tcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHNlbGVjdG9yID09PSB2b2lkIDApIHsgc2VsZWN0b3IgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlKGNhbGxiYWNrRnVuYywgc2VsZWN0b3IsIGFyZ3MsIHNjaGVkdWxlcik7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBCb3VuZENhbGxiYWNrT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBjYWxsYmFja0Z1bmMgPSB0aGlzLmNhbGxiYWNrRnVuYztcbiAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmFyZ3M7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG4gICAgICAgIGlmICghc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICBpZiAoIXN1YmplY3QpIHtcbiAgICAgICAgICAgICAgICBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlckZuKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5uZXJBcmdzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGhhbmRsZXJGbi5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHNvdXJjZS5zZWxlY3Rvciwgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHRoaXMsIGlubmVyQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzEgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQocmVzdWx0XzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChpbm5lckFyZ3MubGVuZ3RoID09PSAxID8gaW5uZXJBcmdzWzBdIDogaW5uZXJBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gdXNlIG5hbWVkIGZ1bmN0aW9uIGluc3RhbmNlIHRvIGF2b2lkIGNsb3N1cmUuXG4gICAgICAgICAgICAgICAgaGFuZGxlci5zb3VyY2UgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNhbGxiYWNrRnVuYykuYXBwbHkodGhpcywgYXJncy5jb25jYXQoaGFuZGxlcikpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2gsIDAsIHsgc291cmNlOiB0aGlzLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQm91bmRDYWxsYmFja09ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlID0gQm91bmRDYWxsYmFja09ic2VydmFibGU7XG5mdW5jdGlvbiBkaXNwYXRjaChzdGF0ZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc291cmNlID0gc3RhdGUuc291cmNlLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICB2YXIgY2FsbGJhY2tGdW5jID0gc291cmNlLmNhbGxiYWNrRnVuYywgYXJncyA9IHNvdXJjZS5hcmdzLCBzY2hlZHVsZXIgPSBzb3VyY2Uuc2NoZWR1bGVyO1xuICAgIHZhciBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG4gICAgaWYgKCFzdWJqZWN0KSB7XG4gICAgICAgIHN1YmplY3QgPSBzb3VyY2Uuc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3RfMS5Bc3luY1N1YmplY3QoKTtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG4gICAgICAgICAgICB2YXIgaW5uZXJBcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBoYW5kbGVyRm4uc291cmNlO1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRfMiA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hFcnJvciwgMCwgeyBlcnI6IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSwgc3ViamVjdDogc3ViamVjdCB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCAwLCB7IHZhbHVlOiByZXN1bHRfMiwgc3ViamVjdDogc3ViamVjdCB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaW5uZXJBcmdzLmxlbmd0aCA9PT0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJncztcbiAgICAgICAgICAgICAgICBzZWxmLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCAwLCB7IHZhbHVlOiB2YWx1ZSwgc3ViamVjdDogc3ViamVjdCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiB0byBwYXNzIHZhbHVlcyBpbiB3aXRob3V0IGNsb3N1cmVcbiAgICAgICAgaGFuZGxlci5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNhbGxiYWNrRnVuYykuYXBwbHkodGhpcywgYXJncy5jb25jYXQoaGFuZGxlcikpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZi5hZGQoc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcikpO1xufVxuZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KGFyZykge1xuICAgIHZhciB2YWx1ZSA9IGFyZy52YWx1ZSwgc3ViamVjdCA9IGFyZy5zdWJqZWN0O1xuICAgIHN1YmplY3QubmV4dCh2YWx1ZSk7XG4gICAgc3ViamVjdC5jb21wbGV0ZSgpO1xufVxuZnVuY3Rpb24gZGlzcGF0Y2hFcnJvcihhcmcpIHtcbiAgICB2YXIgZXJyID0gYXJnLmVyciwgc3ViamVjdCA9IGFyZy5zdWJqZWN0O1xuICAgIHN1YmplY3QuZXJyb3IoZXJyKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM1M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuL1N1YmplY3QnKTtcbi8qKlxuICogQGNsYXNzIEFzeW5jU3ViamVjdDxUPlxuICovXG52YXIgQXN5bmNTdWJqZWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXN5bmNTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzeW5jU3ViamVjdCgpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLmhhc05leHQgPSBmYWxzZTtcbiAgICB9XG4gICAgQXN5bmNTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ29tcGxldGVkICYmIHRoaXMuaGFzTmV4dCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmhhc05leHQgPSB0cnVlO1xuICAgIH07XG4gICAgQXN5bmNTdWJqZWN0LnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICAvLyBvcHRpbWl6YXRpb24gdG8gYmxvY2sgb3VyIFN1YmplY3RTdWJzY3JpcHRpb25zIGZyb21cbiAgICAgICAgLy8gc3BsaWNpbmcgdGhlbXNlbHZlcyBvdXQgb2YgdGhlIG9ic2VydmVycyBsaXN0IG9uZSBieSBvbmUuXG4gICAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5oYXNOZXh0KSB7XG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuICAgICAgICAgICAgICAgIHZhciBvID0gb2JzZXJ2ZXJzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBvLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgby5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlcnNbaW5kZXhdLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNTdWJqZWN0O1xufShTdWJqZWN0XzEuU3ViamVjdCkpO1xuZXhwb3J0cy5Bc3luY1N1YmplY3QgPSBBc3luY1N1YmplY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc3luY1N1YmplY3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9Bc3luY1N1YmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAzNTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBiaW5kTm9kZUNhbGxiYWNrXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2snKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmJpbmROb2RlQ2FsbGJhY2sgPSBiaW5kTm9kZUNhbGxiYWNrXzEuYmluZE5vZGVDYWxsYmFjaztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmROb2RlQ2FsbGJhY2suanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9iaW5kTm9kZUNhbGxiYWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMzU1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlJyk7XG5leHBvcnRzLmJpbmROb2RlQ2FsbGJhY2sgPSBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGVfMS5Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZE5vZGVDYWxsYmFjay5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFjay5qc1xuICoqIG1vZHVsZSBpZCA9IDM1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJ5Q2F0Y2gnKTtcbnZhciBlcnJvck9iamVjdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9lcnJvck9iamVjdCcpO1xudmFyIEFzeW5jU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vQXN5bmNTdWJqZWN0Jyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUoY2FsbGJhY2tGdW5jLCBzZWxlY3RvciwgYXJncywgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrRnVuYyA9IGNhbGxiYWNrRnVuYztcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIG5vZGUgY2FsbGJhY2sgdG8gYW4gT2JzZXJ2YWJsZS5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tGdW5jXG4gICAgICogQHBhcmFtIHNlbGVjdG9yXG4gICAgICogQHBhcmFtIHNjaGVkdWxlclxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKC4uLnBhcmFtczogKik6IE9ic2VydmFibGU8VD59XG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgYmluZE5vZGVDYWxsYmFja1xuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHNlbGVjdG9yID09PSB2b2lkIDApIHsgc2VsZWN0b3IgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZShjYWxsYmFja0Z1bmMsIHNlbGVjdG9yLCBhcmdzLCBzY2hlZHVsZXIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrRnVuYyA9IHRoaXMuY2FsbGJhY2tGdW5jO1xuICAgICAgICB2YXIgYXJncyA9IHRoaXMuYXJncztcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuc3ViamVjdDtcbiAgICAgICAgaWYgKCFzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIGlmICghc3ViamVjdCkge1xuICAgICAgICAgICAgICAgIHN1YmplY3QgPSB0aGlzLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyRm4oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gc291cmNlLnNlbGVjdG9yLCBzdWJqZWN0ID0gc291cmNlLnN1YmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBpbm5lckFyZ3Muc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseSh0aGlzLCBpbm5lckFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdF8xID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5uZXh0KHJlc3VsdF8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0Lm5leHQoaW5uZXJBcmdzLmxlbmd0aCA9PT0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIHVzZSBuYW1lZCBmdW5jdGlvbiBpbnN0YW5jZSB0byBhdm9pZCBjbG9zdXJlLlxuICAgICAgICAgICAgICAgIGhhbmRsZXIuc291cmNlID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjYWxsYmFja0Z1bmMpLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KGhhbmRsZXIpKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoLCAwLCB7IHNvdXJjZTogdGhpcywgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlID0gQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlO1xuZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZSwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgdmFyIGNhbGxiYWNrRnVuYyA9IHNvdXJjZS5jYWxsYmFja0Z1bmMsIGFyZ3MgPSBzb3VyY2UuYXJncywgc2NoZWR1bGVyID0gc291cmNlLnNjaGVkdWxlcjtcbiAgICB2YXIgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuICAgIGlmICghc3ViamVjdCkge1xuICAgICAgICBzdWJqZWN0ID0gc291cmNlLnN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0XzEuQXN5bmNTdWJqZWN0KCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlckZuKCkge1xuICAgICAgICAgICAgdmFyIGlubmVyQXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBpbm5lckFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc291cmNlID0gaGFuZGxlckZuLnNvdXJjZTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHNvdXJjZS5zZWxlY3Rvciwgc3ViamVjdCA9IHNvdXJjZS5zdWJqZWN0O1xuICAgICAgICAgICAgdmFyIGVyciA9IGlubmVyQXJncy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8yID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzZWxlY3RvcikuYXBwbHkodGhpcywgaW5uZXJBcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzIgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogcmVzdWx0XzIsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlubmVyQXJncy5sZW5ndGggPT09IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3M7XG4gICAgICAgICAgICAgICAgc2VsZi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogdmFsdWUsIHN1YmplY3Q6IHN1YmplY3QgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyB1c2UgbmFtZWQgZnVuY3Rpb24gdG8gcGFzcyB2YWx1ZXMgaW4gd2l0aG91dCBjbG9zdXJlXG4gICAgICAgIGhhbmRsZXIuc291cmNlID0gc291cmNlO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChjYWxsYmFja0Z1bmMpLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KGhhbmRsZXIpKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGYuYWRkKHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoTmV4dChhcmcpIHtcbiAgICB2YXIgdmFsdWUgPSBhcmcudmFsdWUsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcbiAgICBzdWJqZWN0Lm5leHQodmFsdWUpO1xuICAgIHN1YmplY3QuY29tcGxldGUoKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoRXJyb3IoYXJnKSB7XG4gICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YmplY3QgPSBhcmcuc3ViamVjdDtcbiAgICBzdWJqZWN0LmVycm9yKGVycik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0JvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM1N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvbWJpbmVMYXRlc3RfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvbWJpbmVMYXRlc3QnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QgPSBjb21iaW5lTGF0ZXN0XzEuY29tYmluZUxhdGVzdFN0YXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVMYXRlc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0LmpzXG4gKiogbW9kdWxlIGlkID0gMzU4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUnKTtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzQXJyYXknKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQ29tYmluZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGUgd2hvc2UgdmFsdWVzIGFyZVxuICogY2FsY3VsYXRlZCBmcm9tIHRoZSBsYXRlc3QgdmFsdWVzIG9mIGVhY2ggb2YgaXRzIGlucHV0IE9ic2VydmFibGVzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XaGVuZXZlciBhbnkgaW5wdXQgT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLCBpdFxuICogY29tcHV0ZXMgYSBmb3JtdWxhIHVzaW5nIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gYWxsIHRoZSBpbnB1dHMsIHRoZW4gZW1pdHNcbiAqIHRoZSBvdXRwdXQgb2YgdGhhdCBmb3JtdWxhLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVMYXRlc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYGNvbWJpbmVMYXRlc3RgIGNvbWJpbmVzIHRoZSB2YWx1ZXMgZnJvbSB0aGlzIE9ic2VydmFibGUgd2l0aCB2YWx1ZXMgZnJvbVxuICogT2JzZXJ2YWJsZXMgcGFzc2VkIGFzIGFyZ3VtZW50cy4gVGhpcyBpcyBkb25lIGJ5IHN1YnNjcmliaW5nIHRvIGVhY2hcbiAqIE9ic2VydmFibGUsIGluIG9yZGVyLCBhbmQgY29sbGVjdGluZyBhbiBhcnJheSBvZiBlYWNoIG9mIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGFueSB0aW1lIGFueSBvZiB0aGUgaW5wdXQgT2JzZXJ2YWJsZXMgZW1pdHMsIHRoZW4gZWl0aGVyIHRha2luZyB0aGF0XG4gKiBhcnJheSBhbmQgcGFzc2luZyBpdCBhcyBhcmd1bWVudHMgdG8gYW4gb3B0aW9uYWwgYHByb2plY3RgIGZ1bmN0aW9uIGFuZFxuICogZW1pdHRpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGF0LCBvciBqdXN0IGVtaXR0aW5nIHRoZSBhcnJheSBvZiByZWNlbnRcbiAqIHZhbHVlcyBkaXJlY3RseSBpZiB0aGVyZSBpcyBubyBgcHJvamVjdGAgZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RHluYW1pY2FsbHkgY2FsY3VsYXRlIHRoZSBCb2R5LU1hc3MgSW5kZXggZnJvbSBhbiBPYnNlcnZhYmxlIG9mIHdlaWdodCBhbmQgb25lIGZvciBoZWlnaHQ8L2NhcHRpb24+XG4gKiB2YXIgd2VpZ2h0ID0gUnguT2JzZXJ2YWJsZS5vZig3MCwgNzIsIDc2LCA3OSwgNzUpO1xuICogdmFyIGhlaWdodCA9IFJ4Lk9ic2VydmFibGUub2YoMS43NiwgMS43NywgMS43OCk7XG4gKiB2YXIgYm1pID0gd2VpZ2h0LmNvbWJpbmVMYXRlc3QoaGVpZ2h0LCAodywgaCkgPT4gdyAvIChoICogaCkpO1xuICogYm1pLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKCdCTUkgaXMgJyArIHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuICogQHNlZSB7QGxpbmsgbWVyZ2V9XG4gKiBAc2VlIHtAbGluayB3aXRoTGF0ZXN0RnJvbX1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW3Byb2plY3RdIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIHByb2plY3QgdGhlIHZhbHVlcyBmcm9tXG4gKiB0aGUgY29tYmluZWQgbGF0ZXN0IHZhbHVlcyBpbnRvIGEgbmV3IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGZyb20gZWFjaCBpbnB1dCBPYnNlcnZhYmxlLCBvciBhbiBhcnJheSBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWVzIGZyb21cbiAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2QgY29tYmluZUxhdGVzdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY29tYmluZUxhdGVzdCgpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHByb2plY3QgPSBudWxsO1xuICAgIGlmICh0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvamVjdCA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgZmlyc3QgYW5kIG9ubHkgb3RoZXIgYXJndW1lbnQgYmVzaWRlcyB0aGUgcmVzdWx0U2VsZWN0b3IgaXMgYW4gYXJyYXlcbiAgICAvLyBhc3N1bWUgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGBjb21iaW5lTGF0ZXN0KFtvYnMxLCBvYnMyLCBvYnMzXSwgcHJvamVjdClgXG4gICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcbiAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcbiAgICB9XG4gICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcbiAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcbn1cbmV4cG9ydHMuY29tYmluZUxhdGVzdCA9IGNvbWJpbmVMYXRlc3Q7XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBDb21iaW5lcyB0aGUgdmFsdWVzIGZyb20gb2JzZXJ2YWJsZXMgcGFzc2VkIGFzIGFyZ3VtZW50cy4gVGhpcyBpcyBkb25lIGJ5IHN1YnNjcmliaW5nXG4gKiB0byBlYWNoIG9ic2VydmFibGUsIGluIG9yZGVyLCBhbmQgY29sbGVjdGluZyBhbiBhcnJheSBvZiBlYWNoIG9mIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgYW55IHRpbWUgYW55IG9mIHRoZSBvYnNlcnZhYmxlc1xuICogZW1pdHMsIHRoZW4gZWl0aGVyIHRha2luZyB0aGF0IGFycmF5IGFuZCBwYXNzaW5nIGl0IGFzIGFyZ3VtZW50cyB0byBhbiBvcHRpb24gYHByb2plY3RgIGZ1bmN0aW9uIGFuZCBlbWl0dGluZyB0aGUgcmV0dXJuXG4gKiB2YWx1ZSBvZiB0aGF0LCBvciBqdXN0IGVtaXR0aW5nIHRoZSBhcnJheSBvZiByZWNlbnQgdmFsdWVzIGRpcmVjdGx5IGlmIHRoZXJlIGlzIG5vIGBwcm9qZWN0YCBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Li4uT2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZXMgdGhlIG9ic2VydmFibGVzIHRvIGNvbWJpbmVcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcm9qZWN0XSBhbiBvcHRpb25hbCBmdW5jdGlvbiB0byBwcm9qZWN0IHRoZSB2YWx1ZXMgZnJvbSB0aGUgY29tYmluZWQgcmVjZW50IHZhbHVlcyBpbnRvIGEgbmV3IHZhbHVlIGZvciBlbWlzc2lvbi5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIG9ic2VydmFibGUgb2Ygb3RoZXIgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgZnJvbSBlYWNoIG9ic2VydmFibGUsIG9yIGFuIGFycmF5IG9mIGVhY2ggb2ZcbiAqIHRoZSBtb3N0IHJlY2VudCB2YWx1ZXMgZnJvbSBlYWNoIG9ic2VydmFibGUuXG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIGNvbWJpbmVMYXRlc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbWJpbmVMYXRlc3RTdGF0aWMoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBwcm9qZWN0ID0gbnVsbDtcbiAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcbiAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSkpIHtcbiAgICAgICAgc2NoZWR1bGVyID0gb2JzZXJ2YWJsZXMucG9wKCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvamVjdCA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgZmlyc3QgYW5kIG9ubHkgb3RoZXIgYXJndW1lbnQgYmVzaWRlcyB0aGUgcmVzdWx0U2VsZWN0b3IgaXMgYW4gYXJyYXlcbiAgICAvLyBhc3N1bWUgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGBjb21iaW5lTGF0ZXN0KFtvYnMxLCBvYnMyLCBvYnMzXSwgcHJvamVjdClgXG4gICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5XzEuaXNBcnJheShvYnNlcnZhYmxlc1swXSkpIHtcbiAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikubGlmdChuZXcgQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcbn1cbmV4cG9ydHMuY29tYmluZUxhdGVzdFN0YXRpYyA9IGNvbWJpbmVMYXRlc3RTdGF0aWM7XG52YXIgQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T3BlcmF0b3IocHJvamVjdCkge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgIH1cbiAgICBDb21iaW5lTGF0ZXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gQ29tYmluZUxhdGVzdE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gW107XG4gICAgICAgIHRoaXMudG9SZXNwb25kID0gW107XG4gICAgfVxuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlKSB7XG4gICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcbiAgICAgICAgdG9SZXNwb25kLnB1c2godG9SZXNwb25kLmxlbmd0aCk7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlKTtcbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IHRoaXMub2JzZXJ2YWJsZXM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gbGVuO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICh1bnVzZWQpIHtcbiAgICAgICAgaWYgKCh0aGlzLmFjdGl2ZSAtPSAxKSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy52YWx1ZXM7XG4gICAgICAgIHZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG4gICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDtcbiAgICAgICAgaWYgKHRvUmVzcG9uZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZm91bmQgPSB0b1Jlc3BvbmQuaW5kZXhPZihvdXRlckluZGV4KTtcbiAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0b1Jlc3BvbmQuc3BsaWNlKGZvdW5kLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodG9SZXNwb25kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvamVjdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyeVByb2plY3QodmFsdWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByb2plY3QgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuYXBwbHkodGhpcywgdmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5Db21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NvbWJpbmVMYXRlc3QuanNcbiAqKiBtb2R1bGUgaWQgPSAzNTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIFNjYWxhck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vU2NhbGFyT2JzZXJ2YWJsZScpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FbXB0eU9ic2VydmFibGUnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBBcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmICghc2NoZWR1bGVyICYmIGFycmF5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGFycmF5WzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFycmF5T2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXksIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHNvbWUgdmFsdWVzIHlvdSBzcGVjaWZ5IGFzIGFyZ3VtZW50cyxcbiAgICAgKiBpbW1lZGlhdGVseSBvbmUgYWZ0ZXIgdGhlIG90aGVyLCBhbmQgdGhlbiBlbWl0cyBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyB0aGUgYXJndW1lbnRzIHlvdSBwcm92aWRlLCB0aGVuIGNvbXBsZXRlcy5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL29mLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBhcmd1bWVudHMgZ2l2ZW4sIGFuZCB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uIHRoZXJlYWZ0ZXIuIEl0IGNhblxuICAgICAqIGJlIHVzZWQgZm9yIGNvbXBvc2luZyB3aXRoIG90aGVyIE9ic2VydmFibGVzLCBzdWNoIGFzIHdpdGgge0BsaW5rIGNvbmNhdH0uXG4gICAgICogQnkgZGVmYXVsdCwgaXQgdXNlcyBhIGBudWxsYCBTY2hlZHVsZXIsIHdoaWNoIG1lYW5zIHRoZSBgbmV4dGBcbiAgICAgKiBub3RpZmljYXRpb25zIGFyZSBzZW50IHN5bmNocm9ub3VzbHksIGFsdGhvdWdoIHdpdGggYSBkaWZmZXJlbnQgU2NoZWR1bGVyXG4gICAgICogaXQgaXMgcG9zc2libGUgdG8gZGV0ZXJtaW5lIHdoZW4gdGhvc2Ugbm90aWZpY2F0aW9ucyB3aWxsIGJlIGRlbGl2ZXJlZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgMTAsIDIwLCAzMCwgdGhlbiAnYScsICdiJywgJ2MnLCB0aGVuIHN0YXJ0IHRpY2tpbmcgZXZlcnkgc2Vjb25kLjwvY2FwdGlvbj5cbiAgICAgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUub2YoMTAsIDIwLCAzMCk7XG4gICAgICogdmFyIGxldHRlcnMgPSBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpO1xuICAgICAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gICAgICogdmFyIHJlc3VsdCA9IG51bWJlcnMuY29uY2F0KGxldHRlcnMpLmNvbmNhdChpbnRlcnZhbCk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cbiAgICAgKiBAc2VlIHtAbGluayBlbXB0eX1cbiAgICAgKiBAc2VlIHtAbGluayBuZXZlcn1cbiAgICAgKiBAc2VlIHtAbGluayB0aHJvd31cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uVH0gdmFsdWVzIEFyZ3VtZW50cyB0aGF0IHJlcHJlc2VudCBgbmV4dGAgdmFsdWVzIHRvIGJlIGVtaXR0ZWQuXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9ucyBvZiB0aGUgYG5leHRgIG5vdGlmaWNhdGlvbnMuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGVhY2ggZ2l2ZW4gaW5wdXQgdmFsdWUuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgb2ZcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEFycmF5T2JzZXJ2YWJsZS5vZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcnJheVtfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2NoZWR1bGVyID0gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcbiAgICAgICAgICAgIGFycmF5LnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXJyYXlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBhcnJheSA9IHN0YXRlLmFycmF5LCBpbmRleCA9IHN0YXRlLmluZGV4LCBjb3VudCA9IHN0YXRlLmNvdW50LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKGluZGV4ID49IGNvdW50KSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5W2luZGV4XSk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUpO1xuICAgIH07XG4gICAgQXJyYXlPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheTtcbiAgICAgICAgdmFyIGNvdW50ID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoQXJyYXlPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgYXJyYXk6IGFycmF5LCBpbmRleDogaW5kZXgsIGNvdW50OiBjb3VudCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50ICYmICFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoYXJyYXlbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXJyYXlPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5BcnJheU9ic2VydmFibGUgPSBBcnJheU9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcnJheU9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIFNjYWxhck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTY2FsYXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNjYWxhck9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgIH1cbiAgICBTY2FsYXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZSh2YWx1ZSwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIFNjYWxhck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGRvbmUgPSBzdGF0ZS5kb25lLCB2YWx1ZSA9IHN0YXRlLnZhbHVlLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmRvbmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIFNjYWxhck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNjYWxhck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLlNjYWxhck9ic2VydmFibGUgPSBTY2FsYXJPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2NhbGFyT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvU2NhbGFyT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEVtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtcHR5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuICAgICAqIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2NvbXBsZXRlJywgYW5kIG5vdGhpbmcgZWxzZS5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2VtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuICAgICAqIE9ic2VydmFibGVzLCBzdWNoIGFzIGluIGEge0BsaW5rIG1lcmdlTWFwfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGNvbXBsZXRlLjwvY2FwdGlvbj5cbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpLnN0YXJ0V2l0aCg3KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIG9ubHkgb2RkIG51bWJlcnMgdG8gdGhlIHNlcXVlbmNlICdhJywgJ2InLCAnYyc8L2NhcHRpb24+XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuICAgICAqICAgeCAlIDIgPT09IDEgPyBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpIDogUnguT2JzZXJ2YWJsZS5lbXB0eSgpXG4gICAgICogKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuICAgICAqIEBzZWUge0BsaW5rIG9mfVxuICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9uIG9mIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gXCJlbXB0eVwiIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGNvbXBsZXRlXG4gICAgICogbm90aWZpY2F0aW9uLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGVtcHR5XG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBFbXB0eU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBFbXB0eU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBFbXB0eU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkVtcHR5T2JzZXJ2YWJsZSA9IEVtcHR5T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVtcHR5T2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGlzU2NoZWR1bGVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zY2hlZHVsZSA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNTY2hlZHVsZXIgPSBpc1NjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzU2NoZWR1bGVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9pc1NjaGVkdWxlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM2M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgT3V0ZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT3V0ZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE91dGVyU3Vic2NyaWJlcigpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIE91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgfTtcbiAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTtcbiAgICB9O1xuICAgIE91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIE91dGVyU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuT3V0ZXJTdWJzY3JpYmVyID0gT3V0ZXJTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3V0ZXJTdWJzY3JpYmVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvT3V0ZXJTdWJzY3JpYmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMzY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuL3Jvb3QnKTtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuL2lzQXJyYXknKTtcbnZhciBpc1Byb21pc2VfMSA9IHJlcXVpcmUoJy4vaXNQcm9taXNlJyk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIGl0ZXJhdG9yXzEgPSByZXF1aXJlKCcuLi9zeW1ib2wvaXRlcmF0b3InKTtcbnZhciBvYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9zeW1ib2wvb2JzZXJ2YWJsZScpO1xudmFyIElubmVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vSW5uZXJTdWJzY3JpYmVyJyk7XG5mdW5jdGlvbiBzdWJzY3JpYmVUb1Jlc3VsdChvdXRlclN1YnNjcmliZXIsIHJlc3VsdCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkge1xuICAgIHZhciBkZXN0aW5hdGlvbiA9IG5ldyBJbm5lclN1YnNjcmliZXJfMS5Jbm5lclN1YnNjcmliZXIob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KTtcbiAgICBpZiAoZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5faXNTY2FsYXIpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShkZXN0aW5hdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJlc3VsdC5sZW5ndGg7IGkgPCBsZW4gJiYgIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkOyBpKyspIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0W2ldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUHJvbWlzZV8xLmlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFkZXN0aW5hdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIGRlc3RpbmF0aW9uLmVycm9yKGVycik7IH0pXG4gICAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAvLyBFc2NhcGluZyB0aGUgUHJvbWlzZSB0cmFwOiBnbG9iYWxseSB0aHJvdyB1bmhhbmRsZWQgZXJyb3JzXG4gICAgICAgICAgICByb290XzEucm9vdC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHJlc3VsdFtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSByZXN1bHQ7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaXRlbSk7XG4gICAgICAgICAgICBpZiAoZGVzdGluYXRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiByZXN1bHRbb2JzZXJ2YWJsZV8xLiQkb2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIG9icyA9IHJlc3VsdFtvYnNlcnZhYmxlXzEuJCRvYnNlcnZhYmxlXSgpO1xuICAgICAgICBpZiAodHlwZW9mIG9icy5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKCdpbnZhbGlkIG9ic2VydmFibGUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYnMuc3Vic2NyaWJlKG5ldyBJbm5lclN1YnNjcmliZXJfMS5Jbm5lclN1YnNjcmliZXIob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBUeXBlRXJyb3IoJ3Vua25vd24gdHlwZSByZXR1cm5lZCcpKTtcbiAgICB9XG59XG5leHBvcnRzLnN1YnNjcmliZVRvUmVzdWx0ID0gc3Vic2NyaWJlVG9SZXN1bHQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVUb1Jlc3VsdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQuanNcbiAqKiBtb2R1bGUgaWQgPSAzNjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzUHJvbWlzZSA9IGlzUHJvbWlzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUHJvbWlzZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvaXNQcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gMzY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuLi91dGlsL3Jvb3QnKTtcbnZhciBTeW1ib2wgPSByb290XzEucm9vdC5TeW1ib2w7XG5pZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmIChTeW1ib2wuaXRlcmF0b3IpIHtcbiAgICAgICAgZXhwb3J0cy4kJGl0ZXJhdG9yID0gU3ltYm9sLml0ZXJhdG9yO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgU3ltYm9sLmZvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSBTeW1ib2wuZm9yKCdpdGVyYXRvcicpO1xuICAgIH1cbn1cbmVsc2Uge1xuICAgIGlmIChyb290XzEucm9vdC5TZXQgJiYgdHlwZW9mIG5ldyByb290XzEucm9vdC5TZXQoKVsnQEBpdGVyYXRvciddID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIEJ1ZyBmb3IgbW96aWxsYSB2ZXJzaW9uXG4gICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9ICdAQGl0ZXJhdG9yJztcbiAgICB9XG4gICAgZWxzZSBpZiAocm9vdF8xLnJvb3QuTWFwKSB7XG4gICAgICAgIC8vIGVzNi1zaGltIHNwZWNpZmljIGxvZ2ljXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICBpZiAoa2V5ICE9PSAnZW50cmllcycgJiYga2V5ICE9PSAnc2l6ZScgJiYgcm9vdF8xLnJvb3QuTWFwLnByb3RvdHlwZVtrZXldID09PSByb290XzEucm9vdC5NYXAucHJvdG90eXBlWydlbnRyaWVzJ10pIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLiQkaXRlcmF0b3IgPSBrZXk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGV4cG9ydHMuJCRpdGVyYXRvciA9ICdAQGl0ZXJhdG9yJztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYXRvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3N5bWJvbC9pdGVyYXRvci5qc1xuICoqIG1vZHVsZSBpZCA9IDM2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgSW5uZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW5uZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyU3Vic2NyaWJlcihwYXJlbnQsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuICAgICAgICB0aGlzLm91dGVySW5kZXggPSBvdXRlckluZGV4O1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlOZXh0KHRoaXMub3V0ZXJWYWx1ZSwgdmFsdWUsIHRoaXMub3V0ZXJJbmRleCwgdGhpcy5pbmRleCsrLCB0aGlzKTtcbiAgICB9O1xuICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUVycm9yKGVycm9yLCB0aGlzKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gSW5uZXJTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5Jbm5lclN1YnNjcmliZXIgPSBJbm5lclN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5lclN1YnNjcmliZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9Jbm5lclN1YnNjcmliZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzNjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb25jYXRfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvY29uY2F0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5jb25jYXQgPSBjb25jYXRfMS5jb25jYXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9jb25jYXQuanNcbiAqKiBtb2R1bGUgaWQgPSAzNjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIGNvbmNhdF8xID0gcmVxdWlyZSgnLi4vb3BlcmF0b3IvY29uY2F0Jyk7XG5leHBvcnRzLmNvbmNhdCA9IGNvbmNhdF8xLmNvbmNhdFN0YXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvY29uY2F0LmpzXG4gKiogbW9kdWxlIGlkID0gMzcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUnKTtcbnZhciBtZXJnZUFsbF8xID0gcmVxdWlyZSgnLi9tZXJnZUFsbCcpO1xuLyoqXG4gKiBDcmVhdGVzIGFuIG91dHB1dCBPYnNlcnZhYmxlIHdoaWNoIHNlcXVlbnRpYWxseSBlbWl0cyBhbGwgdmFsdWVzIGZyb20gZXZlcnlcbiAqIGdpdmVuIGlucHV0IE9ic2VydmFibGUgYWZ0ZXIgdGhlIGN1cnJlbnQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29uY2F0ZW5hdGVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvZ2V0aGVyIGJ5XG4gKiBzZXF1ZW50aWFsbHkgZW1pdHRpbmcgdGhlaXIgdmFsdWVzLCBvbmUgT2JzZXJ2YWJsZSBhZnRlciB0aGUgb3RoZXIuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY29uY2F0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEpvaW5zIHRoaXMgT2JzZXJ2YWJsZSB3aXRoIG11bHRpcGxlIG90aGVyIE9ic2VydmFibGVzIGJ5IHN1YnNjcmliaW5nIHRvIHRoZW1cbiAqIG9uZSBhdCBhIHRpbWUsIHN0YXJ0aW5nIHdpdGggdGhlIHNvdXJjZSwgYW5kIG1lcmdpbmcgdGhlaXIgcmVzdWx0cyBpbnRvIHRoZVxuICogb3V0cHV0IE9ic2VydmFibGUuIFdpbGwgd2FpdCBmb3IgZWFjaCBPYnNlcnZhYmxlIHRvIGNvbXBsZXRlIGJlZm9yZSBtb3ZpbmdcbiAqIG9uIHRvIHRoZSBuZXh0LlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbmNhdGVuYXRlIGEgdGltZXIgY291bnRpbmcgZnJvbSAwIHRvIDMgd2l0aCBhIHN5bmNocm9ub3VzIHNlcXVlbmNlIGZyb20gMSB0byAxMDwvY2FwdGlvbj5cbiAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KTtcbiAqIHZhciBzZXF1ZW5jZSA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTApO1xuICogdmFyIHJlc3VsdCA9IHRpbWVyLmNvbmNhdChzZXF1ZW5jZSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbmNhdGVuYXRlIDMgT2JzZXJ2YWJsZXM8L2NhcHRpb24+XG4gKiB2YXIgdGltZXIxID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDEwKTtcbiAqIHZhciB0aW1lcjIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDIwMDApLnRha2UoNik7XG4gKiB2YXIgdGltZXIzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCg1MDApLnRha2UoMTApO1xuICogdmFyIHJlc3VsdCA9IHRpbWVyMS5jb25jYXQodGltZXIyLCB0aW1lcjMpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb25jYXRBbGx9XG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXBUb31cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29uY2F0ZW5hdGUgYWZ0ZXIgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBBbiBvcHRpb25hbCBTY2hlZHVsZXIgdG8gc2NoZWR1bGUgZWFjaFxuICogT2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gb24uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbGwgdmFsdWVzIG9mIGVhY2ggcGFzc2VkIE9ic2VydmFibGUgbWVyZ2VkIGludG8gYVxuICogc2luZ2xlIE9ic2VydmFibGUsIGluIG9yZGVyLCBpbiBzZXJpYWwgZmFzaGlvbi5cbiAqIEBtZXRob2QgY29uY2F0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjb25jYXQoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBjb25jYXRTdGF0aWMuYXBwbHkodm9pZCAwLCBbdGhpc10uY29uY2F0KG9ic2VydmFibGVzKSk7XG59XG5leHBvcnRzLmNvbmNhdCA9IGNvbmNhdDtcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggc2VxdWVudGlhbGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSBhZnRlciB0aGUgY3VycmVudCBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db25jYXRlbmF0ZXMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnlcbiAqIHNlcXVlbnRpYWxseSBlbWl0dGluZyB0aGVpciB2YWx1ZXMsIG9uZSBPYnNlcnZhYmxlIGFmdGVyIHRoZSBvdGhlci48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogSm9pbnMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnkgc3Vic2NyaWJpbmcgdG8gdGhlbSBvbmUgYXQgYSB0aW1lIGFuZFxuICogbWVyZ2luZyB0aGVpciByZXN1bHRzIGludG8gdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBXaWxsIHdhaXQgZm9yIGVhY2hcbiAqIE9ic2VydmFibGUgdG8gY29tcGxldGUgYmVmb3JlIG1vdmluZyBvbiB0byB0aGUgbmV4dC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSBhIHRpbWVyIGNvdW50aW5nIGZyb20gMCB0byAzIHdpdGggYSBzeW5jaHJvbm91cyBzZXF1ZW5jZSBmcm9tIDEgdG8gMTA8L2NhcHRpb24+XG4gKiB2YXIgdGltZXIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoNCk7XG4gKiB2YXIgc2VxdWVuY2UgPSBSeC5PYnNlcnZhYmxlLnJhbmdlKDEsIDEwKTtcbiAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmNvbmNhdCh0aW1lciwgc2VxdWVuY2UpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db25jYXRlbmF0ZSAzIE9ic2VydmFibGVzPC9jYXB0aW9uPlxuICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG4gKiB2YXIgdGltZXIyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgyMDAwKS50YWtlKDYpO1xuICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcbiAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmNvbmNhdCh0aW1lcjEsIHRpbWVyMiwgdGltZXIzKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbnB1dDEgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBjb25jYXRlbmF0ZSB3aXRoIG90aGVycy5cbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29uY2F0ZW5hdGUgd2l0aCBvdGhlcnMuXG4gKiBNb3JlIHRoYW4gb25lIGlucHV0IE9ic2VydmFibGVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudC5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPW51bGxdIEFuIG9wdGlvbmFsIFNjaGVkdWxlciB0byBzY2hlZHVsZSBlYWNoXG4gKiBPYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBvbi5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFsbCB2YWx1ZXMgb2YgZWFjaCBwYXNzZWQgT2JzZXJ2YWJsZSBtZXJnZWQgaW50byBhXG4gKiBzaW5nbGUgT2JzZXJ2YWJsZSwgaW4gb3JkZXIsIGluIHNlcmlhbCBmYXNoaW9uLlxuICogQHN0YXRpYyB0cnVlXG4gKiBAbmFtZSBjb25jYXRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbmNhdFN0YXRpYygpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHNjaGVkdWxlciA9IG51bGw7XG4gICAgdmFyIGFyZ3MgPSBvYnNlcnZhYmxlcztcbiAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihhcmdzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdKSkge1xuICAgICAgICBzY2hlZHVsZXIgPSBhcmdzLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcywgc2NoZWR1bGVyKS5saWZ0KG5ldyBtZXJnZUFsbF8xLk1lcmdlQWxsT3BlcmF0b3IoMSkpO1xufVxuZXhwb3J0cy5jb25jYXRTdGF0aWMgPSBjb25jYXRTdGF0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jb25jYXQuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlIGludG8gYSBmaXJzdC1vcmRlciBPYnNlcnZhYmxlIHdoaWNoXG4gKiBjb25jdXJyZW50bHkgZGVsaXZlcnMgYWxsIHZhbHVlcyB0aGF0IGFyZSBlbWl0dGVkIG9uIHRoZSBpbm5lciBPYnNlcnZhYmxlcy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZUFsbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgbWVyZ2VBbGxgIHN1YnNjcmliZXMgdG8gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIE9ic2VydmFibGVzLCBhbHNvIGtub3duIGFzXG4gKiBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlLiBFYWNoIHRpbWUgaXQgb2JzZXJ2ZXMgb25lIG9mIHRoZXNlIGVtaXR0ZWQgaW5uZXJcbiAqIE9ic2VydmFibGVzLCBpdCBzdWJzY3JpYmVzIHRvIHRoYXQgYW5kIGRlbGl2ZXJzIGFsbCB0aGUgdmFsdWVzIGZyb20gdGhlXG4gKiBpbm5lciBPYnNlcnZhYmxlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIG9ubHlcbiAqIGNvbXBsZXRlcyBvbmNlIGFsbCBpbm5lciBPYnNlcnZhYmxlcyBoYXZlIGNvbXBsZXRlZC4gQW55IGVycm9yIGRlbGl2ZXJlZCBieVxuICogYSBpbm5lciBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+U3Bhd24gYSBuZXcgaW50ZXJ2YWwgT2JzZXJ2YWJsZSBmb3IgZWFjaCBjbGljayBldmVudCwgYW5kIGJsZW5kIHRoZWlyIG91dHB1dHMgYXMgb25lIE9ic2VydmFibGU8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGhpZ2hlck9yZGVyID0gY2xpY2tzLm1hcCgoZXYpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogdmFyIGZpcnN0T3JkZXIgPSBoaWdoZXJPcmRlci5tZXJnZUFsbCgpO1xuICogZmlyc3RPcmRlci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnQgZnJvbSAwIHRvIDkgZXZlcnkgc2Vjb25kIGZvciBlYWNoIGNsaWNrLCBidXQgb25seSBhbGxvdyAyIGNvbmN1cnJlbnQgdGltZXJzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnRha2UoMTApKTtcbiAqIHZhciBmaXJzdE9yZGVyID0gaGlnaGVyT3JkZXIubWVyZ2VBbGwoMik7XG4gKiBmaXJzdE9yZGVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICogQHNlZSB7QGxpbmsgc3dpdGNofVxuICogQHNlZSB7QGxpbmsgemlwQWxsfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlubmVyXG4gKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB2YWx1ZXMgY29taW5nIGZyb20gYWxsIHRoZVxuICogaW5uZXIgT2JzZXJ2YWJsZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIG1lcmdlQWxsXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtZXJnZUFsbChjb25jdXJyZW50KSB7XG4gICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VBbGxPcGVyYXRvcihjb25jdXJyZW50KSk7XG59XG5leHBvcnRzLm1lcmdlQWxsID0gbWVyZ2VBbGw7XG52YXIgTWVyZ2VBbGxPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWVyZ2VBbGxPcGVyYXRvcihjb25jdXJyZW50KSB7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgfVxuICAgIE1lcmdlQWxsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1lcmdlQWxsU3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5jb25jdXJyZW50KSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VBbGxPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk1lcmdlQWxsT3BlcmF0b3IgPSBNZXJnZUFsbE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNZXJnZUFsbFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZXJnZUFsbFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVyZ2VBbGxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb25jdXJyZW50KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgIH1cbiAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKG9ic2VydmFibGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZUFsbFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlQWxsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7XG4gICAgICAgIHRoaXMuYWN0aXZlLS07XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5oYXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1lcmdlQWxsU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5leHBvcnRzLk1lcmdlQWxsU3Vic2NyaWJlciA9IE1lcmdlQWxsU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlQWxsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbWVyZ2VBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBkZWZlcl8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9kZWZlcicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZGVmZXIgPSBkZWZlcl8xLmRlZmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9kZWZlci5qc1xuICoqIG1vZHVsZSBpZCA9IDM3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgRGVmZXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0RlZmVyT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5kZWZlciA9IERlZmVyT2JzZXJ2YWJsZV8xLkRlZmVyT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvZGVmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRGVmZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVmZXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlZmVyT2JzZXJ2YWJsZShvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlRmFjdG9yeSA9IG9ic2VydmFibGVGYWN0b3J5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCwgb24gc3Vic2NyaWJlLCBjYWxscyBhbiBPYnNlcnZhYmxlIGZhY3RvcnkgdG9cbiAgICAgKiBtYWtlIGFuIE9ic2VydmFibGUgZm9yIGVhY2ggbmV3IE9ic2VydmVyLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNyZWF0ZXMgdGhlIE9ic2VydmFibGUgbGF6aWx5LCB0aGF0IGlzLCBvbmx5IHdoZW4gaXRcbiAgICAgKiBpcyBzdWJzY3JpYmVkLlxuICAgICAqIDwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZGVmZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBgZGVmZXJgIGFsbG93cyB5b3UgdG8gY3JlYXRlIHRoZSBPYnNlcnZhYmxlIG9ubHkgd2hlbiB0aGUgT2JzZXJ2ZXJcbiAgICAgKiBzdWJzY3JpYmVzLCBhbmQgY3JlYXRlIGEgZnJlc2ggT2JzZXJ2YWJsZSBmb3IgZWFjaCBPYnNlcnZlci4gSXQgd2FpdHMgdW50aWxcbiAgICAgKiBhbiBPYnNlcnZlciBzdWJzY3JpYmVzIHRvIGl0LCBhbmQgdGhlbiBpdCBnZW5lcmF0ZXMgYW4gT2JzZXJ2YWJsZSxcbiAgICAgKiB0eXBpY2FsbHkgd2l0aCBhbiBPYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uIEl0IGRvZXMgdGhpcyBhZnJlc2ggZm9yIGVhY2hcbiAgICAgKiBzdWJzY3JpYmVyLCBzbyBhbHRob3VnaCBlYWNoIHN1YnNjcmliZXIgbWF5IHRoaW5rIGl0IGlzIHN1YnNjcmliaW5nIHRvIHRoZVxuICAgICAqIHNhbWUgT2JzZXJ2YWJsZSwgaW4gZmFjdCBlYWNoIHN1YnNjcmliZXIgZ2V0cyBpdHMgb3duIGluZGl2aWR1YWxcbiAgICAgKiBPYnNlcnZhYmxlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHRvIGVpdGhlciBhbiBPYnNlcnZhYmxlIG9mIGNsaWNrcyBvciBhbiBPYnNlcnZhYmxlIG9mIGludGVydmFsLCBhdCByYW5kb208L2NhcHRpb24+XG4gICAgICogdmFyIGNsaWNrc09ySW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICogICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gICAgICogICB9IGVsc2Uge1xuICAgICAqICAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBjbGlja3NPckludGVydmFsLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZXxQcm9taXNlfSBvYnNlcnZhYmxlRmFjdG9yeSBUaGUgT2JzZXJ2YWJsZVxuICAgICAqIGZhY3RvcnkgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIE9ic2VydmVyIHRoYXQgc3Vic2NyaWJlcyB0byB0aGUgb3V0cHV0XG4gICAgICogT2JzZXJ2YWJsZS4gTWF5IGFsc28gcmV0dXJuIGEgUHJvbWlzZSwgd2hpY2ggd2lsbCBiZSBjb252ZXJ0ZWQgb24gdGhlIGZseVxuICAgICAqIHRvIGFuIE9ic2VydmFibGUuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB3aG9zZSBPYnNlcnZlcnMnIHN1YnNjcmlwdGlvbnMgdHJpZ2dlclxuICAgICAqIGFuIGludm9jYXRpb24gb2YgdGhlIGdpdmVuIE9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbi5cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBkZWZlclxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRGVmZXJPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgICAgICByZXR1cm4gbmV3IERlZmVyT2JzZXJ2YWJsZShvYnNlcnZhYmxlRmFjdG9yeSk7XG4gICAgfTtcbiAgICBEZWZlck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gbmV3IERlZmVyU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9ic2VydmFibGVGYWN0b3J5KTtcbiAgICB9O1xuICAgIHJldHVybiBEZWZlck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkRlZmVyT2JzZXJ2YWJsZSA9IERlZmVyT2JzZXJ2YWJsZTtcbnZhciBEZWZlclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWZlclN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVmZXJTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBmYWN0b3J5KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICAgICAgdGhpcy50cnlEZWZlcigpO1xuICAgIH1cbiAgICBEZWZlclN1YnNjcmliZXIucHJvdG90eXBlLnRyeURlZmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fY2FsbEZhY3RvcnkoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEZWZlclN1YnNjcmliZXIucHJvdG90eXBlLl9jYWxsRmFjdG9yeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZmFjdG9yeSgpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRGVmZXJTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvRGVmZXJPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZW1wdHlfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZW1wdHknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmVtcHR5ID0gZW1wdHlfMS5lbXB0eTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtcHR5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZW1wdHkuanNcbiAqKiBtb2R1bGUgaWQgPSAzNzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FbXB0eU9ic2VydmFibGUnKTtcbmV4cG9ydHMuZW1wdHkgPSBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1wdHkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2VtcHR5LmpzXG4gKiogbW9kdWxlIGlkID0gMzc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZm9ya0pvaW5fMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZm9ya0pvaW4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZvcmtKb2luID0gZm9ya0pvaW5fMS5mb3JrSm9pbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvcmtKb2luLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvZm9ya0pvaW4uanNcbiAqKiBtb2R1bGUgaWQgPSAzNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEZvcmtKb2luT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Gb3JrSm9pbk9ic2VydmFibGUnKTtcbmV4cG9ydHMuZm9ya0pvaW4gPSBGb3JrSm9pbk9ic2VydmFibGVfMS5Gb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Zm9ya0pvaW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL2ZvcmtKb2luLmpzXG4gKiogbW9kdWxlIGlkID0gMzc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRW1wdHlPYnNlcnZhYmxlJyk7XG52YXIgaXNBcnJheV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0FycmF5Jyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBGb3JrSm9pbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGb3JrSm9pbk9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRm9ya0pvaW5PYnNlcnZhYmxlKHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzb3VyY2VzXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGZvcmtKb2luXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBGb3JrSm9pbk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgc291cmNlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc291cmNlcyA9PT0gbnVsbCB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHRTZWxlY3RvciA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlb2Ygc291cmNlc1tzb3VyY2VzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXN1bHRTZWxlY3RvciA9IHNvdXJjZXMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgdGhlIGZpcnN0IGFuZCBvbmx5IG90aGVyIGFyZ3VtZW50IGJlc2lkZXMgdGhlIHJlc3VsdFNlbGVjdG9yIGlzIGFuIGFycmF5XG4gICAgICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGZvcmtKb2luKFtvYnMxLCBvYnMyLCBvYnMzXSwgcmVzdWx0U2VsZWN0b3IpYFxuICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheV8xLmlzQXJyYXkoc291cmNlc1swXSkpIHtcbiAgICAgICAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEZvcmtKb2luT2JzZXJ2YWJsZShzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcik7XG4gICAgfTtcbiAgICBGb3JrSm9pbk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gbmV3IEZvcmtKb2luU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNvdXJjZXMsIHRoaXMucmVzdWx0U2VsZWN0b3IpO1xuICAgIH07XG4gICAgcmV0dXJuIEZvcmtKb2luT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRm9ya0pvaW5PYnNlcnZhYmxlID0gRm9ya0pvaW5PYnNlcnZhYmxlO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBGb3JrSm9pblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGb3JrSm9pblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRm9ya0pvaW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAwO1xuICAgICAgICB0aGlzLmhhdmVWYWx1ZXMgPSAwO1xuICAgICAgICB2YXIgbGVuID0gc291cmNlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMudG90YWwgPSBsZW47XG4gICAgICAgIHRoaXMudmFsdWVzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldO1xuICAgICAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBzb3VyY2UsIG51bGwsIGkpO1xuICAgICAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24ub3V0ZXJJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIEZvcmtKb2luU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLnZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG4gICAgICAgIGlmICghaW5uZXJTdWIuX2hhc1ZhbHVlKSB7XG4gICAgICAgICAgICBpbm5lclN1Yi5faGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5oYXZlVmFsdWVzKys7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZvcmtKb2luU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgaGF2ZVZhbHVlcyA9IF9hLmhhdmVWYWx1ZXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIHZhbHVlcyA9IF9hLnZhbHVlcztcbiAgICAgICAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgICAgIGlmICghaW5uZXJTdWIuX2hhc1ZhbHVlKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tcGxldGVkKys7XG4gICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCAhPT0gbGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhdmVWYWx1ZXMgPT09IGxlbikge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0U2VsZWN0b3IgPyByZXN1bHRTZWxlY3Rvci5hcHBseSh0aGlzLCB2YWx1ZXMpIDogdmFsdWVzO1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBGb3JrSm9pblN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Rm9ya0pvaW5PYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9Gb3JrSm9pbk9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmcm9tXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2Zyb20nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZyb20gPSBmcm9tXzEuZnJvbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb20uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tLmpzXG4gKiogbW9kdWxlIGlkID0gMzgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBGcm9tT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Gcm9tT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5mcm9tID0gRnJvbU9ic2VydmFibGVfMS5Gcm9tT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tLmpzXG4gKiogbW9kdWxlIGlkID0gMzgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNBcnJheScpO1xudmFyIGlzRnVuY3Rpb25fMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNGdW5jdGlvbicpO1xudmFyIGlzUHJvbWlzZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1Byb21pc2UnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xudmFyIFByb21pc2VPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1Byb21pc2VPYnNlcnZhYmxlJyk7XG52YXIgSXRlcmF0b3JPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0l0ZXJhdG9yT2JzZXJ2YWJsZScpO1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9BcnJheU9ic2VydmFibGUnKTtcbnZhciBBcnJheUxpa2VPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0FycmF5TGlrZU9ic2VydmFibGUnKTtcbnZhciBvYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9zeW1ib2wvb2JzZXJ2YWJsZScpO1xudmFyIGl0ZXJhdG9yXzEgPSByZXF1aXJlKCcuLi9zeW1ib2wvaXRlcmF0b3InKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgb2JzZXJ2ZU9uXzEgPSByZXF1aXJlKCcuLi9vcGVyYXRvci9vYnNlcnZlT24nKTtcbnZhciBpc0FycmF5TGlrZSA9IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGcm9tT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGcm9tT2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBudWxsKTtcbiAgICAgICAgdGhpcy5pc2ggPSBpc2g7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBGcm9tT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaXNoLCBtYXBGbk9yU2NoZWR1bGVyLCB0aGlzQXJnLCBsYXN0U2NoZWR1bGVyKSB7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSBudWxsO1xuICAgICAgICB2YXIgbWFwRm4gPSBudWxsO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbl8xLmlzRnVuY3Rpb24obWFwRm5PclNjaGVkdWxlcikpIHtcbiAgICAgICAgICAgIHNjaGVkdWxlciA9IGxhc3RTY2hlZHVsZXIgfHwgbnVsbDtcbiAgICAgICAgICAgIG1hcEZuID0gbWFwRm5PclNjaGVkdWxlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcbiAgICAgICAgICAgIHNjaGVkdWxlciA9IG1hcEZuT3JTY2hlZHVsZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzaCAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzaFtvYnNlcnZhYmxlXzEuJCRvYnNlcnZhYmxlXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGlmIChpc2ggaW5zdGFuY2VvZiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSAmJiAhc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnJvbU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNBcnJheV8xLmlzQXJyYXkoaXNoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUHJvbWlzZV8xLmlzUHJvbWlzZShpc2gpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlT2JzZXJ2YWJsZV8xLlByb21pc2VPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpc2hbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgaXNoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlXzEuSXRlcmF0b3JPYnNlcnZhYmxlKGlzaCwgbnVsbCwgbnVsbCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlKGlzaCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5TGlrZU9ic2VydmFibGVfMS5BcnJheUxpa2VPYnNlcnZhYmxlKGlzaCwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigoaXNoICE9PSBudWxsICYmIHR5cGVvZiBpc2ggfHwgaXNoKSArICcgaXMgbm90IG9ic2VydmFibGUnKTtcbiAgICB9O1xuICAgIEZyb21PYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGlzaCA9IHRoaXMuaXNoO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGlzaFtvYnNlcnZhYmxlXzEuJCRvYnNlcnZhYmxlXSgpLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpc2hbb2JzZXJ2YWJsZV8xLiQkb2JzZXJ2YWJsZV0oKS5zdWJzY3JpYmUobmV3IG9ic2VydmVPbl8xLk9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgc2NoZWR1bGVyLCAwKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGcm9tT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRnJvbU9ic2VydmFibGUgPSBGcm9tT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21PYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9Gcm9tT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciByb290XzEgPSByZXF1aXJlKCcuLi91dGlsL3Jvb3QnKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIFByb21pc2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHJvbWlzZU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUHJvbWlzZU9ic2VydmFibGUocHJvbWlzZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBudWxsOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHByb21pc2VcbiAgICAgKiBAcGFyYW0gc2NoZWR1bGVyXG4gICAgICogQHJldHVybiB7UHJvbWlzZU9ic2VydmFibGV9XG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbVByb21pc2VcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIFByb21pc2VPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChwcm9taXNlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IG51bGw7IH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlT2JzZXJ2YWJsZShwcm9taXNlLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgUHJvbWlzZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1NjYWxhcikge1xuICAgICAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9pc1NjYWxhciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzY2FwZSB0aGUgcHJvbWlzZSB0cmFwLCB0aHJvdyB1bmhhbmRsZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgICAgIHJvb3RfMS5yb290LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2NhbGFyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCAwLCB7IHZhbHVlOiB0aGlzLnZhbHVlLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2lzU2NhbGFyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCAwLCB7IHZhbHVlOiB2YWx1ZSwgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnIsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2NhcGUgdGhlIHByb21pc2UgdHJhcCwgdGhyb3cgdW5oYW5kbGVkIGVycm9yc1xuICAgICAgICAgICAgICAgICAgICByb290XzEucm9vdC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFByb21pc2VPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Qcm9taXNlT2JzZXJ2YWJsZSA9IFByb21pc2VPYnNlcnZhYmxlO1xuZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KGFyZykge1xuICAgIHZhciB2YWx1ZSA9IGFyZy52YWx1ZSwgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGlzcGF0Y2hFcnJvcihhcmcpIHtcbiAgICB2YXIgZXJyID0gYXJnLmVyciwgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgIGlmICghc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvbWlzZU9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL1Byb21pc2VPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzg0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIGlzT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzT2JqZWN0Jyk7XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJ5Q2F0Y2gnKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgaXNGdW5jdGlvbl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0Z1bmN0aW9uJyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEl0ZXJhdG9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEl0ZXJhdG9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJdGVyYXRvck9ic2VydmFibGUoaXRlcmF0b3IsIHByb2plY3QsIHRoaXNBcmcsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKGl0ZXJhdG9yID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaXRlcmF0b3IgY2Fubm90IGJlIG51bGwuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JqZWN0XzEuaXNPYmplY3QocHJvamVjdCkpIHtcbiAgICAgICAgICAgIHRoaXMudGhpc0FyZyA9IHByb2plY3Q7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHRoaXNBcmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbl8xLmlzRnVuY3Rpb24ocHJvamVjdCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvamVjdCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doZW4gcHJvdmlkZWQsIGBwcm9qZWN0YCBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pdGVyYXRvciA9IGdldEl0ZXJhdG9yKGl0ZXJhdG9yKTtcbiAgICB9XG4gICAgSXRlcmF0b3JPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChpdGVyYXRvciwgcHJvamVjdCwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlKGl0ZXJhdG9yLCBwcm9qZWN0LCB0aGlzQXJnLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgSXRlcmF0b3JPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHN0YXRlLmluZGV4LCBoYXNFcnJvciA9IHN0YXRlLmhhc0Vycm9yLCB0aGlzQXJnID0gc3RhdGUudGhpc0FyZywgcHJvamVjdCA9IHN0YXRlLnByb2plY3QsIGl0ZXJhdG9yID0gc3RhdGUuaXRlcmF0b3IsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoaGFzRXJyb3IpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3Ioc3RhdGUuZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHByb2plY3QpLmNhbGwodGhpc0FyZywgcmVzdWx0LnZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmU7XG4gICAgICAgICAgICAgICAgc3RhdGUuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBJdGVyYXRvck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBpdGVyYXRvciA9IF9hLml0ZXJhdG9yLCBwcm9qZWN0ID0gX2EucHJvamVjdCwgdGhpc0FyZyA9IF9hLnRoaXNBcmcsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcbiAgICAgICAgaWYgKHNjaGVkdWxlcikge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShJdGVyYXRvck9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcbiAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsIHRoaXNBcmc6IHRoaXNBcmcsIHByb2plY3Q6IHByb2plY3QsIGl0ZXJhdG9yOiBpdGVyYXRvciwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHByb2plY3QpLmNhbGwodGhpc0FyZywgcmVzdWx0LnZhbHVlLCBpbmRleCsrKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJdGVyYXRvck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkl0ZXJhdG9yT2JzZXJ2YWJsZSA9IEl0ZXJhdG9yT2JzZXJ2YWJsZTtcbnZhciBTdHJpbmdJdGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3Ioc3RyLCBpZHgsIGxlbikge1xuICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuICAgICAgICBpZiAobGVuID09PSB2b2lkIDApIHsgbGVuID0gc3RyLmxlbmd0aDsgfVxuICAgICAgICB0aGlzLnN0ciA9IHN0cjtcbiAgICAgICAgdGhpcy5pZHggPSBpZHg7XG4gICAgICAgIHRoaXMubGVuID0gbGVuO1xuICAgIH1cbiAgICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0aGlzKTsgfTtcbiAgICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0ci5jaGFyQXQodGhpcy5pZHgrKylcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIGRvbmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gU3RyaW5nSXRlcmF0b3I7XG59KCkpO1xudmFyIEFycmF5SXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFycmF5SXRlcmF0b3IoYXJyLCBpZHgsIGxlbikge1xuICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuICAgICAgICBpZiAobGVuID09PSB2b2lkIDApIHsgbGVuID0gdG9MZW5ndGgoYXJyKTsgfVxuICAgICAgICB0aGlzLmFyciA9IGFycjtcbiAgICAgICAgdGhpcy5pZHggPSBpZHg7XG4gICAgICAgIHRoaXMubGVuID0gbGVuO1xuICAgIH1cbiAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcbiAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZHggPCB0aGlzLmxlbiA/IHtcbiAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuYXJyW3RoaXMuaWR4KytdXG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgICBkb25lOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIEFycmF5SXRlcmF0b3I7XG59KCkpO1xuZnVuY3Rpb24gZ2V0SXRlcmF0b3Iob2JqKSB7XG4gICAgdmFyIGkgPSBvYmpbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXTtcbiAgICBpZiAoIWkgJiYgdHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdJdGVyYXRvcihvYmopO1xuICAgIH1cbiAgICBpZiAoIWkgJiYgb2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcihvYmopO1xuICAgIH1cbiAgICBpZiAoIWkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0IGlzIG5vdCBpdGVyYWJsZScpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0oKTtcbn1cbnZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5mdW5jdGlvbiB0b0xlbmd0aChvKSB7XG4gICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcbiAgICBpZiAoaXNOYU4obGVuKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGxlbiA9PT0gMCB8fCAhbnVtYmVySXNGaW5pdGUobGVuKSkge1xuICAgICAgICByZXR1cm4gbGVuO1xuICAgIH1cbiAgICBsZW4gPSBzaWduKGxlbikgKiBNYXRoLmZsb29yKE1hdGguYWJzKGxlbikpO1xuICAgIGlmIChsZW4gPD0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGxlbiA+IG1heFNhZmVJbnRlZ2VyKSB7XG4gICAgICAgIHJldHVybiBtYXhTYWZlSW50ZWdlcjtcbiAgICB9XG4gICAgcmV0dXJuIGxlbjtcbn1cbmZ1bmN0aW9uIG51bWJlcklzRmluaXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgcm9vdF8xLnJvb3QuaXNGaW5pdGUodmFsdWUpO1xufVxuZnVuY3Rpb24gc2lnbih2YWx1ZSkge1xuICAgIHZhciB2YWx1ZUFzTnVtYmVyID0gK3ZhbHVlO1xuICAgIGlmICh2YWx1ZUFzTnVtYmVyID09PSAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyO1xuICAgIH1cbiAgICBpZiAoaXNOYU4odmFsdWVBc051bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlQXNOdW1iZXI7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyIDwgMCA/IC0xIDogMTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUl0ZXJhdG9yT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvSXRlcmF0b3JPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMzg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1NjYWxhck9ic2VydmFibGUnKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRW1wdHlPYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEFycmF5TGlrZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheUxpa2VPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFycmF5TGlrZU9ic2VydmFibGUoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5TGlrZSA9IGFycmF5TGlrZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmICghbWFwRm4gJiYgIXNjaGVkdWxlciAmJiBhcnJheUxpa2UubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1NjYWxhciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gYXJyYXlMaWtlWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXBGbikge1xuICAgICAgICAgICAgdGhpcy5tYXBGbiA9IG1hcEZuLmJpbmQodGhpc0FyZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXlMaWtlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aCA9PT0gMSAmJiAhbWFwRm4pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlMaWtlWzBdLCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpa2VPYnNlcnZhYmxlKGFycmF5TGlrZSwgbWFwRm4sIHRoaXNBcmcsIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFycmF5TGlrZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGFycmF5TGlrZSA9IHN0YXRlLmFycmF5TGlrZSwgaW5kZXggPSBzdGF0ZS5pbmRleCwgbGVuZ3RoID0gc3RhdGUubGVuZ3RoLCBtYXBGbiA9IHN0YXRlLm1hcEZuLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXggPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IG1hcEZuID8gbWFwRm4oYXJyYXlMaWtlW2luZGV4XSwgaW5kZXgpIDogYXJyYXlMaWtlW2luZGV4XTtcbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIEFycmF5TGlrZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBhcnJheUxpa2UgPSBfYS5hcnJheUxpa2UsIG1hcEZuID0gX2EubWFwRm4sIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGFycmF5TGlrZS5sZW5ndGg7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoQXJyYXlMaWtlT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGFycmF5TGlrZTogYXJyYXlMaWtlLCBpbmRleDogaW5kZXgsIGxlbmd0aDogbGVuZ3RoLCBtYXBGbjogbWFwRm4sIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBtYXBGbiA/IG1hcEZuKGFycmF5TGlrZVtpXSwgaSkgOiBhcnJheUxpa2VbaV07XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBcnJheUxpa2VPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5BcnJheUxpa2VPYnNlcnZhYmxlID0gQXJyYXlMaWtlT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5TGlrZU9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0FycmF5TGlrZU9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIE5vdGlmaWNhdGlvbl8xID0gcmVxdWlyZSgnLi4vTm90aWZpY2F0aW9uJyk7XG4vKipcbiAqIEBzZWUge0BsaW5rIE5vdGlmaWNhdGlvbn1cbiAqXG4gKiBAcGFyYW0gc2NoZWR1bGVyXG4gKiBAcGFyYW0gZGVsYXlcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCBvYnNlcnZlT25cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG9ic2VydmVPbihzY2hlZHVsZXIsIGRlbGF5KSB7XG4gICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgT2JzZXJ2ZU9uT3BlcmF0b3Ioc2NoZWR1bGVyLCBkZWxheSkpO1xufVxuZXhwb3J0cy5vYnNlcnZlT24gPSBvYnNlcnZlT247XG52YXIgT2JzZXJ2ZU9uT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgfVxuICAgIE9ic2VydmVPbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zY2hlZHVsZXIsIHRoaXMuZGVsYXkpKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZlT25PcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk9ic2VydmVPbk9wZXJhdG9yID0gT2JzZXJ2ZU9uT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE9ic2VydmVPblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYnNlcnZlT25TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICB9XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IGFyZy5ub3RpZmljYXRpb24sIGRlc3RpbmF0aW9uID0gYXJnLmRlc3RpbmF0aW9uO1xuICAgICAgICBub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG4gICAgfTtcbiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU1lc3NhZ2UgPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKE9ic2VydmVPblN1YnNjcmliZXIuZGlzcGF0Y2gsIHRoaXMuZGVsYXksIG5ldyBPYnNlcnZlT25NZXNzYWdlKG5vdGlmaWNhdGlvbiwgdGhpcy5kZXN0aW5hdGlvbikpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVFcnJvcihlcnIpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmVPblN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5leHBvcnRzLk9ic2VydmVPblN1YnNjcmliZXIgPSBPYnNlcnZlT25TdWJzY3JpYmVyO1xudmFyIE9ic2VydmVPbk1lc3NhZ2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPbk1lc3NhZ2Uobm90aWZpY2F0aW9uLCBkZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gT2JzZXJ2ZU9uTWVzc2FnZTtcbn0oKSk7XG5leHBvcnRzLk9ic2VydmVPbk1lc3NhZ2UgPSBPYnNlcnZlT25NZXNzYWdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2ZU9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivb2JzZXJ2ZU9uLmpzXG4gKiogbW9kdWxlIGlkID0gMzg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL09ic2VydmFibGUnKTtcbi8qKlxuICogUmVwcmVzZW50cyBhIHB1c2gtYmFzZWQgZXZlbnQgb3IgdmFsdWUgdGhhdCBhbiB7QGxpbmsgT2JzZXJ2YWJsZX0gY2FuIGVtaXQuXG4gKiBUaGlzIGNsYXNzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIG9wZXJhdG9ycyB0aGF0IG1hbmFnZSBub3RpZmljYXRpb25zLFxuICogbGlrZSB7QGxpbmsgbWF0ZXJpYWxpemV9LCB7QGxpbmsgZGVtYXRlcmlhbGl6ZX0sIHtAbGluayBvYnNlcnZlT259LCBhbmRcbiAqIG90aGVycy4gQmVzaWRlcyB3cmFwcGluZyB0aGUgYWN0dWFsIGRlbGl2ZXJlZCB2YWx1ZSwgaXQgYWxzbyBhbm5vdGF0ZXMgaXRcbiAqIHdpdGggbWV0YWRhdGEgb2YsIGZvciBpbnN0YW5jZSwgd2hhdCB0eXBlIG9mIHB1c2ggbWVzc2FnZSBpdCBpcyAoYG5leHRgLFxuICogYGVycm9yYCwgb3IgYGNvbXBsZXRlYCkuXG4gKlxuICogQHNlZSB7QGxpbmsgbWF0ZXJpYWxpemV9XG4gKiBAc2VlIHtAbGluayBkZW1hdGVyaWFsaXplfVxuICogQHNlZSB7QGxpbmsgb2JzZXJ2ZU9ufVxuICpcbiAqIEBjbGFzcyBOb3RpZmljYXRpb248VD5cbiAqL1xudmFyIE5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKGtpbmQsIHZhbHVlLCBleGNlcHRpb24pIHtcbiAgICAgICAgdGhpcy5raW5kID0ga2luZDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmV4Y2VwdGlvbiA9IGV4Y2VwdGlvbjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGtpbmQgPT09ICdOJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsaXZlcnMgdG8gdGhlIGdpdmVuIGBvYnNlcnZlcmAgdGhlIHZhbHVlIHdyYXBwZWQgYnkgdGhpcyBOb3RpZmljYXRpb24uXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcn0gb2JzZXJ2ZXJcbiAgICAgKiBAcmV0dXJuXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIubmV4dCAmJiBvYnNlcnZlci5uZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKHRoaXMuZXhjZXB0aW9uKTtcbiAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5jb21wbGV0ZSAmJiBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBzb21lIHtAbGluayBPYnNlcnZlcn0gY2FsbGJhY2tzLCBkZWxpdmVyIHRoZSB2YWx1ZSByZXByZXNlbnRlZCBieSB0aGVcbiAgICAgKiBjdXJyZW50IE5vdGlmaWNhdGlvbiB0byB0aGUgY29ycmVjdGx5IGNvcnJlc3BvbmRpbmcgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCk6IHZvaWR9IG5leHQgQW4gT2JzZXJ2ZXIgYG5leHRgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyOiBhbnkpOiB2b2lkfSBbZXJyb3JdIEFuIE9ic2VydmVyIGBlcnJvcmAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuZG8gPSBmdW5jdGlvbiAobmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBraW5kID0gdGhpcy5raW5kO1xuICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0ICYmIG5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IgJiYgZXJyb3IodGhpcy5leGNlcHRpb24pO1xuICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlICYmIGNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRha2VzIGFuIE9ic2VydmVyIG9yIGl0cyBpbmRpdmlkdWFsIGNhbGxiYWNrIGZ1bmN0aW9ucywgYW5kIGNhbGxzIGBvYnNlcnZlYFxuICAgICAqIG9yIGBkb2AgbWV0aG9kcyBhY2NvcmRpbmdseS5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dE9yT2JzZXJ2ZXIgQW4gT2JzZXJ2ZXIgb3JcbiAgICAgKiB0aGUgYG5leHRgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyOiBhbnkpOiB2b2lkfSBbZXJyb3JdIEFuIE9ic2VydmVyIGBlcnJvcmAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyICYmIHR5cGVvZiBuZXh0T3JPYnNlcnZlci5uZXh0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlKG5leHRPck9ic2VydmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBqdXN0IGRlbGl2ZXJzIHRoZSBub3RpZmljYXRpb24gcmVwcmVzZW50ZWRcbiAgICAgKiBieSB0aGlzIE5vdGlmaWNhdGlvbiBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHthbnl9XG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBraW5kID0gdGhpcy5raW5kO1xuICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5vZih0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ0UnOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS50aHJvdyh0aGlzLmV4Y2VwdGlvbik7XG4gICAgICAgICAgICBjYXNlICdDJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYG5leHRgIGZyb20gYVxuICAgICAqIGdpdmVuIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVGhlIGBuZXh0YCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcIm5leHRcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZVxuICAgICAqIGFyZ3VtZW50LlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignTicsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy51bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgc2hvcnRjdXQgdG8gY3JlYXRlIGEgTm90aWZpY2F0aW9uIGluc3RhbmNlIG9mIHRoZSB0eXBlIGBlcnJvcmAgZnJvbSBhXG4gICAgICogZ2l2ZW4gZXJyb3IuXG4gICAgICogQHBhcmFtIHthbnl9IFtlcnJdIFRoZSBgZXJyb3JgIGV4Y2VwdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcImVycm9yXCIgTm90aWZpY2F0aW9uIHJlcHJlc2VudGluZyB0aGVcbiAgICAgKiBhcmd1bWVudC5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24uY3JlYXRlRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdFJywgdW5kZWZpbmVkLCBlcnIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGNvbXBsZXRlYC5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248YW55Pn0gVGhlIHZhbHVlbGVzcyBcImNvbXBsZXRlXCIgTm90aWZpY2F0aW9uLlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVOb3RpZmljYXRpb247XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdDJyk7XG4gICAgTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbignTicsIHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcbn0oKSk7XG5leHBvcnRzLk5vdGlmaWNhdGlvbiA9IE5vdGlmaWNhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vdGlmaWNhdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL05vdGlmaWNhdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDM4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZyb21FdmVudF8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9mcm9tRXZlbnQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZyb21FdmVudCA9IGZyb21FdmVudF8xLmZyb21FdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudC5qc1xuICoqIG1vZHVsZSBpZCA9IDM4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgRnJvbUV2ZW50T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Gcm9tRXZlbnRPYnNlcnZhYmxlJyk7XG5leHBvcnRzLmZyb21FdmVudCA9IEZyb21FdmVudE9ic2VydmFibGVfMS5Gcm9tRXZlbnRPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvZnJvbUV2ZW50LmpzXG4gKiogbW9kdWxlIGlkID0gMzkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbmZ1bmN0aW9uIGlzTm9kZVN0eWxlRXZlbnRFbW1pdHRlcihzb3VyY2VPYmopIHtcbiAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5hZGRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLnJlbW92ZUxpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopIHtcbiAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5vbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLm9mZiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGlzTm9kZUxpc3Qoc291cmNlT2JqKSB7XG4gICAgcmV0dXJuICEhc291cmNlT2JqICYmIHNvdXJjZU9iai50b1N0cmluZygpID09PSAnW29iamVjdCBOb2RlTGlzdF0nO1xufVxuZnVuY3Rpb24gaXNIVE1MQ29sbGVjdGlvbihzb3VyY2VPYmopIHtcbiAgICByZXR1cm4gISFzb3VyY2VPYmogJiYgc291cmNlT2JqLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXSc7XG59XG5mdW5jdGlvbiBpc0V2ZW50VGFyZ2V0KHNvdXJjZU9iaikge1xuICAgIHJldHVybiAhIXNvdXJjZU9iaiAmJiB0eXBlb2Ygc291cmNlT2JqLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5yZW1vdmVFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xufVxuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBGcm9tRXZlbnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnJvbUV2ZW50T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGcm9tRXZlbnRPYnNlcnZhYmxlKHNvdXJjZU9iaiwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zb3VyY2VPYmogPSBzb3VyY2VPYmo7XG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzb3VyY2VPYmpcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lXG4gICAgICogQHBhcmFtIHNlbGVjdG9yXG4gICAgICogQHJldHVybiB7RnJvbUV2ZW50T2JzZXJ2YWJsZX1cbiAgICAgKiBAc3RhdGljIHRydWVcbiAgICAgKiBAbmFtZSBmcm9tRXZlbnRcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEZyb21FdmVudE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNvdXJjZU9iaiwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gbmV3IEZyb21FdmVudE9ic2VydmFibGUoc291cmNlT2JqLCBldmVudE5hbWUsIHNlbGVjdG9yKTtcbiAgICB9O1xuICAgIEZyb21FdmVudE9ic2VydmFibGUuc2V0dXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc291cmNlT2JqLCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlO1xuICAgICAgICBpZiAoaXNOb2RlTGlzdChzb3VyY2VPYmopIHx8IGlzSFRNTENvbGxlY3Rpb24oc291cmNlT2JqKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZU9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIEZyb21FdmVudE9ic2VydmFibGUuc2V0dXBTdWJzY3JpcHRpb24oc291cmNlT2JqW2ldLCBldmVudE5hbWUsIGhhbmRsZXIsIHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzRXZlbnRUYXJnZXQoc291cmNlT2JqKSkge1xuICAgICAgICAgICAgc291cmNlT2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlT2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyKHNvdXJjZU9iaikpIHtcbiAgICAgICAgICAgIHNvdXJjZU9iai5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzb3VyY2VPYmoub2ZmKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNOb2RlU3R5bGVFdmVudEVtbWl0dGVyKHNvdXJjZU9iaikpIHtcbiAgICAgICAgICAgIHNvdXJjZU9iai5hZGRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzb3VyY2VPYmoucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKHVuc3Vic2NyaWJlKSk7XG4gICAgfTtcbiAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHNvdXJjZU9iaiA9IHRoaXMuc291cmNlT2JqO1xuICAgICAgICB2YXIgZXZlbnROYW1lID0gdGhpcy5ldmVudE5hbWU7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7XG4gICAgICAgIHZhciBoYW5kbGVyID0gc2VsZWN0b3IgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gc3Vic2NyaWJlci5uZXh0KGUpOyB9O1xuICAgICAgICBGcm9tRXZlbnRPYnNlcnZhYmxlLnNldHVwU3Vic2NyaXB0aW9uKHNvdXJjZU9iaiwgZXZlbnROYW1lLCBoYW5kbGVyLCBzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIHJldHVybiBGcm9tRXZlbnRPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Gcm9tRXZlbnRPYnNlcnZhYmxlID0gRnJvbUV2ZW50T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21FdmVudE9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0Zyb21FdmVudE9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmcm9tRXZlbnRQYXR0ZXJuXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4gPSBmcm9tRXZlbnRQYXR0ZXJuXzEuZnJvbUV2ZW50UGF0dGVybjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudFBhdHRlcm4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzXG4gKiogbW9kdWxlIGlkID0gMzkyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5mcm9tRXZlbnRQYXR0ZXJuID0gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGVfMS5Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnRQYXR0ZXJuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzXG4gKiogbW9kdWxlIGlkID0gMzkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xudmFyIHRyeUNhdGNoXzEgPSByZXF1aXJlKCcuLi91dGlsL3RyeUNhdGNoJyk7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvZXJyb3JPYmplY3QnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5hZGRIYW5kbGVyID0gYWRkSGFuZGxlcjtcbiAgICAgICAgdGhpcy5yZW1vdmVIYW5kbGVyID0gcmVtb3ZlSGFuZGxlcjtcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYWRkSGFuZGxlclxuICAgICAqIEBwYXJhbSByZW1vdmVIYW5kbGVyXG4gICAgICogQHBhcmFtIHNlbGVjdG9yXG4gICAgICogQHJldHVybiB7RnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGV9XG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbUV2ZW50UGF0dGVyblxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpO1xuICAgIH07XG4gICAgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgYWRkSGFuZGxlciA9IHRoaXMuYWRkSGFuZGxlcjtcbiAgICAgICAgdmFyIHJlbW92ZUhhbmRsZXIgPSB0aGlzLnJlbW92ZUhhbmRsZXI7XG4gICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7XG4gICAgICAgIHZhciBoYW5kbGVyID0gc2VsZWN0b3IgPyBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihyZXN1bHQuZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7IHN1YnNjcmliZXIubmV4dChlKTsgfTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2goYWRkSGFuZGxlcikoaGFuZGxlcik7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IocmVzdWx0LmUpO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXIuYWRkKG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy9UT0RPOiBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgdG8gZm9yd2FyZCB0byBlcnJvciBoYW5kbGVyXG4gICAgICAgICAgICByZW1vdmVIYW5kbGVyKGhhbmRsZXIpO1xuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlID0gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzOTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmcm9tUHJvbWlzZV8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9mcm9tUHJvbWlzZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbVByb21pc2UgPSBmcm9tUHJvbWlzZV8xLmZyb21Qcm9taXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbVByb21pc2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tUHJvbWlzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM5NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUHJvbWlzZU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vUHJvbWlzZU9ic2VydmFibGUnKTtcbmV4cG9ydHMuZnJvbVByb21pc2UgPSBQcm9taXNlT2JzZXJ2YWJsZV8xLlByb21pc2VPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21Qcm9taXNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9mcm9tUHJvbWlzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGludGVydmFsXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2ludGVydmFsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5pbnRlcnZhbCA9IGludGVydmFsXzEuaW50ZXJ2YWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnZhbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL2ludGVydmFsLmpzXG4gKiogbW9kdWxlIGlkID0gMzk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBJbnRlcnZhbE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vSW50ZXJ2YWxPYnNlcnZhYmxlJyk7XG5leHBvcnRzLmludGVydmFsID0gSW50ZXJ2YWxPYnNlcnZhYmxlXzEuSW50ZXJ2YWxPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVydmFsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9pbnRlcnZhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDM5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc051bWVyaWNfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNOdW1lcmljJyk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgSW50ZXJ2YWxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW50ZXJ2YWxPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEludGVydmFsT2JzZXJ2YWJsZShwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgICAgICBpZiAocGVyaW9kID09PSB2b2lkIDApIHsgcGVyaW9kID0gMDsgfVxuICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5wZXJpb2QgPSBwZXJpb2Q7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICBpZiAoIWlzTnVtZXJpY18xLmlzTnVtZXJpYyhwZXJpb2QpIHx8IHBlcmlvZCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMucGVyaW9kID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNjaGVkdWxlciB8fCB0eXBlb2Ygc2NoZWR1bGVyLnNjaGVkdWxlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgc2VxdWVudGlhbCBudW1iZXJzIGV2ZXJ5IHNwZWNpZmllZFxuICAgICAqIGludGVydmFsIG9mIHRpbWUsIG9uIGEgc3BlY2lmaWVkIFNjaGVkdWxlci5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyBpbmNyZW1lbnRhbCBudW1iZXJzIHBlcmlvZGljYWxseSBpbiB0aW1lLlxuICAgICAqIDwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvaW50ZXJ2YWwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBgaW50ZXJ2YWxgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFuIGluZmluaXRlIHNlcXVlbmNlIG9mXG4gICAgICogYXNjZW5kaW5nIGludGVnZXJzLCB3aXRoIGEgY29uc3RhbnQgaW50ZXJ2YWwgb2YgdGltZSBvZiB5b3VyIGNob29zaW5nXG4gICAgICogYmV0d2VlbiB0aG9zZSBlbWlzc2lvbnMuIFRoZSBmaXJzdCBlbWlzc2lvbiBpcyBub3Qgc2VudCBpbW1lZGlhdGVseSwgYnV0XG4gICAgICogb25seSBhZnRlciB0aGUgZmlyc3QgcGVyaW9kIGhhcyBwYXNzZWQuIEJ5IGRlZmF1bHQsIHRoaXMgb3BlcmF0b3IgdXNlcyB0aGVcbiAgICAgKiBgYXN5bmNgIFNjaGVkdWxlciB0byBwcm92aWRlIGEgbm90aW9uIG9mIHRpbWUsIGJ1dCB5b3UgbWF5IHBhc3MgYW55XG4gICAgICogU2NoZWR1bGVyIHRvIGl0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgYXNjZW5kaW5nIG51bWJlcnMsIG9uZSBldmVyeSBzZWNvbmQgKDEwMDBtcyk8L2NhcHRpb24+XG4gICAgICogdmFyIG51bWJlcnMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgdGltZXJ9XG4gICAgICogQHNlZSB7QGxpbmsgZGVsYXl9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3BlcmlvZD0wXSBUaGUgaW50ZXJ2YWwgc2l6ZSBpbiBtaWxsaXNlY29uZHMgKGJ5IGRlZmF1bHQpXG4gICAgICogb3IgdGhlIHRpbWUgdW5pdCBkZXRlcm1pbmVkIGJ5IHRoZSBzY2hlZHVsZXIncyBjbG9jay5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIFNjaGVkdWxlciB0byB1c2UgZm9yIHNjaGVkdWxpbmdcbiAgICAgKiB0aGUgZW1pc3Npb24gb2YgdmFsdWVzLCBhbmQgcHJvdmlkaW5nIGEgbm90aW9uIG9mIFwidGltZVwiLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhIHNlcXVlbnRpYWwgbnVtYmVyIGVhY2ggdGltZVxuICAgICAqIGludGVydmFsLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGludGVydmFsXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBJbnRlcnZhbE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChwZXJpb2QgPT09IHZvaWQgMCkgeyBwZXJpb2QgPSAwOyB9XG4gICAgICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgICAgIHJldHVybiBuZXcgSW50ZXJ2YWxPYnNlcnZhYmxlKHBlcmlvZCwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIEludGVydmFsT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZDtcbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KGluZGV4KTtcbiAgICAgICAgaWYgKHN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5pbmRleCArPSAxO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBwZXJpb2QpO1xuICAgIH07XG4gICAgSW50ZXJ2YWxPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIHBlcmlvZCA9IHRoaXMucGVyaW9kO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHN1YnNjcmliZXIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShJbnRlcnZhbE9ic2VydmFibGUuZGlzcGF0Y2gsIHBlcmlvZCwge1xuICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLCBwZXJpb2Q6IHBlcmlvZFxuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICByZXR1cm4gSW50ZXJ2YWxPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5JbnRlcnZhbE9ic2VydmFibGUgPSBJbnRlcnZhbE9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlcnZhbE9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0ludGVydmFsT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgaXNBcnJheV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0FycmF5Jyk7XG5mdW5jdGlvbiBpc051bWVyaWModmFsKSB7XG4gICAgLy8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXxcIlwiKVxuICAgIC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcbiAgICAvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cbiAgICAvLyBhZGRpbmcgMSBjb3JyZWN0cyBsb3NzIG9mIHByZWNpc2lvbiBmcm9tIHBhcnNlRmxvYXQgKCMxNTEwMClcbiAgICByZXR1cm4gIWlzQXJyYXlfMS5pc0FycmF5KHZhbCkgJiYgKHZhbCAtIHBhcnNlRmxvYXQodmFsKSArIDEpID49IDA7XG59XG5leHBvcnRzLmlzTnVtZXJpYyA9IGlzTnVtZXJpYztcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzTnVtZXJpYy5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvaXNOdW1lcmljLmpzXG4gKiogbW9kdWxlIGlkID0gNDAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBBc3luY1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi9Bc3luY1NjaGVkdWxlcicpO1xuZXhwb3J0cy5hc3luYyA9IG5ldyBBc3luY1NjaGVkdWxlcl8xLkFzeW5jU2NoZWR1bGVyKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luYy5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9hc3luYy5qc1xuICoqIG1vZHVsZSBpZCA9IDQwMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBGdXR1cmVBY3Rpb25fMSA9IHJlcXVpcmUoJy4vRnV0dXJlQWN0aW9uJyk7XG52YXIgUXVldWVTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4vUXVldWVTY2hlZHVsZXInKTtcbnZhciBBc3luY1NjaGVkdWxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFzeW5jU2NoZWR1bGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzeW5jU2NoZWR1bGVyKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgQXN5bmNTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlTm93ID0gZnVuY3Rpb24gKHdvcmssIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnV0dXJlQWN0aW9uXzEuRnV0dXJlQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlLCAwKTtcbiAgICB9O1xuICAgIHJldHVybiBBc3luY1NjaGVkdWxlcjtcbn0oUXVldWVTY2hlZHVsZXJfMS5RdWV1ZVNjaGVkdWxlcikpO1xuZXhwb3J0cy5Bc3luY1NjaGVkdWxlciA9IEFzeW5jU2NoZWR1bGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNTY2hlZHVsZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvQXN5bmNTY2hlZHVsZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgcm9vdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9yb290Jyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRnV0dXJlQWN0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnV0dXJlQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZ1dHVyZUFjdGlvbihzY2hlZHVsZXIsIHdvcmspIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLndvcmsgPSB3b3JrO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgRnV0dXJlQWN0aW9uLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IG5ldyBFcnJvcignZXhlY3V0aW5nIGEgY2FuY2VsbGVkIGFjdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmsodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRnV0dXJlQWN0aW9uLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGUoc3RhdGUsIGRlbGF5KTtcbiAgICB9O1xuICAgIEZ1dHVyZUFjdGlvbi5wcm90b3R5cGUuX3NjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgLy8gQWx3YXlzIHJlcGxhY2UgdGhlIGN1cnJlbnQgc3RhdGUgd2l0aCB0aGUgbmV3IHN0YXRlLlxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIC8vIFNldCB0aGUgcGVuZGluZyBmbGFnIGluZGljYXRpbmcgdGhhdCB0aGlzIGFjdGlvbiBoYXMgYmVlbiBzY2hlZHVsZWQsIG9yXG4gICAgICAgIC8vIGhhcyByZWN1cnNpdmVseSByZXNjaGVkdWxlZCBpdHNlbGYuXG4gICAgICAgIHRoaXMucGVuZGluZyA9IHRydWU7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuaWQ7XG4gICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGhhcyBhbiBpbnRlcnZhbElEIGFuZCB0aGUgc3BlY2lmaWVkIGRlbGF5IG1hdGNoZXMgdGhlXG4gICAgICAgIC8vIGRlbGF5IHdlIHVzZWQgdG8gY3JlYXRlIHRoZSBpbnRlcnZhbElELCBkb24ndCBjYWxsIGBzZXRJbnRlcnZhbGAgYWdhaW4uXG4gICAgICAgIGlmIChpZCAhPSBudWxsICYmIHRoaXMuZGVsYXkgPT09IGRlbGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGhhcyBhbiBpbnRlcnZhbElELCBidXQgd2FzIHJlc2NoZWR1bGVkIHdpdGggYSBkaWZmZXJlbnRcbiAgICAgICAgLy8gYGRlbGF5YCB0aW1lLCBjYW5jZWwgdGhlIGN1cnJlbnQgaW50ZXJ2YWxJRCBhbmQgY2FsbCBgc2V0SW50ZXJ2YWxgIHdpdGhcbiAgICAgICAgLy8gdGhlIG5ldyBgZGVsYXlgIHRpbWUuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gbnVsbDtcbiAgICAgICAgICAgIHJvb3RfMS5yb290LmNsZWFySW50ZXJ2YWwoaWQpO1xuICAgICAgICB9XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEltcG9ydGFudCBpbXBsZW1lbnRhdGlvbiBub3RlOlxuICAgICAgICAvL1xuICAgICAgICAvLyBCeSBkZWZhdWx0LCBGdXR1cmVBY3Rpb24gb25seSBleGVjdXRlcyBvbmNlLiBIb3dldmVyLCBBY3Rpb25zIGhhdmUgdGhlXG4gICAgICAgIC8vIGFiaWxpdHkgdG8gYmUgcmVzY2hlZHVsZWQgZnJvbSB3aXRoaW4gdGhlIHNjaGVkdWxlZCBjYWxsYmFjayAobWltaWNraW5nXG4gICAgICAgIC8vIHJlY3Vyc2lvbiBmb3IgYXN5bmNocm9ub3VzIG1ldGhvZHMpLiBUaGlzIGFsbG93cyB1cyB0byBpbXBsZW1lbnQgc2luZ2xlXG4gICAgICAgIC8vIGFuZCByZXBlYXRlZCBhY3Rpb25zIHdpdGggdGhlIHNhbWUgY29kZSBwYXRoIHdpdGhvdXQgYWRkaW5nIEFQSSBzdXJmYWNlXG4gICAgICAgIC8vIGFyZWEsIGFuZCBpbXBsZW1lbnQgdGFpbC1jYWxsIG9wdGltaXphdGlvbiBvdmVyIGFzeW5jaHJvbm91cyBib3VuZGFyaWVzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBIb3dldmVyLCBKUyBydW50aW1lcyBtYWtlIGEgZGlzdGluY3Rpb24gYmV0d2VlbiBpbnRlcnZhbHMgc2NoZWR1bGVkIGJ5XG4gICAgICAgIC8vIHJlcGVhdGVkbHkgY2FsbGluZyBgc2V0VGltZW91dGAgdnMuIGEgc2luZ2xlIGBzZXRJbnRlcnZhbGAgY2FsbCwgd2l0aFxuICAgICAgICAvLyB0aGUgbGF0dGVyIHByb3ZpZGluZyBhIGJldHRlciBndWFyYW50ZWUgb2YgcHJlY2lzaW9uLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJbiBvcmRlciB0byBhY2NvbW1vZGF0ZSBib3RoIHNpbmdsZSBhbmQgcmVwZWF0ZWRseSByZXNjaGVkdWxlZCBhY3Rpb25zLFxuICAgICAgICAvLyB1c2UgYHNldEludGVydmFsYCBoZXJlIGZvciBib3RoIGNhc2VzLiBCeSBkZWZhdWx0LCB0aGUgaW50ZXJ2YWwgd2lsbCBiZVxuICAgICAgICAvLyBjYW5jZWxlZCBhZnRlciBpdHMgZmlyc3QgZXhlY3V0aW9uLCBvciBpZiB0aGUgYWN0aW9uIHNjaGVkdWxlcyBpdHNlbGYgdG9cbiAgICAgICAgLy8gcnVuIGFnYWluIHdpdGggYSBkaWZmZXJlbnQgYGRlbGF5YCB0aW1lLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB0aGUgYWN0aW9uIHJlY3Vyc2l2ZWx5IHNjaGVkdWxlcyBpdHNlbGYgdG8gcnVuIGFnYWluIHdpdGggdGhlIHNhbWVcbiAgICAgICAgLy8gYGRlbGF5YCB0aW1lLCB0aGUgaW50ZXJ2YWwgaXMgbm90IGNhbmNlbGVkLCBidXQgYWxsb3dlZCB0byBsb29wIGFnYWluLlxuICAgICAgICAvLyBUaGUgY2hlY2sgb2Ygd2hldGhlciB0aGUgaW50ZXJ2YWwgc2hvdWxkIGJlIGNhbmNlbGVkIG9yIG5vdCBpcyBydW4gZXZlcnlcbiAgICAgICAgLy8gdGltZSB0aGUgaW50ZXJ2YWwgaXMgZXhlY3V0ZWQuIFRoZSBmaXJzdCB0aW1lIGFuIGFjdGlvbiBmYWlscyB0b1xuICAgICAgICAvLyByZXNjaGVkdWxlIGl0c2VsZiwgdGhlIGludGVydmFsIGlzIGNhbmNlbGVkLlxuICAgICAgICAvL1xuICAgICAgICB0aGlzLmlkID0gcm9vdF8xLnJvb3Quc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMsIGlkID0gX2EuaWQsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcbiAgICAgICAgICAgIHNjaGVkdWxlci5hY3Rpb25zLnB1c2goX3RoaXMpO1xuICAgICAgICAgICAgc2NoZWR1bGVyLmZsdXNoKCk7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVGVybWluYXRlIHRoaXMgaW50ZXJ2YWwgaWYgdGhlIGFjdGlvbiBkaWRuJ3QgcmVzY2hlZHVsZSBpdHNlbGYuXG4gICAgICAgICAgICAvLyBEb24ndCBjYWxsIGB0aGlzLnVuc3Vic2NyaWJlKClgIGhlcmUsIGJlY2F1c2UgdGhlIGFjdGlvbiBjb3VsZCBiZVxuICAgICAgICAgICAgLy8gcmVzY2hlZHVsZWQgbGF0ZXIuIEZvciBleGFtcGxlOlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIGBgYFxuICAgICAgICAgICAgLy8gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uIGRvV29yayhjb3VudGVyKSB7XG4gICAgICAgICAgICAvLyAgIC8qIC4uLiBJJ20gYSBidXN5IHdvcmtlciBiZWUgLi4uICovXG4gICAgICAgICAgICAvLyAgIHZhciBvcmlnaW5hbEFjdGlvbiA9IHRoaXM7XG4gICAgICAgICAgICAvLyAgIC8qIHdhaXQgMTAwbXMgYmVmb3JlIHJlc2NoZWR1bGluZyB0aGlzIGFjdGlvbiBhZ2FpbiAqL1xuICAgICAgICAgICAgLy8gICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICBvcmlnaW5hbEFjdGlvbi5zY2hlZHVsZShjb3VudGVyICsgMSk7XG4gICAgICAgICAgICAvLyAgIH0sIDEwMCk7XG4gICAgICAgICAgICAvLyB9LCAxMDAwKTtcbiAgICAgICAgICAgIC8vIGBgYFxuICAgICAgICAgICAgaWYgKF90aGlzLnBlbmRpbmcgPT09IGZhbHNlICYmIGlkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgcm9vdF8xLnJvb3QuY2xlYXJJbnRlcnZhbChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBGdXR1cmVBY3Rpb24ucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGlkID0gX2EuaWQsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBzY2hlZHVsZXIuYWN0aW9ucztcbiAgICAgICAgdmFyIGluZGV4ID0gYWN0aW9ucy5pbmRleE9mKHRoaXMpO1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pZCA9IG51bGw7XG4gICAgICAgICAgICByb290XzEucm9vdC5jbGVhckludGVydmFsKGlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53b3JrID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBGdXR1cmVBY3Rpb247XG59KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuZXhwb3J0cy5GdXR1cmVBY3Rpb24gPSBGdXR1cmVBY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GdXR1cmVBY3Rpb24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvRnV0dXJlQWN0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gNDAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBRdWV1ZUFjdGlvbl8xID0gcmVxdWlyZSgnLi9RdWV1ZUFjdGlvbicpO1xudmFyIEZ1dHVyZUFjdGlvbl8xID0gcmVxdWlyZSgnLi9GdXR1cmVBY3Rpb24nKTtcbnZhciBRdWV1ZVNjaGVkdWxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVldWVTY2hlZHVsZXIoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IFtdOyAvLyBYWFg6IHVzZSBgYW55YCB0byByZW1vdmUgdHlwZSBwYXJhbSBgVGAgZnJvbSBgVmlydHVhbFRpbWVTY2hlZHVsZXJgLlxuICAgICAgICB0aGlzLnNjaGVkdWxlZElkID0gbnVsbDtcbiAgICB9XG4gICAgUXVldWVTY2hlZHVsZXIucHJvdG90eXBlLm5vdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIERhdGUubm93KCk7XG4gICAgfTtcbiAgICBRdWV1ZVNjaGVkdWxlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSB8fCB0aGlzLnNjaGVkdWxlZElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcbiAgICAgICAgLy8gWFhYOiB1c2UgYGFueWAgdG8gcmVtb3ZlIHR5cGUgcGFyYW0gYFRgIGZyb20gYFZpcnR1YWxUaW1lU2NoZWR1bGVyYC5cbiAgICAgICAgZm9yICh2YXIgYWN0aW9uID0gbnVsbDsgYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpOykge1xuICAgICAgICAgICAgYWN0aW9uLmV4ZWN1dGUoKTtcbiAgICAgICAgICAgIGlmIChhY3Rpb24uZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRocm93IGFjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH07XG4gICAgUXVldWVTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHdvcmssIGRlbGF5LCBzdGF0ZSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgcmV0dXJuIChkZWxheSA8PSAwKSA/XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlTm93KHdvcmssIHN0YXRlKSA6XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlTGF0ZXIod29yaywgZGVsYXksIHN0YXRlKTtcbiAgICB9O1xuICAgIFF1ZXVlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdyA9IGZ1bmN0aW9uICh3b3JrLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXVlQWN0aW9uXzEuUXVldWVBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUpO1xuICAgIH07XG4gICAgUXVldWVTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlTGF0ZXIgPSBmdW5jdGlvbiAod29yaywgZGVsYXksIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnV0dXJlQWN0aW9uXzEuRnV0dXJlQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlLCBkZWxheSk7XG4gICAgfTtcbiAgICByZXR1cm4gUXVldWVTY2hlZHVsZXI7XG59KCkpO1xuZXhwb3J0cy5RdWV1ZVNjaGVkdWxlciA9IFF1ZXVlU2NoZWR1bGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVldWVTY2hlZHVsZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvUXVldWVTY2hlZHVsZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgRnV0dXJlQWN0aW9uXzEgPSByZXF1aXJlKCcuL0Z1dHVyZUFjdGlvbicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBRdWV1ZUFjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFF1ZXVlQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFF1ZXVlQWN0aW9uKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgUXVldWVBY3Rpb24ucHJvdG90eXBlLl9zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl9zY2hlZHVsZS5jYWxsKHRoaXMsIHN0YXRlLCBkZWxheSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgc2NoZWR1bGVyLmFjdGlvbnMucHVzaCh0aGlzKTtcbiAgICAgICAgc2NoZWR1bGVyLmZsdXNoKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIFF1ZXVlQWN0aW9uO1xufShGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24pKTtcbmV4cG9ydHMuUXVldWVBY3Rpb24gPSBRdWV1ZUFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXVlQWN0aW9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL1F1ZXVlQWN0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gNDA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWVyZ2VfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvbWVyZ2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLm1lcmdlID0gbWVyZ2VfMS5tZXJnZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvbWVyZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG1lcmdlXzEgPSByZXF1aXJlKCcuLi9vcGVyYXRvci9tZXJnZScpO1xuZXhwb3J0cy5tZXJnZSA9IG1lcmdlXzEubWVyZ2VTdGF0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvbWVyZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSA0MDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUnKTtcbnZhciBtZXJnZUFsbF8xID0gcmVxdWlyZSgnLi9tZXJnZUFsbCcpO1xudmFyIGlzU2NoZWR1bGVyXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzU2NoZWR1bGVyJyk7XG4vKipcbiAqIENyZWF0ZXMgYW4gb3V0cHV0IE9ic2VydmFibGUgd2hpY2ggY29uY3VycmVudGx5IGVtaXRzIGFsbCB2YWx1ZXMgZnJvbSBldmVyeVxuICogZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgbXVsdGlwbGUgT2JzZXJ2YWJsZXMgdG9nZXRoZXIgYnkgYmxlbmRpbmdcbiAqIHRoZWlyIHZhbHVlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL21lcmdlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBtZXJnZWAgc3Vic2NyaWJlcyB0byBlYWNoIGdpdmVuIGlucHV0IE9ic2VydmFibGUgKGVpdGhlciB0aGUgc291cmNlIG9yIGFuXG4gKiBPYnNlcnZhYmxlIGdpdmVuIGFzIGFyZ3VtZW50KSwgYW5kIHNpbXBseSBmb3J3YXJkcyAod2l0aG91dCBkb2luZyBhbnlcbiAqIHRyYW5zZm9ybWF0aW9uKSBhbGwgdGhlIHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5wdXQgT2JzZXJ2YWJsZXMgdG8gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIG9ubHkgY29tcGxldGVzIG9uY2UgYWxsIGlucHV0IE9ic2VydmFibGVzXG4gKiBoYXZlIGNvbXBsZXRlZC4gQW55IGVycm9yIGRlbGl2ZXJlZCBieSBhbiBpbnB1dCBPYnNlcnZhYmxlIHdpbGwgYmUgaW1tZWRpYXRlbHlcbiAqIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIHR3byBPYnNlcnZhYmxlczogMXMgaW50ZXJ2YWwgYW5kIGNsaWNrczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgdGltZXIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGNsaWNrc09yVGltZXIgPSBjbGlja3MubWVyZ2UodGltZXIpO1xuICogY2xpY2tzT3JUaW1lci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWVyZ2UgdG9nZXRoZXIgMyBPYnNlcnZhYmxlcywgYnV0IG9ubHkgMiBydW4gY29uY3VycmVudGx5PC9jYXB0aW9uPlxuICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG4gKiB2YXIgdGltZXIyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgyMDAwKS50YWtlKDYpO1xuICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcbiAqIHZhciBjb25jdXJyZW50ID0gMjsgLy8gdGhlIGFyZ3VtZW50XG4gKiB2YXIgbWVyZ2VkID0gdGltZXIxLm1lcmdlKHRpbWVyMiwgdGltZXIzLCBjb25jdXJyZW50KTtcbiAqIG1lcmdlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG4gKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvdGhlciBBbiBpbnB1dCBPYnNlcnZhYmxlIHRvIG1lcmdlIHdpdGggdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3IgbWFuYWdpbmdcbiAqIGNvbmN1cnJlbmN5IG9mIGlucHV0IE9ic2VydmFibGVzLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIHRoYXQgYXJlIHRoZSByZXN1bHQgb2ZcbiAqIGV2ZXJ5IGlucHV0IE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIG1lcmdlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtZXJnZSgpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgb2JzZXJ2YWJsZXMudW5zaGlmdCh0aGlzKTtcbiAgICByZXR1cm4gbWVyZ2VTdGF0aWMuYXBwbHkodGhpcywgb2JzZXJ2YWJsZXMpO1xufVxuZXhwb3J0cy5tZXJnZSA9IG1lcmdlO1xuLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgT2JzZXJ2YWJsZSB3aGljaCBjb25jdXJyZW50bHkgZW1pdHMgYWxsIHZhbHVlcyBmcm9tIGV2ZXJ5XG4gKiBnaXZlbiBpbnB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5GbGF0dGVucyBtdWx0aXBsZSBPYnNlcnZhYmxlcyB0b2dldGhlciBieSBibGVuZGluZ1xuICogdGhlaXIgdmFsdWVzIGludG8gb25lIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWVyZ2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYG1lcmdlYCBzdWJzY3JpYmVzIHRvIGVhY2ggZ2l2ZW4gaW5wdXQgT2JzZXJ2YWJsZSAoYXMgYXJndW1lbnRzKSwgYW5kIHNpbXBseVxuICogZm9yd2FyZHMgKHdpdGhvdXQgZG9pbmcgYW55IHRyYW5zZm9ybWF0aW9uKSBhbGwgdGhlIHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5wdXRcbiAqIE9ic2VydmFibGVzIHRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIG9ubHkgY29tcGxldGVzXG4gKiBvbmNlIGFsbCBpbnB1dCBPYnNlcnZhYmxlcyBoYXZlIGNvbXBsZXRlZC4gQW55IGVycm9yIGRlbGl2ZXJlZCBieSBhbiBpbnB1dFxuICogT2JzZXJ2YWJsZSB3aWxsIGJlIGltbWVkaWF0ZWx5IGVtaXR0ZWQgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1lcmdlIHRvZ2V0aGVyIHR3byBPYnNlcnZhYmxlczogMXMgaW50ZXJ2YWwgYW5kIGNsaWNrczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgdGltZXIgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGNsaWNrc09yVGltZXIgPSBSeC5PYnNlcnZhYmxlLm1lcmdlKGNsaWNrcywgdGltZXIpO1xuICogY2xpY2tzT3JUaW1lci5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWVyZ2UgdG9nZXRoZXIgMyBPYnNlcnZhYmxlcywgYnV0IG9ubHkgMiBydW4gY29uY3VycmVudGx5PC9jYXB0aW9uPlxuICogdmFyIHRpbWVyMSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSgxMCk7XG4gKiB2YXIgdGltZXIyID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgyMDAwKS50YWtlKDYpO1xuICogdmFyIHRpbWVyMyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKS50YWtlKDEwKTtcbiAqIHZhciBjb25jdXJyZW50ID0gMjsgLy8gdGhlIGFyZ3VtZW50XG4gKiB2YXIgbWVyZ2VkID0gUnguT2JzZXJ2YWJsZS5tZXJnZSh0aW1lcjEsIHRpbWVyMiwgdGltZXIzLCBjb25jdXJyZW50KTtcbiAqIG1lcmdlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG4gKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBpbnB1dDEgQW4gaW5wdXQgT2JzZXJ2YWJsZSB0byBtZXJnZSB3aXRoIG90aGVycy5cbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5wdXQyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gbWVyZ2Ugd2l0aCBvdGhlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1udWxsXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3IgbWFuYWdpbmdcbiAqIGNvbmN1cnJlbmN5IG9mIGlucHV0IE9ic2VydmFibGVzLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIHRoYXQgYXJlIHRoZSByZXN1bHQgb2ZcbiAqIGV2ZXJ5IGlucHV0IE9ic2VydmFibGUuXG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIG1lcmdlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtZXJnZVN0YXRpYygpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgdmFyIHNjaGVkdWxlciA9IG51bGw7XG4gICAgdmFyIGxhc3QgPSBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihsYXN0KSkge1xuICAgICAgICBzY2hlZHVsZXIgPSBvYnNlcnZhYmxlcy5wb3AoKTtcbiAgICAgICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uY3VycmVudCA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBsYXN0ID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25jdXJyZW50ID0gb2JzZXJ2YWJsZXMucG9wKCk7XG4gICAgfVxuICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGVzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcywgc2NoZWR1bGVyKS5saWZ0KG5ldyBtZXJnZUFsbF8xLk1lcmdlQWxsT3BlcmF0b3IoY29uY3VycmVudCkpO1xufVxuZXhwb3J0cy5tZXJnZVN0YXRpYyA9IG1lcmdlU3RhdGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9tZXJnZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQwOFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHJhY2VfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3JhY2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnJhY2UgPSByYWNlXzEucmFjZVN0YXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhY2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS9yYWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNDA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNBcnJheScpO1xudmFyIEFycmF5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIGZpcnN0IHNvdXJjZSBPYnNlcnZhYmxlIHRvIGVtaXQgYW4gaXRlbVxuICogZnJvbSB0aGUgY29tYmluYXRpb24gb2YgdGhpcyBPYnNlcnZhYmxlIGFuZCBzdXBwbGllZCBPYnNlcnZhYmxlc1xuICogQHBhcmFtIHsuLi5PYnNlcnZhYmxlc30gLi4ub2JzZXJ2YWJsZXMgc291cmNlcyB1c2VkIHRvIHJhY2UgZm9yIHdoaWNoIE9ic2VydmFibGUgZW1pdHMgZmlyc3QuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgb3V0cHV0IG9mIHRoZSBmaXJzdCBPYnNlcnZhYmxlIHRvIGVtaXQgYW4gaXRlbS5cbiAqIEBtZXRob2QgcmFjZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcmFjZSgpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgLy8gaWYgdGhlIG9ubHkgYXJndW1lbnQgaXMgYW4gYXJyYXksIGl0IHdhcyBtb3N0IGxpa2VseSBjYWxsZWQgd2l0aFxuICAgIC8vIGBwYWlyKFtvYnMxLCBvYnMyLCAuLi5dKWBcbiAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXlfMS5pc0FycmF5KG9ic2VydmFibGVzWzBdKSkge1xuICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuICAgIH1cbiAgICBvYnNlcnZhYmxlcy51bnNoaWZ0KHRoaXMpO1xuICAgIHJldHVybiByYWNlU3RhdGljLmFwcGx5KHRoaXMsIG9ic2VydmFibGVzKTtcbn1cbmV4cG9ydHMucmFjZSA9IHJhY2U7XG5mdW5jdGlvbiByYWNlU3RhdGljKCkge1xuICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgb25seSBhcmd1bWVudCBpcyBhbiBhcnJheSwgaXQgd2FzIG1vc3QgbGlrZWx5IGNhbGxlZCB3aXRoXG4gICAgLy8gYHBhaXIoW29iczEsIG9iczIsIC4uLl0pYFxuICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KG9ic2VydmFibGVzWzBdKSkge1xuICAgICAgICAgICAgb2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlc1swXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYnNlcnZhYmxlc1swXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZShvYnNlcnZhYmxlcykubGlmdChuZXcgUmFjZU9wZXJhdG9yKCkpO1xufVxuZXhwb3J0cy5yYWNlU3RhdGljID0gcmFjZVN0YXRpYztcbnZhciBSYWNlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJhY2VPcGVyYXRvcigpIHtcbiAgICB9XG4gICAgUmFjZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJhY2VTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBSYWNlT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5SYWNlT3BlcmF0b3IgPSBSYWNlT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFJhY2VTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmFjZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmFjZVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmhhc0ZpcnN0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBbXTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgfVxuICAgIFJhY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlKTtcbiAgICB9O1xuICAgIFJhY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IHRoaXMub2JzZXJ2YWJsZXM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG9ic2VydmFibGVzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9ic2VydmFibGUsIG9ic2VydmFibGUsIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBpZiAoIXRoaXMuaGFzRmlyc3QpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzRmlyc3QgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gb3V0ZXJJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb25zW2ldO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIHJldHVybiBSYWNlU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG5leHBvcnRzLlJhY2VTdWJzY3JpYmVyID0gUmFjZVN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcmFjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG5ldmVyXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL25ldmVyJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5uZXZlciA9IG5ldmVyXzEubmV2ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL25ldmVyLmpzXG4gKiogbW9kdWxlIGlkID0gNDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBOZXZlck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vTmV2ZXJPYnNlcnZhYmxlJyk7XG5leHBvcnRzLm5ldmVyID0gTmV2ZXJPYnNlcnZhYmxlXzEuTmV2ZXJPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9uZXZlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgbm9vcF8xID0gcmVxdWlyZSgnLi4vdXRpbC9ub29wJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIE5ldmVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE5ldmVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBOZXZlck9ic2VydmFibGUoKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBubyBpdGVtcyB0byB0aGUgT2JzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+QW4gT2JzZXJ2YWJsZSB0aGF0IG5ldmVyIGVtaXRzIGFueXRoaW5nLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvbmV2ZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBUaGlzIHN0YXRpYyBvcGVyYXRvciBpcyB1c2VmdWwgZm9yIGNyZWF0aW5nIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBlbWl0c1xuICAgICAqIG5laXRoZXIgdmFsdWVzIG5vciBlcnJvcnMgbm9yIHRoZSBjb21wbGV0aW9uIG5vdGlmaWNhdGlvbi4gSXQgY2FuIGJlIHVzZWRcbiAgICAgKiBmb3IgdGVzdGluZyBwdXJwb3NlcyBvciBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMuIFBsZWFzZSBub3RcbiAgICAgKiB0aGF0IGJ5IG5ldmVyIGVtaXR0aW5nIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLCB0aGlzIE9ic2VydmFibGUga2VlcHMgdGhlXG4gICAgICogc3Vic2NyaXB0aW9uIGZyb20gYmVpbmcgZGlzcG9zZWQgYXV0b21hdGljYWxseS4gU3Vic2NyaXB0aW9ucyBuZWVkIHRvIGJlXG4gICAgICogbWFudWFsbHkgZGlzcG9zZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBuZXZlciBlbWl0IGFueXRoaW5nIGVsc2UgKG5vdCBldmVuIGNvbXBsZXRlKS48L2NhcHRpb24+XG4gICAgICogZnVuY3Rpb24gaW5mbygpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKCdXaWxsIG5vdCBiZSBjYWxsZWQnKTtcbiAgICAgKiB9XG4gICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUubmV2ZXIoKS5zdGFydFdpdGgoNyk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBpbmZvLCBpbmZvKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cbiAgICAgKiBAc2VlIHtAbGluayBlbXB0eX1cbiAgICAgKiBAc2VlIHtAbGluayBvZn1cbiAgICAgKiBAc2VlIHtAbGluayB0aHJvd31cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IEEgXCJuZXZlclwiIE9ic2VydmFibGU6IG5ldmVyIGVtaXRzIGFueXRoaW5nLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIG5ldmVyXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBOZXZlck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IE5ldmVyT2JzZXJ2YWJsZSgpO1xuICAgIH07XG4gICAgTmV2ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgbm9vcF8xLm5vb3AoKTtcbiAgICB9O1xuICAgIHJldHVybiBOZXZlck9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLk5ldmVyT2JzZXJ2YWJsZSA9IE5ldmVyT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5ldmVyT2JzZXJ2YWJsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvTmV2ZXJPYnNlcnZhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gNDEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbi8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5ICovXG5mdW5jdGlvbiBub29wKCkgeyB9XG5leHBvcnRzLm5vb3AgPSBub29wO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9vcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvbm9vcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG9mXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL29mJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5vZiA9IG9mXzEub2Y7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vZi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL29mLmpzXG4gKiogbW9kdWxlIGlkID0gNDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vQXJyYXlPYnNlcnZhYmxlJyk7XG5leHBvcnRzLm9mID0gQXJyYXlPYnNlcnZhYmxlXzEuQXJyYXlPYnNlcnZhYmxlLm9mO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2YuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL29mLmpzXG4gKiogbW9kdWxlIGlkID0gNDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcmFuZ2VfMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvcmFuZ2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnJhbmdlID0gcmFuZ2VfMS5yYW5nZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhbmdlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvcmFuZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSA0MTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFJhbmdlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9SYW5nZU9ic2VydmFibGUnKTtcbmV4cG9ydHMucmFuZ2UgPSBSYW5nZU9ic2VydmFibGVfMS5SYW5nZU9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZ2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL3JhbmdlLmpzXG4gKiogbW9kdWxlIGlkID0gNDE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgUmFuZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmFuZ2VPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLl9jb3VudCA9IGNvdW50O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzZXF1ZW5jZSBvZiBudW1iZXJzIHdpdGhpbiBhIHNwZWNpZmllZFxuICAgICAqIHJhbmdlLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIGEgc2VxdWVuY2Ugb2YgbnVtYmVycyBpbiBhIHJhbmdlLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvcmFuZ2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBgcmFuZ2VgIG9wZXJhdG9yIGVtaXRzIGEgcmFuZ2Ugb2Ygc2VxdWVudGlhbCBpbnRlZ2VycywgaW4gb3JkZXIsIHdoZXJlIHlvdVxuICAgICAqIHNlbGVjdCB0aGUgYHN0YXJ0YCBvZiB0aGUgcmFuZ2UgYW5kIGl0cyBgbGVuZ3RoYC4gQnkgZGVmYXVsdCwgdXNlcyBub1xuICAgICAqIFNjaGVkdWxlciBhbmQganVzdCBkZWxpdmVycyB0aGUgbm90aWZpY2F0aW9ucyBzeW5jaHJvbm91c2x5LCBidXQgbWF5IHVzZVxuICAgICAqIGFuIG9wdGlvbmFsIFNjaGVkdWxlciB0byByZWd1bGF0ZSB0aG9zZSBkZWxpdmVyaWVzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgdGhlIG51bWJlcnMgMSB0byAxMDwvY2FwdGlvbj5cbiAgICAgKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgMTApO1xuICAgICAqIG51bWJlcnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgdGltZXJ9XG4gICAgICogQHNlZSB7QGxpbmsgaW50ZXJ2YWx9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PTBdIFRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgaW50ZWdlciBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjb3VudD0wXSBUaGUgbnVtYmVyIG9mIHNlcXVlbnRpYWwgaW50ZWdlcnMgdG8gZ2VuZXJhdGUuXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIFNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9ucyBvZiB0aGUgbm90aWZpY2F0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIG51bWJlcnMgdGhhdCBlbWl0cyBhIGZpbml0ZSByYW5nZSBvZlxuICAgICAqIHNlcXVlbnRpYWwgaW50ZWdlcnMuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgcmFuZ2VcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIFJhbmdlT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsgc3RhcnQgPSAwOyB9XG4gICAgICAgIGlmIChjb3VudCA9PT0gdm9pZCAwKSB7IGNvdW50ID0gMDsgfVxuICAgICAgICByZXR1cm4gbmV3IFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBSYW5nZU9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gc3RhdGUuc3RhcnQsIGluZGV4ID0gc3RhdGUuaW5kZXgsIGNvdW50ID0gc3RhdGUuY291bnQsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoaW5kZXggPj0gY291bnQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLm5leHQoc3RhcnQpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBzdGF0ZS5zdGFydCA9IHN0YXJ0ICsgMTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBSYW5nZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0O1xuICAgICAgICB2YXIgY291bnQgPSB0aGlzLl9jb3VudDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFJhbmdlT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCwgY291bnQ6IGNvdW50LCBzdGFydDogc3RhcnQsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCsrID49IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChzdGFydCsrKTtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJhbmdlT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuUmFuZ2VPYnNlcnZhYmxlID0gUmFuZ2VPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmFuZ2VPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9SYW5nZU9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aHJvd18xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS90aHJvdycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUudGhyb3cgPSB0aHJvd18xLl90aHJvdztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29ic2VydmFibGUvdGhyb3cuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEVycm9yT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FcnJvck9ic2VydmFibGUnKTtcbmV4cG9ydHMuX3Rocm93ID0gRXJyb3JPYnNlcnZhYmxlXzEuRXJyb3JPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS90aHJvdy5qc1xuICoqIG1vZHVsZSBpZCA9IDQyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEVycm9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVycm9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFcnJvck9ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuICAgICAqIGVtaXRzIGFuIGVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5KdXN0IGVtaXRzICdlcnJvcicsIGFuZCBub3RoaW5nIGVsc2UuXG4gICAgICogPC9zcGFuPlxuICAgICAqXG4gICAgICogPGltZyBzcmM9XCIuL2ltZy90aHJvdy5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcbiAgICAgKiBlbWl0cyB0aGUgZXJyb3Igbm90aWZpY2F0aW9uLiBJdCBjYW4gYmUgdXNlZCBmb3IgY29tcG9zaW5nIHdpdGggb3RoZXJcbiAgICAgKiBPYnNlcnZhYmxlcywgc3VjaCBhcyBpbiBhIHtAbGluayBtZXJnZU1hcH0uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0IHRoZSBudW1iZXIgNywgdGhlbiBlbWl0IGFuIGVycm9yLjwvY2FwdGlvbj5cbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS50aHJvdyhuZXcgRXJyb3IoJ29vcHMhJykpLnN0YXJ0V2l0aCg3KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW5zIG51bWJlcnMgdG8gdGhlIHNlcXVlbmNlICdhJywgJ2InLCAnYycsIGJ1dCB0aHJvdyBhbiBlcnJvciBmb3IgMTM8L2NhcHRpb24+XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuICAgICAqICAgeCA9PT0gMTMgP1xuICAgICAqICAgICBSeC5PYnNlcnZhYmxlLnRocm93KCdUaGlydGVlbnMgYXJlIGJhZCcpIDpcbiAgICAgKiAgICAgUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKVxuICAgICAqICk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIGVtcHR5fVxuICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuICAgICAqIEBzZWUge0BsaW5rIG9mfVxuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IGVycm9yIFRoZSBwYXJ0aWN1bGFyIEVycm9yIHRvIHBhc3MgdG8gdGhlIGVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcbiAgICAgKiB0aGUgZW1pc3Npb24gb2YgdGhlIGVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBlcnJvciBPYnNlcnZhYmxlOiBlbWl0cyBvbmx5IHRoZSBlcnJvciBub3RpZmljYXRpb25cbiAgICAgKiB1c2luZyB0aGUgZ2l2ZW4gZXJyb3IgYXJndW1lbnQuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgdGhyb3dcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEVycm9yT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEVycm9yT2JzZXJ2YWJsZShlcnJvciwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIEVycm9yT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdmFyIGVycm9yID0gYXJnLmVycm9yLCBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7XG4gICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpO1xuICAgIH07XG4gICAgRXJyb3JPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGVycm9yID0gdGhpcy5lcnJvcjtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEVycm9yT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEVycm9yT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRXJyb3JPYnNlcnZhYmxlID0gRXJyb3JPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXJyb3JPYnNlcnZhYmxlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS9FcnJvck9ic2VydmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aW1lcl8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS90aW1lcicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUudGltZXIgPSB0aW1lcl8xLnRpbWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb2JzZXJ2YWJsZS90aW1lci5qc1xuICoqIG1vZHVsZSBpZCA9IDQyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgVGltZXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1RpbWVyT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy50aW1lciA9IFRpbWVyT2JzZXJ2YWJsZV8xLlRpbWVyT2JzZXJ2YWJsZS5jcmVhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29ic2VydmFibGUvdGltZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgaXNOdW1lcmljXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzTnVtZXJpYycpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbnZhciBpc0RhdGVfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNEYXRlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIFRpbWVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbWVyT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaW1lck9ic2VydmFibGUoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGR1ZVRpbWUgPT09IHZvaWQgMCkgeyBkdWVUaW1lID0gMDsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5wZXJpb2QgPSAtMTtcbiAgICAgICAgdGhpcy5kdWVUaW1lID0gMDtcbiAgICAgICAgaWYgKGlzTnVtZXJpY18xLmlzTnVtZXJpYyhwZXJpb2QpKSB7XG4gICAgICAgICAgICB0aGlzLnBlcmlvZCA9IE51bWJlcihwZXJpb2QpIDwgMSAmJiAxIHx8IE51bWJlcihwZXJpb2QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzU2NoZWR1bGVyXzEuaXNTY2hlZHVsZXIocGVyaW9kKSkge1xuICAgICAgICAgICAgc2NoZWR1bGVyID0gcGVyaW9kO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG4gICAgICAgICAgICBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmR1ZVRpbWUgPSBpc0RhdGVfMS5pc0RhdGUoZHVlVGltZSkgP1xuICAgICAgICAgICAgKCtkdWVUaW1lIC0gdGhpcy5zY2hlZHVsZXIubm93KCkpIDpcbiAgICAgICAgICAgIGR1ZVRpbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IHN0YXJ0cyBlbWl0dGluZyBhZnRlciBhbiBgaW5pdGlhbERlbGF5YCBhbmRcbiAgICAgKiBlbWl0cyBldmVyIGluY3JlYXNpbmcgbnVtYmVycyBhZnRlciBlYWNoIGBwZXJpb2RgIG9mIHRpbWUgdGhlcmVhZnRlci5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdHMgbGlrZSB7QGxpbmsgaW50ZXJ2YWx9LCBidXQgeW91IGNhbiBzcGVjaWZ5IHdoZW5cbiAgICAgKiBzaG91bGQgdGhlIGVtaXNzaW9ucyBzdGFydC48L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL3RpbWVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogYHRpbWVyYCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbiBpbmZpbml0ZSBzZXF1ZW5jZSBvZiBhc2NlbmRpbmdcbiAgICAgKiBpbnRlZ2Vycywgd2l0aCBhIGNvbnN0YW50IGludGVydmFsIG9mIHRpbWUsIGBwZXJpb2RgIG9mIHlvdXIgY2hvb3NpbmdcbiAgICAgKiBiZXR3ZWVuIHRob3NlIGVtaXNzaW9ucy4gVGhlIGZpcnN0IGVtaXNzaW9uIGhhcHBlbnMgYWZ0ZXIgdGhlIHNwZWNpZmllZFxuICAgICAqIGBpbml0aWFsRGVsYXlgLiBUaGUgaW5pdGlhbCBkZWxheSBtYXkgYmUgYSB7QGxpbmsgRGF0ZX0uIEJ5IGRlZmF1bHQsIHRoaXNcbiAgICAgKiBvcGVyYXRvciB1c2VzIHRoZSBgYXN5bmNgIFNjaGVkdWxlciB0byBwcm92aWRlIGEgbm90aW9uIG9mIHRpbWUsIGJ1dCB5b3VcbiAgICAgKiBtYXkgcGFzcyBhbnkgU2NoZWR1bGVyIHRvIGl0LiBJZiBgcGVyaW9kYCBpcyBub3Qgc3BlY2lmaWVkLCB0aGUgb3V0cHV0XG4gICAgICogT2JzZXJ2YWJsZSBlbWl0cyBvbmx5IG9uZSB2YWx1ZSwgYDBgLiBPdGhlcndpc2UsIGl0IGVtaXRzIGFuIGluZmluaXRlXG4gICAgICogc2VxdWVuY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBhc2NlbmRpbmcgbnVtYmVycywgb25lIGV2ZXJ5IHNlY29uZCAoMTAwMG1zKSwgc3RhcnRpbmcgYWZ0ZXIgMyBzZWNvbmRzPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS50aW1lcigzMDAwLCAxMDAwKTtcbiAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIG9uZSBudW1iZXIgYWZ0ZXIgZml2ZSBzZWNvbmRzPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS50aW1lcig1MDAwKTtcbiAgICAgKiBudW1iZXJzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGludGVydmFsfVxuICAgICAqIEBzZWUge0BsaW5rIGRlbGF5fVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8RGF0ZX0gaW5pdGlhbERlbGF5IFRoZSBpbml0aWFsIGRlbGF5IHRpbWUgdG8gd2FpdCBiZWZvcmVcbiAgICAgKiBlbWl0dGluZyB0aGUgZmlyc3QgdmFsdWUgb2YgYDBgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcGVyaW9kXSBUaGUgcGVyaW9kIG9mIHRpbWUgYmV0d2VlbiBlbWlzc2lvbnMgb2YgdGhlXG4gICAgICogc3Vic2VxdWVudCBudW1iZXJzLlxuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuICAgICAqIHRoZSBlbWlzc2lvbiBvZiB2YWx1ZXMsIGFuZCBwcm92aWRpbmcgYSBub3Rpb24gb2YgXCJ0aW1lXCIuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGEgYDBgIGFmdGVyIHRoZVxuICAgICAqIGBpbml0aWFsRGVsYXlgIGFuZCBldmVyIGluY3JlYXNpbmcgbnVtYmVycyBhZnRlciBlYWNoIGBwZXJpb2RgIG9mIHRpbWVcbiAgICAgKiB0aGVyZWFmdGVyLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIHRpbWVyXG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBUaW1lck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGluaXRpYWxEZWxheSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGluaXRpYWxEZWxheSA9PT0gdm9pZCAwKSB7IGluaXRpYWxEZWxheSA9IDA7IH1cbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lck9ic2VydmFibGUoaW5pdGlhbERlbGF5LCBwZXJpb2QsIHNjaGVkdWxlcik7XG4gICAgfTtcbiAgICBUaW1lck9ic2VydmFibGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gc3RhdGUuaW5kZXgsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZCwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5kZXgpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBlcmlvZCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgcGVyaW9kKTtcbiAgICB9O1xuICAgIFRpbWVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHBlcmlvZCA9IF9hLnBlcmlvZCwgZHVlVGltZSA9IF9hLmR1ZVRpbWUsIHNjaGVkdWxlciA9IF9hLnNjaGVkdWxlcjtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShUaW1lck9ic2VydmFibGUuZGlzcGF0Y2gsIGR1ZVRpbWUsIHtcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCwgcGVyaW9kOiBwZXJpb2QsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGltZXJPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5UaW1lck9ic2VydmFibGUgPSBUaW1lck9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaW1lck9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL1RpbWVyT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTigrdmFsdWUpO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0RhdGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL2lzRGF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHppcF8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS96aXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnppcCA9IHppcF8xLnppcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vYnNlcnZhYmxlL3ppcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgemlwXzEgPSByZXF1aXJlKCcuLi9vcGVyYXRvci96aXAnKTtcbmV4cG9ydHMuemlwID0gemlwXzEuemlwU3RhdGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb2JzZXJ2YWJsZS96aXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZScpO1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNBcnJheScpO1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xuLyoqXG4gKiBAcGFyYW0gb2JzZXJ2YWJsZXNcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59XG4gKiBAbWV0aG9kIHppcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gemlwUHJvdG8oKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIG9ic2VydmFibGVzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIHppcFN0YXRpYy5hcHBseSh0aGlzLCBvYnNlcnZhYmxlcyk7XG59XG5leHBvcnRzLnppcFByb3RvID0gemlwUHJvdG87XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBAcGFyYW0gb2JzZXJ2YWJsZXNcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59XG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIHppcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gemlwU3RhdGljKCkge1xuICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIG9ic2VydmFibGVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgcHJvamVjdCA9IG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdO1xuICAgIGlmICh0eXBlb2YgcHJvamVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvYnNlcnZhYmxlcy5wb3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUob2JzZXJ2YWJsZXMpLmxpZnQobmV3IFppcE9wZXJhdG9yKHByb2plY3QpKTtcbn1cbmV4cG9ydHMuemlwU3RhdGljID0gemlwU3RhdGljO1xudmFyIFppcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBaaXBPcGVyYXRvcihwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgfVxuICAgIFppcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFppcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gWmlwT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5aaXBPcGVyYXRvciA9IFppcE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBaaXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoWmlwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBaaXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHZhbHVlcyA9PT0gdm9pZCAwKSB7IHZhbHVlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5pdGVyYXRvcnMgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICB0aGlzLnByb2plY3QgPSAodHlwZW9mIHByb2plY3QgPT09ICdmdW5jdGlvbicpID8gcHJvamVjdCA6IG51bGw7XG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgIH1cbiAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaXRlcmF0b3JzID0gdGhpcy5pdGVyYXRvcnM7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgaWYgKGlzQXJyYXlfMS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFN0YXRpY0FycmF5SXRlcmF0b3IodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVbaXRlcmF0b3JfMS4kJGl0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFN0YXRpY0l0ZXJhdG9yKHZhbHVlW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0oKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFppcEJ1ZmZlckl0ZXJhdG9yKHRoaXMuZGVzdGluYXRpb24sIHRoaXMsIHZhbHVlLCBpbmRleCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcbiAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gbGVuO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICBpZiAoaXRlcmF0b3Iuc3RpbGxVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChpdGVyYXRvci5zdWJzY3JpYmUoaXRlcmF0b3IsIGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlLS07IC8vIG5vdCBhbiBvYnNlcnZhYmxlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuY2hlY2tJdGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcbiAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIC8vIGFib3J0IGlmIG5vdCBhbGwgb2YgdGhlbSBoYXZlIHZhbHVlc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yLmhhc1ZhbHVlID09PSAnZnVuY3Rpb24nICYmICFpdGVyYXRvci5oYXNWYWx1ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzaG91bGRDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIGl0J3MgY29tcGxldGVkIG5vdyB0aGF0IHlvdSd2ZSBnb3R0ZW5cbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmhhc0NvbXBsZXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzLnB1c2gocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG4gICAgICAgICAgICB0aGlzLl90cnlQcm9qZWN0KGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkQ29tcGxldGUpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcm9qZWN0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICByZXR1cm4gWmlwU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuWmlwU3Vic2NyaWJlciA9IFppcFN1YnNjcmliZXI7XG52YXIgU3RhdGljSXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRpY0l0ZXJhdG9yKGl0ZXJhdG9yKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdGVyYXRvcjtcbiAgICAgICAgdGhpcy5uZXh0UmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgIH1cbiAgICBTdGF0aWNJdGVyYXRvci5wcm90b3R5cGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm5leHRSZXN1bHQ7XG4gICAgICAgIHRoaXMubmV4dFJlc3VsdCA9IHRoaXMuaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLmhhc0NvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5leHRSZXN1bHQgPSB0aGlzLm5leHRSZXN1bHQ7XG4gICAgICAgIHJldHVybiBuZXh0UmVzdWx0ICYmIG5leHRSZXN1bHQuZG9uZTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0aWNJdGVyYXRvcjtcbn0oKSk7XG52YXIgU3RhdGljQXJyYXlJdGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGljQXJyYXlJdGVyYXRvcihhcnJheSkge1xuICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgIH1cbiAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLiQkaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXk7XG4gICAgICAgIHJldHVybiBpIDwgdGhpcy5sZW5ndGggPyB7IHZhbHVlOiBhcnJheVtpXSwgZG9uZTogZmFsc2UgfSA6IHsgZG9uZTogdHJ1ZSB9O1xuICAgIH07XG4gICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5Lmxlbmd0aCA+IHRoaXMuaW5kZXg7XG4gICAgfTtcbiAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5Lmxlbmd0aCA9PT0gdGhpcy5pbmRleDtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0aWNBcnJheUl0ZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgWmlwQnVmZmVySXRlcmF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhaaXBCdWZmZXJJdGVyYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBaaXBCdWZmZXJJdGVyYXRvcihkZXN0aW5hdGlvbiwgcGFyZW50LCBvYnNlcnZhYmxlLCBpbmRleCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuc3RpbGxVbnN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSBmYWxzZTtcbiAgICB9XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlW2l0ZXJhdG9yXzEuJCRpdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLy8gTk9URTogdGhlcmUgaXMgYWN0dWFsbHkgYSBuYW1lIGNvbGxpc2lvbiBoZXJlIHdpdGggU3Vic2NyaWJlci5uZXh0IGFuZCBJdGVyYXRvci5uZXh0XG4gICAgLy8gICAgdGhpcyBpcyBsZWdpdCBiZWNhdXNlIGBuZXh0KClgIHdpbGwgbmV2ZXIgYmUgY2FsbGVkIGJ5IGEgc3Vic2NyaXB0aW9uIGluIHRoaXMgY2FzZS5cbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmlzQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBidWZmZXIuc2hpZnQoKSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoID4gMDtcbiAgICB9O1xuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDAgJiYgdGhpcy5pc0NvbXBsZXRlO1xuICAgIH07XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUluYWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyLnB1c2goaW5uZXJWYWx1ZSk7XG4gICAgICAgIHRoaXMucGFyZW50LmNoZWNrSXRlcmF0b3JzKCk7XG4gICAgfTtcbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB0aGlzLm9ic2VydmFibGUsIHRoaXMsIGluZGV4KTtcbiAgICB9O1xuICAgIHJldHVybiBaaXBCdWZmZXJJdGVyYXRvcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD16aXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci96aXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0MjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBidWZmZXJfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2J1ZmZlcicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlciA9IGJ1ZmZlcl8xLmJ1ZmZlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBCdWZmZXJzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgdW50aWwgYGNsb3NpbmdOb3RpZmllcmAgZW1pdHMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcbiAqIHRoYXQgYXJyYXkgb25seSB3aGVuIGFub3RoZXIgT2JzZXJ2YWJsZSBlbWl0cy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXIucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQnVmZmVycyB0aGUgaW5jb21pbmcgT2JzZXJ2YWJsZSB2YWx1ZXMgdW50aWwgdGhlIGdpdmVuIGBjbG9zaW5nTm90aWZpZXJgXG4gKiBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUsIGF0IHdoaWNoIHBvaW50IGl0IGVtaXRzIHRoZSBidWZmZXIgb24gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZSBhbmQgc3RhcnRzIGEgbmV3IGJ1ZmZlciBpbnRlcm5hbGx5LCBhd2FpdGluZyB0aGUgbmV4dCB0aW1lXG4gKiBgY2xvc2luZ05vdGlmaWVyYCBlbWl0cy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5PbiBldmVyeSBjbGljaywgZW1pdCBhcnJheSBvZiBtb3N0IHJlY2VudCBpbnRlcnZhbCBldmVudHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciBidWZmZXJlZCA9IGludGVydmFsLmJ1ZmZlcihjbGlja3MpO1xuICogYnVmZmVyZWQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlPGFueT59IGNsb3NpbmdOb3RpZmllciBBbiBPYnNlcnZhYmxlIHRoYXQgc2lnbmFscyB0aGVcbiAqIGJ1ZmZlciB0byBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gT2JzZXJ2YWJsZSBvZiBidWZmZXJzLCB3aGljaCBhcmUgYXJyYXlzIG9mXG4gKiB2YWx1ZXMuXG4gKiBAbWV0aG9kIGJ1ZmZlclxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gYnVmZmVyKGNsb3NpbmdOb3RpZmllcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IEJ1ZmZlck9wZXJhdG9yKGNsb3NpbmdOb3RpZmllcikpO1xufVxuZXhwb3J0cy5idWZmZXIgPSBidWZmZXI7XG52YXIgQnVmZmVyT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJ1ZmZlck9wZXJhdG9yKGNsb3NpbmdOb3RpZmllcikge1xuICAgICAgICB0aGlzLmNsb3NpbmdOb3RpZmllciA9IGNsb3NpbmdOb3RpZmllcjtcbiAgICB9XG4gICAgQnVmZmVyT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdOb3RpZmllcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlck9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQnVmZmVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJ1ZmZlclN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQnVmZmVyU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY2xvc2luZ05vdGlmaWVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBjbG9zaW5nTm90aWZpZXIpKTtcbiAgICB9XG4gICAgQnVmZmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgfTtcbiAgICBCdWZmZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGJ1ZmZlcik7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9idWZmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBidWZmZXJDb3VudF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYnVmZmVyQ291bnQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJDb3VudCA9IGJ1ZmZlckNvdW50XzEuYnVmZmVyQ291bnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJDb3VudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXJDb3VudC5qc1xuICoqIG1vZHVsZSBpZCA9IDQzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIEJ1ZmZlcnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyB1bnRpbCB0aGUgc2l6ZSBoaXRzIHRoZSBtYXhpbXVtXG4gKiBgYnVmZmVyU2l6ZWAgZ2l2ZW4uXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbGxlY3RzIHZhbHVlcyBmcm9tIHRoZSBwYXN0IGFzIGFuIGFycmF5LCBhbmQgZW1pdHNcbiAqIHRoYXQgYXJyYXkgb25seSB3aGVuIGl0cyBzaXplIHJlYWNoZXMgYGJ1ZmZlclNpemVgLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2J1ZmZlckNvdW50LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEJ1ZmZlcnMgYSBudW1iZXIgb2YgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGBidWZmZXJTaXplYCB0aGVuXG4gKiBlbWl0cyB0aGUgYnVmZmVyIGFuZCBjbGVhcnMgaXQsIGFuZCBzdGFydHMgYSBuZXcgYnVmZmVyIGVhY2hcbiAqIGBzdGFydEJ1ZmZlckV2ZXJ5YCB2YWx1ZXMuIElmIGBzdGFydEJ1ZmZlckV2ZXJ5YCBpcyBub3QgcHJvdmlkZWQgb3IgaXNcbiAqIGBudWxsYCwgdGhlbiBuZXcgYnVmZmVycyBhcmUgc3RhcnRlZCBpbW1lZGlhdGVseSBhdCB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZVxuICogYW5kIHdoZW4gZWFjaCBidWZmZXIgY2xvc2VzIGFuZCBpcyBlbWl0dGVkLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIGxhc3QgdHdvIGNsaWNrIGV2ZW50cyBhcyBhbiBhcnJheTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgYnVmZmVyZWQgPSBjbGlja3MuYnVmZmVyQ291bnQoMik7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+T24gZXZlcnkgY2xpY2ssIGVtaXQgdGhlIGxhc3QgdHdvIGNsaWNrIGV2ZW50cyBhcyBhbiBhcnJheTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgYnVmZmVyZWQgPSBjbGlja3MuYnVmZmVyQ291bnQoMiwgMSk7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYnVmZmVyfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlclRvZ2dsZX1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcldoZW59XG4gKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyU2l6ZSBUaGUgbWF4aW11bSBzaXplIG9mIHRoZSBidWZmZXIgZW1pdHRlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnRCdWZmZXJFdmVyeV0gSW50ZXJ2YWwgYXQgd2hpY2ggdG8gc3RhcnQgYSBuZXcgYnVmZmVyLlxuICogRm9yIGV4YW1wbGUgaWYgYHN0YXJ0QnVmZmVyRXZlcnlgIGlzIGAyYCwgdGhlbiBhIG5ldyBidWZmZXIgd2lsbCBiZSBzdGFydGVkXG4gKiBvbiBldmVyeSBvdGhlciB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuIEEgbmV3IGJ1ZmZlciBpcyBzdGFydGVkIGF0IHRoZVxuICogYmVnaW5uaW5nIG9mIHRoZSBzb3VyY2UgYnkgZGVmYXVsdC5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gT2JzZXJ2YWJsZSBvZiBhcnJheXMgb2YgYnVmZmVyZWQgdmFsdWVzLlxuICogQG1ldGhvZCBidWZmZXJDb3VudFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gYnVmZmVyQ291bnQoYnVmZmVyU2l6ZSwgc3RhcnRCdWZmZXJFdmVyeSkge1xuICAgIGlmIChzdGFydEJ1ZmZlckV2ZXJ5ID09PSB2b2lkIDApIHsgc3RhcnRCdWZmZXJFdmVyeSA9IG51bGw7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJDb3VudE9wZXJhdG9yKGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpKTtcbn1cbmV4cG9ydHMuYnVmZmVyQ291bnQgPSBidWZmZXJDb3VudDtcbnZhciBCdWZmZXJDb3VudE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdWZmZXJDb3VudE9wZXJhdG9yKGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpIHtcbiAgICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZTtcbiAgICAgICAgdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5ID0gc3RhcnRCdWZmZXJFdmVyeTtcbiAgICB9XG4gICAgQnVmZmVyQ291bnRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5idWZmZXJTaXplLCB0aGlzLnN0YXJ0QnVmZmVyRXZlcnkpKTtcbiAgICB9O1xuICAgIHJldHVybiBCdWZmZXJDb3VudE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQnVmZmVyQ291bnRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQnVmZmVyQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEJ1ZmZlckNvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYnVmZmVyU2l6ZSwgc3RhcnRCdWZmZXJFdmVyeSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG4gICAgICAgIHRoaXMuc3RhcnRCdWZmZXJFdmVyeSA9IHN0YXJ0QnVmZmVyRXZlcnk7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IFtbXV07XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbiAgICBCdWZmZXJDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBjb3VudCA9ICh0aGlzLmNvdW50ICs9IDEpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICB2YXIgYnVmZmVyU2l6ZSA9IHRoaXMuYnVmZmVyU2l6ZTtcbiAgICAgICAgdmFyIHN0YXJ0QnVmZmVyRXZlcnkgPSAodGhpcy5zdGFydEJ1ZmZlckV2ZXJ5ID09IG51bGwpID8gYnVmZmVyU2l6ZSA6IHRoaXMuc3RhcnRCdWZmZXJFdmVyeTtcbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSB0aGlzLmJ1ZmZlcnM7XG4gICAgICAgIHZhciBsZW4gPSBidWZmZXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlbW92ZSA9IC0xO1xuICAgICAgICBpZiAoY291bnQgJSBzdGFydEJ1ZmZlckV2ZXJ5ID09PSAwKSB7XG4gICAgICAgICAgICBidWZmZXJzLnB1c2goW10pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBidWZmZXIgPSBidWZmZXJzW2ldO1xuICAgICAgICAgICAgYnVmZmVyLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICByZW1vdmUgPSBpO1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZlICE9PSAtMSkge1xuICAgICAgICAgICAgYnVmZmVycy5zcGxpY2UocmVtb3ZlLCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQnVmZmVyQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciBidWZmZXJzID0gdGhpcy5idWZmZXJzO1xuICAgICAgICB3aGlsZSAoYnVmZmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVycy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyQ291bnRTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyQ291bnQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9idWZmZXJDb3VudC5qc1xuICoqIG1vZHVsZSBpZCA9IDQzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGJ1ZmZlclRpbWVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2J1ZmZlclRpbWUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJUaW1lID0gYnVmZmVyVGltZV8xLmJ1ZmZlclRpbWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlclRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbi8qKlxuICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGZvciBhIHNwZWNpZmljIHRpbWUgcGVyaW9kLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db2xsZWN0cyB2YWx1ZXMgZnJvbSB0aGUgcGFzdCBhcyBhbiBhcnJheSwgYW5kIGVtaXRzXG4gKiB0aG9zZSBhcnJheXMgcGVyaW9kaWNhbGx5IGluIHRpbWUuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvYnVmZmVyVGltZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBCdWZmZXJzIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2UgZm9yIGEgc3BlY2lmaWMgdGltZSBkdXJhdGlvbiBgYnVmZmVyVGltZVNwYW5gLlxuICogVW5sZXNzIHRoZSBvcHRpb25hbCBhcmd1bWVudCBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgaXMgZ2l2ZW4sIGl0IGVtaXRzIGFuZFxuICogcmVzZXRzIHRoZSBidWZmZXIgZXZlcnkgYGJ1ZmZlclRpbWVTcGFuYCBtaWxsaXNlY29uZHMuIElmXG4gKiBgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbGAgaXMgZ2l2ZW4sIHRoaXMgb3BlcmF0b3Igb3BlbnMgdGhlIGJ1ZmZlciBldmVyeVxuICogYGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWxgIG1pbGxpc2Vjb25kcyBhbmQgY2xvc2VzIChlbWl0cyBhbmQgcmVzZXRzKSB0aGVcbiAqIGJ1ZmZlciBldmVyeSBgYnVmZmVyVGltZVNwYW5gIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FdmVyeSBzZWNvbmQsIGVtaXQgYW4gYXJyYXkgb2YgdGhlIHJlY2VudCBjbGljayBldmVudHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlclRpbWUoMTAwMCk7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RXZlcnkgNSBzZWNvbmRzLCBlbWl0IHRoZSBjbGljayBldmVudHMgZnJvbSB0aGUgbmV4dCAyIHNlY29uZHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGJ1ZmZlcmVkID0gY2xpY2tzLmJ1ZmZlclRpbWUoMjAwMCwgNTAwMCk7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYnVmZmVyfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG4gKiBAc2VlIHtAbGluayBidWZmZXJUb2dnbGV9XG4gKiBAc2VlIHtAbGluayBidWZmZXJXaGVufVxuICogQHNlZSB7QGxpbmsgd2luZG93VGltZX1cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyVGltZVNwYW4gVGhlIGFtb3VudCBvZiB0aW1lIHRvIGZpbGwgZWFjaCBidWZmZXIgYXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gW2J1ZmZlckNyZWF0aW9uSW50ZXJ2YWxdIFRoZSBpbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBuZXdcbiAqIGJ1ZmZlcnMuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcbiAqIGludGVydmFscyB0aGF0IGRldGVybWluZSBidWZmZXIgYm91bmRhcmllcy5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gb2JzZXJ2YWJsZSBvZiBhcnJheXMgb2YgYnVmZmVyZWQgdmFsdWVzLlxuICogQG1ldGhvZCBidWZmZXJUaW1lXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBidWZmZXJUaW1lKGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPSBudWxsOyB9XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBCdWZmZXJUaW1lT3BlcmF0b3IoYnVmZmVyVGltZVNwYW4sIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy5idWZmZXJUaW1lID0gYnVmZmVyVGltZTtcbnZhciBCdWZmZXJUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJ1ZmZlclRpbWVPcGVyYXRvcihidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyVGltZVNwYW4gPSBidWZmZXJUaW1lU3BhbjtcbiAgICAgICAgdGhpcy5idWZmZXJDcmVhdGlvbkludGVydmFsID0gYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIEJ1ZmZlclRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmJ1ZmZlclRpbWVTcGFuLCB0aGlzLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyVGltZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQnVmZmVyVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCdWZmZXJUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCdWZmZXJUaW1lU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYnVmZmVyVGltZVNwYW4sIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYnVmZmVyVGltZVNwYW4gPSBidWZmZXJUaW1lU3BhbjtcbiAgICAgICAgdGhpcy5idWZmZXJDcmVhdGlvbkludGVydmFsID0gYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IFtdO1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5vcGVuQnVmZmVyKCk7XG4gICAgICAgIGlmIChidWZmZXJDcmVhdGlvbkludGVydmFsICE9PSBudWxsICYmIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPj0gMCkge1xuICAgICAgICAgICAgdmFyIGNsb3NlU3RhdGUgPSB7IHN1YnNjcmliZXI6IHRoaXMsIGJ1ZmZlcjogYnVmZmVyIH07XG4gICAgICAgICAgICB2YXIgY3JlYXRpb25TdGF0ZSA9IHsgYnVmZmVyVGltZVNwYW46IGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsOiBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzdWJzY3JpYmVyOiB0aGlzLCBzY2hlZHVsZXI6IHNjaGVkdWxlciB9O1xuICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyQ2xvc2UsIGJ1ZmZlclRpbWVTcGFuLCBjbG9zZVN0YXRlKSk7XG4gICAgICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hCdWZmZXJDcmVhdGlvbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgY3JlYXRpb25TdGF0ZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRpbWVTcGFuT25seVN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCBidWZmZXI6IGJ1ZmZlciwgYnVmZmVyVGltZVNwYW46IGJ1ZmZlclRpbWVTcGFuIH07XG4gICAgICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hCdWZmZXJUaW1lU3Bhbk9ubHksIGJ1ZmZlclRpbWVTcGFuLCB0aW1lU3Bhbk9ubHlTdGF0ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcbiAgICAgICAgdmFyIGxlbiA9IGJ1ZmZlcnMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBidWZmZXJzW2ldLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmJ1ZmZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLCBlcnIpO1xuICAgIH07XG4gICAgQnVmZmVyVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgYnVmZmVycyA9IF9hLmJ1ZmZlcnMsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG4gICAgICAgIHdoaWxlIChidWZmZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoYnVmZmVycy5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgQnVmZmVyVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5idWZmZXJzID0gbnVsbDtcbiAgICB9O1xuICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuQnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuYnVmZmVycy5wdXNoKGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfTtcbiAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xvc2VCdWZmZXIgPSBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuICAgICAgICB2YXIgYnVmZmVycyA9IHRoaXMuYnVmZmVycztcbiAgICAgICAgYnVmZmVycy5zcGxpY2UoYnVmZmVycy5pbmRleE9mKGJ1ZmZlciksIDEpO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlclRpbWVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZnVuY3Rpb24gZGlzcGF0Y2hCdWZmZXJUaW1lU3Bhbk9ubHkoc3RhdGUpIHtcbiAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgdmFyIHByZXZCdWZmZXIgPSBzdGF0ZS5idWZmZXI7XG4gICAgaWYgKHByZXZCdWZmZXIpIHtcbiAgICAgICAgc3Vic2NyaWJlci5jbG9zZUJ1ZmZlcihwcmV2QnVmZmVyKTtcbiAgICB9XG4gICAgc3RhdGUuYnVmZmVyID0gc3Vic2NyaWJlci5vcGVuQnVmZmVyKCk7XG4gICAgaWYgKCFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHN0YXRlLmJ1ZmZlclRpbWVTcGFuKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkaXNwYXRjaEJ1ZmZlckNyZWF0aW9uKHN0YXRlKSB7XG4gICAgdmFyIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPSBzdGF0ZS5idWZmZXJDcmVhdGlvbkludGVydmFsLCBidWZmZXJUaW1lU3BhbiA9IHN0YXRlLmJ1ZmZlclRpbWVTcGFuLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgc2NoZWR1bGVyID0gc3RhdGUuc2NoZWR1bGVyO1xuICAgIHZhciBidWZmZXIgPSBzdWJzY3JpYmVyLm9wZW5CdWZmZXIoKTtcbiAgICB2YXIgYWN0aW9uID0gdGhpcztcbiAgICBpZiAoIXN1YnNjcmliZXIuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgYWN0aW9uLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hCdWZmZXJDbG9zZSwgYnVmZmVyVGltZVNwYW4sIHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgYnVmZmVyOiBidWZmZXIgfSkpO1xuICAgICAgICBhY3Rpb24uc2NoZWR1bGUoc3RhdGUsIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyQ2xvc2UoYXJnKSB7XG4gICAgdmFyIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlciwgYnVmZmVyID0gYXJnLmJ1ZmZlcjtcbiAgICBzdWJzY3JpYmVyLmNsb3NlQnVmZmVyKGJ1ZmZlcik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvYnVmZmVyVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGJ1ZmZlclRvZ2dsZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYnVmZmVyVG9nZ2xlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyVG9nZ2xlID0gYnVmZmVyVG9nZ2xlXzEuYnVmZmVyVG9nZ2xlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyVG9nZ2xlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2J1ZmZlclRvZ2dsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbi8qKlxuICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIHN0YXJ0aW5nIGZyb20gYW4gZW1pc3Npb24gZnJvbVxuICogYG9wZW5pbmdzYCBhbmQgZW5kaW5nIHdoZW4gdGhlIG91dHB1dCBvZiBgY2xvc2luZ1NlbGVjdG9yYCBlbWl0cy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+Q29sbGVjdHMgdmFsdWVzIGZyb20gdGhlIHBhc3QgYXMgYW4gYXJyYXkuIFN0YXJ0c1xuICogY29sbGVjdGluZyBvbmx5IHdoZW4gYG9wZW5pbmdgIGVtaXRzLCBhbmQgY2FsbHMgdGhlIGBjbG9zaW5nU2VsZWN0b3JgXG4gKiBmdW5jdGlvbiB0byBnZXQgYW4gT2JzZXJ2YWJsZSB0aGF0IHRlbGxzIHdoZW4gdG8gY2xvc2UgdGhlIGJ1ZmZlci48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9idWZmZXJUb2dnbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQnVmZmVycyB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIGJ5IG9wZW5pbmcgdGhlIGJ1ZmZlciB2aWEgc2lnbmFscyBmcm9tIGFuXG4gKiBPYnNlcnZhYmxlIHByb3ZpZGVkIHRvIGBvcGVuaW5nc2AsIGFuZCBjbG9zaW5nIGFuZCBzZW5kaW5nIHRoZSBidWZmZXJzIHdoZW5cbiAqIGEgU3Vic2NyaWJhYmxlIG9yIFByb21pc2UgcmV0dXJuZWQgYnkgdGhlIGBjbG9zaW5nU2VsZWN0b3JgIGZ1bmN0aW9uIGVtaXRzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkV2ZXJ5IG90aGVyIHNlY29uZCwgZW1pdCB0aGUgY2xpY2sgZXZlbnRzIGZyb20gdGhlIG5leHQgNTAwbXM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIG9wZW5pbmdzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJUb2dnbGUob3BlbmluZ3MsIGkgPT5cbiAqICAgaSAlIDIgPyBSeC5PYnNlcnZhYmxlLmludGVydmFsKDUwMCkgOiBSeC5PYnNlcnZhYmxlLmVtcHR5KClcbiAqICk7XG4gKiBidWZmZXJlZC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgYnVmZmVyfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG4gKiBAc2VlIHtAbGluayBidWZmZXJUaW1lfVxuICogQHNlZSB7QGxpbmsgYnVmZmVyV2hlbn1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RvZ2dsZX1cbiAqXG4gKiBAcGFyYW0ge1N1YnNjcmliYWJsZU9yUHJvbWlzZTxPPn0gb3BlbmluZ3MgQSBTdWJzY3JpYmFibGUgb3IgUHJvbWlzZSBvZiBub3RpZmljYXRpb25zIHRvIHN0YXJ0IG5ld1xuICogYnVmZmVycy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IE8pOiBTdWJzY3JpYmFibGVPclByb21pc2V9IGNsb3NpbmdTZWxlY3RvciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXNcbiAqIHRoZSB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBgb3BlbmluZ3NgIG9ic2VydmFibGUgYW5kIHJldHVybnMgYSBTdWJzY3JpYmFibGUgb3IgUHJvbWlzZSxcbiAqIHdoaWNoLCB3aGVuIGl0IGVtaXRzLCBzaWduYWxzIHRoYXQgdGhlIGFzc29jaWF0ZWQgYnVmZmVyIHNob3VsZCBiZSBlbWl0dGVkXG4gKiBhbmQgY2xlYXJlZC5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VFtdPn0gQW4gb2JzZXJ2YWJsZSBvZiBhcnJheXMgb2YgYnVmZmVyZWQgdmFsdWVzLlxuICogQG1ldGhvZCBidWZmZXJUb2dnbGVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGJ1ZmZlclRvZ2dsZShvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyVG9nZ2xlT3BlcmF0b3Iob3BlbmluZ3MsIGNsb3NpbmdTZWxlY3RvcikpO1xufVxuZXhwb3J0cy5idWZmZXJUb2dnbGUgPSBidWZmZXJUb2dnbGU7XG52YXIgQnVmZmVyVG9nZ2xlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3RvcjtcbiAgICB9XG4gICAgQnVmZmVyVG9nZ2xlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9wZW5pbmdzLCB0aGlzLmNsb3NpbmdTZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQnVmZmVyVG9nZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgb3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMub3BlbmluZ3MgPSBvcGVuaW5ncztcbiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29udGV4dHMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvcGVuaW5ncykpO1xuICAgIH1cbiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICB2YXIgbGVuID0gY29udGV4dHMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb250ZXh0c1tpXS5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgd2hpbGUgKGNvbnRleHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHMuc2hpZnQoKTtcbiAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBjb250ZXh0LmJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcbiAgICB9O1xuICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgd2hpbGUgKGNvbnRleHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHMuc2hpZnQoKTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChjb250ZXh0LmJ1ZmZlcik7XG4gICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgY29udGV4dC5idWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGV4dHMgPSBudWxsO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBvdXRlclZhbHVlID8gdGhpcy5jbG9zZUJ1ZmZlcihvdXRlclZhbHVlKSA6IHRoaXMub3BlbkJ1ZmZlcihpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuY2xvc2VCdWZmZXIoaW5uZXJTdWIuY29udGV4dCk7XG4gICAgfTtcbiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuQnVmZmVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgY2xvc2luZ1NlbGVjdG9yID0gdGhpcy5jbG9zaW5nU2VsZWN0b3I7XG4gICAgICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gY2xvc2luZ1NlbGVjdG9yLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKGNsb3NpbmdOb3RpZmllcikge1xuICAgICAgICAgICAgICAgIHRoaXMudHJ5U3Vic2NyaWJlKGNsb3NpbmdOb3RpZmllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5fZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuY2xvc2VCdWZmZXIgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICBpZiAoY29udGV4dHMgJiYgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGNvbnRleHQuYnVmZmVyLCBzdWJzY3JpcHRpb24gPSBjb250ZXh0LnN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuICAgICAgICAgICAgY29udGV4dHMuc3BsaWNlKGNvbnRleHRzLmluZGV4T2YoY29udGV4dCksIDEpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoY2xvc2luZ05vdGlmaWVyKSB7XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIHZhciBidWZmZXIgPSBbXTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7IGJ1ZmZlcjogYnVmZmVyLCBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbiB9O1xuICAgICAgICBjb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGNsb3NpbmdOb3RpZmllciwgY29udGV4dCk7XG4gICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VCdWZmZXIoY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgIHRoaXMuYWRkKGlubmVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoaW5uZXJTdWJzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQnVmZmVyVG9nZ2xlU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUb2dnbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9idWZmZXJUb2dnbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0MzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBidWZmZXJXaGVuXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9idWZmZXJXaGVuJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyV2hlbiA9IGJ1ZmZlcldoZW5fMS5idWZmZXJXaGVuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyV2hlbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9idWZmZXJXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNDM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaXB0aW9uJyk7XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJ5Q2F0Y2gnKTtcbnZhciBlcnJvck9iamVjdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9lcnJvck9iamVjdCcpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQnVmZmVycyB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzLCB1c2luZyBhIGZhY3RvcnkgZnVuY3Rpb24gb2YgY2xvc2luZ1xuICogT2JzZXJ2YWJsZXMgdG8gZGV0ZXJtaW5lIHdoZW4gdG8gY2xvc2UsIGVtaXQsIGFuZCByZXNldCB0aGUgYnVmZmVyLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db2xsZWN0cyB2YWx1ZXMgZnJvbSB0aGUgcGFzdCBhcyBhbiBhcnJheS4gV2hlbiBpdFxuICogc3RhcnRzIGNvbGxlY3RpbmcgdmFsdWVzLCBpdCBjYWxscyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXRcbiAqIHRlbGxzIHdoZW4gdG8gY2xvc2UgdGhlIGJ1ZmZlciBhbmQgcmVzdGFydCBjb2xsZWN0aW5nLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2J1ZmZlcldoZW4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogT3BlbnMgYSBidWZmZXIgaW1tZWRpYXRlbHksIHRoZW4gY2xvc2VzIHRoZSBidWZmZXIgd2hlbiB0aGUgb2JzZXJ2YWJsZVxuICogcmV0dXJuZWQgYnkgY2FsbGluZyBgY2xvc2luZ1NlbGVjdG9yYCBmdW5jdGlvbiBlbWl0cyBhIHZhbHVlLiBXaGVuIGl0IGNsb3Nlc1xuICogdGhlIGJ1ZmZlciwgaXQgaW1tZWRpYXRlbHkgb3BlbnMgYSBuZXcgYnVmZmVyIGFuZCByZXBlYXRzIHRoZSBwcm9jZXNzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgYW4gYXJyYXkgb2YgdGhlIGxhc3QgY2xpY2tzIGV2ZXJ5IFsxLTVdIHJhbmRvbSBzZWNvbmRzPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBidWZmZXJlZCA9IGNsaWNrcy5idWZmZXJXaGVuKCgpID0+XG4gKiAgIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCArIE1hdGgucmFuZG9tKCkgKiA0MDAwKVxuICogKTtcbiAqIGJ1ZmZlcmVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBidWZmZXJ9XG4gKiBAc2VlIHtAbGluayBidWZmZXJDb3VudH1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlclRpbWV9XG4gKiBAc2VlIHtAbGluayBidWZmZXJUb2dnbGV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuICogYXJndW1lbnRzIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBzaWduYWxzIGJ1ZmZlciBjbG9zdXJlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUW10+fSBBbiBvYnNlcnZhYmxlIG9mIGFycmF5cyBvZiBidWZmZXJlZCB2YWx1ZXMuXG4gKiBAbWV0aG9kIGJ1ZmZlcldoZW5cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGJ1ZmZlcldoZW4oY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQnVmZmVyV2hlbk9wZXJhdG9yKGNsb3NpbmdTZWxlY3RvcikpO1xufVxuZXhwb3J0cy5idWZmZXJXaGVuID0gYnVmZmVyV2hlbjtcbnZhciBCdWZmZXJXaGVuT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJ1ZmZlcldoZW5PcGVyYXRvcihjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7XG4gICAgfVxuICAgIEJ1ZmZlcldoZW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBCdWZmZXJXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdTZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlcldoZW5PcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEJ1ZmZlcldoZW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQnVmZmVyV2hlblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQnVmZmVyV2hlblN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNsb3NpbmdTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMub3BlbkJ1ZmZlcigpO1xuICAgIH1cbiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgfTtcbiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSBmYWxzZTtcbiAgICB9O1xuICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMub3BlbkJ1ZmZlcigpO1xuICAgIH07XG4gICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpYmluZykge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vcGVuQnVmZmVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuQnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2xvc2luZ1N1YnNjcmlwdGlvbiA9IHRoaXMuY2xvc2luZ1N1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKGNsb3NpbmdTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGNsb3NpbmdTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgY2xvc2luZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaCh0aGlzLmNsb3NpbmdTZWxlY3RvcikoKTtcbiAgICAgICAgaWYgKGNsb3NpbmdOb3RpZmllciA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xvc2luZ1N1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2luZ1N1YnNjcmlwdGlvbiA9IGNsb3NpbmdTdWJzY3JpcHRpb247XG4gICAgICAgICAgICB0aGlzLmFkZChjbG9zaW5nU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgY2xvc2luZ1N1YnNjcmlwdGlvbi5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBjbG9zaW5nTm90aWZpZXIpKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEJ1ZmZlcldoZW5TdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlcldoZW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9idWZmZXJXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY2FjaGVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NhY2hlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY2FjaGUgPSBjYWNoZV8xLmNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY2FjaGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0NDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIHB1Ymxpc2hSZXBsYXlfMSA9IHJlcXVpcmUoJy4vcHVibGlzaFJlcGxheScpO1xuLyoqXG4gKiBAcGFyYW0gYnVmZmVyU2l6ZVxuICogQHBhcmFtIHdpbmRvd1RpbWVcbiAqIEBwYXJhbSBzY2hlZHVsZXJcbiAqIEByZXR1cm4ge09ic2VydmFibGU8YW55Pn1cbiAqIEBtZXRob2QgY2FjaGVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNhY2hlKGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuICAgIGlmIChidWZmZXJTaXplID09PSB2b2lkIDApIHsgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgIGlmICh3aW5kb3dUaW1lID09PSB2b2lkIDApIHsgd2luZG93VGltZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgIHJldHVybiBwdWJsaXNoUmVwbGF5XzEucHVibGlzaFJlcGxheS5jYWxsKHRoaXMsIGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikucmVmQ291bnQoKTtcbn1cbmV4cG9ydHMuY2FjaGUgPSBjYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY2FjaGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0NDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFJlcGxheVN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1JlcGxheVN1YmplY3QnKTtcbnZhciBtdWx0aWNhc3RfMSA9IHJlcXVpcmUoJy4vbXVsdGljYXN0Jyk7XG4vKipcbiAqIEBwYXJhbSBidWZmZXJTaXplXG4gKiBAcGFyYW0gd2luZG93VGltZVxuICogQHBhcmFtIHNjaGVkdWxlclxuICogQHJldHVybiB7Q29ubmVjdGFibGVPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCBwdWJsaXNoUmVwbGF5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoUmVwbGF5KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuICAgIGlmIChidWZmZXJTaXplID09PSB2b2lkIDApIHsgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgIGlmICh3aW5kb3dUaW1lID09PSB2b2lkIDApIHsgd2luZG93VGltZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgUmVwbGF5U3ViamVjdF8xLlJlcGxheVN1YmplY3QoYnVmZmVyU2l6ZSwgd2luZG93VGltZSwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLnB1Ymxpc2hSZXBsYXkgPSBwdWJsaXNoUmVwbGF5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaFJlcGxheS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi9TdWJqZWN0Jyk7XG52YXIgcXVldWVfMSA9IHJlcXVpcmUoJy4vc2NoZWR1bGVyL3F1ZXVlJyk7XG52YXIgb2JzZXJ2ZU9uXzEgPSByZXF1aXJlKCcuL29wZXJhdG9yL29ic2VydmVPbicpO1xuLyoqXG4gKiBAY2xhc3MgUmVwbGF5U3ViamVjdDxUPlxuICovXG52YXIgUmVwbGF5U3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlcGxheVN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkgeyBidWZmZXJTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgICAgIGlmICh3aW5kb3dUaW1lID09PSB2b2lkIDApIHsgd2luZG93VGltZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemUgPCAxID8gMSA6IGJ1ZmZlclNpemU7XG4gICAgICAgIHRoaXMuX3dpbmRvd1RpbWUgPSB3aW5kb3dUaW1lIDwgMSA/IDEgOiB3aW5kb3dUaW1lO1xuICAgIH1cbiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgbm93ID0gdGhpcy5fZ2V0Tm93KCk7XG4gICAgICAgIHRoaXMuZXZlbnRzLnB1c2gobmV3IFJlcGxheUV2ZW50KG5vdywgdmFsdWUpKTtcbiAgICAgICAgdGhpcy5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMobm93KTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICB9O1xuICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHModGhpcy5fZ2V0Tm93KCkpO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKHN1YnNjcmliZXIgPSBuZXcgb2JzZXJ2ZU9uXzEuT2JzZXJ2ZU9uU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBzY2hlZHVsZXIpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgdmFyIGxlbiA9IGV2ZW50cy5sZW5ndGg7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuICYmICFzdWJzY3JpYmVyLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoZXZlbnRzW2luZGV4XS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX2dldE5vdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnNjaGVkdWxlciB8fCBxdWV1ZV8xLnF1ZXVlKS5ub3coKTtcbiAgICB9O1xuICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cyA9IGZ1bmN0aW9uIChub3cpIHtcbiAgICAgICAgdmFyIGJ1ZmZlclNpemUgPSB0aGlzLmJ1ZmZlclNpemU7XG4gICAgICAgIHZhciBfd2luZG93VGltZSA9IHRoaXMuX3dpbmRvd1RpbWU7XG4gICAgICAgIHZhciBldmVudHMgPSB0aGlzLmV2ZW50cztcbiAgICAgICAgdmFyIGV2ZW50c0NvdW50ID0gZXZlbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIHNwbGljZUNvdW50ID0gMDtcbiAgICAgICAgLy8gVHJpbSBldmVudHMgdGhhdCBmYWxsIG91dCBvZiB0aGUgdGltZSB3aW5kb3cuXG4gICAgICAgIC8vIFN0YXJ0IGF0IHRoZSBmcm9udCBvZiB0aGUgbGlzdC4gQnJlYWsgZWFybHkgb25jZVxuICAgICAgICAvLyB3ZSBlbmNvdW50ZXIgYW4gZXZlbnQgdGhhdCBmYWxscyB3aXRoaW4gdGhlIHdpbmRvdy5cbiAgICAgICAgd2hpbGUgKHNwbGljZUNvdW50IDwgZXZlbnRzQ291bnQpIHtcbiAgICAgICAgICAgIGlmICgobm93IC0gZXZlbnRzW3NwbGljZUNvdW50XS50aW1lKSA8IF93aW5kb3dUaW1lKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcGxpY2VDb3VudCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudHNDb3VudCA+IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgIHNwbGljZUNvdW50ID0gTWF0aC5tYXgoc3BsaWNlQ291bnQsIGV2ZW50c0NvdW50IC0gYnVmZmVyU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwbGljZUNvdW50ID4gMCkge1xuICAgICAgICAgICAgZXZlbnRzLnNwbGljZSgwLCBzcGxpY2VDb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50cztcbiAgICB9O1xuICAgIHJldHVybiBSZXBsYXlTdWJqZWN0O1xufShTdWJqZWN0XzEuU3ViamVjdCkpO1xuZXhwb3J0cy5SZXBsYXlTdWJqZWN0ID0gUmVwbGF5U3ViamVjdDtcbnZhciBSZXBsYXlFdmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVwbGF5RXZlbnQodGltZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy50aW1lID0gdGltZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gUmVwbGF5RXZlbnQ7XG59KCkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVwbGF5U3ViamVjdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL1JlcGxheVN1YmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA0NDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFF1ZXVlU2NoZWR1bGVyXzEgPSByZXF1aXJlKCcuL1F1ZXVlU2NoZWR1bGVyJyk7XG5leHBvcnRzLnF1ZXVlID0gbmV3IFF1ZXVlU2NoZWR1bGVyXzEuUXVldWVTY2hlZHVsZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXVlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL3F1ZXVlLmpzXG4gKiogbW9kdWxlIGlkID0gNDQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBDb25uZWN0YWJsZU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvQ29ubmVjdGFibGVPYnNlcnZhYmxlJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHRzIG9mIGludm9raW5nIGEgc3BlY2lmaWVkIHNlbGVjdG9yIG9uIGl0ZW1zXG4gKiBlbWl0dGVkIGJ5IGEgQ29ubmVjdGFibGVPYnNlcnZhYmxlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tdWx0aWNhc3QucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgLSBhIGZ1bmN0aW9uIHRoYXQgY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHN0cmVhbVxuICogYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc3RyZWFtLlxuICogU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIHJlY2VpdmUgYWxsIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBmcm9tIHRoZVxuICogdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uIGZvcndhcmQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdHMgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yXG4gKiBvbiB0aGUgaXRlbXMgZW1pdHRlZCBieSBhIGBDb25uZWN0YWJsZU9ic2VydmFibGVgIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0b1xuICogdGhlIHVuZGVybHlpbmcgc3RyZWFtLlxuICogQG1ldGhvZCBtdWx0aWNhc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG11bHRpY2FzdChzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeSkge1xuICAgIHZhciBzdWJqZWN0RmFjdG9yeTtcbiAgICBpZiAodHlwZW9mIHN1YmplY3RPclN1YmplY3RGYWN0b3J5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHN1YmplY3RGYWN0b3J5ID0gc3ViamVjdE9yU3ViamVjdEZhY3Rvcnk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzdWJqZWN0RmFjdG9yeSA9IGZ1bmN0aW9uIHN1YmplY3RGYWN0b3J5KCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1YmplY3RPclN1YmplY3RGYWN0b3J5O1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IENvbm5lY3RhYmxlT2JzZXJ2YWJsZV8xLkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSh0aGlzLCBzdWJqZWN0RmFjdG9yeSk7XG59XG5leHBvcnRzLm11bHRpY2FzdCA9IG11bHRpY2FzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW11bHRpY2FzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL211bHRpY2FzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaXB0aW9uJyk7XG4vKipcbiAqIEBjbGFzcyBDb25uZWN0YWJsZU9ic2VydmFibGU8VD5cbiAqL1xudmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3RhYmxlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb25uZWN0YWJsZU9ic2VydmFibGUoc291cmNlLCBzdWJqZWN0RmFjdG9yeSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0RmFjdG9yeTtcbiAgICB9XG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3ViamVjdCgpLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ2V0U3ViamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG4gICAgICAgIGlmIChzdWJqZWN0ICYmICFzdWJqZWN0LmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gc3ViamVjdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHRoaXMuc3ViamVjdCA9IHRoaXMuc3ViamVjdEZhY3RvcnkoKSk7XG4gICAgfTtcbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuc3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICYmICFzdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZSh0aGlzLmdldFN1YmplY3QoKSk7XG4gICAgICAgIHN1YnNjcmlwdGlvbi5hZGQobmV3IENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuICh0aGlzLnN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbik7XG4gICAgfTtcbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLnJlZkNvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlZkNvdW50T2JzZXJ2YWJsZSh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG9wZW5lZCBmb3IgYENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uYC5cbiAgICAgKiBOb3QgdG8gY2FsbCBmcm9tIG90aGVycy5cbiAgICAgKi9cbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLl9jbG9zZVN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gQ29ubmVjdGFibGVPYnNlcnZhYmxlO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uKGNvbm5lY3RhYmxlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG4gICAgfVxuICAgIENvbm5lY3RhYmxlU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuY29ubmVjdGFibGU7XG4gICAgICAgIGNvbm5lY3RhYmxlLl9jbG9zZVN1YnNjcmlwdGlvbigpO1xuICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBDb25uZWN0YWJsZVN1YnNjcmlwdGlvbjtcbn0oU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFJlZkNvdW50T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlZkNvdW50T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZWZDb3VudE9ic2VydmFibGUoY29ubmVjdGFibGUsIHJlZkNvdW50KSB7XG4gICAgICAgIGlmIChyZWZDb3VudCA9PT0gdm9pZCAwKSB7IHJlZkNvdW50ID0gMDsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IGNvbm5lY3RhYmxlO1xuICAgICAgICB0aGlzLnJlZkNvdW50ID0gcmVmQ291bnQ7XG4gICAgfVxuICAgIFJlZkNvdW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuY29ubmVjdGFibGU7XG4gICAgICAgIHZhciByZWZDb3VudFN1YnNjcmliZXIgPSBuZXcgUmVmQ291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMpO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gY29ubmVjdGFibGUuc3Vic2NyaWJlKHJlZkNvdW50U3Vic2NyaWJlcik7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkICYmICsrdGhpcy5yZWZDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgcmVmQ291bnRTdWJzY3JpYmVyLmNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0YWJsZS5jb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIHJldHVybiBSZWZDb3VudE9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFJlZkNvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlZkNvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZWZDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHJlZkNvdW50T2JzZXJ2YWJsZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBudWxsKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICB0aGlzLnJlZkNvdW50T2JzZXJ2YWJsZSA9IHJlZkNvdW50T2JzZXJ2YWJsZTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gcmVmQ291bnRPYnNlcnZhYmxlLmNvbm5lY3Rpb247XG4gICAgICAgIGRlc3RpbmF0aW9uLmFkZCh0aGlzKTtcbiAgICB9XG4gICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0Q29ubmVjdGFibGUoKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0Q29ubmVjdGFibGUoKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fcmVzZXRDb25uZWN0YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSB0aGlzLnJlZkNvdW50T2JzZXJ2YWJsZTtcbiAgICAgICAgdmFyIG9ic0Nvbm5lY3Rpb24gPSBvYnNlcnZhYmxlLmNvbm5lY3Rpb247XG4gICAgICAgIHZhciBzdWJDb25uZWN0aW9uID0gdGhpcy5jb25uZWN0aW9uO1xuICAgICAgICBpZiAoc3ViQ29ubmVjdGlvbiAmJiBzdWJDb25uZWN0aW9uID09PSBvYnNDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBvYnNlcnZhYmxlLnJlZkNvdW50ID0gMDtcbiAgICAgICAgICAgIG9ic0Nvbm5lY3Rpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIG9ic2VydmFibGUuY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHRoaXMucmVmQ291bnRPYnNlcnZhYmxlO1xuICAgICAgICBpZiAob2JzZXJ2YWJsZS5yZWZDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgtLW9ic2VydmFibGUucmVmQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHZhciBvYnNDb25uZWN0aW9uID0gb2JzZXJ2YWJsZS5jb25uZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHN1YkNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb247XG4gICAgICAgICAgICBpZiAoc3ViQ29ubmVjdGlvbiAmJiBzdWJDb25uZWN0aW9uID09PSBvYnNDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgb2JzQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIG9ic2VydmFibGUuY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBSZWZDb3VudFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0YWJsZU9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNhdGNoXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9jYXRjaCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNhdGNoID0gY2F0Y2hfMS5fY2F0Y2g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYXRjaC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jYXRjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIENhdGNoZXMgZXJyb3JzIG9uIHRoZSBvYnNlcnZhYmxlIHRvIGJlIGhhbmRsZWQgYnkgcmV0dXJuaW5nIGEgbmV3IG9ic2VydmFibGUgb3IgdGhyb3dpbmcgYW4gZXJyb3IuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzZWxlY3RvciBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYXMgYXJndW1lbnRzIGBlcnJgLCB3aGljaCBpcyB0aGUgZXJyb3IsIGFuZCBgY2F1Z2h0YCwgd2hpY2hcbiAqICBpcyB0aGUgc291cmNlIG9ic2VydmFibGUsIGluIGNhc2UgeW91J2QgbGlrZSB0byBcInJldHJ5XCIgdGhhdCBvYnNlcnZhYmxlIGJ5IHJldHVybmluZyBpdCBhZ2Fpbi4gV2hhdGV2ZXIgb2JzZXJ2YWJsZVxuICogIGlzIHJldHVybmVkIGJ5IHRoZSBgc2VsZWN0b3JgIHdpbGwgYmUgdXNlZCB0byBjb250aW51ZSB0aGUgb2JzZXJ2YWJsZSBjaGFpbi5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIG9ic2VydmFibGUgdGhhdCBvcmlnaW5hdGVzIGZyb20gZWl0aGVyIHRoZSBzb3VyY2Ugb3IgdGhlIG9ic2VydmFibGUgcmV0dXJuZWQgYnkgdGhlXG4gKiAgY2F0Y2ggYHNlbGVjdG9yYCBmdW5jdGlvbi5cbiAqIEBtZXRob2QgY2F0Y2hcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIF9jYXRjaChzZWxlY3Rvcikge1xuICAgIHZhciBvcGVyYXRvciA9IG5ldyBDYXRjaE9wZXJhdG9yKHNlbGVjdG9yKTtcbiAgICB2YXIgY2F1Z2h0ID0gdGhpcy5saWZ0KG9wZXJhdG9yKTtcbiAgICByZXR1cm4gKG9wZXJhdG9yLmNhdWdodCA9IGNhdWdodCk7XG59XG5leHBvcnRzLl9jYXRjaCA9IF9jYXRjaDtcbnZhciBDYXRjaE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYXRjaE9wZXJhdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB9XG4gICAgQ2F0Y2hPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBDYXRjaFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zZWxlY3RvciwgdGhpcy5jYXVnaHQpKTtcbiAgICB9O1xuICAgIHJldHVybiBDYXRjaE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgQ2F0Y2hTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2F0Y2hTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENhdGNoU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgc2VsZWN0b3IsIGNhdWdodCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jYXVnaHQgPSBjYXVnaHQ7XG4gICAgfVxuICAgIC8vIE5PVEU6IG92ZXJyaWRpbmcgYGVycm9yYCBpbnN0ZWFkIG9mIGBfZXJyb3JgIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudFxuICAgIC8vIHRvIGhhdmUgdGhpcyBmbGFnIHRoaXMgc3Vic2NyaWJlciBhcyBgaXNTdG9wcGVkYC5cbiAgICBDYXRjaFN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdm9pZCAwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnNlbGVjdG9yKGVyciwgdGhpcy5jYXVnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDYXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgcmVzdWx0LnN1YnNjcmliZSh0aGlzLmRlc3RpbmF0aW9uKTtcbiAgICB9O1xuICAgIHJldHVybiBDYXRjaFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYXRjaC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NhdGNoLmpzXG4gKiogbW9kdWxlIGlkID0gNDQ4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY29tYmluZUFsbF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY29tYmluZUFsbCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbWJpbmVBbGwgPSBjb21iaW5lQWxsXzEuY29tYmluZUFsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVBbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY29tYmluZUFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgY29tYmluZUxhdGVzdF8xID0gcmVxdWlyZSgnLi9jb21iaW5lTGF0ZXN0Jyk7XG4vKipcbiAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgYnkgd2FpdGluZ1xuICogZm9yIHRoZSBvdXRlciBPYnNlcnZhYmxlIHRvIGNvbXBsZXRlLCB0aGVuIGFwcGx5aW5nIHtAbGluayBjb21iaW5lTGF0ZXN0fS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+RmxhdHRlbnMgYW4gT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlcyBieSBhcHBseWluZ1xuICoge0BsaW5rIGNvbWJpbmVMYXRlc3R9IHdoZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXMgY29tcGxldGVzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvbWJpbmVBbGwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogVGFrZXMgYW4gT2JzZXJ2YWJsZSBvZiBPYnNlcnZhYmxlcywgYW5kIGNvbGxlY3RzIGFsbCBPYnNlcnZhYmxlcyBmcm9tIGl0LlxuICogT25jZSB0aGUgb3V0ZXIgT2JzZXJ2YWJsZSBjb21wbGV0ZXMsIGl0IHN1YnNjcmliZXMgdG8gYWxsIGNvbGxlY3RlZFxuICogT2JzZXJ2YWJsZXMgYW5kIGNvbWJpbmVzIHRoZWlyIHZhbHVlcyB1c2luZyB0aGUge0BsaW5rIGNvbWJpbmVMYXRlc3R9XG4gKiBzdHJhdGVneSwgc3VjaCB0aGF0OlxuICogLSBFdmVyeSB0aW1lIGFuIGlubmVyIE9ic2VydmFibGUgZW1pdHMsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBlbWl0cy5cbiAqIC0gV2hlbiB0aGUgcmV0dXJuZWQgb2JzZXJ2YWJsZSBlbWl0cywgaXQgZW1pdHMgYWxsIG9mIHRoZSBsYXRlc3QgdmFsdWVzIGJ5OlxuICogICAtIElmIGEgYHByb2plY3RgIGZ1bmN0aW9uIGlzIHByb3ZpZGVkLCBpdCBpcyBjYWxsZWQgd2l0aCBlYWNoIHJlY2VudCB2YWx1ZVxuICogICAgIGZyb20gZWFjaCBpbm5lciBPYnNlcnZhYmxlIGluIHdoYXRldmVyIG9yZGVyIHRoZXkgYXJyaXZlZCwgYW5kIHRoZSByZXN1bHRcbiAqICAgICBvZiB0aGUgYHByb2plY3RgIGZ1bmN0aW9uIGlzIHdoYXQgaXMgZW1pdHRlZCBieSB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKiAgIC0gSWYgdGhlcmUgaXMgbm8gYHByb2plY3RgIGZ1bmN0aW9uLCBhbiBhcnJheSBvZiBhbGwgb2YgdGhlIG1vc3QgcmVjZW50XG4gKiAgICAgdmFsdWVzIGlzIGVtaXR0ZWQgYnkgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCB0d28gY2xpY2sgZXZlbnRzIHRvIGEgZmluaXRlIGludGVydmFsIE9ic2VydmFibGUsIHRoZW4gYXBwbHkgY29tYmluZUFsbDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgaGlnaGVyT3JkZXIgPSBjbGlja3MubWFwKGV2ID0+XG4gKiAgIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoTWF0aC5yYW5kb20oKSoyMDAwKS50YWtlKDMpXG4gKiApLnRha2UoMik7XG4gKiB2YXIgcmVzdWx0ID0gaGlnaGVyT3JkZXIuY29tYmluZUFsbCgpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lTGF0ZXN0fVxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW3Byb2plY3RdIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIG1hcCB0aGUgbW9zdCByZWNlbnRcbiAqIHZhbHVlcyBmcm9tIGVhY2ggaW5uZXIgT2JzZXJ2YWJsZSBpbnRvIGEgbmV3IHJlc3VsdC4gVGFrZXMgZWFjaCBvZiB0aGUgbW9zdFxuICogcmVjZW50IHZhbHVlcyBmcm9tIGVhY2ggY29sbGVjdGVkIGlubmVyIE9ic2VydmFibGUgYXMgYXJndW1lbnRzLCBpbiBvcmRlci5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHJlc3VsdHMgb3IgYXJyYXlzIG9mIHJlY2VudFxuICogdmFsdWVzLlxuICogQG1ldGhvZCBjb21iaW5lQWxsXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBjb21iaW5lQWxsKHByb2plY3QpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBjb21iaW5lTGF0ZXN0XzEuQ29tYmluZUxhdGVzdE9wZXJhdG9yKHByb2plY3QpKTtcbn1cbmV4cG9ydHMuY29tYmluZUFsbCA9IGNvbWJpbmVBbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lQWxsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY29tYmluZUFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvbWJpbmVMYXRlc3RfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvbWJpbmVMYXRlc3QnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb21iaW5lTGF0ZXN0ID0gY29tYmluZUxhdGVzdF8xLmNvbWJpbmVMYXRlc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lTGF0ZXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbWJpbmVMYXRlc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb25jYXRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvbmNhdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdCA9IGNvbmNhdF8xLmNvbmNhdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXQuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb25jYXRBbGxfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvbmNhdEFsbCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdEFsbCA9IGNvbmNhdEFsbF8xLmNvbmNhdEFsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdEFsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb25jYXRBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG1lcmdlQWxsXzEgPSByZXF1aXJlKCcuL21lcmdlQWxsJyk7XG4vKipcbiAqIENvbnZlcnRzIGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUgaW50byBhIGZpcnN0LW9yZGVyIE9ic2VydmFibGUgYnlcbiAqIGNvbmNhdGVuYXRpbmcgdGhlIGlubmVyIE9ic2VydmFibGVzIGluIG9yZGVyLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5GbGF0dGVucyBhbiBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzIGJ5IHB1dHRpbmcgb25lXG4gKiBpbm5lciBPYnNlcnZhYmxlIGFmdGVyIHRoZSBvdGhlci48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb25jYXRBbGwucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogSm9pbnMgZXZlcnkgT2JzZXJ2YWJsZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgKGEgaGlnaGVyLW9yZGVyIE9ic2VydmFibGUpLCBpblxuICogYSBzZXJpYWwgZmFzaGlvbi4gSXQgc3Vic2NyaWJlcyB0byBlYWNoIGlubmVyIE9ic2VydmFibGUgb25seSBhZnRlciB0aGVcbiAqIHByZXZpb3VzIGlubmVyIE9ic2VydmFibGUgaGFzIGNvbXBsZXRlZCwgYW5kIG1lcmdlcyBhbGwgb2YgdGhlaXIgdmFsdWVzIGludG9cbiAqIHRoZSByZXR1cm5lZCBvYnNlcnZhYmxlLlxuICpcbiAqIF9fV2FybmluZzpfXyBJZiB0aGUgc291cmNlIE9ic2VydmFibGUgZW1pdHMgT2JzZXJ2YWJsZXMgcXVpY2tseSBhbmRcbiAqIGVuZGxlc3NseSwgYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlcyBpdCBlbWl0cyBnZW5lcmFsbHkgY29tcGxldGUgc2xvd2VyIHRoYW5cbiAqIHRoZSBzb3VyY2UgZW1pdHMsIHlvdSBjYW4gcnVuIGludG8gbWVtb3J5IGlzc3VlcyBhcyB0aGUgaW5jb21pbmcgT2JzZXJ2YWJsZXNcbiAqIGNvbGxlY3QgaW4gYW4gdW5ib3VuZGVkIGJ1ZmZlci5cbiAqXG4gKiBOb3RlOiBgY29uY2F0QWxsYCBpcyBlcXVpdmFsZW50IHRvIGBtZXJnZUFsbGAgd2l0aCBjb25jdXJyZW5jeSBwYXJhbWV0ZXIgc2V0XG4gKiB0byBgMWAuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Rm9yIGVhY2ggY2xpY2sgZXZlbnQsIHRpY2sgZXZlcnkgc2Vjb25kIGZyb20gMCB0byAzLCB3aXRoIG5vIGNvbmN1cnJlbmN5PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoZXYgPT4gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS50YWtlKDQpKTtcbiAqIHZhciBmaXJzdE9yZGVyID0gaGlnaGVyT3JkZXIuY29uY2F0QWxsKCk7XG4gKiBmaXJzdE9yZGVyLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0fVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG4gKiBAc2VlIHtAbGluayBleGhhdXN0fVxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBzd2l0Y2h9XG4gKiBAc2VlIHtAbGluayB6aXBBbGx9XG4gKlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBlbWl0dGluZyB2YWx1ZXMgZnJvbSBhbGwgdGhlIGlubmVyXG4gKiBPYnNlcnZhYmxlcyBjb25jYXRlbmF0ZWQuXG4gKiBAbWV0aG9kIGNvbmNhdEFsbFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY29uY2F0QWxsKCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IG1lcmdlQWxsXzEuTWVyZ2VBbGxPcGVyYXRvcigxKSk7XG59XG5leHBvcnRzLmNvbmNhdEFsbCA9IGNvbmNhdEFsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdEFsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2NvbmNhdEFsbC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGNvbmNhdE1hcF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY29uY2F0TWFwJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29uY2F0TWFwID0gY29uY2F0TWFwXzEuY29uY2F0TWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2NvbmNhdE1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgbWVyZ2VNYXBfMSA9IHJlcXVpcmUoJy4vbWVyZ2VNYXAnKTtcbi8qKlxuICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgaW4gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZSwgaW4gYSBzZXJpYWxpemVkIGZhc2hpb24gd2FpdGluZyBmb3IgZWFjaCBvbmUgdG8gY29tcGxldGUgYmVmb3JlXG4gKiBtZXJnaW5nIHRoZSBuZXh0LlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5NYXBzIGVhY2ggdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSwgdGhlbiBmbGF0dGVucyBhbGwgb2ZcbiAqIHRoZXNlIGlubmVyIE9ic2VydmFibGVzIHVzaW5nIHtAbGluayBjb25jYXRBbGx9Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdE1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG4gKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG4gKiByZXR1cm5zIGFuIChzby1jYWxsZWQgXCJpbm5lclwiKSBPYnNlcnZhYmxlLiBFYWNoIG5ldyBpbm5lciBPYnNlcnZhYmxlIGlzXG4gKiBjb25jYXRlbmF0ZWQgd2l0aCB0aGUgcHJldmlvdXMgaW5uZXIgT2JzZXJ2YWJsZS5cbiAqXG4gKiBfX1dhcm5pbmc6X18gaWYgc291cmNlIHZhbHVlcyBhcnJpdmUgZW5kbGVzc2x5IGFuZCBmYXN0ZXIgdGhhbiB0aGVpclxuICogY29ycmVzcG9uZGluZyBpbm5lciBPYnNlcnZhYmxlcyBjYW4gY29tcGxldGUsIGl0IHdpbGwgcmVzdWx0IGluIG1lbW9yeSBpc3N1ZXNcbiAqIGFzIGlubmVyIE9ic2VydmFibGVzIGFtYXNzIGluIGFuIHVuYm91bmRlZCBidWZmZXIgd2FpdGluZyBmb3IgdGhlaXIgdHVybiB0b1xuICogYmUgc3Vic2NyaWJlZCB0by5cbiAqXG4gKiBOb3RlOiBgY29uY2F0TWFwYCBpcyBlcXVpdmFsZW50IHRvIGBtZXJnZU1hcGAgd2l0aCBjb25jdXJyZW5jeSBwYXJhbWV0ZXIgc2V0XG4gKiB0byBgMWAuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Rm9yIGVhY2ggY2xpY2sgZXZlbnQsIHRpY2sgZXZlcnkgc2Vjb25kIGZyb20gMCB0byAzLCB3aXRoIG5vIGNvbmN1cnJlbmN5PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3MuY29uY2F0TWFwKGV2ID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbmNhdH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcFRvfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsID9pbmRleDogbnVtYmVyKTogT2JzZXJ2YWJsZX0gcHJvamVjdCBBIGZ1bmN0aW9uXG4gKiB0aGF0LCB3aGVuIGFwcGxpZWQgdG8gYW4gaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcmV0dXJucyBhblxuICogT2JzZXJ2YWJsZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cbiAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcbiAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG4gKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG4gKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBvYnNlcnZhYmxlIG9mIHZhbHVlcyBtZXJnZWQgZnJvbSB0aGUgcHJvamVjdGVkXG4gKiBPYnNlcnZhYmxlcyBhcyB0aGV5IHdlcmUgc3Vic2NyaWJlZCB0bywgb25lIGF0IGEgdGltZS4gT3B0aW9uYWxseSwgdGhlc2VcbiAqIHZhbHVlcyBtYXkgaGF2ZSBiZWVuIHByb2plY3RlZCBmcm9tIGEgcGFzc2VkIGBwcm9qZWN0UmVzdWx0YCBhcmd1bWVudC5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCB0YWtpbmcgdmFsdWVzIGZyb20gZWFjaCBwcm9qZWN0ZWQgaW5uZXJcbiAqIE9ic2VydmFibGUgc2VxdWVudGlhbGx5LlxuICogQG1ldGhvZCBjb25jYXRNYXBcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvbmNhdE1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IG1lcmdlTWFwXzEuTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgMSkpO1xufVxuZXhwb3J0cy5jb25jYXRNYXAgPSBjb25jYXRNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jb25jYXRNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA0NTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBpbiB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5NYXBzIGVhY2ggdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSwgdGhlbiBmbGF0dGVucyBhbGwgb2ZcbiAqIHRoZXNlIGlubmVyIE9ic2VydmFibGVzIHVzaW5nIHtAbGluayBtZXJnZUFsbH0uPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWVyZ2VNYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgYmFzZWQgb24gYXBwbHlpbmcgYSBmdW5jdGlvbiB0aGF0IHlvdVxuICogc3VwcGx5IHRvIGVhY2ggaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgd2hlcmUgdGhhdCBmdW5jdGlvblxuICogcmV0dXJucyBhbiBPYnNlcnZhYmxlLCBhbmQgdGhlbiBtZXJnaW5nIHRob3NlIHJlc3VsdGluZyBPYnNlcnZhYmxlcyBhbmRcbiAqIGVtaXR0aW5nIHRoZSByZXN1bHRzIG9mIHRoaXMgbWVyZ2VyLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBhbmQgZmxhdHRlbiBlYWNoIGxldHRlciB0byBhbiBPYnNlcnZhYmxlIHRpY2tpbmcgZXZlcnkgMSBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgbGV0dGVycyA9IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJyk7XG4gKiB2YXIgcmVzdWx0ID0gbGV0dGVycy5tZXJnZU1hcCh4ID0+XG4gKiAgIFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkubWFwKGkgPT4geCtpKVxuICogKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsID9pbmRleDogbnVtYmVyKTogT2JzZXJ2YWJsZX0gcHJvamVjdCBBIGZ1bmN0aW9uXG4gKiB0aGF0LCB3aGVuIGFwcGxpZWQgdG8gYW4gaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgcmV0dXJucyBhblxuICogT2JzZXJ2YWJsZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cbiAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcbiAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG4gKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG4gKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXSBNYXhpbXVtIG51bWJlciBvZiBpbnB1dFxuICogT2JzZXJ2YWJsZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGVcbiAqIHByb2plY3Rpb24gZnVuY3Rpb24gKGFuZCB0aGUgb3B0aW9uYWwgYHJlc3VsdFNlbGVjdG9yYCkgdG8gZWFjaCBpdGVtIGVtaXR0ZWRcbiAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhbmQgbWVyZ2luZyB0aGUgcmVzdWx0cyBvZiB0aGUgT2JzZXJ2YWJsZXMgb2J0YWluZWRcbiAqIGZyb20gdGhpcyB0cmFuc2Zvcm1hdGlvbi5cbiAqIEBtZXRob2QgbWVyZ2VNYXBcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG1lcmdlTWFwKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG4gICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uY3VycmVudCA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICByZXN1bHRTZWxlY3RvciA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpKTtcbn1cbmV4cG9ydHMubWVyZ2VNYXAgPSBtZXJnZU1hcDtcbnZhciBNZXJnZU1hcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNZXJnZU1hcE9wZXJhdG9yKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG4gICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgfVxuICAgIE1lcmdlTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1lcmdlTWFwU3Vic2NyaWJlcihvYnNlcnZlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmNvbmN1cnJlbnQpKTtcbiAgICB9O1xuICAgIHJldHVybiBNZXJnZU1hcE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuTWVyZ2VNYXBPcGVyYXRvciA9IE1lcmdlTWFwT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE1lcmdlTWFwU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1lcmdlTWFwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNZXJnZU1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG4gICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeU5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlKys7XG4gICAgICAgIHRoaXMuX2lubmVyU3ViKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKGlzaCwgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgaXNoLCB2YWx1ZSwgaW5kZXgpKTtcbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLl9ub3RpZnlSZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbm90aWZ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNZXJnZU1hcFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5NZXJnZU1hcFN1YnNjcmliZXIgPSBNZXJnZU1hcFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL21lcmdlTWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNDU3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgY29uY2F0TWFwVG9fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2NvbmNhdE1hcFRvJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29uY2F0TWFwVG8gPSBjb25jYXRNYXBUb18xLmNvbmNhdE1hcFRvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwVG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0TWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA0NThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG1lcmdlTWFwVG9fMSA9IHJlcXVpcmUoJy4vbWVyZ2VNYXBUbycpO1xuLyoqXG4gKiBQcm9qZWN0cyBlYWNoIHNvdXJjZSB2YWx1ZSB0byB0aGUgc2FtZSBPYnNlcnZhYmxlIHdoaWNoIGlzIG1lcmdlZCBtdWx0aXBsZVxuICogdGltZXMgaW4gYSBzZXJpYWxpemVkIGZhc2hpb24gb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGNvbmNhdE1hcH0sIGJ1dCBtYXBzIGVhY2ggdmFsdWVcbiAqIGFsd2F5cyB0byB0aGUgc2FtZSBpbm5lciBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2NvbmNhdE1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIE1hcHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIGdpdmVuIE9ic2VydmFibGUgYGlubmVyT2JzZXJ2YWJsZWAgcmVnYXJkbGVzc1xuICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gZmxhdHRlbnMgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGludG8gb25lXG4gKiBzaW5nbGUgT2JzZXJ2YWJsZSwgd2hpY2ggaXMgdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBFYWNoIG5ldyBgaW5uZXJPYnNlcnZhYmxlYFxuICogaW5zdGFuY2UgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgY29uY2F0ZW5hdGVkIHdpdGggdGhlIHByZXZpb3VzXG4gKiBgaW5uZXJPYnNlcnZhYmxlYCBpbnN0YW5jZS5cbiAqXG4gKiBfX1dhcm5pbmc6X18gaWYgc291cmNlIHZhbHVlcyBhcnJpdmUgZW5kbGVzc2x5IGFuZCBmYXN0ZXIgdGhhbiB0aGVpclxuICogY29ycmVzcG9uZGluZyBpbm5lciBPYnNlcnZhYmxlcyBjYW4gY29tcGxldGUsIGl0IHdpbGwgcmVzdWx0IGluIG1lbW9yeSBpc3N1ZXNcbiAqIGFzIGlubmVyIE9ic2VydmFibGVzIGFtYXNzIGluIGFuIHVuYm91bmRlZCBidWZmZXIgd2FpdGluZyBmb3IgdGhlaXIgdHVybiB0b1xuICogYmUgc3Vic2NyaWJlZCB0by5cbiAqXG4gKiBOb3RlOiBgY29uY2F0TWFwVG9gIGlzIGVxdWl2YWxlbnQgdG8gYG1lcmdlTWFwVG9gIHdpdGggY29uY3VycmVuY3kgcGFyYW1ldGVyXG4gKiBzZXQgdG8gYDFgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkZvciBlYWNoIGNsaWNrIGV2ZW50LCB0aWNrIGV2ZXJ5IHNlY29uZCBmcm9tIDAgdG8gMywgd2l0aCBubyBjb25jdXJyZW5jeTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmNvbmNhdE1hcFRvKFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkudGFrZSg0KSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNvbmNhdH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdEFsbH1cbiAqIEBzZWUge0BsaW5rIGNvbmNhdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwVG99XG4gKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IGlubmVyT2JzZXJ2YWJsZSBBbiBPYnNlcnZhYmxlIHRvIHJlcGxhY2UgZWFjaCB2YWx1ZSBmcm9tXG4gKiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG4gKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBvZiB2YWx1ZXMgbWVyZ2VkIHRvZ2V0aGVyIGJ5IGpvaW5pbmcgdGhlXG4gKiBwYXNzZWQgb2JzZXJ2YWJsZSB3aXRoIGl0c2VsZiwgb25lIGFmdGVyIHRoZSBvdGhlciwgZm9yIGVhY2ggdmFsdWUgZW1pdHRlZFxuICogZnJvbSB0aGUgc291cmNlLlxuICogQG1ldGhvZCBjb25jYXRNYXBUb1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gY29uY2F0TWFwVG8oaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IG1lcmdlTWFwVG9fMS5NZXJnZU1hcFRvT3BlcmF0b3IoaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvciwgMSkpO1xufVxuZXhwb3J0cy5jb25jYXRNYXBUbyA9IGNvbmNhdE1hcFRvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwVG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9jb25jYXRNYXBUby5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIHRoZSBzYW1lIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIG11bHRpcGxlXG4gKiB0aW1lcyBpbiB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgbWVyZ2VNYXB9LCBidXQgbWFwcyBlYWNoIHZhbHVlIGFsd2F5c1xuICogdG8gdGhlIHNhbWUgaW5uZXIgT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIE1hcHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIGdpdmVuIE9ic2VydmFibGUgYGlubmVyT2JzZXJ2YWJsZWAgcmVnYXJkbGVzc1xuICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gbWVyZ2VzIHRob3NlIHJlc3VsdGluZyBPYnNlcnZhYmxlcyBpbnRvIG9uZVxuICogc2luZ2xlIE9ic2VydmFibGUsIHdoaWNoIGlzIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Gb3IgZWFjaCBjbGljayBldmVudCwgc3RhcnQgYW4gaW50ZXJ2YWwgT2JzZXJ2YWJsZSB0aWNraW5nIGV2ZXJ5IDEgc2Vjb25kPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3MubWVyZ2VNYXBUbyhSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG4gKiBAc2VlIHtAbGluayBtZXJnZX1cbiAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZVNjYW59XG4gKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IGlubmVyT2JzZXJ2YWJsZSBBbiBPYnNlcnZhYmxlIHRvIHJlcGxhY2UgZWFjaCB2YWx1ZSBmcm9tXG4gKiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG4gKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcbiAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGZyb20gdGhlIGdpdmVuXG4gKiBgaW5uZXJPYnNlcnZhYmxlYCAoYW5kIG9wdGlvbmFsbHkgdHJhbnNmb3JtZWQgdGhyb3VnaCBgcmVzdWx0U2VsZWN0b3JgKSBldmVyeVxuICogdGltZSBhIHZhbHVlIGlzIGVtaXR0ZWQgb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBtZXJnZU1hcFRvXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtZXJnZU1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHJlc3VsdFNlbGVjdG9yID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VNYXBUb09wZXJhdG9yKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpKTtcbn1cbmV4cG9ydHMubWVyZ2VNYXBUbyA9IG1lcmdlTWFwVG87XG4vLyBUT0RPOiBGaWd1cmUgb3V0IGNvcnJlY3Qgc2lnbmF0dXJlIGhlcmU6IGFuIE9wZXJhdG9yPE9ic2VydmFibGU8VD4sIFI+XG4vLyAgICAgICBuZWVkcyB0byBpbXBsZW1lbnQgY2FsbChvYnNlcnZlcjogU3Vic2NyaWJlcjxSPik6IFN1YnNjcmliZXI8T2JzZXJ2YWJsZTxUPj5cbnZhciBNZXJnZU1hcFRvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1lcmdlTWFwVG9PcGVyYXRvcihpc2gsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG4gICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgICAgICB0aGlzLmlzaCA9IGlzaDtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50O1xuICAgIH1cbiAgICBNZXJnZU1hcFRvT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IE1lcmdlTWFwVG9TdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLmlzaCwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5jb25jdXJyZW50KSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBUb09wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuTWVyZ2VNYXBUb09wZXJhdG9yID0gTWVyZ2VNYXBUb09wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNZXJnZU1hcFRvU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1lcmdlTWFwVG9TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1lcmdlTWFwVG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBpc2gsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG4gICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsgfVxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuaXNoID0gaXNoO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlID0gMDtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRTZWxlY3RvciA9IHRoaXMucmVzdWx0U2VsZWN0b3I7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG4gICAgICAgICAgICB2YXIgaXNoID0gdGhpcy5pc2g7XG4gICAgICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUrKztcbiAgICAgICAgICAgIHRoaXMuX2lubmVyU3ViKGlzaCwgZGVzdGluYXRpb24sIHJlc3VsdFNlbGVjdG9yLCB2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAoaXNoLCBkZXN0aW5hdGlvbiwgcmVzdWx0U2VsZWN0b3IsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGlzaCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTWVyZ2VNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgcmVzdWx0U2VsZWN0b3IgPSBfYS5yZXN1bHRTZWxlY3RvciwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRyeVNlbGVjdFJlc3VsdChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS50cnlTZWxlY3RSZXN1bHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIE1lcmdlTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgdGhpcy5hY3RpdmUtLTtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBUb1N1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5NZXJnZU1hcFRvU3Vic2NyaWJlciA9IE1lcmdlTWFwVG9TdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXBUby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL21lcmdlTWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA0NjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBjb3VudF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvY291bnQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb3VudCA9IGNvdW50XzEuY291bnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3VudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9jb3VudC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIENvdW50cyB0aGUgbnVtYmVyIG9mIGVtaXNzaW9ucyBvbiB0aGUgc291cmNlIGFuZCBlbWl0cyB0aGF0IG51bWJlciB3aGVuIHRoZVxuICogc291cmNlIGNvbXBsZXRlcy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGVsbHMgaG93IG1hbnkgdmFsdWVzIHdlcmUgZW1pdHRlZCwgd2hlbiB0aGUgc291cmNlXG4gKiBjb21wbGV0ZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvY291bnQucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYGNvdW50YCB0cmFuc2Zvcm1zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB2YWx1ZXMgaW50byBhbiBPYnNlcnZhYmxlIHRoYXRcbiAqIGVtaXRzIGEgc2luZ2xlIHZhbHVlIHRoYXQgcmVwcmVzZW50cyB0aGUgbnVtYmVyIG9mIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZVxuICogc291cmNlIE9ic2VydmFibGUuIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0ZXJtaW5hdGVzIHdpdGggYW4gZXJyb3IsIGBjb3VudGBcbiAqIHdpbGwgcGFzcyB0aGlzIGVycm9yIG5vdGlmaWNhdGlvbiBhbG9uZyB3aXRob3V0IGVtaXR0aW5nIGFuIHZhbHVlIGZpcnN0LiBJZlxuICogdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGRvZXMgbm90IHRlcm1pbmF0ZSBhdCBhbGwsIGBjb3VudGAgd2lsbCBuZWl0aGVyIGVtaXRcbiAqIGEgdmFsdWUgbm9yIHRlcm1pbmF0ZS4gVGhpcyBvcGVyYXRvciB0YWtlcyBhbiBvcHRpb25hbCBgcHJlZGljYXRlYCBmdW5jdGlvblxuICogYXMgYXJndW1lbnQsIGluIHdoaWNoIGNhc2UgdGhlIG91dHB1dCBlbWlzc2lvbiB3aWxsIHJlcHJlc2VudCB0aGUgbnVtYmVyIG9mXG4gKiBzb3VyY2UgdmFsdWVzIHRoYXQgbWF0Y2hlZCBgdHJ1ZWAgd2l0aCB0aGUgYHByZWRpY2F0ZWAuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnRzIGhvdyBtYW55IHNlY29uZHMgaGF2ZSBwYXNzZWQgYmVmb3JlIHRoZSBmaXJzdCBjbGljayBoYXBwZW5lZDwvY2FwdGlvbj5cbiAqIHZhciBzZWNvbmRzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgc2Vjb25kc0JlZm9yZUNsaWNrID0gc2Vjb25kcy50YWtlVW50aWwoY2xpY2tzKTtcbiAqIHZhciByZXN1bHQgPSBzZWNvbmRzQmVmb3JlQ2xpY2suY291bnQoKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q291bnRzIGhvdyBtYW55IG9kZCBudW1iZXJzIGFyZSB0aGVyZSBiZXR3ZWVuIDEgYW5kIDc8L2NhcHRpb24+XG4gKiB2YXIgbnVtYmVycyA9IFJ4Lk9ic2VydmFibGUucmFuZ2UoMSwgNyk7XG4gKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb3VudChpID0+IGkgJSAyID09PSAxKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWF4fVxuICogQHNlZSB7QGxpbmsgbWlufVxuICogQHNlZSB7QGxpbmsgcmVkdWNlfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGk6IG51bWJlciwgc291cmNlOiBPYnNlcnZhYmxlPFQ+KTogYm9vbGVhbn0gW3ByZWRpY2F0ZV0gQVxuICogYm9vbGVhbiBmdW5jdGlvbiB0byBzZWxlY3Qgd2hhdCB2YWx1ZXMgYXJlIHRvIGJlIGNvdW50ZWQuIEl0IGlzIHByb3ZpZGVkIHdpdGhcbiAqIGFyZ3VtZW50cyBvZjpcbiAqIC0gYHZhbHVlYDogdGhlIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogLSBgaW5kZXhgOiB0aGUgKHplcm8tYmFzZWQpIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiAtIGBzb3VyY2VgOiB0aGUgc291cmNlIE9ic2VydmFibGUgaW5zdGFuY2UgaXRzZWxmLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBvZiBvbmUgbnVtYmVyIHRoYXQgcmVwcmVzZW50cyB0aGUgY291bnQgYXNcbiAqIGRlc2NyaWJlZCBhYm92ZS5cbiAqIEBtZXRob2QgY291bnRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGNvdW50KHByZWRpY2F0ZSkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IENvdW50T3BlcmF0b3IocHJlZGljYXRlLCB0aGlzKSk7XG59XG5leHBvcnRzLmNvdW50ID0gY291bnQ7XG52YXIgQ291bnRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ291bnRPcGVyYXRvcihwcmVkaWNhdGUsIHNvdXJjZSkge1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIENvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQ291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIENvdW50T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBDb3VudFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnByZWRpY2F0ZSkge1xuICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY291bnQrKztcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJlZGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrLCB0aGlzLnNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnQrKztcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmNvdW50KTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIENvdW50U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvdW50LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvY291bnQuanNcbiAqKiBtb2R1bGUgaWQgPSA0NjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBkZW1hdGVyaWFsaXplXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZW1hdGVyaWFsaXplJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVtYXRlcmlhbGl6ZSA9IGRlbWF0ZXJpYWxpemVfMS5kZW1hdGVyaWFsaXplO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVtYXRlcmlhbGl6ZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9kZW1hdGVyaWFsaXplLmpzXG4gKiogbW9kdWxlIGlkID0gNDYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgdHJhbnNmb3JtcyBOb3RpZmljYXRpb24gb2JqZWN0cyBpbnRvIHRoZSBpdGVtcyBvciBub3RpZmljYXRpb25zIHRoZXkgcmVwcmVzZW50LlxuICpcbiAqIEBzZWUge0BsaW5rIE5vdGlmaWNhdGlvbn1cbiAqXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgYW5kIG5vdGlmaWNhdGlvbnMgZW1iZWRkZWQgaW4gTm90aWZpY2F0aW9uIG9iamVjdHMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIGRlbWF0ZXJpYWxpemVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGRlbWF0ZXJpYWxpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVNYXRlcmlhbGl6ZU9wZXJhdG9yKCkpO1xufVxuZXhwb3J0cy5kZW1hdGVyaWFsaXplID0gZGVtYXRlcmlhbGl6ZTtcbnZhciBEZU1hdGVyaWFsaXplT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlTWF0ZXJpYWxpemVPcGVyYXRvcigpIHtcbiAgICB9XG4gICAgRGVNYXRlcmlhbGl6ZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZU1hdGVyaWFsaXplT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZU1hdGVyaWFsaXplU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICB9XG4gICAgRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhbHVlLm9ic2VydmUodGhpcy5kZXN0aW5hdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4gRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZW1hdGVyaWFsaXplLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvZGVtYXRlcmlhbGl6ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRlYm91bmNlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZWJvdW5jZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlYm91bmNlID0gZGVib3VuY2VfMS5kZWJvdW5jZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlYm91bmNlLmpzXG4gKiogbW9kdWxlIGlkID0gNDY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogUmV0dXJucyB0aGUgc291cmNlIE9ic2VydmFibGUgZGVsYXllZCBieSB0aGUgY29tcHV0ZWQgZGVib3VuY2UgZHVyYXRpb24sXG4gKiB3aXRoIHRoZSBkdXJhdGlvbiBsZW5ndGhlbmVkIGlmIGEgbmV3IHNvdXJjZSBpdGVtIGFycml2ZXMgYmVmb3JlIHRoZSBkZWxheVxuICogZHVyYXRpb24gZW5kcy5cbiAqIEluIHByYWN0aWNlLCBmb3IgZWFjaCBpdGVtIGVtaXR0ZWQgb24gdGhlIHNvdXJjZSwgdGhpcyBvcGVyYXRvciBob2xkcyB0aGVcbiAqIGxhdGVzdCBpdGVtLCB3YWl0cyBmb3IgYSBzaWxlbmNlIGFzIGxvbmcgYXMgdGhlIGBkdXJhdGlvblNlbGVjdG9yYCBzcGVjaWZpZXMsXG4gKiBhbmQgb25seSB0aGVuIGVtaXRzIHRoZSBsYXRlc3Qgc291cmNlIGl0ZW0gb24gdGhlIHJlc3VsdCBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZHVyYXRpb25TZWxlY3RvciBmdW5jdGlvbiBmb3IgY29tcHV0aW5nIHRoZSB0aW1lb3V0IGR1cmF0aW9uIGZvciBlYWNoIGl0ZW0uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoZSBzYW1lIGFzIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgZHJvcHMgaXRlbXMuXG4gKiBAbWV0aG9kIGRlYm91bmNlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBkZWJvdW5jZShkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVib3VuY2VPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSk7XG59XG5leHBvcnRzLmRlYm91bmNlID0gZGVib3VuY2U7XG52YXIgRGVib3VuY2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIERlYm91bmNlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRGVib3VuY2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIERlYm91bmNlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZWJvdW5jZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWJvdW5jZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICB9XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZHVyYXRpb25TZWxlY3Rvci5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlLCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeU5leHQgPSBmdW5jdGlvbiAodmFsdWUsIGR1cmF0aW9uKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkdXJhdGlvbik7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG4gICAgfTtcbiAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuICAgIH07XG4gICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb247XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERlYm91bmNlU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlYm91bmNlLmpzXG4gKiogbW9kdWxlIGlkID0gNDY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVib3VuY2VUaW1lXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZWJvdW5jZVRpbWUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWJvdW5jZVRpbWUgPSBkZWJvdW5jZVRpbWVfMS5kZWJvdW5jZVRpbWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZVRpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2VUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNDY3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG4vKipcbiAqIFJldHVybnMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGRlbGF5ZWQgYnkgdGhlIGNvbXB1dGVkIGRlYm91bmNlIGR1cmF0aW9uLFxuICogd2l0aCB0aGUgZHVyYXRpb24gbGVuZ3RoZW5lZCBpZiBhIG5ldyBzb3VyY2UgaXRlbSBhcnJpdmVzIGJlZm9yZSB0aGUgZGVsYXlcbiAqIGR1cmF0aW9uIGVuZHMuXG4gKiBJbiBwcmFjdGljZSwgZm9yIGVhY2ggaXRlbSBlbWl0dGVkIG9uIHRoZSBzb3VyY2UsIHRoaXMgb3BlcmF0b3IgaG9sZHMgdGhlXG4gKiBsYXRlc3QgaXRlbSwgd2FpdHMgZm9yIGEgc2lsZW5jZSBmb3IgdGhlIGBkdWVUaW1lYCBsZW5ndGgsIGFuZCBvbmx5IHRoZW5cbiAqIGVtaXRzIHRoZSBsYXRlc3Qgc291cmNlIGl0ZW0gb24gdGhlIHJlc3VsdCBPYnNlcnZhYmxlLlxuICogT3B0aW9uYWxseSB0YWtlcyBhIHNjaGVkdWxlciBmb3IgbWFuZ2luZyB0aW1lcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gZHVlVGltZSB0aGUgdGltZW91dCB2YWx1ZSBmb3IgdGhlIHdpbmRvdyBvZiB0aW1lIHJlcXVpcmVkIHRvIG5vdCBkcm9wIHRoZSBpdGVtLlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIHRoZSBTY2hlZHVsZXIgdG8gdXNlIGZvciBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSB0aW1lb3V0IGZvciBlYWNoIGl0ZW0uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoZSBzYW1lIGFzIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgZHJvcHMgaXRlbXMuXG4gKiBAbWV0aG9kIGRlYm91bmNlVGltZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2VUaW1lKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVib3VuY2VUaW1lT3BlcmF0b3IoZHVlVGltZSwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLmRlYm91bmNlVGltZSA9IGRlYm91bmNlVGltZTtcbnZhciBEZWJvdW5jZVRpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VUaW1lT3BlcmF0b3IoZHVlVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBEZWJvdW5jZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVlVGltZSwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWJvdW5jZVRpbWVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIERlYm91bmNlVGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdFZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmNsZWFyRGVib3VuY2UoKTtcbiAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCB0aGlzLmR1ZVRpbWUsIHRoaXMpKTtcbiAgICB9O1xuICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZWJvdW5jZWROZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLmRlYm91bmNlZE5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJEZWJvdW5jZSgpO1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVib3VuY2VUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJEZWJvdW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IHRoaXMuZGVib3VuY2VkU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoZGVib3VuY2VkU3Vic2NyaXB0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShkZWJvdW5jZWRTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgZGVib3VuY2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KHN1YnNjcmliZXIpIHtcbiAgICBzdWJzY3JpYmVyLmRlYm91bmNlZE5leHQoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlVGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlYm91bmNlVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRlZmF1bHRJZkVtcHR5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRlZmF1bHRJZkVtcHR5ID0gZGVmYXVsdElmRW1wdHlfMS5kZWZhdWx0SWZFbXB0eTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRJZkVtcHR5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5LmpzXG4gKiogbW9kdWxlIGlkID0gNDY5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugb3IgYSBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBpZiBlbXB0eS5cbiAqIEBwYXJhbSB7YW55fSBkZWZhdWx0VmFsdWUgdGhlIGRlZmF1bHQgdmFsdWUgdXNlZCBpZiBzb3VyY2UgaXMgZW1wdHk7IGRlZmF1bHRzIHRvIG51bGwuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIG9mIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoZSB3aGVyZSBlbXB0eSB2YWx1ZXMgYXJlIHJlcGxhY2VkIGJ5IHRoZSBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBvciBudWxsLlxuICogQG1ldGhvZCBkZWZhdWx0SWZFbXB0eVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdElmRW1wdHkoZGVmYXVsdFZhbHVlKSB7XG4gICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7IGRlZmF1bHRWYWx1ZSA9IG51bGw7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yKGRlZmF1bHRWYWx1ZSkpO1xufVxuZXhwb3J0cy5kZWZhdWx0SWZFbXB0eSA9IGRlZmF1bHRJZkVtcHR5O1xudmFyIERlZmF1bHRJZkVtcHR5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlZmF1bHRJZkVtcHR5T3BlcmF0b3IoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlZmF1bHRWYWx1ZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIERlZmF1bHRJZkVtcHR5T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy5pc0VtcHR5ID0gdHJ1ZTtcbiAgICB9XG4gICAgRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmlzRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIERlZmF1bHRJZkVtcHR5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5kZWZhdWx0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0SWZFbXB0eS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5LmpzXG4gKiogbW9kdWxlIGlkID0gNDcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVsYXlfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2RlbGF5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVsYXkgPSBkZWxheV8xLmRlbGF5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVsYXkuanNcbiAqKiBtb2R1bGUgaWQgPSA0NzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xudmFyIGlzRGF0ZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0RhdGUnKTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgTm90aWZpY2F0aW9uXzEgPSByZXF1aXJlKCcuLi9Ob3RpZmljYXRpb24nKTtcbi8qKlxuICogRGVsYXlzIHRoZSBlbWlzc2lvbiBvZiBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBhIGdpdmVuIHRpbWVvdXQgb3JcbiAqIHVudGlsIGEgZ2l2ZW4gRGF0ZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGltZSBzaGlmdHMgZWFjaCBpdGVtIGJ5IHNvbWUgc3BlY2lmaWVkIGFtb3VudCBvZlxuICogbWlsbGlzZWNvbmRzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2RlbGF5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIElmIHRoZSBkZWxheSBhcmd1bWVudCBpcyBhIE51bWJlciwgdGhpcyBvcGVyYXRvciB0aW1lIHNoaWZ0cyB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGJ5IHRoYXQgYW1vdW50IG9mIHRpbWUgZXhwcmVzc2VkIGluIG1pbGxpc2Vjb25kcy4gVGhlIHJlbGF0aXZlXG4gKiB0aW1lIGludGVydmFscyBiZXR3ZWVuIHRoZSB2YWx1ZXMgYXJlIHByZXNlcnZlZC5cbiAqXG4gKiBJZiB0aGUgZGVsYXkgYXJndW1lbnQgaXMgYSBEYXRlLCB0aGlzIG9wZXJhdG9yIHRpbWUgc2hpZnRzIHRoZSBzdGFydCBvZiB0aGVcbiAqIE9ic2VydmFibGUgZXhlY3V0aW9uIHVudGlsIHRoZSBnaXZlbiBkYXRlIG9jY3Vycy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5EZWxheSBlYWNoIGNsaWNrIGJ5IG9uZSBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXkoMTAwMCk7IC8vIGVhY2ggY2xpY2sgZW1pdHRlZCBhZnRlciAxIHNlY29uZFxuICogZGVsYXllZENsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RGVsYXkgYWxsIGNsaWNrcyB1bnRpbCBhIGZ1dHVyZSBkYXRlIGhhcHBlbnM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGRhdGUgPSBuZXcgRGF0ZSgnTWFyY2ggMTUsIDIwNTAgMTI6MDA6MDAnKTsgLy8gaW4gdGhlIGZ1dHVyZVxuICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXkoZGF0ZSk7IC8vIGNsaWNrIGVtaXR0ZWQgb25seSBhZnRlciB0aGF0IGRhdGVcbiAqIGRlbGF5ZWRDbGlja3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cbiAqIEBzZWUge0BsaW5rIGRlbGF5V2hlbn1cbiAqXG4gKiBAcGFyYW0ge251bWJlcnxEYXRlfSBkZWxheSBUaGUgZGVsYXkgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIChhIGBudW1iZXJgKSBvclxuICogYSBgRGF0ZWAgdW50aWwgd2hpY2ggdGhlIGVtaXNzaW9uIG9mIHRoZSBzb3VyY2UgaXRlbXMgaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3JcbiAqIG1hbmFnaW5nIHRoZSB0aW1lcnMgdGhhdCBoYW5kbGUgdGhlIHRpbWUtc2hpZnQgZm9yIGVhY2ggaXRlbS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBkZWxheXMgdGhlIGVtaXNzaW9ucyBvZiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgdGltZW91dCBvciBEYXRlLlxuICogQG1ldGhvZCBkZWxheVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVsYXkoZGVsYXksIHNjaGVkdWxlcikge1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgdmFyIGFic29sdXRlRGVsYXkgPSBpc0RhdGVfMS5pc0RhdGUoZGVsYXkpO1xuICAgIHZhciBkZWxheUZvciA9IGFic29sdXRlRGVsYXkgPyAoK2RlbGF5IC0gc2NoZWR1bGVyLm5vdygpKSA6IE1hdGguYWJzKGRlbGF5KTtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWxheU9wZXJhdG9yKGRlbGF5Rm9yLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMuZGVsYXkgPSBkZWxheTtcbnZhciBEZWxheU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWxheU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgRGVsYXlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWxheVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kZWxheSwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWxheU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRGVsYXlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlbGF5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXksIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lcnJvcmVkID0gZmFsc2U7XG4gICAgfVxuICAgIERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgc291cmNlID0gc3RhdGUuc291cmNlO1xuICAgICAgICB2YXIgcXVldWUgPSBzb3VyY2UucXVldWU7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSBzdGF0ZS5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHN0YXRlLmRlc3RpbmF0aW9uO1xuICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCAmJiAocXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSkgPD0gMCkge1xuICAgICAgICAgICAgcXVldWUuc2hpZnQoKS5ub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBkZWxheV8xID0gTWF0aC5tYXgoMCwgcXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSk7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBkZWxheV8xKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwge1xuICAgICAgICAgICAgc291cmNlOiB0aGlzLCBkZXN0aW5hdGlvbjogdGhpcy5kZXN0aW5hdGlvbiwgc2NoZWR1bGVyOiBzY2hlZHVsZXJcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMuZXJyb3JlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgRGVsYXlNZXNzYWdlKHNjaGVkdWxlci5ub3coKSArIHRoaXMuZGVsYXksIG5vdGlmaWNhdGlvbik7XG4gICAgICAgIHRoaXMucXVldWUucHVzaChtZXNzYWdlKTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU5vdGlmaWNhdGlvbihOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVsYXlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xudmFyIERlbGF5TWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVsYXlNZXNzYWdlKHRpbWUsIG5vdGlmaWNhdGlvbikge1xuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIERlbGF5TWVzc2FnZTtcbn0oKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxheS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlbGF5LmpzXG4gKiogbW9kdWxlIGlkID0gNDcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVsYXlXaGVuXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kZWxheVdoZW4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWxheVdoZW4gPSBkZWxheVdoZW5fMS5kZWxheVdoZW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxheVdoZW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZGVsYXlXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNDczXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBkZWxheXMgdGhlIGVtaXNzaW9uIG9mIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlXG4gKiBieSBhIHN1YnNjcmlwdGlvbiBkZWxheSBhbmQgYSBkZWxheSBzZWxlY3RvciBmdW5jdGlvbiBmb3IgZWFjaCBlbGVtZW50LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgZnVuY3Rpb24gdG8gcmV0cmlldmUgYSBzZXF1ZW5jZSBpbmRpY2F0aW5nIHRoZSBkZWxheSBmb3IgZWFjaCBnaXZlbiBlbGVtZW50LlxuICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzZXF1ZW5jZSBpbmRpY2F0aW5nIHRoZSBkZWxheSBmb3IgdGhlIHN1YnNjcmlwdGlvbiB0byB0aGUgc291cmNlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGRlbGF5cyB0aGUgZW1pc3Npb25zIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSB0aGUgc3BlY2lmaWVkIHRpbWVvdXQgb3IgRGF0ZS5cbiAqIEBtZXRob2QgZGVsYXlXaGVuXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBkZWxheVdoZW4oZGVsYXlEdXJhdGlvblNlbGVjdG9yLCBzdWJzY3JpcHRpb25EZWxheSkge1xuICAgIGlmIChzdWJzY3JpcHRpb25EZWxheSkge1xuICAgICAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZSh0aGlzLCBzdWJzY3JpcHRpb25EZWxheSlcbiAgICAgICAgICAgIC5saWZ0KG5ldyBEZWxheVdoZW5PcGVyYXRvcihkZWxheUR1cmF0aW9uU2VsZWN0b3IpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG59XG5leHBvcnRzLmRlbGF5V2hlbiA9IGRlbGF5V2hlbjtcbnZhciBEZWxheVdoZW5PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yO1xuICAgIH1cbiAgICBEZWxheVdoZW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEZWxheVdoZW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVsYXlXaGVuT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZWxheVdoZW5TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVsYXlXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEZWxheVdoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheUR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvciA9IGRlbGF5RHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgIH1cbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChvdXRlclZhbHVlKTtcbiAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5fZXJyb3IoZXJyb3IpO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oaW5uZXJTdWIpO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cnlDb21wbGV0ZSgpO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBkZWxheU5vdGlmaWVyID0gdGhpcy5kZWxheUR1cmF0aW9uU2VsZWN0b3IodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGRlbGF5Tm90aWZpZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyeURlbGF5KGRlbGF5Tm90aWZpZXIsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5yZW1vdmVTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uSWR4ID0gdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5pbmRleE9mKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIHZhciB2YWx1ZSA9IG51bGw7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25JZHggIT09IC0xKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWVzW3N1YnNjcmlwdGlvbklkeF07XG4gICAgICAgICAgICB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JZHgsIDEpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZXMuc3BsaWNlKHN1YnNjcmlwdGlvbklkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RGVsYXkgPSBmdW5jdGlvbiAoZGVsYXlOb3RpZmllciwgdmFsdWUpIHtcbiAgICAgICAgdmFyIG5vdGlmaWVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBkZWxheU5vdGlmaWVyLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMuYWRkKG5vdGlmaWVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5wdXNoKG5vdGlmaWVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy52YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgfTtcbiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS50cnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkICYmIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEZWxheVdoZW5TdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZShzb3VyY2UsIHN1YnNjcmlwdGlvbkRlbGF5KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25EZWxheSA9IHN1YnNjcmlwdGlvbkRlbGF5O1xuICAgIH1cbiAgICBTdWJzY3JpcHRpb25EZWxheU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkRlbGF5LnN1YnNjcmliZShuZXcgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyKHBhcmVudCwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuc291cmNlU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHVudXNlZCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvU291cmNlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLnBhcmVudC5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Tb3VyY2UoKTtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuc3Vic2NyaWJlVG9Tb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5zb3VyY2VTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHRoaXMucGFyZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGF5V2hlbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2RlbGF5V2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRpc3RpbmN0VW50aWxDaGFuZ2VkXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRpc3RpbmN0VW50aWxDaGFuZ2VkID0gZGlzdGluY3RVbnRpbENoYW5nZWRfMS5kaXN0aW5jdFVudGlsQ2hhbmdlZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3RpbmN0VW50aWxDaGFuZ2VkLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkLmpzXG4gKiogbW9kdWxlIGlkID0gNDc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFsbCBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IGFyZSBkaXN0aW5jdCBieSBjb21wYXJpc29uIGZyb20gdGhlIHByZXZpb3VzIGl0ZW0uXG4gKiBJZiBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIHRoZW4gaXQgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggaXRlbSB0byB0ZXN0IGZvciB3aGV0aGVyIG9yIG5vdCB0aGF0IHZhbHVlIHNob3VsZCBiZSBlbWl0dGVkLlxuICogSWYgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIGlzIG5vdCBwcm92aWRlZCwgYW4gZXF1YWxpdHkgY2hlY2sgaXMgdXNlZCBieSBkZWZhdWx0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW2NvbXBhcmVdIG9wdGlvbmFsIGNvbXBhcmlzb24gZnVuY3Rpb24gY2FsbGVkIHRvIHRlc3QgaWYgYW4gaXRlbSBpcyBkaXN0aW5jdCBmcm9tIHRoZSBwcmV2aW91cyBpdGVtIGluIHRoZSBzb3VyY2UuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgd2l0aCBkaXN0aW5jdCB2YWx1ZXMuXG4gKiBAbWV0aG9kIGRpc3RpbmN0VW50aWxDaGFuZ2VkXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBkaXN0aW5jdFVudGlsQ2hhbmdlZChjb21wYXJlLCBrZXlTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IERpc3RpbmN0VW50aWxDaGFuZ2VkT3BlcmF0b3IoY29tcGFyZSwga2V5U2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuZGlzdGluY3RVbnRpbENoYW5nZWQgPSBkaXN0aW5jdFVudGlsQ2hhbmdlZDtcbnZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yKGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuY29tcGFyZSA9IGNvbXBhcmU7XG4gICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjtcbiAgICB9XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb21wYXJlLCB0aGlzLmtleVNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvbXBhcmUsIGtleVNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuICAgICAgICB0aGlzLmhhc0tleSA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIGNvbXBhcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGFyZSA9IGNvbXBhcmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHggPT09IHk7XG4gICAgfTtcbiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBrZXlTZWxlY3RvciA9IHRoaXMua2V5U2VsZWN0b3I7XG4gICAgICAgIHZhciBrZXkgPSB2YWx1ZTtcbiAgICAgICAgaWYgKGtleVNlbGVjdG9yKSB7XG4gICAgICAgICAgICBrZXkgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMua2V5U2VsZWN0b3IpKHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaGFzS2V5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuY29tcGFyZSkodGhpcy5rZXksIGtleSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFzS2V5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQm9vbGVhbihyZXN1bHQpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3RVbnRpbENoYW5nZWQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGRvXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9kbycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmRvID0gZG9fMS5fZG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9kby5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFBlcmZvcm0gYSBzaWRlIGVmZmVjdCBmb3IgZXZlcnkgZW1pc3Npb24gb24gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgcmV0dXJuXG4gKiBhbiBPYnNlcnZhYmxlIHRoYXQgaXMgaWRlbnRpY2FsIHRvIHRoZSBzb3VyY2UuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkludGVyY2VwdHMgZWFjaCBlbWlzc2lvbiBvbiB0aGUgc291cmNlIGFuZCBydW5zIGFcbiAqIGZ1bmN0aW9uLCBidXQgcmV0dXJucyBhbiBvdXRwdXQgd2hpY2ggaXMgaWRlbnRpY2FsIHRvIHRoZSBzb3VyY2UuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvZG8ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogUmV0dXJucyBhIG1pcnJvcmVkIE9ic2VydmFibGUgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBidXQgbW9kaWZpZWQgc28gdGhhdFxuICogdGhlIHByb3ZpZGVkIE9ic2VydmVyIGlzIGNhbGxlZCB0byBwZXJmb3JtIGEgc2lkZSBlZmZlY3QgZm9yIGV2ZXJ5IHZhbHVlLFxuICogZXJyb3IsIGFuZCBjb21wbGV0aW9uIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZS4gQW55IGVycm9ycyB0aGF0IGFyZSB0aHJvd24gaW5cbiAqIHRoZSBhZm9yZW1lbnRpb25lZCBPYnNlcnZlciBvciBoYW5kbGVycyBhcmUgc2FmZWx5IHNlbnQgZG93biB0aGUgZXJyb3IgcGF0aFxuICogb2YgdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIFRoaXMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgeW91ciBPYnNlcnZhYmxlcyBmb3IgdGhlIGNvcnJlY3QgdmFsdWVzXG4gKiBvciBwZXJmb3JtaW5nIG90aGVyIHNpZGUgZWZmZWN0cy5cbiAqXG4gKiBOb3RlOiB0aGlzIGlzIGRpZmZlcmVudCB0byBhIGBzdWJzY3JpYmVgIG9uIHRoZSBPYnNlcnZhYmxlLiBJZiB0aGUgT2JzZXJ2YWJsZVxuICogcmV0dXJuZWQgYnkgYGRvYCBpcyBub3Qgc3Vic2NyaWJlZCwgdGhlIHNpZGUgZWZmZWN0cyBzcGVjaWZpZWQgYnkgdGhlXG4gKiBPYnNlcnZlciB3aWxsIG5ldmVyIGhhcHBlbi4gYGRvYCB0aGVyZWZvcmUgc2ltcGx5IHNwaWVzIG9uIGV4aXN0aW5nXG4gKiBleGVjdXRpb24sIGl0IGRvZXMgbm90IHRyaWdnZXIgYW4gZXhlY3V0aW9uIHRvIGhhcHBlbiBsaWtlIGBzdWJzY3JpYmVgIGRvZXMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGV2ZXJ5IGV2ZXJ5IGNsaWNrIHRvIHRoZSBjbGllbnRYIHBvc2l0aW9uIG9mIHRoYXQgY2xpY2ssIHdoaWxlIGFsc28gbG9nZ2luZyB0aGUgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHBvc2l0aW9ucyA9IGNsaWNrc1xuICogICAuZG8oZXYgPT4gY29uc29sZS5sb2coZXYpKVxuICogICAubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuICogcG9zaXRpb25zLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtYXB9XG4gKiBAc2VlIHtAbGluayBzdWJzY3JpYmV9XG4gKlxuICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbn0gW25leHRPck9ic2VydmVyXSBBIG5vcm1hbCBPYnNlcnZlciBvYmplY3Qgb3IgYVxuICogY2FsbGJhY2sgZm9yIGBuZXh0YC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtlcnJvcl0gQ2FsbGJhY2sgZm9yIGVycm9ycyBpbiB0aGUgc291cmNlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW2NvbXBsZXRlXSBDYWxsYmFjayBmb3IgdGhlIGNvbXBsZXRpb24gb2YgdGhlIHNvdXJjZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgaWRlbnRpY2FsIHRvIHRoZSBzb3VyY2UsIGJ1dCBydW5zIHRoZVxuICogc3BlY2lmaWVkIE9ic2VydmVyIG9yIGNhbGxiYWNrKHMpIGZvciBlYWNoIGl0ZW0uXG4gKiBAbWV0aG9kIGRvXG4gKiBAbmFtZSBkb1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gX2RvKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEb09wZXJhdG9yKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpKTtcbn1cbmV4cG9ydHMuX2RvID0gX2RvO1xudmFyIERvT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERvT3BlcmF0b3IobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB0aGlzLm5leHRPck9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICAgIH1cbiAgICBEb09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IERvU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5leHRPck9ic2VydmVyLCB0aGlzLmVycm9yLCB0aGlzLmNvbXBsZXRlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRG9PcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIERvU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERvU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB2YXIgc2FmZVN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYWRkKHNhZmVTdWJzY3JpYmVyKTtcbiAgICAgICAgdGhpcy5zYWZlU3Vic2NyaWJlciA9IHNhZmVTdWJzY3JpYmVyO1xuICAgIH1cbiAgICBEb1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IHRoaXMuc2FmZVN1YnNjcmliZXI7XG4gICAgICAgIHNhZmVTdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERvU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgc2FmZVN1YnNjcmliZXIgPSB0aGlzLnNhZmVTdWJzY3JpYmVyO1xuICAgICAgICBzYWZlU3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICBpZiAoc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHNhZmVTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzYWZlU3Vic2NyaWJlciA9IHRoaXMuc2FmZVN1YnNjcmliZXI7XG4gICAgICAgIHNhZmVTdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIGlmIChzYWZlU3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Ioc2FmZVN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRG9TdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9kby5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGV4cGFuZF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZXhwYW5kJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZXhwYW5kID0gZXhwYW5kXzEuZXhwYW5kO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhwYW5kLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2V4cGFuZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgd2hlcmUgZm9yIGVhY2ggaXRlbSBpbiB0aGUgc291cmNlIE9ic2VydmFibGUsIHRoZSBzdXBwbGllZCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIGVhY2ggaXRlbSxcbiAqIHJlc3VsdGluZyBpbiBhIG5ldyB2YWx1ZSB0byB0aGVuIGJlIGFwcGxpZWQgYWdhaW4gd2l0aCB0aGUgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9qZWN0IHRoZSBmdW5jdGlvbiBmb3IgcHJvamVjdGluZyB0aGUgbmV4dCBlbWl0dGVkIGl0ZW0gb2YgdGhlIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmN1cnJlbnRdIHRoZSBtYXggbnVtYmVyIG9mIG9ic2VydmFibGVzIHRoYXQgY2FuIGJlIGNyZWF0ZWQgY29uY3VycmVudGx5LiBkZWZhdWx0cyB0byBpbmZpbml0eS5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBUaGUgU2NoZWR1bGVyIHRvIHVzZSBmb3IgbWFuYWdpbmcgdGhlIGV4cGFuc2lvbnMuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIGNvbnRhaW5pbmcgdGhlIGV4cGFuc2lvbnMgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBleHBhbmRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGV4cGFuZChwcm9qZWN0LCBjb25jdXJyZW50LCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gdW5kZWZpbmVkOyB9XG4gICAgY29uY3VycmVudCA9IChjb25jdXJyZW50IHx8IDApIDwgMSA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6IGNvbmN1cnJlbnQ7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRXhwYW5kT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLmV4cGFuZCA9IGV4cGFuZDtcbnZhciBFeHBhbmRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXhwYW5kT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBFeHBhbmRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBFeHBhbmRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy5jb25jdXJyZW50LCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEV4cGFuZE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuRXhwYW5kT3BlcmF0b3IgPSBFeHBhbmRPcGVyYXRvcjtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRXhwYW5kU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV4cGFuZFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRXhwYW5kU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChjb25jdXJyZW50IDwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIEV4cGFuZFN1YnNjcmliZXIuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIHJlc3VsdCA9IGFyZy5yZXN1bHQsIHZhbHVlID0gYXJnLnZhbHVlLCBpbmRleCA9IGFyZy5pbmRleDtcbiAgICAgICAgc3Vic2NyaWJlci5zdWJzY3JpYmVUb1Byb2plY3Rpb24ocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuICAgIH07XG4gICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMucHJvamVjdCkodmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1Byb2plY3Rpb24ocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCByZXN1bHQ6IHJlc3VsdCwgdmFsdWU6IHZhbHVlLCBpbmRleDogaW5kZXggfTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoLCAwLCBzdGF0ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLnN1YnNjcmliZVRvUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChyZXN1bHQsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ29tcGxldGVkICYmIHRoaXMuYWN0aXZlID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5fbmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEV4cGFuZFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5FeHBhbmRTdWJzY3JpYmVyID0gRXhwYW5kU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cGFuZC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2V4cGFuZC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZpbHRlcl8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZmlsdGVyJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmlsdGVyID0gZmlsdGVyXzEuZmlsdGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2ZpbHRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIEZpbHRlciBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBvbmx5IGVtaXR0aW5nIHRob3NlIHRoYXRcbiAqIHNhdGlzZnkgYSBzcGVjaWZpZWQgcHJlZGljYXRlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlXG4gKiBbQXJyYXkucHJvdG90eXBlLmZpbHRlcigpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9maWx0ZXIpLFxuICogaXQgb25seSBlbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBpZiBpdCBwYXNzZXMgYSBjcml0ZXJpb24gZnVuY3Rpb24uPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvZmlsdGVyLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFNpbWlsYXIgdG8gdGhlIHdlbGwta25vd24gYEFycmF5LnByb3RvdHlwZS5maWx0ZXJgIG1ldGhvZCwgdGhpcyBvcGVyYXRvclxuICogdGFrZXMgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBwYXNzZXMgdGhlbSB0aHJvdWdoIGEgYHByZWRpY2F0ZWBcbiAqIGZ1bmN0aW9uIGFuZCBvbmx5IGVtaXRzIHRob3NlIHZhbHVlcyB0aGF0IHlpZWxkZWQgYHRydWVgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgb25seSBjbGljayBldmVudHMgd2hvc2UgdGFyZ2V0IHdhcyBhIERJViBlbGVtZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBjbGlja3NPbkRpdnMgPSBjbGlja3MuZmlsdGVyKGV2ID0+IGV2LnRhcmdldC50YWdOYW1lID09PSAnRElWJyk7XG4gKiBjbGlja3NPbkRpdnMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGRpc3RpbmN0fVxuICogQHNlZSB7QGxpbmsgZGlzdGluY3RLZXl9XG4gKiBAc2VlIHtAbGluayBkaXN0aW5jdFVudGlsQ2hhbmdlZH1cbiAqIEBzZWUge0BsaW5rIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkfVxuICogQHNlZSB7QGxpbmsgaWdub3JlRWxlbWVudHN9XG4gKiBAc2VlIHtAbGluayBwYXJ0aXRpb259XG4gKiBAc2VlIHtAbGluayBza2lwfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBib29sZWFufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0aGF0XG4gKiBldmFsdWF0ZXMgZWFjaCB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgaXQgcmV0dXJucyBgdHJ1ZWAsXG4gKiB0aGUgdmFsdWUgaXMgZW1pdHRlZCwgaWYgYGZhbHNlYCB0aGUgdmFsdWUgaXMgbm90IHBhc3NlZCB0byB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLiBUaGUgYGluZGV4YCBwYXJhbWV0ZXIgaXMgdGhlIG51bWJlciBgaWAgZm9yIHRoZSBpLXRoIHNvdXJjZVxuICogZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyXG4gKiBgMGAuXG4gKiBAcGFyYW0ge2FueX0gW3RoaXNBcmddIEFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIGRldGVybWluZSB0aGUgdmFsdWUgb2YgYHRoaXNgXG4gKiBpbiB0aGUgYHByZWRpY2F0ZWAgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIG9mIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2UgdGhhdCB3ZXJlXG4gKiBhbGxvd2VkIGJ5IHRoZSBgcHJlZGljYXRlYCBmdW5jdGlvbi5cbiAqIEBtZXRob2QgZmlsdGVyXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRmlsdGVyT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnKSk7XG59XG5leHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcbnZhciBGaWx0ZXJPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRmlsdGVyT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgIH1cbiAgICBGaWx0ZXJPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBGaWx0ZXJTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnRoaXNBcmcpKTtcbiAgICB9O1xuICAgIHJldHVybiBGaWx0ZXJPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEZpbHRlclN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGaWx0ZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZpbHRlclN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgfVxuICAgIC8vIHRoZSB0cnkgY2F0Y2ggYmxvY2sgYmVsb3cgaXMgbGVmdCBzcGVjaWZpY2FsbHkgZm9yXG4gICAgLy8gb3B0aW1pemF0aW9uIGFuZCBwZXJmIHJlYXNvbnMuIGEgdHJ5Q2F0Y2hlciBpcyBub3QgbmVjZXNzYXJ5IGhlcmUuXG4gICAgRmlsdGVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5jb3VudCsrKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEZpbHRlclN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXIuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9maWx0ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0ODJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmaW5hbGx5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9maW5hbGx5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmluYWxseSA9IGZpbmFsbHlfMS5fZmluYWxseTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmFsbHkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZmluYWxseS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgc291cmNlIE9ic2VydmFibGUsIGJ1dCB3aWxsIGNhbGwgYSBzcGVjaWZpZWQgZnVuY3Rpb24gd2hlblxuICogdGhlIHNvdXJjZSB0ZXJtaW5hdGVzIG9uIGNvbXBsZXRlIG9yIGVycm9yLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZmluYWxseVNlbGVjdG9yIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHNvdXJjZSB0ZXJtaW5hdGVzLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IG1pcnJvcnMgdGhlIHNvdXJjZSwgYnV0IHdpbGwgY2FsbCB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9uIG9uIHRlcm1pbmF0aW9uLlxuICogQG1ldGhvZCBmaW5hbGx5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBfZmluYWxseShmaW5hbGx5U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBGaW5hbGx5T3BlcmF0b3IoZmluYWxseVNlbGVjdG9yKSk7XG59XG5leHBvcnRzLl9maW5hbGx5ID0gX2ZpbmFsbHk7XG52YXIgRmluYWxseU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGaW5hbGx5T3BlcmF0b3IoZmluYWxseVNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZmluYWxseVNlbGVjdG9yID0gZmluYWxseVNlbGVjdG9yO1xuICAgIH1cbiAgICBGaW5hbGx5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmluYWxseVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5maW5hbGx5U2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBGaW5hbGx5T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBGaW5hbGx5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEZpbmFsbHlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEZpbmFsbHlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBmaW5hbGx5U2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKGZpbmFsbHlTZWxlY3RvcikpO1xuICAgIH1cbiAgICByZXR1cm4gRmluYWxseVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5hbGx5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvZmluYWxseS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZpcnN0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9maXJzdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmZpcnN0ID0gZmlyc3RfMS5maXJzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcnN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2ZpcnN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBFbXB0eUVycm9yXzEgPSByZXF1aXJlKCcuLi91dGlsL0VtcHR5RXJyb3InKTtcbi8qKlxuICogRW1pdHMgb25seSB0aGUgZmlyc3QgdmFsdWUgKG9yIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IG1lZXRzIHNvbWUgY29uZGl0aW9uKVxuICogZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVtaXRzIG9ubHkgdGhlIGZpcnN0IHZhbHVlLiBPciBlbWl0cyBvbmx5IHRoZSBmaXJzdFxuICogdmFsdWUgdGhhdCBwYXNzZXMgc29tZSB0ZXN0Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2ZpcnN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIElmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgYGZpcnN0YCBlbWl0cyB0aGUgZmlyc3QgdmFsdWUgb2YgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSwgdGhlbiBjb21wbGV0ZXMuIElmIGNhbGxlZCB3aXRoIGEgYHByZWRpY2F0ZWAgZnVuY3Rpb24sIGBmaXJzdGBcbiAqIGVtaXRzIHRoZSBmaXJzdCB2YWx1ZSBvZiB0aGUgc291cmNlIHRoYXQgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGNvbmRpdGlvbi4gSXRcbiAqIG1heSBhbHNvIHRha2UgYSBgcmVzdWx0U2VsZWN0b3JgIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIG91dHB1dCB2YWx1ZSBmcm9tXG4gKiB0aGUgaW5wdXQgdmFsdWUsIGFuZCBhIGBkZWZhdWx0VmFsdWVgIHRvIGVtaXQgaW4gY2FzZSB0aGUgc291cmNlIGNvbXBsZXRlc1xuICogYmVmb3JlIGl0IGlzIGFibGUgdG8gZW1pdCBhIHZhbGlkIHZhbHVlLiBUaHJvd3MgYW4gZXJyb3IgaWYgYGRlZmF1bHRWYWx1ZWBcbiAqIHdhcyBub3QgcHJvdmlkZWQgYW5kIGEgbWF0Y2hpbmcgZWxlbWVudCBpcyBub3QgZm91bmQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBvbmx5IHRoZSBmaXJzdCBjbGljayB0aGF0IGhhcHBlbnMgb24gdGhlIERPTTwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLmZpcnN0KCk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXRzIHRoZSBmaXJzdCBjbGljayB0aGF0IGhhcHBlbnMgb24gYSBESVY8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5maXJzdChldiA9PiBldi50YXJnZXQudGFnTmFtZSA9PT0gJ0RJVicpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBmaWx0ZXJ9XG4gKiBAc2VlIHtAbGluayBmaW5kfVxuICogQHNlZSB7QGxpbmsgdGFrZX1cbiAqXG4gKiBAdGhyb3dzIHtFbXB0eUVycm9yfSBEZWxpdmVycyBhbiBFbXB0eUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmBcbiAqIGNhbGxiYWNrIGlmIHRoZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBiZWZvcmUgYW55IGBuZXh0YCBub3RpZmljYXRpb24gd2FzIHNlbnQuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgc291cmNlOiBPYnNlcnZhYmxlPFQ+KTogYm9vbGVhbn0gW3ByZWRpY2F0ZV1cbiAqIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIGNhbGxlZCB3aXRoIGVhY2ggaXRlbSB0byB0ZXN0IGZvciBjb25kaXRpb24gbWF0Y2hpbmcuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogUn0gW3Jlc3VsdFNlbGVjdG9yXSBBIGZ1bmN0aW9uIHRvXG4gKiBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpc1xuICogZnVuY3Rpb24gYXJlOlxuICogLSBgdmFsdWVgOiB0aGUgdmFsdWUgdGhhdCB3YXMgZW1pdHRlZCBvbiB0aGUgc291cmNlLlxuICogLSBgaW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuXG4gKiBAcGFyYW0ge1J9IFtkZWZhdWx0VmFsdWVdIFRoZSBkZWZhdWx0IHZhbHVlIGVtaXR0ZWQgaW4gY2FzZSBubyB2YWxpZCB2YWx1ZVxuICogd2FzIGZvdW5kIG9uIHRoZSBzb3VyY2UuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFR8Uj59IGFuIE9ic2VydmFibGUgb2YgdGhlIGZpcnN0IGl0ZW0gdGhhdCBtYXRjaGVzIHRoZVxuICogY29uZGl0aW9uLlxuICogQG1ldGhvZCBmaXJzdFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZmlyc3QocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRmlyc3RPcGVyYXRvcihwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHRoaXMpKTtcbn1cbmV4cG9ydHMuZmlyc3QgPSBmaXJzdDtcbnZhciBGaXJzdE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBGaXJzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgRmlyc3RPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgRmlyc3RTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5kZWZhdWx0VmFsdWUsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRmlyc3RPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEZpcnN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEZpcnN0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGaXJzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgRmlyc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLnByZWRpY2F0ZSkge1xuICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lbWl0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByZWRpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCBpbmRleCwgdGhpcy5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLl9lbWl0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2VtaXQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlSZXN1bHRTZWxlY3Rvcih2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2VtaXRGaW5hbCh2YWx1ZSk7XG4gICAgfTtcbiAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZW1pdEZpbmFsKHJlc3VsdCk7XG4gICAgfTtcbiAgICBGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl9lbWl0RmluYWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoIXRoaXMuaGFzQ29tcGxldGVkICYmIHR5cGVvZiB0aGlzLmRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodGhpcy5kZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5oYXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBFbXB0eUVycm9yXzEuRW1wdHlFcnJvcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGaXJzdFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maXJzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2ZpcnN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBPYnNlcnZhYmxlIG9yIGEgc2VxdWVuY2Ugd2FzIHF1ZXJpZWQgYnV0IGhhcyBub1xuICogZWxlbWVudHMuXG4gKlxuICogQHNlZSB7QGxpbmsgZmlyc3R9XG4gKiBAc2VlIHtAbGluayBsYXN0fVxuICogQHNlZSB7QGxpbmsgc2luZ2xlfVxuICpcbiAqIEBjbGFzcyBFbXB0eUVycm9yXG4gKi9cbnZhciBFbXB0eUVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1wdHlFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbXB0eUVycm9yKCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAnbm8gZWxlbWVudHMgaW4gc2VxdWVuY2UnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0VtcHR5RXJyb3InO1xuICAgIH1cbiAgICByZXR1cm4gRW1wdHlFcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydHMuRW1wdHlFcnJvciA9IEVtcHR5RXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbXB0eUVycm9yLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvdXRpbC9FbXB0eUVycm9yLmpzXG4gKiogbW9kdWxlIGlkID0gNDg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZ3JvdXBCeV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZ3JvdXBCeScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmdyb3VwQnkgPSBncm91cEJ5XzEuZ3JvdXBCeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3VwQnkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvZ3JvdXBCeS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xudmFyIE1hcF8xID0gcmVxdWlyZSgnLi4vdXRpbC9NYXAnKTtcbnZhciBGYXN0TWFwXzEgPSByZXF1aXJlKCcuLi91dGlsL0Zhc3RNYXAnKTtcbi8qKlxuICogR3JvdXBzIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IGFuIE9ic2VydmFibGUgYWNjb3JkaW5nIHRvIGEgc3BlY2lmaWVkIGNyaXRlcmlvbixcbiAqIGFuZCBlbWl0cyB0aGVzZSBncm91cGVkIGl0ZW1zIGFzIGBHcm91cGVkT2JzZXJ2YWJsZXNgLCBvbmVcbiAqIHtAbGluayBHcm91cGVkT2JzZXJ2YWJsZX0gcGVyIGdyb3VwLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvZ3JvdXBCeS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogS30ga2V5U2VsZWN0b3IgYSBmdW5jdGlvbiB0aGF0IGV4dHJhY3RzIHRoZSBrZXlcbiAqIGZvciBlYWNoIGl0ZW0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogUn0gW2VsZW1lbnRTZWxlY3Rvcl0gYSBmdW5jdGlvbiB0aGF0IGV4dHJhY3RzIHRoZVxuICogcmV0dXJuIGVsZW1lbnQgZm9yIGVhY2ggaXRlbS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oZ3JvdXBlZDogR3JvdXBlZE9ic2VydmFibGU8SyxSPik6IE9ic2VydmFibGU8YW55Pn0gW2R1cmF0aW9uU2VsZWN0b3JdXG4gKiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRvIGRldGVybWluZSBob3cgbG9uZyBlYWNoIGdyb3VwIHNob3VsZFxuICogZXhpc3QuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPEdyb3VwZWRPYnNlcnZhYmxlPEssUj4+fSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHNcbiAqIEdyb3VwZWRPYnNlcnZhYmxlcywgZWFjaCBvZiB3aGljaCBjb3JyZXNwb25kcyB0byBhIHVuaXF1ZSBrZXkgdmFsdWUgYW5kIGVhY2hcbiAqIG9mIHdoaWNoIGVtaXRzIHRob3NlIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRoYXQgc2hhcmUgdGhhdCBrZXlcbiAqIHZhbHVlLlxuICogQG1ldGhvZCBncm91cEJ5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBncm91cEJ5KGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBHcm91cEJ5T3BlcmF0b3IodGhpcywga2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3RvcikpO1xufVxuZXhwb3J0cy5ncm91cEJ5ID0gZ3JvdXBCeTtcbnZhciBHcm91cEJ5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdyb3VwQnlPcGVyYXRvcihzb3VyY2UsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5lbGVtZW50U2VsZWN0b3IgPSBlbGVtZW50U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIEdyb3VwQnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBHcm91cEJ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmtleVNlbGVjdG9yLCB0aGlzLmVsZW1lbnRTZWxlY3RvciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBCeU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgR3JvdXBCeVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcm91cEJ5U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHcm91cEJ5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwga2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuICAgICAgICB0aGlzLmVsZW1lbnRTZWxlY3RvciA9IGVsZW1lbnRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5ncm91cHMgPSBudWxsO1xuICAgICAgICB0aGlzLmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy5hZGQoZGVzdGluYXRpb24pO1xuICAgIH1cbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGtleSA9IHRoaXMua2V5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ncm91cCh2YWx1ZSwga2V5KTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZ3JvdXAgPSBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7XG4gICAgICAgIGlmICghZ3JvdXBzKSB7XG4gICAgICAgICAgICBncm91cHMgPSB0aGlzLmdyb3VwcyA9IHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnID8gbmV3IEZhc3RNYXBfMS5GYXN0TWFwKCkgOiBuZXcgTWFwXzEuTWFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzLmdldChrZXkpO1xuICAgICAgICBpZiAoIWdyb3VwKSB7XG4gICAgICAgICAgICBncm91cHMuc2V0KGtleSwgZ3JvdXAgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKSk7XG4gICAgICAgICAgICB2YXIgZ3JvdXBlZE9ic2VydmFibGUgPSBuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCwgdGhpcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5kdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0RHVyYXRpb24oa2V5LCBncm91cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoZ3JvdXBlZE9ic2VydmFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0RWxlbWVudCh2YWx1ZSwgZ3JvdXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50cnlHcm91cE5leHQodmFsdWUsIGdyb3VwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9zZWxlY3RFbGVtZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBncm91cCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5lbGVtZW50U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyeUdyb3VwTmV4dChyZXN1bHQsIGdyb3VwKTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2VsZWN0RHVyYXRpb24gPSBmdW5jdGlvbiAoa2V5LCBncm91cCkge1xuICAgICAgICB2YXIgZHVyYXRpb247XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb25TZWxlY3RvcihuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZChkdXJhdGlvbi5zdWJzY3JpYmUobmV3IEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHRoaXMpKSk7XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUudHJ5R3JvdXBOZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBncm91cCkge1xuICAgICAgICBpZiAoIWdyb3VwLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBncm91cC5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGdyb3VwcyA9IHRoaXMuZ3JvdXBzO1xuICAgICAgICBpZiAoZ3JvdXBzKSB7XG4gICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGtleSkge1xuICAgICAgICAgICAgICAgIGdyb3VwLmVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdyb3Vwcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBncm91cHMgPSB0aGlzLmdyb3VwcztcbiAgICAgICAgaWYgKGdyb3Vwcykge1xuICAgICAgICAgICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBncm91cC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBncm91cHMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUucmVtb3ZlR3JvdXAgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHRoaXMuZ3JvdXBzLmRlbGV0ZShrZXkpO1xuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNVbnN1YnNjcmliZWQgJiYgIXRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBCeVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR3JvdXBEdXJhdGlvblN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR3JvdXBEdXJhdGlvblN1YnNjcmliZXIoa2V5LCBncm91cCwgcGFyZW50KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5ncm91cCA9IGdyb3VwO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICB9XG4gICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcbiAgICB9O1xuICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMudHJ5RXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHJ5Q29tcGxldGUoKTtcbiAgICB9O1xuICAgIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLnByb3RvdHlwZS50cnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cDtcbiAgICAgICAgaWYgKCFncm91cC5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgZ3JvdXAuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVHcm91cCh0aGlzLmtleSk7XG4gICAgfTtcbiAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXA7XG4gICAgICAgIGlmICghZ3JvdXAuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIGdyb3VwLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlR3JvdXAodGhpcy5rZXkpO1xuICAgIH07XG4gICAgcmV0dXJuIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLyoqXG4gKiBBbiBPYnNlcnZhYmxlIHJlcHJlc2VudGluZyB2YWx1ZXMgYmVsb25naW5nIHRvIHRoZSBzYW1lIGdyb3VwIHJlcHJlc2VudGVkIGJ5XG4gKiBhIGNvbW1vbiBrZXkuIFRoZSB2YWx1ZXMgZW1pdHRlZCBieSBhIEdyb3VwZWRPYnNlcnZhYmxlIGNvbWUgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgY29tbW9uIGtleSBpcyBhdmFpbGFibGUgYXMgdGhlIGZpZWxkIGBrZXlgIG9uIGFcbiAqIEdyb3VwZWRPYnNlcnZhYmxlIGluc3RhbmNlLlxuICpcbiAqIEBjbGFzcyBHcm91cGVkT2JzZXJ2YWJsZTxLLCBUPlxuICovXG52YXIgR3JvdXBlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcm91cGVkT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHcm91cGVkT2JzZXJ2YWJsZShrZXksIGdyb3VwU3ViamVjdCwgcmVmQ291bnRTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLmdyb3VwU3ViamVjdCA9IGdyb3VwU3ViamVjdDtcbiAgICAgICAgdGhpcy5yZWZDb3VudFN1YnNjcmlwdGlvbiA9IHJlZkNvdW50U3Vic2NyaXB0aW9uO1xuICAgIH1cbiAgICBHcm91cGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHJlZkNvdW50U3Vic2NyaXB0aW9uID0gX2EucmVmQ291bnRTdWJzY3JpcHRpb24sIGdyb3VwU3ViamVjdCA9IF9hLmdyb3VwU3ViamVjdDtcbiAgICAgICAgaWYgKHJlZkNvdW50U3Vic2NyaXB0aW9uICYmICFyZWZDb3VudFN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChuZXcgSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbihyZWZDb3VudFN1YnNjcmlwdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoZ3JvdXBTdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBlZE9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkdyb3VwZWRPYnNlcnZhYmxlID0gR3JvdXBlZE9ic2VydmFibGU7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ocGFyZW50KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgcGFyZW50LmNvdW50Kys7XG4gICAgfVxuICAgIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIGlmICghcGFyZW50LmlzVW5zdWJzY3JpYmVkICYmICF0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICBwYXJlbnQuY291bnQgLT0gMTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQuY291bnQgPT09IDAgJiYgcGFyZW50LmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb247XG59KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JvdXBCeS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2dyb3VwQnkuanNcbiAqKiBtb2R1bGUgaWQgPSA0ODlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4vcm9vdCcpO1xudmFyIE1hcFBvbHlmaWxsXzEgPSByZXF1aXJlKCcuL01hcFBvbHlmaWxsJyk7XG5leHBvcnRzLk1hcCA9IHJvb3RfMS5yb290Lk1hcCB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gTWFwUG9seWZpbGxfMS5NYXBQb2x5ZmlsbDsgfSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvTWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNDkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBNYXBQb2x5ZmlsbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFwUG9seWZpbGwoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuICAgICAgICB0aGlzLl9rZXlzID0gW107XG4gICAgfVxuICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICAgIHJldHVybiBpID09PSAtMSA/IHVuZGVmaW5lZCA6IHRoaXMuX3ZhbHVlc1tpXTtcbiAgICB9O1xuICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2tleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgdGhpcy5fdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5zaXplKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZXNbaV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICAgIGlmIChpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHRoaXMuX2tleXMuc3BsaWNlKGksIDEpO1xuICAgICAgICB0aGlzLnNpemUtLTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fdmFsdWVzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYiwgdGhpc0FyZykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBjYi5jYWxsKHRoaXNBcmcsIHRoaXMuX3ZhbHVlc1tpXSwgdGhpcy5fa2V5c1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNYXBQb2x5ZmlsbDtcbn0oKSk7XG5leHBvcnRzLk1hcFBvbHlmaWxsID0gTWFwUG9seWZpbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQb2x5ZmlsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvTWFwUG9seWZpbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA0OTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEZhc3RNYXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEZhc3RNYXAoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgfVxuICAgIEZhc3RNYXAucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNba2V5XSA9IG51bGw7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgRmFzdE1hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEZhc3RNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2tleV07XG4gICAgfTtcbiAgICBGYXN0TWFwLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlcykge1xuICAgICAgICAgICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHZhbHVlc1trZXldICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCB2YWx1ZXNba2V5XSwga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRmFzdE1hcC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge307XG4gICAgfTtcbiAgICByZXR1cm4gRmFzdE1hcDtcbn0oKSk7XG5leHBvcnRzLkZhc3RNYXAgPSBGYXN0TWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmFzdE1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvRmFzdE1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGlnbm9yZUVsZW1lbnRzXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9pZ25vcmVFbGVtZW50cycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmlnbm9yZUVsZW1lbnRzID0gaWdub3JlRWxlbWVudHNfMS5pZ25vcmVFbGVtZW50cztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlnbm9yZUVsZW1lbnRzLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gNDkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBub29wXzEgPSByZXF1aXJlKCcuLi91dGlsL25vb3AnKTtcbi8qKlxuICogSWdub3JlcyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIG9ubHkgcGFzc2VzIGNhbGxzIG9mIGBjb21wbGV0ZWAgb3IgYGVycm9yYC5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2lnbm9yZUVsZW1lbnRzLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIGVtcHR5IE9ic2VydmFibGUgdGhhdCBvbmx5IGNhbGxzIGBjb21wbGV0ZWBcbiAqIG9yIGBlcnJvcmAsIGJhc2VkIG9uIHdoaWNoIG9uZSBpcyBjYWxsZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBpZ25vcmVFbGVtZW50c1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gaWdub3JlRWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgSWdub3JlRWxlbWVudHNPcGVyYXRvcigpKTtcbn1cbmV4cG9ydHMuaWdub3JlRWxlbWVudHMgPSBpZ25vcmVFbGVtZW50cztcbjtcbnZhciBJZ25vcmVFbGVtZW50c09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c09wZXJhdG9yKCkge1xuICAgIH1cbiAgICBJZ25vcmVFbGVtZW50c09wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gSWdub3JlRWxlbWVudHNPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHVudXNlZCkge1xuICAgICAgICBub29wXzEubm9vcCgpO1xuICAgIH07XG4gICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlnbm9yZUVsZW1lbnRzLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvaWdub3JlRWxlbWVudHMuanNcbiAqKiBtb2R1bGUgaWQgPSA0OTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBhdWRpdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYXVkaXQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5hdWRpdCA9IGF1ZGl0XzEuYXVkaXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdWRpdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9hdWRpdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBAcGFyYW0gZHVyYXRpb25TZWxlY3RvclxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIGF1ZGl0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBhdWRpdChkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgQXVkaXRPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSk7XG59XG5leHBvcnRzLmF1ZGl0ID0gYXVkaXQ7XG52YXIgQXVkaXRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXVkaXRPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIEF1ZGl0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgQXVkaXRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIEF1ZGl0T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBBdWRpdFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBdWRpdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXVkaXRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBBdWRpdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy50aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoXzEudHJ5Q2F0Y2godGhpcy5kdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRocm90dGxlZCA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgZHVyYXRpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5jbGVhclRocm90dGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCB2YWx1ZSA9IF9hLnZhbHVlLCBoYXNWYWx1ZSA9IF9hLmhhc1ZhbHVlLCB0aHJvdHRsZWQgPSBfYS50aHJvdHRsZWQ7XG4gICAgICAgIGlmICh0aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRocm90dGxlZCk7XG4gICAgICAgICAgICB0aGlzLnRocm90dGxlZCA9IG51bGw7XG4gICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcbiAgICAgICAgdGhpcy5jbGVhclRocm90dGxlKCk7XG4gICAgfTtcbiAgICBBdWRpdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsZWFyVGhyb3R0bGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBBdWRpdFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9hdWRpdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGF1ZGl0VGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvYXVkaXRUaW1lJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYXVkaXRUaW1lID0gYXVkaXRUaW1lXzEuYXVkaXRUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXRUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL2F1ZGl0VGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBAcGFyYW0gZGVsYXlcbiAqIEBwYXJhbSBzY2hlZHVsZXJcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCBhdWRpdFRpbWVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGF1ZGl0VGltZShkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBBdWRpdFRpbWVPcGVyYXRvcihkZWxheSwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLmF1ZGl0VGltZSA9IGF1ZGl0VGltZTtcbnZhciBBdWRpdFRpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXVkaXRUaW1lT3BlcmF0b3IoZGVsYXksIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBBdWRpdFRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBBdWRpdFRpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXksIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQXVkaXRUaW1lT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBBdWRpdFRpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXVkaXRUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBdWRpdFRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBBdWRpdFRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMudGhyb3R0bGVkKSB7XG4gICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRocm90dGxlZCA9IHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgdGhpcy5kZWxheSwgdGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBdWRpdFRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbGVhclRocm90dGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCB2YWx1ZSA9IF9hLnZhbHVlLCBoYXNWYWx1ZSA9IF9hLmhhc1ZhbHVlLCB0aHJvdHRsZWQgPSBfYS50aHJvdHRsZWQ7XG4gICAgICAgIGlmICh0aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRocm90dGxlZCk7XG4gICAgICAgICAgICB0aGlzLnRocm90dGxlZCA9IG51bGw7XG4gICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEF1ZGl0VGltZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5mdW5jdGlvbiBkaXNwYXRjaE5leHQoc3Vic2NyaWJlcikge1xuICAgIHN1YnNjcmliZXIuY2xlYXJUaHJvdHRsZSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXRUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvYXVkaXRUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNDk4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbGFzdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvbGFzdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmxhc3QgPSBsYXN0XzEubGFzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbGFzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgRW1wdHlFcnJvcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9FbXB0eUVycm9yJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGxhc3QgaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEl0IG9wdGlvbmFsbHkgdGFrZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gYXMgYSBwYXJhbWV0ZXIsIGluIHdoaWNoIGNhc2UsIHJhdGhlciB0aGFuIGVtaXR0aW5nXG4gKiB0aGUgbGFzdCBpdGVtIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGUgcmVzdWx0aW5nIE9ic2VydmFibGUgd2lsbCBlbWl0IHRoZSBsYXN0IGl0ZW1cbiAqIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHRoYXQgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9sYXN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEB0aHJvd3Mge0VtcHR5RXJyb3J9IERlbGl2ZXJzIGFuIEVtcHR5RXJyb3IgdG8gdGhlIE9ic2VydmVyJ3MgYGVycm9yYFxuICogY2FsbGJhY2sgaWYgdGhlIE9ic2VydmFibGUgY29tcGxldGVzIGJlZm9yZSBhbnkgYG5leHRgIG5vdGlmaWNhdGlvbiB3YXMgc2VudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHByZWRpY2F0ZSAtIHRoZSBjb25kaXRpb24gYW55IHNvdXJjZSBlbWl0dGVkIGl0ZW0gaGFzIHRvIHNhdGlzZnkuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgbGFzdCBpdGVtIHNhdGlzZnlpbmcgdGhlIGdpdmVuIGNvbmRpdGlvblxuICogZnJvbSB0aGUgc291cmNlLCBvciBhbiBOb1N1Y2hFbGVtZW50RXhjZXB0aW9uIGlmIG5vIHN1Y2ggaXRlbXMgYXJlIGVtaXR0ZWQuXG4gKiBAdGhyb3dzIC0gVGhyb3dzIGlmIG5vIGl0ZW1zIHRoYXQgbWF0Y2ggdGhlIHByZWRpY2F0ZSBhcmUgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIGxhc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGxhc3QocHJlZGljYXRlLCByZXN1bHRTZWxlY3RvciwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTGFzdE9wZXJhdG9yKHByZWRpY2F0ZSwgcmVzdWx0U2VsZWN0b3IsIGRlZmF1bHRWYWx1ZSwgdGhpcykpO1xufVxuZXhwb3J0cy5sYXN0ID0gbGFzdDtcbnZhciBMYXN0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExhc3RPcGVyYXRvcihwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHNvdXJjZSkge1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIExhc3RPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTGFzdFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzLmRlZmF1bHRWYWx1ZSwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuICAgIHJldHVybiBMYXN0T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBMYXN0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExhc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExhc3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHJlc3VsdFNlbGVjdG9yLCBkZWZhdWx0VmFsdWUsIHNvdXJjZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLnByZWRpY2F0ZSkge1xuICAgICAgICAgICAgdGhpcy5fdHJ5UHJlZGljYXRlKHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyeVJlc3VsdFNlbGVjdG9yKHZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVByZWRpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCBpbmRleCwgdGhpcy5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyeVJlc3VsdFNlbGVjdG9yKHZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRTZWxlY3Rvcih2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHJlc3VsdDtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgfTtcbiAgICBMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh0aGlzLmxhc3RWYWx1ZSk7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IobmV3IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIExhc3RTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGFzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL2xhc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBsZXRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2xldCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmxldCA9IGxldF8xLmxldFByb3RvO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLmxldEJpbmQgPSBsZXRfMS5sZXRQcm90bztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxldC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9sZXQuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAcGFyYW0gZnVuY1xuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn1cbiAqIEBtZXRob2QgbGV0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBsZXRQcm90byhmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmModGhpcyk7XG59XG5leHBvcnRzLmxldFByb3RvID0gbGV0UHJvdG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sZXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9sZXQuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBldmVyeV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZXZlcnknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5ldmVyeSA9IGV2ZXJ5XzEuZXZlcnk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVyeS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9ldmVyeS5qc1xuICoqIG1vZHVsZSBpZCA9IDUwM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdoZXRoZXIgb3Igbm90IGV2ZXJ5IGl0ZW0gb2YgdGhlIHNvdXJjZSBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBzcGVjaWZpZWQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcmVkaWNhdGUgYSBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgaWYgYW4gaXRlbSBtZWV0cyBhIHNwZWNpZmllZCBjb25kaXRpb24uXG4gKiBAcGFyYW0ge2FueX0gW3RoaXNBcmddIG9wdGlvbmFsIG9iamVjdCB0byB1c2UgZm9yIGB0aGlzYCBpbiB0aGUgY2FsbGJhY2tcbiAqIEByZXR1cm4ge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgb2YgYm9vbGVhbnMgdGhhdCBkZXRlcm1pbmVzIGlmIGFsbCBpdGVtcyBvZiB0aGUgc291cmNlIE9ic2VydmFibGUgbWVldCB0aGUgY29uZGl0aW9uIHNwZWNpZmllZC5cbiAqIEBtZXRob2QgZXZlcnlcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGV2ZXJ5KHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgRXZlcnlPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXNBcmcsIHNvdXJjZSkpO1xufVxuZXhwb3J0cy5ldmVyeSA9IGV2ZXJ5O1xudmFyIEV2ZXJ5T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV2ZXJ5T3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnLCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBFdmVyeU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBFdmVyeVN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnRoaXNBcmcsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRXZlcnlPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEV2ZXJ5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEV2ZXJ5U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFdmVyeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZywgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZyB8fCB0aGlzO1xuICAgIH1cbiAgICBFdmVyeVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGV2ZXJ5VmFsdWVNYXRjaCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoZXZlcnlWYWx1ZU1hdGNoKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgRXZlcnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZS5jYWxsKHRoaXMudGhpc0FyZywgdmFsdWUsIHRoaXMuaW5kZXgrKywgdGhpcy5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlDb21wbGV0ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEV2ZXJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm5vdGlmeUNvbXBsZXRlKHRydWUpO1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZXJ5U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZXJ5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvZXZlcnkuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtYXBfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21hcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1hcCA9IG1hcF8xLm1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9tYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBBcHBsaWVzIGEgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uIHRvIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLCBhbmQgZW1pdHMgdGhlIHJlc3VsdGluZyB2YWx1ZXMgYXMgYW4gT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSBbQXJyYXkucHJvdG90eXBlLm1hcCgpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9tYXApLFxuICogaXQgcGFzc2VzIGVhY2ggc291cmNlIHZhbHVlIHRocm91Z2ggYSB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiB0byBnZXRcbiAqIGNvcnJlc3BvbmRpbmcgb3V0cHV0IHZhbHVlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogU2ltaWxhciB0byB0aGUgd2VsbCBrbm93biBgQXJyYXkucHJvdG90eXBlLm1hcGAgZnVuY3Rpb24sIHRoaXMgb3BlcmF0b3JcbiAqIGFwcGxpZXMgYSBwcm9qZWN0aW9uIHRvIGVhY2ggdmFsdWUgYW5kIGVtaXRzIHRoYXQgcHJvamVjdGlvbiBpbiB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgY2xpZW50WCBwb3NpdGlvbiBvZiB0aGF0IGNsaWNrPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBwb3NpdGlvbnMgPSBjbGlja3MubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuICogcG9zaXRpb25zLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtYXBUb31cbiAqIEBzZWUge0BsaW5rIHBsdWNrfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBSfSBwcm9qZWN0IFRoZSBmdW5jdGlvbiB0byBhcHBseVxuICogdG8gZWFjaCBgdmFsdWVgIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBUaGUgYGluZGV4YCBwYXJhbWV0ZXIgaXNcbiAqIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBlbWlzc2lvbiB0aGF0IGhhcyBoYXBwZW5lZCBzaW5jZSB0aGVcbiAqIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyIGAwYC5cbiAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gQW4gb3B0aW9uYWwgYXJndW1lbnQgdG8gZGVmaW5lIHdoYXQgYHRoaXNgIGlzIGluIHRoZVxuICogYHByb2plY3RgIGZ1bmN0aW9uLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBgcHJvamVjdGAgZnVuY3Rpb24uXG4gKiBAbWV0aG9kIG1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWFwKHByb2plY3QsIHRoaXNBcmcpIHtcbiAgICBpZiAodHlwZW9mIHByb2plY3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uIEFyZSB5b3UgbG9va2luZyBmb3IgYG1hcFRvKClgPycpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSk7XG59XG5leHBvcnRzLm1hcCA9IG1hcDtcbnZhciBNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFwT3BlcmF0b3IocHJvamVjdCwgdGhpc0FyZykge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgIH1cbiAgICBNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy50aGlzQXJnKSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgdGhpcztcbiAgICB9XG4gICAgLy8gTk9URTogVGhpcyBsb29rcyB1bm9wdGltaXplZCwgYnV0IGl0J3MgYWN0dWFsbHkgcHVycG9zZWZ1bGx5IE5PVFxuICAgIC8vIHVzaW5nIHRyeS9jYXRjaCBvcHRpbWl6YXRpb25zLlxuICAgIE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuY2FsbCh0aGlzLnRoaXNBcmcsIHZhbHVlLCB0aGlzLmNvdW50KyspO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvbWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNTA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWFwVG9fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21hcFRvJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwVG8gPSBtYXBUb18xLm1hcFRvO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwVG8uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA1MDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBFbWl0cyB0aGUgZ2l2ZW4gY29uc3RhbnQgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGV2ZXJ5IHRpbWUgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5MaWtlIHtAbGluayBtYXB9LCBidXQgaXQgbWFwcyBldmVyeSBzb3VyY2UgdmFsdWUgdG9cbiAqIHRoZSBzYW1lIG91dHB1dCB2YWx1ZSBldmVyeSB0aW1lLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL21hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFRha2VzIGEgY29uc3RhbnQgYHZhbHVlYCBhcyBhcmd1bWVudCwgYW5kIGVtaXRzIHRoYXQgd2hlbmV2ZXIgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLiBJbiBvdGhlciB3b3JkcywgaWdub3JlcyB0aGUgYWN0dWFsIHNvdXJjZSB2YWx1ZSxcbiAqIGFuZCBzaW1wbHkgdXNlcyB0aGUgZW1pc3Npb24gbW9tZW50IHRvIGtub3cgd2hlbiB0byBlbWl0IHRoZSBnaXZlbiBgdmFsdWVgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBldmVyeSBjbGljayB0byB0aGUgc3RyaW5nICdIaSc8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGdyZWV0aW5ncyA9IGNsaWNrcy5tYXBUbygnSGknKTtcbiAqIGdyZWV0aW5ncy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWFwfVxuICpcbiAqIEBwYXJhbSB7YW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFwIGVhY2ggc291cmNlIHZhbHVlIHRvLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBnaXZlbiBgdmFsdWVgIGV2ZXJ5IHRpbWVcbiAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0cyBzb21ldGhpbmcuXG4gKiBAbWV0aG9kIG1hcFRvXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtYXBUbyh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE1hcFRvT3BlcmF0b3IodmFsdWUpKTtcbn1cbmV4cG9ydHMubWFwVG8gPSBtYXBUbztcbnZhciBNYXBUb09wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXBUb09wZXJhdG9yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgTWFwVG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBNYXBUb1N1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy52YWx1ZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcFRvT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBUb1N1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWFwVG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB2YWx1ZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLnZhbHVlKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBUb1N1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXBUby5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL21hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNTA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWF0ZXJpYWxpemVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21hdGVyaWFsaXplJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWF0ZXJpYWxpemUgPSBtYXRlcmlhbGl6ZV8xLm1hdGVyaWFsaXplO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0ZXJpYWxpemUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbWF0ZXJpYWxpemUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIE5vdGlmaWNhdGlvbl8xID0gcmVxdWlyZSgnLi4vTm90aWZpY2F0aW9uJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcHJlc2VudHMgYWxsIG9mIHRoZSBlbWlzc2lvbnMgYW5kIG5vdGlmaWNhdGlvbnNcbiAqIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGludG8gZW1pc3Npb25zIG1hcmtlZCB3aXRoIHRoZWlyIG9yaWdpbmFsIHR5cGVzXG4gKiB3aXRoaW4gYSBgTm90aWZpY2F0aW9uYCBvYmplY3RzLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWF0ZXJpYWxpemUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHNlZSB7QGxpbmsgTm90aWZpY2F0aW9ufVxuICpcbiAqIEBzY2hlZHVsZXIgbWF0ZXJpYWxpemUgZG9lcyBub3Qgb3BlcmF0ZSBieSBkZWZhdWx0IG9uIGEgcGFydGljdWxhciBTY2hlZHVsZXIuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE5vdGlmaWNhdGlvbjxUPj59IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyB0aGF0IGFyZSB0aGUgcmVzdWx0IG9mXG4gKiBtYXRlcmlhbGl6aW5nIHRoZSBpdGVtcyBhbmQgbm90aWZpY2F0aW9ucyBvZiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIG1hdGVyaWFsaXplXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBtYXRlcmlhbGl6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXRlcmlhbGl6ZU9wZXJhdG9yKCkpO1xufVxuZXhwb3J0cy5tYXRlcmlhbGl6ZSA9IG1hdGVyaWFsaXplO1xudmFyIE1hdGVyaWFsaXplT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplT3BlcmF0b3IoKSB7XG4gICAgfVxuICAgIE1hdGVyaWFsaXplT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgTWF0ZXJpYWxpemVTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXRlcmlhbGl6ZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgTWF0ZXJpYWxpemVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWF0ZXJpYWxpemVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgfVxuICAgIE1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZXJyKSk7XG4gICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG4gICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gTWF0ZXJpYWxpemVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0ZXJpYWxpemUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9tYXRlcmlhbGl6ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tZXJnZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlID0gbWVyZ2VfMS5tZXJnZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlLmpzXG4gKiogbW9kdWxlIGlkID0gNTExXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgbWVyZ2VBbGxfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21lcmdlQWxsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VBbGwgPSBtZXJnZUFsbF8xLm1lcmdlQWxsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VBbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA1MTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtZXJnZU1hcF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvbWVyZ2VNYXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcCA9IG1lcmdlTWFwXzEubWVyZ2VNYXA7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcCA9IG1lcmdlTWFwXzEubWVyZ2VNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9tZXJnZU1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDUxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlTWFwVG9fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21lcmdlTWFwVG8nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwVG8gPSBtZXJnZU1hcFRvXzEubWVyZ2VNYXBUbztcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcFRvID0gbWVyZ2VNYXBUb18xLm1lcmdlTWFwVG87XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcFRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA1MTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtdWx0aWNhc3RfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL211bHRpY2FzdCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm11bHRpY2FzdCA9IG11bHRpY2FzdF8xLm11bHRpY2FzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW11bHRpY2FzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9tdWx0aWNhc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA1MTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBvYnNlcnZlT25fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL29ic2VydmVPbicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm9ic2VydmVPbiA9IG9ic2VydmVPbl8xLm9ic2VydmVPbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVPbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9vYnNlcnZlT24uanNcbiAqKiBtb2R1bGUgaWQgPSA1MTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBwYXJ0aXRpb25fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3BhcnRpdGlvbicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnBhcnRpdGlvbiA9IHBhcnRpdGlvbl8xLnBhcnRpdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnRpdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9wYXJ0aXRpb24uanNcbiAqKiBtb2R1bGUgaWQgPSA1MTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG5vdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9ub3QnKTtcbnZhciBmaWx0ZXJfMSA9IHJlcXVpcmUoJy4vZmlsdGVyJyk7XG4vKipcbiAqIEBwYXJhbSBwcmVkaWNhdGVcbiAqIEBwYXJhbSB0aGlzQXJnXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+W119XG4gKiBAbWV0aG9kIHBhcnRpdGlvblxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcGFydGl0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHJldHVybiBbXG4gICAgICAgIGZpbHRlcl8xLmZpbHRlci5jYWxsKHRoaXMsIHByZWRpY2F0ZSksXG4gICAgICAgIGZpbHRlcl8xLmZpbHRlci5jYWxsKHRoaXMsIG5vdF8xLm5vdChwcmVkaWNhdGUsIHRoaXNBcmcpKVxuICAgIF07XG59XG5leHBvcnRzLnBhcnRpdGlvbiA9IHBhcnRpdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnRpdGlvbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3BhcnRpdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDUxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBub3QocHJlZCwgdGhpc0FyZykge1xuICAgIGZ1bmN0aW9uIG5vdFByZWQoKSB7XG4gICAgICAgIHJldHVybiAhKG5vdFByZWQucHJlZC5hcHBseShub3RQcmVkLnRoaXNBcmcsIGFyZ3VtZW50cykpO1xuICAgIH1cbiAgICBub3RQcmVkLnByZWQgPSBwcmVkO1xuICAgIG5vdFByZWQudGhpc0FyZyA9IHRoaXNBcmc7XG4gICAgcmV0dXJuIG5vdFByZWQ7XG59XG5leHBvcnRzLm5vdCA9IG5vdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvbm90LmpzXG4gKiogbW9kdWxlIGlkID0gNTE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcGx1Y2tfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3BsdWNrJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucGx1Y2sgPSBwbHVja18xLnBsdWNrO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGx1Y2suanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcGx1Y2suanNcbiAqKiBtb2R1bGUgaWQgPSA1MjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIG1hcF8xID0gcmVxdWlyZSgnLi9tYXAnKTtcbi8qKlxuICogTWFwcyBlYWNoIHNvdXJjZSB2YWx1ZSAoYW4gb2JqZWN0KSB0byBpdHMgc3BlY2lmaWVkIG5lc3RlZCBwcm9wZXJ0eS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSB7QGxpbmsgbWFwfSwgYnV0IG1lYW50IG9ubHkgZm9yIHBpY2tpbmcgb25lIG9mXG4gKiB0aGUgbmVzdGVkIHByb3BlcnRpZXMgb2YgZXZlcnkgZW1pdHRlZCBvYmplY3QuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvcGx1Y2sucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogR2l2ZW4gYSBsaXN0IG9mIHN0cmluZ3MgZGVzY3JpYmluZyBhIHBhdGggdG8gYW4gb2JqZWN0IHByb3BlcnR5LCByZXRyaWV2ZXNcbiAqIHRoZSB2YWx1ZSBvZiBhIHNwZWNpZmllZCBuZXN0ZWQgcHJvcGVydHkgZnJvbSBhbGwgdmFsdWVzIGluIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIElmIGEgcHJvcGVydHkgY2FuJ3QgYmUgcmVzb2x2ZWQsIGl0IHdpbGwgcmV0dXJuIGB1bmRlZmluZWRgIGZvclxuICogdGhhdCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgZXZlcnkgY2xpY2sgdG8gdGhlIHRhZ05hbWUgb2YgdGhlIGNsaWNrZWQgdGFyZ2V0IGVsZW1lbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHRhZ05hbWVzID0gY2xpY2tzLnBsdWNrKCd0YXJnZXQnLCAndGFnTmFtZScpO1xuICogdGFnTmFtZXMuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIG1hcH1cbiAqXG4gKiBAcGFyYW0gey4uLnN0cmluZ30gcHJvcGVydGllcyBUaGUgbmVzdGVkIHByb3BlcnRpZXMgdG8gcGx1Y2sgZnJvbSBlYWNoIHNvdXJjZVxuICogdmFsdWUgKGFuIG9iamVjdCkuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgb2YgcHJvcGVydHkgdmFsdWVzIGZyb20gdGhlXG4gKiBzb3VyY2UgdmFsdWVzLlxuICogQG1ldGhvZCBwbHVja1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcGx1Y2soKSB7XG4gICAgdmFyIHByb3BlcnRpZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBwcm9wZXJ0aWVzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgbGVuZ3RoID0gcHJvcGVydGllcy5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpc3Qgb2YgcHJvcGVydGllcyBjYW5ub3QgYmUgZW1wdHkuJyk7XG4gICAgfVxuICAgIHJldHVybiBtYXBfMS5tYXAuY2FsbCh0aGlzLCBwbHVja2VyKHByb3BlcnRpZXMsIGxlbmd0aCkpO1xufVxuZXhwb3J0cy5wbHVjayA9IHBsdWNrO1xuZnVuY3Rpb24gcGx1Y2tlcihwcm9wcywgbGVuZ3RoKSB7XG4gICAgdmFyIG1hcHBlciA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHZhciBjdXJyZW50UHJvcCA9IHg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwID0gY3VycmVudFByb3BbcHJvcHNbaV1dO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9wID0gcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9wO1xuICAgIH07XG4gICAgcmV0dXJuIG1hcHBlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsdWNrLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcGx1Y2suanNcbiAqKiBtb2R1bGUgaWQgPSA1MjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBwdWJsaXNoXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9wdWJsaXNoJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaCA9IHB1Ymxpc2hfMS5wdWJsaXNoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoLmpzXG4gKiogbW9kdWxlIGlkID0gNTIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9TdWJqZWN0Jyk7XG52YXIgbXVsdGljYXN0XzEgPSByZXF1aXJlKCcuL211bHRpY2FzdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGEgQ29ubmVjdGFibGVPYnNlcnZhYmxlLCB3aGljaCBpcyBhIHZhcmlldHkgb2YgT2JzZXJ2YWJsZSB0aGF0IHdhaXRzIHVudGlsIGl0cyBjb25uZWN0IG1ldGhvZCBpcyBjYWxsZWRcbiAqIGJlZm9yZSBpdCBiZWdpbnMgZW1pdHRpbmcgaXRlbXMgdG8gdGhvc2UgT2JzZXJ2ZXJzIHRoYXQgaGF2ZSBzdWJzY3JpYmVkIHRvIGl0LlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvcHVibGlzaC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcmV0dXJuIGEgQ29ubmVjdGFibGVPYnNlcnZhYmxlIHRoYXQgdXBvbiBjb25uZWN0aW9uIGNhdXNlcyB0aGUgc291cmNlIE9ic2VydmFibGUgdG8gZW1pdCBpdGVtcyB0byBpdHMgT2JzZXJ2ZXJzLlxuICogQG1ldGhvZCBwdWJsaXNoXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoKCkge1xuICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBuZXcgU3ViamVjdF8xLlN1YmplY3QoKSk7XG59XG5leHBvcnRzLnB1Ymxpc2ggPSBwdWJsaXNoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3B1Ymxpc2guanNcbiAqKiBtb2R1bGUgaWQgPSA1MjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBwdWJsaXNoQmVoYXZpb3JfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvcicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2hCZWhhdmlvciA9IHB1Ymxpc2hCZWhhdmlvcl8xLnB1Ymxpc2hCZWhhdmlvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hCZWhhdmlvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoQmVoYXZpb3IuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEJlaGF2aW9yU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vQmVoYXZpb3JTdWJqZWN0Jyk7XG52YXIgbXVsdGljYXN0XzEgPSByZXF1aXJlKCcuL211bHRpY2FzdCcpO1xuLyoqXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEByZXR1cm4ge0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgcHVibGlzaEJlaGF2aW9yXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoQmVoYXZpb3IodmFsdWUpIHtcbiAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IEJlaGF2aW9yU3ViamVjdF8xLkJlaGF2aW9yU3ViamVjdCh2YWx1ZSkpO1xufVxuZXhwb3J0cy5wdWJsaXNoQmVoYXZpb3IgPSBwdWJsaXNoQmVoYXZpb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoQmVoYXZpb3IuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9wdWJsaXNoQmVoYXZpb3IuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi9TdWJqZWN0Jyk7XG52YXIgdGhyb3dFcnJvcl8xID0gcmVxdWlyZSgnLi91dGlsL3Rocm93RXJyb3InKTtcbnZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvcl8xID0gcmVxdWlyZSgnLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yJyk7XG4vKipcbiAqIEBjbGFzcyBCZWhhdmlvclN1YmplY3Q8VD5cbiAqL1xudmFyIEJlaGF2aW9yU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJlaGF2aW9yU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCZWhhdmlvclN1YmplY3QoX3ZhbHVlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICB9XG4gICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3JlZCkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcl8xLnRocm93RXJyb3IodGhpcy5lcnJvclZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yXzEudGhyb3dFcnJvcihuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfMS5PYmplY3RVbnN1YnNjcmliZWRFcnJvcigpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBfc3VwZXIucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiAmJiAhc3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodGhpcy5fdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLCB0aGlzLl92YWx1ZSA9IHZhbHVlKTtcbiAgICB9O1xuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmhhc0Vycm9yZWQgPSB0cnVlO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsIHRoaXMuZXJyb3JWYWx1ZSA9IGVycik7XG4gICAgfTtcbiAgICByZXR1cm4gQmVoYXZpb3JTdWJqZWN0O1xufShTdWJqZWN0XzEuU3ViamVjdCkpO1xuZXhwb3J0cy5CZWhhdmlvclN1YmplY3QgPSBCZWhhdmlvclN1YmplY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CZWhhdmlvclN1YmplY3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9CZWhhdmlvclN1YmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBwdWJsaXNoUmVwbGF5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9wdWJsaXNoUmVwbGF5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaFJlcGxheSA9IHB1Ymxpc2hSZXBsYXlfMS5wdWJsaXNoUmVwbGF5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaFJlcGxheS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoUmVwbGF5LmpzXG4gKiogbW9kdWxlIGlkID0gNTI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcHVibGlzaExhc3RfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3B1Ymxpc2hMYXN0Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucHVibGlzaExhc3QgPSBwdWJsaXNoTGFzdF8xLnB1Ymxpc2hMYXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHVibGlzaExhc3QuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaExhc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIEFzeW5jU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vQXN5bmNTdWJqZWN0Jyk7XG52YXIgbXVsdGljYXN0XzEgPSByZXF1aXJlKCcuL211bHRpY2FzdCcpO1xuLyoqXG4gKiBAcmV0dXJuIHtDb25uZWN0YWJsZU9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIHB1Ymxpc2hMYXN0XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBwdWJsaXNoTGFzdCgpIHtcbiAgICByZXR1cm4gbXVsdGljYXN0XzEubXVsdGljYXN0LmNhbGwodGhpcywgbmV3IEFzeW5jU3ViamVjdF8xLkFzeW5jU3ViamVjdCgpKTtcbn1cbmV4cG9ydHMucHVibGlzaExhc3QgPSBwdWJsaXNoTGFzdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hMYXN0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcHVibGlzaExhc3QuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciByYWNlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9yYWNlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmFjZSA9IHJhY2VfMS5yYWNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFjZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9yYWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNTMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcmVkdWNlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9yZWR1Y2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZWR1Y2UgPSByZWR1Y2VfMS5yZWR1Y2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWR1Y2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcmVkdWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNTMxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgYXBwbGllcyBhIHNwZWNpZmllZCBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byB0aGUgZmlyc3QgaXRlbSBlbWl0dGVkIGJ5IGEgc291cmNlIE9ic2VydmFibGUsXG4gKiB0aGVuIGZlZWRzIHRoZSByZXN1bHQgb2YgdGhhdCBmdW5jdGlvbiBhbG9uZyB3aXRoIHRoZSBzZWNvbmQgaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBpbnRvIHRoZSBzYW1lXG4gKiBmdW5jdGlvbiwgYW5kIHNvIG9uIHVudGlsIGFsbCBpdGVtcyBoYXZlIGJlZW4gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIGFuZCBlbWl0cyB0aGUgZmluYWwgcmVzdWx0IGZyb21cbiAqIHRoZSBmaW5hbCBjYWxsIHRvIHlvdXIgZnVuY3Rpb24gYXMgaXRzIHNvbGUgaXRlbS5cbiAqIFRoaXMgdGVjaG5pcXVlLCB3aGljaCBpcyBjYWxsZWQgXCJyZWR1Y2VcIiBoZXJlLCBpcyBzb21ldGltZXMgY2FsbGVkIFwiYWdncmVnYXRlLFwiIFwiZm9sZCxcIiBcImFjY3VtdWxhdGUsXCIgXCJjb21wcmVzcyxcIiBvclxuICogXCJpbmplY3RcIiBpbiBvdGhlciBwcm9ncmFtbWluZyBjb250ZXh0cy5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3JlZHVjZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcGFyYW0ge2luaXRpYWxWYWx1ZX0gdGhlIGluaXRpYWwgKHNlZWQpIGFjY3VtdWxhdG9yIHZhbHVlXG4gKiBAcGFyYW0ge2FjY3VtdWxhdG9yfSBhbiBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byBiZSBpbnZva2VkIG9uIGVhY2ggaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgdGhlXG4gKiByZXN1bHQgb2Ygd2hpY2ggd2lsbCBiZSB1c2VkIGluIHRoZSBuZXh0IGFjY3VtdWxhdG9yIGNhbGwuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgYSBzaW5nbGUgaXRlbSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYWNjdW11bGF0aW5nIHRoZSBvdXRwdXQgZnJvbSB0aGVcbiAqIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCByZWR1Y2VcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHJlZHVjZShwcm9qZWN0LCBzZWVkKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmVkdWNlT3BlcmF0b3IocHJvamVjdCwgc2VlZCkpO1xufVxuZXhwb3J0cy5yZWR1Y2UgPSByZWR1Y2U7XG52YXIgUmVkdWNlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlZHVjZU9wZXJhdG9yKHByb2plY3QsIHNlZWQpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICB9XG4gICAgUmVkdWNlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmVkdWNlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMuc2VlZCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlZHVjZU9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuUmVkdWNlT3BlcmF0b3IgPSBSZWR1Y2VPcGVyYXRvcjtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUmVkdWNlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlZHVjZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVkdWNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgc2VlZCkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hY2MgPSBzZWVkO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLmhhc1NlZWQgPSB0eXBlb2Ygc2VlZCAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgfVxuICAgIFJlZHVjZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlIHx8ICh0aGlzLmhhc1ZhbHVlID0gdGhpcy5oYXNTZWVkKSkge1xuICAgICAgICAgICAgdGhpcy5fdHJ5UmVkdWNlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWNjID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUmVkdWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeVJlZHVjZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHRoaXMuYWNjLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWNjID0gcmVzdWx0O1xuICAgIH07XG4gICAgUmVkdWNlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSB8fCB0aGlzLmhhc1NlZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmFjYyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlZHVjZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5leHBvcnRzLlJlZHVjZVN1YnNjcmliZXIgPSBSZWR1Y2VTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVkdWNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvcmVkdWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNTMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgcmVwZWF0XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9yZXBlYXQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZXBlYXQgPSByZXBlYXRfMS5yZXBlYXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvcmVwZWF0LmpzXG4gKiogbW9kdWxlIGlkID0gNTMzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHJlcGVhdHMgdGhlIHN0cmVhbSBvZiBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBhdCBtb3N0IGNvdW50IHRpbWVzLFxuICogb24gYSBwYXJ0aWN1bGFyIFNjaGVkdWxlci5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3JlcGVhdC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gdGhlIFNjaGVkdWxlciB0byBlbWl0IHRoZSBpdGVtcyBvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY291bnRdIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGl0ZW1zIGFyZSByZXBlYXRlZCwgYSBjb3VudCBvZiAwIHdpbGwgeWllbGRcbiAqIGFuIGVtcHR5IE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgcmVwZWF0cyB0aGUgc3RyZWFtIG9mIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGF0IG1vc3RcbiAqIGNvdW50IHRpbWVzLlxuICogQG1ldGhvZCByZXBlYXRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHJlcGVhdChjb3VudCkge1xuICAgIGlmIChjb3VudCA9PT0gdm9pZCAwKSB7IGNvdW50ID0gLTE7IH1cbiAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY291bnQgPCAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFJlcGVhdE9wZXJhdG9yKC0xLCB0aGlzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBSZXBlYXRPcGVyYXRvcihjb3VudCAtIDEsIHRoaXMpKTtcbiAgICB9XG59XG5leHBvcnRzLnJlcGVhdCA9IHJlcGVhdDtcbnZhciBSZXBlYXRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVwZWF0T3BlcmF0b3IoY291bnQsIHNvdXJjZSkge1xuICAgICAgICB0aGlzLmNvdW50ID0gY291bnQ7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBSZXBlYXRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBSZXBlYXRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY291bnQsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVwZWF0T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBSZXBlYXRTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVwZWF0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZXBlYXRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb3VudCwgc291cmNlKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgUmVwZWF0U3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMsIHNvdXJjZSA9IF9hLnNvdXJjZSwgY291bnQgPSBfYS5jb3VudDtcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNvbXBsZXRlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb3VudCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50IC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUmVwZWF0U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcGVhdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3JlcGVhdC5qc1xuICoqIG1vZHVsZSBpZCA9IDUzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHJldHJ5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9yZXRyeScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnJldHJ5ID0gcmV0cnlfMS5yZXRyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3JldHJ5LmpzXG4gKiogbW9kdWxlIGlkID0gNTM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgbWlycm9ycyB0aGUgc291cmNlIE9ic2VydmFibGUsIHJlc3Vic2NyaWJpbmcgdG8gaXQgaWYgaXQgY2FsbHMgYGVycm9yYCBhbmQgdGhlXG4gKiBwcmVkaWNhdGUgcmV0dXJucyB0cnVlIGZvciB0aGF0IHNwZWNpZmljIGV4Y2VwdGlvbiBhbmQgcmV0cnkgY291bnQuXG4gKiBJZiB0aGUgc291cmNlIE9ic2VydmFibGUgY2FsbHMgYGVycm9yYCwgdGhpcyBtZXRob2Qgd2lsbCByZXN1YnNjcmliZSB0byB0aGUgc291cmNlIE9ic2VydmFibGUgZm9yIGEgbWF4aW11bSBvZlxuICogY291bnQgcmVzdWJzY3JpcHRpb25zIChnaXZlbiBhcyBhIG51bWJlciBwYXJhbWV0ZXIpIHJhdGhlciB0aGFuIHByb3BhZ2F0aW5nIHRoZSBgZXJyb3JgIGNhbGwuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9yZXRyeS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBBbnkgYW5kIGFsbCBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aWxsIGJlIGVtaXR0ZWQgYnkgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlLCBldmVuIHRob3NlIGVtaXR0ZWRcbiAqIGR1cmluZyBmYWlsZWQgc3Vic2NyaXB0aW9ucy4gRm9yIGV4YW1wbGUsIGlmIGFuIE9ic2VydmFibGUgZmFpbHMgYXQgZmlyc3QgYnV0IGVtaXRzIFsxLCAyXSB0aGVuIHN1Y2NlZWRzIHRoZSBzZWNvbmRcbiAqIHRpbWUgYW5kIGVtaXRzOiBbMSwgMiwgMywgNCwgNV0gdGhlbiB0aGUgY29tcGxldGUgc3RyZWFtIG9mIGVtaXNzaW9ucyBhbmQgbm90aWZpY2F0aW9uc1xuICogd291bGQgYmU6IFsxLCAyLCAxLCAyLCAzLCA0LCA1LCBgY29tcGxldGVgXS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgb2YgcmV0cnkgYXR0ZW1wdHMgYmVmb3JlIGZhaWxpbmcuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSB0aGUgc291cmNlIE9ic2VydmFibGUgbW9kaWZpZWQgd2l0aCB0aGUgcmV0cnkgbG9naWMuXG4gKiBAbWV0aG9kIHJldHJ5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiByZXRyeShjb3VudCkge1xuICAgIGlmIChjb3VudCA9PT0gdm9pZCAwKSB7IGNvdW50ID0gLTE7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBSZXRyeU9wZXJhdG9yKGNvdW50LCB0aGlzKSk7XG59XG5leHBvcnRzLnJldHJ5ID0gcmV0cnk7XG52YXIgUmV0cnlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmV0cnlPcGVyYXRvcihjb3VudCwgc291cmNlKSB7XG4gICAgICAgIHRoaXMuY291bnQgPSBjb3VudDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIFJldHJ5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgUmV0cnlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY291bnQsIHRoaXMuc291cmNlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmV0cnlPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFJldHJ5U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJldHJ5U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZXRyeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvdW50LCBzb3VyY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmNvdW50ID0gY291bnQ7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBSZXRyeVN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLCBzb3VyY2UgPSBfYS5zb3VyY2UsIGNvdW50ID0gX2EuY291bnQ7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb3VudCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50IC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUmV0cnlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnkuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9yZXRyeS5qc1xuICoqIG1vZHVsZSBpZCA9IDUzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHJldHJ5V2hlbl8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvcmV0cnlXaGVuJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmV0cnlXaGVuID0gcmV0cnlXaGVuXzEucmV0cnlXaGVuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnlXaGVuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3JldHJ5V2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDUzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9TdWJqZWN0Jyk7XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWwvdHJ5Q2F0Y2gnKTtcbnZhciBlcnJvck9iamVjdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9lcnJvck9iamVjdCcpO1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSB3aXRoIHRoZSBleGNlcHRpb24gb2YgYW4gYGVycm9yYC5cbiAqIEFuIGBlcnJvcmAgd2lsbCBjYXVzZSB0aGUgZW1pc3Npb24gb2YgdGhlIFRocm93YWJsZSB0aGF0IGNhdXNlIHRoZSBlcnJvciB0byB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBmcm9tXG4gKiBub3RpZmljYXRpb25IYW5kbGVyLiBJZiB0aGF0IE9ic2VydmFibGUgY2FsbHMgb25Db21wbGV0ZSBvciBgZXJyb3JgIHRoZW4gcmV0cnkgd2lsbCBjYWxsIGBjb21wbGV0ZWAgb3IgYGVycm9yYFxuICogb24gdGhlIGNoaWxkIHN1YnNjcmlwdGlvbi4gT3RoZXJ3aXNlLCB0aGlzIE9ic2VydmFibGUgd2lsbCByZXN1YnNjcmliZSB0byB0aGUgc291cmNlIG9ic2VydmFibGUsIG9uIGEgcGFydGljdWxhclxuICogU2NoZWR1bGVyLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvcmV0cnlXaGVuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7bm90aWZpY2F0aW9uSGFuZGxlcn0gcmVjZWl2ZXMgYW4gT2JzZXJ2YWJsZSBvZiBub3RpZmljYXRpb25zIHdpdGggd2hpY2ggYSB1c2VyIGNhbiBgY29tcGxldGVgIG9yIGBlcnJvcmAsXG4gKiBhYm9ydGluZyB0aGUgcmV0cnkuXG4gKiBAcGFyYW0ge3NjaGVkdWxlcn0gdGhlIFNjaGVkdWxlciBvbiB3aGljaCB0byBzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIG1vZGlmaWVkIHdpdGggcmV0cnkgbG9naWMuXG4gKiBAbWV0aG9kIHJldHJ5V2hlblxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gcmV0cnlXaGVuKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgUmV0cnlXaGVuT3BlcmF0b3Iobm90aWZpZXIsIHRoaXMpKTtcbn1cbmV4cG9ydHMucmV0cnlXaGVuID0gcmV0cnlXaGVuO1xudmFyIFJldHJ5V2hlbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXRyeVdoZW5PcGVyYXRvcihub3RpZmllciwgc291cmNlKSB7XG4gICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIFJldHJ5V2hlbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFJldHJ5V2hlblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllciwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuICAgIHJldHVybiBSZXRyeVdoZW5PcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFJldHJ5V2hlblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZXRyeVdoZW5TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJldHJ5V2hlblN1YnNjcmliZXIoZGVzdGluYXRpb24sIG5vdGlmaWVyLCBzb3VyY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBSZXRyeVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIGVycm9ycyA9IHRoaXMuZXJyb3JzO1xuICAgICAgICAgICAgdmFyIHJldHJpZXMgPSB0aGlzLnJldHJpZXM7XG4gICAgICAgICAgICB2YXIgcmV0cmllc1N1YnNjcmlwdGlvbiA9IHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIGlmICghcmV0cmllcykge1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICAgICAgICAgIHJldHJpZXMgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMubm90aWZpZXIpKGVycm9ycyk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJpZXMgPT09IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLCBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXRyaWVzU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCByZXRyaWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgICAgICB0aGlzLnJldHJpZXMgPSByZXRyaWVzO1xuICAgICAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gcmV0cmllc1N1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIGVycm9ycy5uZXh0KGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFJldHJ5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgZXJyb3JzID0gX2EuZXJyb3JzLCByZXRyaWVzU3Vic2NyaXB0aW9uID0gX2EucmV0cmllc1N1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKGVycm9ycykge1xuICAgICAgICAgICAgZXJyb3JzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmVycm9ycyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJldHJpZXNTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHJldHJpZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXRyaWVzID0gbnVsbDtcbiAgICB9O1xuICAgIFJldHJ5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgZXJyb3JzID0gX2EuZXJyb3JzLCByZXRyaWVzID0gX2EucmV0cmllcywgcmV0cmllc1N1YnNjcmlwdGlvbiA9IF9hLnJldHJpZXNTdWJzY3JpcHRpb247XG4gICAgICAgIHRoaXMuZXJyb3JzID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXRyaWVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgICAgICB0aGlzLnJldHJpZXMgPSByZXRyaWVzO1xuICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSByZXRyaWVzU3Vic2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gUmV0cnlXaGVuU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXRyeVdoZW4uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9yZXRyeVdoZW4uanNcbiAqKiBtb2R1bGUgaWQgPSA1MzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzYW1wbGVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NhbXBsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNhbXBsZSA9IHNhbXBsZV8xLnNhbXBsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zYW1wbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1MzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCwgd2hlbiB0aGUgc3BlY2lmaWVkIHNhbXBsZXIgT2JzZXJ2YWJsZSBlbWl0cyBhbiBpdGVtIG9yIGNvbXBsZXRlcywgaXQgdGhlbiBlbWl0cyB0aGUgbW9zdFxuICogcmVjZW50bHkgZW1pdHRlZCBpdGVtIChpZiBhbnkpIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHNpbmNlIHRoZSBwcmV2aW91cyBlbWlzc2lvbiBmcm9tIHRoZSBzYW1wbGVyXG4gKiBPYnNlcnZhYmxlLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc2FtcGxlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc2FtcGxlciAtIHRoZSBPYnNlcnZhYmxlIHRvIHVzZSBmb3Igc2FtcGxpbmcgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHRzIG9mIHNhbXBsaW5nIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoaXMgT2JzZXJ2YWJsZVxuICogd2hlbmV2ZXIgdGhlIHNhbXBsZXIgT2JzZXJ2YWJsZSBlbWl0cyBhbiBpdGVtIG9yIGNvbXBsZXRlcy5cbiAqIEBtZXRob2Qgc2FtcGxlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzYW1wbGUobm90aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTYW1wbGVPcGVyYXRvcihub3RpZmllcikpO1xufVxuZXhwb3J0cy5zYW1wbGUgPSBzYW1wbGU7XG52YXIgU2FtcGxlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNhbXBsZU9wZXJhdG9yKG5vdGlmaWVyKSB7XG4gICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcbiAgICB9XG4gICAgU2FtcGxlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2FtcGxlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5vdGlmaWVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FtcGxlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTYW1wbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2FtcGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYW1wbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBub3RpZmllcikpO1xuICAgIH1cbiAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgIH07XG4gICAgU2FtcGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpO1xuICAgIH07XG4gICAgU2FtcGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7XG4gICAgfTtcbiAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTYW1wbGVTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbXBsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3NhbXBsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHNhbXBsZVRpbWVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NhbXBsZVRpbWUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zYW1wbGVUaW1lID0gc2FtcGxlVGltZV8xLnNhbXBsZVRpbWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW1wbGVUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3NhbXBsZVRpbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbi8qKlxuICogQHBhcmFtIGRlbGF5XG4gKiBAcGFyYW0gc2NoZWR1bGVyXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2Qgc2FtcGxlVGltZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc2FtcGxlVGltZShkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTYW1wbGVUaW1lT3BlcmF0b3IoZGVsYXksIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy5zYW1wbGVUaW1lID0gc2FtcGxlVGltZTtcbnZhciBTYW1wbGVUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNhbXBsZVRpbWVPcGVyYXRvcihkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIFNhbXBsZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTYW1wbGVUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5LCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhbXBsZVRpbWVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNhbXBsZVRpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2FtcGxlVGltZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FtcGxlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGRlbGF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5vdGlmaWNhdGlvbiwgZGVsYXksIHsgc3Vic2NyaWJlcjogdGhpcywgZGVsYXk6IGRlbGF5IH0pKTtcbiAgICB9XG4gICAgU2FtcGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMubGFzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlO1xuICAgIH07XG4gICAgU2FtcGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5sYXN0VmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2FtcGxlVGltZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5mdW5jdGlvbiBkaXNwYXRjaE5vdGlmaWNhdGlvbihzdGF0ZSkge1xuICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgZGVsYXkgPSBzdGF0ZS5kZWxheTtcbiAgICBzdWJzY3JpYmVyLm5vdGlmeU5leHQoKTtcbiAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBkZWxheSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW1wbGVUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc2FtcGxlVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHNjYW5fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NjYW4nKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zY2FuID0gc2Nhbl8xLnNjYW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2FuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3NjYW4uanNcbiAqKiBtb2R1bGUgaWQgPSA1NDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBBcHBsaWVzIGFuIGFjY3VtdWxhdGlvbiBmdW5jdGlvbiBvdmVyIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYW5kIHJldHVybnMgZWFjaFxuICogaW50ZXJtZWRpYXRlIHJlc3VsdCwgd2l0aCBhbiBvcHRpb25hbCBzZWVkIHZhbHVlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIHJlZHVjZX0sIGJ1dCBlbWl0cyB0aGUgY3VycmVudFxuICogYWNjdW11bGF0aW9uIHdoZW5ldmVyIHRoZSBzb3VyY2UgZW1pdHMgYSB2YWx1ZS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zY2FuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIENvbWJpbmVzIHRvZ2V0aGVyIGFsbCB2YWx1ZXMgZW1pdHRlZCBvbiB0aGUgc291cmNlLCB1c2luZyBhbiBhY2N1bXVsYXRvclxuICogZnVuY3Rpb24gdGhhdCBrbm93cyBob3cgdG8gam9pbiBhIG5ldyBzb3VyY2UgdmFsdWUgaW50byB0aGUgYWNjdW11bGF0aW9uIGZyb21cbiAqIHRoZSBwYXN0LiBJcyBzaW1pbGFyIHRvIHtAbGluayByZWR1Y2V9LCBidXQgZW1pdHMgdGhlIGludGVybWVkaWF0ZVxuICogYWNjdW11bGF0aW9ucy5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBhcHBsaWVzIGEgc3BlY2lmaWVkIGBhY2N1bXVsYXRvcmAgZnVuY3Rpb24gdG8gZWFjaFxuICogaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgYSBgc2VlZGAgdmFsdWUgaXMgc3BlY2lmaWVkLCB0aGVuXG4gKiB0aGF0IHZhbHVlIHdpbGwgYmUgdXNlZCBhcyB0aGUgaW5pdGlhbCB2YWx1ZSBmb3IgdGhlIGFjY3VtdWxhdG9yLiBJZiBubyBzZWVkXG4gKiB2YWx1ZSBpcyBzcGVjaWZpZWQsIHRoZSBmaXJzdCBpdGVtIG9mIHRoZSBzb3VyY2UgaXMgdXNlZCBhcyB0aGUgc2VlZC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db3VudCB0aGUgbnVtYmVyIG9mIGNsaWNrIGV2ZW50czwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgb25lcyA9IGNsaWNrcy5tYXBUbygxKTtcbiAqIHZhciBzZWVkID0gMDtcbiAqIHZhciBjb3VudCA9IG9uZXMuc2NhbigoYWNjLCBvbmUpID0+IGFjYyArIG9uZSwgc2VlZCk7XG4gKiBjb3VudC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgZXhwYW5kfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICogQHNlZSB7QGxpbmsgcmVkdWNlfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oYWNjOiBSLCB2YWx1ZTogVCk6IFJ9IGFjY3VtdWxhdG9yIFRoZSBhY2N1bXVsYXRvciBmdW5jdGlvblxuICogY2FsbGVkIG9uIGVhY2ggc291cmNlIHZhbHVlLlxuICogQHBhcmFtIHtUfFJ9IFtzZWVkXSBUaGUgaW5pdGlhbCBhY2N1bXVsYXRpb24gdmFsdWUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fSBBbiBvYnNlcnZhYmxlIG9mIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZXMuXG4gKiBAbWV0aG9kIHNjYW5cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNjYW4oYWNjdW11bGF0b3IsIHNlZWQpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTY2FuT3BlcmF0b3IoYWNjdW11bGF0b3IsIHNlZWQpKTtcbn1cbmV4cG9ydHMuc2NhbiA9IHNjYW47XG52YXIgU2Nhbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY2FuT3BlcmF0b3IoYWNjdW11bGF0b3IsIHNlZWQpIHtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yO1xuICAgICAgICB0aGlzLnNlZWQgPSBzZWVkO1xuICAgIH1cbiAgICBTY2FuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU2NhblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5hY2N1bXVsYXRvciwgdGhpcy5zZWVkKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2Nhbk9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2NhblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTY2FuU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTY2FuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYWNjdW11bGF0b3IsIHNlZWQpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3JTZXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yO1xuICAgICAgICB0aGlzLmFjY3VtdWxhdG9yU2V0ID0gdHlwZW9mIHNlZWQgIT09ICd1bmRlZmluZWQnO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2NhblN1YnNjcmliZXIucHJvdG90eXBlLCBcInNlZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRvclNldCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9zZWVkID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuYWNjdW11bGF0b3JTZXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VlZCA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cnlOZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmFjY3VtdWxhdG9yKHRoaXMuc2VlZCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlZWQgPSByZXN1bHQ7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIFNjYW5TdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Nhbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3NjYW4uanNcbiAqKiBtb2R1bGUgaWQgPSA1NDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBzaGFyZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2hhcmUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zaGFyZSA9IHNoYXJlXzEuc2hhcmU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zaGFyZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgbXVsdGljYXN0XzEgPSByZXF1aXJlKCcuL211bHRpY2FzdCcpO1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbmZ1bmN0aW9uIHNoYXJlU3ViamVjdEZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgdGhhdCBtdWx0aWNhc3RzIChzaGFyZXMpIHRoZSBvcmlnaW5hbCBPYnNlcnZhYmxlLiBBcyBsb25nIGFzIHRoZXJlIGlzIGF0IGxlYXN0IG9uZVxuICogU3Vic2NyaWJlciB0aGlzIE9ic2VydmFibGUgd2lsbCBiZSBzdWJzY3JpYmVkIGFuZCBlbWl0dGluZyBkYXRhLiBXaGVuIGFsbCBzdWJzY3JpYmVycyBoYXZlIHVuc3Vic2NyaWJlZCBpdCB3aWxsXG4gKiB1bnN1YnNjcmliZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gQmVjYXVzZSB0aGUgT2JzZXJ2YWJsZSBpcyBtdWx0aWNhc3RpbmcgaXQgbWFrZXMgdGhlIHN0cmVhbSBgaG90YC5cbiAqIFRoaXMgaXMgYW4gYWxpYXMgZm9yIC5wdWJsaXNoKCkucmVmQ291bnQoKS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NoYXJlLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IGFuIE9ic2VydmFibGUgdGhhdCB1cG9uIGNvbm5lY3Rpb24gY2F1c2VzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0byBlbWl0IGl0ZW1zIHRvIGl0cyBPYnNlcnZlcnNcbiAqIEBtZXRob2Qgc2hhcmVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNoYXJlKCkge1xuICAgIHJldHVybiBtdWx0aWNhc3RfMS5tdWx0aWNhc3QuY2FsbCh0aGlzLCBzaGFyZVN1YmplY3RGYWN0b3J5KS5yZWZDb3VudCgpO1xufVxuZXhwb3J0cy5zaGFyZSA9IHNoYXJlO1xuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcmUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zaGFyZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHNpbmdsZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2luZ2xlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2luZ2xlID0gc2luZ2xlXzEuc2luZ2xlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2luZ2xlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3NpbmdsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgRW1wdHlFcnJvcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9FbXB0eUVycm9yJyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBzaW5nbGUgaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB0aGF0IG1hdGNoZXMgYSBzcGVjaWZpZWRcbiAqIHByZWRpY2F0ZSwgaWYgdGhhdCBPYnNlcnZhYmxlIGVtaXRzIG9uZSBzdWNoIGl0ZW0uIElmIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0cyBtb3JlIHRoYW4gb25lIHN1Y2ggaXRlbSBvciBub1xuICogc3VjaCBpdGVtcywgbm90aWZ5IG9mIGFuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBvciBOb1N1Y2hFbGVtZW50RXhjZXB0aW9uIHJlc3BlY3RpdmVseS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NpbmdsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAdGhyb3dzIHtFbXB0eUVycm9yfSBEZWxpdmVycyBhbiBFbXB0eUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmBcbiAqIGNhbGxiYWNrIGlmIHRoZSBPYnNlcnZhYmxlIGNvbXBsZXRlcyBiZWZvcmUgYW55IGBuZXh0YCBub3RpZmljYXRpb24gd2FzIHNlbnQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0byBldmFsdWF0ZSBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgc2luZ2xlIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBtYXRjaGVzXG4gKiB0aGUgcHJlZGljYXRlLlxuIC5cbiAqIEBtZXRob2Qgc2luZ2xlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzaW5nbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2luZ2xlT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzKSk7XG59XG5leHBvcnRzLnNpbmdsZSA9IHNpbmdsZTtcbnZhciBTaW5nbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2luZ2xlT3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBTaW5nbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTaW5nbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFNpbmdsZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2luZ2xlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNpbmdsZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2luZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlLCBzb3VyY2UpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuc2VlblZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5hcHBseVNpbmdsZVZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnNlZW5WYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcignU2VxdWVuY2UgY29udGFpbnMgbW9yZSB0aGFuIG9uZSBlbGVtZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlZW5WYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNpbmdsZVZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBwcmVkaWNhdGUgPSB0aGlzLnByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICBpZiAocHJlZGljYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnRyeU5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hcHBseVNpbmdsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2luZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5TmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4LCB0aGlzLnNvdXJjZSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVNpbmdsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNpbmdsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHRoaXMuc2VlblZhbHVlID8gdGhpcy5zaW5nbGVWYWx1ZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IobmV3IEVtcHR5RXJyb3JfMS5FbXB0eUVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNpbmdsZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaW5nbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9zaW5nbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBza2lwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9za2lwJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2tpcCA9IHNraXBfMS5za2lwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9za2lwLmpzXG4gKiogbW9kdWxlIGlkID0gNTQ5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgYG5gIGl0ZW1zIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NraXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHRoZSBgbmAgb2YgdGltZXMsIGl0ZW1zIGVtaXR0ZWQgYnkgc291cmNlIE9ic2VydmFibGUgc2hvdWxkIGJlIHNraXBwZWQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICpcbiAqIEBtZXRob2Qgc2tpcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc2tpcCh0b3RhbCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFNraXBPcGVyYXRvcih0b3RhbCkpO1xufVxuZXhwb3J0cy5za2lwID0gc2tpcDtcbnZhciBTa2lwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNraXBPcGVyYXRvcih0b3RhbCkge1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgfVxuICAgIFNraXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTa2lwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnRvdGFsKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2tpcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTa2lwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTa2lwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbiAgICBTa2lwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAoKyt0aGlzLmNvdW50ID4gdGhpcy50b3RhbCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1za2lwLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc2tpcC5qc1xuICoqIG1vZHVsZSBpZCA9IDU1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHNraXBVbnRpbF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc2tpcFVudGlsJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2tpcFVudGlsID0gc2tpcFVudGlsXzEuc2tpcFVudGlsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcFVudGlsLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3NraXBVbnRpbC5qc1xuICoqIG1vZHVsZSBpZCA9IDU1MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHNraXBzIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHVudGlsIGEgc2Vjb25kIE9ic2VydmFibGUgZW1pdHMgYW4gaXRlbS5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3NraXBVbnRpbC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IHRoZSBzZWNvbmQgT2JzZXJ2YWJsZSB0aGF0IGhhcyB0byBlbWl0IGFuIGl0ZW0gYmVmb3JlIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSdzIGVsZW1lbnRzIGJlZ2luIHRvXG4gKiBiZSBtaXJyb3JlZCBieSB0aGUgcmVzdWx0aW5nIE9ic2VydmFibGUuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBhbiBPYnNlcnZhYmxlIHRoYXQgc2tpcHMgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdW50aWwgdGhlIHNlY29uZCBPYnNlcnZhYmxlIGVtaXRzXG4gKiBhbiBpdGVtLCB0aGVuIGVtaXRzIHRoZSByZW1haW5pbmcgaXRlbXMuXG4gKiBAbWV0aG9kIHNraXBVbnRpbFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc2tpcFVudGlsKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU2tpcFVudGlsT3BlcmF0b3Iobm90aWZpZXIpKTtcbn1cbmV4cG9ydHMuc2tpcFVudGlsID0gc2tpcFVudGlsO1xudmFyIFNraXBVbnRpbE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTa2lwVW50aWxPcGVyYXRvcihub3RpZmllcikge1xuICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgfVxuICAgIFNraXBVbnRpbE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNraXBVbnRpbFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5ub3RpZmllcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFNraXBVbnRpbE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2tpcFVudGlsU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNraXBVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgbm90aWZpZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNJbm5lclN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBub3RpZmllcikpO1xuICAgIH1cbiAgICBTa2lwVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0lubmVyU3RvcHBlZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICB9O1xuICAgIFNraXBVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzSW5uZXJTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcFVudGlsU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1za2lwVW50aWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci9za2lwVW50aWwuanNcbiAqKiBtb2R1bGUgaWQgPSA1NTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBza2lwV2hpbGVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3NraXBXaGlsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnNraXBXaGlsZSA9IHNraXBXaGlsZV8xLnNraXBXaGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBXaGlsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9za2lwV2hpbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBza2lwcyBhbGwgaXRlbXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYXMgbG9uZyBhcyBhIHNwZWNpZmllZCBjb25kaXRpb24gaG9sZHNcbiAqIHRydWUsIGJ1dCBlbWl0cyBhbGwgZnVydGhlciBzb3VyY2UgaXRlbXMgYXMgc29vbiBhcyB0aGUgY29uZGl0aW9uIGJlY29tZXMgZmFsc2UuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9za2lwV2hpbGUucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIC0gYSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggaXRlbSBlbWl0dGVkIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gYW4gT2JzZXJ2YWJsZSB0aGF0IGJlZ2lucyBlbWl0dGluZyBpdGVtcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB3aGVuIHRoZVxuICogc3BlY2lmaWVkIHByZWRpY2F0ZSBiZWNvbWVzIGZhbHNlLlxuICogQG1ldGhvZCBza2lwV2hpbGVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHNraXBXaGlsZShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTa2lwV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpKTtcbn1cbmV4cG9ydHMuc2tpcFdoaWxlID0gc2tpcFdoaWxlO1xudmFyIFNraXBXaGlsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTa2lwV2hpbGVPcGVyYXRvcihwcmVkaWNhdGUpIHtcbiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgfVxuICAgIFNraXBXaGlsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFNraXBXaGlsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcmVkaWNhdGUpKTtcbiAgICB9O1xuICAgIHJldHVybiBTa2lwV2hpbGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNraXBXaGlsZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTa2lwV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNraXBXaGlsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSkge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLnNraXBwaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIFNraXBXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmICh0aGlzLnNraXBwaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnRyeUNhbGxQcmVkaWNhdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5za2lwcGluZykge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNraXBXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLnRyeUNhbGxQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrKTtcbiAgICAgICAgICAgIHRoaXMuc2tpcHBpbmcgPSBCb29sZWFuKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2tpcFdoaWxlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBXaGlsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3NraXBXaGlsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHN0YXJ0V2l0aF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc3RhcnRXaXRoJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3RhcnRXaXRoID0gc3RhcnRXaXRoXzEuc3RhcnRXaXRoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhcnRXaXRoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3N0YXJ0V2l0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDU1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZScpO1xudmFyIFNjYWxhck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvU2NhbGFyT2JzZXJ2YWJsZScpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUnKTtcbnZhciBjb25jYXRfMSA9IHJlcXVpcmUoJy4vY29uY2F0Jyk7XG52YXIgaXNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL3V0aWwvaXNTY2hlZHVsZXInKTtcbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGl0ZW1zIGluIGEgc3BlY2lmaWVkIEl0ZXJhYmxlIGJlZm9yZSBpdCBiZWdpbnMgdG8gZW1pdCBpdGVtcyBlbWl0dGVkIGJ5IHRoZVxuICogc291cmNlIE9ic2VydmFibGUuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zdGFydFdpdGgucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtWYWx1ZXN9IGFuIEl0ZXJhYmxlIHRoYXQgY29udGFpbnMgdGhlIGl0ZW1zIHlvdSB3YW50IHRoZSBtb2RpZmllZCBPYnNlcnZhYmxlIHRvIGVtaXQgZmlyc3QuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGl0ZW1zIGluIHRoZSBzcGVjaWZpZWQgSXRlcmFibGUgYW5kIHRoZW4gZW1pdHMgdGhlIGl0ZW1zXG4gKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2Qgc3RhcnRXaXRoXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzdGFydFdpdGgoKSB7XG4gICAgdmFyIGFycmF5ID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJyYXlbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICBpZiAoaXNTY2hlZHVsZXJfMS5pc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG4gICAgICAgIGFycmF5LnBvcCgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aDtcbiAgICBpZiAobGVuID09PSAxKSB7XG4gICAgICAgIHJldHVybiBjb25jYXRfMS5jb25jYXRTdGF0aWMobmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpLCB0aGlzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobGVuID4gMSkge1xuICAgICAgICByZXR1cm4gY29uY2F0XzEuY29uY2F0U3RhdGljKG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlciksIHRoaXMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbmNhdF8xLmNvbmNhdFN0YXRpYyhuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlciksIHRoaXMpO1xuICAgIH1cbn1cbmV4cG9ydHMuc3RhcnRXaXRoID0gc3RhcnRXaXRoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhcnRXaXRoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc3RhcnRXaXRoLmpzXG4gKiogbW9kdWxlIGlkID0gNTU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc3Vic2NyaWJlT25fMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3N1YnNjcmliZU9uJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlT24gPSBzdWJzY3JpYmVPbl8xLnN1YnNjcmliZU9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlT24uanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3Vic2NyaWJlT24uanNcbiAqKiBtb2R1bGUgaWQgPSA1NTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFN1YnNjcmliZU9uT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9TdWJzY3JpYmVPbk9ic2VydmFibGUnKTtcbi8qKlxuICogQXN5bmNocm9ub3VzbHkgc3Vic2NyaWJlcyBPYnNlcnZlcnMgdG8gdGhpcyBPYnNlcnZhYmxlIG9uIHRoZSBzcGVjaWZpZWQgU2NoZWR1bGVyLlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc3Vic2NyaWJlT24ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IHRoZSBTY2hlZHVsZXIgdG8gcGVyZm9ybSBzdWJzY3JpcHRpb24gYWN0aW9ucyBvbi5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBtb2RpZmllZCBzbyB0aGF0IGl0cyBzdWJzY3JpcHRpb25zIGhhcHBlbiBvbiB0aGUgc3BlY2lmaWVkIFNjaGVkdWxlclxuIC5cbiAqIEBtZXRob2Qgc3Vic2NyaWJlT25cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHN1YnNjcmliZU9uKHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICByZXR1cm4gbmV3IFN1YnNjcmliZU9uT2JzZXJ2YWJsZV8xLlN1YnNjcmliZU9uT2JzZXJ2YWJsZSh0aGlzLCBkZWxheSwgc2NoZWR1bGVyKTtcbn1cbmV4cG9ydHMuc3Vic2NyaWJlT24gPSBzdWJzY3JpYmVPbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZU9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc3Vic2NyaWJlT24uanNcbiAqKiBtb2R1bGUgaWQgPSA1NThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIGFzYXBfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc2FwJyk7XG52YXIgaXNOdW1lcmljXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzTnVtZXJpYycpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBTdWJzY3JpYmVPbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdWJzY3JpYmVPbk9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3Vic2NyaWJlT25PYnNlcnZhYmxlKHNvdXJjZSwgZGVsYXlUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGRlbGF5VGltZSA9PT0gdm9pZCAwKSB7IGRlbGF5VGltZSA9IDA7IH1cbiAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzYXBfMS5hc2FwOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5kZWxheVRpbWUgPSBkZWxheVRpbWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICBpZiAoIWlzTnVtZXJpY18xLmlzTnVtZXJpYyhkZWxheVRpbWUpIHx8IGRlbGF5VGltZSA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVsYXlUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNjaGVkdWxlciB8fCB0eXBlb2Ygc2NoZWR1bGVyLnNjaGVkdWxlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlciA9IGFzYXBfMS5hc2FwO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc291cmNlLCBkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXNhcF8xLmFzYXA7IH1cbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVPbk9ic2VydmFibGUoc291cmNlLCBkZWxheSwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZy5zb3VyY2UsIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVPbk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgZGVsYXkgPSB0aGlzLmRlbGF5VGltZTtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoU3Vic2NyaWJlT25PYnNlcnZhYmxlLmRpc3BhdGNoLCBkZWxheSwge1xuICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3Vic2NyaWJlT25PYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5TdWJzY3JpYmVPbk9ic2VydmFibGUgPSBTdWJzY3JpYmVPbk9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVPbk9ic2VydmFibGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vYnNlcnZhYmxlL1N1YnNjcmliZU9uT2JzZXJ2YWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXNhcFNjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi9Bc2FwU2NoZWR1bGVyJyk7XG5leHBvcnRzLmFzYXAgPSBuZXcgQXNhcFNjaGVkdWxlcl8xLkFzYXBTY2hlZHVsZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9zY2hlZHVsZXIvYXNhcC5qc1xuICoqIG1vZHVsZSBpZCA9IDU2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBBc2FwQWN0aW9uXzEgPSByZXF1aXJlKCcuL0FzYXBBY3Rpb24nKTtcbnZhciBRdWV1ZVNjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi9RdWV1ZVNjaGVkdWxlcicpO1xudmFyIEFzYXBTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc2FwU2NoZWR1bGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzYXBTY2hlZHVsZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBBc2FwU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdyA9IGZ1bmN0aW9uICh3b3JrLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFzYXBBY3Rpb25fMS5Bc2FwQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIHJldHVybiBBc2FwU2NoZWR1bGVyO1xufShRdWV1ZVNjaGVkdWxlcl8xLlF1ZXVlU2NoZWR1bGVyKSk7XG5leHBvcnRzLkFzYXBTY2hlZHVsZXIgPSBBc2FwU2NoZWR1bGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXNhcFNjaGVkdWxlci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3NjaGVkdWxlci9Bc2FwU2NoZWR1bGVyLmpzXG4gKiogbW9kdWxlIGlkID0gNTYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIEltbWVkaWF0ZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9JbW1lZGlhdGUnKTtcbnZhciBGdXR1cmVBY3Rpb25fMSA9IHJlcXVpcmUoJy4vRnV0dXJlQWN0aW9uJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEFzYXBBY3Rpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc2FwQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzYXBBY3Rpb24oKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBBc2FwQWN0aW9uLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHNjaGVkdWxlci5hY3Rpb25zLnB1c2godGhpcyk7XG4gICAgICAgIGlmICghc2NoZWR1bGVyLnNjaGVkdWxlZElkKSB7XG4gICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBJbW1lZGlhdGVfMS5JbW1lZGlhdGUuc2V0SW1tZWRpYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlci5mbHVzaCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBBc2FwQWN0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIHNjaGVkdWxlZElkID0gc2NoZWR1bGVyLnNjaGVkdWxlZElkLCBhY3Rpb25zID0gc2NoZWR1bGVyLmFjdGlvbnM7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgIGlmIChhY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2NoZWR1bGVyLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNjaGVkdWxlZElkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIEltbWVkaWF0ZV8xLkltbWVkaWF0ZS5jbGVhckltbWVkaWF0ZShzY2hlZHVsZWRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBc2FwQWN0aW9uO1xufShGdXR1cmVBY3Rpb25fMS5GdXR1cmVBY3Rpb24pKTtcbmV4cG9ydHMuQXNhcEFjdGlvbiA9IEFzYXBBY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc2FwQWN0aW9uLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvc2NoZWR1bGVyL0FzYXBBY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSA1NjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qKlxuU29tZSBjcmVkaXQgZm9yIHRoaXMgaGVscGVyIGdvZXMgdG8gaHR0cDovL2dpdGh1Yi5jb20vWXV6dUpTL3NldEltbWVkaWF0ZVxuKi9cblwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4vcm9vdCcpO1xudmFyIEltbWVkaWF0ZURlZmluaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEltbWVkaWF0ZURlZmluaXRpb24ocm9vdCkge1xuICAgICAgICB0aGlzLnJvb3QgPSByb290O1xuICAgICAgICBpZiAocm9vdC5zZXRJbW1lZGlhdGUgJiYgdHlwZW9mIHJvb3Quc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHJvb3Quc2V0SW1tZWRpYXRlLmJpbmQocm9vdCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFySW1tZWRpYXRlID0gcm9vdC5jbGVhckltbWVkaWF0ZS5iaW5kKHJvb3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXh0SGFuZGxlID0gMTtcbiAgICAgICAgICAgIHRoaXMudGFza3NCeUhhbmRsZSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICAgICAgICAgIGlmICh0aGlzLmNhblVzZVByb2Nlc3NOZXh0VGljaygpKSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1tZWRpYXRlID0gdGhpcy5jcmVhdGVQcm9jZXNzTmV4dFRpY2tTZXRJbW1lZGlhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHRoaXMuY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuVXNlTWVzc2FnZUNoYW5uZWwoKSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbW1lZGlhdGUgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VDaGFubmVsU2V0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNhblVzZVJlYWR5U3RhdGVDaGFuZ2UoKSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1tZWRpYXRlID0gdGhpcy5jcmVhdGVSZWFkeVN0YXRlQ2hhbmdlU2V0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgICAgICAgICB0aGlzLnNldEltbWVkaWF0ZSA9IHRoaXMuY3JlYXRlU2V0VGltZW91dFNldEltbWVkaWF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNpID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGNsZWFySW1tZWRpYXRlLmluc3RhbmNlLnRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjaS5pbnN0YW5jZSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNsZWFySW1tZWRpYXRlID0gY2k7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNhblVzZVByb2Nlc3NOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRlbnRpZnkodGhpcy5yb290LnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jYW5Vc2VNZXNzYWdlQ2hhbm5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsKTtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNhblVzZVJlYWR5U3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkb2N1bWVudCA9IHRoaXMucm9vdC5kb2N1bWVudDtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oZG9jdW1lbnQgJiYgJ29ucmVhZHlzdGF0ZWNoYW5nZScgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpO1xuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY2FuVXNlUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByb290ID0gdGhpcy5yb290O1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGByb290LnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKHJvb3QucG9zdE1lc3NhZ2UgJiYgIXJvb3QuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXNfMSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gcm9vdC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICByb290Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzXzEgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByb290LnBvc3RNZXNzYWdlKCcnLCAnKicpO1xuICAgICAgICAgICAgcm9vdC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91c18xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gYWNjZXB0cyB0aGUgc2FtZSBhcmd1bWVudHMgYXMgc2V0SW1tZWRpYXRlLCBidXRcbiAgICAvLyByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXF1aXJlcyBubyBhcmd1bWVudHMuXG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUucGFydGlhbGx5QXBwbGllZCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHJlc3VsdCgpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHJlc3VsdCwgaGFuZGxlciA9IF9hLmhhbmRsZXIsIGFyZ3MgPSBfYS5hcmdzO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgKG5ldyBGdW5jdGlvbignJyArIGhhbmRsZXIpKSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmbi5oYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgZm4uYXJncyA9IGFyZ3M7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICB0aGlzLnRhc2tzQnlIYW5kbGVbdGhpcy5uZXh0SGFuZGxlXSA9IHRoaXMucGFydGlhbGx5QXBwbGllZC5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0SGFuZGxlKys7XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVQcm9jZXNzTmV4dFRpY2tTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHNldEltbWVkaWF0ZS5pbnN0YW5jZTtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBpbnN0YW5jZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpbnN0YW5jZS5yb290LnByb2Nlc3MubmV4dFRpY2soaW5zdGFuY2UucGFydGlhbGx5QXBwbGllZChpbnN0YW5jZS5ydW5JZlByZXNlbnQsIGhhbmRsZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgfTtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVQb3N0TWVzc2FnZVNldEltbWVkaWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG4gICAgICAgIHZhciByb290ID0gdGhpcy5yb290O1xuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9ICdzZXRJbW1lZGlhdGUkJyArIHJvb3QuTWF0aC5yYW5kb20oKSArICckJztcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uIGdsb2JhbE1lc3NhZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBnbG9iYWxNZXNzYWdlSGFuZGxlci5pbnN0YW5jZTtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IHJvb3QgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5ydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgb25HbG9iYWxNZXNzYWdlLmluc3RhbmNlID0gdGhpcztcbiAgICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHNldEltbWVkaWF0ZSwgbWVzc2FnZVByZWZpeCA9IF9hLm1lc3NhZ2VQcmVmaXgsIGluc3RhbmNlID0gX2EuaW5zdGFuY2U7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gaW5zdGFuY2UuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO1xuICAgICAgICAgICAgaW5zdGFuY2Uucm9vdC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCAnKicpO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgfTtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICBmbi5tZXNzYWdlUHJlZml4ID0gbWVzc2FnZVByZWZpeDtcbiAgICAgICAgcmV0dXJuIGZuO1xuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUucnVuSWZQcmVzZW50ID0gZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiAnV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuJ1xuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyAndG9vIG11Y2ggcmVjdXJzaW9uJyBlcnJvci5cbiAgICAgICAgICAgIHRoaXMucm9vdC5zZXRUaW1lb3V0KHRoaXMucGFydGlhbGx5QXBwbGllZCh0aGlzLnJ1bklmUHJlc2VudCwgaGFuZGxlKSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRoaXMudGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGFzaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgSW1tZWRpYXRlRGVmaW5pdGlvbi5wcm90b3R5cGUuY3JlYXRlTWVzc2FnZUNoYW5uZWxTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IHRoaXMucm9vdC5NZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBfdGhpcy5ydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKCkge1xuICAgICAgICAgICAgdmFyIF9hID0gc2V0SW1tZWRpYXRlLCBjaGFubmVsID0gX2EuY2hhbm5lbCwgaW5zdGFuY2UgPSBfYS5pbnN0YW5jZTtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBpbnN0YW5jZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgICAgICB9O1xuICAgICAgICBmbi5jaGFubmVsID0gY2hhbm5lbDtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfTtcbiAgICBJbW1lZGlhdGVEZWZpbml0aW9uLnByb3RvdHlwZS5jcmVhdGVSZWFkeVN0YXRlQ2hhbmdlU2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoKSB7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBzZXRJbW1lZGlhdGUuaW5zdGFuY2U7XG4gICAgICAgICAgICB2YXIgcm9vdCA9IGluc3RhbmNlLnJvb3Q7XG4gICAgICAgICAgICB2YXIgZG9jID0gcm9vdC5kb2N1bWVudDtcbiAgICAgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBpbnN0YW5jZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5ydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgICAgICB9O1xuICAgICAgICBmbi5pbnN0YW5jZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICB9O1xuICAgIEltbWVkaWF0ZURlZmluaXRpb24ucHJvdG90eXBlLmNyZWF0ZVNldFRpbWVvdXRTZXRJbW1lZGlhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHNldEltbWVkaWF0ZS5pbnN0YW5jZTtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBpbnN0YW5jZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpbnN0YW5jZS5yb290LnNldFRpbWVvdXQoaW5zdGFuY2UucGFydGlhbGx5QXBwbGllZChpbnN0YW5jZS5ydW5JZlByZXNlbnQsIGhhbmRsZSksIDApO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgfTtcbiAgICAgICAgZm4uaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfTtcbiAgICByZXR1cm4gSW1tZWRpYXRlRGVmaW5pdGlvbjtcbn0oKSk7XG5leHBvcnRzLkltbWVkaWF0ZURlZmluaXRpb24gPSBJbW1lZGlhdGVEZWZpbml0aW9uO1xuZXhwb3J0cy5JbW1lZGlhdGUgPSBuZXcgSW1tZWRpYXRlRGVmaW5pdGlvbihyb290XzEucm9vdCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbW1lZGlhdGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy91dGlsL0ltbWVkaWF0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU2M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwidmFyIG5leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy9icm93c2VyLmpzJykubmV4dFRpY2s7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG52YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG52YXIgaW1tZWRpYXRlSWRzID0ge307XG52YXIgbmV4dEltbWVkaWF0ZUlkID0gMDtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHsgdGltZW91dC5jbG9zZSgpOyB9O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIFRoYXQncyBub3QgaG93IG5vZGUuanMgaW1wbGVtZW50cyBpdCBidXQgdGhlIGV4cG9zZWQgYXBpIGlzIHRoZSBzYW1lLlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgPyBzZXRJbW1lZGlhdGUgOiBmdW5jdGlvbihmbikge1xuICB2YXIgaWQgPSBuZXh0SW1tZWRpYXRlSWQrKztcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGZhbHNlIDogc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gIGltbWVkaWF0ZUlkc1tpZF0gPSB0cnVlO1xuXG4gIG5leHRUaWNrKGZ1bmN0aW9uIG9uTmV4dFRpY2soKSB7XG4gICAgaWYgKGltbWVkaWF0ZUlkc1tpZF0pIHtcbiAgICAgIC8vIGZuLmNhbGwoKSBpcyBmYXN0ZXIgc28gd2Ugb3B0aW1pemUgZm9yIHRoZSBjb21tb24gdXNlLWNhc2VcbiAgICAgIC8vIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vY2FsbC1hcHBseS1zZWd1XG4gICAgICBpZiAoYXJncykge1xuICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCk7XG4gICAgICB9XG4gICAgICAvLyBQcmV2ZW50IGlkcyBmcm9tIGxlYWtpbmdcbiAgICAgIGV4cG9ydHMuY2xlYXJJbW1lZGlhdGUoaWQpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGlkO1xufTtcblxuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHR5cGVvZiBjbGVhckltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gY2xlYXJJbW1lZGlhdGUgOiBmdW5jdGlvbihpZCkge1xuICBkZWxldGUgaW1tZWRpYXRlSWRzW2lkXTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDU2NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDU2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHN3aXRjaF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivc3dpdGNoJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3dpdGNoID0gc3dpdGNoXzEuX3N3aXRjaDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA1NjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlIGludG8gYSBmaXJzdC1vcmRlciBPYnNlcnZhYmxlIGJ5XG4gKiBzdWJzY3JpYmluZyB0byBvbmx5IHRoZSBtb3N0IHJlY2VudGx5IGVtaXR0ZWQgb2YgdGhvc2UgaW5uZXIgT2JzZXJ2YWJsZXMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkZsYXR0ZW5zIGFuIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXMgYnkgZHJvcHBpbmcgdGhlXG4gKiBwcmV2aW91cyBpbm5lciBPYnNlcnZhYmxlIG9uY2UgYSBuZXcgb25lIGFwcGVhcnMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc3dpdGNoLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBzd2l0Y2hgIHN1YnNjcmliZXMgdG8gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIE9ic2VydmFibGVzLCBhbHNvIGtub3duIGFzIGFcbiAqIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlLiBFYWNoIHRpbWUgaXQgb2JzZXJ2ZXMgb25lIG9mIHRoZXNlIGVtaXR0ZWQgaW5uZXJcbiAqIE9ic2VydmFibGVzLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgc3Vic2NyaWJlcyB0byB0aGUgaW5uZXIgT2JzZXJ2YWJsZSBhbmRcbiAqIGJlZ2lucyBlbWl0dGluZyB0aGUgaXRlbXMgZW1pdHRlZCBieSB0aGF0LiBTbyBmYXIsIGl0IGJlaGF2ZXNcbiAqIGxpa2Uge0BsaW5rIG1lcmdlQWxsfS4gSG93ZXZlciwgd2hlbiBhIG5ldyBpbm5lciBPYnNlcnZhYmxlIGlzIGVtaXR0ZWQsXG4gKiBgc3dpdGNoYCB1bnN1YnNjcmliZXMgZnJvbSB0aGUgZWFybGllci1lbWl0dGVkIGlubmVyIE9ic2VydmFibGUgYW5kXG4gKiBzdWJzY3JpYmVzIHRvIHRoZSBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBhbmQgYmVnaW5zIGVtaXR0aW5nIGl0ZW1zIGZyb20gaXQuIEl0XG4gKiBjb250aW51ZXMgdG8gYmVoYXZlIGxpa2UgdGhpcyBmb3Igc3Vic2VxdWVudCBpbm5lciBPYnNlcnZhYmxlcy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5SZXJ1biBhbiBpbnRlcnZhbCBPYnNlcnZhYmxlIG9uIGV2ZXJ5IGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIC8vIEVhY2ggY2xpY2sgZXZlbnQgaXMgbWFwcGVkIHRvIGFuIE9ic2VydmFibGUgdGhhdCB0aWNrcyBldmVyeSBzZWNvbmRcbiAqIHZhciBoaWdoZXJPcmRlciA9IGNsaWNrcy5tYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHZhciBzd2l0Y2hlZCA9IGhpZ2hlck9yZGVyLnN3aXRjaCgpO1xuICogLy8gVGhlIG91dGNvbWUgaXMgdGhhdCBgc3dpdGNoZWRgIGlzIGVzc2VudGlhbGx5IGEgdGltZXIgdGhhdCByZXN0YXJ0c1xuICogLy8gb24gZXZlcnkgY2xpY2suIFRoZSBpbnRlcnZhbCBPYnNlcnZhYmxlcyBmcm9tIG9sZGVyIGNsaWNrcyBkbyBub3QgbWVyZ2VcbiAqIC8vIHdpdGggdGhlIGN1cnJlbnQgaW50ZXJ2YWwgT2JzZXJ2YWJsZS5cbiAqIHN3aXRjaGVkLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lQWxsfVxuICogQHNlZSB7QGxpbmsgY29uY2F0QWxsfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlQWxsfVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG4gKiBAc2VlIHtAbGluayB6aXBBbGx9XG4gKlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBpdGVtcyBlbWl0dGVkIGJ5IHRoZVxuICogT2JzZXJ2YWJsZSBtb3N0IHJlY2VudGx5IGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQG1ldGhvZCBzd2l0Y2hcbiAqIEBuYW1lIHN3aXRjaFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gX3N3aXRjaCgpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBTd2l0Y2hPcGVyYXRvcigpKTtcbn1cbmV4cG9ydHMuX3N3aXRjaCA9IF9zd2l0Y2g7XG52YXIgU3dpdGNoT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN3aXRjaE9wZXJhdG9yKCkge1xuICAgIH1cbiAgICBTd2l0Y2hPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBTd2l0Y2hTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFN3aXRjaFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTd2l0Y2hTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN3aXRjaFN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgfVxuICAgIFN3aXRjaFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVJbm5lcigpO1xuICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICB0aGlzLmFkZCh0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB2YWx1ZSkpO1xuICAgIH07XG4gICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZUlubmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuYWN0aXZlID4gMCA/IHRoaXMuYWN0aXZlIC0gMSA6IDA7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG4gICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgfTtcbiAgICBTd2l0Y2hTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgU3dpdGNoU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVJbm5lcigpO1xuICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5hY3RpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFN3aXRjaFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc3dpdGNoLmpzXG4gKiogbW9kdWxlIGlkID0gNTY3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc3dpdGNoTWFwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9zd2l0Y2hNYXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2hNYXAgPSBzd2l0Y2hNYXBfMS5zd2l0Y2hNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXAuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwLmpzXG4gKiogbW9kdWxlIGlkID0gNTY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gYW4gT2JzZXJ2YWJsZSB3aGljaCBpcyBtZXJnZWQgaW4gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZSwgZW1pdHRpbmcgdmFsdWVzIG9ubHkgZnJvbSB0aGUgbW9zdCByZWNlbnRseSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TWFwcyBlYWNoIHZhbHVlIHRvIGFuIE9ic2VydmFibGUsIHRoZW4gZmxhdHRlbnMgYWxsIG9mXG4gKiB0aGVzZSBpbm5lciBPYnNlcnZhYmxlcyB1c2luZyB7QGxpbmsgc3dpdGNofS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9zd2l0Y2hNYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgYmFzZWQgb24gYXBwbHlpbmcgYSBmdW5jdGlvbiB0aGF0IHlvdVxuICogc3VwcGx5IHRvIGVhY2ggaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgd2hlcmUgdGhhdCBmdW5jdGlvblxuICogcmV0dXJucyBhbiAoc28tY2FsbGVkIFwiaW5uZXJcIikgT2JzZXJ2YWJsZS4gRWFjaCB0aW1lIGl0IG9ic2VydmVzIG9uZSBvZiB0aGVzZVxuICogaW5uZXIgT2JzZXJ2YWJsZXMsIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiZWdpbnMgZW1pdHRpbmcgdGhlIGl0ZW1zIGVtaXR0ZWQgYnlcbiAqIHRoYXQgaW5uZXIgT2JzZXJ2YWJsZS4gV2hlbiBhIG5ldyBpbm5lciBPYnNlcnZhYmxlIGlzIGVtaXR0ZWQsIGBzd2l0Y2hNYXBgXG4gKiBzdG9wcyBlbWl0dGluZyBpdGVtcyBmcm9tIHRoZSBlYXJsaWVyLWVtaXR0ZWQgaW5uZXIgT2JzZXJ2YWJsZSBhbmQgYmVnaW5zXG4gKiBlbWl0dGluZyBpdGVtcyBmcm9tIHRoZSBuZXcgb25lLiBJdCBjb250aW51ZXMgdG8gYmVoYXZlIGxpa2UgdGhpcyBmb3JcbiAqIHN1YnNlcXVlbnQgaW5uZXIgT2JzZXJ2YWJsZXMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+UmVydW4gYW4gaW50ZXJ2YWwgT2JzZXJ2YWJsZSBvbiBldmVyeSBjbGljayBldmVudDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLnN3aXRjaE1hcCgoZXYpID0+IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCkpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBjb25jYXRNYXB9XG4gKiBAc2VlIHtAbGluayBleGhhdXN0TWFwfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VNYXB9XG4gKiBAc2VlIHtAbGluayBzd2l0Y2h9XG4gKiBAc2VlIHtAbGluayBzd2l0Y2hNYXBUb31cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCA/aW5kZXg6IG51bWJlcik6IE9ic2VydmFibGV9IHByb2plY3QgQSBmdW5jdGlvblxuICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cbiAqIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG4gKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG4gKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG4gKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIHRha2luZyBvbmx5IHRoZSB2YWx1ZXMgZnJvbSB0aGUgbW9zdCByZWNlbnRseVxuICogcHJvamVjdGVkIGlubmVyIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHN3aXRjaE1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc3dpdGNoTWFwKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU3dpdGNoTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuc3dpdGNoTWFwID0gc3dpdGNoTWFwO1xudmFyIFN3aXRjaE1hcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTd2l0Y2hNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgfVxuICAgIFN3aXRjaE1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLl9zdWJzY3JpYmUobmV3IFN3aXRjaE1hcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnJlc3VsdFNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3dpdGNoTWFwT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTd2l0Y2hNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3dpdGNoTWFwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW5uZXJTdWIocmVzdWx0LCB2YWx1ZSwgaW5kZXgpO1xuICAgIH07XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKHJlc3VsdCwgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG4gICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZCh0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCByZXN1bHQsIHZhbHVlLCBpbmRleCkpO1xuICAgIH07XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoIWlubmVyU3Vic2NyaXB0aW9uIHx8IGlubmVyU3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgIH07XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlOb3RpZnlOZXh0KG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5Tm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hNYXBTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3N3aXRjaE1hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDU2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHN3aXRjaE1hcFRvXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9zd2l0Y2hNYXBUbycpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnN3aXRjaE1hcFRvID0gc3dpdGNoTWFwVG9fMS5zd2l0Y2hNYXBUbztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcFRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcFRvLmpzXG4gKiogbW9kdWxlIGlkID0gNTcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogUHJvamVjdHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIHNhbWUgT2JzZXJ2YWJsZSB3aGljaCBpcyBmbGF0dGVuZWQgbXVsdGlwbGVcbiAqIHRpbWVzIHdpdGgge0BsaW5rIHN3aXRjaH0gaW4gdGhlIG91dHB1dCBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIHN3aXRjaE1hcH0sIGJ1dCBtYXBzIGVhY2ggdmFsdWVcbiAqIGFsd2F5cyB0byB0aGUgc2FtZSBpbm5lciBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3N3aXRjaE1hcFRvLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIE1hcHMgZWFjaCBzb3VyY2UgdmFsdWUgdG8gdGhlIGdpdmVuIE9ic2VydmFibGUgYGlubmVyT2JzZXJ2YWJsZWAgcmVnYXJkbGVzc1xuICogb2YgdGhlIHNvdXJjZSB2YWx1ZSwgYW5kIHRoZW4gZmxhdHRlbnMgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGludG8gb25lXG4gKiBzaW5nbGUgT2JzZXJ2YWJsZSwgd2hpY2ggaXMgdGhlIG91dHB1dCBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGVzXG4gKiBlbWl0cyB2YWx1ZXMgb25seSBmcm9tIHRoZSBtb3N0IHJlY2VudGx5IGVtaXR0ZWQgaW5zdGFuY2Ugb2ZcbiAqIGBpbm5lck9ic2VydmFibGVgLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlJlcnVuIGFuIGludGVydmFsIE9ic2VydmFibGUgb24gZXZlcnkgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5zd2l0Y2hNYXBUbyhSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwVG99XG4gKiBAc2VlIHtAbGluayBzd2l0Y2h9XG4gKiBAc2VlIHtAbGluayBzd2l0Y2hNYXB9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gaW5uZXJPYnNlcnZhYmxlIEFuIE9ic2VydmFibGUgdG8gcmVwbGFjZSBlYWNoIHZhbHVlIGZyb21cbiAqIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24ob3V0ZXJWYWx1ZTogVCwgaW5uZXJWYWx1ZTogSSwgb3V0ZXJJbmRleDogbnVtYmVyLCBpbm5lckluZGV4OiBudW1iZXIpOiBhbnl9IFtyZXN1bHRTZWxlY3Rvcl1cbiAqIEEgZnVuY3Rpb24gdG8gcHJvZHVjZSB0aGUgdmFsdWUgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGJhc2VkIG9uIHRoZSB2YWx1ZXNcbiAqIGFuZCB0aGUgaW5kaWNlcyBvZiB0aGUgc291cmNlIChvdXRlcikgZW1pc3Npb24gYW5kIHRoZSBpbm5lciBPYnNlcnZhYmxlXG4gKiBlbWlzc2lvbi4gVGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmU6XG4gKiAtIGBvdXRlclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiAtIGBvdXRlckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIGZyb20gdGhlIHByb2plY3RlZCBPYnNlcnZhYmxlXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgaXRlbXMgZnJvbSB0aGUgZ2l2ZW5cbiAqIGBpbm5lck9ic2VydmFibGVgIGV2ZXJ5IHRpbWUgYSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBmcm9tIHRoZSBnaXZlblxuICogYGlubmVyT2JzZXJ2YWJsZWAgKGFuZCBvcHRpb25hbGx5IHRyYW5zZm9ybWVkIHRocm91Z2ggYHJlc3VsdFNlbGVjdG9yYCkgZXZlcnlcbiAqIHRpbWUgYSB2YWx1ZSBpcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSwgYW5kIHRha2luZyBvbmx5IHRoZSB2YWx1ZXNcbiAqIGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIGlubmVyIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHN3aXRjaE1hcFRvXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBzd2l0Y2hNYXBUbyhpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU3dpdGNoTWFwVG9PcGVyYXRvcihpbm5lck9ic2VydmFibGUsIHJlc3VsdFNlbGVjdG9yKSk7XG59XG5leHBvcnRzLnN3aXRjaE1hcFRvID0gc3dpdGNoTWFwVG87XG52YXIgU3dpdGNoTWFwVG9PcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3dpdGNoTWFwVG9PcGVyYXRvcihvYnNlcnZhYmxlLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgfVxuICAgIFN3aXRjaE1hcFRvT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU3dpdGNoTWFwVG9TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub2JzZXJ2YWJsZSwgdGhpcy5yZXN1bHRTZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFN3aXRjaE1hcFRvT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBTd2l0Y2hNYXBUb1N1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBUb1N1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3dpdGNoTWFwVG9TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBpbm5lciwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHRoaXMuaW5uZXIsIHZhbHVlLCB0aGlzLmluZGV4KyspKTtcbiAgICB9O1xuICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uO1xuICAgICAgICBpZiAoIWlubmVyU3Vic2NyaXB0aW9uIHx8IGlubmVyU3Vic2NyaXB0aW9uLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBUb1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3dpdGNoTWFwVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHJlc3VsdFNlbGVjdG9yID0gX2EucmVzdWx0U2VsZWN0b3IsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChyZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy50cnlSZXN1bHRTZWxlY3RvcihvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN3aXRjaE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCByZXN1bHRTZWxlY3RvciA9IF9hLnJlc3VsdFNlbGVjdG9yLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uO1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgICByZXR1cm4gU3dpdGNoTWFwVG9TdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcFRvLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivc3dpdGNoTWFwVG8uanNcbiAqKiBtb2R1bGUgaWQgPSA1NzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0YWtlXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90YWtlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZSA9IHRha2VfMS50YWtlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90YWtlLmpzXG4gKiogbW9kdWxlIGlkID0gNTcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcicpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUnKTtcbi8qKlxuICogQHRocm93cyB7QXJndW1lbnRPdXRPZlJhbmdlRXJyb3J9IFdoZW4gdXNpbmcgYHRha2UoaSlgLCBpdCBkZWxpdmVycyBhblxuICogQXJndW1lbnRPdXRPclJhbmdlRXJyb3IgdG8gdGhlIE9ic2VydmVyJ3MgYGVycm9yYCBjYWxsYmFjayBpZiBgaSA8IDBgLlxuICogQHBhcmFtIHRvdGFsXG4gKiBAcmV0dXJuIHthbnl9XG4gKiBAbWV0aG9kIHRha2VcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRha2UodG90YWwpIHtcbiAgICBpZiAodG90YWwgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRha2VPcGVyYXRvcih0b3RhbCkpO1xuICAgIH1cbn1cbmV4cG9ydHMudGFrZSA9IHRha2U7XG52YXIgVGFrZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYWtlT3BlcmF0b3IodG90YWwpIHtcbiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuICAgICAgICBpZiAodGhpcy50b3RhbCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIFRha2VPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnRvdGFsKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVGFrZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUYWtlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUYWtlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbiAgICBUYWtlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHRvdGFsID0gdGhpcy50b3RhbDtcbiAgICAgICAgaWYgKCsrdGhpcy5jb3VudCA8PSB0b3RhbCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSB0b3RhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUYWtlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2UuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90YWtlLmpzXG4gKiogbW9kdWxlIGlkID0gNTczXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBlbGVtZW50IHdhcyBxdWVyaWVkIGF0IGEgY2VydGFpbiBpbmRleCBvZiBhblxuICogT2JzZXJ2YWJsZSwgYnV0IG5vIHN1Y2ggaW5kZXggb3IgcG9zaXRpb24gZXhpc3RzIGluIHRoYXQgc2VxdWVuY2UuXG4gKlxuICogQHNlZSB7QGxpbmsgZWxlbWVudEF0fVxuICogQHNlZSB7QGxpbmsgdGFrZX1cbiAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuICpcbiAqIEBjbGFzcyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvclxuICovXG52YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcmd1bWVudE91dE9mUmFuZ2VFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgJ2FyZ3VtZW50IG91dCBvZiByYW5nZScpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnQXJndW1lbnRPdXRPZlJhbmdlRXJyb3InO1xuICAgIH1cbiAgICByZXR1cm4gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yID0gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bcmd1bWVudE91dE9mUmFuZ2VFcnJvci5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IuanNcbiAqKiBtb2R1bGUgaWQgPSA1NzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0YWtlTGFzdF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGFrZUxhc3QnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlTGFzdCA9IHRha2VMYXN0XzEudGFrZUxhc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlTGFzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90YWtlTGFzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDU3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IHJlcXVpcmUoJy4uL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3InKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlJyk7XG4vKipcbiAqIEB0aHJvd3Mge0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yfSBXaGVuIHVzaW5nIGB0YWtlTGFzdChpKWAsIGl0IGRlbGl2ZXJzIGFuXG4gKiBBcmd1bWVudE91dE9yUmFuZ2VFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgIGNhbGxiYWNrIGlmIGBpIDwgMGAuXG4gKiBAcGFyYW0gdG90YWxcbiAqIEByZXR1cm4ge2FueX1cbiAqIEBtZXRob2QgdGFrZUxhc3RcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRha2VMYXN0KHRvdGFsKSB7XG4gICAgaWYgKHRvdGFsID09PSAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlTGFzdE9wZXJhdG9yKHRvdGFsKSk7XG4gICAgfVxufVxuZXhwb3J0cy50YWtlTGFzdCA9IHRha2VMYXN0O1xudmFyIFRha2VMYXN0T3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRha2VMYXN0T3BlcmF0b3IodG90YWwpIHtcbiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuICAgICAgICBpZiAodGhpcy50b3RhbCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcl8xLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIFRha2VMYXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGFrZUxhc3RTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudG90YWwpKTtcbiAgICB9O1xuICAgIHJldHVybiBUYWtlTGFzdE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVGFrZUxhc3RTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFrZUxhc3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRha2VMYXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIHRoaXMucmluZyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG4gICAgVGFrZUxhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcmluZyA9IHRoaXMucmluZztcbiAgICAgICAgdmFyIHRvdGFsID0gdGhpcy50b3RhbDtcbiAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5jb3VudCsrO1xuICAgICAgICBpZiAocmluZy5sZW5ndGggPCB0b3RhbCkge1xuICAgICAgICAgICAgcmluZy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGNvdW50ICUgdG90YWw7XG4gICAgICAgICAgICByaW5nW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUYWtlTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5jb3VudDtcbiAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5jb3VudCA+PSB0aGlzLnRvdGFsID8gdGhpcy50b3RhbCA6IHRoaXMuY291bnQ7XG4gICAgICAgICAgICB2YXIgcmluZyA9IHRoaXMucmluZztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWw7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpZHggPSAoY291bnQrKykgJSB0b3RhbDtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHJpbmdbaWR4XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBUYWtlTGFzdFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlTGFzdC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3Rha2VMYXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNTc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdGFrZVVudGlsXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90YWtlVW50aWwnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlVW50aWwgPSB0YWtlVW50aWxfMS50YWtlVW50aWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlVW50aWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdGFrZVVudGlsLmpzXG4gKiogbW9kdWxlIGlkID0gNTc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQHBhcmFtIG5vdGlmaWVyXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgdGFrZVVudGlsXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0YWtlVW50aWwobm90aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlVW50aWxPcGVyYXRvcihub3RpZmllcikpO1xufVxuZXhwb3J0cy50YWtlVW50aWwgPSB0YWtlVW50aWw7XG52YXIgVGFrZVVudGlsT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRha2VVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSB7XG4gICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcbiAgICB9XG4gICAgVGFrZVVudGlsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGFrZVVudGlsU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5vdGlmaWVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZVVudGlsT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUYWtlVW50aWxTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFrZVVudGlsU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUYWtlVW50aWxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjtcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBub3RpZmllcikpO1xuICAgIH1cbiAgICBUYWtlVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIFRha2VVbnRpbFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBub29wXG4gICAgfTtcbiAgICByZXR1cm4gVGFrZVVudGlsU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlVW50aWwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90YWtlVW50aWwuanNcbiAqKiBtb2R1bGUgaWQgPSA1NzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0YWtlV2hpbGVfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3Rha2VXaGlsZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2VXaGlsZSA9IHRha2VXaGlsZV8xLnRha2VXaGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VXaGlsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90YWtlV2hpbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1NzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBAcGFyYW0gcHJlZGljYXRlXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgdGFrZVdoaWxlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0YWtlV2hpbGUocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZVdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSk7XG59XG5leHBvcnRzLnRha2VXaGlsZSA9IHRha2VXaGlsZTtcbnZhciBUYWtlV2hpbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGFrZVdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSB7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgIH1cbiAgICBUYWtlV2hpbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUYWtlV2hpbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZVdoaWxlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUYWtlV2hpbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFrZVdoaWxlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUYWtlV2hpbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIFRha2VXaGlsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV4dE9yQ29tcGxldGUodmFsdWUsIHJlc3VsdCk7XG4gICAgfTtcbiAgICBUYWtlV2hpbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0T3JDb21wbGV0ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgcHJlZGljYXRlUmVzdWx0KSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChCb29sZWFuKHByZWRpY2F0ZVJlc3VsdCkpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRha2VXaGlsZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90YWtlV2hpbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA1ODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0aHJvdHRsZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGhyb3R0bGUnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50aHJvdHRsZSA9IHRocm90dGxlXzEudGhyb3R0bGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU4MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEBwYXJhbSBkdXJhdGlvblNlbGVjdG9yXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFI+fFdlYlNvY2tldFN1YmplY3Q8VD58T2JzZXJ2YWJsZTxUPn1cbiAqIEBtZXRob2QgdGhyb3R0bGVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRocm90dGxlKGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaHJvdHRsZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMudGhyb3R0bGUgPSB0aHJvdHRsZTtcbnZhciBUaHJvdHRsZU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUaHJvdHRsZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICB9XG4gICAgVGhyb3R0bGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUaHJvdHRsZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGhyb3R0bGVPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRocm90dGxlU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRocm90dGxlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaHJvdHRsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRocm90dGxlZCkge1xuICAgICAgICAgICAgdGhpcy50cnlEdXJhdGlvblNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlEdXJhdGlvblNlbGVjdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb25TZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdEFuZFRocm90dGxlKHZhbHVlLCBkdXJhdGlvbik7XG4gICAgfTtcbiAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLmVtaXRBbmRUaHJvdHRsZSA9IGZ1bmN0aW9uICh2YWx1ZSwgZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5hZGQodGhpcy50aHJvdHRsZWQgPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGR1cmF0aW9uKSk7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgfTtcbiAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRocm90dGxlZCA9IHRoaXMudGhyb3R0bGVkO1xuICAgICAgICBpZiAodGhyb3R0bGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0aHJvdHRsZWQpO1xuICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsO1xuICAgICAgICAgICAgdGhyb3R0bGVkLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLl91bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBUaHJvdHRsZVN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90aHJvdHRsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRocm90dGxlVGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGhyb3R0bGVUaW1lJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGhyb3R0bGVUaW1lID0gdGhyb3R0bGVUaW1lXzEudGhyb3R0bGVUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGVUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3Rocm90dGxlVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xuLyoqXG4gKiBAcGFyYW0gZGVsYXlcbiAqIEBwYXJhbSBzY2hlZHVsZXJcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCB0aHJvdHRsZVRpbWVcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRocm90dGxlVGltZShkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUaHJvdHRsZVRpbWVPcGVyYXRvcihkZWxheSwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLnRocm90dGxlVGltZSA9IHRocm90dGxlVGltZTtcbnZhciBUaHJvdHRsZVRpbWVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGhyb3R0bGVUaW1lT3BlcmF0b3IoZGVsYXksIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBUaHJvdHRsZVRpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVsYXksIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGhyb3R0bGVUaW1lT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGhyb3R0bGVUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgVGhyb3R0bGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRocm90dGxlZCkge1xuICAgICAgICAgICAgdGhpcy5hZGQodGhpcy50aHJvdHRsZWQgPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIHRoaXMuZGVsYXksIHsgc3Vic2NyaWJlcjogdGhpcyB9KSk7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbGVhclRocm90dGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGhyb3R0bGVkID0gdGhpcy50aHJvdHRsZWQ7XG4gICAgICAgIGlmICh0aHJvdHRsZWQpIHtcbiAgICAgICAgICAgIHRocm90dGxlZC51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTtcbiAgICAgICAgICAgIHRoaXMudGhyb3R0bGVkID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRocm90dGxlVGltZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5mdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7XG4gICAgdmFyIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcbiAgICBzdWJzY3JpYmVyLmNsZWFyVGhyb3R0bGUoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm90dGxlVGltZS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3Rocm90dGxlVGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU4NFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRpbWVvdXRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3RpbWVvdXQnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50aW1lb3V0ID0gdGltZW91dF8xLnRpbWVvdXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3RpbWVvdXQuanNcbiAqKiBtb2R1bGUgaWQgPSA1ODVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xudmFyIGlzRGF0ZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0RhdGUnKTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIEBwYXJhbSBkdWVcbiAqIEBwYXJhbSBlcnJvclRvU2VuZFxuICogQHBhcmFtIHNjaGVkdWxlclxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIHRpbWVvdXRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHRpbWVvdXQoZHVlLCBlcnJvclRvU2VuZCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGVycm9yVG9TZW5kID09PSB2b2lkIDApIHsgZXJyb3JUb1NlbmQgPSBudWxsOyB9XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICB2YXIgYWJzb2x1dGVUaW1lb3V0ID0gaXNEYXRlXzEuaXNEYXRlKGR1ZSk7XG4gICAgdmFyIHdhaXRGb3IgPSBhYnNvbHV0ZVRpbWVvdXQgPyAoK2R1ZSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkdWUpO1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRpbWVvdXRPcGVyYXRvcih3YWl0Rm9yLCBhYnNvbHV0ZVRpbWVvdXQsIGVycm9yVG9TZW5kLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMudGltZW91dCA9IHRpbWVvdXQ7XG52YXIgVGltZW91dE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUaW1lb3V0T3BlcmF0b3Iod2FpdEZvciwgYWJzb2x1dGVUaW1lb3V0LCBlcnJvclRvU2VuZCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMud2FpdEZvciA9IHdhaXRGb3I7XG4gICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0O1xuICAgICAgICB0aGlzLmVycm9yVG9TZW5kID0gZXJyb3JUb1NlbmQ7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICBUaW1lb3V0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgVGltZW91dFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5hYnNvbHV0ZVRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGhpcy5lcnJvclRvU2VuZCwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBUaW1lb3V0T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBUaW1lb3V0U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbWVvdXRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRpbWVvdXRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBhYnNvbHV0ZVRpbWVvdXQsIHdhaXRGb3IsIGVycm9yVG9TZW5kLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFic29sdXRlVGltZW91dCA9IGFic29sdXRlVGltZW91dDtcbiAgICAgICAgdGhpcy53YWl0Rm9yID0gd2FpdEZvcjtcbiAgICAgICAgdGhpcy5lcnJvclRvU2VuZCA9IGVycm9yVG9TZW5kO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzSW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZVRpbWVvdXQoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZSwgXCJwcmV2aW91c0luZGV4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNJbmRleDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZSwgXCJoYXNDb21wbGV0ZWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oYXNDb21wbGV0ZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFRpbWVvdXRTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgc291cmNlID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHN0YXRlLmluZGV4O1xuICAgICAgICBpZiAoIXNvdXJjZS5oYXNDb21wbGV0ZWQgJiYgc291cmNlLnByZXZpb3VzSW5kZXggPT09IGN1cnJlbnRJbmRleCkge1xuICAgICAgICAgICAgc291cmNlLm5vdGlmeVRpbWVvdXQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGltZW91dFN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHRoaXMuaW5kZXg7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVvdXRTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCwgdGhpcy53YWl0Rm9yLCB7IHN1YnNjcmliZXI6IHRoaXMsIGluZGV4OiBjdXJyZW50SW5kZXggfSk7XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgdGhpcy5fcHJldmlvdXNJbmRleCA9IGN1cnJlbnRJbmRleDtcbiAgICB9O1xuICAgIFRpbWVvdXRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICBpZiAoIXRoaXMuYWJzb2x1dGVUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlVGltZW91dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuX2hhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBUaW1lb3V0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lcnJvcih0aGlzLmVycm9yVG9TZW5kIHx8IG5ldyBFcnJvcigndGltZW91dCcpKTtcbiAgICB9O1xuICAgIHJldHVybiBUaW1lb3V0U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVvdXQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci90aW1lb3V0LmpzXG4gKiogbW9kdWxlIGlkID0gNTg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdGltZW91dFdpdGhfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3RpbWVvdXRXaXRoJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGltZW91dFdpdGggPSB0aW1lb3V0V2l0aF8xLnRpbWVvdXRXaXRoO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dFdpdGguanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3IvdGltZW91dFdpdGguanNcbiAqKiBtb2R1bGUgaWQgPSA1ODdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xudmFyIGlzRGF0ZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0RhdGUnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEBwYXJhbSBkdWVcbiAqIEBwYXJhbSB3aXRoT2JzZXJ2YWJsZVxuICogQHBhcmFtIHNjaGVkdWxlclxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPnxXZWJTb2NrZXRTdWJqZWN0PFQ+fE9ic2VydmFibGU8VD59XG4gKiBAbWV0aG9kIHRpbWVvdXRXaXRoXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0aW1lb3V0V2l0aChkdWUsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHZhciBhYnNvbHV0ZVRpbWVvdXQgPSBpc0RhdGVfMS5pc0RhdGUoZHVlKTtcbiAgICB2YXIgd2FpdEZvciA9IGFic29sdXRlVGltZW91dCA/ICgrZHVlIC0gc2NoZWR1bGVyLm5vdygpKSA6IE1hdGguYWJzKGR1ZSk7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGltZW91dFdpdGhPcGVyYXRvcih3YWl0Rm9yLCBhYnNvbHV0ZVRpbWVvdXQsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMudGltZW91dFdpdGggPSB0aW1lb3V0V2l0aDtcbnZhciBUaW1lb3V0V2l0aE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUaW1lb3V0V2l0aE9wZXJhdG9yKHdhaXRGb3IsIGFic29sdXRlVGltZW91dCwgd2l0aE9ic2VydmFibGUsIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLndhaXRGb3IgPSB3YWl0Rm9yO1xuICAgICAgICB0aGlzLmFic29sdXRlVGltZW91dCA9IGFic29sdXRlVGltZW91dDtcbiAgICAgICAgdGhpcy53aXRoT2JzZXJ2YWJsZSA9IHdpdGhPYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgVGltZW91dFdpdGhPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUaW1lb3V0V2l0aFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5hYnNvbHV0ZVRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGhpcy53aXRoT2JzZXJ2YWJsZSwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBUaW1lb3V0V2l0aE9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVGltZW91dFdpdGhTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGltZW91dFdpdGhTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRpbWVvdXRXaXRoU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYWJzb2x1dGVUaW1lb3V0LCB3YWl0Rm9yLCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0O1xuICAgICAgICB0aGlzLndhaXRGb3IgPSB3YWl0Rm9yO1xuICAgICAgICB0aGlzLndpdGhPYnNlcnZhYmxlID0gd2l0aE9ic2VydmFibGU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLnRpbWVvdXRTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLl9wcmV2aW91c0luZGV4ID0gMDtcbiAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIGRlc3RpbmF0aW9uLmFkZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZVRpbWVvdXQoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUsIFwicHJldmlvdXNJbmRleFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzSW5kZXg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLCBcImhhc0NvbXBsZXRlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc0NvbXBsZXRlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLmRpc3BhdGNoVGltZW91dCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgc291cmNlID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHN0YXRlLmluZGV4O1xuICAgICAgICBpZiAoIXNvdXJjZS5oYXNDb21wbGV0ZWQgJiYgc291cmNlLnByZXZpb3VzSW5kZXggPT09IGN1cnJlbnRJbmRleCkge1xuICAgICAgICAgICAgc291cmNlLmhhbmRsZVRpbWVvdXQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZVRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJyZW50SW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICB2YXIgdGltZW91dFN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCBpbmRleDogY3VycmVudEluZGV4IH07XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVvdXRXaXRoU3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGltZW91dFN0YXRlKTtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICB0aGlzLl9wcmV2aW91c0luZGV4ID0gY3VycmVudEluZGV4O1xuICAgIH07XG4gICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICBpZiAoIXRoaXMuYWJzb2x1dGVUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlVGltZW91dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLl9oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgVGltZW91dFdpdGhTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5faGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuaGFuZGxlVGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICB2YXIgd2l0aE9ic2VydmFibGUgPSB0aGlzLndpdGhPYnNlcnZhYmxlO1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5hZGQodGhpcy50aW1lb3V0U3Vic2NyaXB0aW9uID0gc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB3aXRoT2JzZXJ2YWJsZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGltZW91dFdpdGhTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVvdXRXaXRoLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvdGltZW91dFdpdGguanNcbiAqKiBtb2R1bGUgaWQgPSA1ODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB0b0FycmF5XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci90b0FycmF5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9BcnJheSA9IHRvQXJyYXlfMS50b0FycmF5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9BcnJheS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci90b0FycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gNTg5XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxhbnlbXT58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCB0b0FycmF5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0b0FycmF5KCkge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFRvQXJyYXlPcGVyYXRvcigpKTtcbn1cbmV4cG9ydHMudG9BcnJheSA9IHRvQXJyYXk7XG52YXIgVG9BcnJheU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUb0FycmF5T3BlcmF0b3IoKSB7XG4gICAgfVxuICAgIFRvQXJyYXlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBUb0FycmF5U3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVG9BcnJheU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVG9BcnJheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUb0FycmF5U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUb0FycmF5U3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBbXTtcbiAgICB9XG4gICAgVG9BcnJheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdGhpcy5hcnJheS5wdXNoKHgpO1xuICAgIH07XG4gICAgVG9BcnJheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gVG9BcnJheVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b0FycmF5LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvdG9BcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDU5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRvUHJvbWlzZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdG9Qcm9taXNlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9Qcm9taXNlID0gdG9Qcm9taXNlXzEudG9Qcm9taXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9Qcm9taXNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3RvUHJvbWlzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU5MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcm9vdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9yb290Jyk7XG4vKipcbiAqIEBwYXJhbSBQcm9taXNlQ3RvclxuICogQHJldHVybiB7UHJvbWlzZTxUPn1cbiAqIEBtZXRob2QgdG9Qcm9taXNlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0b1Byb21pc2UoUHJvbWlzZUN0b3IpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGlmICghUHJvbWlzZUN0b3IpIHtcbiAgICAgICAgaWYgKHJvb3RfMS5yb290LlJ4ICYmIHJvb3RfMS5yb290LlJ4LmNvbmZpZyAmJiByb290XzEucm9vdC5SeC5jb25maWcuUHJvbWlzZSkge1xuICAgICAgICAgICAgUHJvbWlzZUN0b3IgPSByb290XzEucm9vdC5SeC5jb25maWcuUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyb290XzEucm9vdC5Qcm9taXNlKSB7XG4gICAgICAgICAgICBQcm9taXNlQ3RvciA9IHJvb3RfMS5yb290LlByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFQcm9taXNlQ3Rvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2VDdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHZhbHVlID0geDsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydHMudG9Qcm9taXNlID0gdG9Qcm9taXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9Qcm9taXNlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3IvdG9Qcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gNTkyXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgd2luZG93XzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci93aW5kb3cnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3cgPSB3aW5kb3dfMS53aW5kb3c7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3cuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93LmpzXG4gKiogbW9kdWxlIGlkID0gNTkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbnZhciBPdXRlclN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL091dGVyU3Vic2NyaWJlcicpO1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG4vKipcbiAqIEJyYW5jaCBvdXQgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHZhbHVlcyBhcyBhIG5lc3RlZCBPYnNlcnZhYmxlIHdoZW5ldmVyXG4gKiBgd2luZG93Qm91bmRhcmllc2AgZW1pdHMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyfSwgYnV0IGVtaXRzIGEgbmVzdGVkIE9ic2VydmFibGVcbiAqIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgZW1pdHMgY29ubmVjdGVkLCBub24tb3ZlcmxhcHBpbmdcbiAqIHdpbmRvd3MuIEl0IGVtaXRzIHRoZSBjdXJyZW50IHdpbmRvdyBhbmQgb3BlbnMgYSBuZXcgb25lIHdoZW5ldmVyIHRoZVxuICogT2JzZXJ2YWJsZSBgd2luZG93Qm91bmRhcmllc2AgZW1pdHMgYW4gaXRlbS4gQmVjYXVzZSBlYWNoIHdpbmRvdyBpcyBhblxuICogT2JzZXJ2YWJsZSwgdGhlIG91dHB1dCBpcyBhIGhpZ2hlci1vcmRlciBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkluIGV2ZXJ5IHdpbmRvdyBvZiAxIHNlY29uZCBlYWNoLCBlbWl0IGF0IG1vc3QgMiBjbGljayBldmVudHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93KGludGVydmFsKVxuICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcbiAqICAgLm1lcmdlQWxsKCk7IC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgd2luZG93Q291bnR9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuICogQHNlZSB7QGxpbmsgd2luZG93V2hlbn1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlcn1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGU8YW55Pn0gd2luZG93Qm91bmRhcmllcyBBbiBPYnNlcnZhYmxlIHRoYXQgY29tcGxldGVzIHRoZVxuICogcHJldmlvdXMgd2luZG93IGFuZCBzdGFydHMgYSBuZXcgd2luZG93LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gT2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBhcmVcbiAqIE9ic2VydmFibGVzIGVtaXR0aW5nIHZhbHVlcyBvZiB0aGUgc291cmNlIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHdpbmRvd1xuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gd2luZG93KHdpbmRvd0JvdW5kYXJpZXMpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dPcGVyYXRvcih3aW5kb3dCb3VuZGFyaWVzKSk7XG59XG5leHBvcnRzLndpbmRvdyA9IHdpbmRvdztcbnZhciBXaW5kb3dPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93T3BlcmF0b3Iod2luZG93Qm91bmRhcmllcykge1xuICAgICAgICB0aGlzLndpbmRvd0JvdW5kYXJpZXMgPSB3aW5kb3dCb3VuZGFyaWVzO1xuICAgIH1cbiAgICBXaW5kb3dPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMud2luZG93Qm91bmRhcmllcykpO1xuICAgIH07XG4gICAgcmV0dXJuIFdpbmRvd09wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgV2luZG93U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFdpbmRvd1N1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gV2luZG93U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgd2luZG93Qm91bmRhcmllcykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy53aW5kb3dCb3VuZGFyaWVzID0gd2luZG93Qm91bmRhcmllcztcbiAgICAgICAgdGhpcy5hZGQoc3Vic2NyaWJlVG9SZXN1bHRfMS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCB3aW5kb3dCb3VuZGFyaWVzKSk7XG4gICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuICAgIH1cbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMub3BlbldpbmRvdygpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLndpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJldldpbmRvdyA9IHRoaXMud2luZG93O1xuICAgICAgICBpZiAocHJldldpbmRvdykge1xuICAgICAgICAgICAgcHJldldpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIHZhciBuZXdXaW5kb3cgPSB0aGlzLndpbmRvdyA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICBkZXN0aW5hdGlvbi5hZGQobmV3V2luZG93KTtcbiAgICAgICAgZGVzdGluYXRpb24ubmV4dChuZXdXaW5kb3cpO1xuICAgIH07XG4gICAgcmV0dXJuIFdpbmRvd1N1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcl8xLk91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93LmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93LmpzXG4gKiogbW9kdWxlIGlkID0gNTk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgd2luZG93Q291bnRfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3dpbmRvd0NvdW50Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93Q291bnQgPSB3aW5kb3dDb3VudF8xLndpbmRvd0NvdW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93Q291bnQuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93Q291bnQuanNcbiAqKiBtb2R1bGUgaWQgPSA1OTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbi8qKlxuICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgd2l0aCBlYWNoXG4gKiBuZXN0ZWQgT2JzZXJ2YWJsZSBlbWl0dGluZyBhdCBtb3N0IGB3aW5kb3dTaXplYCB2YWx1ZXMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyQ291bnR9LCBidXQgZW1pdHMgYSBuZXN0ZWRcbiAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dDb3VudC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHdpbmRvd3MgZXZlcnkgYHN0YXJ0V2luZG93RXZlcnlgXG4gKiBpdGVtcywgZWFjaCBjb250YWluaW5nIG5vIG1vcmUgdGhhbiBgd2luZG93U2l6ZWAgaXRlbXMuIFdoZW4gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBjb21wbGV0ZXMgb3IgZW5jb3VudGVycyBhbiBlcnJvciwgdGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzXG4gKiB0aGUgY3VycmVudCB3aW5kb3cgYW5kIHByb3BhZ2F0ZXMgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIElmIGBzdGFydFdpbmRvd0V2ZXJ5YCBpcyBub3QgcHJvdmlkZWQsIHRoZW4gbmV3IHdpbmRvd3MgYXJlXG4gKiBzdGFydGVkIGltbWVkaWF0ZWx5IGF0IHRoZSBzdGFydCBvZiB0aGUgc291cmNlIGFuZCB3aGVuIGVhY2ggd2luZG93IGNvbXBsZXRlc1xuICogd2l0aCBzaXplIGB3aW5kb3dTaXplYC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZ25vcmUgZXZlcnkgM3JkIGNsaWNrIGV2ZW50LCBzdGFydGluZyBmcm9tIHRoZSBmaXJzdCBvbmU8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dDb3VudCgzKVxuICogICAubWFwKHdpbiA9PiB3aW4uc2tpcCgxKSkgLy8gc2tpcCBmaXJzdCBvZiBldmVyeSAzIGNsaWNrc1xuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5JZ25vcmUgZXZlcnkgM3JkIGNsaWNrIGV2ZW50LCBzdGFydGluZyBmcm9tIHRoZSB0aGlyZCBvbmU8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dDb3VudCgyLCAzKVxuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUaW1lfVxuICogQHNlZSB7QGxpbmsgd2luZG93VG9nZ2xlfVxuICogQHNlZSB7QGxpbmsgd2luZG93V2hlbn1cbiAqIEBzZWUge0BsaW5rIGJ1ZmZlckNvdW50fVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aW5kb3dTaXplIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2YWx1ZXMgZW1pdHRlZCBieSBlYWNoXG4gKiB3aW5kb3cuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0V2luZG93RXZlcnldIEludGVydmFsIGF0IHdoaWNoIHRvIHN0YXJ0IGEgbmV3IHdpbmRvdy5cbiAqIEZvciBleGFtcGxlIGlmIGBzdGFydFdpbmRvd0V2ZXJ5YCBpcyBgMmAsIHRoZW4gYSBuZXcgd2luZG93IHdpbGwgYmUgc3RhcnRlZFxuICogb24gZXZlcnkgb3RoZXIgdmFsdWUgZnJvbSB0aGUgc291cmNlLiBBIG5ldyB3aW5kb3cgaXMgc3RhcnRlZCBhdCB0aGVcbiAqIGJlZ2lubmluZyBvZiB0aGUgc291cmNlIGJ5IGRlZmF1bHQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPE9ic2VydmFibGU8VD4+fSBBbiBPYnNlcnZhYmxlIG9mIHdpbmRvd3MsIHdoaWNoIGluIHR1cm5cbiAqIGFyZSBPYnNlcnZhYmxlIG9mIHZhbHVlcy5cbiAqIEBtZXRob2Qgd2luZG93Q291bnRcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHdpbmRvd0NvdW50KHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHtcbiAgICBpZiAoc3RhcnRXaW5kb3dFdmVyeSA9PT0gdm9pZCAwKSB7IHN0YXJ0V2luZG93RXZlcnkgPSAwOyB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgV2luZG93Q291bnRPcGVyYXRvcih3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSk7XG59XG5leHBvcnRzLndpbmRvd0NvdW50ID0gd2luZG93Q291bnQ7XG52YXIgV2luZG93Q291bnRPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93Q291bnRPcGVyYXRvcih3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSB7XG4gICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG4gICAgICAgIHRoaXMuc3RhcnRXaW5kb3dFdmVyeSA9IHN0YXJ0V2luZG93RXZlcnk7XG4gICAgfVxuICAgIFdpbmRvd0NvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgV2luZG93Q291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMud2luZG93U2l6ZSwgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5KSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93Q291bnRPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFdpbmRvd0NvdW50U3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFdpbmRvd0NvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG4gICAgICAgIHRoaXMuc3RhcnRXaW5kb3dFdmVyeSA9IHN0YXJ0V2luZG93RXZlcnk7XG4gICAgICAgIHRoaXMud2luZG93cyA9IFtuZXcgU3ViamVjdF8xLlN1YmplY3QoKV07XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB2YXIgZmlyc3RXaW5kb3cgPSB0aGlzLndpbmRvd3NbMF07XG4gICAgICAgIGRlc3RpbmF0aW9uLmFkZChmaXJzdFdpbmRvdyk7XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQoZmlyc3RXaW5kb3cpO1xuICAgIH1cbiAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBzdGFydFdpbmRvd0V2ZXJ5ID0gKHRoaXMuc3RhcnRXaW5kb3dFdmVyeSA+IDApID8gdGhpcy5zdGFydFdpbmRvd0V2ZXJ5IDogdGhpcy53aW5kb3dTaXplO1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICB2YXIgd2luZG93U2l6ZSA9IHRoaXMud2luZG93U2l6ZTtcbiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG4gICAgICAgIHZhciBsZW4gPSB3aW5kb3dzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgd2luZG93c1tpXS5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYyA9IHRoaXMuY291bnQgLSB3aW5kb3dTaXplICsgMTtcbiAgICAgICAgaWYgKGMgPj0gMCAmJiBjICUgc3RhcnRXaW5kb3dFdmVyeSA9PT0gMCkge1xuICAgICAgICAgICAgd2luZG93cy5zaGlmdCgpLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCsrdGhpcy5jb3VudCAlIHN0YXJ0V2luZG93RXZlcnkgPT09IDApIHtcbiAgICAgICAgICAgIHZhciB3aW5kb3dfMSA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICAgICAgd2luZG93cy5wdXNoKHdpbmRvd18xKTtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZCh3aW5kb3dfMSk7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHdpbmRvd18xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgV2luZG93Q291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7XG4gICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKS5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBXaW5kb3dDb3VudFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dDb3VudC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3dpbmRvd0NvdW50LmpzXG4gKiogbW9kdWxlIGlkID0gNTk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgd2luZG93VGltZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivd2luZG93VGltZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpbmRvd1RpbWUgPSB3aW5kb3dUaW1lXzEud2luZG93VGltZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RpbWUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93VGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU5N1xuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgU3ViamVjdF8xID0gcmVxdWlyZSgnLi4vU3ViamVjdCcpO1xudmFyIGFzeW5jXzEgPSByZXF1aXJlKCcuLi9zY2hlZHVsZXIvYXN5bmMnKTtcbi8qKlxuICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgcGVyaW9kaWNhbGx5XG4gKiBpbiB0aW1lLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGJ1ZmZlclRpbWV9LCBidXQgZW1pdHMgYSBuZXN0ZWRcbiAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy93aW5kb3dUaW1lLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHdpbmRvd3Mgb2YgaXRlbXMgaXQgY29sbGVjdHMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLiBUaGUgb3V0cHV0IE9ic2VydmFibGUgc3RhcnRzIGEgbmV3IHdpbmRvdyBwZXJpb2RpY2FsbHksIGFzXG4gKiBkZXRlcm1pbmVkIGJ5IHRoZSBgd2luZG93Q3JlYXRpb25JbnRlcnZhbGAgYXJndW1lbnQuIEl0IGVtaXRzIGVhY2ggd2luZG93XG4gKiBhZnRlciBhIGZpeGVkIHRpbWVzcGFuLCBzcGVjaWZpZWQgYnkgdGhlIGB3aW5kb3dUaW1lU3BhbmAgYXJndW1lbnQuIFdoZW4gdGhlXG4gKiBzb3VyY2UgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgb3IgZW5jb3VudGVycyBhbiBlcnJvciwgdGhlIG91dHB1dCBPYnNlcnZhYmxlXG4gKiBlbWl0cyB0aGUgY3VycmVudCB3aW5kb3cgYW5kIHByb3BhZ2F0ZXMgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIElmIGB3aW5kb3dDcmVhdGlvbkludGVydmFsYCBpcyBub3QgcHJvdmlkZWQsIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUgc3RhcnRzIGEgbmV3IHdpbmRvdyB3aGVuIHRoZSBwcmV2aW91cyB3aW5kb3cgb2YgZHVyYXRpb25cbiAqIGB3aW5kb3dUaW1lU3BhbmAgY29tcGxldGVzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkluIGV2ZXJ5IHdpbmRvdyBvZiAxIHNlY29uZCBlYWNoLCBlbWl0IGF0IG1vc3QgMiBjbGljayBldmVudHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy53aW5kb3dUaW1lKDEwMDApXG4gKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FdmVyeSA1IHNlY29uZHMgc3RhcnQgYSB3aW5kb3cgMSBzZWNvbmQgbG9uZywgYW5kIGVtaXQgYXQgbW9zdCAyIGNsaWNrIGV2ZW50cyBwZXIgd2luZG93PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciByZXN1bHQgPSBjbGlja3Mud2luZG93VGltZSgxMDAwLCA1MDAwKVxuICogICAubWFwKHdpbiA9PiB3aW4udGFrZSgyKSkgLy8gZWFjaCB3aW5kb3cgaGFzIGF0IG1vc3QgMiBlbWlzc2lvbnNcbiAqICAgLm1lcmdlQWxsKCk7IC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgd2luZG93fVxuICogQHNlZSB7QGxpbmsgd2luZG93Q291bnR9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVGltZX1cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2luZG93VGltZVNwYW4gVGhlIGFtb3VudCBvZiB0aW1lIHRvIGZpbGwgZWFjaCB3aW5kb3cuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dpbmRvd0NyZWF0aW9uSW50ZXJ2YWxdIFRoZSBpbnRlcnZhbCBhdCB3aGljaCB0byBzdGFydCBuZXdcbiAqIHdpbmRvd3MuXG4gKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcj1hc3luY10gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcbiAqIGludGVydmFscyB0aGF0IGRldGVybWluZSB3aW5kb3cgYm91bmRhcmllcy5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8T2JzZXJ2YWJsZTxUPj59IEFuIG9ic2VydmFibGUgb2Ygd2luZG93cywgd2hpY2ggaW4gdHVyblxuICogYXJlIE9ic2VydmFibGVzLlxuICogQG1ldGhvZCB3aW5kb3dUaW1lXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB3aW5kb3dUaW1lKHdpbmRvd1RpbWVTcGFuLCB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAod2luZG93Q3JlYXRpb25JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSBudWxsOyB9XG4gICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7IHNjaGVkdWxlciA9IGFzeW5jXzEuYXN5bmM7IH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dUaW1lT3BlcmF0b3Iod2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikpO1xufVxuZXhwb3J0cy53aW5kb3dUaW1lID0gd2luZG93VGltZTtcbnZhciBXaW5kb3dUaW1lT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdpbmRvd1RpbWVPcGVyYXRvcih3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMud2luZG93VGltZVNwYW4gPSB3aW5kb3dUaW1lU3BhbjtcbiAgICAgICAgdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsID0gd2luZG93Q3JlYXRpb25JbnRlcnZhbDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIFdpbmRvd1RpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLndpbmRvd1RpbWVTcGFuLCB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHRoaXMuc2NoZWR1bGVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93VGltZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgV2luZG93VGltZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhXaW5kb3dUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dUaW1lU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgd2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy53aW5kb3dUaW1lU3BhbiA9IHdpbmRvd1RpbWVTcGFuO1xuICAgICAgICB0aGlzLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSB3aW5kb3dDcmVhdGlvbkludGVydmFsO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy53aW5kb3dzID0gW107XG4gICAgICAgIGlmICh3aW5kb3dDcmVhdGlvbkludGVydmFsICE9PSBudWxsICYmIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPj0gMCkge1xuICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gdGhpcy5vcGVuV2luZG93KCk7XG4gICAgICAgICAgICB2YXIgY2xvc2VTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgd2luZG93OiB3aW5kb3dfMSwgY29udGV4dDogbnVsbCB9O1xuICAgICAgICAgICAgdmFyIGNyZWF0aW9uU3RhdGUgPSB7IHdpbmRvd1RpbWVTcGFuOiB3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbDogd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgc3Vic2NyaWJlcjogdGhpcywgc2NoZWR1bGVyOiBzY2hlZHVsZXIgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd0Nsb3NlLCB3aW5kb3dUaW1lU3BhbiwgY2xvc2VTdGF0ZSkpO1xuICAgICAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93Q3JlYXRpb24sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIGNyZWF0aW9uU3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB3aW5kb3dfMiA9IHRoaXMub3BlbldpbmRvdygpO1xuICAgICAgICAgICAgdmFyIHRpbWVTcGFuT25seVN0YXRlID0geyBzdWJzY3JpYmVyOiB0aGlzLCB3aW5kb3c6IHdpbmRvd18yLCB3aW5kb3dUaW1lU3Bhbjogd2luZG93VGltZVNwYW4gfTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seSwgd2luZG93VGltZVNwYW4sIHRpbWVTcGFuT25seVN0YXRlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB2YXIgbGVuID0gd2luZG93cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB3aW5kb3dfMyA9IHdpbmRvd3NbaV07XG4gICAgICAgICAgICBpZiAoIXdpbmRvd18zLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgd2luZG93XzMubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93cztcbiAgICAgICAgd2hpbGUgKHdpbmRvd3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIHdpbmRvd180ID0gd2luZG93cy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCF3aW5kb3dfNC5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIHdpbmRvd180LmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5XaW5kb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aW5kb3cgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcbiAgICAgICAgdGhpcy53aW5kb3dzLnB1c2god2luZG93KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgZGVzdGluYXRpb24uYWRkKHdpbmRvdyk7XG4gICAgICAgIGRlc3RpbmF0aW9uLm5leHQod2luZG93KTtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9O1xuICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uICh3aW5kb3cpIHtcbiAgICAgICAgd2luZG93LmNvbXBsZXRlKCk7XG4gICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzO1xuICAgICAgICB3aW5kb3dzLnNwbGljZSh3aW5kb3dzLmluZGV4T2Yod2luZG93KSwgMSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93VGltZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5mdW5jdGlvbiBkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seShzdGF0ZSkge1xuICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgd2luZG93VGltZVNwYW4gPSBzdGF0ZS53aW5kb3dUaW1lU3Bhbiwgd2luZG93ID0gc3RhdGUud2luZG93O1xuICAgIGlmICh3aW5kb3cpIHtcbiAgICAgICAgd2luZG93LmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIHN0YXRlLndpbmRvdyA9IHN1YnNjcmliZXIub3BlbldpbmRvdygpO1xuICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHdpbmRvd1RpbWVTcGFuKTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoV2luZG93Q3JlYXRpb24oc3RhdGUpIHtcbiAgICB2YXIgd2luZG93VGltZVNwYW4gPSBzdGF0ZS53aW5kb3dUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlciwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IHN0YXRlLndpbmRvd0NyZWF0aW9uSW50ZXJ2YWw7XG4gICAgdmFyIHdpbmRvdyA9IHN1YnNjcmliZXIub3BlbldpbmRvdygpO1xuICAgIHZhciBhY3Rpb24gPSB0aGlzO1xuICAgIHZhciBjb250ZXh0ID0geyBhY3Rpb246IGFjdGlvbiwgc3Vic2NyaXB0aW9uOiBudWxsIH07XG4gICAgdmFyIHRpbWVTcGFuU3RhdGUgPSB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIsIHdpbmRvdzogd2luZG93LCBjb250ZXh0OiBjb250ZXh0IH07XG4gICAgY29udGV4dC5zdWJzY3JpcHRpb24gPSBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hXaW5kb3dDbG9zZSwgd2luZG93VGltZVNwYW4sIHRpbWVTcGFuU3RhdGUpO1xuICAgIGFjdGlvbi5hZGQoY29udGV4dC5zdWJzY3JpcHRpb24pO1xuICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCk7XG59XG5mdW5jdGlvbiBkaXNwYXRjaFdpbmRvd0Nsb3NlKGFyZykge1xuICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIHdpbmRvdyA9IGFyZy53aW5kb3csIGNvbnRleHQgPSBhcmcuY29udGV4dDtcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LmFjdGlvbiAmJiBjb250ZXh0LnN1YnNjcmlwdGlvbikge1xuICAgICAgICBjb250ZXh0LmFjdGlvbi5yZW1vdmUoY29udGV4dC5zdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVyLmNsb3NlV2luZG93KHdpbmRvdyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dUaW1lLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93VGltZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHdpbmRvd1RvZ2dsZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3Ivd2luZG93VG9nZ2xlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93VG9nZ2xlID0gd2luZG93VG9nZ2xlXzEud2luZG93VG9nZ2xlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VG9nZ2xlLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3dpbmRvd1RvZ2dsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJqZWN0XzEgPSByZXF1aXJlKCcuLi9TdWJqZWN0Jyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSBzdGFydGluZyBmcm9tXG4gKiBhbiBlbWlzc2lvbiBmcm9tIGBvcGVuaW5nc2AgYW5kIGVuZGluZyB3aGVuIHRoZSBvdXRwdXQgb2YgYGNsb3NpbmdTZWxlY3RvcmBcbiAqIGVtaXRzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5JdCdzIGxpa2Uge0BsaW5rIGJ1ZmZlclRvZ2dsZX0sIGJ1dCBlbWl0cyBhIG5lc3RlZFxuICogT2JzZXJ2YWJsZSBpbnN0ZWFkIG9mIGFuIGFycmF5Ljwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3dpbmRvd1RvZ2dsZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHdpbmRvd3MgdGhhdCBjb250YWluIHRob3NlIGl0ZW1zXG4gKiBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBiZXR3ZWVuIHRoZSB0aW1lIHdoZW4gdGhlIGBvcGVuaW5nc2BcbiAqIE9ic2VydmFibGUgZW1pdHMgYW4gaXRlbSBhbmQgd2hlbiB0aGUgT2JzZXJ2YWJsZSByZXR1cm5lZCBieVxuICogYGNsb3NpbmdTZWxlY3RvcmAgZW1pdHMgYW4gaXRlbS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FdmVyeSBvdGhlciBzZWNvbmQsIGVtaXQgdGhlIGNsaWNrIGV2ZW50cyBmcm9tIHRoZSBuZXh0IDUwMG1zPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBvcGVuaW5ncyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpbmRvd1RvZ2dsZShvcGVuaW5ncywgaSA9PlxuICogICBpICUgMiA/IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoNTAwKSA6IFJ4Lk9ic2VydmFibGUuZW1wdHkoKVxuICogKS5tZXJnZUFsbCgpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuICogQHNlZSB7QGxpbmsgYnVmZmVyVG9nZ2xlfVxuICpcbiAqIEBwYXJhbSB7T2JzZXJ2YWJsZTxPPn0gb3BlbmluZ3MgQW4gb2JzZXJ2YWJsZSBvZiBub3RpZmljYXRpb25zIHRvIHN0YXJ0IG5ld1xuICogd2luZG93cy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IE8pOiBPYnNlcnZhYmxlfSBjbG9zaW5nU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHRha2VzXG4gKiB0aGUgdmFsdWUgZW1pdHRlZCBieSB0aGUgYG9wZW5pbmdzYCBvYnNlcnZhYmxlIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUsXG4gKiB3aGljaCwgd2hlbiBpdCBlbWl0cyAoZWl0aGVyIGBuZXh0YCBvciBgY29tcGxldGVgKSwgc2lnbmFscyB0aGF0IHRoZVxuICogYXNzb2NpYXRlZCB3aW5kb3cgc2hvdWxkIGNvbXBsZXRlLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxPYnNlcnZhYmxlPFQ+Pn0gQW4gb2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuXG4gKiBhcmUgT2JzZXJ2YWJsZXMuXG4gKiBAbWV0aG9kIHdpbmRvd1RvZ2dsZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gd2luZG93VG9nZ2xlKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBXaW5kb3dUb2dnbGVPcGVyYXRvcihvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSk7XG59XG5leHBvcnRzLndpbmRvd1RvZ2dsZSA9IHdpbmRvd1RvZ2dsZTtcbnZhciBXaW5kb3dUb2dnbGVPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93VG9nZ2xlT3BlcmF0b3Iob3BlbmluZ3MsIGNsb3NpbmdTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgIH1cbiAgICBXaW5kb3dUb2dnbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93VG9nZ2xlT3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoV2luZG93VG9nZ2xlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5vcGVuaW5ncyA9IG9wZW5pbmdzO1xuICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IFtdO1xuICAgICAgICB0aGlzLmFkZCh0aGlzLm9wZW5TdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9wZW5pbmdzLCBvcGVuaW5ncykpO1xuICAgIH1cbiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzO1xuICAgICAgICBpZiAoY29udGV4dHMpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dHNbaV0ud2luZG93Lm5leHQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIHRoaXMuY29udGV4dHMgPSBudWxsO1xuICAgICAgICBpZiAoY29udGV4dHMpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0c1tpbmRleF07XG4gICAgICAgICAgICAgICAgY29udGV4dC53aW5kb3cuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTtcbiAgICB9O1xuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG4gICAgICAgIGlmIChjb250ZXh0cykge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LndpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0cztcbiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7XG4gICAgICAgIGlmIChjb250ZXh0cykge1xuICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbnRleHRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LndpbmRvdy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgaWYgKG91dGVyVmFsdWUgPT09IHRoaXMub3BlbmluZ3MpIHtcbiAgICAgICAgICAgIHZhciBjbG9zaW5nU2VsZWN0b3IgPSB0aGlzLmNsb3NpbmdTZWxlY3RvcjtcbiAgICAgICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKGNsb3NpbmdTZWxlY3RvcikoaW5uZXJWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dfMSA9IG5ldyBTdWJqZWN0XzEuU3ViamVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7IHdpbmRvdzogd2luZG93XzEsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24uaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24uY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoaW5uZXJTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQod2luZG93XzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmluZGV4T2Yob3V0ZXJWYWx1ZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXIpIHtcbiAgICAgICAgaWYgKGlubmVyICE9PSB0aGlzLm9wZW5TdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VXaW5kb3codGhpcy5jb250ZXh0cy5pbmRleE9mKGlubmVyLmNvbnRleHQpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuY2xvc2VXaW5kb3cgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7XG4gICAgICAgIHZhciBjb250ZXh0ID0gY29udGV4dHNbaW5kZXhdO1xuICAgICAgICB2YXIgd2luZG93ID0gY29udGV4dC53aW5kb3csIHN1YnNjcmlwdGlvbiA9IGNvbnRleHQuc3Vic2NyaXB0aW9uO1xuICAgICAgICBjb250ZXh0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB3aW5kb3cuY29tcGxldGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93VG9nZ2xlU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dUb2dnbGUuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci93aW5kb3dUb2dnbGUuanNcbiAqKiBtb2R1bGUgaWQgPSA2MDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB3aW5kb3dXaGVuXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci93aW5kb3dXaGVuJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93V2hlbiA9IHdpbmRvd1doZW5fMS53aW5kb3dXaGVuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93V2hlbi5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuLmpzXG4gKiogbW9kdWxlIGlkID0gNjAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YmplY3RfMSA9IHJlcXVpcmUoJy4uL1N1YmplY3QnKTtcbnZhciB0cnlDYXRjaF8xID0gcmVxdWlyZSgnLi4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuLi91dGlsL2Vycm9yT2JqZWN0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbnZhciBzdWJzY3JpYmVUb1Jlc3VsdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCcpO1xuLyoqXG4gKiBCcmFuY2ggb3V0IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgYXMgYSBuZXN0ZWQgT2JzZXJ2YWJsZSB1c2luZyBhXG4gKiBmYWN0b3J5IGZ1bmN0aW9uIG9mIGNsb3NpbmcgT2JzZXJ2YWJsZXMgdG8gZGV0ZXJtaW5lIHdoZW4gdG8gc3RhcnQgYSBuZXdcbiAqIHdpbmRvdy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+SXQncyBsaWtlIHtAbGluayBidWZmZXJXaGVufSwgYnV0IGVtaXRzIGEgbmVzdGVkXG4gKiBPYnNlcnZhYmxlIGluc3RlYWQgb2YgYW4gYXJyYXkuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvd2luZG93V2hlbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIGNvbm5lY3RlZCwgbm9uLW92ZXJsYXBwaW5nIHdpbmRvd3MuXG4gKiBJdCBlbWl0cyB0aGUgY3VycmVudCB3aW5kb3cgYW5kIG9wZW5zIGEgbmV3IG9uZSB3aGVuZXZlciB0aGUgT2JzZXJ2YWJsZVxuICogcHJvZHVjZWQgYnkgdGhlIHNwZWNpZmllZCBgY2xvc2luZ1NlbGVjdG9yYCBmdW5jdGlvbiBlbWl0cyBhbiBpdGVtLiBUaGUgZmlyc3RcbiAqIHdpbmRvdyBpcyBvcGVuZWQgaW1tZWRpYXRlbHkgd2hlbiBzdWJzY3JpYmluZyB0byB0aGUgb3V0cHV0IE9ic2VydmFibGUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCBvbmx5IHRoZSBmaXJzdCB0d28gY2xpY2tzIGV2ZW50cyBpbiBldmVyeSB3aW5kb3cgb2YgWzEtNV0gcmFuZG9tIHNlY29uZHM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrc1xuICogICAud2luZG93V2hlbigoKSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDAgKyBNYXRoLnJhbmRvbSgpICogNDAwMCkpXG4gKiAgIC5tYXAod2luID0+IHdpbi50YWtlKDIpKSAvLyBlYWNoIHdpbmRvdyBoYXMgYXQgbW9zdCAyIGVtaXNzaW9uc1xuICogICAubWVyZ2VBbGwoKTsgLy8gZmxhdHRlbiB0aGUgT2JzZXJ2YWJsZS1vZi1PYnNlcnZhYmxlc1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayB3aW5kb3d9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dDb3VudH1cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG4gKiBAc2VlIHtAbGluayBidWZmZXJXaGVufVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogT2JzZXJ2YWJsZX0gY2xvc2luZ1NlbGVjdG9yIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuICogYXJndW1lbnRzIGFuZCByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBzaWduYWxzIChvbiBlaXRoZXIgYG5leHRgIG9yXG4gKiBgY29tcGxldGVgKSB3aGVuIHRvIGNsb3NlIHRoZSBwcmV2aW91cyB3aW5kb3cgYW5kIHN0YXJ0IGEgbmV3IG9uZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8T2JzZXJ2YWJsZTxUPj59IEFuIG9ic2VydmFibGUgb2Ygd2luZG93cywgd2hpY2ggaW4gdHVyblxuICogYXJlIE9ic2VydmFibGVzLlxuICogQG1ldGhvZCB3aW5kb3dXaGVuXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB3aW5kb3dXaGVuKGNsb3NpbmdTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IFdpbmRvd09wZXJhdG9yKGNsb3NpbmdTZWxlY3RvcikpO1xufVxuZXhwb3J0cy53aW5kb3dXaGVuID0gd2luZG93V2hlbjtcbnZhciBXaW5kb3dPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2luZG93T3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgIH1cbiAgICBXaW5kb3dPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaW5kb3dTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBXaW5kb3dTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoV2luZG93U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjbG9zaW5nU2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yO1xuICAgICAgICB0aGlzLm9wZW5XaW5kb3coKTtcbiAgICB9XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLm9wZW5XaW5kb3coaW5uZXJTdWIpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMub3BlbldpbmRvdyhpbm5lclN1Yik7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlQ2xvc2luZ05vdGlmaWNhdGlvbigpO1xuICAgIH07XG4gICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLndpbmRvdy5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uKCk7XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NpbmdOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuV2luZG93ID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIGlmIChpbm5lclN1YiA9PT0gdm9pZCAwKSB7IGlubmVyU3ViID0gbnVsbDsgfVxuICAgICAgICBpZiAoaW5uZXJTdWIpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgICAgIGlubmVyU3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZXaW5kb3cgPSB0aGlzLndpbmRvdztcbiAgICAgICAgaWYgKHByZXZXaW5kb3cpIHtcbiAgICAgICAgICAgIHByZXZXaW5kb3cuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2luZG93ID0gdGhpcy53aW5kb3cgPSBuZXcgU3ViamVjdF8xLlN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHdpbmRvdyk7XG4gICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKHRoaXMuY2xvc2luZ1NlbGVjdG9yKSgpO1xuICAgICAgICBpZiAoY2xvc2luZ05vdGlmaWVyID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdC5lO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0XzEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgY2xvc2luZ05vdGlmaWVyKSk7XG4gICAgICAgICAgICB0aGlzLmFkZCh3aW5kb3cpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gV2luZG93U3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dXaGVuLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvb3BlcmF0b3Ivd2luZG93V2hlbi5qc1xuICoqIG1vZHVsZSBpZCA9IDYwMlxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHdpdGhMYXRlc3RGcm9tXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci93aXRoTGF0ZXN0RnJvbScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLndpdGhMYXRlc3RGcm9tID0gd2l0aExhdGVzdEZyb21fMS53aXRoTGF0ZXN0RnJvbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpdGhMYXRlc3RGcm9tLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvYWRkL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tLmpzXG4gKiogbW9kdWxlIGlkID0gNjAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qKlxuICogQ29tYmluZXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIHdpdGggb3RoZXIgT2JzZXJ2YWJsZXMgdG8gY3JlYXRlIGFuIE9ic2VydmFibGVcbiAqIHdob3NlIHZhbHVlcyBhcmUgY2FsY3VsYXRlZCBmcm9tIHRoZSBsYXRlc3QgdmFsdWVzIG9mIGVhY2gsIG9ubHkgd2hlbiB0aGVcbiAqIHNvdXJjZSBlbWl0cy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbmV2ZXIgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUsIGl0XG4gKiBjb21wdXRlcyBhIGZvcm11bGEgdXNpbmcgdGhhdCB2YWx1ZSBwbHVzIHRoZSBsYXRlc3QgdmFsdWVzIGZyb20gb3RoZXIgaW5wdXRcbiAqIE9ic2VydmFibGVzLCB0aGVuIGVtaXRzIHRoZSBvdXRwdXQgb2YgdGhhdCBmb3JtdWxhLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3dpdGhMYXRlc3RGcm9tLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGB3aXRoTGF0ZXN0RnJvbWAgY29tYmluZXMgZWFjaCB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSAodGhlXG4gKiBpbnN0YW5jZSkgd2l0aCB0aGUgbGF0ZXN0IHZhbHVlcyBmcm9tIHRoZSBvdGhlciBpbnB1dCBPYnNlcnZhYmxlcyBvbmx5IHdoZW5cbiAqIHRoZSBzb3VyY2UgZW1pdHMgYSB2YWx1ZSwgb3B0aW9uYWxseSB1c2luZyBhIGBwcm9qZWN0YCBmdW5jdGlvbiB0byBkZXRlcm1pbmVcbiAqIHRoZSB2YWx1ZSB0byBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS4gQWxsIGlucHV0IE9ic2VydmFibGVzIG11c3RcbiAqIGVtaXQgYXQgbGVhc3Qgb25lIHZhbHVlIGJlZm9yZSB0aGUgb3V0cHV0IE9ic2VydmFibGUgd2lsbCBlbWl0IGEgdmFsdWUuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+T24gZXZlcnkgY2xpY2sgZXZlbnQsIGVtaXQgYW4gYXJyYXkgd2l0aCB0aGUgbGF0ZXN0IHRpbWVyIGV2ZW50IHBsdXMgdGhlIGNsaWNrIGV2ZW50PC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciB0aW1lciA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgcmVzdWx0ID0gY2xpY2tzLndpdGhMYXRlc3RGcm9tKHRpbWVyKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUxhdGVzdH1cbiAqXG4gKiBAcGFyYW0ge09ic2VydmFibGV9IG90aGVyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIE1vcmUgdGhhbiBvbmUgaW5wdXQgT2JzZXJ2YWJsZXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb2plY3RdIFByb2plY3Rpb24gZnVuY3Rpb24gZm9yIGNvbWJpbmluZyB2YWx1ZXNcbiAqIHRvZ2V0aGVyLiBSZWNlaXZlcyBhbGwgdmFsdWVzIGluIG9yZGVyIG9mIHRoZSBPYnNlcnZhYmxlcyBwYXNzZWQsIHdoZXJlIHRoZVxuICogZmlyc3QgcGFyYW1ldGVyIGlzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUuIChlLmcuXG4gKiBgYS53aXRoTGF0ZXN0RnJvbShiLCBjLCAoYTEsIGIxLCBjMSkgPT4gYTEgKyBiMSArIGMxKWApLiBJZiB0aGlzIGlzIG5vdFxuICogcGFzc2VkLCBhcnJheXMgd2lsbCBiZSBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGZyb20gZWFjaCBpbnB1dCBPYnNlcnZhYmxlLCBvciBhbiBhcnJheSBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWVzIGZyb21cbiAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEBtZXRob2Qgd2l0aExhdGVzdEZyb21cbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHdpdGhMYXRlc3RGcm9tKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHByb2plY3Q7XG4gICAgaWYgKHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvamVjdCA9IGFyZ3MucG9wKCk7XG4gICAgfVxuICAgIHZhciBvYnNlcnZhYmxlcyA9IGFyZ3M7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgV2l0aExhdGVzdEZyb21PcGVyYXRvcihvYnNlcnZhYmxlcywgcHJvamVjdCkpO1xufVxuZXhwb3J0cy53aXRoTGF0ZXN0RnJvbSA9IHdpdGhMYXRlc3RGcm9tO1xuLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbnZhciBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yKG9ic2VydmFibGVzLCBwcm9qZWN0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlcztcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICB9XG4gICAgV2l0aExhdGVzdEZyb21PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5fc3Vic2NyaWJlKG5ldyBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5vYnNlcnZhYmxlcywgdGhpcy5wcm9qZWN0KSk7XG4gICAgfTtcbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21PcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9ic2VydmFibGVzLCBwcm9qZWN0KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnRvUmVzcG9uZCA9IFtdO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2YWJsZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnRvUmVzcG9uZC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG4gICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9ic2VydmFibGUsIG9ic2VydmFibGUsIGkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlO1xuICAgICAgICB2YXIgdG9SZXNwb25kID0gdGhpcy50b1Jlc3BvbmQ7XG4gICAgICAgIGlmICh0b1Jlc3BvbmQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGZvdW5kID0gdG9SZXNwb25kLmluZGV4T2Yob3V0ZXJJbmRleCk7XG4gICAgICAgICAgICBpZiAoZm91bmQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdG9SZXNwb25kLnNwbGljZShmb3VuZCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIG5vb3BcbiAgICB9O1xuICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMudG9SZXNwb25kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbdmFsdWVdLmNvbmNhdCh0aGlzLnZhbHVlcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5UHJvamVjdChhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJvamVjdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyXzEuT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aXRoTGF0ZXN0RnJvbS5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tLmpzXG4gKiogbW9kdWxlIGlkID0gNjA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDFcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgemlwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci96aXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS56aXAgPSB6aXBfMS56aXBQcm90bztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci96aXAuanNcbiAqKiBtb2R1bGUgaWQgPSA2MDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciB6aXBBbGxfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3ppcEFsbCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnppcEFsbCA9IHppcEFsbF8xLnppcEFsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcEFsbC5qcy5tYXBcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yeGpzL2FkZC9vcGVyYXRvci96aXBBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA2MDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIHppcF8xID0gcmVxdWlyZSgnLi96aXAnKTtcbi8qKlxuICogQHBhcmFtIHByb2plY3RcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj58V2ViU29ja2V0U3ViamVjdDxUPnxPYnNlcnZhYmxlPFQ+fVxuICogQG1ldGhvZCB6aXBBbGxcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIHppcEFsbChwcm9qZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgemlwXzEuWmlwT3BlcmF0b3IocHJvamVjdCkpO1xufVxuZXhwb3J0cy56aXBBbGwgPSB6aXBBbGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD16aXBBbGwuanMubWFwXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcnhqcy9vcGVyYXRvci96aXBBbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA2MDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4vU3Vic2NyaWJlcicpO1xudmFyIE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPcGVyYXRvcigpIHtcbiAgICB9XG4gICAgT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuX3N1YnNjcmliZShuZXcgU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIoc3Vic2NyaWJlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydHMuT3BlcmF0b3IgPSBPcGVyYXRvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wZXJhdG9yLmpzLm1hcFxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4anMvT3BlcmF0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSA2MDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMVxuICoqLyIsIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG5cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG5cblxuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XCJ1c2Ugc3RyaWN0XCI7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdHZhciBldmVudF90YXJnZXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBkZWZpbmVfcHJvcGVydHlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciByZWdpc3Rlcl9lbGVtZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgcHJvcGVydHlfZGVzY3JpcHRvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIHRpbWVyc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgc2V0ID0gJ3NldCc7XG5cdHZhciBjbGVhciA9ICdjbGVhcic7XG5cdHZhciBibG9ja2luZ01ldGhvZHMgPSBbJ2FsZXJ0JywgJ3Byb21wdCcsICdjb25maXJtJ107XG5cdHZhciBfZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHdpbmRvdztcblx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCBzZXQsIGNsZWFyLCAnVGltZW91dCcpO1xuXHR0aW1lcnNfMS5wYXRjaFRpbWVyKF9nbG9iYWwsIHNldCwgY2xlYXIsICdJbnRlcnZhbCcpO1xuXHR0aW1lcnNfMS5wYXRjaFRpbWVyKF9nbG9iYWwsIHNldCwgY2xlYXIsICdJbW1lZGlhdGUnKTtcblx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCAncmVxdWVzdCcsICdjYW5jZWwnLCAnQW5pbWF0aW9uRnJhbWUnKTtcblx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCAnbW96UmVxdWVzdCcsICdtb3pDYW5jZWwnLCAnQW5pbWF0aW9uRnJhbWUnKTtcblx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCAnd2Via2l0UmVxdWVzdCcsICd3ZWJraXRDYW5jZWwnLCAnQW5pbWF0aW9uRnJhbWUnKTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBibG9ja2luZ01ldGhvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBuYW1lID0gYmxvY2tpbmdNZXRob2RzW2ldO1xuXHQgICAgdXRpbHNfMS5wYXRjaE1ldGhvZChfZ2xvYmFsLCBuYW1lLCBmdW5jdGlvbiAoZGVsZWdhdGUsIHN5bWJvbCwgbmFtZSkge1xuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAocywgYXJncykge1xuXHQgICAgICAgICAgICByZXR1cm4gWm9uZS5jdXJyZW50LnJ1bihkZWxlZ2F0ZSwgX2dsb2JhbCwgYXJncywgbmFtZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH0pO1xuXHR9XG5cdGV2ZW50X3RhcmdldF8xLmV2ZW50VGFyZ2V0UGF0Y2goX2dsb2JhbCk7XG5cdHByb3BlcnR5X2Rlc2NyaXB0b3JfMS5wcm9wZXJ0eURlc2NyaXB0b3JQYXRjaChfZ2xvYmFsKTtcblx0dXRpbHNfMS5wYXRjaENsYXNzKCdNdXRhdGlvbk9ic2VydmVyJyk7XG5cdHV0aWxzXzEucGF0Y2hDbGFzcygnV2ViS2l0TXV0YXRpb25PYnNlcnZlcicpO1xuXHR1dGlsc18xLnBhdGNoQ2xhc3MoJ0ZpbGVSZWFkZXInKTtcblx0ZGVmaW5lX3Byb3BlcnR5XzEucHJvcGVydHlQYXRjaCgpO1xuXHRyZWdpc3Rlcl9lbGVtZW50XzEucmVnaXN0ZXJFbGVtZW50UGF0Y2goX2dsb2JhbCk7XG5cdC8vIFRyZWF0IFhNTEhUVFBSZXF1ZXN0IGFzIGEgbWFjcm90YXNrLlxuXHRwYXRjaFhIUihfZ2xvYmFsKTtcblx0dmFyIFhIUl9UQVNLID0gdXRpbHNfMS56b25lU3ltYm9sKCd4aHJUYXNrJyk7XG5cdGZ1bmN0aW9uIHBhdGNoWEhSKHdpbmRvdykge1xuXHQgICAgZnVuY3Rpb24gZmluZFBlbmRpbmdUYXNrKHRhcmdldCkge1xuXHQgICAgICAgIHZhciBwZW5kaW5nVGFzayA9IHRhcmdldFtYSFJfVEFTS107XG5cdCAgICAgICAgcmV0dXJuIHBlbmRpbmdUYXNrO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVUYXNrKHRhc2spIHtcblx0ICAgICAgICB2YXIgZGF0YSA9IHRhc2suZGF0YTtcblx0ICAgICAgICBkYXRhLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBpZiAoZGF0YS50YXJnZXQucmVhZHlTdGF0ZSA9PT0gZGF0YS50YXJnZXQuRE9ORSkge1xuXHQgICAgICAgICAgICAgICAgaWYgKCFkYXRhLmFib3J0ZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0YXNrLmludm9rZSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIHN0b3JlZFRhc2sgPSBkYXRhLnRhcmdldFtYSFJfVEFTS107XG5cdCAgICAgICAgaWYgKCFzdG9yZWRUYXNrKSB7XG5cdCAgICAgICAgICAgIGRhdGEudGFyZ2V0W1hIUl9UQVNLXSA9IHRhc2s7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldE5hdGl2ZS5hcHBseShkYXRhLnRhcmdldCwgZGF0YS5hcmdzKTtcblx0ICAgICAgICByZXR1cm4gdGFzaztcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHBsYWNlaG9sZGVyQ2FsbGJhY2soKSB7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBjbGVhclRhc2sodGFzaykge1xuXHQgICAgICAgIHZhciBkYXRhID0gdGFzay5kYXRhO1xuXHQgICAgICAgIC8vIE5vdGUgLSBpZGVhbGx5LCB3ZSB3b3VsZCBjYWxsIGRhdGEudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIgaGVyZSwgYnV0IGl0J3MgdG9vIGxhdGVcblx0ICAgICAgICAvLyB0byBwcmV2ZW50IGl0IGZyb20gZmlyaW5nLiBTbyBpbnN0ZWFkLCB3ZSBzdG9yZSBpbmZvIGZvciB0aGUgZXZlbnQgbGlzdGVuZXIuXG5cdCAgICAgICAgZGF0YS5hYm9ydGVkID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gY2xlYXJOYXRpdmUuYXBwbHkoZGF0YS50YXJnZXQsIGRhdGEuYXJncyk7XG5cdCAgICB9XG5cdCAgICB2YXIgc2V0TmF0aXZlID0gdXRpbHNfMS5wYXRjaE1ldGhvZCh3aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCAnc2VuZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uIChzZWxmLCBhcmdzKSB7XG5cdCAgICAgICAgdmFyIHpvbmUgPSBab25lLmN1cnJlbnQ7XG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgICAgIHRhcmdldDogc2VsZixcblx0ICAgICAgICAgICAgaXNQZXJpb2RpYzogZmFsc2UsXG5cdCAgICAgICAgICAgIGRlbGF5OiBudWxsLFxuXHQgICAgICAgICAgICBhcmdzOiBhcmdzLFxuXHQgICAgICAgICAgICBhYm9ydGVkOiBmYWxzZVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcmV0dXJuIHpvbmUuc2NoZWR1bGVNYWNyb1Rhc2soJ1hNTEh0dHBSZXF1ZXN0LnNlbmQnLCBwbGFjZWhvbGRlckNhbGxiYWNrLCBvcHRpb25zLCBzY2hlZHVsZVRhc2ssIGNsZWFyVGFzayk7XG5cdCAgICB9OyB9KTtcblx0ICAgIHZhciBjbGVhck5hdGl2ZSA9IHV0aWxzXzEucGF0Y2hNZXRob2Qod2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSwgJ2Fib3J0JywgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuXHQgICAgICAgIHZhciB0YXNrID0gZmluZFBlbmRpbmdUYXNrKHNlbGYpO1xuXHQgICAgICAgIGlmICh0YXNrICYmIHR5cGVvZiB0YXNrLnR5cGUgPT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgLy8gSWYgdGhlIFhIUiBoYXMgYWxyZWFkeSBjb21wbGV0ZWQsIGRvIG5vdGhpbmcuXG5cdCAgICAgICAgICAgIGlmICh0YXNrLmNhbmNlbEZuID09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0YXNrLnpvbmUuY2FuY2VsVGFzayh0YXNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBhcmUgdHJ5aW5nIHRvIGFib3J0IGFuIFhIUiB3aGljaCBoYXMgbm90IHlldCBiZWVuIHNlbnQsIHNvIHRoZXJlIGlzIG5vIHRhc2sgdG8gY2FuY2VsLiBEbyBub3RoaW5nLlxuXHQgICAgfTsgfSk7XG5cdH1cblx0Ly8vIEdFT19MT0NBVElPTlxuXHRpZiAoX2dsb2JhbFsnbmF2aWdhdG9yJ10gJiYgX2dsb2JhbFsnbmF2aWdhdG9yJ10uZ2VvbG9jYXRpb24pIHtcblx0ICAgIHV0aWxzXzEucGF0Y2hQcm90b3R5cGUoX2dsb2JhbFsnbmF2aWdhdG9yJ10uZ2VvbG9jYXRpb24sIFtcblx0ICAgICAgICAnZ2V0Q3VycmVudFBvc2l0aW9uJyxcblx0ICAgICAgICAnd2F0Y2hQb3NpdGlvbidcblx0ICAgIF0pO1xuXHR9XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeztcblx0O1xuXHR2YXIgWm9uZSA9IChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdCAgICBpZiAoZ2xvYmFsLlpvbmUpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1pvbmUgYWxyZWFkeSBsb2FkZWQuJyk7XG5cdCAgICB9XG5cdCAgICB2YXIgWm9uZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnVuY3Rpb24gWm9uZShwYXJlbnQsIHpvbmVTcGVjKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG5cdCAgICAgICAgICAgIHRoaXMuX25hbWUgPSB6b25lU3BlYyA/IHpvbmVTcGVjLm5hbWUgfHwgJ3VubmFtZWQnIDogJzxyb290Pic7XG5cdCAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSB6b25lU3BlYyAmJiB6b25lU3BlYy5wcm9wZXJ0aWVzIHx8IHt9O1xuXHQgICAgICAgICAgICB0aGlzLl96b25lRGVsZWdhdGUgPSBuZXcgWm9uZURlbGVnYXRlKHRoaXMsIHRoaXMuX3BhcmVudCAmJiB0aGlzLl9wYXJlbnQuX3pvbmVEZWxlZ2F0ZSwgem9uZVNwZWMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZSwgXCJjdXJyZW50XCIsIHtcblx0ICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfY3VycmVudFpvbmU7IH0sXG5cdCAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIDtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZSwgXCJjdXJyZW50VGFza1wiLCB7XG5cdCAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX2N1cnJlbnRUYXNrOyB9LFxuXHQgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgICA7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFpvbmUucHJvdG90eXBlLCBcInBhcmVudFwiLCB7XG5cdCAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fcGFyZW50OyB9LFxuXHQgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgICA7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFpvbmUucHJvdG90eXBlLCBcIm5hbWVcIiwge1xuXHQgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX25hbWU7IH0sXG5cdCAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIDtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICAgIHZhciB6b25lID0gdGhpcy5nZXRab25lV2l0aChrZXkpO1xuXHQgICAgICAgICAgICBpZiAoem9uZSlcblx0ICAgICAgICAgICAgICAgIHJldHVybiB6b25lLl9wcm9wZXJ0aWVzW2tleV07XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS5nZXRab25lV2l0aCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzO1xuXHQgICAgICAgICAgICB3aGlsZSAoY3VycmVudCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuX3Byb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuX3BhcmVudDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmUucHJvdG90eXBlLmZvcmsgPSBmdW5jdGlvbiAoem9uZVNwZWMpIHtcblx0ICAgICAgICAgICAgaWYgKCF6b25lU3BlYylcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9uZVNwZWMgcmVxdWlyZWQhJyk7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuZm9yayh0aGlzLCB6b25lU3BlYyk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBzb3VyY2UpIHtcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RpbmcgZnVuY3Rpb24gZ290OiAnICsgY2FsbGJhY2spO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBfY2FsbGJhY2sgPSB0aGlzLl96b25lRGVsZWdhdGUuaW50ZXJjZXB0KHRoaXMsIGNhbGxiYWNrLCBzb3VyY2UpO1xuXHQgICAgICAgICAgICB2YXIgem9uZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gem9uZS5ydW5HdWFyZGVkKF9jYWxsYmFjaywgdGhpcywgYXJndW1lbnRzLCBzb3VyY2UpO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBhcHBseVRoaXMsIGFwcGx5QXJncywgc291cmNlKSB7XG5cdCAgICAgICAgICAgIGlmIChhcHBseVRoaXMgPT09IHZvaWQgMCkgeyBhcHBseVRoaXMgPSBudWxsOyB9XG5cdCAgICAgICAgICAgIGlmIChhcHBseUFyZ3MgPT09IHZvaWQgMCkgeyBhcHBseUFyZ3MgPSBudWxsOyB9XG5cdCAgICAgICAgICAgIGlmIChzb3VyY2UgPT09IHZvaWQgMCkgeyBzb3VyY2UgPSBudWxsOyB9XG5cdCAgICAgICAgICAgIHZhciBvbGRab25lID0gX2N1cnJlbnRab25lO1xuXHQgICAgICAgICAgICBfY3VycmVudFpvbmUgPSB0aGlzO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnZva2UodGhpcywgY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgX2N1cnJlbnRab25lID0gb2xkWm9uZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZS5wcm90b3R5cGUucnVuR3VhcmRlZCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSkge1xuXHQgICAgICAgICAgICBpZiAoYXBwbHlUaGlzID09PSB2b2lkIDApIHsgYXBwbHlUaGlzID0gbnVsbDsgfVxuXHQgICAgICAgICAgICBpZiAoYXBwbHlBcmdzID09PSB2b2lkIDApIHsgYXBwbHlBcmdzID0gbnVsbDsgfVxuXHQgICAgICAgICAgICBpZiAoc291cmNlID09PSB2b2lkIDApIHsgc291cmNlID0gbnVsbDsgfVxuXHQgICAgICAgICAgICB2YXIgb2xkWm9uZSA9IF9jdXJyZW50Wm9uZTtcblx0ICAgICAgICAgICAgX2N1cnJlbnRab25lID0gdGhpcztcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnZva2UodGhpcywgY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3pvbmVEZWxlZ2F0ZS5oYW5kbGVFcnJvcih0aGlzLCBlcnJvcikpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgX2N1cnJlbnRab25lID0gb2xkWm9uZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZS5wcm90b3R5cGUucnVuVGFzayA9IGZ1bmN0aW9uICh0YXNrLCBhcHBseVRoaXMsIGFwcGx5QXJncykge1xuXHQgICAgICAgICAgICB0YXNrLnJ1bkNvdW50Kys7XG5cdCAgICAgICAgICAgIGlmICh0YXNrLnpvbmUgIT0gdGhpcylcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQSB0YXNrIGNhbiBvbmx5IGJlIHJ1biBpbiB0aGUgem9uZSB3aGljaCBjcmVhdGVkIGl0ISAoQ3JlYXRpb246ICcgK1xuXHQgICAgICAgICAgICAgICAgICAgIHRhc2suem9uZS5uYW1lICsgJzsgRXhlY3V0aW9uOiAnICsgdGhpcy5uYW1lICsgJyknKTtcblx0ICAgICAgICAgICAgdmFyIHByZXZpb3VzVGFzayA9IF9jdXJyZW50VGFzaztcblx0ICAgICAgICAgICAgX2N1cnJlbnRUYXNrID0gdGFzaztcblx0ICAgICAgICAgICAgdmFyIG9sZFpvbmUgPSBfY3VycmVudFpvbmU7XG5cdCAgICAgICAgICAgIF9jdXJyZW50Wm9uZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGFzay50eXBlID09ICdtYWNyb1Rhc2snICYmIHRhc2suZGF0YSAmJiAhdGFzay5kYXRhLmlzUGVyaW9kaWMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0YXNrLmNhbmNlbEZuID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnZva2VUYXNrKHRoaXMsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl96b25lRGVsZWdhdGUuaGFuZGxlRXJyb3IodGhpcywgZXJyb3IpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgIF9jdXJyZW50Wm9uZSA9IG9sZFpvbmU7XG5cdCAgICAgICAgICAgICAgICBfY3VycmVudFRhc2sgPSBwcmV2aW91c1Rhc2s7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmUucHJvdG90eXBlLnNjaGVkdWxlTWljcm9UYXNrID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuc2NoZWR1bGVUYXNrKHRoaXMsIG5ldyBab25lVGFzaygnbWljcm9UYXNrJywgdGhpcywgc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIG51bGwpKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmUucHJvdG90eXBlLnNjaGVkdWxlTWFjcm9UYXNrID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5zY2hlZHVsZVRhc2sodGhpcywgbmV3IFpvbmVUYXNrKCdtYWNyb1Rhc2snLCB0aGlzLCBzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgY3VzdG9tQ2FuY2VsKSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS5zY2hlZHVsZUV2ZW50VGFzayA9IGZ1bmN0aW9uIChzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgY3VzdG9tQ2FuY2VsKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuc2NoZWR1bGVUYXNrKHRoaXMsIG5ldyBab25lVGFzaygnZXZlbnRUYXNrJywgdGhpcywgc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIGN1c3RvbUNhbmNlbCkpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZS5wcm90b3R5cGUuY2FuY2VsVGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XG5cdCAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX3pvbmVEZWxlZ2F0ZS5jYW5jZWxUYXNrKHRoaXMsIHRhc2spO1xuXHQgICAgICAgICAgICB0YXNrLnJ1bkNvdW50ID0gLTE7XG5cdCAgICAgICAgICAgIHRhc2suY2FuY2VsRm4gPSBudWxsO1xuXHQgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lLl9fc3ltYm9sX18gPSBfX3N5bWJvbF9fO1xuXHQgICAgICAgIHJldHVybiBab25lO1xuXHQgICAgfSgpKTtcblx0ICAgIDtcblx0ICAgIHZhciBab25lRGVsZWdhdGUgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZ1bmN0aW9uIFpvbmVEZWxlZ2F0ZSh6b25lLCBwYXJlbnREZWxlZ2F0ZSwgem9uZVNwZWMpIHtcblx0ICAgICAgICAgICAgdGhpcy5fdGFza0NvdW50cyA9IHsgbWljcm9UYXNrOiAwLCBtYWNyb1Rhc2s6IDAsIGV2ZW50VGFzazogMCB9O1xuXHQgICAgICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuXHQgICAgICAgICAgICB0aGlzLl9wYXJlbnREZWxlZ2F0ZSA9IHBhcmVudERlbGVnYXRlO1xuXHQgICAgICAgICAgICB0aGlzLl9mb3JrWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMgJiYgem9uZVNwZWMub25Gb3JrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5fZm9ya1pTKTtcblx0ICAgICAgICAgICAgdGhpcy5fZm9ya0RsZ3QgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25Gb3JrID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5fZm9ya0RsZ3QpO1xuXHQgICAgICAgICAgICB0aGlzLl9pbnRlcmNlcHRaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludGVyY2VwdCA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX2ludGVyY2VwdFpTKTtcblx0ICAgICAgICAgICAgdGhpcy5faW50ZXJjZXB0RGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludGVyY2VwdCA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2ludGVyY2VwdERsZ3QpO1xuXHQgICAgICAgICAgICB0aGlzLl9pbnZva2VaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZSA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX2ludm9rZVpTKTtcblx0ICAgICAgICAgICAgdGhpcy5faW52b2tlRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZSA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2ludm9rZURsZ3QpO1xuXHQgICAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvclpTID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSGFuZGxlRXJyb3IgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9oYW5kbGVFcnJvclpTKTtcblx0ICAgICAgICAgICAgdGhpcy5faGFuZGxlRXJyb3JEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSGFuZGxlRXJyb3IgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlLl9oYW5kbGVFcnJvckRsZ3QpO1xuXHQgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZVRhc2taUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vblNjaGVkdWxlVGFzayA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX3NjaGVkdWxlVGFza1pTKTtcblx0ICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vblNjaGVkdWxlVGFzayA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX3NjaGVkdWxlVGFza0RsZ3QpO1xuXHQgICAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2VUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5faW52b2tlVGFza1pTKTtcblx0ICAgICAgICAgICAgdGhpcy5faW52b2tlVGFza0RsZ3QgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2VUYXNrID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faW52b2tlVGFza0RsZ3QpO1xuXHQgICAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25DYW5jZWxUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5fY2FuY2VsVGFza1pTKTtcblx0ICAgICAgICAgICAgdGhpcy5fY2FuY2VsVGFza0RsZ3QgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25DYW5jZWxUYXNrID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5fY2FuY2VsVGFza0RsZ3QpO1xuXHQgICAgICAgICAgICB0aGlzLl9oYXNUYXNrWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYXNUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5faGFzVGFza1pTKTtcblx0ICAgICAgICAgICAgdGhpcy5faGFzVGFza0RsZ3QgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYXNUYXNrID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faGFzVGFza0RsZ3QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmZvcmsgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgem9uZVNwZWMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZvcmtaU1xuXHQgICAgICAgICAgICAgICAgPyB0aGlzLl9mb3JrWlMub25Gb3JrKHRoaXMuX2ZvcmtEbGd0LCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIHpvbmVTcGVjKVxuXHQgICAgICAgICAgICAgICAgOiBuZXcgWm9uZSh0YXJnZXRab25lLCB6b25lU3BlYyk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmludGVyY2VwdCA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCBjYWxsYmFjaywgc291cmNlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnRlcmNlcHRaU1xuXHQgICAgICAgICAgICAgICAgPyB0aGlzLl9pbnRlcmNlcHRaUy5vbkludGVyY2VwdCh0aGlzLl9pbnRlcmNlcHREbGd0LCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIGNhbGxiYWNrLCBzb3VyY2UpXG5cdCAgICAgICAgICAgICAgICA6IGNhbGxiYWNrO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZURlbGVnYXRlLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZVpTXG5cdCAgICAgICAgICAgICAgICA/IHRoaXMuX2ludm9rZVpTLm9uSW52b2tlKHRoaXMuX2ludm9rZURsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpXG5cdCAgICAgICAgICAgICAgICA6IGNhbGxiYWNrLmFwcGx5KGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgZXJyb3IpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZUVycm9yWlNcblx0ICAgICAgICAgICAgICAgID8gdGhpcy5faGFuZGxlRXJyb3JaUy5vbkhhbmRsZUVycm9yKHRoaXMuX2hhbmRsZUVycm9yRGxndCwgdGhpcy56b25lLCB0YXJnZXRab25lLCBlcnJvcilcblx0ICAgICAgICAgICAgICAgIDogdHJ1ZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuc2NoZWR1bGVUYXNrID0gZnVuY3Rpb24gKHRhcmdldFpvbmUsIHRhc2spIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zY2hlZHVsZVRhc2taUykge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZVRhc2taUy5vblNjaGVkdWxlVGFzayh0aGlzLl9zY2hlZHVsZVRhc2tEbGd0LCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIHRhc2spO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSBpZiAodGFzay5zY2hlZHVsZUZuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFzay5zY2hlZHVsZUZuKHRhc2spO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSBpZiAodGFzay50eXBlID09ICdtaWNyb1Rhc2snKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVNaWNyb1Rhc2sodGFzayk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rhc2sgaXMgbWlzc2luZyBzY2hlZHVsZUZuLicpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Wm9uZSA9PSB0aGlzLnpvbmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzay50eXBlLCAxKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZURlbGVnYXRlLnByb3RvdHlwZS5pbnZva2VUYXNrID0gZnVuY3Rpb24gKHRhcmdldFpvbmUsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlVGFza1pTXG5cdCAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9pbnZva2VUYXNrWlMub25JbnZva2VUYXNrKHRoaXMuX2ludm9rZVRhc2tEbGd0LCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKVxuXHQgICAgICAgICAgICAgICAgICAgIDogdGFzay5jYWxsYmFjay5hcHBseShhcHBseVRoaXMsIGFwcGx5QXJncyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Wm9uZSA9PSB0aGlzLnpvbmUgJiYgKHRhc2sudHlwZSAhPSAnZXZlbnRUYXNrJykgJiYgISh0YXNrLmRhdGEgJiYgdGFzay5kYXRhLmlzUGVyaW9kaWMpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVGFza0NvdW50KHRhc2sudHlwZSwgLTEpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmNhbmNlbFRhc2sgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgdGFzaykge1xuXHQgICAgICAgICAgICB2YXIgdmFsdWU7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLl9jYW5jZWxUYXNrWlMpIHtcblx0ICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fY2FuY2VsVGFza1pTLm9uQ2FuY2VsVGFzayh0aGlzLl9jYW5jZWxUYXNrRGxndCwgdGhpcy56b25lLCB0YXJnZXRab25lLCB0YXNrKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmICghdGFzay5jYW5jZWxGbikge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYXNrIGRvZXMgbm90IHN1cHBvcnQgY2FuY2VsbGF0aW9uLCBvciBpcyBhbHJlYWR5IGNhbmNlbGVkLicpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSB0YXNrLmNhbmNlbEZuKHRhc2spO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICh0YXJnZXRab25lID09IHRoaXMuem9uZSkge1xuXHQgICAgICAgICAgICAgICAgLy8gdGhpcyBzaG91bGQgbm90IGJlIGluIHRoZSBmaW5hbGx5IGJsb2NrLCBiZWNhdXNlIGV4Y2VwdGlvbnMgYXNzdW1lIG5vdCBjYW5jZWxlZC5cblx0ICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRhc2tDb3VudCh0YXNrLnR5cGUsIC0xKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmhhc1Rhc2sgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgaXNFbXB0eSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5faGFzVGFza1pTICYmIHRoaXMuX2hhc1Rhc2taUy5vbkhhc1Rhc2sodGhpcy5faGFzVGFza0RsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgaXNFbXB0eSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLl91cGRhdGVUYXNrQ291bnQgPSBmdW5jdGlvbiAodHlwZSwgY291bnQpIHtcblx0ICAgICAgICAgICAgdmFyIGNvdW50cyA9IHRoaXMuX3Rhc2tDb3VudHM7XG5cdCAgICAgICAgICAgIHZhciBwcmV2ID0gY291bnRzW3R5cGVdO1xuXHQgICAgICAgICAgICB2YXIgbmV4dCA9IGNvdW50c1t0eXBlXSA9IHByZXYgKyBjb3VudDtcblx0ICAgICAgICAgICAgaWYgKG5leHQgPCAwKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vcmUgdGFza3MgZXhlY3V0ZWQgdGhlbiB3ZXJlIHNjaGVkdWxlZC4nKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAocHJldiA9PSAwIHx8IG5leHQgPT0gMCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGlzRW1wdHkgPSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbWljcm9UYXNrOiBjb3VudHMubWljcm9UYXNrID4gMCxcblx0ICAgICAgICAgICAgICAgICAgICBtYWNyb1Rhc2s6IGNvdW50cy5tYWNyb1Rhc2sgPiAwLFxuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFzazogY291bnRzLmV2ZW50VGFzayA+IDAsXG5cdCAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiB0eXBlXG5cdCAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc1Rhc2sodGhpcy56b25lLCBpc0VtcHR5KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9wYXJlbnREZWxlZ2F0ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnREZWxlZ2F0ZS5fdXBkYXRlVGFza0NvdW50KHR5cGUsIGNvdW50KTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIHJldHVybiBab25lRGVsZWdhdGU7XG5cdCAgICB9KCkpO1xuXHQgICAgdmFyIFpvbmVUYXNrID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmdW5jdGlvbiBab25lVGFzayh0eXBlLCB6b25lLCBzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zLCBzY2hlZHVsZUZuLCBjYW5jZWxGbikge1xuXHQgICAgICAgICAgICB0aGlzLnJ1bkNvdW50ID0gMDtcblx0ICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcblx0ICAgICAgICAgICAgdGhpcy56b25lID0gem9uZTtcblx0ICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGF0YSA9IG9wdGlvbnM7XG5cdCAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbiA9IHNjaGVkdWxlRm47XG5cdCAgICAgICAgICAgIHRoaXMuY2FuY2VsRm4gPSBjYW5jZWxGbjtcblx0ICAgICAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuXHQgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgICAgIHRoaXMuaW52b2tlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcysrO1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gem9uZS5ydW5UYXNrKHNlbGYsIHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcyA9PSAxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGRyYWluTWljcm9UYXNrUXVldWUoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcy0tO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBab25lVGFzay5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdHlwZW9mIHRoaXMuZGF0YS5oYW5kbGVJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuaGFuZGxlSWQ7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICByZXR1cm4gWm9uZVRhc2s7XG5cdCAgICB9KCkpO1xuXHQgICAgZnVuY3Rpb24gX19zeW1ib2xfXyhuYW1lKSB7IHJldHVybiAnX196b25lX3N5bWJvbF9fJyArIG5hbWU7IH1cblx0ICAgIDtcblx0ICAgIHZhciBzeW1ib2xTZXRUaW1lb3V0ID0gX19zeW1ib2xfXygnc2V0VGltZW91dCcpO1xuXHQgICAgdmFyIHN5bWJvbFByb21pc2UgPSBfX3N5bWJvbF9fKCdQcm9taXNlJyk7XG5cdCAgICB2YXIgc3ltYm9sVGhlbiA9IF9fc3ltYm9sX18oJ3RoZW4nKTtcblx0ICAgIHZhciBfY3VycmVudFpvbmUgPSBuZXcgWm9uZShudWxsLCBudWxsKTtcblx0ICAgIHZhciBfY3VycmVudFRhc2sgPSBudWxsO1xuXHQgICAgdmFyIF9taWNyb1Rhc2tRdWV1ZSA9IFtdO1xuXHQgICAgdmFyIF9pc0RyYWluaW5nTWljcm90YXNrUXVldWUgPSBmYWxzZTtcblx0ICAgIHZhciBfdW5jYXVnaHRQcm9taXNlRXJyb3JzID0gW107XG5cdCAgICB2YXIgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcyA9IDA7XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZVF1ZXVlRHJhaW4oKSB7XG5cdCAgICAgICAgLy8gaWYgd2UgYXJlIG5vdCBydW5uaW5nIGluIGFueSB0YXNrLCBhbmQgdGhlcmUgaGFzIG5vdCBiZWVuIGFueXRoaW5nIHNjaGVkdWxlZFxuXHQgICAgICAgIC8vIHdlIG11c3QgYm9vdHN0cmFwIHRoZSBpbml0aWFsIHRhc2sgY3JlYXRpb24gYnkgbWFudWFsbHkgc2NoZWR1bGluZyB0aGUgZHJhaW5cblx0ICAgICAgICBpZiAoX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcyA9PSAwICYmIF9taWNyb1Rhc2tRdWV1ZS5sZW5ndGggPT0gMCkge1xuXHQgICAgICAgICAgICAvLyBXZSBhcmUgbm90IHJ1bm5pbmcgaW4gVGFzaywgc28gd2UgbmVlZCB0byBraWNrc3RhcnQgdGhlIG1pY3JvdGFzayBxdWV1ZS5cblx0ICAgICAgICAgICAgaWYgKGdsb2JhbFtzeW1ib2xQcm9taXNlXSkge1xuXHQgICAgICAgICAgICAgICAgZ2xvYmFsW3N5bWJvbFByb21pc2VdLnJlc29sdmUoMClbc3ltYm9sVGhlbl0oZHJhaW5NaWNyb1Rhc2tRdWV1ZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBnbG9iYWxbc3ltYm9sU2V0VGltZW91dF0oZHJhaW5NaWNyb1Rhc2tRdWV1ZSwgMCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZU1pY3JvVGFzayh0YXNrKSB7XG5cdCAgICAgICAgc2NoZWR1bGVRdWV1ZURyYWluKCk7XG5cdCAgICAgICAgX21pY3JvVGFza1F1ZXVlLnB1c2godGFzayk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBjb25zb2xlRXJyb3IoZSkge1xuXHQgICAgICAgIHZhciByZWplY3Rpb24gPSBlICYmIGUucmVqZWN0aW9uO1xuXHQgICAgICAgIGlmIChyZWplY3Rpb24pIHtcblx0ICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIFByb21pc2UgcmVqZWN0aW9uOicsIHJlamVjdGlvbiBpbnN0YW5jZW9mIEVycm9yID8gcmVqZWN0aW9uLm1lc3NhZ2UgOiByZWplY3Rpb24sICc7IFpvbmU6JywgZS56b25lLm5hbWUsICc7IFRhc2s6JywgZS50YXNrICYmIGUudGFzay5zb3VyY2UsICc7IFZhbHVlOicsIHJlamVjdGlvbiwgcmVqZWN0aW9uIGluc3RhbmNlb2YgRXJyb3IgPyByZWplY3Rpb24uc3RhY2sgOiB1bmRlZmluZWQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZHJhaW5NaWNyb1Rhc2tRdWV1ZSgpIHtcblx0ICAgICAgICBpZiAoIV9pc0RyYWluaW5nTWljcm90YXNrUXVldWUpIHtcblx0ICAgICAgICAgICAgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSA9IHRydWU7XG5cdCAgICAgICAgICAgIHdoaWxlIChfbWljcm9UYXNrUXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcXVldWUgPSBfbWljcm9UYXNrUXVldWU7XG5cdCAgICAgICAgICAgICAgICBfbWljcm9UYXNrUXVldWUgPSBbXTtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdGFzayA9IHF1ZXVlW2ldO1xuXHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suem9uZS5ydW5UYXNrKHRhc2ssIG51bGwsIG51bGwpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlRXJyb3IoZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHdoaWxlIChfdW5jYXVnaHRQcm9taXNlRXJyb3JzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdW5jYXVnaHRQcm9taXNlRXJyb3IgPSBfdW5jYXVnaHRQcm9taXNlRXJyb3JzLnNoaWZ0KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdW5jYXVnaHRQcm9taXNlRXJyb3Iuem9uZS5ydW5HdWFyZGVkKGZ1bmN0aW9uICgpIHsgdGhyb3cgdW5jYXVnaHRQcm9taXNlRXJyb3I7IH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlRXJyb3IoZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIHdoaWxlIChfdW5jYXVnaHRQcm9taXNlRXJyb3JzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICAgIF9sb29wXzEoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBfaXNEcmFpbmluZ01pY3JvdGFza1F1ZXVlID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gaXNUaGVuYWJsZSh2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZSAmJiB2YWx1ZS50aGVuO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gZm9yd2FyZFJlc29sdXRpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9XG5cdCAgICBmdW5jdGlvbiBmb3J3YXJkUmVqZWN0aW9uKHJlamVjdGlvbikgeyByZXR1cm4gWm9uZUF3YXJlUHJvbWlzZS5yZWplY3QocmVqZWN0aW9uKTsgfVxuXHQgICAgdmFyIHN5bWJvbFN0YXRlID0gX19zeW1ib2xfXygnc3RhdGUnKTtcblx0ICAgIHZhciBzeW1ib2xWYWx1ZSA9IF9fc3ltYm9sX18oJ3ZhbHVlJyk7XG5cdCAgICB2YXIgc291cmNlID0gJ1Byb21pc2UudGhlbic7XG5cdCAgICB2YXIgVU5SRVNPTFZFRCA9IG51bGw7XG5cdCAgICB2YXIgUkVTT0xWRUQgPSB0cnVlO1xuXHQgICAgdmFyIFJFSkVDVEVEID0gZmFsc2U7XG5cdCAgICB2YXIgUkVKRUNURURfTk9fQ0FUQ0ggPSAwO1xuXHQgICAgZnVuY3Rpb24gbWFrZVJlc29sdmVyKHByb21pc2UsIHN0YXRlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHN0YXRlLCB2KTtcblx0ICAgICAgICAgICAgLy8gRG8gbm90IHJldHVybiB2YWx1ZSBvciB5b3Ugd2lsbCBicmVhayB0aGUgUHJvbWlzZSBzcGVjLlxuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZShwcm9taXNlLCBzdGF0ZSwgdmFsdWUpIHtcblx0ICAgICAgICBpZiAocHJvbWlzZVtzeW1ib2xTdGF0ZV0gPT09IFVOUkVTT0xWRUQpIHtcblx0ICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgWm9uZUF3YXJlUHJvbWlzZSAmJiB2YWx1ZVtzeW1ib2xTdGF0ZV0gIT09IFVOUkVTT0xWRUQpIHtcblx0ICAgICAgICAgICAgICAgIGNsZWFyUmVqZWN0ZWROb0NhdGNoKHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHZhbHVlW3N5bWJvbFN0YXRlXSwgdmFsdWVbc3ltYm9sVmFsdWVdKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIGlmIChpc1RoZW5hYmxlKHZhbHVlKSkge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUudGhlbihtYWtlUmVzb2x2ZXIocHJvbWlzZSwgc3RhdGUpLCBtYWtlUmVzb2x2ZXIocHJvbWlzZSwgZmFsc2UpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHByb21pc2Vbc3ltYm9sU3RhdGVdID0gc3RhdGU7XG5cdCAgICAgICAgICAgICAgICB2YXIgcXVldWUgPSBwcm9taXNlW3N5bWJvbFZhbHVlXTtcblx0ICAgICAgICAgICAgICAgIHByb21pc2Vbc3ltYm9sVmFsdWVdID0gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDspIHtcblx0ICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZVJlc29sdmVPclJlamVjdChwcm9taXNlLCBxdWV1ZVtpKytdLCBxdWV1ZVtpKytdLCBxdWV1ZVtpKytdLCBxdWV1ZVtpKytdKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT0gMCAmJiBzdGF0ZSA9PSBSRUpFQ1RFRCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHByb21pc2Vbc3ltYm9sU3RhdGVdID0gUkVKRUNURURfTk9fQ0FUQ0g7XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5jYXVnaHQgKGluIHByb21pc2UpOiBcIiArIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IucmVqZWN0aW9uID0gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLnByb21pc2UgPSBwcm9taXNlO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci56b25lID0gWm9uZS5jdXJyZW50O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci50YXNrID0gWm9uZS5jdXJyZW50VGFzaztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3VuY2F1Z2h0UHJvbWlzZUVycm9ycy5wdXNoKGVycm9yKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVRdWV1ZURyYWluKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIFJlc29sdmluZyBhbiBhbHJlYWR5IHJlc29sdmVkIHByb21pc2UgaXMgYSBub29wLlxuXHQgICAgICAgIHJldHVybiBwcm9taXNlO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gY2xlYXJSZWplY3RlZE5vQ2F0Y2gocHJvbWlzZSkge1xuXHQgICAgICAgIGlmIChwcm9taXNlW3N5bWJvbFN0YXRlXSA9PT0gUkVKRUNURURfTk9fQ0FUQ0gpIHtcblx0ICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xTdGF0ZV0gPSBSRUpFQ1RFRDtcblx0ICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdW5jYXVnaHRQcm9taXNlRXJyb3JzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAocHJvbWlzZSA9PT0gX3VuY2F1Z2h0UHJvbWlzZUVycm9yc1tpXS5wcm9taXNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX3VuY2F1Z2h0UHJvbWlzZUVycm9ycy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBzY2hlZHVsZVJlc29sdmVPclJlamVjdChwcm9taXNlLCB6b25lLCBjaGFpblByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG5cdCAgICAgICAgY2xlYXJSZWplY3RlZE5vQ2F0Y2gocHJvbWlzZSk7XG5cdCAgICAgICAgdmFyIGRlbGVnYXRlID0gcHJvbWlzZVtzeW1ib2xTdGF0ZV0gPyBvbkZ1bGZpbGxlZCB8fCBmb3J3YXJkUmVzb2x1dGlvbiA6IG9uUmVqZWN0ZWQgfHwgZm9yd2FyZFJlamVjdGlvbjtcblx0ICAgICAgICB6b25lLnNjaGVkdWxlTWljcm9UYXNrKHNvdXJjZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2hhaW5Qcm9taXNlLCB0cnVlLCB6b25lLnJ1bihkZWxlZ2F0ZSwgbnVsbCwgW3Byb21pc2Vbc3ltYm9sVmFsdWVdXSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2hhaW5Qcm9taXNlLCBmYWxzZSwgZXJyb3IpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICB2YXIgWm9uZUF3YXJlUHJvbWlzZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnVuY3Rpb24gWm9uZUF3YXJlUHJvbWlzZShleGVjdXRvcikge1xuXHQgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIGlmICghKHByb21pc2UgaW5zdGFuY2VvZiBab25lQXdhcmVQcm9taXNlKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IGJlIGFuIGluc3RhbmNlb2YgUHJvbWlzZS4nKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFN0YXRlXSA9IFVOUkVTT0xWRUQ7XG5cdCAgICAgICAgICAgIHByb21pc2Vbc3ltYm9sVmFsdWVdID0gW107IC8vIHF1ZXVlO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgZXhlY3V0b3IgJiYgZXhlY3V0b3IobWFrZVJlc29sdmVyKHByb21pc2UsIFJFU09MVkVEKSwgbWFrZVJlc29sdmVyKHByb21pc2UsIFJFSkVDVEVEKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIGZhbHNlLCBlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBab25lQXdhcmVQcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKG5ldyB0aGlzKG51bGwpLCBSRVNPTFZFRCwgdmFsdWUpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAoZXJyb3IpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKG5ldyB0aGlzKG51bGwpLCBSRUpFQ1RFRCwgZXJyb3IpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuXHQgICAgICAgICAgICB2YXIgcmVzb2x2ZTtcblx0ICAgICAgICAgICAgdmFyIHJlamVjdDtcblx0ICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhmdW5jdGlvbiAocmVzLCByZWopIHsgcmVzb2x2ZSA9IHJlczsgcmVqZWN0ID0gcmVqOyB9KTtcblx0ICAgICAgICAgICAgZnVuY3Rpb24gb25SZXNvbHZlKHZhbHVlKSB7IHByb21pc2UgJiYgKHByb21pc2UgPSBudWxsIHx8IHJlc29sdmUodmFsdWUpKTsgfVxuXHQgICAgICAgICAgICBmdW5jdGlvbiBvblJlamVjdChlcnJvcikgeyBwcm9taXNlICYmIChwcm9taXNlID0gbnVsbCB8fCByZWplY3QoZXJyb3IpKTsgfVxuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlc18xID0gdmFsdWVzOyBfaSA8IHZhbHVlc18xLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzXzFbX2ldO1xuXHQgICAgICAgICAgICAgICAgaWYgKCFpc1RoZW5hYmxlKHZhbHVlKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5yZXNvbHZlKHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ob25SZXNvbHZlLCBvblJlamVjdCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lQXdhcmVQcm9taXNlLmFsbCA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHJlc29sdmU7XG5cdCAgICAgICAgICAgIHZhciByZWplY3Q7XG5cdCAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IHRoaXMoZnVuY3Rpb24gKHJlcywgcmVqKSB7IHJlc29sdmUgPSByZXM7IHJlamVjdCA9IHJlajsgfSk7XG5cdCAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG5cdCAgICAgICAgICAgIHZhciByZXNvbHZlZFZhbHVlcyA9IFtdO1xuXHQgICAgICAgICAgICBmdW5jdGlvbiBvblJlamVjdChlcnJvcikgeyBwcm9taXNlICYmIHJlamVjdChlcnJvcik7IHByb21pc2UgPSBudWxsOyB9XG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmFsdWVzXzIgPSB2YWx1ZXM7IF9pIDwgdmFsdWVzXzIubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNfMltfaV07XG5cdCAgICAgICAgICAgICAgICBpZiAoIWlzVGhlbmFibGUodmFsdWUpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnJlc29sdmUodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgdmFsdWUudGhlbigoZnVuY3Rpb24gKGluZGV4KSB7IHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXNvbHZlZFZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBjb3VudC0tO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChwcm9taXNlICYmICFjb3VudCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc29sdmVkVmFsdWVzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9PSBudWxsO1xuXHQgICAgICAgICAgICAgICAgfTsgfSkoY291bnQpLCBvblJlamVjdCk7XG5cdCAgICAgICAgICAgICAgICBjb3VudCsrO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICghY291bnQpXG5cdCAgICAgICAgICAgICAgICByZXNvbHZlKHJlc29sdmVkVmFsdWVzKTtcblx0ICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lQXdhcmVQcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG5cdCAgICAgICAgICAgIHZhciBjaGFpblByb21pc2UgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihudWxsKTtcblx0ICAgICAgICAgICAgdmFyIHpvbmUgPSBab25lLmN1cnJlbnQ7XG5cdCAgICAgICAgICAgIGlmICh0aGlzW3N5bWJvbFN0YXRlXSA9PSBVTlJFU09MVkVEKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzW3N5bWJvbFZhbHVlXS5wdXNoKHpvbmUsIGNoYWluUHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgc2NoZWR1bGVSZXNvbHZlT3JSZWplY3QodGhpcywgem9uZSwgY2hhaW5Qcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIGNoYWluUHJvbWlzZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVBd2FyZVByb21pc2UucHJvdG90eXBlLmNhdGNoID0gZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIHJldHVybiBab25lQXdhcmVQcm9taXNlO1xuXHQgICAgfSgpKTtcblx0ICAgIHZhciBOYXRpdmVQcm9taXNlID0gZ2xvYmFsW19fc3ltYm9sX18oJ1Byb21pc2UnKV0gPSBnbG9iYWwuUHJvbWlzZTtcblx0ICAgIGdsb2JhbC5Qcm9taXNlID0gWm9uZUF3YXJlUHJvbWlzZTtcblx0ICAgIGlmIChOYXRpdmVQcm9taXNlKSB7XG5cdCAgICAgICAgdmFyIE5hdGl2ZVByb21pc2VQcm90b3RvdHlwZSA9IE5hdGl2ZVByb21pc2UucHJvdG90eXBlO1xuXHQgICAgICAgIHZhciBOYXRpdmVQcm9taXNlVGhlbl8xID0gTmF0aXZlUHJvbWlzZVByb3RvdG90eXBlW19fc3ltYm9sX18oJ3RoZW4nKV1cblx0ICAgICAgICAgICAgPSBOYXRpdmVQcm9taXNlUHJvdG90b3R5cGUudGhlbjtcblx0ICAgICAgICBOYXRpdmVQcm9taXNlUHJvdG90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvblJlc29sdmUsIG9uUmVqZWN0KSB7XG5cdCAgICAgICAgICAgIHZhciBuYXRpdmVQcm9taXNlID0gdGhpcztcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBab25lQXdhcmVQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICAgICAgICAgIE5hdGl2ZVByb21pc2VUaGVuXzEuY2FsbChuYXRpdmVQcm9taXNlLCByZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgICAgICB9KS50aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICAvLyBUaGlzIGlzIG5vdCBwYXJ0IG9mIHB1YmxpYyBBUEksIGJ1dCBpdCBpcyB1c2VmdWxsIGZvciB0ZXN0cywgc28gd2UgZXhwb3NlIGl0LlxuXHQgICAgUHJvbWlzZVtab25lLl9fc3ltYm9sX18oJ3VuY2F1Z2h0UHJvbWlzZUVycm9ycycpXSA9IF91bmNhdWdodFByb21pc2VFcnJvcnM7XG5cdCAgICByZXR1cm4gZ2xvYmFsLlpvbmUgPSBab25lO1xuXHR9KSh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHdpbmRvdyk7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIFdURl9JU1NVRV81NTUgPSAnQW5jaG9yLEFyZWEsQXVkaW8sQlIsQmFzZSxCYXNlRm9udCxCb2R5LEJ1dHRvbixDYW52YXMsQ29udGVudCxETGlzdCxEaXJlY3RvcnksRGl2LEVtYmVkLEZpZWxkU2V0LEZvbnQsRm9ybSxGcmFtZSxGcmFtZVNldCxIUixIZWFkLEhlYWRpbmcsSHRtbCxJRnJhbWUsSW1hZ2UsSW5wdXQsS2V5Z2VuLExJLExhYmVsLExlZ2VuZCxMaW5rLE1hcCxNYXJxdWVlLE1lZGlhLE1lbnUsTWV0YSxNZXRlcixNb2QsT0xpc3QsT2JqZWN0LE9wdEdyb3VwLE9wdGlvbixPdXRwdXQsUGFyYWdyYXBoLFByZSxQcm9ncmVzcyxRdW90ZSxTY3JpcHQsU2VsZWN0LFNvdXJjZSxTcGFuLFN0eWxlLFRhYmxlQ2FwdGlvbixUYWJsZUNlbGwsVGFibGVDb2wsVGFibGUsVGFibGVSb3csVGFibGVTZWN0aW9uLFRleHRBcmVhLFRpdGxlLFRyYWNrLFVMaXN0LFVua25vd24sVmlkZW8nO1xuXHR2YXIgTk9fRVZFTlRfVEFSR0VUID0gJ0FwcGxpY2F0aW9uQ2FjaGUsRXZlbnRTb3VyY2UsRmlsZVJlYWRlcixJbnB1dE1ldGhvZENvbnRleHQsTWVkaWFDb250cm9sbGVyLE1lc3NhZ2VQb3J0LE5vZGUsUGVyZm9ybWFuY2UsU1ZHRWxlbWVudEluc3RhbmNlLFNoYXJlZFdvcmtlcixUZXh0VHJhY2ssVGV4dFRyYWNrQ3VlLFRleHRUcmFja0xpc3QsV2ViS2l0TmFtZWRGbG93LFdpbmRvdyxXb3JrZXIsV29ya2VyR2xvYmFsU2NvcGUsWE1MSHR0cFJlcXVlc3QsWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldCxYTUxIdHRwUmVxdWVzdFVwbG9hZCxJREJSZXF1ZXN0LElEQk9wZW5EQlJlcXVlc3QsSURCRGF0YWJhc2UsSURCVHJhbnNhY3Rpb24sSURCQ3Vyc29yLERCSW5kZXgnLnNwbGl0KCcsJyk7XG5cdHZhciBFVkVOVF9UQVJHRVQgPSAnRXZlbnRUYXJnZXQnO1xuXHRmdW5jdGlvbiBldmVudFRhcmdldFBhdGNoKF9nbG9iYWwpIHtcblx0ICAgIHZhciBhcGlzID0gW107XG5cdCAgICB2YXIgaXNXdGYgPSBfZ2xvYmFsWyd3dGYnXTtcblx0ICAgIGlmIChpc1d0Zikge1xuXHQgICAgICAgIC8vIFdvcmthcm91bmQgZm9yOiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3RyYWNpbmctZnJhbWV3b3JrL2lzc3Vlcy81NTVcblx0ICAgICAgICBhcGlzID0gV1RGX0lTU1VFXzU1NS5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gJ0hUTUwnICsgdiArICdFbGVtZW50JzsgfSkuY29uY2F0KE5PX0VWRU5UX1RBUkdFVCk7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChfZ2xvYmFsW0VWRU5UX1RBUkdFVF0pIHtcblx0ICAgICAgICBhcGlzLnB1c2goRVZFTlRfVEFSR0VUKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIC8vIE5vdGU6IEV2ZW50VGFyZ2V0IGlzIG5vdCBhdmFpbGFibGUgaW4gYWxsIGJyb3dzZXJzLFxuXHQgICAgICAgIC8vIGlmIGl0J3Mgbm90IGF2YWlsYWJsZSwgd2UgaW5zdGVhZCBwYXRjaCB0aGUgQVBJcyBpbiB0aGUgSURMIHRoYXQgaW5oZXJpdCBmcm9tIEV2ZW50VGFyZ2V0XG5cdCAgICAgICAgYXBpcyA9IE5PX0VWRU5UX1RBUkdFVDtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXBpcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciB0eXBlID0gX2dsb2JhbFthcGlzW2ldXTtcblx0ICAgICAgICB1dGlsc18xLnBhdGNoRXZlbnRUYXJnZXRNZXRob2RzKHR5cGUgJiYgdHlwZS5wcm90b3R5cGUpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMuZXZlbnRUYXJnZXRQYXRjaCA9IGV2ZW50VGFyZ2V0UGF0Y2g7XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsvKipcblx0ICogU3VwcHJlc3MgY2xvc3VyZSBjb21waWxlciBlcnJvcnMgYWJvdXQgdW5rbm93biAncHJvY2VzcycgdmFyaWFibGVcblx0ICogQGZpbGVvdmVydmlld1xuXHQgKiBAc3VwcHJlc3Mge3VuZGVmaW5lZFZhcnN9XG5cdCAqL1xuXHRcInVzZSBzdHJpY3RcIjtcblx0ZXhwb3J0cy56b25lU3ltYm9sID0gWm9uZVsnX19zeW1ib2xfXyddO1xuXHR2YXIgX2dsb2JhbCA9IHR5cGVvZiB3aW5kb3cgPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3c7XG5cdGZ1bmN0aW9uIGJpbmRBcmd1bWVudHMoYXJncywgc291cmNlKSB7XG5cdCAgICBmb3IgKHZhciBpID0gYXJncy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYXJnc1tpXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBhcmdzW2ldID0gWm9uZS5jdXJyZW50LndyYXAoYXJnc1tpXSwgc291cmNlICsgJ18nICsgaSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGFyZ3M7XG5cdH1cblx0ZXhwb3J0cy5iaW5kQXJndW1lbnRzID0gYmluZEFyZ3VtZW50cztcblx0O1xuXHRmdW5jdGlvbiBwYXRjaFByb3RvdHlwZShwcm90b3R5cGUsIGZuTmFtZXMpIHtcblx0ICAgIHZhciBzb3VyY2UgPSBwcm90b3R5cGUuY29uc3RydWN0b3JbJ25hbWUnXTtcblx0ICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24oaSkge1xuXHQgICAgICAgIHZhciBuYW1lXzEgPSBmbk5hbWVzW2ldO1xuXHQgICAgICAgIHZhciBkZWxlZ2F0ZSA9IHByb3RvdHlwZVtuYW1lXzFdO1xuXHQgICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuXHQgICAgICAgICAgICBwcm90b3R5cGVbbmFtZV8xXSA9IChmdW5jdGlvbiAoZGVsZWdhdGUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlLmFwcGx5KHRoaXMsIGJpbmRBcmd1bWVudHMoYXJndW1lbnRzLCBzb3VyY2UgKyAnLicgKyBuYW1lXzEpKTtcblx0ICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIH0pKGRlbGVnYXRlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgX2xvb3BfMShpKTtcblx0ICAgIH1cblx0fVxuXHRleHBvcnRzLnBhdGNoUHJvdG90eXBlID0gcGF0Y2hQcm90b3R5cGU7XG5cdDtcblx0ZXhwb3J0cy5pc1dlYldvcmtlciA9ICh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSk7XG5cdGV4cG9ydHMuaXNOb2RlID0gKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xuXHRleHBvcnRzLmlzQnJvd3NlciA9ICFleHBvcnRzLmlzTm9kZSAmJiAhZXhwb3J0cy5pc1dlYldvcmtlciAmJiAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3dbJ0hUTUxFbGVtZW50J10pO1xuXHRmdW5jdGlvbiBwYXRjaFByb3BlcnR5KG9iaiwgcHJvcCkge1xuXHQgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCkgfHwge1xuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9O1xuXHQgICAgLy8gQSBwcm9wZXJ0eSBkZXNjcmlwdG9yIGNhbm5vdCBoYXZlIGdldHRlci9zZXR0ZXIgYW5kIGJlIHdyaXRhYmxlXG5cdCAgICAvLyBkZWxldGluZyB0aGUgd3JpdGFibGUgYW5kIHZhbHVlIHByb3BlcnRpZXMgYXZvaWRzIHRoaXMgZXJyb3I6XG5cdCAgICAvL1xuXHQgICAgLy8gVHlwZUVycm9yOiBwcm9wZXJ0eSBkZXNjcmlwdG9ycyBtdXN0IG5vdCBzcGVjaWZ5IGEgdmFsdWUgb3IgYmUgd3JpdGFibGUgd2hlbiBhXG5cdCAgICAvLyBnZXR0ZXIgb3Igc2V0dGVyIGhhcyBiZWVuIHNwZWNpZmllZFxuXHQgICAgZGVsZXRlIGRlc2Mud3JpdGFibGU7XG5cdCAgICBkZWxldGUgZGVzYy52YWx1ZTtcblx0ICAgIC8vIHN1YnN0cigyKSBjdXogJ29uY2xpY2snIC0+ICdjbGljaycsIGV0Y1xuXHQgICAgdmFyIGV2ZW50TmFtZSA9IHByb3Auc3Vic3RyKDIpO1xuXHQgICAgdmFyIF9wcm9wID0gJ18nICsgcHJvcDtcblx0ICAgIGRlc2Muc2V0ID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICAgICAgaWYgKHRoaXNbX3Byb3BdKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHRoaXNbX3Byb3BdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB2YXIgd3JhcEZuID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgICAgICAgICAgcmVzdWx0ID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gdW5kZWZpbmVkICYmICFyZXN1bHQpXG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgdGhpc1tfcHJvcF0gPSB3cmFwRm47XG5cdCAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHdyYXBGbiwgZmFsc2UpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpc1tfcHJvcF0gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICAvLyBUaGUgZ2V0dGVyIHdvdWxkIHJldHVybiB1bmRlZmluZWQgZm9yIHVuYXNzaWduZWQgcHJvcGVydGllcyBidXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYW4gdW5hc3NpZ25lZCBwcm9wZXJ0eSBpcyBudWxsXG5cdCAgICBkZXNjLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpc1tfcHJvcF0gfHwgbnVsbDtcblx0ICAgIH07XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjKTtcblx0fVxuXHRleHBvcnRzLnBhdGNoUHJvcGVydHkgPSBwYXRjaFByb3BlcnR5O1xuXHQ7XG5cdGZ1bmN0aW9uIHBhdGNoT25Qcm9wZXJ0aWVzKG9iaiwgcHJvcGVydGllcykge1xuXHQgICAgdmFyIG9uUHJvcGVydGllcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcblx0ICAgICAgICBpZiAocHJvcC5zdWJzdHIoMCwgMikgPT0gJ29uJykge1xuXHQgICAgICAgICAgICBvblByb3BlcnRpZXMucHVzaChwcm9wKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9uUHJvcGVydGllcy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgIHBhdGNoUHJvcGVydHkob2JqLCBvblByb3BlcnRpZXNbal0pO1xuXHQgICAgfVxuXHQgICAgaWYgKHByb3BlcnRpZXMpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgcGF0Y2hQcm9wZXJ0eShvYmosICdvbicgKyBwcm9wZXJ0aWVzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0ZXhwb3J0cy5wYXRjaE9uUHJvcGVydGllcyA9IHBhdGNoT25Qcm9wZXJ0aWVzO1xuXHQ7XG5cdHZhciBFVkVOVF9UQVNLUyA9IGV4cG9ydHMuem9uZVN5bWJvbCgnZXZlbnRUYXNrcycpO1xuXHR2YXIgQUREX0VWRU5UX0xJU1RFTkVSID0gJ2FkZEV2ZW50TGlzdGVuZXInO1xuXHR2YXIgUkVNT1ZFX0VWRU5UX0xJU1RFTkVSID0gJ3JlbW92ZUV2ZW50TGlzdGVuZXInO1xuXHR2YXIgU1lNQk9MX0FERF9FVkVOVF9MSVNURU5FUiA9IGV4cG9ydHMuem9uZVN5bWJvbChBRERfRVZFTlRfTElTVEVORVIpO1xuXHR2YXIgU1lNQk9MX1JFTU9WRV9FVkVOVF9MSVNURU5FUiA9IGV4cG9ydHMuem9uZVN5bWJvbChSRU1PVkVfRVZFTlRfTElTVEVORVIpO1xuXHRmdW5jdGlvbiBmaW5kRXhpc3RpbmdSZWdpc3RlcmVkVGFzayh0YXJnZXQsIGhhbmRsZXIsIG5hbWUsIGNhcHR1cmUsIHJlbW92ZSkge1xuXHQgICAgdmFyIGV2ZW50VGFza3MgPSB0YXJnZXRbRVZFTlRfVEFTS1NdO1xuXHQgICAgaWYgKGV2ZW50VGFza3MpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50VGFza3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgdmFyIGV2ZW50VGFzayA9IGV2ZW50VGFza3NbaV07XG5cdCAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRUYXNrLmRhdGE7XG5cdCAgICAgICAgICAgIGlmIChkYXRhLmhhbmRsZXIgPT09IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICYmIGRhdGEudXNlQ2FwdHVyaW5nID09PSBjYXB0dXJlXG5cdCAgICAgICAgICAgICAgICAmJiBkYXRhLmV2ZW50TmFtZSA9PT0gbmFtZSkge1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFza3Muc3BsaWNlKGksIDEpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50VGFzaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBudWxsO1xuXHR9XG5cdGZ1bmN0aW9uIGF0dGFjaFJlZ2lzdGVyZWRFdmVudCh0YXJnZXQsIGV2ZW50VGFzaykge1xuXHQgICAgdmFyIGV2ZW50VGFza3MgPSB0YXJnZXRbRVZFTlRfVEFTS1NdO1xuXHQgICAgaWYgKCFldmVudFRhc2tzKSB7XG5cdCAgICAgICAgZXZlbnRUYXNrcyA9IHRhcmdldFtFVkVOVF9UQVNLU10gPSBbXTtcblx0ICAgIH1cblx0ICAgIGV2ZW50VGFza3MucHVzaChldmVudFRhc2spO1xuXHR9XG5cdGZ1bmN0aW9uIHNjaGVkdWxlRXZlbnRMaXN0ZW5lcihldmVudFRhc2spIHtcblx0ICAgIHZhciBtZXRhID0gZXZlbnRUYXNrLmRhdGE7XG5cdCAgICBhdHRhY2hSZWdpc3RlcmVkRXZlbnQobWV0YS50YXJnZXQsIGV2ZW50VGFzayk7XG5cdCAgICByZXR1cm4gbWV0YS50YXJnZXRbU1lNQk9MX0FERF9FVkVOVF9MSVNURU5FUl0obWV0YS5ldmVudE5hbWUsIGV2ZW50VGFzay5pbnZva2UsIG1ldGEudXNlQ2FwdHVyaW5nKTtcblx0fVxuXHRmdW5jdGlvbiBjYW5jZWxFdmVudExpc3RlbmVyKGV2ZW50VGFzaykge1xuXHQgICAgdmFyIG1ldGEgPSBldmVudFRhc2suZGF0YTtcblx0ICAgIGZpbmRFeGlzdGluZ1JlZ2lzdGVyZWRUYXNrKG1ldGEudGFyZ2V0LCBldmVudFRhc2suaW52b2tlLCBtZXRhLmV2ZW50TmFtZSwgbWV0YS51c2VDYXB0dXJpbmcsIHRydWUpO1xuXHQgICAgbWV0YS50YXJnZXRbU1lNQk9MX1JFTU9WRV9FVkVOVF9MSVNURU5FUl0obWV0YS5ldmVudE5hbWUsIGV2ZW50VGFzay5pbnZva2UsIG1ldGEudXNlQ2FwdHVyaW5nKTtcblx0fVxuXHRmdW5jdGlvbiB6b25lQXdhcmVBZGRFdmVudExpc3RlbmVyKHNlbGYsIGFyZ3MpIHtcblx0ICAgIHZhciBldmVudE5hbWUgPSBhcmdzWzBdO1xuXHQgICAgdmFyIGhhbmRsZXIgPSBhcmdzWzFdO1xuXHQgICAgdmFyIHVzZUNhcHR1cmluZyA9IGFyZ3NbMl0gfHwgZmFsc2U7XG5cdCAgICAvLyAtIEluc2lkZSBhIFdlYiBXb3JrZXIsIGB0aGlzYCBpcyB1bmRlZmluZWQsIHRoZSBjb250ZXh0IGlzIGBnbG9iYWxgXG5cdCAgICAvLyAtIFdoZW4gYGFkZEV2ZW50TGlzdGVuZXJgIGlzIGNhbGxlZCBvbiB0aGUgZ2xvYmFsIGNvbnRleHQgaW4gc3RyaWN0IG1vZGUsIGB0aGlzYCBpcyB1bmRlZmluZWRcblx0ICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci96b25lLmpzL2lzc3Vlcy8xOTBcblx0ICAgIHZhciB0YXJnZXQgPSBzZWxmIHx8IF9nbG9iYWw7XG5cdCAgICB2YXIgZGVsZWdhdGUgPSBudWxsO1xuXHQgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBkZWxlZ2F0ZSA9IGhhbmRsZXI7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChoYW5kbGVyICYmIGhhbmRsZXIuaGFuZGxlRXZlbnQpIHtcblx0ICAgICAgICBkZWxlZ2F0ZSA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gaGFuZGxlci5oYW5kbGVFdmVudChldmVudCk7IH07XG5cdCAgICB9XG5cdCAgICB2YXIgdmFsaWRab25lSGFuZGxlciA9IGZhbHNlO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyBJbiBjcm9zcyBzaXRlIGNvbnRleHRzIChzdWNoIGFzIFdlYkRyaXZlciBmcmFtZXdvcmtzIGxpa2UgU2VsZW5pdW0pLFxuXHQgICAgICAgIC8vIGFjY2Vzc2luZyB0aGUgaGFuZGxlciBvYmplY3QgaGVyZSB3aWxsIGNhdXNlIGFuIGV4Y2VwdGlvbiB0byBiZSB0aHJvd24gd2hpY2hcblx0ICAgICAgICAvLyB3aWxsIGZhaWwgdGVzdHMgcHJlbWF0dXJlbHkuXG5cdCAgICAgICAgdmFsaWRab25lSGFuZGxlciA9IGhhbmRsZXIgJiYgaGFuZGxlci50b1N0cmluZygpID09PSBcIltvYmplY3QgRnVuY3Rpb25XcmFwcGVyXVwiO1xuXHQgICAgfVxuXHQgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBSZXR1cm5pbmcgbm90aGluZyBoZXJlIGlzIGZpbmUsIGJlY2F1c2Ugb2JqZWN0cyBpbiBhIGNyb3NzLXNpdGUgY29udGV4dCBhcmUgdW51c2FibGVcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyBJZ25vcmUgc3BlY2lhbCBsaXN0ZW5lcnMgb2YgSUUxMSAmIEVkZ2UgZGV2IHRvb2xzLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvem9uZS5qcy9pc3N1ZXMvMTUwXG5cdCAgICBpZiAoIWRlbGVnYXRlIHx8IHZhbGlkWm9uZUhhbmRsZXIpIHtcblx0ICAgICAgICByZXR1cm4gdGFyZ2V0W1NZTUJPTF9BRERfRVZFTlRfTElTVEVORVJdKGV2ZW50TmFtZSwgaGFuZGxlciwgdXNlQ2FwdHVyaW5nKTtcblx0ICAgIH1cblx0ICAgIHZhciBldmVudFRhc2sgPSBmaW5kRXhpc3RpbmdSZWdpc3RlcmVkVGFzayh0YXJnZXQsIGhhbmRsZXIsIGV2ZW50TmFtZSwgdXNlQ2FwdHVyaW5nLCBmYWxzZSk7XG5cdCAgICBpZiAoZXZlbnRUYXNrKSB7XG5cdCAgICAgICAgLy8gd2UgYWxyZWFkeSByZWdpc3RlcmVkLCBzbyB0aGlzIHdpbGwgaGF2ZSBub29wLlxuXHQgICAgICAgIHJldHVybiB0YXJnZXRbU1lNQk9MX0FERF9FVkVOVF9MSVNURU5FUl0oZXZlbnROYW1lLCBldmVudFRhc2suaW52b2tlLCB1c2VDYXB0dXJpbmcpO1xuXHQgICAgfVxuXHQgICAgdmFyIHpvbmUgPSBab25lLmN1cnJlbnQ7XG5cdCAgICB2YXIgc291cmNlID0gdGFyZ2V0LmNvbnN0cnVjdG9yWyduYW1lJ10gKyAnLmFkZEV2ZW50TGlzdGVuZXI6JyArIGV2ZW50TmFtZTtcblx0ICAgIHZhciBkYXRhID0ge1xuXHQgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuXHQgICAgICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLFxuXHQgICAgICAgIG5hbWU6IGV2ZW50TmFtZSxcblx0ICAgICAgICB1c2VDYXB0dXJpbmc6IHVzZUNhcHR1cmluZyxcblx0ICAgICAgICBoYW5kbGVyOiBoYW5kbGVyXG5cdCAgICB9O1xuXHQgICAgem9uZS5zY2hlZHVsZUV2ZW50VGFzayhzb3VyY2UsIGRlbGVnYXRlLCBkYXRhLCBzY2hlZHVsZUV2ZW50TGlzdGVuZXIsIGNhbmNlbEV2ZW50TGlzdGVuZXIpO1xuXHR9XG5cdGZ1bmN0aW9uIHpvbmVBd2FyZVJlbW92ZUV2ZW50TGlzdGVuZXIoc2VsZiwgYXJncykge1xuXHQgICAgdmFyIGV2ZW50TmFtZSA9IGFyZ3NbMF07XG5cdCAgICB2YXIgaGFuZGxlciA9IGFyZ3NbMV07XG5cdCAgICB2YXIgdXNlQ2FwdHVyaW5nID0gYXJnc1syXSB8fCBmYWxzZTtcblx0ICAgIC8vIC0gSW5zaWRlIGEgV2ViIFdvcmtlciwgYHRoaXNgIGlzIHVuZGVmaW5lZCwgdGhlIGNvbnRleHQgaXMgYGdsb2JhbGBcblx0ICAgIC8vIC0gV2hlbiBgYWRkRXZlbnRMaXN0ZW5lcmAgaXMgY2FsbGVkIG9uIHRoZSBnbG9iYWwgY29udGV4dCBpbiBzdHJpY3QgbW9kZSwgYHRoaXNgIGlzIHVuZGVmaW5lZFxuXHQgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3pvbmUuanMvaXNzdWVzLzE5MFxuXHQgICAgdmFyIHRhcmdldCA9IHNlbGYgfHwgX2dsb2JhbDtcblx0ICAgIHZhciBldmVudFRhc2sgPSBmaW5kRXhpc3RpbmdSZWdpc3RlcmVkVGFzayh0YXJnZXQsIGhhbmRsZXIsIGV2ZW50TmFtZSwgdXNlQ2FwdHVyaW5nLCB0cnVlKTtcblx0ICAgIGlmIChldmVudFRhc2spIHtcblx0ICAgICAgICBldmVudFRhc2suem9uZS5jYW5jZWxUYXNrKGV2ZW50VGFzayk7XG5cdCAgICB9XG5cdCAgICBlbHNlIHtcblx0ICAgICAgICB0YXJnZXRbU1lNQk9MX1JFTU9WRV9FVkVOVF9MSVNURU5FUl0oZXZlbnROYW1lLCBoYW5kbGVyLCB1c2VDYXB0dXJpbmcpO1xuXHQgICAgfVxuXHR9XG5cdGZ1bmN0aW9uIHBhdGNoRXZlbnRUYXJnZXRNZXRob2RzKG9iaikge1xuXHQgICAgaWYgKG9iaiAmJiBvYmouYWRkRXZlbnRMaXN0ZW5lcikge1xuXHQgICAgICAgIHBhdGNoTWV0aG9kKG9iaiwgQUREX0VWRU5UX0xJU1RFTkVSLCBmdW5jdGlvbiAoKSB7IHJldHVybiB6b25lQXdhcmVBZGRFdmVudExpc3RlbmVyOyB9KTtcblx0ICAgICAgICBwYXRjaE1ldGhvZChvYmosIFJFTU9WRV9FVkVOVF9MSVNURU5FUiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gem9uZUF3YXJlUmVtb3ZlRXZlbnRMaXN0ZW5lcjsgfSk7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgICBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdH1cblx0ZXhwb3J0cy5wYXRjaEV2ZW50VGFyZ2V0TWV0aG9kcyA9IHBhdGNoRXZlbnRUYXJnZXRNZXRob2RzO1xuXHQ7XG5cdHZhciBvcmlnaW5hbEluc3RhbmNlS2V5ID0gZXhwb3J0cy56b25lU3ltYm9sKCdvcmlnaW5hbEluc3RhbmNlJyk7XG5cdC8vIHdyYXAgc29tZSBuYXRpdmUgQVBJIG9uIGB3aW5kb3dgXG5cdGZ1bmN0aW9uIHBhdGNoQ2xhc3MoY2xhc3NOYW1lKSB7XG5cdCAgICB2YXIgT3JpZ2luYWxDbGFzcyA9IF9nbG9iYWxbY2xhc3NOYW1lXTtcblx0ICAgIGlmICghT3JpZ2luYWxDbGFzcylcblx0ICAgICAgICByZXR1cm47XG5cdCAgICBfZ2xvYmFsW2NsYXNzTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGEgPSBiaW5kQXJndW1lbnRzKGFyZ3VtZW50cywgY2xhc3NOYW1lKTtcblx0ICAgICAgICBzd2l0Y2ggKGEubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcygpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMTpcblx0ICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcyhhWzBdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgICAgICB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldID0gbmV3IE9yaWdpbmFsQ2xhc3MoYVswXSwgYVsxXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XSA9IG5ldyBPcmlnaW5hbENsYXNzKGFbMF0sIGFbMV0sIGFbMl0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgNDpcblx0ICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcyhhWzBdLCBhWzFdLCBhWzJdLCBhWzNdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ0FyZyBsaXN0IHRvbyBsb25nLicpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgaW5zdGFuY2UgPSBuZXcgT3JpZ2luYWxDbGFzcyhmdW5jdGlvbiAoKSB7IH0pO1xuXHQgICAgdmFyIHByb3A7XG5cdCAgICBmb3IgKHByb3AgaW4gaW5zdGFuY2UpIHtcblx0ICAgICAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDQ3MjFcblx0ICAgICAgICBpZiAoY2xhc3NOYW1lID09PSAnWE1MSHR0cFJlcXVlc3QnICYmIHByb3AgPT09ICdyZXNwb25zZUJsb2InKVxuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAoZnVuY3Rpb24gKHByb3ApIHtcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnN0YW5jZVtwcm9wXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgX2dsb2JhbFtjbGFzc05hbWVdLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XVtwcm9wXS5hcHBseSh0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZ2xvYmFsW2NsYXNzTmFtZV0ucHJvdG90eXBlLCBwcm9wLCB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XVtwcm9wXSA9IFpvbmUuY3VycmVudC53cmFwKGZuLCBjbGFzc05hbWUgKyAnLicgKyBwcm9wKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV1bcHJvcF0gPSBmbjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldW3Byb3BdO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfShwcm9wKSk7XG5cdCAgICB9XG5cdCAgICBmb3IgKHByb3AgaW4gT3JpZ2luYWxDbGFzcykge1xuXHQgICAgICAgIGlmIChwcm9wICE9PSAncHJvdG90eXBlJyAmJiBPcmlnaW5hbENsYXNzLmhhc093blByb3BlcnR5KHByb3ApKSB7XG5cdCAgICAgICAgICAgIF9nbG9iYWxbY2xhc3NOYW1lXVtwcm9wXSA9IE9yaWdpbmFsQ2xhc3NbcHJvcF07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMucGF0Y2hDbGFzcyA9IHBhdGNoQ2xhc3M7XG5cdDtcblx0ZnVuY3Rpb24gY3JlYXRlTmFtZWRGbihuYW1lLCBkZWxlZ2F0ZSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gKEZ1bmN0aW9uKCdmJywgXCJyZXR1cm4gZnVuY3Rpb24gXCIgKyBuYW1lICsgXCIoKXtyZXR1cm4gZih0aGlzLCBhcmd1bWVudHMpfVwiKSkoZGVsZWdhdGUpO1xuXHQgICAgfVxuXHQgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBpZiB3ZSBmYWlsLCB3ZSBtdXN0IGJlIENTUCwganVzdCByZXR1cm4gZGVsZWdhdGUuXG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlKHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0fVxuXHRleHBvcnRzLmNyZWF0ZU5hbWVkRm4gPSBjcmVhdGVOYW1lZEZuO1xuXHRmdW5jdGlvbiBwYXRjaE1ldGhvZCh0YXJnZXQsIG5hbWUsIHBhdGNoRm4pIHtcblx0ICAgIHZhciBwcm90byA9IHRhcmdldDtcblx0ICAgIHdoaWxlIChwcm90byAmJiAhcHJvdG8uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcblx0ICAgICAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG5cdCAgICB9XG5cdCAgICBpZiAoIXByb3RvICYmIHRhcmdldFtuYW1lXSkge1xuXHQgICAgICAgIC8vIHNvbWVob3cgd2UgZGlkIG5vdCBmaW5kIGl0LCBidXQgd2UgY2FuIHNlZSBpdC4gVGhpcyBoYXBwZW5zIG9uIElFIGZvciBXaW5kb3cgcHJvcGVydGllcy5cblx0ICAgICAgICBwcm90byA9IHRhcmdldDtcblx0ICAgIH1cblx0ICAgIHZhciBkZWxlZ2F0ZU5hbWUgPSBleHBvcnRzLnpvbmVTeW1ib2wobmFtZSk7XG5cdCAgICB2YXIgZGVsZWdhdGU7XG5cdCAgICBpZiAocHJvdG8gJiYgIShkZWxlZ2F0ZSA9IHByb3RvW2RlbGVnYXRlTmFtZV0pKSB7XG5cdCAgICAgICAgZGVsZWdhdGUgPSBwcm90b1tkZWxlZ2F0ZU5hbWVdID0gcHJvdG9bbmFtZV07XG5cdCAgICAgICAgcHJvdG9bbmFtZV0gPSBjcmVhdGVOYW1lZEZuKG5hbWUsIHBhdGNoRm4oZGVsZWdhdGUsIGRlbGVnYXRlTmFtZSwgbmFtZSkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRlbGVnYXRlO1xuXHR9XG5cdGV4cG9ydHMucGF0Y2hNZXRob2QgPSBwYXRjaE1ldGhvZDtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvKlxuXHQgKiBUaGlzIGlzIG5lY2Vzc2FyeSBmb3IgQ2hyb21lIGFuZCBDaHJvbWUgbW9iaWxlLCB0byBlbmFibGVcblx0ICogdGhpbmdzIGxpa2UgcmVkZWZpbmluZyBgY3JlYXRlZENhbGxiYWNrYCBvbiBhbiBlbGVtZW50LlxuXHQgKi9cblx0dmFyIF9kZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcblx0dmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuXHR2YXIgX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG5cdHZhciB1bmNvbmZpZ3VyYWJsZXNLZXkgPSB1dGlsc18xLnpvbmVTeW1ib2woJ3VuY29uZmlndXJhYmxlcycpO1xuXHRmdW5jdGlvbiBwcm9wZXJ0eVBhdGNoKCkge1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgZGVzYykge1xuXHQgICAgICAgIGlmIChpc1VuY29uZmlndXJhYmxlKG9iaiwgcHJvcCkpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGFzc2lnbiB0byByZWFkIG9ubHkgcHJvcGVydHkgXFwnJyArIHByb3AgKyAnXFwnIG9mICcgKyBvYmopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgb3JpZ2luYWxDb25maWd1cmFibGVGbGFnID0gZGVzYy5jb25maWd1cmFibGU7XG5cdCAgICAgICAgaWYgKHByb3AgIT09ICdwcm90b3R5cGUnKSB7XG5cdCAgICAgICAgICAgIGRlc2MgPSByZXdyaXRlRGVzY3JpcHRvcihvYmosIHByb3AsIGRlc2MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX3RyeURlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZGVzYywgb3JpZ2luYWxDb25maWd1cmFibGVGbGFnKTtcblx0ICAgIH07XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmosIHByb3BzKSB7XG5cdCAgICAgICAgT2JqZWN0LmtleXMocHJvcHMpLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcblx0ICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgcHJvcHNbcHJvcF0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiBvYmo7XG5cdCAgICB9O1xuXHQgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvYmosIHByb3RvKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBwcm90byA9PT0gJ29iamVjdCcgJiYgIU9iamVjdC5pc0Zyb3plbihwcm90bykpIHtcblx0ICAgICAgICAgICAgT2JqZWN0LmtleXMocHJvdG8pLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcblx0ICAgICAgICAgICAgICAgIHByb3RvW3Byb3BdID0gcmV3cml0ZURlc2NyaXB0b3Iob2JqLCBwcm9wLCBwcm90b1twcm9wXSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX2NyZWF0ZShvYmosIHByb3RvKTtcblx0ICAgIH07XG5cdCAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gKG9iaiwgcHJvcCkge1xuXHQgICAgICAgIHZhciBkZXNjID0gX2dldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIHByb3ApO1xuXHQgICAgICAgIGlmIChpc1VuY29uZmlndXJhYmxlKG9iaiwgcHJvcCkpIHtcblx0ICAgICAgICAgICAgZGVzYy5jb25maWd1cmFibGUgPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGRlc2M7XG5cdCAgICB9O1xuXHR9XG5cdGV4cG9ydHMucHJvcGVydHlQYXRjaCA9IHByb3BlcnR5UGF0Y2g7XG5cdDtcblx0ZnVuY3Rpb24gX3JlZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjKSB7XG5cdCAgICB2YXIgb3JpZ2luYWxDb25maWd1cmFibGVGbGFnID0gZGVzYy5jb25maWd1cmFibGU7XG5cdCAgICBkZXNjID0gcmV3cml0ZURlc2NyaXB0b3Iob2JqLCBwcm9wLCBkZXNjKTtcblx0ICAgIHJldHVybiBfdHJ5RGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjLCBvcmlnaW5hbENvbmZpZ3VyYWJsZUZsYWcpO1xuXHR9XG5cdGV4cG9ydHMuX3JlZGVmaW5lUHJvcGVydHkgPSBfcmVkZWZpbmVQcm9wZXJ0eTtcblx0O1xuXHRmdW5jdGlvbiBpc1VuY29uZmlndXJhYmxlKG9iaiwgcHJvcCkge1xuXHQgICAgcmV0dXJuIG9iaiAmJiBvYmpbdW5jb25maWd1cmFibGVzS2V5XSAmJiBvYmpbdW5jb25maWd1cmFibGVzS2V5XVtwcm9wXTtcblx0fVxuXHRmdW5jdGlvbiByZXdyaXRlRGVzY3JpcHRvcihvYmosIHByb3AsIGRlc2MpIHtcblx0ICAgIGRlc2MuY29uZmlndXJhYmxlID0gdHJ1ZTtcblx0ICAgIGlmICghZGVzYy5jb25maWd1cmFibGUpIHtcblx0ICAgICAgICBpZiAoIW9ialt1bmNvbmZpZ3VyYWJsZXNLZXldKSB7XG5cdCAgICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eShvYmosIHVuY29uZmlndXJhYmxlc0tleSwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHt9IH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBvYmpbdW5jb25maWd1cmFibGVzS2V5XVtwcm9wXSA9IHRydWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGVzYztcblx0fVxuXHRmdW5jdGlvbiBfdHJ5RGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjLCBvcmlnaW5hbENvbmZpZ3VyYWJsZUZsYWcpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MpO1xuXHQgICAgfVxuXHQgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICBpZiAoZGVzYy5jb25maWd1cmFibGUpIHtcblx0ICAgICAgICAgICAgLy8gSW4gY2FzZSBvZiBlcnJvcnMsIHdoZW4gdGhlIGNvbmZpZ3VyYWJsZSBmbGFnIHdhcyBsaWtlbHkgc2V0IGJ5IHJld3JpdGVEZXNjcmlwdG9yKCksIGxldCdzIHJldHJ5IHdpdGggdGhlIG9yaWdpbmFsIGZsYWcgdmFsdWVcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBvcmlnaW5hbENvbmZpZ3VyYWJsZUZsYWcgPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgICAgICAgIGRlbGV0ZSBkZXNjLmNvbmZpZ3VyYWJsZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGRlc2MuY29uZmlndXJhYmxlID0gb3JpZ2luYWxDb25maWd1cmFibGVGbGFnO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBfZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHRocm93IGU7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgZGVmaW5lX3Byb3BlcnR5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgdXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdGZ1bmN0aW9uIHJlZ2lzdGVyRWxlbWVudFBhdGNoKF9nbG9iYWwpIHtcblx0ICAgIGlmICghdXRpbHNfMS5pc0Jyb3dzZXIgfHwgISgncmVnaXN0ZXJFbGVtZW50JyBpbiBfZ2xvYmFsLmRvY3VtZW50KSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBfcmVnaXN0ZXJFbGVtZW50ID0gZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50O1xuXHQgICAgdmFyIGNhbGxiYWNrcyA9IFtcblx0ICAgICAgICAnY3JlYXRlZENhbGxiYWNrJyxcblx0ICAgICAgICAnYXR0YWNoZWRDYWxsYmFjaycsXG5cdCAgICAgICAgJ2RldGFjaGVkQ2FsbGJhY2snLFxuXHQgICAgICAgICdhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2snXG5cdCAgICBdO1xuXHQgICAgZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIG9wdHMpIHtcblx0ICAgICAgICBpZiAob3B0cyAmJiBvcHRzLnByb3RvdHlwZSkge1xuXHQgICAgICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSAnRG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OjonICsgY2FsbGJhY2s7XG5cdCAgICAgICAgICAgICAgICBpZiAob3B0cy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoY2FsbGJhY2spKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9wdHMucHJvdG90eXBlLCBjYWxsYmFjayk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci52YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gWm9uZS5jdXJyZW50LndyYXAoZGVzY3JpcHRvci52YWx1ZSwgc291cmNlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lX3Byb3BlcnR5XzEuX3JlZGVmaW5lUHJvcGVydHkob3B0cy5wcm90b3R5cGUsIGNhbGxiYWNrLCBkZXNjcmlwdG9yKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMucHJvdG90eXBlW2NhbGxiYWNrXSA9IFpvbmUuY3VycmVudC53cmFwKG9wdHMucHJvdG90eXBlW2NhbGxiYWNrXSwgc291cmNlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRzLnByb3RvdHlwZVtjYWxsYmFja10pIHtcblx0ICAgICAgICAgICAgICAgICAgICBvcHRzLnByb3RvdHlwZVtjYWxsYmFja10gPSBab25lLmN1cnJlbnQud3JhcChvcHRzLnByb3RvdHlwZVtjYWxsYmFja10sIHNvdXJjZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX3JlZ2lzdGVyRWxlbWVudC5hcHBseShkb2N1bWVudCwgW25hbWUsIG9wdHNdKTtcblx0ICAgIH07XG5cdH1cblx0ZXhwb3J0cy5yZWdpc3RlckVsZW1lbnRQYXRjaCA9IHJlZ2lzdGVyRWxlbWVudFBhdGNoO1xuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHdlYlNvY2tldFBhdGNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgZXZlbnROYW1lcyA9ICdjb3B5IGN1dCBwYXN0ZSBhYm9ydCBibHVyIGZvY3VzIGNhbnBsYXkgY2FucGxheXRocm91Z2ggY2hhbmdlIGNsaWNrIGNvbnRleHRtZW51IGRibGNsaWNrIGRyYWcgZHJhZ2VuZCBkcmFnZW50ZXIgZHJhZ2xlYXZlIGRyYWdvdmVyIGRyYWdzdGFydCBkcm9wIGR1cmF0aW9uY2hhbmdlIGVtcHRpZWQgZW5kZWQgaW5wdXQgaW52YWxpZCBrZXlkb3duIGtleXByZXNzIGtleXVwIGxvYWQgbG9hZGVkZGF0YSBsb2FkZWRtZXRhZGF0YSBsb2Fkc3RhcnQgbWVzc2FnZSBtb3VzZWRvd24gbW91c2VlbnRlciBtb3VzZWxlYXZlIG1vdXNlbW92ZSBtb3VzZW91dCBtb3VzZW92ZXIgbW91c2V1cCBwYXVzZSBwbGF5IHBsYXlpbmcgcHJvZ3Jlc3MgcmF0ZWNoYW5nZSByZXNldCBzY3JvbGwgc2Vla2VkIHNlZWtpbmcgc2VsZWN0IHNob3cgc3RhbGxlZCBzdWJtaXQgc3VzcGVuZCB0aW1ldXBkYXRlIHZvbHVtZWNoYW5nZSB3YWl0aW5nIG1vemZ1bGxzY3JlZW5jaGFuZ2UgbW96ZnVsbHNjcmVlbmVycm9yIG1venBvaW50ZXJsb2NrY2hhbmdlIG1venBvaW50ZXJsb2NrZXJyb3IgZXJyb3Igd2ViZ2xjb250ZXh0cmVzdG9yZWQgd2ViZ2xjb250ZXh0bG9zdCB3ZWJnbGNvbnRleHRjcmVhdGlvbmVycm9yJy5zcGxpdCgnICcpO1xuXHRmdW5jdGlvbiBwcm9wZXJ0eURlc2NyaXB0b3JQYXRjaChfZ2xvYmFsKSB7XG5cdCAgICBpZiAodXRpbHNfMS5pc05vZGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgc3VwcG9ydHNXZWJTb2NrZXQgPSB0eXBlb2YgV2ViU29ja2V0ICE9PSAndW5kZWZpbmVkJztcblx0ICAgIGlmIChjYW5QYXRjaFZpYVByb3BlcnR5RGVzY3JpcHRvcigpKSB7XG5cdCAgICAgICAgLy8gZm9yIGJyb3dzZXJzIHRoYXQgd2UgY2FuIHBhdGNoIHRoZSBkZXNjcmlwdG9yOiAgQ2hyb21lICYgRmlyZWZveFxuXHQgICAgICAgIGlmICh1dGlsc18xLmlzQnJvd3Nlcikge1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgZXZlbnROYW1lcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHV0aWxzXzEucGF0Y2hPblByb3BlcnRpZXMoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCBudWxsKTtcblx0ICAgICAgICBpZiAodHlwZW9mIElEQkluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQkluZGV4LnByb3RvdHlwZSwgbnVsbCk7XG5cdCAgICAgICAgICAgIHV0aWxzXzEucGF0Y2hPblByb3BlcnRpZXMoSURCUmVxdWVzdC5wcm90b3R5cGUsIG51bGwpO1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQk9wZW5EQlJlcXVlc3QucHJvdG90eXBlLCBudWxsKTtcblx0ICAgICAgICAgICAgdXRpbHNfMS5wYXRjaE9uUHJvcGVydGllcyhJREJEYXRhYmFzZS5wcm90b3R5cGUsIG51bGwpO1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSwgbnVsbCk7XG5cdCAgICAgICAgICAgIHV0aWxzXzEucGF0Y2hPblByb3BlcnRpZXMoSURCQ3Vyc29yLnByb3RvdHlwZSwgbnVsbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChzdXBwb3J0c1dlYlNvY2tldCkge1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKFdlYlNvY2tldC5wcm90b3R5cGUsIG51bGwpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIC8vIFNhZmFyaSwgQW5kcm9pZCBicm93c2VycyAoSmVsbHkgQmVhbilcblx0ICAgICAgICBwYXRjaFZpYUNhcHR1cmluZ0FsbFRoZUV2ZW50cygpO1xuXHQgICAgICAgIHV0aWxzXzEucGF0Y2hDbGFzcygnWE1MSHR0cFJlcXVlc3QnKTtcblx0ICAgICAgICBpZiAoc3VwcG9ydHNXZWJTb2NrZXQpIHtcblx0ICAgICAgICAgICAgd2ViU29ja2V0UGF0Y2guYXBwbHkoX2dsb2JhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMucHJvcGVydHlEZXNjcmlwdG9yUGF0Y2ggPSBwcm9wZXJ0eURlc2NyaXB0b3JQYXRjaDtcblx0ZnVuY3Rpb24gY2FuUGF0Y2hWaWFQcm9wZXJ0eURlc2NyaXB0b3IoKSB7XG5cdCAgICBpZiAodXRpbHNfMS5pc0Jyb3dzZXIgJiYgIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnb25jbGljaycpXG5cdCAgICAgICAgJiYgdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgLy8gV2ViS2l0IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzQzNjRcblx0ICAgICAgICAvLyBJREwgaW50ZXJmYWNlIGF0dHJpYnV0ZXMgYXJlIG5vdCBjb25maWd1cmFibGVcblx0ICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsICdvbmNsaWNrJyk7XG5cdCAgICAgICAgaWYgKGRlc2MgJiYgIWRlc2MuY29uZmlndXJhYmxlKVxuXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCAnb25yZWFkeXN0YXRlY2hhbmdlJywge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIHZhciByZXN1bHQgPSAhIXJlcS5vbnJlYWR5c3RhdGVjaGFuZ2U7XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCAnb25yZWFkeXN0YXRlY2hhbmdlJywge30pO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHQ7XG5cdHZhciB1bmJvdW5kS2V5ID0gdXRpbHNfMS56b25lU3ltYm9sKCd1bmJvdW5kJyk7XG5cdC8vIFdoZW5ldmVyIGFueSBldmVudExpc3RlbmVyIGZpcmVzLCB3ZSBjaGVjayB0aGUgZXZlbnRMaXN0ZW5lciB0YXJnZXQgYW5kIGFsbCBwYXJlbnRzXG5cdC8vIGZvciBgb253aGF0ZXZlcmAgcHJvcGVydGllcyBhbmQgcmVwbGFjZSB0aGVtIHdpdGggem9uZS1ib3VuZCBmdW5jdGlvbnNcblx0Ly8gLSBDaHJvbWUgKGZvciBub3cpXG5cdGZ1bmN0aW9uIHBhdGNoVmlhQ2FwdHVyaW5nQWxsVGhlRXZlbnRzKCkge1xuXHQgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbihpKSB7XG5cdCAgICAgICAgdmFyIHByb3BlcnR5ID0gZXZlbnROYW1lc1tpXTtcblx0ICAgICAgICB2YXIgb25wcm9wZXJ0eSA9ICdvbicgKyBwcm9wZXJ0eTtcblx0ICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHByb3BlcnR5LCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGVsdCA9IGV2ZW50LnRhcmdldCwgYm91bmQsIHNvdXJjZTtcblx0ICAgICAgICAgICAgaWYgKGVsdCkge1xuXHQgICAgICAgICAgICAgICAgc291cmNlID0gZWx0LmNvbnN0cnVjdG9yWyduYW1lJ10gKyAnLicgKyBvbnByb3BlcnR5O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgc291cmNlID0gJ3Vua25vd24uJyArIG9ucHJvcGVydHk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgd2hpbGUgKGVsdCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKGVsdFtvbnByb3BlcnR5XSAmJiAhZWx0W29ucHJvcGVydHldW3VuYm91bmRLZXldKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYm91bmQgPSBab25lLmN1cnJlbnQud3JhcChlbHRbb25wcm9wZXJ0eV0sIHNvdXJjZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgYm91bmRbdW5ib3VuZEtleV0gPSBlbHRbb25wcm9wZXJ0eV07XG5cdCAgICAgICAgICAgICAgICAgICAgZWx0W29ucHJvcGVydHldID0gYm91bmQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHQgPSBlbHQucGFyZW50RWxlbWVudDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHRydWUpO1xuXHQgICAgfTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnROYW1lcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIF9sb29wXzEoaSk7XG5cdCAgICB9XG5cdCAgICA7XG5cdH1cblx0O1xuXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB3ZSBoYXZlIHRvIHBhdGNoIHRoZSBpbnN0YW5jZSBzaW5jZSB0aGUgcHJvdG8gaXMgbm9uLWNvbmZpZ3VyYWJsZVxuXHRmdW5jdGlvbiBhcHBseShfZ2xvYmFsKSB7XG5cdCAgICB2YXIgV1MgPSBfZ2xvYmFsLldlYlNvY2tldDtcblx0ICAgIC8vIE9uIFNhZmFyaSB3aW5kb3cuRXZlbnRUYXJnZXQgZG9lc24ndCBleGlzdCBzbyBuZWVkIHRvIHBhdGNoIFdTIGFkZC9yZW1vdmVFdmVudExpc3RlbmVyXG5cdCAgICAvLyBPbiBvbGRlciBDaHJvbWUsIG5vIG5lZWQgc2luY2UgRXZlbnRUYXJnZXQgd2FzIGFscmVhZHkgcGF0Y2hlZFxuXHQgICAgaWYgKCFfZ2xvYmFsLkV2ZW50VGFyZ2V0KSB7XG5cdCAgICAgICAgdXRpbHNfMS5wYXRjaEV2ZW50VGFyZ2V0TWV0aG9kcyhXUy5wcm90b3R5cGUpO1xuXHQgICAgfVxuXHQgICAgX2dsb2JhbC5XZWJTb2NrZXQgPSBmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICAgIHZhciBzb2NrZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IG5ldyBXUyhhLCBiKSA6IG5ldyBXUyhhKTtcblx0ICAgICAgICB2YXIgcHJveHlTb2NrZXQ7XG5cdCAgICAgICAgLy8gU2FmYXJpIDcuMCBoYXMgbm9uLWNvbmZpZ3VyYWJsZSBvd24gJ29ubWVzc2FnZScgYW5kIGZyaWVuZHMgcHJvcGVydGllcyBvbiB0aGUgc29ja2V0IGluc3RhbmNlXG5cdCAgICAgICAgdmFyIG9ubWVzc2FnZURlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvY2tldCwgJ29ubWVzc2FnZScpO1xuXHQgICAgICAgIGlmIChvbm1lc3NhZ2VEZXNjICYmIG9ubWVzc2FnZURlc2MuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuXHQgICAgICAgICAgICBwcm94eVNvY2tldCA9IE9iamVjdC5jcmVhdGUoc29ja2V0KTtcblx0ICAgICAgICAgICAgWydhZGRFdmVudExpc3RlbmVyJywgJ3JlbW92ZUV2ZW50TGlzdGVuZXInLCAnc2VuZCcsICdjbG9zZSddLmZvckVhY2goZnVuY3Rpb24gKHByb3BOYW1lKSB7XG5cdCAgICAgICAgICAgICAgICBwcm94eVNvY2tldFtwcm9wTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvY2tldFtwcm9wTmFtZV0uYXBwbHkoc29ja2V0LCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAvLyB3ZSBjYW4gcGF0Y2ggdGhlIHJlYWwgc29ja2V0XG5cdCAgICAgICAgICAgIHByb3h5U29ja2V0ID0gc29ja2V0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKHByb3h5U29ja2V0LCBbJ2Nsb3NlJywgJ2Vycm9yJywgJ21lc3NhZ2UnLCAnb3BlbiddKTtcblx0ICAgICAgICByZXR1cm4gcHJveHlTb2NrZXQ7XG5cdCAgICB9O1xuXHQgICAgZm9yICh2YXIgcHJvcCBpbiBXUykge1xuXHQgICAgICAgIF9nbG9iYWwuV2ViU29ja2V0W3Byb3BdID0gV1NbcHJvcF07XG5cdCAgICB9XG5cdH1cblx0ZXhwb3J0cy5hcHBseSA9IGFwcGx5O1xuXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRmdW5jdGlvbiBwYXRjaFRpbWVyKHdpbmRvdywgc2V0TmFtZSwgY2FuY2VsTmFtZSwgbmFtZVN1ZmZpeCkge1xuXHQgICAgdmFyIHNldE5hdGl2ZSA9IG51bGw7XG5cdCAgICB2YXIgY2xlYXJOYXRpdmUgPSBudWxsO1xuXHQgICAgc2V0TmFtZSArPSBuYW1lU3VmZml4O1xuXHQgICAgY2FuY2VsTmFtZSArPSBuYW1lU3VmZml4O1xuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVUYXNrKHRhc2spIHtcblx0ICAgICAgICB2YXIgZGF0YSA9IHRhc2suZGF0YTtcblx0ICAgICAgICBkYXRhLmFyZ3NbMF0gPSB0YXNrLmludm9rZTtcblx0ICAgICAgICBkYXRhLmhhbmRsZUlkID0gc2V0TmF0aXZlLmFwcGx5KHdpbmRvdywgZGF0YS5hcmdzKTtcblx0ICAgICAgICByZXR1cm4gdGFzaztcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGNsZWFyVGFzayh0YXNrKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyTmF0aXZlKHRhc2suZGF0YS5oYW5kbGVJZCk7XG5cdCAgICB9XG5cdCAgICBzZXROYXRpdmUgPSB1dGlsc18xLnBhdGNoTWV0aG9kKHdpbmRvdywgc2V0TmFtZSwgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB2YXIgem9uZSA9IFpvbmUuY3VycmVudDtcblx0ICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgICAgICAgICBoYW5kbGVJZDogbnVsbCxcblx0ICAgICAgICAgICAgICAgIGlzUGVyaW9kaWM6IG5hbWVTdWZmaXggPT09ICdJbnRlcnZhbCcsXG5cdCAgICAgICAgICAgICAgICBkZWxheTogKG5hbWVTdWZmaXggPT09ICdUaW1lb3V0JyB8fCBuYW1lU3VmZml4ID09PSAnSW50ZXJ2YWwnKSA/IGFyZ3NbMV0gfHwgMCA6IG51bGwsXG5cdCAgICAgICAgICAgICAgICBhcmdzOiBhcmdzXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gem9uZS5zY2hlZHVsZU1hY3JvVGFzayhzZXROYW1lLCBhcmdzWzBdLCBvcHRpb25zLCBzY2hlZHVsZVRhc2ssIGNsZWFyVGFzayk7XG5cdCAgICAgICAgICAgIGlmICghdGFzaykge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgLy8gTm9kZS5qcyBtdXN0IGFkZGl0aW9uYWxseSBzdXBwb3J0IHRoZSByZWYgYW5kIHVucmVmIGZ1bmN0aW9ucy5cblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IHRhc2suZGF0YS5oYW5kbGVJZDtcblx0ICAgICAgICAgICAgaWYgKGhhbmRsZS5yZWYgJiYgaGFuZGxlLnVucmVmKSB7XG5cdCAgICAgICAgICAgICAgICB0YXNrLnJlZiA9IGhhbmRsZS5yZWYuYmluZChoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgdGFzay51bnJlZiA9IGhhbmRsZS51bnJlZi5iaW5kKGhhbmRsZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBjYXVzZSBhbiBlcnJvciBieSBjYWxsaW5nIGl0IGRpcmVjdGx5LlxuXHQgICAgICAgICAgICByZXR1cm4gZGVsZWdhdGUuYXBwbHkod2luZG93LCBhcmdzKTtcblx0ICAgICAgICB9XG5cdCAgICB9OyB9KTtcblx0ICAgIGNsZWFyTmF0aXZlID0gdXRpbHNfMS5wYXRjaE1ldGhvZCh3aW5kb3csIGNhbmNlbE5hbWUsIGZ1bmN0aW9uIChkZWxlZ2F0ZSkgeyByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcblx0ICAgICAgICB2YXIgdGFzayA9IGFyZ3NbMF07XG5cdCAgICAgICAgaWYgKHRhc2sgJiYgdHlwZW9mIHRhc2sudHlwZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgaWYgKHRhc2suY2FuY2VsRm4gJiYgdGFzay5kYXRhLmlzUGVyaW9kaWMgfHwgdGFzay5ydW5Db3VudCA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgLy8gRG8gbm90IGNhbmNlbCBhbHJlYWR5IGNhbmNlbGVkIGZ1bmN0aW9uc1xuXHQgICAgICAgICAgICAgICAgdGFzay56b25lLmNhbmNlbFRhc2sodGFzayk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIC8vIGNhdXNlIGFuIGVycm9yIGJ5IGNhbGxpbmcgaXQgZGlyZWN0bHkuXG5cdCAgICAgICAgICAgIGRlbGVnYXRlLmFwcGx5KHdpbmRvdywgYXJncyk7XG5cdCAgICAgICAgfVxuXHQgICAgfTsgfSk7XG5cdH1cblx0ZXhwb3J0cy5wYXRjaFRpbWVyID0gcGF0Y2hUaW1lcjtcblxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi96b25lLmpzL2Rpc3Qvem9uZS5qc1xuICoqIG1vZHVsZSBpZCA9IDYwOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==